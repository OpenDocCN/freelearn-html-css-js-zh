<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;HTML Editor and Custom Tools"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. HTML Editor and Custom Tools</h1></div></div></div><p>Interactive HTML editors are an important part of any website that encourages users to post their own written content. Forums and blogs frequently offer these controls so that users can create content with attractive styling just as if it was created in a word processor. It is especially useful for users who are unfamiliar with how to format text using HTML tags or CSS styles. For that matter, even users who are familiar with HTML and CSS can appreciate not having to type it all out. This chapter will introduce the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Kendo Editor widget basics</li><li class="listitem" style="list-style-type: disc">Configuring the Editor widget tools</li><li class="listitem" style="list-style-type: disc">Using HTML snippets</li><li class="listitem" style="list-style-type: disc">Customizing the Editor widget tools</li></ul></div><div class="section" title="Understanding the HTML Editor"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec36"/>Understanding the HTML Editor</h1></div></div></div><p>The Kendo Editor widget <a id="id319" class="indexterm"/> creates an area on a web page where a user can create formatted text content. To see a basic example in action, copy this code into a new HTML page called <code class="literal">HtmlEditor.html</code>. This will allow you to see the widget in use on an actual page and will provide a starting point for the rest of the chapter.</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;&lt;/title&gt;
&lt;script src="/Scripts/kendo/jquery.js"&gt;&lt;/script&gt;
&lt;script src="/Scripts/kendo/kendo.all.js"&gt;&lt;/script&gt;
&lt;link href="/Content/kendo/kendo.common.css" rel="stylesheet" /&gt;
&lt;link href="/Content/kendo/kendo.default.css" rel="stylesheet" /&gt;
&lt;style type="text/css"&gt;
textarea {
width: 100%;
height: 300px;
        }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;textarea id="editor"&gt;&lt;/textarea&gt;
&lt;script type="text/javascript"&gt;
        $(document).ready(function () {
            $("#editor").kendoEditor();
        });
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>This is assuming <a id="id320" class="indexterm"/>all default settings since no settings or options are explicitly set.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>Note that we have bound the <code class="literal">kendoEditor</code> function to a <code class="literal">textarea</code> element, this is important and you should always bind HTML Editor controls to a <code class="literal">textarea</code> element so that the functionality can degrade gracefully for browsers that may not support the required JavaScript features.</p></div></div><p>If we had implemented this using ASP.NET MVC, it would look like this in the view:</p><div class="informalexample"><pre class="programlisting">@using Kendo.Mvc.UI;

@{
ViewBag.Title = "Html Editor";
}
&lt;style type="text/css"&gt;
textarea {
width: 100%;
height: 300px;
    }
&lt;/style&gt;

&lt;h2&gt;Html Editor&lt;/h2&gt;
@(Html.Kendo().Editor()
        .Name("htmlEditor"))</pre></div><p>Note again that the Kendo MVC extensions will generate the HTML Editor within a <code class="literal">textarea</code> element, which is why the style declaration for <code class="literal">textarea</code> elements works in the page output.</p><p>Regardless of whether you use HTML or an MVC view, this is how the page output looks with all defaults assumed. I have added some text using the HTML Editor features to illustrate the purpose of the control:</p><div class="mediaobject"><img src="graphics/4346OT_05_01.jpg" alt="Understanding the HTML Editor"/></div><p>Take a look at all of the tool buttons across the top of the Editor widget. Click on them as you type text to observe<a id="id321" class="indexterm"/> what they do. Also, note that the different buttons generated by the Kendo HTML Editor all support the HTML <code class="literal">tabindex</code> so you can use the <span class="emphasis"><em>Tab</em></span> key and the <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Tab</em></span> key combination to move back and forth respectively between the commands in order if you want.</p><p>For many sites, this is probably sufficient functionality already. To use the formatted text that the user has created, simply retrieve the value of the <code class="literal">textarea</code> element and it will contain both the content and HTML markup.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p><span class="strong"><strong>Don't forget to check your input</strong></span></p><p>Since you are openly allowing the user to post HTML markup within the content of his or her data, take extra care to sanitize the input before you place it into a database or load it into another page. Even though the HTML markup generated by the Kendo tool is safe, you can never trust the final markup that is transmitted to the server from the user's browser and must always treat it as if it may contain harmful code.</p></div></div><p>Before you use the formatted text, however, you also need to check whether the value you are processing has been HTML encoded or not. If you retrieve the raw value of the <code class="literal">textarea</code> element from the DOM, you will get HTML encoded data. This means that <code class="literal">&lt;strong&gt;text&lt;/strong&gt;</code> becomes <code class="literal">&amp;lt;strong&amp;gt;text&amp;lt;/strong&amp;gt;</code> which may or may not be what you actually want.</p><p>To get the non-HTML encoded data, you need to call the <code class="literal">value()</code> function on the <code class="literal">kendoEditor</code> object by using code like this:</p><div class="informalexample"><pre class="programlisting">var editor = $("#editor").data("kendoEditor");
var nonEncodedText = editor.value();</pre></div><p>But again, you need to be careful with what you are doing. You cannot post non-HTML encoded data like this to most web servers without bypassing some important security measures. The safer <a id="id322" class="indexterm"/>option would be to post the data to the web server in an HTML encoded form, then decode it and sanitize on the server-side before using it. This way you can still rightly reject some potentially malicious code from the page outright before starting the process of interpreting the user input.</p><p>Here is an updated page with some buttons that show you the different outputs from the DOM <code class="literal">val()</code> function<a id="id323" class="indexterm"/> versus the <code class="literal">kendoEditor value()</code> function<a id="id324" class="indexterm"/>:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;&lt;/title&gt;
&lt;scriptsrc="/Scripts/kendo/jquery.js"&gt;&lt;/script&gt;
&lt;scriptsrc="/Scripts/kendo/kendo.all.js"&gt;&lt;/script&gt;
&lt;link href="/Content/kendo/kendo.common.css" rel="stylesheet" /&gt;
&lt;link href="/Content/kendo/kendo.default.css" rel="stylesheet" /&gt;
&lt;style type="text/css"&gt;
textarea {
width: 100%;
height: 300px;
        }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;textarea id="editor"&gt;&lt;/textarea&gt;
&lt;button name="showKendoVal" id="showKendoVal" type="button"&gt;Show Kendo Value&lt;/button&gt;&lt;br /&gt;
&lt;button name="showHtmlVal" id="showHtmlVal" type="button"&gt;Show HTML Value&lt;/button&gt;
&lt;script type="text/javascript"&gt;
        $(document).ready(function () {
            $("#editor").kendoEditor();
            $("#showHtmlVal").click(function () {
alert($("#editor").val());
            });
var editor = $("#editor").data("kendoEditor");
            $("#showKendoVal").click(function () {
alert(editor.value());
            });
        });
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>This is the text retrieved from the Kendo <code class="literal">value()</code> function.</p><div class="mediaobject"><img src="graphics/4346OT_05_08.jpg" alt="Understanding the HTML Editor"/></div><p>This is the text<a id="id325" class="indexterm"/> retrieved from the <code class="literal">innerHTML</code> of the Editor Widget.</p><div class="mediaobject"><img src="graphics/4346OT_05_09.jpg" alt="Understanding the HTML Editor"/></div></div></div>
<div class="section" title="Adding and removing buttons from the toolbar"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec37"/>Adding and removing buttons from the toolbar</h1></div></div></div><p>There are a<a id="id326" class="indexterm"/> few more standard tools that are available in the HTML Editor toolbar<a id="id327" class="indexterm"/> that are not included by default:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Subscript</li><li class="listitem" style="list-style-type: disc">Superscript</li><li class="listitem" style="list-style-type: disc">View HTML</li></ul></div><p>To include these tools, you need to specify the <code class="literal">tools</code> property when you create the <code class="literal">kendoEditor</code> object like this and list the specific tools that you want displayed:</p><div class="informalexample"><pre class="programlisting">$("#editor").kendoEditor({
tools: [
"bold",
"italic",
"underline",
"strikethrough",
"fontName",
"fontSize",
"foreColor",
"backColor",
"justifyLeft",
"justifyCenter",
"justifyRight",
"justifyFull",
"insertUnorderedList",
"insertOrderedList",
"indent",
"outdent",
"formatBlock",
"createLink",
"unlink",
"insertImage",
"subscript",
"superscript",
"viewHtml"
]
});</pre></div><p>If you specify <code class="literal">tools</code> you need to name all the standard tools too, if you leave any out they will be <a id="id328" class="indexterm"/>removed from the toolbar<a id="id329" class="indexterm"/> on your page. Conversely, here is how you would add the subscript and superscript tools using ASP.NET MVC, curiously the <code class="literal">viewHtml</code> is not available in this method:</p><div class="informalexample"><pre class="programlisting">@(Html.Kendo().Editor()
.Name("htmlEditor")
.Tools(tools =&gt; tools
.SubScript()
.SuperScript()))</pre></div><p>It could hardly be more concise, especially since with this method all of the default tools are assumed and you only have<a id="id330" class="indexterm"/> to add <a id="id331" class="indexterm"/>those that you want to include. If you <a id="id332" class="indexterm"/>wanted to clear out the default list of tools and then add only those that you want, you would first call <code class="literal">Clear()</code> within the <code class="literal">Tools</code> lambda expression and then add the specific tools that you wanted afterwards.</p><p>Here is the output with all of the standard tools included:</p><div class="mediaobject"><img src="graphics/4346OT_05_02.jpg" alt="Adding and removing buttons from the toolbar"/></div></div>
<div class="section" title="Adding the Styles tool"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec38"/>Adding the Styles tool</h1></div></div></div><p>The Styles tool <a id="id333" class="indexterm"/>can be added to the HTML Editor toolbar to <a id="id334" class="indexterm"/>give the user access to some predefined styles that you have created. This could be useful if your users are using a special theme or if there are global styles that you want the users to have easy access to. To enable this, you configure the tools through the <code class="literal">kendoEditor</code> object and specify which options should appear in a drop-down list of styles. Here is an example:</p><div class="informalexample"><pre class="programlisting">$("#editor").kendoEditor({
tools: [
"bold",
"italic",
"underline",
"strikethrough",
"fontName",
"fontSize",
"foreColor",
"backColor",
"justifyLeft",
"justifyCenter",
"justifyRight",
"justifyFull",
"insertUnorderedList",
"insertOrderedList",
"indent",
"outdent",
"formatBlock",
"createLink",
"unlink",
"insertImage",
"subscript",
"superscript",
"viewHtml",
"style"
],
style:[
{text: "Big Blue", value:"bigBlue"},
{text: "Dark Grey", value:"darkGrey"}
],
stylesheets:[
"css/StyleTool.css"
]
});</pre></div><p>Here are the contents of the <code class="literal">StyleTool.css</code> file:</p><div class="informalexample"><pre class="programlisting">.bigBlue {
font-size:large;
color:blue;
}
.darkGrey {
color:white;
background-color:#111111;
}</pre></div><p>To make this work, I added the Style tool to the list of tools and then added the <code class="literal">style</code> configuration property <a id="id335" class="indexterm"/>and the optional <code class="literal">stylesheets</code> configuration property. The <code class="literal">style</code> configuration property defines the different options that appear<a id="id336" class="indexterm"/> in the Styles drop-down list, and which CSS classnames should be applied when these styles are selected for some text in the HTML editor <code class="literal">textarea</code>. The <code class="literal">stylesheets</code> configuration option allows you to import some additional stylesheets if they are necessary<a id="id337" class="indexterm"/> to <a id="id338" class="indexterm"/>display your custom styles.</p><p>Here is how you would implement these styles using ASP.NET MVC:</p><div class="informalexample"><pre class="programlisting">@(Html.Kendo().Editor()
.Name("htmlEditor")
.Tools(tools =&gt; tools
.SubScript()
.SuperScript()
.Styles(styles =&gt; styles
.Add("Big Blue", "bigBlue")
.Add("Dark Grey", "darkGrey"))
)
.StyleSheets(css =&gt;css
.Add("/Content/StyleTool.css"))
)</pre></div><p>Here is the output from this code:</p><div class="mediaobject"><img src="graphics/4346OT_05_03.jpg" alt="Adding the Styles tool"/></div><p>I included some styled text for the sake of demonstration and clicked on the <span class="strong"><strong>Styles</strong></span> drop-down list to show how the options in that list are also styled to match their respective CSS classes.</p><div class="section" title="Tool for inserting HTML snippets"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec36"/>Tool for inserting HTML snippets</h2></div></div></div><p>The<a id="id339" class="indexterm"/> Snippets tool<a id="id340" class="indexterm"/> is a special toolbar option that is designed to insert predefined blocks of text into the editor window with a single click. It can be used for adding canned responses to common questions, signature blocks, time stamps, or any number of scenarios where pre-typed text would be useful. To enable this, just like the <span class="strong"><strong>Styles</strong></span> option you configure the tools through the <code class="literal">kendoEditor</code> object<a id="id341" class="indexterm"/> and specify which options should<a id="id342" class="indexterm"/> appear in a drop-down list of styles. Here is an example:</p><div class="informalexample"><pre class="programlisting">$("#editor").kendoEditor({
tools: [
"bold",
"italic",
"underline",
"strikethrough",
"fontName",
"fontSize",
"foreColor",
"backColor",
"justifyLeft",
"justifyCenter",
"justifyRight",
"justifyFull",
"insertUnorderedList",
"insertOrderedList",
"indent",
"outdent",
"formatBlock",
"createLink",
"unlink",
"insertImage",
"subscript",
"superscript",
"viewHtml",
"style",
"insertHtml"
],
style:[
{text: "Big Blue", value:"bigBlue"},
{text: "Dark Grey", value:"darkGrey"}
],
stylesheets:[
"css/StyleTool.css"
],
insertHtml:[
{ text: "Today's date", value: "December 7, 2012" },
{ text: "Signature", value: "&lt;p&gt;Sincerely,&lt;br/&gt;John Adams&lt;/p&gt;" }
]
});</pre></div><p>Notice that this requires very little configuration to enable. We have included the <code class="literal">insertHtml</code> option in the <code class="literal">tools</code> configuration property and then added the <code class="literal">insertHtml</code> configuration <a id="id343" class="indexterm"/>property at the end of the <code class="literal">kendoEditor</code> definition. Inside the <code class="literal">insertHtml</code> configuration property, we<a id="id344" class="indexterm"/> have included an array of very simple objects. They define the title of each item that should appear in the drop-down list and the exact mark-up that should be pasted into the HTML Editor when the title is selected.</p><p>Here is how you would implement these Snippets using ASP.NET MVC:</p><div class="informalexample"><pre class="programlisting">@(Html.Kendo().Editor()
.Name("htmlEditor")
.Tools(tools =&gt; tools
.SubScript()
.SuperScript()
.Styles(styles =&gt; styles
.Add("Big Blue", "bigBlue")
.Add("Dark Grey", "darkGrey"))
.Snippets(snippets =&gt; snippets
.Add("Today's Date", DateTime.Today.Date.ToShortDateString())
.Add("Signature", "&lt;p&gt;Sincerely,&lt;br/&gt;John Adams&lt;/p&gt;"))
)
.StyleSheets(css =&gt;css
.Add("/Content/StyleTool.css"))
)</pre></div><p>Here is the output from this code:</p><div class="mediaobject"><img src="graphics/4346OT_05_04.jpg" alt="Tool for inserting HTML snippets"/></div></div></div>
<div class="section" title="Customizing HTML Editor tools"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec39"/>Customizing HTML Editor tools</h1></div></div></div><p>The Kendo HTML Editor control<a id="id345" class="indexterm"/> allows you to add your own custom options to the toolbar. This is a remarkable touch of flexibility in the Kendo UI framework, and is something that you may find quite useful if the available built-in tools do not completely suit your needs. The HTML Editor can accept at least three types of custom tools. There could be more but these three appear in the published documentation on the Kendo UI website:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Override Built-in Tools</li><li class="listitem" style="list-style-type: disc">Custom Template Tools</li><li class="listitem" style="list-style-type: disc">Custom In-line Tools</li></ul></div><div class="section" title="Drop-down list tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl3sec14"/>Drop-down list tools</h2></div></div></div><p>If you would <a id="id346" class="indexterm"/>like to alter some of the built-in drop-down list tools, you can redefine which options appear inside them. This does not alter the nature <a id="id347" class="indexterm"/>of the tools or what the tools do. It only determines which options appear in the drop-down lists of the tools when you click on them. As an example, consider limiting which options appear in the font tool. By replacing the contents of the <code class="literal">items</code> array, you can customize exactly which options appear in the tool when it displays on the page:</p><div class="informalexample"><pre class="programlisting">$("#editor").kendoEditor({
tools: [
{
name: "fontName",
items: 
[{text:"Garamond", value: "Garamond, serif"},
{text:"Calibri", value:"calibri, sans-serif"}]
}
]
});</pre></div><p>This code sample demonstrates a customized <code class="literal">fontName</code> tool limited to two specific options. These two fonts are not included in the default <code class="literal">fontName</code> tool as we saw before, but you could also include default fonts in this custom list as well. Here is the output of the HTML Editor configured with this custom tool:</p><div class="mediaobject"><img src="graphics/4346OT_05_05.jpg" alt="Drop-down list tools"/></div><p>You will notice that the first two options in the list are not options that I defined in my source code—<span class="strong"><strong>inherited font</strong></span> and <span class="strong"><strong>Verdana</strong></span>. These appear because the HTML Editor is enabling the <a id="id348" class="indexterm"/>font on <a id="id349" class="indexterm"/>the page from the outer containing HTML markup and is calling it the <span class="strong"><strong>inherited font</strong></span>. It then labels this same font by name in case that helps the user make a font selection, so <span class="strong"><strong>inherited font</strong></span> and <span class="strong"><strong>Verdana</strong></span> are actually both referring to the same font inherited from the outer HTML markup of the overall page.</p><p>This type of custom tool configuration should work with any of the custom tools that appear as a drop-down list such as the font name, font size, and format block tools.</p></div><div class="section" title="Button tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl3sec15"/>Button tools</h2></div></div></div><p>It seems <a id="id350" class="indexterm"/>unlikely that you will need to override many of these <a id="id351" class="indexterm"/>controls since it would probably be more effective to create your own tool instead. Just in case you wanted to see how it was done, however, here is a sample of code taken from the Kendo UI website that demonstrates how to replace the <code class="literal">viewHtml</code> tool with custom code that replaces its functionality:</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/x-kendo-template" id="viewHtml-template"&gt;
&lt;div&gt;
&lt;textarea style="width: 400px; height: 300px;"&gt;&lt;/textarea&gt;
&lt;div class="viewHtml-actions"&gt;
&lt;button class="k-button viewHtml-update"&gt;Update&lt;/button&gt;
&lt;button class="k-button viewHtml-cancel"&gt;Cancel&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/script&gt;
&lt;script&gt;
$("#editor").kendoEditor({
tools: 
[{
name: "viewHtml",
tooltip: "View HTML",
exec: function(e) {
var editor = $(this).data("kendoEditor");

var dialog = $($("#viewHtml-template").html())
.find("textarea").val(editor.value()).end()
.find(".viewHtml-update")
.click(function() {
editor.value(dialog.element
.find("textarea").val());
dialog.close();
})
.end()
.find(".viewHtml-cancel")
.click(function() {
dialog.close();
})
.end()
.kendoWindow({
modal: true,
title: "View HTML",
deactivate: function() {
dialog.destroy();
}
}).data("kendoWindow");

dialog.center().open();
}
}]
})
&lt;/script&gt;</pre></div><p>Here is the code as it appears on the page:</p><div class="mediaobject"><img src="graphics/4346OT_05_10.jpg" alt="Button tools"/></div><p>This source code includes both a template and the <code class="literal">kendoEditor</code> configuration. You can see that this code is <a id="id352" class="indexterm"/>basically opening a dialog, filling it with the content from the HTML Editor control, <a id="id353" class="indexterm"/>wiring up the events for the buttons inside the dialog, and then displaying it to the user. It gives an example, at least, of what overriding one of the built-in tools looks like. Note that the logic for the tool's execution is inside a property called <code class="literal">exec</code>; this is common for all custom button tools as well. The <code class="literal">tooltip</code> property is the text that is displayed when the mouse is hovered over the button in the toolbar.</p></div><div class="section" title="Custom template tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec38"/>Custom template tools</h2></div></div></div><p>If you <a id="id354" class="indexterm"/>want to<a id="id355" class="indexterm"/> create your own custom tool that has a drop-down list of options, the custom template tool is the best choice. It allows you to use a Kendo UI template to markup how the tool should be displayed on the toolbar, and you can wire up its functionality separately so that your tool can do whatever it needs to do:</p><div class="informalexample"><pre class="programlisting">&lt;textarea id="editor"&gt;&lt;/textarea&gt;
&lt;button name="showKendoVal" id="showKendoVal" type="button"&gt;Show Kendo Value&lt;/button&gt;&lt;br /&gt;
&lt;button name="showHtmlVal" id="showHtmlVal" type="button"&gt;Show HTML Value&lt;/button&gt;
&lt;script type="text/x-kendo-template" id="editorColor-template"&gt;
&lt;label for="customTool"&gt;Editor BG:&lt;/label&gt;
&lt;select name="customTool" id="customTool"&gt;&lt;option value=''&gt;None&lt;/option&gt;&lt;option value="blue"&gt;Blue&lt;/option&gt;&lt;option value="green"&gt;Green&lt;/option&gt;&lt;/select&gt;
&lt;/script&gt;
&lt;script type="text/javascript"&gt;
$(document).ready(function () {
$("#editor").kendoEditor({
tools: [
{
name: "editorBackground",
template: $("#editorColor-template").html()
}
]
});
$("#showHtmlVal").click(function () {
alert($("#editor").val());
});
var editor = $("#editor").data("kendoEditor");
$("#showKendoVal").click(function () {
alert(editor.value());
});
$("#customTool").change(function (e) {
$("#editor").data("kendoEditor").body.style.backgroundColor =
$("#customTool").val();
});
});
&lt;/script&gt;</pre></div><p>You can see the<a id="id356" class="indexterm"/> Kendo template where the <code class="literal">label</code> and <code class="literal">select</code> elements are declared. The behavior for the <code class="literal">select</code> element is <a id="id357" class="indexterm"/>defined in the jQuery code, but the custom drop-down list tool is added to the HTML Editor through the <code class="literal">tools</code> property.</p><p>Here is the output of the page with this custom tool:</p><div class="mediaobject"><img src="graphics/4346OT_05_06.jpg" alt="Custom template tools"/></div><p>This is how you <a id="id358" class="indexterm"/>create custom tools that behave as a <a id="id359" class="indexterm"/>drop-down list. As you can see, the behavior is left completely up to you so you, can create whatever tool you need for your site's use case.</p></div><div class="section" title="Custom in-line tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec39"/>Custom in-line tools</h2></div></div></div><p>If you <a id="id360" class="indexterm"/>want to <a id="id361" class="indexterm"/>create your own button tool on the toolbar, the in-line tool is the right choice. It allows you to define a tool name and the code to execute when that tool is selected from the toolbar.</p><div class="informalexample"><pre class="programlisting">$("#editor").kendoEditor({
tools: [
{
name: "addHr",
tooltip: "Insert Horizontal Rule",
exec: function (e) {
var editor = $(this).data("kendoEditor");
editor.exec("insertHtml", { value: "&lt;hr/&gt;" });
}
}
]
});</pre></div><p>This code shows a custom tool called <code class="literal">addHr</code> that will add an <code class="literal">hr</code> element to the HTML Editor control <a id="id362" class="indexterm"/>when clicked. You can also see the use of the <code class="literal">exec</code> function on the <code class="literal">kendoEditor</code> where <a id="id363" class="indexterm"/>you can indicate one of the built-in functions/tools of the HTML Editor and then provide an object that supplies the parameters for it.</p><p>Here is the output from this code:</p><div class="mediaobject"><img src="graphics/4346OT_05_07.jpg" alt="Custom in-line tools"/></div></div></div>
<div class="section" title="Using the HTML Editor API"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec40"/>Using the HTML Editor API</h1></div></div></div><p>The <a id="id364" class="indexterm"/>Kendo HTML Editor widget has a large set of API configuration options which allow <a id="id365" class="indexterm"/>you to fine-tune the widget to the specific needs and situation of your web page. It also exposes a set of methods and events that you can use to programmatically enable and react to functionality that the Edit widget exposes as it runs on the page. These options, taken together, are how you extend the Editor widget beyond its out of the box abilities.</p><div class="section" title="Configuration options"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec40"/>Configuration options</h2></div></div></div><p>We have already <a id="id366" class="indexterm"/>covered some of this in the material <a id="id367" class="indexterm"/>above, but here are the configuration options available for the HTML Editor control. As always, please check the Kendo UI Web documentation at <code class="literal">docs.kendoui.com/api/web/editor</code> for a more detailed list of configuration settings for these options, and to get the latest changes or additions to the API.</p><div class="informalexample"><pre class="programlisting">$("#editor").kendoEditor({
encoded: true,  // whether or not the editor should emit encoded html tags
messages: {     // define custom labels for the built-in tools and dialogs
bold: "Bold",
      …
   },
stylesheets: {…}, // see above, custom stylesheets to load for editor
tools: {…},  // see above, custom and built-in tools to display in the editor
imageBrowser: {  // the imageBrowser tool can accept a custom configuration
transport: {  // the endpoints to use for image operations
read: "imagebrowser/read",
destroy: "imagebrowser/destroy",
create: "imagebrowser/createDirectory",
uploadUrl: "imagebrowser/upload",
thumbnailUrl: "imagebrowser/thumbnail" // path for thumbnails of images
imageUrl: "/content/images/{0}",  // "{0}" is placeholder for virtual
                                           // path and image name
},
path: "/myInitialPath/",  // Initial path of images to display
fileTypes: ".png,.gif,.jpg,.jpeg",  // Allowed image file extensions
schema: {…}, // a schema can be defined to interpret data returned from
              // a remote endpoint when parsing data to display images
messages: {…} // custom messages for imageBrowser controls and dialogs
   }
});</pre></div></div><div class="section" title="Events"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec41"/>Events</h2></div></div></div><p>As with any <a id="id368" class="indexterm"/>HTML element or JavaScript object in a complex site, a web page fires events as the user performs certain actions within a page. By hooking into these events with your own JavaScript code, you can react to the page's changes and data in real time and organize the functionality of your page based on actions that the user performs. The HTML Editor control fires the following events in response to user actions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">change</code>: This <a id="id369" class="indexterm"/>event <a id="id370" class="indexterm"/>fires every time that the data inside of the Editor Widget changes.</li><li class="listitem" style="list-style-type: disc"><code class="literal">execute</code>: This <a id="id371" class="indexterm"/>event fires fires when a tool is executed. It<a id="id372" class="indexterm"/> fires every time a tool bar button has been clicked and the code behind that button has been executed.</li><li class="listitem" style="list-style-type: disc"><code class="literal">keydown</code>: The <a id="id373" class="indexterm"/>keydown<a id="id374" class="indexterm"/> event fires every time a user presses a key down while typing inside of the Editor Widget window. Hooking into this event allows you to respond to text as the user is typing it.</li><li class="listitem" style="list-style-type: disc"><code class="literal">keyup</code>: The <a id="id375" class="indexterm"/>keydown event fires every time a user <a id="id376" class="indexterm"/>presses and releases a key while typing inside of the editor widget window. Hooking into this event allows you to respond to text as the user is typing it.</li><li class="listitem" style="list-style-type: disc"><code class="literal">paste</code>: The <a id="id377" class="indexterm"/>paste event fires every time text is pasted <a id="id378" class="indexterm"/>into the Editor Widget area.</li><li class="listitem" style="list-style-type: disc"><code class="literal">select</code>: The <a id="id379" class="indexterm"/>select event<a id="id380" class="indexterm"/> fires every time text inside of the Editor Widget has been selected by a user.</li></ul></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec41"/>Summary</h1></div></div></div><p>The HTML Editor gives you a lot of functionality for a very small amount of necessary coding. In most cases, the default control will meet all of your needs for HTML editing on a normal site. But, if you find yourself with a need for a highly customized tool, this HTML Editor supports a rich API, detailed configuration options, and easily accessible events for capturing and responding to use actions. This is a control that is not appropriate for every site, but when you need something like this, it is a tremendous boost to productivity to find it all in such a useful and usable package.</p><p>In the next chapter, we will cover two very important Kendo widgets—Menu and ListView. These widgets give you the ability to create responsive and feature-rich cascading page menus and organized data structures inside of your pages with the same Kendo approach that you have seen in all of the previous chapters. Building on what you already know, using these new widgets will be easy and you should be up and running before you know it.</p></div></body></html>