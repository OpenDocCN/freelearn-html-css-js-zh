<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch05" class="calibre1"/>Chapter 5. Inheritance, Overriding, and Nesting in Less</h1></div></div></div><p class="calibre7">So far in our journey with Less, we've seen how you can begin to reduce the code you need to write; it's time to take it up a level and begin to look at some more advanced concepts within Less.</p><p class="calibre7">Let me begin by asking you a question: what is the one thing that irritates you about writing styles where the same selector has to be repeated many times, such as when designing a menu system using an unordered list element? Hopefully, the answer is duplicated styles. In this chapter, we will take a look at how you can group styles to avoid the need to duplicate selectors in your code. We will also cover how you can inherit styles that can have a dramatic effect on reducing duplication; I'll also provide some hints and tips on using these techniques and others to help reduce code bloat.</p><p class="calibre7">Enough chat, let's take a look at what we will cover throughout this chapter:</p><div><ul class="itemizedlist"><li class="listitem">Nesting styles within Less</li><li class="listitem">Inheriting styles</li><li class="listitem">Namespacing in Less</li><li class="listitem">Scope of styles in Less</li><li class="listitem">Hints and tips on avoiding code bloat</li><li class="listitem">Importing style sheets into Less</li></ul></div><p class="calibre7">Curious? What are you waiting for? Let's get started...</p></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch05lvl1sec44" class="calibre1"/>Nesting styles in Less</h1></div></div></div><p class="calibre7">If you spend<a id="id349" class="calibre1"/> any time writing styles, I am sure you will frequently have written some that are duplicates of existing ones elsewhere in the same style sheet; this<a id="id350" class="calibre1"/> is particularly true if you are creating styles for elements of a site, such as a menu system using <code class="email">&lt;ul&gt;</code> or <code class="email">&lt;li&gt;</code>.</p><p class="calibre7">It can add a lot of extra code bloat from duplicated styles. Thankfully, there is a way we can reduce this, by using Less' ability to nest styles. Let's take a look at how this principle works, by creating the online equivalent of a business card.</p><p class="calibre7">For this exercise, we will need a few things. As a start, we'll need an image on our card; in this instance, we'll use an avatar, as this business card will be displayed on websites. There are thousands <a id="id351" class="calibre1"/>of icons available for this purpose; I will assume you have picked a suitable one and saved it as <code class="email">avatar.png</code>. I've used the Office <a id="id352" class="calibre1"/>Client Male Light Icon, available at <a class="calibre1" href="http://www.iconarchive.com/show/vista-people-icons-by-icons-land/Office-Client-Male-Light-icon.html">http://www.iconarchive.com/show/vista-people-icons-by-icons-land/Office-Client-Male-Light-icon.html</a>.</p><p class="calibre7">Next comes the<a id="id353" class="calibre1"/> telephone, e-mail, and figurehead icons; these are from the <a id="id354" class="calibre1"/>Modern Pictograms font family found at <a class="calibre1" href="http://www.fontsquirrel.com/fonts/modern-pictograms">http://www.fontsquirrel.com/fonts/modern-pictograms</a>. You will need to convert it into a format that can be embedded into a webpage; this can be done using a free service at <a class="calibre1" href="http://www.convertfonts.com">http://www.convertfonts.com</a>.</p><p class="calibre7">Finally, before we can start work on creating our card, we need some social media icons. I've chosen to use the hand-drawn ones by Chris Spooner, which can be downloaded from <a class="calibre1" href="http://blog.spoongraphics.co.uk/freebies/hand-drawn-sketchy-icons-of-your-favorite-social-sites">http://blog.spoongraphics.co.uk/freebies/hand-drawn-sketchy-icons-of-your-favorite-social-sites</a>; alter the code accordingly if you decide to use other icons instead.</p></div></div>

<div><div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch05lvl2sec44" class="calibre1"/>Creating a business card</h2></div></div></div><p class="calibre7">Start by opening a<a id="id355" class="calibre1"/> copy of <code class="email">nesting.html</code> from the code bundle that accompanies this book. This contains the markup we need to create our basic vCard.</p><p class="calibre7">Next, we need to <a id="id356" class="calibre1"/>add some styling to make it look presentable. There are a few styles involved, so grab a copy of the code download file that accompanies this book and extract a copy of <code class="email">nesting.less</code> from within the archive.</p><p class="calibre7">Save the file as <code class="email">nesting.html</code>. If you preview the results in a browser, you'll see something similar to the following screenshot:</p><div><img src="img/00052.jpeg" alt="Creating a business card" class="calibre10"/></div><p class="calibre11"> </p></div></div></div>

<div><div><div><div><div><div><h2 class="title1" id="calibre_pb_3"><a id="ch05lvl2sec45" class="calibre1"/>Examining the process in detail</h2></div></div></div><p class="calibre7">If we take a look<a id="id357" class="calibre1"/> through <code class="email">nesting.less</code>, you will notice a number of styles using a similar format. These examples are all variations on a theme of nesting, where instead of adding individual child selectors (and thus duplicating code), we can group together similar child selectors and implement one parent selector.</p><p class="calibre7">Our first example uses the standard <code class="email">a</code> selector, to which we've grouped together the style rules for <code class="email">:focus</code>, <code class="email">:hover</code>, and <code class="email">:active</code>:</p><div><pre class="programlisting">a {
  &amp;:focus { outline: thin dotted; }
  &amp;:hover { outline: 0 none; }
  &amp;:active { outline: 0 none; }
}</pre></div><p class="calibre7">This produces the following code when compiled:</p><div><pre class="programlisting">a:focus { outline: thin dotted; }
a:hover { outline: 0 none; }
a:active { outline: 0 none; }</pre></div><div><h3 class="title2"><a id="note22" class="calibre1"/>Note</h3><p class="calibre7">In this example, we've used <code class="email">a</code> only to illustrate how the process works—in reality, this is an example of where you wouldn't gain any benefit from such a short selector name; the benefit is only seen when longer names are used.</p></div><p class="calibre7">Our second example is a little more advanced—here, we've included some standard CSS styles and mixed in style rules for two additional child selectors that go several levels deeper:</p><div><pre class="programlisting">.social {
  background-color: #e6e6e6; padding: 10px; width: 100%;
  ul { text-align: right; }
  ul li { display: inline-block; height: 48px; width: 48px; }
  ul li a { display: inline-block; height: 100%; overflow: hidden; text-decoration: none; text-indent: 100%; white-space: nowrap; width: 100%; }
}</pre></div><p class="calibre7">The key to nesting<a id="id358" class="calibre1"/> is careful examination of any classes or selectors, where there is duplication; let's take a look at the CSS styles that will be displayed in a browser, for the <code class="email">.social</code> code block we've just covered:</p><div><pre class="programlisting">.social { background-color: #e6e6e6; padding: 10px; width: 100%; }
.social ul { text-align: right; }
.social ul li { display: inline-block; height: 48px; width: 48px; }
.social ul li a { display: inline-block; height: 100%; overflow: hidden; text-decoration: none; text-indent: 100%; white-space: nowrap; width: 100%; }</pre></div><p class="calibre7">To work out whether a style can be converted to use nesting, we can take a look at similar selectors; nesting will only work where the selectors use common IDs. In this example, <code class="email">.social</code> is the common selector, hence it's used in our Less example.</p><p class="calibre7">A key point to note—at first glance, it would appear that <code class="email">.social ul</code> could have been used instead. This would work, but only for two additional child selectors (<code class="email">.social ul li</code> and <code class="email">.social ul li a</code>). The parent <code class="email">.social</code> class cannot be included if we go in at this level, as we can only work top-down and not bottom-up when considering which styles to nest.</p><div><h3 class="title2"><a id="note23" class="calibre1"/>Note</h3><p class="calibre7">There is a general rule of thumb that the selector or class used as our grouping ID, should not be more than two levels deep; any more is considered bad practice and should really be revisited!</p></div><p class="calibre7">Let's change focus and take a look at another functionality of Less, which is inheriting and overriding styles, using the <code class="email">extend</code> option.</p></div></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch05lvl1sec45" class="calibre1"/>Inheriting and overriding styles with extend</h1></div></div></div><p class="calibre7">Up until<a id="id359" class="calibre1"/> now, we've<a id="id360" class="calibre1"/> used mixins to help reduce the need to <a id="id361" class="calibre1"/>write extra<a id="id362" class="calibre1"/> code, as we can call these blocks of code from our Less statements easily, to produce the desired effect.</p><p class="calibre7">Unfortunately this is still not without its own drawback. Let's say we create two rules, that both call the same mixin, and produce identical results (save for the rule name), then Less will interpret these as<a id="id363" class="calibre1"/> two separate blocks of code, even though they both perform the same styling on two different objects. What if we could merge these two rules together so that there is only one<a id="id364" class="calibre1"/> block of code, but which can be called by either rule?</p><p class="calibre7">Well, we can, with<a id="id365" class="calibre1"/> the use of the <code class="email">extend</code> function in Less. This is a really powerful function, introduced for this purpose. Let's take a look at the<a id="id366" class="calibre1"/> concept to see how it works.</p><p class="calibre7">Imagine you have a mixin, such as this simple one:</p><div><pre class="programlisting">.stuff { color: red; }
.foo { .stuff; }
.bar { .stuff; }</pre></div><p class="calibre7">If we compile it using something like Crunch!, then it will display this:</p><div><pre class="programlisting">.stuff { color: red; }
.foo { color: red; }
.bar { color: red; }</pre></div><p class="calibre7">This works perfectly well, but shows the aforementioned duplicated styles. To remove this duplication, we can use the <code class="email">extend</code> keyword and rework the code as follows:</p><div><pre class="programlisting">.foo { color: red; }
.bar { &amp;:extend(.foo); }</pre></div><p class="calibre7">You can immediately see the difference in the output. Instead of splitting each rule onto two lines as it did before, we've been able to merge the rule into one block, but it can be called by either class:</p><div><pre class="programlisting">.foo, .bar { color: red; }</pre></div><div><h3 class="title2"><a id="note24" class="calibre1"/>Note</h3><p class="calibre7">It is worth reading the documentation on the main Less site on the subject of <code class="email">extend</code>—there are some interesting features that you will need to be aware<a id="id367" class="calibre1"/> of, when using the function in your code. You can view the documentation at <a class="calibre1" href="http://lesscss.org/features/#extend-feature">http://lesscss.org/features/#extend-feature</a>.</p></div><p class="calibre7">The rule of thumb for choosing whether to use <code class="email">extend</code> or a mixin is to choose the technique that requires the least final output (or that works best for you).</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch05lvl2sec46" class="calibre1"/>Using extend to create information alerts</h2></div></div></div><p class="calibre7">To see<a id="id368" class="calibre1"/> how <code class="email">extend</code> works in practice, let's take a<a id="id369" class="calibre1"/> look at a little exercise to create some imaginary dialog boxes that contain messages to alert the user about the outcome of an operation.</p><p class="calibre7">Before we can get to work on our example, we first need to download some icons that are suitable for use in dialog boxes. I've chosen to use the free icons created by Andy Gongea; it will be assumed that you are using these icons, for the purpose of the exercise. Visit <a class="calibre1" href="http://www.graphicrating.com/2012/06/14/koloria-free-icons-set/">http://www.graphicrating.com/2012/06/14/koloria-free-icons-set/</a> to download the icons. You will <a id="id370" class="calibre1"/>need to extract the <code class="email">info.png</code>, <code class="email">error.png</code>, <code class="email">warning.png</code>, <code class="email">help.png</code>, and <code class="email">valid.png</code> images and drop them<a id="id371" class="calibre1"/> into an <code class="email">img</code> folder at the root of your project folder.</p><p class="calibre7">Let's start writing the code! Open a copy of <code class="email">project.html</code>, which we created in <a class="calibre1" title="Chapter 3. Getting Started with Less" href="part0031_split_000.html#page">Chapter 3</a>, <em class="calibre9">Getting Started with Less</em>, and then modify the <code class="email">&lt;head&gt;</code> section as shown in the following code:</p><div><pre class="programlisting">  &lt;title&gt;Demo: Extending&lt;/title&gt;
  &lt;link rel="stylesheet/less" href="css/extend.less"&gt;
  &lt;script src="img/less.min.js"&gt;&lt;/script&gt;</pre></div><p class="calibre7">Next, remove the existing markup in the <code class="email">&lt;body&gt;</code> tag and replace it with this:</p><div><pre class="programlisting">  &lt;div class="info"&gt;Info message&lt;/div&gt;
  &lt;div class="success"&gt;Successful operation message&lt;/div&gt;
  &lt;div class="warning"&gt;Warning message&lt;/div&gt;
  &lt;div class="error"&gt;Error message&lt;/div&gt;
  &lt;div class="validation"&gt;
    &lt;li&gt;First name is a required field&lt;/li&gt;
    &lt;li&gt;Last name is a required field&lt;/li&gt;
    &lt;li&gt;Email address has been typed incorrectly&lt;/li&gt;
    &lt;li&gt;Preferred language has not been selected&lt;/li&gt;
  &lt;/div&gt;</pre></div><p class="calibre7">Save this as <code class="email">extend.html</code>. On its own, it won't win any awards for style if we were to preview it now, so let's fix that by adding some! In a new file, add the following styles:</p><div><pre class="programlisting">body{ font-family: Arial, Helvetica, sans-serif; font-size: 13px; }
.demo { font-style: italic; }
 
.box { border: 1px solid #000; margin: 10px 0px; padding:15px 10px 15px 50px; background-repeat: no-repeat;
  background-position: 10px center; width: 300px; padding-top: 15px; }
 
.info:extend(.box) { color: #00529B; background-color: #BDE5F8; background-image: url('../img/info.png'); }
.success:extend(.box) { color: #4F8A10; background-color: #DFF2BF; background-image:url('../img/valid.png'); }
.warning:extend(.box) { color: #9F6000; background-color: #FEEFB3; background-image: url('../img/warning.png'); }
.error:extend(.box) { color: #D8000C; background-color: #FFBABA; background-image: url('../img/error.png'); }
.validation:extend(.box) { width: 280px; padding-left: 70px; color: #D63301; background-color: #FFCCBA; background-image: url('../img/error.png'); }</pre></div><p class="calibre7">Save the file as <code class="email">extend.less</code> in the <code class="email">css</code> subfolder; if you have configured Sublime Text to compile Less files on save, then it will also produce the compiled CSS equivalent file. We can use<a id="id372" class="calibre1"/> this to compare the results shown in the file, with those displayed in the browser, when using a<a id="id373" class="calibre1"/> DOM Inspector such as Firebug. If we preview the file in a browser, we should see something like the following screenshot:</p><div><img src="img/00053.jpeg" alt="Using extend to create information alerts" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Although this is a relatively simple example, it is worth taking a moment to study the code to see how the <code class="email">extend</code> function operates.</p><p class="calibre7">If you use a mixin, you often find that you have to include a base class (<code class="email">.stuff</code> in our earlier example) as your mixin, which contains the styles that you need to inherit within your calling classes (in this instance, <code class="email">.foo</code> and <code class="email">.bar</code>).</p><p class="calibre7">This will work perfectly well, but will duplicate the code as we have already seen; instead, we used the <code class="email">extend</code> function to apply the existing <code class="email">.box</code> class to each of the classes we used for the dialogs, namely <code class="email">.info</code>, <code class="email">.success</code>, <code class="email">.warning</code>, <code class="email">.error</code>, and <code class="email">.validation</code>.</p><p class="calibre7">As <code class="email">extend</code> is a Less pseudo-class, all trace of the <code class="email">extend</code> function will be removed, leaving the resulting compiled styles. The real benefit of using this function can be seen when using Firebug; instead of seeing a lot of duplicated styles, we will see styles neatly merged together where they perform the same function, with the remaining styles left to operate on the<a id="id374" class="calibre1"/> remaining elements where appropriate.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch05lvl2sec47" class="calibre1"/>Extending using the all keyword</h2></div></div></div><p class="calibre7">Once you have <a id="id375" class="calibre1"/>begun using the <code class="email">extend</code> keyword in your Less code, you might find that you want to extend styles that are nested.</p><p class="calibre7">Unfortunately, extend <a id="id376" class="calibre1"/>can only match a selector based on what is given in the <code class="email">extend</code> request; it is not always able to match child selectors below a parent, unless a child selector is specified. Let's take a look at an example to see what this means.</p><p class="calibre7">Imagine you have this simple bit of nested Less:</p><div><pre class="programlisting">.module {
  padding: 10px;
  h3 { color: red; }
}</pre></div><p class="calibre7">Using <code class="email">extend</code> will produce this:</p><div><pre class="programlisting">.news { &amp;:extend(.module); }</pre></div><p class="calibre7">The <code class="email">h3</code> style will not be extended and will instead be compiled as a separate style:</p><div><pre class="programlisting">.module, .news { padding: }
.module h3 { color: red; }</pre></div><p class="calibre7">To get around this, we can use the <code class="email">all</code> keyword as shown in the following line of code:</p><div><pre class="programlisting">.news { &amp;:extend(.module all); }</pre></div><p class="calibre7">The <code class="email">all</code> keyword will extend everything to produce the desired effect:</p><div><pre class="programlisting">.module, .news { padding: 10px; }
.module h3, .news h3 { color: red; }</pre></div><p class="calibre7">The key to it is to think of it as performing a nondestructive search and replace operation on the original selector, to produce a new one. Let's take a look at it in practice, by modifying the previous <code class="email">extend</code> demo to use the <code class="email">all</code> keyword.</p><p class="calibre7">Start by opening a copy of <code class="email">extend.html</code>, which we created from the previous exercise, then encompass each of the dialog text messages in the <code class="email">&lt;h3&gt;</code> tags, as highlighted:</p><div><pre class="programlisting">  &lt;div class="info"&gt;&lt;h3&gt;Info message&lt;/h3&gt;&lt;/div&gt;
  &lt;div class="success"&gt;&lt;h3&gt;Successful operation message&lt;/h3&gt;&lt;/div&gt;
  &lt;div class="warning"&gt;&lt;h3&gt;Warning message&lt;/h3&gt;&lt;/div&gt;
  &lt;div class="error"&gt;&lt;h3&gt;Error message&lt;/h3&gt;&lt;/div&gt;
  &lt;div class="validation"&gt;
    <strong class="calibre8">&lt;h3&gt;</strong>
      &lt;li&gt;First name is a required field&lt;/li&gt;
      &lt;li&gt;Last name is a required field&lt;/li&gt;
      &lt;li&gt;Email address has been typed incorrectly&lt;/li&gt;
      &lt;li&gt;Preferred language has not been selected&lt;/li&gt;
    <strong class="calibre8">&lt;/h3&gt;</strong>
  An example using &lt;span class="demo"&gt;extend:(...all):&lt;/span&gt;
  &lt;div class="rebase"&gt;&lt;h3&gt;Info message&lt;/h3&gt;&lt;/div&gt;</pre></div><p class="calibre7">Save this as <code class="email">extendall.html</code>. In a copy of <code class="email">extend.less</code>, we need to move the rule for <code class="email">font-size</code> from body to <code class="email">&lt;h3&gt;</code>, so we can then include it as a nested rule later in our code. Amend the<a id="id377" class="calibre1"/> style rule for body, and then immediately below this, add a new rule for <code class="email">&lt;h3&gt;</code>, as shown in the following code:</p><div><pre class="programlisting">body { font-family: Arial, Helvetica, sans-serif; }
h3 { font-size: 12px; }</pre></div><p class="calibre7">In the validation code block, add the three lines (as highlighted); this will style the <code class="email">&lt;h3&gt;</code> tags we added earlier to our HTML code:</p><div><pre class="programlisting">.validation:extend(.box) { width: 280px; padding-left: 70px;
  color: #D63301; background-color: #FFCCBA; background-image: url('../img/error.png');
  <strong class="calibre8">h3 { font-size: 14px; }</strong>
}</pre></div><p class="calibre7">We can now take advantage of the <code class="email">all</code> keyword; immediately below the <code class="email">.validation</code> style block, add the following code:</p><div><pre class="programlisting">.rebase:extend(.validation all) {}
.rebase {
  color: #fff;
  background-color: #9a0074;  
  background-image: url('../img/help.png');
}</pre></div><p class="calibre7">Save the file as <code class="email">extendall.less</code>. If we preview the results in a browser, we will see the added dialog box appear below the last dialog box, as shown in the following screenshot:</p><div><img src="img/00054.jpeg" alt="Extending using the all keyword" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Now that we have seen this in action, let's take a moment to examine how it works.</p><p class="calibre7">Using the <code class="email">all</code> attribute with <code class="email">extend</code> is very easy, as we have seen, but it does mean that the styles that<a id="id378" class="calibre1"/> need to be replicated should be as close to the desired result as possible, to make the use of <code class="email">extend</code> worthwhile.</p><p class="calibre7">This doesn't mean to say that you can't add additional, or indeed override, existing styles as we have done here, but we've kept them to a minimum. Here, we've used <code class="email">extend all</code> to replicate the <code class="email">.validation</code> class and rename it as <code class="email">.rebase</code>; this includes the additional styling for the <code class="email">&lt;h3&gt;</code> tag, which would otherwise not have been included if the <code class="email">all</code> tag had not been used. We've then simply overridden three of the styles to change the image used, <code class="email">background-color</code> and text <code class="email">color</code>, to make it a little more unique.</p><p class="calibre7">We've only scratched the surface with what you can do using <code class="email">extend</code>—before we change focus and move to looking at namespacing, let's take a moment to look at some of the other highlights <a id="id379" class="calibre1"/>of using the <code class="email">extend</code> keyword:</p><div><ul class="itemizedlist"><li class="listitem">Extend can be used with pseudo-class selectors such as <code class="email">:hover</code> or <code class="email">:active</code>; multiple extends can be used, along with spaces. However, if only one extend is used, then this must be the last part of the statement.</li><li class="listitem">You can use <code class="email">&amp;:extend</code> within a ruleset; this is a shortcut to adding <code class="email">extend</code> to every single selector within the ruleset.</li><li class="listitem">Extend can be used with nested selectors; as long as the calling extend can be matched against a valid Less rule, it will be extended to use the new class or selector ID.</li><li class="listitem">By default, extend will look for an exact match, for example, <code class="email">*.class</code> and <code class="email">.class</code>, which are equivalent, won't be considered as exact matches by Less, when using<a id="id380" class="calibre1"/> extend.</li><li class="listitem">If you want to match using type identifiers such as <code class="email">[title="identifier"]</code>, then it doesn't matter whether quotes are used or not; these are effectively ignored.</li></ul></div><p class="calibre7">The <code class="email">extend</code> keyword<a id="id381" class="calibre1"/> is a very useful tool within the Less article, but can cause issues if not used correctly. It is well worth reading the main <a id="id382" class="calibre1"/>documentation on the Less site at <a class="calibre1" href="http://lesscss.org/features/#extend-feature">http://lesscss.org/features/#extend-feature</a>, to get your head around some of the quirks of using the function.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch05lvl1sec46" class="calibre1"/>Namespacing in Less</h1></div></div></div><p class="calibre7">There is one thing I am sure you will find asking yourself as time goes by and your CSS style sheets get larger: <em class="calibre9">can I group similar styles to make things easier to find?</em>
</p><p class="calibre7">Sure, you can always<a id="id383" class="calibre1"/> cut and paste similar styles together, but this is a manual process, right? What happens if two weeks down the line, you need to add a new style, which is similar to the one<a id="id384" class="calibre1"/> buried 1500-odd lines down? Surely there has to be a better way to do this—there is. Welcome to namespacing in Less!</p><p class="calibre7">Namespacing in Less takes your need to group similar styles and flips it on its head; it groups all of the constituent building blocks of your styles together, then allows you to pick and choose which styles to use when adding styling for a new element on your site. We can, of course, create multiple namespaces if we need to—our only real guide for this is that each namespace should contain styles that share common elements; a great example is buttons, as you will see from our upcoming exercise.</p><p class="calibre7">Let's begin creating these buttons by opening a copy of <code class="email">project.html</code> and then modifying the <code class="email">&lt;head&gt;</code> tag as shown in the following code:</p><div><pre class="programlisting">&lt;title&gt;Demo: Namespaces&lt;/title&gt;
&lt;link rel="stylesheet/less" href="css/namespace.less"&gt;
&lt;script src="img/less.min.js"&gt;&lt;/script&gt;</pre></div><p class="calibre7">Next, remove the existing markup in the <code class="email">&lt;body&gt;</code> tag and replace it with the following code:</p><div><pre class="programlisting">&lt;input type="button" name="buy" value="Buy" class="redbutton"&gt;
&lt;input type="button" name="clear" value="Pay by PayPal" class="purplebutton"&gt;
&lt;input type="button" name="checkout" value="Pay by credit card" class="bluebutton"&gt;</pre></div><p class="calibre7">Save this as <code class="email">namespace.html</code> in the root of our project folder. We need to apply some styling, so go ahead and add the following Less styles to a new file; we'll break it down into sections and go through it bit by bit, as there are a few important concepts to consider:</p><div><pre class="programlisting">.background (@color1, @color2) {
  background: -webkit-gradient( linear, left top, left bottom, color-stop(0.05, @color1), color-stop(1, @color2) );
  background: -moz-linear-gradient( center top, @color1 5%, @color2 100% );
  background-color: @color1;
  border: 1px solid @color1;
}</pre></div><p class="calibre7">We saw examples<a id="id385" class="calibre1"/> similar to this back in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <em class="calibre9">Working with Variables, Mixins, and Functions</em>; hopefully, you will recognize this as a parametric mixin. In this instance, we're using it to build up a<a id="id386" class="calibre1"/> gradient for each of our buttons; we're feeding it two values that represent the colors used in the gradient fading process, as shown in the following code:</p><div><pre class="programlisting">#button() {
  .base { border-radius: 6px; color: #fff; font-family: Arial;
font-size: 15px; font-weight: bold; font-style: normal;  height: 32px;  text-align: center; text-shadow: 1px 1px 0px #000; margin-left: 5px;
  &amp;:active { position: relative; top: 1px; }
  }</pre></div><div><h3 class="title2"><a id="note25" class="calibre1"/>Note</h3><p class="calibre7">Note that namespaces such as <code class="email">#button()</code> used here can be made from classes or selector IDs; for more details on the recognized behavior, see <a class="calibre1" href="https://github.com/less/less.js/issues/1205">https://github.com/less/less.js/issues/1205</a>.</p></div><p class="calibre7">Next comes the most important part of our Less styling: the opening statement for a namespaced style. It shows the name under which we will group our styles. We've used <code class="email">()</code>, as we don't want Less to output the mixin as well as the compiled CSS, when compiling our code:</p><div><pre class="programlisting">  .red {
    .background(#cc1c28, #a01620);
    box-shadow: inset 0px 1px 0px 0px #b61924;
    &amp;:hover { .background(#a01620, #cc1c28) }
  }

  .purple {
    .background(#800080, #9a009a);
    box-shadow: inset 0px 1px 0px 0px #670067;
    &amp;:hover { .background(#9a009a, #800080) }
  }

  .blue {
    .background(#004771, #00578a);
    box-shadow: inset 0px 1px 0px 0px #0067a4;
    &amp;:hover { .background(#00578a, #004771) }
  }
}</pre></div><p class="calibre7">These three blocks of code will call the <code class="email">.background(...)</code> mixin to set the appropriate gradient, depending on <a id="id387" class="calibre1"/>which state is currently set for a specific button:</p><div><pre class="programlisting">.redbutton { #button &gt; .base; #button &gt; .red; }
.purplebutton { #button &gt; .base; #button &gt; .purple; }
.bluebutton { #button &gt; .base; #button &gt; .blue; }</pre></div><p class="calibre7">This is where the<a id="id388" class="calibre1"/> real magic happens. Here, we've set the styles to be used for three buttons, namely red, purple, and blue. Within each button style, we've chosen to call elements from the <code class="email">#button</code> namespace; if several similar namespaces had been created, we could easily pick and choose our styles from each, as we are not limited to just using one namespace. The key thing to note is that when calling a namespace style, you must use the format given in our example.</p><p class="calibre7">Okay, enough of the theory. If we preview the results in a browser, we should expect to see something akin to this:</p><div><img src="img/00055.jpeg" alt="Namespacing in Less" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">A nice, easy example, huh? Hopefully, it will help show you how you can pick and choose your styles from groupings of styles, particularly when a project uses a lot of similar elements and styles that could benefit from being namespaced.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch05lvl1sec47" class="calibre1"/>Lazy loading of variables in Less</h1></div></div></div><p class="calibre7">So far, we've covered a<a id="id389" class="calibre1"/> number of techniques to create and <a id="id390" class="calibre1"/>control how styles are applied. There is one key theme that runs throughout all of this though and of which you need to be aware: scope.</p><p class="calibre7">Yes, there's that ugly word, scope! No matter how much we try to avoid it, we must always allow for it when using Less; if not, it can come back to bite us at the most unexpected moments. Let me explain what I mean: as we will see in the upcoming exercise, we can always reuse our mixins or variables throughout our Less code.</p><p class="calibre7">The downside is that<a id="id391" class="calibre1"/> Less must have a means of knowing which instance is the most latest; therefore, it always takes the last instance of any variable or mixin that is included in our code. If you're<a id="id392" class="calibre1"/> not careful, it can lead to some odd effects. Let's take a look at what this means in practice, with a quick exercise.</p><p class="calibre7">Start by opening a copy of <code class="email">project.html</code> that we created back in <a class="calibre1" title="Chapter 3. Getting Started with Less" href="part0031_split_000.html#page">Chapter 3</a>, <em class="calibre9">Getting Started with Less</em>, and then, alter the <code class="email">&lt;head&gt;</code> tag as shown in the following code:</p><div><pre class="programlisting">  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Demo: Scoping&lt;/title&gt;
  &lt;link href='http://fonts.googleapis.com/css?family=Over+the+Rainbow' rel='stylesheet' type='text/css'&gt;
  &lt;link rel="stylesheet/less" href="css/scope1.less"&gt;</pre></div><p class="calibre7">Next, remove the existing markup and replace it with the following code:</p><div><pre class="programlisting">  &lt;div id ="container"&gt;
    &lt;div id="box1"&gt;This is box 1&lt;/div&gt;
    &lt;div id="box2"&gt;This is box 2&lt;/div&gt;
    &lt;div id="box3"&gt;This is box 3&lt;/div&gt;
  &lt;/div&gt;</pre></div><p class="calibre7">Save this as <code class="email">scope.html</code>. Finally, even though this is only a simple example, we still need to add some styling; go ahead and add the following to a new file, saving it as <code class="email">scope1.less</code>:</p><div><pre class="programlisting">@boxcolor: green;

html { font-family: 'Over the Rainbow', cursive; font-weight: bold; font-size: 20px; }
div {  width: 200px; height: 100px; padding: 3px; border-radius: 3px; float: left; position: absolute; }

#box1 { margin-left: 0; }
#box2 { margin-left: 225px; }
#box3 { margin-left: 450px; }

#container {
  @boxcolor: red;
  #box1 { background-color: @boxcolor; }
  #box2 { background-color: @boxcolor; }

  @boxcolor: orange;
  #box3 { background-color: @boxcolor; }
}</pre></div><p class="calibre7">Before we preview the results in a browser, ask yourself this one question: what colors would you expect to see in each box?</p><p class="calibre7">No, I've not gone<a id="id393" class="calibre1"/> insane; stay with me on this one! If you were expecting to see red in boxes <strong class="calibre8">1</strong> and <strong class="calibre8">2</strong> and orange in box <strong class="calibre8">3</strong>, then I'm sorry to disappoint you:</p><div><img src="img/00056.jpeg" alt="Lazy loading of variables in Less" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Hold on—all three<a id="id394" class="calibre1"/> of them are in orange! This is true; this has to do with the concept of scoping within Less.</p><p class="calibre7">If you've spent any time programming, then you will likely be aware of how a variable's value will be used in a statement if it has just been set before the statement. Less uses variables in a similar fashion, but with one important difference: it uses the <em class="calibre9">last known instance</em> of that variable assignment, to determine which value to display.</p><div><h3 class="title2"><a id="note26" class="calibre1"/>Note</h3><p class="calibre7">Variables in Less are merged into code—this is the equivalent of lazy loading, as the last defined instance of a variable is the one that is used, overwriting any previous instance of that variable.</p></div><p class="calibre7">If we look through the code, we can clearly see the last instance of <code class="email">@boxcolor</code> being set a color value, just before <code class="email">box3</code>. As the color set was orange, this is the value that will be used throughout our code. We can clearly see this from a screenshot excerpt of the compiled styles within Crunch!, where <code class="email">#ffa500</code> is orange:</p><div><img src="img/00057.jpeg" alt="Lazy loading of variables in Less" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">It is worth noting the scope that is set when using variables, as we have done here. It is all too easy to be tripped up through the use of an (incorrectly) assigned variable, which produces unexpected results!</p><p class="calibre7">The only safe way to <a id="id395" class="calibre1"/>ensure that the right values are used is to assign<a id="id396" class="calibre1"/> separate variables. We can see the results of this if we modify the Less styles from our previous example:</p><div><pre class="programlisting">@boxcolor1: lightgreen;

html { font-family: 'Over the Rainbow', cursive; font-weight: bold; font-size: 20px; }
div {  width: 200px; height: 100px; padding: 3px; border-radius: 3px; float: left; position: absolute; }

#box1 { margin-left: 0; }
#box2 { margin-left: 225px; }
#box3 { margin-left: 450px; }

#container {
  @boxcolor2: red;
  #box1 { background-color: @boxcolor1; }
  #box2 { background-color: @boxcolor2; }

  @boxcolor3: orange;
  #box3 { background-color: @boxcolor3; }
}</pre></div><p class="calibre7">Resave the Less file as <code class="email">scope2.less</code>; don't forget to change the markup in <code class="email">scope.html</code>! If we preview the results in the browser, we can clearly see the difference it has made, where separate variables have been used:</p><div><img src="img/00058.jpeg" alt="Lazy loading of variables in Less" class="calibre10"/></div><p class="calibre11"> </p><div><h3 class="title2"><a id="note27" class="calibre1"/>Note</h3><p class="calibre7">Throughout this demo, we've used <code class="email">box1</code>, <code class="email">box2</code>, and <code class="email">box3</code> as selector IDs—it is worth nothing that these are not semantic names; for this reason, they should not be used in a production environment. As we are working in a demo environment only to illustrate a concept, then use of these names is less of an issue.</p></div><p class="calibre7">Now that we've seen the<a id="id397" class="calibre1"/> results of using separate variables, we can also see the difference by looking at the<a id="id398" class="calibre1"/> compiled CSS in this screenshot extract from Crunch!:</p><div><img src="img/00059.jpeg" alt="Lazy loading of variables in Less" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Notice the difference? Hopefully, you will see how it is crucial to take care while using variables, as the scope of their use can produce some odd effects if not used carefully! Let's move on, as we need to take a look at some functionality we've already used, but haven't explored in any great depth, namely importing style sheets into Less.</p><div><h3 class="title2"><a id="tip08" class="calibre1"/>Tip</h3><p class="calibre7">
<strong class="calibre8">Going overboard with variables</strong>
</p><p class="calibre7">It is all too easy to add lots of variables to cater to values such as colors used in your site. This is not always a sensible thing to do; you should consider setting up a core number of variables, then using functions to work out the values that should be used.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch05lvl1sec48" class="calibre1"/>Importing style sheets into Less</h1></div></div></div><p class="calibre7">Phew! We're almost there. We've certainly covered a lot in this chapter! Before we finish the chapter with some<a id="id399" class="calibre1"/> tips on avoiding code bloat, we should take a moment to consider one useful function that we've used, but not explored in any <a id="id400" class="calibre1"/>detail—this is the use of importing to manage our Less style sheets.</p><p class="calibre7">Importing in Less is a simple but useful trick to learn, particularly when managing large style sheets. We can begin to build up a library of code and then import it straight into any future project.</p><p class="calibre7">It makes it much easier to manage smaller files, as we can build a master file that imports each of the subfiles into one master; Less will only compile these styles that are directly referenced from our main code. So for example, if your code library file is more than 2,500 lines long, but a mixin of only 10 lines is all that is used, then Less will only include those 10 lines in the final compiled results.</p><p class="calibre7">Using the import option is really easy; all you need to do is add in the following statement somewhere within your Less code:</p><div><pre class="programlisting">@import (XXXXXXX) "foo.less";</pre></div><p class="calibre7">Here <code class="email">XXXXXXX</code> is one of any of the following options:</p><div><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Option:</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Allows us to:</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">reference</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This uses<a id="id401" class="indexterm"/> a Less file but do not output it, unless referenced from within the code.</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">inline</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This includes the<a id="id402" class="indexterm"/> source file in the output but does not process it and is useful if you need to import files that are not Less compatible, but still need to be included in the compiled CSS file.</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">less</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This treats the file as a Less file, no matter what the file extension. This is ideal if you have<a id="id403" class="indexterm"/> a need for all Less files to have the <code class="literal">.css</code> extension, but where they should be treated as Less files, not plain CSS.</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">css</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This treats the<a id="id404" class="indexterm"/> file as a CSS file, no matter what the file extension is.</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">once</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This only<a id="id405" class="indexterm"/> includes the file once (this is the default behavior); any subsequent import requests for this file will be ignored.</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">multiple</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This includes<a id="id406" class="indexterm"/> the same Less file multiple times. This is the opposite of the default behavior of Less.</p>
</td></tr></tbody></table></div><p class="calibre7">You can learn more about the various options from the<a id="id407" class="calibre1"/> main Less site, at <a class="calibre1" href="http://lesscss.org/features/#import-options">http://lesscss.org/features/#import-options</a>.</p><p class="calibre7">Okay, let's wrap up this chapter by taking a look at some important hints and tips on avoiding code bloat. Some of what you will see comes from the functionality that we've explored throughout this chapter, but it's useful to take a moment to summarize some of the key points we've covered in the book to date.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch05lvl1sec49" class="calibre1"/>Avoiding code bloat</h1></div></div></div><p class="calibre7">When designing <a id="id408" class="calibre1"/>websites, one of the key aims that should be dear to every designer is to ensure that they avoid code bloat wherever they can so that their finished article works well and is engaging to their audience.</p><p class="calibre7">To help with this, there are a number of tips we can use to help reduce code bloat. We've already used some throughout the book so far, but now seems like an opportune moment to revisit and consolidate them into a useful list you can use for future projects:</p><div><ul class="itemizedlist"><li class="listitem">Aim to <a id="id409" class="calibre1"/>create a cleaner structure with the use of nesting—this means you can avoid having to reenter duplicate selectors (such as using <code class="email">&lt;ul&gt;</code> within a list or menu) and can keep the code organized as related items are grouped together.</li><li class="listitem">Create variables for faster maintenance—these work very much like variables in other programming languages, such as C#. We can set one instance of a variable at the start, then reference this throughout our code; Less will automatically update each instance for you. Take care how many you create though, as each requires valuable resources; it is better practice to create a core bunch and use operators to dynamically work out new values. This has the benefit of allowing these new values to continue to work, even if original variables are subsequently changed.</li><li class="listitem">Use mixins to create whole classes that we can reference throughout our code. On larger sites, this can have a dramatic effect in reducing the amount of code that needs to be written. If you are already using mixins, then check through your code to see if they can't be made parametric; this increases their flexibility and will allow you to remove redundant mixins, as they can be served by tweaking other mixins.</li><li class="listitem">Take an iterative approach to develop your CSS, particularly when using mixins. If you use mixins that are similar to mixins being brought in by external Less libraries, then try to design out the differences, so you can remove your own...</li><li class="listitem">Use namespaces to pick and choose mixins. This will help you group together common styling rules that apply to similar elements, such as buttons; you can then pick and choose which elements to use. Try to keep the number of selector elements used in each namespace to a minimum too; there is no hard and fast rule, but a good rule of thumb is something like the following code:<div><pre class="programlisting">  .redbutton {
    #base &gt; .button
    #base &gt; .redcolor
  }</pre></div></li></ul></div><p class="calibre7">If your code uses more than one selector elements in each namespace it is likely that your code isn't as efficient as it should be...!</p><div><ul class="itemizedlist"><li class="listitem">If you are using namespacing, then take care of your CSS specificity, otherwise clashing results can be a symptom of nesting too deeply, or overuse of the <code class="email">!important</code> attribute. If you find this happening, then you might need to break your namespacing into smaller groups, which uses fewer levels of nesting.</li><li class="listitem">Consider using<a id="id410" class="calibre1"/> class inheritance instead of selector inheritance. If you are creating a mixin, which you later reference in your selector classes, you might find that you can simply use class inheritance in your HTML instead. So, as an example, instead of using this in your Less file:<div><pre class="programlisting">.gradientBlack { ... }

h3 { .gradientBlack; ... }
.darkBox { .gradientBlack; ... }
td.dark { .gradientBlack; ... }</pre></div><p class="calibre24">We can eliminate the repeated use of <code class="email">.gradientBlack</code>, by defining it once in our style sheet, then referencing it directly in the code:</p><div><pre class="programlisting">&lt;h3 class="gradientBlack"&gt;&lt;/h3&gt;
&lt;div class="darkBox gradientBlack&gt;&lt;/div&gt;
&lt;td class="dark gradientBlack"&gt;&lt;/td&gt;</pre></div></li><li class="listitem">Use extend instead of mixins to reduce code bloat; <code class="email">extend</code> is clever enough to merge together styles that use the same rules, as we saw earlier in the chapter, instead of simply reproducing code blocks for each similar style.</li><li class="listitem">If you have to stay with using mixins, then use parentheses to hide the mixin code so that only the calling code is compiled and not the additional mixin as well.</li><li class="listitem">If you have a number of mixins that require vendor prefixing, you can use this mixin to handle them by simply passing the property that needs to be prefixed, along with the appropriate value, as shown in the following code:<div><pre class="programlisting">.vendorize(@property, @value) {
  -webkit-@{property}: @value;
  -moz-@{property}: @value;
  -ms-@{property}: @value;
  -o-@{property}: @value;
  @{property}: @value;
}</pre></div></li></ul></div><p class="calibre7">Note that this isn't necessary for all properties that still require vendor prefixes; if a CSS3 property only needs one or two vendor prefixes, you might find it easier to create a simple mixin to handle this separately.</p><div><h3 class="title2"><a id="note28" class="calibre1"/>Note</h3><p class="calibre7">It is worth noting that some vendor prefixes use a completely different format to the example we've used—the mixin here won't work for all property values, such as gradients and will therefore need a separate mixin.</p></div><p class="calibre7">Hopefully, there are<a id="id411" class="calibre1"/> some useful tips in there that you can use in your projects. The key to all of this is using the right combination of functions, such as extends instead of mixins (or a mix of both), that helps keep your code to a minimum and free of bloat.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch05lvl1sec50" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">Throughout this chapter, we've covered a few concepts that will help further reduce the amount of code you need to write—let's take a moment to recap, before moving onto some more practical areas of using Less in the next chapter.</p><p class="calibre7">We began with a look at how you can group or nest styles within Less; we saw how this can help arrange styles visually, to make it easier to manage, but also remove the need to duplicate styles, when referencing child selectors such as those used in building menu systems.</p><p class="calibre7">We then moved on and looked at the extend function to inherit or override existing styles, and covered how it works in a similar fashion to mixins, while at the same time, merging together identical styles, to remove the need to have separate code blocks for identical styles. We also took a look at the use of the <code class="email">all</code> keyword to help with inheriting of all of the styles, particularly those otherwise not accessible using extend on its own.</p><p class="calibre7">We then covered how you group styles and reference one or more elements using namespacing; this allows us to visually group together common elements, while at the same time, picking and choosing which styles to use. Once chosen, we then saw how Less will compile these into valid CSS.</p><p class="calibre7">Last but by no means least, we took a quick look at setting the right scope in Less, to ensure our variables have the right values. We saw from the example how easy it is to get the scope wrong and the importance of using the right scope in our code. We then finished with a look at importing Less files into CSS and some hints and tips on removing code bloat, based on some of the key areas of Less we have seen so far in the book.</p><p class="calibre7">In the next chapter, we'll move on from the theory and take a look at some of the practical aspects of moving a CSS-based site over to using Less.</p></div></body></html>