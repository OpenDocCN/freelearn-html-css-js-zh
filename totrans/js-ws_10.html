<html><head></head><body>
		<div>
			<div class="Content" id="_idContainer245">
			</div>
		</div>
		<div class="Content" id="_idContainer246">
			<h1 id="_idParaDest-384"><a id="_idTextAnchor426"/>10. Accessing External Resources</h1>
		</div>
		<div class="Content" id="_idContainer263">
			<p class="callout-heading">Overview</p>
			<p class="callout">By the end of this chapter, you will be able to describe AJAX, REST, JSON, and HTTP to APIs; perform service calls using a library such as jQuery and native XMLHttpRequest and be familiar with the pros and cons of each approach; use an external API to retrieve data using JavaScript; use some jQuery functionality for the UI and events; and identify cross-domain-capable APIs and use cross-domain requests.</p>
			<p class="callout">In this chapter, we will cover various approaches to using AJAX to obtain data, primarily from RESTful services.</p>
			<h1 id="_idParaDest-385"><a id="_idTextAnchor427"/>Introduction</h1>
			<p>In the previous chapter, you learned about Node.js, which runs on the server-side. This chapter will cover the other side of services – you will learn how to call them from the client-side. There's a good chance that services being accessed are, in fact, implemented in Node.js, but it is common for them to run on other platforms as well, such as Java, C#, and Python.</p>
			<p>Web pages are static and of limited use without fresh data. Web services are a set of technologies that provide standards for your web page to communicate with other servers and sites to exchange data.</p>
			<p>To enable services implemented in different languages to communicate with each other, they need to have common rules regarding how the requests and responses being exchanged should look and be structured. For this reason, there are a number of different standards and approaches to web services out there that define the format of data being exchanged. The most popular combination used for websites today is <strong class="bold">REST</strong> with <strong class="bold">JSON</strong>, which stands for <strong class="bold">Representational State Transfer</strong> with <strong class="bold">JavaScript Object Notation</strong>. This chapter will describe in detail all you need to know in order to call REST services to provide data for your web pages.</p>
			<p>Before web services came about, web servers needed to gather all required data on the server-side before rendering the final HTML they would serve. To get a fresh update, the entire page had to be redrawn. The user experience of the pages was constantly affected, especially if the data involved complex calculations or queries, as the user would need to wait until redrawing was complete and didn't have the ability to use any other functionality on the page in the meantime.</p>
			<p>For example, think of a page that displays stock quotes or email messages. In the old days, you would have to reload or refresh the whole page in the browser to see whether there were any updates to the stock quotes or whether you had any new mail. Web services and dynamic HTML changed this, as it is now common for pages to only update portions at a time without needing to reload and redraw the entire page.</p>
			<p>Note that many web services use a different technology, known as <strong class="bold">SOAP</strong>, which stands for <strong class="bold">Simple Object Access Protocol</strong> with an <strong class="bold">XML</strong> (<strong class="bold">eXtensible Markup Language</strong>) format. There are some emerging standards as well that are gaining traction, such as Google's protocol buffers. While each of these technologies has its advantages and disadvantages and use cases where they are appropriate, we will only focus on REST and JSON in this book as they are the most widespread methods in use today.</p>
			<h1 id="_idParaDest-386"><a id="_idTextAnchor428"/>JSON</h1>
			<p>As you have been using JavaScript up until now in this book, you should feel right at home with the syntax of JSON, as it is derived from JavaScript and closely resembles object structures you have already learned in previous chapters. JSON, usually pronounced like the name Jason, is lightweight, easy for humans to read and write, and easy for machines to parse and work with.</p>
			<p>There are two main data structures used in JSON:</p>
			<ul>
				<li>A collection of key-value pairs enclosed in curly-braces <strong class="source-inline">{ }</strong></li>
				<li>A list of values enclosed in square brackets <strong class="source-inline">[ ]</strong></li>
			</ul>
			<p>Here's a sample JSON object that shows different structures and value types:</p>
			<p class="source-code-heading">sample_json.json</p>
			<p class="source-code">1 {</p>
			<p class="source-code">2     "twitter_username": "@LeoDiCaprio",</p>
			<p class="source-code">3     "first_name": "Leonardo",</p>
			<p class="source-code">4     "last_name": "DiCaprio",</p>
			<p class="source-code">5     "famous_movies": [{</p>
			<p class="source-code">6         "title": "Titanic",</p>
			<p class="source-code">7         "director": "James Cameron",</p>
			<p class="source-code">8   <a id="_idTextAnchor429"/>      "costars": [</p>
			<p class="source-code">9             "Kate Winslet",</p>
			<p class="source-code">10              "Billy Zane"</p>
			<p class="source-code">11         ],</p>
			<p class="source-code">12         "year": 1997</p>
			<p class="source-code">13     }, {</p>
			<p class="source-code">14         "title": "The Great Gatsby",</p>
			<p class="source-code">15         "director": "Baz Luhrmann",</p>
			<p class="source-code-link">The full code is available at: <a href="https://packt.live/2CDXhWC">https://packt.live/2CDXhWC</a></p>
			<p>Each key-value pair has the key wrapped in double quotation marks, as in <strong class="source-inline">"key"</strong>, and a colon is placed between the key and the value. For example, the following would be incorrect, as the key does not have double quotation marks:</p>
			<p class="source-code">first_name: "Leonardo"</p>
			<p>Keys must be unique within each object, can be any valid string, and allow space characters (though it is not always the best idea to use spaces in keys, as programming is sometimes easier if other characters, such as underscores, are used instead). Each key-value pair is separated by a comma.</p>
			<p>The values can be one of the following types:</p>
			<ul>
				<li><strong class="bold">String</strong>: Such as <strong class="source-inline">"twitter_username": "@LeoDiCaprio"</strong> in the preceding example. String values are enclosed in double-quotes.</li>
				<li><strong class="bold">Number</strong>: Such as <strong class="source-inline">"year": 1997</strong> in the preceding example. Sign (+ or -) and decimal fractions are also permitted. Numbers are not enclosed in double-quotes.</li>
				<li><strong class="bold">Boolean (true or false)</strong>: Such as <strong class="source-inline">"active": true</strong> in the preceding example (Boolean values are not enclosed in double-quotes).</li>
				<li><strong class="bold">Nested array</strong>: This is a value that is itself an array of strings. Each of the strings is enclosed in double-quotes and separated by a comma. (An array is used here to allow any number of costars to be specified). Have a look at the example block:<p class="source-code">"costars": [</p><p class="source-code">    "Kate Winslet",</p><p class="source-code">    "Billy Zane"</p><p class="source-code">],</p></li>
				<li><strong class="bold">Nested object</strong>: Such as the elements in the preceding <strong class="source-inline">famous_movies</strong> list. Each element in the array is a nested object that contains fields related to a movie, including <strong class="source-inline">title, director, costars</strong>, and <strong class="source-inline">year</strong>. The nested objects in the array are separated by a comma.</li>
				<li><strong class="bold">Null</strong>: Such as <strong class="source-inline">"eye_color": null</strong> in the preceding code snippet. <strong class="source-inline">Null</strong> can be used to indicate an unknown or inapplicable value. <strong class="source-inline">Null</strong> is indicated with no quotes.<p class="callout-heading">Note</p><p class="callout">There is some debate on how to best represent such scenarios, with many opinions being that if a value is unknown, the field should not appear at all rather than assigning a value of <strong class="source-inline">null</strong>. We can leave this debate aside for the purposes of this book.</p></li>
			</ul>
			<p>Whitespace (spaces, tabs, and carriage returns) is generally ignored in JSON (except in strings) and can be used liberally to increase readability.</p>
			<p>There are some important limitations with JSON syntax as well:</p>
			<ul>
				<li>Values must be one of the types previously specified, and cannot have more complex expressions, calculations, or function calls.</li>
				<li>Comments are not permitted.</li>
			</ul>
			<h2 id="_idParaDest-387"><a id="_idTextAnchor430"/>REST</h2>
			<p>An <strong class="bold">Application Programming Interface</strong> (<strong class="bold">API</strong>) defines the formats and rules of how programs talk to each other. REST is a software architectural style that has become the de facto standard for most web services used by websites today. In this book, rather than getting bogged down with the academic theory behind REST, we'll focus on the practical aspects of how to invoke and use RESTful services from the client-side.</p>
			<h2 id="_idParaDest-388"><a id="_idTextAnchor431"/>What Is HTTP?</h2>
			<p>In order to understand REST, it is important to touch a bit on the underlying technology of the World Wide Web and how resources are identified and communicated. Very briefly, <strong class="bold">HyperText Transfer Protocol</strong> (<strong class="bold">HTTP</strong>) defines what actions web browsers and servers should take in response to various commands.</p>
			<p>Resources such as HTML pages, images, documents, or video files are identified by using a <strong class="bold">Uniform Resource Locator</strong> (<strong class="bold">URL</strong>). URLs have the following parts:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer247">
					<img alt="Figure 10.1: Parts of a URL&#13;&#10;" src="image/C14377_10_01.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.1: Parts of a URL</p>
			<ol>
				<li><strong class="bold">Protocol identifier</strong>: Typically, <strong class="source-inline">http</strong> (insecure) or <strong class="source-inline">https</strong> (for secure communication).</li>
				<li><strong class="bold">Host Name</strong>: Specifies the location of the IP address or domain name.</li>
				<li><strong class="bold">Port (optional)</strong>: If no port is specified, port <strong class="source-inline">80</strong> is assumed by default for <strong class="source-inline">http</strong> (<strong class="source-inline">443</strong> for <strong class="source-inline">https</strong>).</li>
				<li><strong class="bold">Path</strong>: To a file or location on the webserver.</li>
				<li><strong class="bold">Query</strong>: Parameters in a query string that follow a question mark (<strong class="source-inline">?</strong>). The parameter name is separated from the value by an equals sign (<strong class="source-inline">=</strong>). Multiple parameters can also be present, usually separated by an ampersand (<strong class="source-inline">&amp;</strong>).</li>
			</ol>
			<p>Most REST APIs favor URLs that combine identifiers with other elements of the URL rather than using parameters in the query string, for example, a URL such as <strong class="source-inline">http://myserver.com/user/1234</strong>.</p>
			<p>The preceding URL code is often preferred over <strong class="source-inline">http://myserver.com/user?user_id=1234</strong>.</p>
			<p>But this latter style is still perfectly valid and definitely considered RESTful!</p>
			<p>On a basic level, REST utilizes HTTP verbs to perform actions with data or resources: <strong class="source-inline">GET</strong> is used to retrieve a resource, <strong class="source-inline">PUT</strong> is used to update a resource, <strong class="source-inline">POST</strong> is used to create a new resource, and <strong class="source-inline">DELETE</strong> is used to remove data.</p>
			<p>HTTP requests frequently require different values to be passed through headers as well. The HTTP header format contains name-value pairs separated by a colon. For example, to indicate that you desire the data in your HTTP response to be in JSON format, it is often necessary to provide the following header:</p>
			<p class="source-code">Accept: application/json</p>
			<h2 id="_idParaDest-389"><a id="_idTextAnchor432"/>TheSportsDB</h2>
			<p>There are many websites and services that provide data of various types through APIs. TheSportsDB (<a href="https://www.thesportsdb.com">https://www.thesportsdb.com</a>) is one such site that provides sports-related data through its simple JSON REST API.</p>
			<p>TheSportsDB is a community database of sports data and artwork that covers hundreds of professional and non-professional sports, such as soccer, basketball, baseball, tennis, cricket, and motorsport. It provides live scores, logos, rosters, stats, schedules, and much more:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer248">
					<img alt="Figure 10.2: Home page and logo of TheSportsDB&#13;&#10;" src="image/C14377_10_02.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.2: Home page and logo of TheSportsDB</p>
			<p>Many APIs require users to obtain an API key in order to use their services. The good news is access to TheSportsDB API is free with a test API key, <strong class="source-inline">1</strong>, for educational purposes or smaller applications. (Commercial applications and larger users are encouraged to sign up if the API will be used frequently. Donations are also accepted, though are not required, through Patreon.)</p>
			<div>
				<div class="IMG---Figure" id="_idContainer249">
					<img alt="Figure 10.3: Sample page showing how the data from various API calls is &#13;&#10;combined to present team info&#13;&#10;" src="image/C14377_10_03.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.3: Sample page showing how the data from various API calls are combined to present team info</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The full API is documented at https://packt.live/2NuwMtd.</p>
			<h2 id="_idParaDest-390"><a id="_idTextAnchor433"/>Exercise 10.01: Using a REST API to Make Calls</h2>
			<p>To get a good feel for this REST API and how it works before learning how to invoke it programmatically, we are going to make some calls right in our web browser.</p>
			<p>Calls to TheSportsDB API have <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/{APIKEY}/resource_path</strong> as the base form. Since we are using the free test API key, substitute <strong class="source-inline">{APIKEY}</strong> with the value of <strong class="source-inline">1</strong>.</p>
			<p>The following is a summary of the API calls we will be using in the exercises. A string of <strong class="source-inline">XXXX</strong>'s indicate where an appropriate identifier or value should be substituted:</p>
			<ul>
				<li><strong class="bold">List all leagues</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/all_leagues.php</strong></li>
				<li><strong class="bold">List all teams' details in a league by ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/lookup_all_teams.php?id=XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idLeague</strong> from the list of leagues</li>
				<li><strong class="bold">Last 5 events by team ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/eventslast.php?id=XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idTeam</strong> from the list of teams</li>
				<li><strong class="bold">Team details by ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/lookupteam.php?id=XXXX</strong>, where, again, <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idTeam</strong> from the list of teams</li>
			</ul>
			<p>The following are other useful methods the API provides (but will not be specifically covered here):</p>
			<ul>
				<li><strong class="bold">Search for the team by name</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/searchteams.php?t=XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a search string</li>
				<li><strong class="bold">List all players in a team by team ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/lookup_all_players.php?id=XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idTeam</strong> from the list of teams</li>
				<li><strong class="bold">Player details by player ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/lookupplayer.php?id=XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idPlayer</strong> from the list of players</li>
				<li><strong class="bold">Player honors by player ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/lookuphonors.php?id= XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idPlayer</strong> from the list of players</li>
				<li><strong class="bold">Next 5 events by team ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/eventsnext.php?id= XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idTeam</strong> from the list of teams</li>
				<li><strong class="bold">Event details by ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/lookupevent.php?id=XXXX</strong>, where <strong class="source-inline">XXXX</strong> is an <strong class="source-inline">idEvent</strong> from the list of events</li>
				<li><strong class="bold">Next 15 events by league ID</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/eventsnextleague.php?id=XXXX</strong>, where <strong class="source-inline">XXXX</strong> is a value of <strong class="source-inline">idLeague</strong> from the list of leagues</li>
				<li><strong class="bold">Events on a specific day</strong>: <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/eventsday.php?d=2019-10-10</strong></li>
			</ul>
			<p>In order to obtain useful data regarding our favorite sports team, it is necessary to first look up the ID for that team. The easiest way to do this is by obtaining a list of all available leagues, finding the ID we are interested in, then doing another call with this ID.</p>
			<p><strong class="source-inline">TheSportsDB</strong> provides the following service call to obtain our list of all available leagues. The following instructions are for Google Chrome, but any major browser supports similar functionality:</p>
			<ol>
				<li value="1">Launch a new instance of the browser.</li>
				<li>Press the <em class="italic">F12</em> key to launch the debugger (or select <strong class="source-inline">More Tools</strong> | <strong class="source-inline">Developer Tools</strong> from the menu).</li>
				<li>Select the <strong class="source-inline">Network</strong> tab and make sure the circle icon is red (to indicate that network traffic is being logged). Your screen should now look similar to this:<div class="IMG---Figure" id="_idContainer250"><img alt="Figure 10.4: Network tab in the debugger of Chrome Developer Tools&#13;&#10;" src="image/C14377_10_04.jpg"/></div><p class="figure-caption">Figure 10.4: Network tab in the debugger of Chrome Developer Tools</p></li>
				<li>Type <strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/all_leagues.php</strong> as the URL into the address bar and press <em class="italic">Enter</em>. Your screen should now look similar to this:<div class="IMG---Figure" id="_idContainer251"><img alt="Figure 10.5: Raw JSON response with league data&#13;&#10;" src="image/C14377_10_05.jpg"/></div><p class="figure-caption">Figure 10.5: Raw JSON response with league data</p><p>Notice the JSON response in the main window lists all the league data, but it is unformatted and not very user-friendly. Luckily, the debugger provides a nicer way of viewing the data in a collapsible tree. In the <strong class="source-inline">Network</strong> tab, select the line with <strong class="source-inline">all_leagues.php</strong> and select the <strong class="source-inline">Preview</strong> tab.</p><p>You should see the first line of JSON data in your <strong class="source-inline">Preview</strong> window. Place your mouse over this line and right-click the mouse button to open the context menu. From the context menu, select <strong class="source-inline">Expand recursively</strong>. You will now see a lot more data, like the screenshot that follows. Note that you may need to select <strong class="source-inline">Expand recursively</strong> two or three times to get the data to fully expand.</p></li>
				<li>Let's find the data for the league we are interested in. Press <em class="italic">Ctrl</em> + <em class="italic">F</em> and type <strong class="source-inline">NBA</strong> to find the entry for the National Basketball Association. Your screen should now look similar to this:<div class="IMG---Figure" id="_idContainer252"><img alt="Figure 10.6: Expanded and formatted JSON&#13;&#10;" src="image/C14377_10_06.jpg"/></div><p class="figure-caption">Figure 10.6: Expanded and formatted JSON</p></li>
				<li>Focusing on the entry for our league, the full JSON for the entry looks like this (formatted for clarity):<p class="source-code">{</p><p class="source-code">    idLeague: "4387"</p><p class="source-code">    strLeague: "NBA"</p><p class="source-code">    strLeagueAlternate: "National Basketball Association"</p><p class="source-code">    strSport: "Basketball"</p><p class="source-code">}</p><p>This entry only has a few key-value pairs, but with the <strong class="source-inline">idLeague</strong> key, we now know that the league ID of <strong class="source-inline">4387</strong> represents the NBA in this API. This ID can now be used for another service call to obtain further details regarding the NBA.</p></li>
				<li>Following a similar process to the one previously described, enter the following as the URL:<p><strong class="source-inline">https://www.thesportsdb.com/api/v1/json/1/lookup_all_teams.php?id=4387</strong></p><p>Notice the <strong class="source-inline">id</strong> parameter placed at the end of the URL, for which we plugged in the ID of <strong class="source-inline">4387</strong> that we found in the previous steps.</p></li>
				<li>Once you have expanded the result set, search for the word <strong class="source-inline">Knicks</strong>. This time, you will need to search through several of the matches until you find the correct one, as the word <strong class="source-inline">Knicks</strong> appears in several irrelevant entries as part of long descriptions. Also, there will be many more key-value pairs available in the resulting entry compared to last time, but we will only focus on some of them.</li>
			</ol>
			<p>The relevant JSON looks something like this, with many of the fields removed:</p>
			<p class="source-code">{</p>
			<p class="source-code">  "idTeam": "134862",</p>
			<p class="source-code">  "strTeam": "New York Knicks",</p>
			<p class="source-code">  "strTeamShort": "NYK",</p>
			<p class="source-code">  "intFormedYear": "1946",</p>
			<p class="source-code">  "strSport": "Basketball",</p>
			<p class="source-code">  "strLeague": "NBA",</p>
			<p class="source-code">  "idLeague": "4387",</p>
			<p class="source-code">  "strStadium": "Madison Square Garden",</p>
			<p class="source-code">  "strStadiumLocation": "New York City, New York",</p>
			<p class="source-code">  "intStadiumCapacity": "19812",</p>
			<p class="source-code">  "strWebsite": "www.nba.com/knicks/?tmd=1",</p>
			<p class="source-code">  "strFacebook": "www.facebook.com/NYKnicks",</p>
			<p class="source-code">  "strTwitter": "twitter.com/nyknicks",</p>
			<p class="source-code">  "strInstagram": "instagram.com/nyknicks",</p>
			<p class="source-code">  "strCountry": "USA",</p>
			<p>Here, we see the team ID and name in the <strong class="source-inline">idTeam</strong> and <strong class="source-inline">strTeam</strong> keys, followed by other fields related to team history, stadium info, and website and social media URLs. </p>
			<p class="source-code">  "strTeamBadge": "https://www.thesportsdb.com/images/media/team/badge/wyhpuf1511810435.png",</p>
			<p class="source-code">  "strTeamJersey": "https://www.thesportsdb.com/images/media/team/jersey/jfktrl1507048454.png",</p>
			<p class="source-code">  "strTeamLogo": "https://www.thesportsdb.com/images/media/team/logo/yqtrrt1421884766.png",</p>
			<p class="source-code">  "strTeamBanner": "https://www.thesportsdb.com/images/media/team/banner/wvrwup1421885325.jpg",</p>
			<p class="source-code">}</p>
			<p>Finally, there are links to various available images for the team badge, jersey, logo, and banner, which we can use to display on our site if we wish. We will be making use of these values in the upcoming exercises.</p>
			<h2 id="_idParaDest-391"><a id="_idTextAnchor434"/>HTTP Headers</h2>
			<p>While we have the network monitor open, it would be a good time to take note of some other useful information. Click on the <strong class="source-inline">Headers</strong> tab, and you will see all the HTTP request headers, response headers, and some other details that were involved in the interaction, similar to this:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer253">
					<img alt="Figure 10.7: HTTP Headers&#13;&#10;" src="image/C14377_10_07.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.7: HTTP Headers</p>
			<p>The following are of particular note:</p>
			<ul>
				<li><strong class="source-inline">Request Method: GET</strong>: URLs entered into the address line of a browser are <strong class="source-inline">GET</strong> by default.</li>
				<li><strong class="source-inline">Status Code: 200</strong>: This indicates the interaction was successful. There are several status codes, and the following are some of the most common ones. The later status codes, with a number of <strong class="source-inline">400</strong> or greater, indicate various error conditions that occurred:</li>
			</ul>
			<div>
				<div class="IMG---Figure" id="_idContainer254">
					<img alt="Figure 10.8: Status code and their meanings&#13;&#10;" src="image/C14377_10_08.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.8: Status code and their meanings</p>
			<ul>
				<li><strong class="source-inline">content-type: application/json; charset=utf-8</strong>: This indicates to the caller that the response is in JSON format in UTF-8 encoding.</li>
				<li><strong class="source-inline">Remote Address: 104.18.46.13:443</strong>: This indicates the IP address and port of the remote server that processed the request.</li>
				<li><strong class="source-inline">access-control-allow-origin: *</strong>: This is a header that enables cross-site requests. More on this in a later section.</li>
				<li><strong class="source-inline">accept: text/html,application/xhtml+xml,application/xml;…</strong>: This header advises the server what formats the caller would accept for the response. This requires a bit of explanation in our case. TheSportsDB is designed to be a JSON-only API, so even though JSON is not indicated in the list of accepted formats the browser sent, the response is still in JSON. (This is not the case for other APIs that may support multiple formats such as HTML, XML, or JSON. So, this header would be used for the caller to indicate which format they desire.)</li>
			</ul>
			<p>There are other available HTTP headers that were not part of this request but deserve to be mentioned. To briefly summarize some of the most common headers:</p>
			<ul>
				<li><strong class="source-inline">Authorization</strong>: Many resources are protected and require credentials to access them, such as with a user/password combination or a token. This header is used to send the credentials in various formats.</li>
				<li><strong class="source-inline">Cache-Control</strong>: Static resources or data that is not expected to change in the near future can be cached by the browser or client, so the resource is not fetched unnecessarily if requested again. This response header indicates whether caching is allowed. Some of the most common values are <strong class="source-inline">no-cache</strong> and <strong class="source-inline">max-age=&lt;seconds&gt;</strong>, which indicate whether the object can be cached and for how long, respectively.</li>
				<li><strong class="source-inline">Last-Modified</strong>: This response header indicates when the object was last modified.</li>
				<li><strong class="source-inline">Keep-Alive</strong>: Controls how long a persistent connection should stay open. A persistent connection is a special type that is used when multiple requests are made with the same connection, making it unnecessary to close and re-establish connections.</li>
				<li><strong class="source-inline">Cookie</strong>/<strong class="source-inline">Set-Cookie</strong>: A cookie is a small piece of data sent by a website to save state or track user authentication, devices, and activity. The next time the browser or client makes a request to the server, the previously sent cookie value is included.</li>
			</ul>
			<p>In this section, we introduced the basics of HTTP, JSON, and REST web services. We learned about the parts of a URL, HTTP status codes, HTTP headers, and how to use the browser debugger to invoke REST services and glean the data we need.</p>
			<p>In the next topic, we will introduce AJAX and how to invoke services with JavaScript code using the jQuery library.</p>
			<h1 id="_idParaDest-392"><a id="_idTextAnchor435"/>AJAX</h1>
			<p>AJAX stands for Asynchronous JavaScript and XML and is an umbrella term for a set of technologies to communicate with servers and other sites in various formats, including JSON and XML.</p>
			<p>Most JavaScript is synchronous, which means there is only a single thread of execution, and only one operation can be executed at a time. If browsers were truly synchronous, websites would be a drag to use, as only one resource would be able to load at a time. Imagine if the images on websites only drew one at a time after loading! Sometimes, requests can take a long time, such as to do a calculation or a complex database query. You wouldn't want your site to become non-responsive while a request is processing!</p>
			<p>Luckily, service calls were designed to allow multiple calls to occur asynchronously. Also, in between requests being made and a response is received, the main thread of execution can continue to execute and potentially issue more service calls. This is the <em class="italic">"A"</em> in <em class="italic">AJAX</em>.</p>
			<p>JavaScript has developed several techniques and approaches to accomplish synchronicity, and the most straightforward and widespread is by using callbacks. This chapter will use callbacks, but other techniques, such as promises, will be explored in <em class="italic">Chapter 15, Asynchronous Tasks</em></p>
			<p>JavaScript has a means of natively performing service calls via an object called <strong class="source-inline">XMLHttpRequest</strong>. Normally, there is a preference to use native functionality that is built-in to JavaScript, but in my opinion, <strong class="source-inline">XMLHttpRequest</strong> is too low-level and difficult to use most of the time. This is a use case where utilizing a library makes more sense and really simplifies your code. (However, we will also cover <strong class="source-inline">XMLHttpRequest</strong> later in this chapter.)</p>
			<p>There are several libraries available that make REST calls, and we'll start with exploring jQuery's <strong class="source-inline">ajax()</strong> and <strong class="source-inline">getJSON()</strong> calls.</p>
			<h2 id="_idParaDest-393"><a id="_idTextAnchor436"/>jQuery</h2>
			<p>jQuery is one of the most popular JavaScript libraries out there. It is lightweight and greatly simplifies programming JavaScript for many functions related to websites. These include:</p>
			<ul>
				<li>HTML/DOM manipulation</li>
				<li>CSS styling helpers</li>
				<li>HTML event handling</li>
				<li>AJAX service call helpers and much more</li>
			</ul>
			<div>
				<div class="IMG---Figure" id="_idContainer255">
					<img alt="Figure 10.9: Home page of the jQuery project&#13;&#10;" src="image/C14377_10_09.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.9: Home page of the jQuery project</p>
			<p>For HTML/DOM and CSS manipulation, jQuery syntax typically follows a pattern of <em class="italic">selecting</em> HTML elements and calling methods to perform <em class="italic">actions</em> on the elements.</p>
			<p>The basic syntax is <strong class="source-inline">$(selector).action()</strong>, where:</p>
			<ul>
				<li>The <strong class="source-inline">$</strong> sign defines/accesses jQuery.</li>
				<li><strong class="source-inline">(selector)</strong> locates HTML elements.</li>
				<li><strong class="source-inline">action()</strong> denotes the jQuery action to be performed on the elements.</li>
			</ul>
			<p>Selectors start with the dollar sign and parentheses: <strong class="source-inline">$()</strong>. They follow a very similar syntax to selecting elements in CSS code. The most basic case for using a selector is an element by HTML ID, for which you prefix the ID with a pound sign (<strong class="source-inline">#</strong>). For example, if you start with the following HTML:</p>
			<p class="source-code">&lt;div id="test_div"&gt;</p>
			<p class="source-code">     &lt;button class="testbutton"&gt;Click Me&lt;/button&gt;</p>
			<p class="source-code">&lt;/div&gt;</p>
			<p>The <strong class="source-inline">$("#test_div"").hide()</strong> code would cause the <strong class="source-inline">&lt;div&gt;</strong> with an ID of <strong class="source-inline">test_div</strong> to be hidden from view. Multiple actions can also be performed in a chained fashion on the same elements. For example,<strong class="source-inline"> $("#test_div"").html(""Hello World"").show()</strong> would assign the text <strong class="source-inline">Hello World</strong> as the body of the <strong class="source-inline">&lt;div&gt;</strong> and cause it to reappear.</p>
			<p>The following are common methods provided by jQuery for UI purposes:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer256">
					<img alt="Figure 10.10: Common jQuery Methods for UI purpose&#13;&#10;" src="image/C14377_10_10.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.10: Common jQuery Methods for UI purpose</p>
			<p>jQuery can also be used to define functions to handle events on HTML elements; for example:</p>
			<p class="source-code">$(".testbutton").click(function() {</p>
			<p class="source-code">    alert("Button Clicked!");</p>
			<p class="source-code">}</p>
			<p>The preceding code would cause an alert with the message <strong class="source-inline">Button Clicked</strong> to appear if the button was clicked. Also note that a class selector was used in this case, not one to select by ID as was used previously. Class selectors start with a period (<strong class="source-inline">.</strong>) and result in selecting all elements in the document that have that class in its list of classes (in this case, only one element).</p>
			<p>It is also possible to select multiple elements by type, attributes, values, and much more.</p>
			<p>The following are common methods provided by jQuery for event handlers:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer257">
					<img alt="Figure 10.11: Common jQuery methods for event handlers&#13;&#10;" src="image/C14377_10_11.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.11: Common jQuery methods for event handlers</p>
			<p>Finally, jQuery offers a complete suite of helpers to perform AJAX service calls. These will be introduced in the next exercise.</p>
			<p>The previous paragraphs were only a brief introduction to jQuery, but there are many good tutorials and resources available to learn about it in more depth.</p>
			<h2 id="_idParaDest-394"><a id="_idTextAnchor437"/>Exercise 10.02: Using AJAX and the jQuery ajax() Method to Invoke a Service</h2>
			<p>Now that we understand the mechanics of HTTP and REST, we are ready to write some code.</p>
			<p>jQuery has very nice methods available that greatly simplify AJAX interactions. In this exercise, we will first use the <strong class="source-inline">$.ajax()</strong> method to make a TheSportsDB service call to find out how our favorite team scored in its last game. We will use the team ID obtained in the previous section as a parameter.</p>
			<ol>
				<li value="1">First, we enter the HTML code. Open a text editor or IDE and create a new file (<strong class="source-inline">exercise2.html</strong>).</li>
				<li>Add the <strong class="source-inline">&lt;html&gt;</strong> tag and the <strong class="source-inline">&lt;head&gt;</strong> element, which simply includes the JavaScript files for the jQuery library and our JavaScript source file, which will be shown shortly using the file <strong class="source-inline">exercise2.html:</strong><p class="source-code">&lt;html&gt;</p><p class="source-code">  &lt;head&gt;</p><p class="source-code">    &lt;meta charset="utf-8"/&gt;</p><p class="source-code">    &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.    js"&gt;&lt;/scr ipt&gt;</p><p class="source-code">    &lt;script src="exercise2.js"&gt;&lt;/script&gt;</p><p class="source-code">  &lt;/head&gt;</p></li>
				<li>Next, add the <strong class="source-inline">&lt;body&gt;</strong> tag. The <strong class="source-inline">&lt;table&gt;</strong> contains the HTML tags to display the last game data:<p class="source-code">&lt;body&gt;</p><p class="source-code">  &lt;table id="game_table" style="display: none"&gt;</p><p>We use a table to aid the layout. The table is initially specified with a style of <strong class="source-inline">display: none</strong> since the data is incomplete when the page is loaded, and we don't want it to be shown yet. We will make it visible only once the service call returns and provides us with the data.</p></li>
				<li>Fill in the table rows and columns until the end of the HTML:<p class="source-code-heading">exercise2.html</p><p class="source-code">11   &lt;tr&gt;</p><p class="source-code">12       &lt;td&gt;Last Game Score:&lt;/td&gt;</p><p class="source-code">13       &lt;td&gt;&lt;/td&gt;</p><p class="source-code">14       &lt;td id="game_date"&gt;&lt;/td&gt;</p><p class="source-code">15   &lt;/tr&gt;</p><p class="source-code">16   &lt;tr&gt;</p><p class="source-code">17       &lt;td id="away_team"&gt;&lt;/td&gt;</p><p class="source-code">18       &lt;td&gt;vs&lt;/td&gt;</p><p class="source-code">19       &lt;td id="home_team"&gt;&lt;/td&gt;</p><p class="source-code">20   &lt;/tr&gt;</p><p class="source-code">21   &lt;tr&gt;</p><p class="source-code">22       &lt;td id="away_score"&gt;&lt;/td&gt;</p><p class="source-code">23       &lt;td&gt;&lt;/td&gt;</p><p class="source-code">24       &lt;td id="home_score"&gt;&lt;/td&gt;</p><p class="source-code">25   &lt;/tr&gt;</p><p class="source-code-link">The full code is available at: <a href="https://packt.live/37aWtH4">https://packt.live/37aWtH4</a></p><p>Most of the table columns are given IDs such as <strong class="source-inline">away_team</strong> and <strong class="source-inline">away_score</strong> so they can be referenced later to fill in the data once available. This also allows us to treat each value separately and define different styling for each if we desire.</p></li>
				<li>Finally, we get to the actual JavaScript code. Save the first file as <strong class="source-inline">exercise2.html</strong> and create a new file in the text editor or IDE.</li>
				<li>Enter the first line of the file <strong class="source-inline">exercise2.js</strong>:<p class="source-code">$(document).ready(function () {</p><p>All jQuery functions begin with the dollar sign, <strong class="source-inline">$</strong>, as a shortcut, followed by a dot and the function name. The <strong class="source-inline">$(document).ready()</strong> function is called once the page is fully loaded. It's important to use this function here, since this JavaScript file was included in the document via a <strong class="source-inline">&lt;script&gt;</strong> tag in the <strong class="source-inline">&lt;head&gt;</strong> section of the HTML before the <strong class="source-inline">&lt;body&gt;</strong> tag. This code could potentially be loaded and executed before the full body of the HTML is parsed and processed. If we did not enclose our logic in a <strong class="source-inline">$(document).ready()</strong> function, there is potential for errors if an HTML element is referenced that hasn't been loaded yet.</p></li>
				<li>Start the <strong class="source-inline">$.ajax()</strong> call as follows:<p class="source-code">    $.ajax({</p><p class="source-code">        method: 'GET',</p><p>The <strong class="source-inline">$.ajax()</strong> call includes a listing of various settings. The <strong class="source-inline">method</strong> setting indicates that the type of call we desire is <strong class="source-inline">GET</strong>. (In truth, it is not really necessary to specify the <strong class="source-inline">method</strong> setting as <strong class="source-inline">GET</strong> is the default value if it is not present. But sometimes it is more beneficial to be more explicit.)</p></li>
				<li>We next enter the <strong class="source-inline">dataType</strong> setting:<p class="source-code">        dataType: 'json',</p><p>This specifies that we expect the call response to be in JSON format, and to return the JSON parsed to a JavaScript object. This also causes a request header similar to <strong class="source-inline">Accept: application/json</strong> to be sent.</p></li>
				<li>Type the <strong class="source-inline">url</strong> setting next, which indicates the URL for our call:<p class="source-code">        url: 'https://www.thesportsdb.com/api/v1/json/1/eventslast.php',</p></li>
				<li>Next is the <strong class="source-inline">data</strong> setting:<p class="source-code">        data: {id: 134862},</p><p>The <strong class="source-inline">data</strong> setting indicates the parameters that should be sent in the request. Since this is a <strong class="source-inline">GET</strong>, under the hood, jQuery will add the parameter key-value pairs to the URL query string, resulting in <strong class="source-inline">?id=134862</strong> in this case. We could have added this value to the URL ourselves if we wanted but specifying parameters in the <strong class="source-inline">data</strong> setting allows the parameters to be separate from the URL itself. Another reason is so that the library will handle any URL encoding needed for more complex values.</p></li>
				<li>Next, begin the <strong class="source-inline">success</strong> function, which is a callback function called by jQuery once the service call returns with a response. By this point, jQuery will have processed the response and parsed the JSON into a JavaScript object:<p class="source-code">        success: function (data) {</p></li>
				<li>This <strong class="source-inline">eventslast.php</strong> service call returns the last five events for the team, ordered by latest date first, in the <strong class="source-inline">data.results[]</strong> array. However, for our purposes, we only require the latest game. There is a quirk in the API we need to account for: if the game is currently in progress, the event will be present in the array, but the score may not have a value yet. For our page, we'd prefer to only show games that actually have a score. Enter the following code:<p class="source-code">            // find the most recent game that had a score reported</p><p class="source-code">            const lastGame = data.results.find(g =&gt; g.intAwayScore != null &amp;&amp; </p><p class="source-code">                                                   g.intHomeScore != null);</p><p>We use the <strong class="source-inline">data.results.find()</strong> function to iterate through the array and locate the first element with a score. Specifically, we look for the first event for which the <strong class="source-inline">intAwayScore</strong> and <strong class="source-inline">intHomeScore</strong> values are non-null. We will next set various table cell data with the following code:</p><p class="source-code">            $("#game_date").html(lastGame.dateEvent);</p><p class="source-code">            $("#away_team").html(lastGame.strAwayTeam);</p><p class="source-code">            $("#home_team").html(lastGame.strHomeTeam);</p><p class="source-code">            $("#away_score").html(lastGame.intAwayScore);</p><p class="source-code">            $("#home_score").html(lastGame.intHomeScore);</p><p>These lines set the table cell corresponding to the ID to the specified value. HTML elements can be selected by ID in jQuery by placing a pound (<strong class="source-inline">#</strong>) character before the ID. So, for example, <strong class="source-inline">$("#game_date")</strong> would result in <strong class="source-inline">&lt;td&gt;</strong> with the <strong class="source-inline">game_date</strong> ID being selected, and method calls that come afterward will apply to that element. Finally, the <strong class="source-inline">html()</strong> call would result in the value being assigned to that table cell.</p></li>
				<li>Once all the data is assigned in the table, we are finally ready to show the table to the user. Enter the following final code:<p class="source-code">            $("#game_table").show();</p><p class="source-code">        }</p><p class="source-code">    });</p><p class="source-code">});</p><p>jQuery has a <strong class="source-inline">show()</strong> function, which results in the <strong class="source-inline">display: none</strong> style being made visible. So, <strong class="source-inline">$("#game_table").show()</strong> would select the table represented by the <strong class="source-inline">game_table</strong> ID and cause it to show.</p></li>
				<li>Save the file as <strong class="source-inline">exercise2.js</strong>.</li>
				<li>Load the <strong class="source-inline">exercise2.html</strong> file into a browser. The output should look something like the following screenshot:</li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer258">
					<img alt="Figure 10.12: Result of exercise 10.02&#13;&#10;" src="image/C14377_10_12.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.12: Result of exercise 10.02</p>
			<p>Note there is no styling yet (but that will be added in the next exercise). We can see the results of the favourite team scored using the <strong class="source-inline">$.ajax()</strong> method.</p>
			<p>In this section, we introduced AJAX and the jQuery <strong class="source-inline">ajax()</strong> method to invoke a service. We also introduced the basic jQuery functions to add dynamic content to HTML elements and show/hide them as needed.</p>
			<p>In the next topic, we will go further and use the results of one service as an input to another service call. We will also invoke multiple services asynchronously.</p>
			<h2 id="_idParaDest-395"><a id="_idTextAnchor438"/>Exercise 10.03: More AJAX and Some CSS Styling</h2>
			<p>The previous exercise was a good starting point, but now we'd like to build on it to do the following:</p>
			<ul>
				<li>Use the results obtained from the first service call to show additional items related to the game and teams, such as team logos.</li>
				<li>Make the site more visually appealing by adding CSS styling.</li>
			</ul>
			<p>We'll enhance the code in these steps:</p>
			<ol>
				<li value="1">Open a text editor or IDE and create a new file.</li>
				<li>First, add the <strong class="source-inline">&lt;html&gt;</strong> tag and the <strong class="source-inline">&lt;head&gt;</strong> element. It is almost the same code as in <em class="italic">Exercise 10.02: Using AJAX and the jQuery ajax() Method to Invoke a Service</em>, but with the addition of a stylesheet using the file <strong class="source-inline">exercise3.html</strong>:<p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">  &lt;meta charset="utf-8"/&gt;</p><p class="source-code">  &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"&gt;  &lt;/script&gt;</p><p class="source-code">  &lt;script src="exercise3.js"&gt;&lt;/script&gt;</p><p class="source-code">  &lt;link rel="stylesheet" href="exercise3.css" /&gt;</p><p class="source-code">&lt;/head&gt;</p></li>
				<li>Next, add <strong class="source-inline">&lt;body&gt;</strong>. In <strong class="source-inline">&lt;table&gt;</strong>, the first <strong class="source-inline">&lt;tr&gt;</strong> row is the same as <em class="italic">Exercise 10.02: Using AJAX and the jQuery ajax() Method to Invoke a Service</em>:<p class="source-code">&lt;body&gt;</p><p class="source-code">  &lt;table id="game_table" style="display: none"&gt;</p><p class="source-code">  &lt;tr&gt;</p><p class="source-code">      &lt;td&gt;Last Game Score:&lt;/td&gt;</p><p class="source-code">      &lt;td&gt;&lt;/td&gt;</p><p class="source-code">      &lt;td id="game_date"&gt;&lt;/td&gt;</p><p class="source-code">  &lt;/tr&gt;</p></li>
				<li>Add the next table row. This is new code and has two <strong class="source-inline">&lt;img&gt;</strong> elements that contain the team's banner images. Also, notice that these images have also been marked with <strong class="source-inline">class="team_banner"</strong>, as we will define CSS styles for them later:<p class="source-code">  &lt;tr&gt;</p><p class="source-code">      &lt;td&gt;&lt;img id="away_img" class="team_banner" /&gt;&lt;/td&gt;</p><p class="source-code">      &lt;td&gt;vs&lt;/td&gt;</p><p class="source-code">      &lt;td&gt;&lt;img id="home_img" class="team_banner" /&gt;&lt;/td&gt;</p><p class="source-code">  &lt;/tr&gt;</p></li>
				<li>The last row and the remainder of the HTML is the same as the last exercise as well, as are the slots where the home and away scores will be displayed:<p class="source-code">  &lt;tr&gt;</p><p class="source-code">      &lt;td id="away_score"&gt;&lt;/td&gt;</p><p class="source-code">      &lt;td&gt;&lt;/td&gt;</p><p class="source-code">      &lt;td id="home_score"&gt;&lt;/td&gt;</p><p class="source-code">  &lt;/tr&gt;</p><p class="source-code">  &lt;/table&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">&lt;/html&gt;</p></li>
				<li>Save the file and create a new one for the JavaScript code. Copy the initial code from the previous exercise:<p class="source-code">$(document).ready(function () {</p><p class="source-code">    $.ajax({</p><p class="source-code">        method: 'GET',</p><p class="source-code">        dataType: 'json',</p><p class="source-code">        url: 'https://www.thesportsdb.com/api/v1/json/1/eventslast.php',</p><p class="source-code">        data: {id: 134862},</p><p class="source-code">        success: function (data) {</p><p class="source-code">    </p><p class="source-code">            // find the most recent game that had a score reported</p><p class="source-code">            const lastGame = data.results.find(g =&gt; g.intAwayScore != null &amp;&amp; </p><p class="source-code">                                                   g.intHomeScore != null);</p><p class="source-code">     </p><p class="source-code">            $("#game_date").html(lastGame.dateEvent);</p></li>
				<li>A cool feature would be to apply special styling to the winning score, or to both scores in the event of a tie. We do this by assigning a dynamic style to the appropriate score element with the following code. Firstly, add the Boolean expressions to determine whether the home team had the winning score or there was a tie:<p class="source-code">            const homeScore = parseInt(lastGame.intHomeScore);</p><p class="source-code">            const awayScore = parseInt(lastGame.intAwayScore);</p><p class="source-code">            const homeWinner = homeScore &gt; awayScore;</p><p class="source-code">            const tie = homeScore == awayScore;</p><p>If the home score is greater than the away score, then <strong class="source-inline">homewinner</strong> will equal <strong class="source-inline">true</strong>. Notice you need to call <strong class="source-inline">parseInt()</strong> to convert the data values to integers before performing the comparison, as the service returns the scores as string types.</p><p class="callout-heading">Note</p><p class="callout">If you had trouble following why, let's break it down a bit more. Say the relevant key-value pairs in the JSON returned from the service call looked like the following within the larger JSON object:</p><p class="callout">    <strong class="source-inline">"intHomeScore": "113",</strong></p><p class="callout">    <strong class="source-inline">"intAwayScore": "85"</strong></p><p class="callout">Notice that the values <strong class="source-inline">"113"</strong> and <strong class="source-inline">"85"</strong> have double quotes around them. This indicates that the values are string types, not numbers. Comparing these as string values will lead to incorrect results since string comparisons are character by character and the initial <strong class="source-inline">"8"</strong> character of <strong class="source-inline">"85"</strong> is greater than the <strong class="source-inline">"1"</strong> character of <strong class="source-inline">"113"</strong>. (If you still don't believe it, try entering <strong class="source-inline">print("85" &gt; "113")</strong> in a JavaScript console. Your result will be <strong class="source-inline">true</strong>!)</p><p class="callout">For this reason, we must first convert the strings to integers by calling <strong class="source-inline">parseInt()</strong>. Let's expand on the preceding code for clarity:</p><p class="callout"><strong class="source-inline">// convert string "113" to int 113</strong></p><p class="callout"><strong class="source-inline">const homeScore = parseInt(lastGame.intHomeScore);</strong></p><p class="callout"><strong class="source-inline">// convert string "85" to int 85</strong></p><p class="callout"><strong class="source-inline">const awayScore = parseInt(lastGame.intAwayScore);  </strong></p><p class="callout"><strong class="source-inline">// will evaluate to the Boolean value true, since 113 &gt; 85</strong></p><p class="callout"><strong class="source-inline">const homeWinner = homeScore &gt; awayScore;</strong></p><p>Now that we know whether the home team won the game or not, we add the <strong class="source-inline">homeWinner</strong> value to determine which element should have the <strong class="source-inline">winning_score</strong> CSS class added for special styling:</p><p class="source-code">            $("#home_score").html(homeScore)</p><p class="source-code">                .addClass( (homeWinner || tie) ? "winning_score" : "")	</p><p class="source-code">            $("#away_score").html(awayScore)</p><p class="source-code">                .addClass( (!homeWinner || tie) ? "winning_score" : "");</p><p>Notice the expression with the conditional ternary operator. This shortcut has the same effect as the following code:</p><p class="source-code">        if (homeWinner == true || tie == true) {</p><p class="source-code">           $("#home_score").addClass("winning_score");</p><p class="source-code">        }</p><p class="callout-heading">Note</p><p class="callout">This can actually be improved a bit further if we wish. jQuery has a function called <strong class="source-inline">toggleClass()</strong> for this specific use case where a class should be added conditionally. This code can be rewritten as follows:</p><p class="callout"><strong class="source-inline">    $("#home_score").html(homeScore)</strong></p><p class="callout"><strong class="source-inline">        .toggleClass("winning_score", homeWinner || tie);</strong></p><p class="callout">The <strong class="source-inline">toggleClass()</strong> method takes two parameters. The first parameter is the name of the class that will be conditionally added (or removed). The second parameter is the Boolean value or expression itself.</p></li>
				<li>Next, we add the code to get the team's banner images:<p class="source-code">            getTeamImage(lastGame.idHomeTeam, "#home_img");</p><p class="source-code">            getTeamImage(lastGame.idAwayTeam, "#away_img");</p><p>The <strong class="source-inline">lastGame.idHomeTeam </strong>and <strong class="source-inline">lastGame.idAwayTeam</strong> fields contain the IDs of the home and away teams of the most recent game. Using these IDs, we are going to call the <strong class="source-inline">getTeamImage()</strong> function, which will load the banner image for each of the teams, passing in the HTML IDs of the images as well. (This function will be defined soon.)</p></li>
				<li>Type in the remainder of the function, which is the same as in the last exercise, to actually show the table:<p class="source-code">            $("#game_table").show();</p><p class="source-code">        }</p><p class="source-code">    });</p><p class="source-code">});</p></li>
				<li>Finally, we come to the <strong class="source-inline">getTeamImage()</strong> function:<p class="source-code">function getTeamImage(teamId, imageId) {</p><p class="source-code">    $.getJSON('https://www.thesportsdb.com/api/v1/json/1/lookupteam.php', </p><p class="source-code">        {id: teamId}, </p><p class="source-code">         function(data) { </p><p class="source-code">             const teamData = data.teams[0];	  </p><p class="source-code">             $(imageId).attr("src", teamData.strTeamBanner);</p><p class="source-code">        }</p><p class="source-code">    );</p><p class="source-code">}</p></li>
			</ol>
			<p>Once the exercise is complete, the final result should look something like the following screenshot:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer259">
					<img alt="Figure 10.13: Final result of exercise&#13;&#10;" src="image/C14377_10_13.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.13: Final result of exercise</p>
			<p>There are a number of items to notice here:</p>
			<ul>
				<li>We used <strong class="source-inline">$.getJSON()</strong> instead of <strong class="source-inline">$.ajax()</strong> this time. The <strong class="source-inline">$.getJSON()</strong> function is a shortcut that can be used for requests that are <strong class="source-inline">JSON GET</strong>. Using this shortcut, <strong class="source-inline">dataType="json"</strong> is assumed by default. There is no need to specify the URL, data parameters, and <strong class="source-inline">success</strong> function as separate settings, as the signature of the function is the following, with the brackets indicating that the last two parameters are optional: <strong class="source-inline">$.getJSON( url [, data ] [, success ] )</strong>.</li>
				<li><strong class="source-inline">imageId</strong> is passed in to represent the ID of the HTML image element that will be set. We will use jQuery to select this image element and call <strong class="source-inline">attr("src", value)</strong>, which is jQuery's utility method to set the <strong class="source-inline">src</strong> field of the <strong class="source-inline">&lt;img&gt;</strong> HTML element (similar to <strong class="source-inline">&lt;img src="…."/&gt;</strong>). We will set this <strong class="source-inline">src</strong> with the value returned by the service call in the <strong class="source-inline">teamData.strTeamBanner</strong> element. Setting the <strong class="source-inline">src</strong> field will trigger the browser to load the corresponding image dynamically.</li>
				<li><strong class="source-inline">$.getJSON()</strong> is an asynchronous call, which means that after the request is made, the browser will not wait for the response and execution will continue even while the service call is in progress (and execute the <strong class="source-inline">success</strong> callback when the response is received). The implication of this is that the calls to <strong class="source-inline">getTeamImage()</strong> will effectively issue two simultaneous service calls and not lock the browser while the requests are in flight.</li>
			</ul>
			<h2 id="_idParaDest-396"><a id="_idTextAnchor439"/>CSS</h2>
			<p>We will now briefly cover the CSS and styling that was added to the page in the preceding exercise to make it visually appealing. As this is not really a book on CSS, we will only give a brief overview. (There are many excellent books and resources available that cover CSS in depth.)</p>
			<p>The stylesheet is included in the head element with the following tag:</p>
			<p class="source-code">    &lt;link rel="stylesheet" href="exercise3.css" /&gt;</p>
			<p>The contents of the CSS file follow here:</p>
			<p class="source-code-heading">exercise3.css</p>
			<p class="source-code">1 #game_table { </p>
			<p class="source-code">2     border: 1px solid;</p>
			<p class="source-code">3     display: none; </p>
			<p class="source-code">4 }</p>
			<p class="source-code">5 </p>
			<p class="source-code">6 #game_table td { </p>
			<p class="source-code">7     text-align: right;</p>
			<p class="source-code">8 }</p>
			<p class="source-code">9 </p>
			<p class="source-code">10 #away_score, #home_score { </p>
			<p class="source-code">11     font-size: 24px;</p>
			<p class="source-code">12 }</p>
			<p class="source-code">13 </p>
			<p class="source-code">14  team_banner { </p>
			<p class="source-code">15     width: 275px; </p>
			<p class="source-code-link">The full code is available at: <a href="https://packt.live/33K3gVY">https://packt.live/33K3gVY</a></p>
			<ul>
				<li>The <strong class="source-inline">#game_table</strong> selector indicates that all styles in this block will apply to the HTML element with an ID of <strong class="source-inline">game_table</strong>.</li>
				<li>Places a border around the table to make it appear more contained.</li>
				<li>We move the <strong class="source-inline">display:none</strong> style (to prevent display until the data is loaded) into the stylesheet itself, to keep the HTML code less cluttered of styling code.</li>
				<li>The <strong class="source-inline">#game_table td</strong> selector indicates that the styles in the block will apply to all <strong class="source-inline">&lt;td&gt;</strong> elements that appear within the table with an ID of <strong class="source-inline">game_table</strong>. Here, we are saying that all text in table rows should be aligned to the right.</li>
				<li>A comma in the selector allows you to select multiple elements. Here, we are indicating that scores should have a larger, 24-pixel font.</li>
				<li>Selectors that begin with a dot (such as <strong class="source-inline">.team_banner</strong> here) are a different type of selector. This is a <strong class="source-inline">class</strong> selector, which would apply to all HTML elements that have <strong class="source-inline">class="team_banner"</strong> specified.</li>
				<li>The banner images from the server are quite large, but we only want a scaled-down image of 275 x 50 pixels.</li>
				<li>A distinctive style that indicates the winning score in green and bold.</li>
			</ul>
			<p>In the last section, we explored different types of responses from services (JSON and images) and how to use jQuery to display them using the helpers for dynamic DOM manipulation. We also saw how to use CSS to add colors, fonts, and other styles to make our screen more visually appealing.</p>
			<h1 id="_idParaDest-397"><a id="_idTextAnchor440"/>Other Libraries and XMLHttpRequest</h1>
			<p>This section explores other approaches to AJAX with JavaScript. The approach to making REST calls using jQuery and callbacks is just one of many different options available and was presented first as it's the most straightforward and easy-to-understand option for novice users. This is not to say the approach is not powerful though. And it is really all that is needed in many cases. Remember that jQuery offers other functionality you may want to use in your application as well.</p>
			<h2 id="_idParaDest-398"><a id="_idTextAnchor441"/>Axios and the Fetch API</h2>
			<p>At this point in the book, we'd like to mention two other popular choices that may be appropriate to be used in your projects, Axios and the Fetch API. These use advanced concepts such as promises, so they will not be covered here but will be covered in <em class="italic">Chapter 15, Asynchronous Tasks</em> of the advanced module. (Note that even jQuery itself offers variations on the AJAX methods that return promises instead of using callbacks, but this usage is not in the scope of this chapter either.)</p>
			<p>But for now, we'll compare jQuery with the native <strong class="source-inline">XMLHttpRequest</strong> JavaScript object in the next section.</p>
			<h2 id="_idParaDest-399"><a id="_idTextAnchor442"/>For Comparison: XMLHttpRequest and jQuery</h2>
			<p><strong class="source-inline">XMLHttpRequest </strong>is a low-level class built into JavaScript to handle service calls. Despite having XML in its name, <strong class="source-inline">XMLHttpRequest </strong>can actually be used for other protocols as well, including JSON and HTML.</p>
			<p>The following is equivalent code to <em class="italic">Exercise 10.02: Using AJAX and the jQuery ajax() Method to Invoke a Service</em> so you can compare how code using <strong class="source-inline">XMLHttpRequest</strong> looks in comparison to that of jQuery (<strong class="source-inline">xml_http_request_example.js</strong>):</p>
			<p class="callout-heading">Note</p>
			<p class="callout">HTML part is the same as above in <em class="italic">exercise 10.02</em> in file <strong class="source-inline">exercise2.html</strong>, but omit the jQuery lib in <strong class="source-inline">&lt;head&gt;</strong> and change the <strong class="source-inline">js</strong> script <strong class="source-inline">src</strong> file to <strong class="source-inline">xml_http_request_example.js</strong> rather than <strong class="source-inline">exercise2.js</strong></p>
			<p class="source-code-heading">xml_http_request_example.js</p>
			<p class="source-code">1 const url = "https://www.thesportsdb.com/api/v1/json/1/eventslast.php?id=134862"";</p>
			<p class="source-code">2 var xhttp = new XMLHttpRequest();</p>
			<p class="source-code">3 xhttp.open('GET', url);</p>
			<p class="source-code">4 xhttp.setRequestHeader('Accept', 'application/json');</p>
			<p class="source-code">5 xhttp.onreadystatechange = function() {</p>
			<p class="source-code">6     if (this.readyState == 4 &amp;&amp; this.status == 200) {</p>
			<p class="source-code">7         const data = JSON.parse(this.response);</p>
			<p class="source-code">8   </p>
			<p class="source-code">9         // find the most recent game that had a score reported</p>
			<p class="source-code">10         const lastGame = data.results.find(g =&gt; g.intAwayScore != null &amp;&amp; </p>
			<p class="source-code">11                                                 g.intHomeScore != null);</p>
			<p class="source-code">12   </p>
			<p class="source-code">13         document.getElementById("game_date").innerHTML = lastGame.dateEvent;</p>
			<p class="source-code">14         document.getElementById("away_team").innerHTML = lastGame.strAwayTeam;</p>
			<p class="source-code">15         document.getElementById("home_team").innerHTML = lastGame.strHomeTeam;</p>
			<p class="source-code-link">The full code is available at: <a href="https://packt.live/2q9dErM">https://packt.live/2q9dErM</a></p>
			<p>Let's examine the preceding example in detail:</p>
			<p class="source-code">const url = "https://www.thesportsdb.com/api/v1/json/1/eventslast.php?id=134862";</p>
			<p>When using <strong class="source-inline">XMLHttpRequest</strong>, we need to append query parameters ourselves to the end of the URL. Here, it is straightforward to do so, since the value is just a simple number, but more complex values will require HTTP encoding by calling <strong class="source-inline">encodeURI()</strong>:</p>
			<p class="source-code">var xhttp = new XMLHttpRequest();</p>
			<p class="source-code">xhttp.open('GET', url);</p>
			<p>We instantiate the <strong class="source-inline">XMLHttpRequest</strong> object and call the open method, specifying the method (<strong class="source-inline">GET</strong>, <strong class="source-inline">POST</strong>, and so on) and the URL:</p>
			<p class="source-code">xhttp.setRequestHeader('Accept', 'application/json');</p>
			<p>This low-level API doesn't take care of setting headers like jQuery did:</p>
			<p class="source-code">xhttp.onreadystatechange = function() {...}</p>
			<p>This is the callback function that will be called when there is a ready state change. There are a number of states the request can have, so we need to check the current state, as in the following line:</p>
			<p class="source-code">if (this.readyState == 4 &amp;&amp; this.status == 200) {...}</p>
			<p>Unlike the jQuery implementation, there is no <strong class="source-inline">success()</strong> function that gets called. We have to check the <strong class="source-inline">readyState</strong> and <strong class="source-inline">status</strong> code explicitly.</p>
			<p>A <strong class="source-inline">readyState </strong>of <strong class="source-inline">4</strong> indicates the request finished and the response is ready. Possible states are:</p>
			<ul>
				<li><strong class="source-inline">0</strong>: Request not initialized</li>
				<li><strong class="source-inline">1</strong>: Server connection established</li>
				<li><strong class="source-inline">2</strong>: Request received</li>
				<li><strong class="source-inline">3</strong>: Processing request</li>
				<li><strong class="source-inline">4</strong>: Request finished, and response is ready</li>
			</ul>
			<p>A <strong class="source-inline">status </strong>of <strong class="source-inline">200</strong> indicates <strong class="source-inline">OK</strong>. See the <em class="italic">HTTP Headers</em> section for a list of the most common HTTP status codes:</p>
			<p class="source-code">const data = JSON.parse(this.response);</p>
			<p>Unlike with jQuery, we need to parse the JSON text ourselves by calling <strong class="source-inline">JSON.parse()</strong> from the response field:</p>
			<p class="source-code">document.getElementById("game_date").innerHTML = lastGame.dateEvent;</p>
			<p>The <strong class="source-inline">document.getElementById()</strong> function is the native way to select DOM elements in JavaScript by ID (equivalent to jQuery's <strong class="source-inline">$("#game_date")</strong> function). You would set the text for the element by setting the <strong class="source-inline">innerHTML</strong> field directly (rather than calling an <strong class="source-inline">html()</strong> function as in jQuery):</p>
			<p class="source-code">document.getElementById("game_table").style.display = 'block';</p>
			<p>Setting <strong class="source-inline">style.display</strong> is the native way to make a hidden element visible again, equivalent to jQuery's <strong class="source-inline">show()</strong> method (though obviously not as simple):</p>
			<p class="source-code">xhttp.send();</p>
			<p>The request does not actually get sent until the <strong class="source-inline">send()</strong> method is actually invoked, so it is important we do not forget to call it. (Unlike jQuery, where the request is automatically sent.)</p>
			<h2 id="_idParaDest-400"><a id="_idTextAnchor443"/>Using jQuery and XMLHttpRequest for POST Requests</h2>
			<p>Using <strong class="source-inline">$.ajax()</strong> for <strong class="source-inline">POST</strong> requests with regular parameters is much the same as for <strong class="source-inline">GET</strong>, apart from specifying <strong class="source-inline">method="POST"</strong>. However, a <strong class="source-inline">POST</strong> request has an additional capability – sending the request data in <strong class="source-inline">JSON</strong> format rather than the default <strong class="source-inline">'application/x-www-form-urlencoded'</strong> content type. If you wish to do so, the <strong class="source-inline">contentType</strong> setting should be set to <strong class="source-inline">'application/json'</strong> and the data object should be wrapped in <strong class="source-inline">JSON.stringify()</strong>. Here's an example:</p>
			<p class="source-code">$.ajax({</p>
			<p class="source-code">    url: 'http://example.do',</p>
			<p class="source-code">    dataType: 'json',</p>
			<p class="source-code">    type: 'post',</p>
			<p class="source-code">    contentType: 'application/json',</p>
			<p class="source-code">    data: JSON.stringify( {"firstname": "George", "lastname": "Cloony"} ),</p>
			<p class="source-code">    success: function(data){</p>
			<p class="source-code">...</p>
			<p>Like <strong class="source-inline">$.getJSON()</strong>, jQuery also provides a shortcut for <strong class="source-inline">POST</strong> requests, called <strong class="source-inline">$.post()</strong>. It has one additional parameter, though, to indicate the data type of the response. Here's an example:</p>
			<p class="source-code">$.post("http://example.do", {</p>
			<p class="source-code">        "firstname": "George",</p>
			<p class="source-code">        "lastname": "Cloony"</p>
			<p class="source-code">    }, function (data) {</p>
			<p class="source-code">        // process the response</p>
			<p class="source-code">    }, 'json'</p>
			<p class="source-code">);</p>
			<p>For <strong class="source-inline">XMLHttpRequest</strong>:</p>
			<ul>
				<li>If you are just sending standard parameters, use <strong class="source-inline">setRequestHeader("Content-Type", "application/x-www-form-urlencoded")</strong> and send the encoded parameters when calling <strong class="source-inline">send()</strong>. (You may need to also call <strong class="source-inline">encodeURI()</strong> if your data is complex.)</li>
				<li>If you are sending your input as JSON, use <strong class="source-inline">setRequestHeader("Content-type", "application/json")</strong> and send the data wrapped in <strong class="source-inline">JSON.stringify()</strong> when calling <strong class="source-inline">send()</strong>.</li>
				<li>For either method, one caveat is that the return code from the service will frequently be <strong class="source-inline">201 (Created)</strong> rather than <strong class="source-inline">200 (OK)</strong>, so you want to make sure your code looks out for the correct return code.</li>
			</ul>
			<p>Here's an example:</p>
			<p class="source-code">xhttp.setRequestHeader("Content-type", "application/json");</p>
			<p class="source-code">var data = JSON.stringify({</p>
			<p class="source-code">    "firstname": "George",</p>
			<p class="source-code">    "lastname": "Clooney"</p>
			<p class="source-code">});</p>
			<p class="source-code">xhttp.send(data);</p>
			<h2 id="_idParaDest-401"><a id="_idTextAnchor444"/>Cross-Domain Requests</h2>
			<p>When selecting or implementing a REST API, there is an important rule to be aware of that can impact whether the API can be used for your site. Browsers have a security feature known as the <strong class="bold">Same Origin Policy</strong>. This policy only allows scripts running on a site to access data from URLs on the same site with no specific restrictions but prevents scripts from accessing data that is hosted on a different domain. The reason for this policy is to prevent different types of attacks un<a id="_idTextAnchor445"/>scrupulous people can make by exploiting browser security weaknesses to steal your data or invoke malicious service calls.</p>
			<p>For instance, if your page is hosted at <a href="https://www.mygreatsite.com/foo.html">https://www.mygreatsite.com/foo.html</a>, you would be able to access data or call the service with a URL such as <a href="https://www.mygreatsite.com/my_data.json">https://www.mygreatsite.com/my_data.json</a>. However, if the domain differs, even just in a different subdomain such as <a href="https://www.foobar.mygreatsite.com/my_data.json">https://www.foobar.mygreatsite.com/my_data.json</a>, the browser would respond with an error such as the following:</p>
			<p class="source-code">XMLHttpRequest cannot load https://www.foobar.mygreatsite.com/my_data.json. Origin null is not allowed by Access-Control-Allow-Origin.</p>
			<p>Luckily, there are a few ways around this restriction that APIs can implement. The details of the implementation of these workarounds are on the server side and are not in the scope of this chapter. But it is sufficient to know that APIs can be designed in a way that makes them data available across sites. So, when selecting APIs to use for your project, you'll need to investigate whether it is cross-domain capable. (The API we used in the earlier exercise, TheSportsDB, is such a site.)</p>
			<h2 id="_idParaDest-402"><a id="_idTextAnchor446"/>CORS Header</h2>
			<p>If you are really curious, the main technique that allows cross-site requests is by the service sending something called a <strong class="bold">CORS</strong> header, which stands for <strong class="bold">Cross-Origin Resource Sharing</strong>. If the API wants to make its service available from any domain, the server can send the following response header when serving the response:</p>
			<p class="source-code">Access-Control-Allow-Origin: *</p>
			<p>The <strong class="source-inline">*</strong> value indicates "any origin," but the server could also be more restrictive in what sites have access to as per its desire. This is only a very brief description of a larger subject. There are some other techniques to achieve cross-domain requests, such as using JSONP, <strong class="source-inline">postMessage()</strong> between frames, or local server-side proxies, but we will not detail them here.</p>
			<h2 id="_idParaDest-403"><a id="_idTextAnchor447"/>Activity 10.01: Implement REST Service Calls Using Various Techniques</h2>
			<p>So far, we have only coded for HTTP <strong class="source-inline">GET</strong> requests. Let's get some practice using <strong class="source-inline">POST</strong>. The API we have been using in the previous exercises, TheSportsDB, only contains GET requests, making it unsuitable for testing other HTTP methods. Luckily, there are several dummy REST APIs out there made specifically for testing and prototyping that can be used for our purposes. We will use one such free API called <strong class="bold">REQ | RES</strong> (at <a href="https://packt.live/37aWtH4">https://reqres.in/</a>):</p>
			<div>
				<div class="IMG---Figure" id="_idContainer260">
					<img alt="Figure 10.14: Home page of REQ|RES&#13;&#10;" src="image/C14377_10_14.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.14: Home page of REQ|RES</p>
			<p>The API supplies a POST method at <a href="https://reqres.in/api/users">https://reqres.in/api/users</a> for which you supply a JSON object with any fields you wish. You include the object as the data of your service call, and the service responds with the same object but with additional <strong class="source-inline">id</strong> and <strong class="source-inline">createdAt</strong> fields.</p>
			<p>For instance, if you have the following data:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer261">
					<img alt="Figure 10.15: Request and Response example&#13;&#10;" src="image/C14377_10_15.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.15: Request and Response example</p>
			<p>Your task is to implement the code for this service call using the <strong class="source-inline">$.ajax()</strong> method followed by the <strong class="source-inline">$.post() </strong>method, and finally execute it using the <strong class="source-inline">XMLHttpRequest</strong> method. Then, print out the <strong class="source-inline">id </strong>and <strong class="source-inline">createdAt</strong> fields returned to the console.</p>
			<p>Keep in mind that the <strong class="bold">REQ | RES</strong> API is really just a dummy service for testing and does not actually persist any data, so don't expect to be able to retrieve the data you sent later.</p>
			<p>The high-level steps for the activity are as follows:</p>
			<ol>
				<li value="1">Use <strong class="source-inline">$.ajax()</strong> with <strong class="source-inline">method: 'post'</strong> and <strong class="source-inline">dataType: 'json'</strong>.</li>
				<li>Enclose your data fields in an object, <strong class="source-inline">{}</strong>.</li>
				<li>Create a <strong class="source-inline">success</strong> function to output the expected values.</li>
				<li>Now, use <strong class="source-inline">$.post()</strong>.</li>
				<li>Enclose your data fields in an object, <strong class="source-inline">{}</strong>.</li>
				<li>Create a <strong class="source-inline">success</strong> function to output the expected values.</li>
				<li>As the last parameter to <strong class="source-inline">$.post()</strong>, use the <strong class="source-inline">'json'</strong> value to indicate the expected JSON return type.</li>
				<li>Finally, create a new <strong class="source-inline">XMLHttpRequest</strong> object.</li>
				<li>Call <strong class="source-inline">open('POST')</strong>.</li>
				<li>Set the <strong class="source-inline">Content-type</strong> and <strong class="source-inline">Accept</strong> request headers to the appropriate values.</li>
				<li>Create a function for <strong class="source-inline">onreadystatechange</strong> that checks for a status code of <strong class="source-inline">201 (Created)</strong> and parses the JSON data with <strong class="source-inline">JSON.parse()</strong>.</li>
				<li>Call <strong class="source-inline">JSON.stringify() </strong>on the input data to convert it to JSON format.</li>
				<li>Send the JSON data when calling <strong class="source-inline">send()</strong>.</li>
			</ol>
			<p>The code should result in something like the following in the JavaScript console in Google Chrome:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer262">
					<img alt="Figure 10.16: JavaScript Console output&#13;&#10;" src="image/C14377_10_16.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.16: JavaScript Console output</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution to this activity can be found on page 742.</p>
			<h1 id="_idParaDest-404"><a id="_idTextAnchor448"/>Summary</h1>
			<p>In the last section, we explored the native <strong class="source-inline">XMLHttpRequest</strong> object and how it differs from other libraries for making service calls. In summary, as you can see, compared to jQuery, the native approach is a lot more verbose, difficult to work with, and low-level for most use cases. Unless you have a specific need where more control is required, I do not recommend its use.</p>
			<p>In the next chapter, we will describe regular expressions, which are commonly used to match patterns in a concise, flexible, and efficient manner. We will also explore best practices for writing clean and understandable code, which is critical if you want your code to be easily maintainable and live for a long time.</p>
		</div>
	</body></html>