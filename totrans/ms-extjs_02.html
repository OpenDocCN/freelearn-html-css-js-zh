<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Getting Started</h1></div></div></div><p>In this book, we are going to dive into the Sencha Ext JS 5 world and explore real-world examples. We will also build a complete application from scratch, from the wireframe phase until the deployment in production.</p><p>Throughout this book, we are going to develop an application to manage a <em>DVD rental store</em>. In this chapter, we will introduce the application and describe its capabilities. You will also learn how to organize the files of the application, which is going to be built throughout the chapters of this book. This chapter will also present the mockup (wireframe) of the application and how to start organizing the screens (which is a very important step and some developers forget to do it). In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Preparing the development environment by installing the required software</li><li class="listitem" style="list-style-type: disc">Presenting the application and its capabilities</li><li class="listitem" style="list-style-type: disc">Creating mockups/wireframes of each screen</li><li class="listitem" style="list-style-type: disc">Creating the structure of the app using Sencha Cmd</li><li class="listitem" style="list-style-type: disc">Creating the loading page (splash screen)</li></ul></div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec12"/>Preparing the development environment</h1></div></div></div><p>The<a id="id70" class="indexterm"/> application that we are going to <a id="id71" class="indexterm"/>develop has a very simple architecture. We are going to use Ext JS 5 on the frontend, which is going to communicate with a server-side module using Ajax/JSON, which will then communicate with a database.</p><p>The following diagram encapsulates the preceding paragraph:</p><div><img src="img/0457OT_02_01.jpg" alt="Preparing the development environment"/></div><p>The server-side<a id="id72" class="indexterm"/> module will be developed using PHP. You need not worry if you don't know PHP. We are going to use very<a id="id73" class="indexterm"/> basic code (no frameworks), and we are going to focus on the programming logic that needs to be implemented on the server side. This way, you can apply the same logic using any other programming language, such as Java, ASP.NET, Ruby, Python, or any other (that supports the exchange of data in JSON or XML format as this is the communication format used by Ext JS). For the database, we will use MySQL. We will also use the Sakila sample schema (<a class="ulink" href="http://dev.mysql.com/doc/sakila/en/">http://dev.mysql.com/doc/sakila/en/</a>), a free MySQL sample database, which is perfect to demonstrate how to work with<a id="id74" class="indexterm"/> <strong>Create, Read, Update, and Delete/Destroy</strong> (<strong>CRUD</strong>) operations on a database table and also use more complex operations, such as views and stored procedures (we will learn how to handle all this information with Ext JS).</p><div><div><h3 class="title"><a id="note13"/>Note</h3><p>If you are a Java developer, you can find some sample code on how to integrate Java with Ext JS at <a class="ulink" href="http://goo.gl/rv76E2">http://goo.gl/rv76E2</a> and <a class="ulink" href="http://goo.gl/nNIRuQ">http://goo.gl/nNIRuQ</a>.</p></div></div><p>Also, we will need to have Sencha Cmd installed (we have already installed Sencha Cmd during <a class="link" href="ch01.html" title="Chapter 1. Sencha Ext JS Overview">Chapter 1</a>, <em>Sencha Ext JS Overview</em>). However, we still need to execute some extra steps to have it configured. Once configured, we will be able to create the application structure, customize the theme, and also make the production build. Sencha Cmd requires having Ruby compatible with versions 1.8 or 1.9 (version 2.x will not work). We also need to have Apache Ant installed (and because Apache Ant is built with Java, we also need to have Java installed and configured in our computer).</p><p>After we have<a id="id75" class="indexterm"/> finished implementing the application, we will customize the theme, and because of this, we will need to install Ruby (1.8 or 1.9) and the Sass and Compass gems.</p><p>To deploy<a id="id76" class="indexterm"/> the application, we need a web server. If you do not have any web server installed on your computer yet, do not worry. In this book, we will use Xampp as the default web server.</p><p>We will also need a browser to run our application in. The recommended ones are Firefox (with Firebug) or Google Chrome.</p><p>If you do not have any of the software or technologies mentioned previously installed on your computer, don't worry. To summarize all the tools and software we need to have installed prior to starting the fun, here is a list with the links where you can download them and find installation instructions (all items are available for Windows, Linux, and Mac OS):</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A browser <a id="id77" class="indexterm"/>with a debugger tool:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Firefox with<a id="id78" class="indexterm"/> Firebug: <a class="ulink" href="https://www.mozilla.org/firefox/">https://www.mozilla.org/firefox/</a> and <a class="ulink" href="http://getfirebug.com/">http://getfirebug.com/</a></li><li class="listitem" style="list-style-type: disc">Google <a id="id79" class="indexterm"/>Chrome: <a class="ulink" href="http://www.google.com/chrome">www.google.com/chrome</a></li></ul></div></li><li class="listitem" style="list-style-type: disc">Web <a id="id80" class="indexterm"/>server:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Xampp: <a class="ulink" href="http://www.apachefriends.org/en/xampp.html">http://www.apachefriends.org/en/xampp.html</a></li></ul></div></li><li class="listitem" style="list-style-type: disc">Database:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">MySQL: <a class="ulink" href="http://dev.mysql.com/downloads/mysql/">http://dev.mysql.com/downloads/mysql/</a></li><li class="listitem" style="list-style-type: disc">MySQL <a id="id81" class="indexterm"/>Workbench: <a class="ulink" href="http://dev.mysql.com/downloads/tools/workbench/">http://dev.mysql.com/downloads/tools/workbench/</a></li><li class="listitem" style="list-style-type: disc">MySQL Sakila <a id="id82" class="indexterm"/>sample <a id="id83" class="indexterm"/>database: <a class="ulink" href="http://dev.mysql.com/doc/index-other.html">http://dev.mysql.com/doc/index-other.html</a> and <a class="ulink" href="http://dev.mysql.com/doc/sakila/en/index.html">http://dev.mysql.com/doc/sakila/en/index.html</a></li></ul></div></li><li class="listitem" style="list-style-type: disc">Sencha <a id="id84" class="indexterm"/>Command <a id="id85" class="indexterm"/>required<a id="id86" class="indexterm"/> tools:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Ruby: <a class="ulink" href="http://www.ruby-lang.org/en/downloads/">http://www.ruby-lang.org/en/downloads/</a></li><li class="listitem" style="list-style-type: disc">Sass: <a class="ulink" href="http://sass-lang.com/">http://sass-lang.com/</a></li><li class="listitem" style="list-style-type: disc">Compass: <a class="ulink" href="http://compass-style.org/">http://compass-style.org/</a></li><li class="listitem" style="list-style-type: disc">Java JDK <a id="id87" class="indexterm"/> (Java 7 or later): <a class="ulink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></li><li class="listitem" style="list-style-type: disc">Java <a id="id88" class="indexterm"/>environment variables: <a class="ulink" href="http://docs.oracle.com/javase/tutorial/essential/environment/paths.html">http://docs.oracle.com/javase/tutorial/essential/environment/paths.html</a></li><li class="listitem" style="list-style-type: disc">Apache<a id="id89" class="indexterm"/> Ant: <a class="ulink" href="http://ant.apache.org/bindownload.cgi">http://ant.apache.org/bindownload.cgi</a></li></ul></div></li></ul></div><p>Of course, we also need Ext JS SDK and Sencha Cmd, which we downloaded and<a id="id90" class="indexterm"/> installed in <a class="link" href="ch01.html" title="Chapter 1. Sencha Ext JS Overview">Chapter 1</a>, <em>Sencha Ext JS Overview</em>.</p><div><div><h3 class="title"><a id="note14"/>Note</h3><p>To help you configure the required development environment in order to be able to create the application from this book, here is a video that demonstrates it step by step (step by step done for Windows environment—the Linux and Mac OS setup is very similar): <a class="ulink" href="http://youtu.be/B43bEnFBRRc">http://youtu.be/B43bEnFBRRc</a>.</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Presenting the application and its capabilities</h1></div></div></div><p>The<a id="id91" class="indexterm"/> application we are going to develop throughout this book is very common to other web systems you are probably used to implementing. We<a id="id92" class="indexterm"/> will implement a DVD Rental Store management application (that is why the use of the Sakila sample database). Some of the features of the application are the security management (able to manage users and their permissions within the application), which manage actors, films, inventory, and rental information.</p><p>Ext JS will <a id="id93" class="indexterm"/>help you to achieve your goal. It provides beautiful components, a complete architecture, the possibility to reuse components (and decreases our work), and a very complete data package (that makes it easier to make connections to the server side and send and retrieve information).</p><p>We will divide the application into modules, and each module will be responsible for some features of the application. In each chapter of this book, we will implement one of the modules.</p><p>The application is composed of:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A splash screen (so the user does not need to see a blank screen while the application is still launching)</li><li class="listitem" style="list-style-type: disc">A main screen</li><li class="listitem" style="list-style-type: disc">A login screen</li><li class="listitem" style="list-style-type: disc">User administration screen</li><li class="listitem" style="list-style-type: disc">MySQL tables management (for categories, and combobox values—static data)</li><li class="listitem" style="list-style-type: disc">Content management control</li></ul></div><p>For each of the<a id="id94" class="indexterm"/> modules and screens mentioned<a id="id95" class="indexterm"/> in the preceding list, we will create mockups, so we can plan how the application will work. Here, you will learn more about each one of them.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec23"/>The splash screen</h2></div></div></div><p>Our <a id="id96" class="indexterm"/>application will have a splash screen, so the<a id="id97" class="indexterm"/> user does not need to see a blank page while the application is still loading the required files and classes prior to its initialization. Here's a screenshot that illustrates a splash screen aptly:</p><div><img src="img/0457OT_02_02.jpg" alt="The splash screen"/></div><p>We will <a id="id98" class="indexterm"/>cover<a id="id99" class="indexterm"/> the implementation of this screen later in this chapter.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec24"/>The login screen</h2></div></div></div><p>After<a id="id100" class="indexterm"/> the application is fully loaded, the first screen the user <a id="id101" class="indexterm"/>will see is the login screen. The user will be able to enter the <strong>User Name</strong> and <strong>Password</strong>. There is also a multilingual combobox, where the user can choose the language of the system (multilingual capability). Then, we have the <strong>Cancel</strong> and <strong>Submit</strong> buttons, as shown in the following screenshot:</p><div><img src="img/0457OT_02_03.jpg" alt="The login screen"/></div><p>The <strong>Cancel</strong> button <a id="id102" class="indexterm"/>resets the <strong>Login</strong> form and the <strong>Submit</strong> button will trigger an event that will create an Ajax request and send the user <a id="id103" class="indexterm"/>credentials to the server for authentication. If the user is successfully authenticated, then we display the main screen; otherwise, we display an error message.</p><p>We will cover the implementation of the login screen in <a class="link" href="ch03.html" title="Chapter 3. The Login Page">Chapter 3</a>, <em>The Login Page</em>.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec25"/>The main screen</h2></div></div></div><p>The <a id="id104" class="indexterm"/>general idea of the application is to have a<a id="id105" class="indexterm"/> main screen that will be organized using border layout. Border Layout is divided into five regions: north, south, east, west, and center, of which all but the east region are demonstrated in the following diagram:</p><div><img src="img/0457OT_02_04.jpg" alt="The main screen"/></div><p>In<a id="id106" class="indexterm"/> the <strong>Center Region</strong>, we will have a tab panel, and <a id="id107" class="indexterm"/>each tab represents a screen of the application (each screen will have its own layout)—only the first tab can not be closed (<strong>Home</strong>) tab. In the <strong>North Region</strong> we will have a header with the name of the application (<strong>DVD Rental Store Manager</strong>), the multilingual combobox (if the user wants to change the current language of the application) and a <strong>Logout</strong> button. In the <strong>South Region</strong>, we will have the footer with a copyright message (or it can be the name of the company or developer that implemented the project). And in the <strong>West Region</strong>, we will have a dynamic menu (we will implement user control management). The menu will be dynamic and will be rendered based on the permissions that the user has in the application.</p><p>The main screen will look somewhat like the following mockup:</p><div><img src="img/0457OT_02_05.jpg" alt="The main screen"/></div><p>We will <a id="id108" class="indexterm"/>cover the implementation of the main screen <a id="id109" class="indexterm"/>and the multilingual and logout capabilities in <a class="link" href="ch04.html" title="Chapter 4. The Logout and Multilingual Capabilities">Chapter 4</a>, <em>The Logout and Multilingual Capabilities</em>. And in <a class="link" href="ch05.html" title="Chapter 5. Advanced Dynamic Menu">Chapter 5</a>, <em>Advanced Dynamic Menu</em>, we will cover how to generate a dynamic menu.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec26"/>User administration</h2></div></div></div><p>In the <a id="id110" class="indexterm"/>user control management, the user will<a id="id111" class="indexterm"/> have access to create new users and new groups and assign new roles to users. The user will be able to control the system permissions (which user can see which modules in the system). This is how the <strong>Create/Edit User</strong> page looks:</p><div><img src="img/0457OT_02_06.jpg" alt="User administration"/></div><p>We will <a id="id112" class="indexterm"/>cover <a id="id113" class="indexterm"/>the implementation of user administration in <a class="link" href="ch06.html" title="Chapter 6. User Management">Chapter 6</a>, <em>User Management</em>.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec27"/>MySQL table management</h2></div></div></div><p>Every<a id="id114" class="indexterm"/> system <a id="id115" class="indexterm"/>has information that is considered static data, such as film categories, film language, combobox options, and so on. For these tables, we need to provide all CRUD options and also filter options. The screens from this module will be very similar to the <strong>Edit Table Data</strong> option from <strong>MySQL Workbench</strong>., as shown in the following screenshot:</p><div><img src="img/0457OT_02_07.jpg" alt="MySQL table management"/></div><p>The user will <a id="id116" class="indexterm"/>be able to edit the data<a id="id117" class="indexterm"/> in the rows of the grid, similar to what can be done in MS Excel. Once the user is done making the changes, they can click on the <strong>Save Changes</strong> button to save all modified data to the server and database. The following is how the <strong>Browser Window</strong> view looks:</p><div><img src="img/0457OT_02_08.jpg" alt="MySQL table management"/></div><p>We will <a id="id118" class="indexterm"/>cover <a id="id119" class="indexterm"/>the implementation of this module in <a class="link" href="ch07.html" title="Chapter 7. Static Data Management">Chapter 7</a>, <em>Static Data Management</em>.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec28"/>Content management control</h2></div></div></div><p>In this <a id="id120" class="indexterm"/>module, the user <a id="id121" class="indexterm"/>will be able to see and edit the core information from the system. As most of the database tables we will be handling in this module have a relationship with other tables, the editing of the information will be more complex, involving the master-detail relationship. Usually, we will present the information to the user in a data grid (a list or a table), and the addition of the information will be made in such a form that it will be displayed inside a pop-up window.</p><p>It is also very important to remember that most of the screens from a module will have similar capabilities, and since we are going to build an application with a lot of screens, it is important to design the system to be able to reuse as much code as possible, making the system easy to maintain and easy to add new features and capabilities to. The following screen depicts the capabilities we have discussed in this section:</p><div><img src="img/0457OT_02_09.jpg" alt="Content management control"/></div><p>When<a id="id122" class="indexterm"/> clicking on <strong>Add</strong> or <strong>Edit</strong>, a new <a id="id123" class="indexterm"/>pop-up window will open to edit the information, as follows:</p><div><img src="img/0457OT_02_10.jpg" alt="Content management control"/></div><p>We will <a id="id124" class="indexterm"/>cover the implementation <a id="id125" class="indexterm"/>of this module in <a class="link" href="ch08.html" title="Chapter 8. Content Management">Chapter 8</a>, <em>Content Management</em>, and <a class="link" href="ch09.html" title="Chapter 9. Adding Extra Capabilities">Chapter 9</a>, <em>Adding Extra Capabilities</em>.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec29"/>Charts</h2></div></div></div><p>In the<a id="id126" class="indexterm"/> charts module, we <a id="id127" class="indexterm"/>will create a chart in Ext JS. For the same chart information, the user will be able to generate different types of charts. The user will also be able to export the chart to an image, SVG, or PDF, as follows:</p><div><img src="img/0457OT_02_11.jpg" alt="Charts"/></div><p>We will cover<a id="id128" class="indexterm"/> the implementation of this module in <a class="link" href="ch09.html" title="Chapter 9. Adding Extra Capabilities">Chapter 9</a>, <em>Adding Extra Capabilities</em>.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Creating the application with Sencha Cmd</h1></div></div></div><p>Let's get<a id="id129" class="indexterm"/> started and get our hands on the code. The first thing we are going to do is create the application using the <a id="id130" class="indexterm"/>MVC structure. Sencha Command (referred to as Sencha Cmd from now on) provides the capability of creating the application structure automatically for us. Utilizing Sencha Cmd is helpful not only because it creates the structure according to the MVC architecture for our application, but also because it provides all the files we need later on when going live with the software and to customize its theme—we'll learn more about this in a later chapter.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec30"/>A quick word about MVC</h2></div></div></div><p><strong>MVC</strong> <a id="id131" class="indexterm"/>stands for <strong>Model-View-Controller</strong>. It is a<a id="id132" class="indexterm"/> software architecture pattern that separates the representation of the information from the user's interaction with it. The Model represents the application data, the View represents the output of the representation of the data (form, grid, chart), and the Controller mediates the input, converting it into commands for the Model or View.</p><p>Ext JS <a id="id133" class="indexterm"/>supports MVC<strong>, </strong>which is a Model-View-Controller pattern (as one of the architecture options, it also provides a <strong>Model-View-View-Model</strong> (<strong>MVVM</strong>), which we will discuss later). The Model is a representation of the data we want to manipulate in our application, a representation of a table from the database. The View is all the components and screens we create to manage the information of a Model. As Ext JS is event-driven, all the View instances fire events when the user interacts with them, the Controller can be configured to listen to events raised from the View, and the developer can implement custom handlers to respond to these events. The Controller can also redirect the command to the Model (or Store) or the View. And the Store in Ext JS is very similar to the <strong>Data Access Object</strong> (<strong>DAO</strong>) pattern<a id="id134" class="indexterm"/> used on server-side technologies (with more capabilities such as sorting and filtering, introduced in <a class="link" href="ch01.html" title="Chapter 1. Sencha Ext JS Overview">Chapter 1</a>, <em>Sencha Ext JS Overview</em>).</p><p>For a quick example, let's say we have <strong>WidgetA</strong>, which is a GridPanel that displays all the records from a table. This table is represented by <strong>ModelA</strong>. <strong>StoreA</strong> is responsible for retrieving the information (collection of <strong>ModelA</strong> from the server). When the user clicks on a record from <strong>WidgetA</strong>, a window will be opened (called <strong>WidgetB</strong>) displaying information from a table (represented by <strong>ModelB</strong>). And of course, <strong>StoreB</strong> will be responsible for retrieving the collection of <strong>ModelB</strong> from server. In this case, we will have <strong>ControllerA</strong> to capture the <code class="literal">itemclick</code> event from <strong>WidgetA</strong>, do all the required logic to display <strong>WidgetB</strong>, and load all the <strong>ModelB</strong> information. If we try to put this into a quick reference diagram, it would be something like this:</p><div><img src="img/0457OT_02_12.jpg" alt="A quick word about MVC"/></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec31"/>Creating the application</h2></div></div></div><p>We are <a id="id135" class="indexterm"/>going to<a id="id136" class="indexterm"/> create the application inside the <code class="literal">htdocs</code> folder of our Xampp directory. Our application will be named <code class="literal">masteringextjs</code>.</p><p>Before we start, let's take a look how the <code class="literal">htdocs</code> folder looks:</p><div><img src="img/0457OT_02_13.jpg" alt="Creating the application"/></div><p>We still have the original Xampp files in there, and the Ext JS 5 SDK folder, along with the Ext JS 5 documentation folder.</p><p>The <a id="id137" class="indexterm"/>next step is <a id="id138" class="indexterm"/>to use Sencha Cmd to create the application for us. To do so, we need to open the terminal application that comes with the operating system we 're using. For Linux and Mac OS users, this would be the terminal application. For Windows users, it's the Command Prompt application.</p><p>Here are the steps that we are going to execute:</p><div><ol class="orderedlist arabic"><li class="listitem">First, we need to change the current directory to the Ext JS directory (<code class="literal">htdocs/ext-5.0.0</code> in this case).</li><li class="listitem">Then, we will use the following command:<div><pre class="programlisting">
<strong>sencha generate app Packt ../masteringextjs</strong>
</pre></div></li></ol></div><p>The <code class="literal">sencha generate app</code> command will create the <code class="literal">masteringextjs</code> directory inside the <code class="literal">htdocs</code> folder with the necessary file structure required by the MVC architecture as used by ExtJS. <code class="literal">Packt</code> is the name of the namespace of our application, which means that every class we create is going to start with <code class="literal">Packt</code>, for example, <code class="literal">Packt.model.Actor</code>, <code class="literal">Pack.view.Login</code>, and so on. And the last argument passed to the command is the directory where the application will be created. In this case, it is inside a folder named <code class="literal">masteringextjs</code>, which is located inside the <code class="literal">htdocs</code> folder.</p><div><div><h3 class="title"><a id="note15"/>Note</h3><p>Namespaces are used for scoping variables and classes so that they are not global, defining deeply their nested structures. Sencha has a good article about namespaces at <a class="ulink" href="http://goo.gl/2iLxcn">http://goo.gl/2iLxcn</a>.</p></div></div><p>After the command finishes its execution, we will have something like what is shown in the following screenshot:</p><div><img src="img/0457OT_02_14.jpg" alt="Creating the application"/></div><div><div><h3 class="title"><a id="note16"/>Note</h3><p>The source code presented in this book was written with Ext JS 5.0 (so you will see the screenshots with version 5.0) and upgraded to 5.1 once it was released. So once you download its source code, it will be compatible with version 5.1. Upgrading the source code from 5.0 to 5.1 does not have any impact.</p></div></div><p>But <a id="id139" class="indexterm"/>why <a id="id140" class="indexterm"/>do we need to create a project structure like this one? The following is the structure used by Ext JS applications:</p><div><img src="img/0457OT_02_15.jpg" alt="Creating the application"/></div><div><div><h3 class="title"><a id="note17"/>Note</h3><p>For more information about the<a id="id141" class="indexterm"/> <code class="literal">Sencha generate app</code> command, please consult <a class="ulink" href="http://docs.sencha.com/cmd/5.x/extjs/cmd_app.html">http://docs.sencha.com/cmd/5.x/extjs/cmd_app.html</a>.</p></div></div><p>Let's see <a id="id142" class="indexterm"/>what each folder does.</p><p>First <a id="id143" class="indexterm"/>we have the <code class="literal">app</code> folder. This is where we will create all the code for our application. Inside the <code class="literal">app</code> folder, we can find the following folders as well: <code class="literal">controller</code>, <code class="literal">model</code>, <code class="literal">store</code>, and <code class="literal">view</code>. We can also find the <code class="literal">Application.js</code> file. Let's have a detailed look at them. In the <code class="literal">model</code> folder, we will create all files that represent a Model, which is an Ext JS class that represents a set of fields, which means that an object that our application manages (actor, country, film, and so on). It is similar to a class on the server side with only the attributes of the class plus the getter and setter methods used to represent a table from the database.</p><p>On the <code class="literal">store</code> folder, we will create all the <code class="literal">Store</code> classes, which are caches of collections of Model instances. The <code class="literal">store</code> folder also has capabilities similar to DAO<strong>—</strong>classes used on server-side languages to perform CRUD operations on the database. As Ext JS does not communicate directly with databases, the <code class="literal">Store</code> classes are used to communicate with the server side or a local storage—used with a Proxy. Proxies are used by Store or Model instances <a id="id144" class="indexterm"/>to handle the<a id="id145" class="indexterm"/> loading and saving of Model data, and it is the place where we are going to configure how we want to communicate with the server (using Ajax and using JSON or XML, formatting the data so that the client and the backend understand each other).</p><p>On the <code class="literal">view</code> folder, we will create all <code class="literal">view</code> classes, also known as the <a id="id146" class="indexterm"/>
<strong>User Interface Components</strong> (<strong>UI Components</strong>), such as grids, trees, menus, forms, windows, and so on.</p><p>And finally, in the <code class="literal">controller</code> folder, we can create classes that will handle the events fired by the components (events fired because of the life cycle of the component or because of some <em>interaction</em> of the user with a component). We always need to remember that Ext JS is <em>event-driven</em>, and on the <code class="literal">Controller</code> classes, we will control these events and update any Model, View, or Store (if required). Some examples of events fired would be a click or mouseover of a button, an <code class="literal">itemclick</code> event of a row of a grid, and so on.</p><div><div><h3 class="title"><a id="note18"/>Note</h3><p>We can also have <code class="literal">ViewController</code> classes inside the <code class="literal">view</code> folder. This is applied when we use the MVVM pattern, which we will discuss more in detail in the next chapter.</p></div></div><p>The MVC <code class="literal">app</code> folder structure has been created. Now, we will copy the Ext JS SDK (<code class="literal">extjs</code> folder) into the <code class="literal">masteringExtjs</code> folder, and we will also create a file named <code class="literal">app.js</code>. We will edit this file later in this chapter.</p><p>We also have the <code class="literal">Application.js</code> file. This is the entry point of our application. We'll come back to this later on.</p><p>The <code class="literal">masteringextjs</code> directory contains a few more files:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">app.js</code>: This<a id="id147" class="indexterm"/> file inherits the code from the <code class="literal">Application.js</code> file. It is the point of entry of the application. This is the file that is called by Ext JS to initialize the application. We should avoid changing this file <code class="literal">app.json</code>: this is a configuration file for the application. In this file, we can add extra CSS and JS files, which should be loaded with the application, such as charts and locale-specific configurations. We will make some changes in this file throughout the book.</li><li class="listitem" style="list-style-type: disc"><code class="literal">bootstrap.css</code>, <code class="literal">bootstrap.json</code>, and <code class="literal">bootstrap.js</code>: Created by Sencha Cmd, these<a id="id148" class="indexterm"/> files <em>should not be edited</em>. The CSS file<a id="id149" class="indexterm"/> contains the import of the theme used by the application (which is the so-called <strong>Neptune theme</strong><a id="id150" class="indexterm"/> by default). After <a id="id151" class="indexterm"/>we make a build, the content of these files is updated with CSS definitions, and the JavaScript files will contain dependencies that need to be loaded prior to execution, custom <code class="literal">xtypes</code>, and other class system features.</li><li class="listitem" style="list-style-type: disc"><code class="literal">build.xml</code>: Sencha Cmd <a id="id152" class="indexterm"/>uses Apache Ant (<a class="ulink" href="http://ant.apache.org/">http://ant.apache.org/</a>), which is a Java tool used to build Java projects. Ant uses a configuration file named <code class="literal">build.xml</code>, which contains all the required configurations and commands to build a project. Sencha Cmd uses Ant as the engine to build an Ext JS application on the background (while we simply need to use a command). This is the reason why we need to have the Java SDK installed to use some of the Sencha Cmd features.</li><li class="listitem" style="list-style-type: disc"><code class="literal">index.html</code>: This is<a id="id153" class="indexterm"/> the index file of our project. This is the file that will be rendered by the browser when we execute our application. Inside this file, we will find the import of the <code class="literal">bootstrap.js</code> file. We should avoid making changes in this file as well because when we build the application, Sencha Cmd will generate a new <code class="literal">index.html</code> file in the <code class="literal">build</code> folder, discarding all the changes we might have made to the <code class="literal">index.html</code> file. If we need to include a JS or CSS file, we should define this within the <code class="literal">app.json</code> file.</li><li class="listitem" style="list-style-type: disc"><code class="literal">ext</code>: Inside<a id="id154" class="indexterm"/> this folder, we can find all the Ext JS framework files (<code class="literal">ext-all</code>, <code class="literal">ext-all-debug</code>, and <code class="literal">ext-dev</code>), its source code, and also the <code class="literal">packages</code> folder, containing the locale definitions for our application and theme-related packages, among others.</li><li class="listitem" style="list-style-type: disc"><code class="literal">overrides</code>: When<a id="id155" class="indexterm"/> we create the application, this folder is empty. We can add any class overrides and customizations we will need for our project.</li><li class="listitem" style="list-style-type: disc"><code class="literal">packages</code>: Inside <a id="id156" class="indexterm"/>this folder, we can create our own packages. A package can be a new theme, for example. Its concept is similar to <em>gems</em> in Ruby or custom APIs in Java and .NET (for example, to use Apache Ant in a Java project, we need to include the Apache Ant <code class="literal">jar</code> file).</li><li class="listitem" style="list-style-type: disc"><code class="literal">resources</code>: Inside<a id="id157" class="indexterm"/> this folder, we will place all the images of our application. We can also place other CSS files and font files.</li><li class="listitem" style="list-style-type: disc"><code class="literal">sass</code>: Inside <a id="id158" class="indexterm"/>this folder, we can find some Sass files used to create themes. Any custom CSS for our application will be created inside this folder.</li></ul></div><p>Let's gain firsthand <a id="id159" class="indexterm"/>knowledge now! We will now explore some of the concepts described previously during the development of our application to understand them better.</p><div><div><div><div><h3 class="title"><a id="ch02lvl3sec02"/>Looking out for changes with the watch command</h3></div></div></div><p>Sencha Cmd<a id="id160" class="indexterm"/> has another command that is very useful while developing Ext JS applications. It is the<a id="id161" class="indexterm"/> <code class="literal">watch</code> command. We will use this command all the time while developing the application in this book.</p><p>Let's execute this command and see what it does. First, we need to change the directory to the <code class="literal">masteringextjs</code> folder (which is our application folder generated with Sencha Cmd). Then, we can execute the <code class="literal">sencha app watch</code> command. The following screenshot exemplifies the output of this command:</p><div><img src="img/0457OT_02_16.jpg" alt="Looking out for changes with the watch command"/></div><p>This command looks for any changes made inside the Ext JS application folder. If we create a new file <a id="id162" class="indexterm"/>or change any file, this command will know that a change has been made and will make an application build.</p><div><div><h3 class="title"><a id="tip02"/>Tip</h3><p>You can minimize the terminal application and let the command be executed in the background. If we close the terminal, the command will no longer be alive, and we have to execute it again.</p></div></div><p>It is also going<a id="id163" class="indexterm"/> to start a web server at <code class="literal">http://locahost:1841</code>, where we can access our application as demonstrated in the following screenshot:</p><div><img src="img/0457OT_02_17.jpg" alt="Looking out for changes with the watch command"/></div><p>So this is how an application created with Sencha Cmd looks. Sencha Cmd also creates some files inside the <code class="literal">app</code> folder that we can change according to our needs. We will go through the files in the next chapter.</p><p>We can also execute the application from the Xampp <code class="literal">localhost</code> URL by accessing <code class="literal">http://localhost/masteringextjs</code>, as follows:</p><div><img src="img/0457OT_02_18.jpg" alt="Looking out for changes with the watch command"/></div><div><div><h3 class="title"><a id="tip03"/>Tip</h3><p>The output from <code class="literal">http://localhost/masteringextjs</code> is exactly the same as accessing <code class="literal">http://locahost:1841</code>. You can use any of them. But be aware that <code class="literal">http://locahost:1841</code> will be alive only when we use the <code class="literal">sencha app watch</code> command. As we will use PHP and apply some other configurations, we will use <code class="literal">http://localhost/masteringextjs</code> throughout the book.</p></div></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec03"/>Applying the first changes in our app</h3></div></div></div><p>We<a id="id164" class="indexterm"/> know that Sencha Cmd has created some files for us, but we do not want that screen to be the first one the user will see. We want the user to see the login screen and then go the main screen.</p><p>To make it happen, we need to make some changes inside the <code class="literal">app.js</code> file. If we open the file, we will see the following content:</p><div><pre class="programlisting">Ext.application({
    name: 'Packt',

    extend: 'Packt.Application',
    
<strong>    autoCreateViewport: 'Packt.view.main.Main'</strong>
});</pre></div><p>We are going to change the preceding code that was highlighted to the following code:</p><div><pre class="programlisting">autoCreateViewport: false</pre></div><p>This is the only change we will make in this file, because we should avoid changing it.</p><p>What this line <a id="id165" class="indexterm"/>does is create the <code class="literal">Packt.view.main.Main</code> component automatically after the application is initialized, but we do not want that happening. We want to display the splash screen first and then the login screen. That is why we are asking the application not to auto-render the viewport.</p><p>Note that the terminal where we have the <code class="literal">sencha app watch</code> command running will output a few lines, which means the application will be refreshed and the development build updated. This will happen every time we make a change and save it.</p><p>If we refresh the browser, we should see an empty page. This means we can start the development of our DVD Rental Store application.</p></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec04"/>Understanding the Application.js file</h3></div></div></div><p>If we <a id="id166" class="indexterm"/>open the <code class="literal">app/Application.js</code> file, this is how it looks:</p><div><pre class="programlisting">Ext.define('Packt.Application', { // #1
    extend: 'Ext.app.Application',
    
    name: 'Packt', // #2

    views: [ // #3

    ],

    controllers: [ // #4
        'Root'
    ],

    stores: [ // #5

    ],
    
    launch: function () { // #6
        // TODO - Launch the application
    }
});</pre></div><p>The <code class="literal">app.js</code> file inherits all the behavior of the application from the <code class="literal">Application.js</code> file. This file is used as the entry point of the app.</p><p>On the first line of the preceding code, we have the <code class="literal">Ext.application</code> declaration (<code class="literal">#1</code>). This means that our application will have a single page (<a class="ulink" href="http://en.wikipedia.org/wiki/Single-page_application">http://en.wikipedia.org/wiki/Single-page_application</a>), and the parent container of the app will be the viewport. The viewport is a specialized container representing the viewable application area that is rendered inside the <code class="literal">&lt;body&gt;</code> tag of the HTML page (<code class="literal">&lt;body&gt;&lt;/body&gt;</code>).</p><p>Inside the <code class="literal">Ext.application</code>, we can also declare <code class="literal">views</code> (<code class="literal">#3</code>), <code class="literal">controllers</code> (<code class="literal">#4</code>), and <code class="literal">stores</code> (<code class="literal">#5</code>) used by the application. We will add this information in this file as we create new classes for our project.</p><p>We need to <a id="id167" class="indexterm"/>declare the <code class="literal">name</code> attribute of the application, which will be the namespace (<code class="literal">#2</code>) of the application. In this case, Sencha Cmd used the namespace we used in the <code class="literal">sencha generate app</code> command.</p><p>We can also create a <code class="literal">launch</code> function inside <code class="literal">Ext.application</code> (<code class="literal">#6</code>). This function will be called after all the application's controllers are initialized, and this means that the application is completely loaded. So this function is a good place to instantiate our main view, which in our case will be the login screen.</p><div><div><h3 class="title"><a id="tip04"/>Tip</h3><p>Do we need to use <code class="literal">Ext.onReady</code> when using <code class="literal">Ext.application</code>?</p><p>The answer is no. We only need to use one of the options. According to the Ext JS API documentation, <code class="literal">Ext.application</code> <em>loads Ext.app.Application class and starts it up with given configuration after the page is ready</em> and <code class="literal">Ext.onReady</code> <em>adds a new listener to be executed when all required scripts are fully loaded</em>.</p><p>If we take a look at the source code for <code class="literal">Ext.application</code>, we have:</p><div><pre class="programlisting">Ext.application = function(config) {
    Ext.require('Ext.app.Application');
    Ext.onReady(function() {
        new Ext.app.Application(config);
    });
};</pre></div><p>This means that <code class="literal">Ext.application</code> is already calling <code class="literal">Ext.onReady</code>, so we do not need to do it twice.</p><p>Hence, use <code class="literal">Ext.onReady</code> when you have a few components to be displayed, which are not in the MVC architecture (similar to the jQuery <code class="literal">$(document).ready()</code> function), and use <code class="literal">Ext.application</code> when you are developing an Ext JS MVC application.</p></div></div><p>The following diagram exemplifies all the high-level steps performed during the Ext JS application startup. Once the steps are executed, the application is completely loaded:</p><div><img src="img/0457OT_02_19.jpg" alt="Understanding the Application.js file"/></div><p>Now that <a id="id168" class="indexterm"/>we know how an Ext JS application is initialized, we can start building our app.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Creating the loading page</h1></div></div></div><p>When working <a id="id169" class="indexterm"/>with large Ext JS applications, it is normal to have a short delay when loading the application. This happens because Ext JS is loading all the required classes to have the application up and running, and meanwhile, all the users see is a blank screen, which can be annoying for them. A very common solution to this problem is to have a loading page, also known as a splash screen.</p><p>So let's add a splash screen to our application that looks like what is shown in the following screenshot:</p><div><img src="img/0457OT_02_20.jpg" alt="Creating the loading page"/></div><p>First, we <a id="id170" class="indexterm"/>need to understand how this splash screen will work. After the user loads the application, the splash screen will be displayed. The application will show the splash screen while it loads all the required classes and code so that the application can be used.</p><p>We already know that the application calls the <code class="literal">launch</code> function when it is ready to be used. So we know that we will need to remove the splash screen on the <code class="literal">launch</code> method. The question now is: where inside <code class="literal">Ext.application</code> can we call the splash screen? The answer is inside the <code class="literal">init</code> function. The <code class="literal">init</code> function is called when the application boots, so it gives some time to all required code to be loaded, and after that, the <code class="literal">launch</code> function is called.</p><p>Now that we know how the splash screen will work, let's implement it.</p><p>Inside <code class="literal">Ext.application</code>, we will implement a function called <code class="literal">init</code> after the <code class="literal">launch</code> function declaration:</p><div><pre class="programlisting">init: function () {
    var me = this; // #1
    me.splashscreen = Ext.getBody().mask( // #2
        'Loading application', 'splashscreen'
    ); 
}</pre></div><p>All we need to do is to <a id="id171" class="indexterm"/>apply a <code class="literal">mask</code> method (<code class="literal">#2</code>) into the HTML body of the application (<code class="literal">Ext.getBody()</code>). That is why we are calling the <code class="literal">mask</code> method passing the loading message (<code class="literal">Loading Application</code>) and applying a CSS style that will be a loading <code class="literal">GIF</code> file, and it is already part of the Ext JS CSS (<code class="literal">splashscreen</code>). The <code class="literal">mask</code> method will return an <code class="literal">Ext.dom.Element</code> class, which we will need to manipulate later (remove the <code class="literal">mask</code> method from the HTML body), and for this reason, we need to keep a reference to this <code class="literal">Ext.dom.Element</code> class, and we will store this reference as a variable part of <code class="literal">Ext.application</code> (<code class="literal">me.splashscreen</code>). The <code class="literal">me</code> variable is a reference to <code class="literal">this</code> (<code class="literal">#1</code>), which makes a reference to <code class="literal">Ext.application</code> itself.</p><p>With the code of the <code class="literal">init</code> method only, we will have a loading screen as follows:</p><div><img src="img/0457OT_02_21.jpg" alt="Creating the loading page"/></div><p>If this is all you need, that is OK. But let's go a little bit further and customize the loading screen, adding a logo image so that it can look like the first image of this topic, which is our final output.</p><p>To add the image to our splash screen, we need to create a CSS style. We could create a CSS file and then include it in our <code class="literal">index.html</code> file, but we will follow the best practices and create a <code class="literal">Sass</code> file inside the <code class="literal">sass</code> folder.</p><p>Ext JS has a better way to deal with custom CSS styles. When we are done implementing our application, we want to customize the theme, and we want to make a production build. The production build contains only the essential Ext JS SDK source code, which is required to execute the application, along with our application source code. This code will be obfuscated and optimized so that the user can download a file with minimal size. The production build will do the same with the CSS file as well; it will optimize and add only the required CSS from Ext JS components that are needed to execute the application. As of course, we want any custom CSS that we create to be optimized as well.</p><p>To do so, we <a id="id172" class="indexterm"/>are going to create our custom CSS inside the <code class="literal">sass/etc</code> folder using Sass (<a class="ulink" href="http://sass-lang.com/">http://sass-lang.com/</a>). So let's go ahead and create a file named <code class="literal">all.scss</code> inside the <code class="literal">sass/etc</code> folder.</p><p>Inside the resources, we will also create an <code class="literal">images/app</code> folder with the Packt logo image (you can copy the Packt logo image from this book's source code).</p><p>This is how our application structure will look after creating these files:</p><div><img src="img/0457OT_02_22.jpg" alt="Creating the loading page"/></div><p>And the <code class="literal">all.scss</code> file will look like this:</p><div><pre class="programlisting">.x-mask.splashscreen {
  background-color: white;
  opacity: 1;
}

.x-mask-msg.splashscreen,
.x-mask-msg.splashscreen div {
  font-size: 16px;
  font-weight: bold;
  padding: 30px 5px 5px 5px;
  border: none;
  background: {           // #1
    color: transparent;   // #2
    position: top center; // #3
  };
}

.x-message-box .x-window-body .x-box-inner {
  min-height: 110px !important;
}

.x-splash-icon {
  background-image: url('images/app/packt-logo.png') !important;
  margin-top: -30px;
  height: 70px;
}</pre></div><p>It is plain<a id="id173" class="indexterm"/> CSS code, except for lines <code class="literal">#1</code>, <code class="literal">#2</code>, and <code class="literal">#3</code>, which is Sass code.</p><div><div><h3 class="title"><a id="note19"/>Note</h3><p>If you are not familiar with Sass, it is a new way of writing CSS code. Sass uses the <a id="id174" class="indexterm"/>
<strong>don't repeat yourself</strong> (<strong>DRY</strong>) principle, which means that you can use variables and nested syntax (as the one we used in <code class="literal">#1</code>) and import other Sass files (allowing you to create modular CSS), among other features. The Ext JS engine theme uses Sass and Compass (a Sass framework). Sass is an alternative to Less. To learn more about Sass, please visit <a class="ulink" href="http://sass-lang.com/">http://sass-lang.com/</a>.</p></div></div><p>Lines <code class="literal">#1</code>, <code class="literal">#2</code>, and <code class="literal">#3</code> would be the same thing as:</p><div><pre class="programlisting">background-color: transparent;
background-position: top center;</pre></div><p>The preceding code is the CSS code generated after compiling the Sass file.</p><div><div><h3 class="title"><a id="note20"/>Note</h3><p>When Sencha Cmd makes a build, the code from our <code class="literal">all.scss</code> file will be added to the single CSS file generated for our application, which contains the Ext JS CSS code and our code as well.</p></div></div><p>Now, let's go back to the <code class="literal">Application.js</code> file and continue to add some code to the <code class="literal">init</code> function.</p><p>We add<a id="id175" class="indexterm"/> the following code after the code we already have:</p><div><pre class="programlisting">me.splashscreen.addCls('splashscreen');</pre></div><p>We will add a new CSS style to the loading <code class="literal">&lt;div&gt;</code> tag. Note that the following styles from <code class="literal">app.css</code> will be applied: <code class="literal">.x-mask.splashscreen</code> and <code class="literal">.x-mask-msg.splashscreen div</code>. This will make the background white instead of gray, and it is also going to change the font of the "<code class="literal">Loading application</code>" message.</p><p>This is how the generated HTML will look:</p><div><img src="img/0457OT_02_23.jpg" alt="Creating the loading page"/></div><p>Now, we will add the following code in the <code class="literal">init</code> function:</p><div><pre class="programlisting">Ext.DomHelper.insertFirst(Ext.query('.x-mask-msg')[0], {
     cls: 'x-splash-icon'
});</pre></div><p>The preceding code will search for the first <code class="literal">&lt;div&gt;</code> tag that contains the <code class="literal">.x-mask-msg </code>class (<code class="literal">Ext.query('.x-mask-msg')[0]</code>) and will add a new <code class="literal">&lt;div&gt;</code> tag as a child with the class <code class="literal">x-splash-icon</code> that will be responsible for adding the logo image above the loading message.</p><p>And this is how the generated HTML will look:</p><div><img src="img/0457OT_02_24.jpg" alt="Creating the loading page"/></div><p>After we execute the preceding code, we will have the output shown in the screenshot at the beginning of this topic.</p><p>Now we <a id="id176" class="indexterm"/>have the splash screen being displayed. We need to work on the <code class="literal">launch</code> function to remove the splash screen after all the code the application needs is loaded; otherwise, the loading message will be there indefinitely!</p><p>To remove the splash screen, the only code we need to add to the <code class="literal">launch</code> function is the following, which is about removing the mask from the HTML body:</p><div><pre class="programlisting">Ext.getBody().unmask();</pre></div><p>However, removing the mask abruptly is not nice because the user cannot even see the loading message. Instead of only removing the mask, let's give the user 2 seconds to see the loading message after the application is ready:</p><div><pre class="programlisting">var task = new Ext.util.DelayedTask(function() { // #1
     Ext.getBody().unmask(); // #2
});

task.delay(2000); // #3</pre></div><p>To do so, we use the <code class="literal">DelayedTask</code> class (<code class="literal">#1</code>), which is a class that provides the chance of a function to be executed after the given timeout in milliseconds (<code class="literal">#3</code>). So, in the case of the following task, we remove the mask from the HTML body (<code class="literal">#2</code>) after 2 seconds of timeout (2,000 milliseconds).</p><p>If we test the output right now, it works, but it is still not nice for the user. It would be even better if we could add an animation to the masking. So, we will add a fade out animation (which animates the opacity of an element—from opaque to transparent), and after the animation, we will remove the masking (inside the <code class="literal">Ext.util.DelayedTask</code> function). The following code is a demonstration of the explanation provided in this paragraph:</p><div><pre class="programlisting">me.splashscreen.fadeOut({
    duration: 1000,
    remove:true
});</pre></div><p>After we execute this code, notice that the loading message is still being displayed. We need to analyze the generated HTML to find out why.</p><p>Before we call the <code class="literal">fadeOut</code> function, this is the HTML of the loading message:</p><div><img src="img/0457OT_02_25.jpg" alt="Creating the loading page"/></div><p>After we call the <code class="literal">fadeout</code> function, the HTML will be the following:</p><div><img src="img/0457OT_02_26.jpg" alt="Creating the loading page"/></div><p>Only the<a id="id177" class="indexterm"/> first <code class="literal">&lt;div&gt;</code> tag with the <code class="literal">splashscreen</code> class was faded out. We need to also fade out the <code class="literal">&lt;div&gt;</code> tag with the <code class="literal">x-mask-msg splashscreen</code> class, which contains the logo and the loading message. To do so, we can use the next method, which will get the next sibling of the <code class="literal">splashscreen</code> node, as follows:</p><div><pre class="programlisting">me.splashscreen.next().fadeOut({
    duration: 1000,
    remove:true
});</pre></div><p>The output will be a pleasant animation that is shown to the user. Also note that the <code class="literal">splashscreen</code> <code class="literal">&lt;div&gt;</code> tag was removed from the generated HTML, which is as follows:</p><div><img src="img/0457OT_02_27.jpg" alt="Creating the loading page"/></div><p>The complete code for the <code class="literal">launch</code> function will be the following:</p><div><pre class="programlisting">launch: function () {
    var me = this;

    var task = new Ext.util.DelayedTask(function() {

        //Fade out the body mask
        me.splashscreen.fadeOut({
            duration: 1000,
            remove:true
        });

        //Fade out the icon and message
        me.splashscreen.next().fadeOut({
            duration: 1000,
            remove:true,
            listeners: { // #1
                afteranimate: function(el, startTime, eOpts ){//#2
                    console.log('launch') // #3
                }
            }
        });
    });

    task.delay(2000);
},</pre></div><div><div><h3 class="title"><a id="tip06"/>Tip</h3><p><strong>Downloading the example code</strong></p><p>You can download the example code files from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div><p>To make <a id="id178" class="indexterm"/>our splash screen even nicer, we will listen (<code class="literal">#1</code>) to the <code class="literal">afteranimate</code> event (<code class="literal">#2</code>) of the <code class="literal">fadeOut</code> method so that we can display the initial component of our application. We will show a login screen that we will implement in the next chapter. For now, we will add a console message (<code class="literal">#3</code>) just to know where we need to call the initial component. In Internet Explorer, <code class="literal">console.log</code> will not work; instead, you can use <code class="literal">window.console.log</code>.</p><div><div><h3 class="title"><a id="note21"/>Note</h3><p>Notice that all the code we used to display the loading message mask and remove it is part of the <code class="literal">Ext.dom.Element</code> class. This class<a id="id179" class="indexterm"/> encapsulates a <strong>Document Object Model</strong> (<strong>DOM</strong>) element, where we can manage it using the class's methods. This class is a part of the <code class="literal">Ext Core</code> library, which is a part of the foundation of the Ext JS framework.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Summary</h1></div></div></div><p>In this chapter, we explored the application we will implement throughout the chapters of this book in a lot of depth. We also covered all the requirements to create the development environment for this application. You learned how to create the initial structure of an Ext JS MVC application.</p><p>You also learned, through examples, how to create a splash screen (also known as the loading screen), manipulating the DOM using the <code class="literal">Ext.dom.Element</code> class. You learned the steps how to start up an Ext JS application and also learned the difference between the <code class="literal">init</code> and <code class="literal">launch</code> methods from <code class="literal">Ext.application</code>. We left <code class="literal">Application.js</code> ready to display its first screen, which will be a login screen, and which you will learn how to implement in the next chapter.</p></div></body></html>