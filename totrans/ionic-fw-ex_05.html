<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;5.&#xA0;The London Tourist App"><div class="book" id="OPEK2-798adc86542b445d8a1bb648e10b6714"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch05" class="calibre1"/>Chapter 5. The London Tourist App</h1></div></div></div><p class="calibre10">In the previous chapter, we created an application called the Bucket-List application that enabled us to create a list of interesting things we wanted to do in our lifetime. In this chapter, we will create a new application called "The London Tourist" application. It is an application that will display a list of top tourist attractions in the city of London in England. We will build this application with a new type of Ionic template called the side menu template. We will also be using the Angular <code class="email">$http</code> service to query our data via Ajax.</p></div>

<div class="book" title="Chapter&#xA0;5.&#xA0;The London Tourist App">
<div class="book" title="Introduction to the London Tourist App"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch05lvl1sec19" class="calibre1"/>Introduction to the London Tourist App</h1></div></div></div><p class="calibre10">London is the<a id="id161" class="calibre1"/> largest city in England and it is a city that is well known to attract tourists around the world. The city is very urban but it has many historical and non-historical tourist attractions. With this large number of attractions, it can be difficult to pick out the best places to go. This is the entire idea behind the London Tourist App as it will provide users with five handpicked destinations that tourists visiting London can actually visit. These destinations will be stored in a JSON file in our project that we will be querying via AJAX and populating.</p></div></div>

<div class="book" title="Chapter&#xA0;5.&#xA0;The London Tourist App">
<div class="book" title="Introduction to the London Tourist App">
<div class="book" title="Creating the London Tourist app"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch05lvl2sec23" class="calibre1"/>Creating the London Tourist app</h2></div></div></div><p class="calibre10">To begin the process<a id="id162" class="calibre1"/> of creating our app, we are going to start by creating a brand new Ionic application. So far in this book, we have learned to create a new Ionic application using the blank template. For the application we are about to build, we are going to use a new type of Ionic template to create the application. We are going to be using the side menu template to create our London Tourist app.</p><div class="book" title="The side menu app design"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch05lvl3sec14" class="calibre1"/>The side menu app design</h3></div></div></div><p class="calibre10">You might not be<a id="id163" class="calibre1"/> familiar with what the side menu template looks like. In fact, the side menu design for mobile applications is very common in mobile app development. It involves having the ability to slide from the left or right edges of a mobile application to reveal more options, normally more menu options:</p><div class="mediaobject"><img src="../images/00024.jpeg" alt="The side menu app design" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">The side menu design<a id="id164" class="calibre1"/> technique is one that is used in a lot of contexts, both on mobile and on the web. Normally, you will see an icon positioned either on the far upper-right or upper-left, indicating that you can swipe or click that icon to reveal the extra menu options. This icon is normally referred to as the hamburger menu icon.</p><p class="calibre10">The Ionic framework actually comes built-in with a side menu template that automatically creates a side menu application for us with some useful boilerplate code. We will be using this template to create our London Tourist Application.</p></div><div class="book" title="Using the Ionic side menu template"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch05lvl3sec15" class="calibre1"/>Using the Ionic side menu template</h3></div></div></div><p class="calibre10">To begin <a id="id165" class="calibre1"/>developing our London Tourist Application, we will begin by using the Ionic CLI to create the app. You can do this by running the following command from a terminal window:</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note06" class="calibre1"/>Note</h3><p class="calibre10">We will shorten the name of our app from London Tourist App to LTA to make it easier to type.</p></div><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre11">ionic start LTA sidemenu</strong></span>
</pre></div><p class="calibre10">This command will create a new Ionic application called LTA using the default Ionic side menu template.</p></div><div class="book" title="Seeing the LTA side menu app in action"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch05lvl3sec16" class="calibre1"/>Seeing the LTA side menu app in action</h3></div></div></div><p class="calibre10">As soon as<a id="id166" class="calibre1"/> your LTA app is created, you can simply change your directory into the app from the terminal and run it on your computer using the <code class="email">ionic serve</code> technique. You can do this by running the following commands:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Change directory to app:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre11">cd LTA</strong></span>
</pre></div></li><li class="listitem">Run using the <code class="email">ionic serve</code> technique:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre11">ionic serve</strong></span>
</pre></div><div class="note" title="Note"><h3 class="title2"><a id="tip07" class="calibre1"/>Tip</h3><p class="calibre10">Remember to use Chrome and emulate to a device of your choice with the Chrome emulation tools as taught in previous chapters.</p></div></li></ul></div><p class="calibre10">You should see a screen that looks something like the following screenshot:</p><div class="mediaobject"><img src="../images/00025.jpeg" alt="Seeing the LTA side menu app in action" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">As you can see<a id="id167" class="calibre1"/> from the preceding screenshot, the side menu app we have just created contains some pre-rendered content.</p></div><div class="book" title="Exploring the LTA side menu app's code"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch05lvl3sec17" class="calibre1"/>Exploring the LTA side menu app's code</h3></div></div></div><p class="calibre10">Now, we <a id="id168" class="calibre1"/>are going to have a<a id="id169" class="calibre1"/> look at the code of the LTA app based on the side menu template:</p><div class="mediaobject"><img src="../images/00026.jpeg" alt="Exploring the LTA side menu app's code" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">Now, I will require <a id="id170" class="calibre1"/>you to fire up the LTA project you have just created in your favorite IDE. The first thing you will notice<a id="id171" class="calibre1"/> is the folder structure that you are already used to from previous chapters.</p><div class="book" title="The index.html file"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch05lvl4sec14" class="calibre1"/>The index.html file</h4></div></div></div><p class="calibre10">Now, focus<a id="id172" class="calibre1"/> on the <code class="email">www</code> folder and open the <code class="email">index.html</code> file. A look through this file should show you something similar to what we have in the following screenshot:</p><div class="mediaobject"><img src="../images/00027.jpeg" alt="The index.html file" class="calibre12"/></div><p class="calibre13"> </p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip08" class="calibre1"/>Tip</h3><p class="calibre10">To get to this file from the root folder, navigate to <code class="email">www/index.html</code>.</p></div><p class="calibre10">A look at this file will show you some things we have seen from previous projects in this book. For example, you can see some CSS and JS references to the Ionic <code class="email">styles</code> and <code class="email">script</code> files respectively. You will also see from the <code class="email">body</code> tag that a generated Angular module called <code class="email">starter</code> is being instantiated using the <code class="email">ng-app</code> attribute.</p><p class="calibre10">Pay close <a id="id173" class="calibre1"/>attention to the <code class="email">&lt;ion-nav-view&gt;</code> tags within the <code class="email">&lt;body&gt;</code> tags. This is an Ionic element that is used to specify the view to which the entire app is injected into. It is similar to the <code class="email">ng-view</code> feature of Angular but has more powerful features. It also automatically handles navigation for us within our Ionic app. You need not pay a great deal of attention to this part of the code anymore but just have it at the back of your mind that <code class="email">&lt;ion-nav-view&gt;</code> is where all content gets injected in, and acts like a wrapper for our app's content.</p></div><div class="book" title="The menu.html file"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch05lvl4sec15" class="calibre1"/>The menu.html file</h4></div></div></div><p class="calibre10">The next file we are <a id="id174" class="calibre1"/>going to explore is the <code class="email">menu.html</code> file. This file is probably the most important file at this moment<a id="id175" class="calibre1"/> as it contains most of the generated code for the side menu parts of our app. To have a look at this file, navigate to the <code class="email">menu.html</code> file which can be found by navigating into the folder called <code class="email">templates</code> under the <code class="email">www</code> folder. Here is the path: <code class="email">www/templates/menu.html</code>.</p><p class="calibre10">If you have successfully done this, you should see a file that closely resembles what we have in the following screenshot:</p><div class="mediaobject"><img src="../images/00028.jpeg" alt="The menu.html file" class="calibre12"/></div><p class="calibre13"> </p><div class="book" title="The &lt;ion-side-menus&gt;element"><div class="book"><div class="book"><div class="book"><h5 class="title4"><a id="ch05lvl5sec05" class="calibre28"/>The &lt;ion-side-menus&gt;element</h5></div></div></div><p class="calibre10">The first thing you should pay attention to is the <code class="email">&lt;ion-side-menus&gt;</code> element. Think of this element as a container for any side menu application. It allows us to specify what the main content area <a id="id176" class="calibre1"/>will be via the <code class="email">&lt;ion-side-menu-content&gt;</code> element and also allows us to specify the side menus via the <code class="email">&lt;ion-side-menu&gt;</code> elements. There can be more than one side menu specified within the <code class="email">&lt;ion-side-menus&gt;</code> elements and we have the ability to specify whether the menu is placed on the left, right, or even both. There are a lot of cool and powerful controls that the <code class="email">&lt;ion-side-menus&gt;</code> elements let us utilize to control its containing items. For now, we will focus on trying to learn more about the child elements that are needed to work with the <code class="email">&lt;ion-side-menus&gt;</code> elements. These are the <code class="email">&lt;ion-side-menu-content&gt;</code>and<code class="email">&lt;ion-side-menu&gt;</code> elements.</p></div><div class="book" title="The &lt;ion-side-menu-content&gt;element"><div class="book"><div class="book"><div class="book"><h5 class="title4"><a id="ch05lvl5sec06" class="calibre28"/>The &lt;ion-side-menu-content&gt;element</h5></div></div></div><p class="calibre10">This element is<a id="id177" class="calibre1"/> what houses the main content area or the visible part of the app:</p><div class="mediaobject"><img src="../images/00029.jpeg" alt="The &lt;ion-side-menu-content&gt;element" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">In the preceding<a id="id178" class="calibre1"/> screenshot, which is a view of our LTA app, the part you see is a representative of<code class="email">&lt;ion-side-menu-content&gt;</code>. Let's have a closer look at the code of <code class="email">&lt; ion-side-menu-content&gt;</code> to see how it actually works in detail:</p><div class="mediaobject"><img src="../images/00030.jpeg" alt="The &lt;ion-side-menu-content&gt;element" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">Within <code class="email">&lt;ion-side-menu-content&gt;</code>, you can see two direct child elements.</p><p class="calibre10">Firstly, you can see the <code class="email">&lt;ion-nav-bar&gt;</code> element which is used to build the navigation buttons of the main content area with the<code class="email">&lt;ion-nav-buttons&gt;</code> element as its child element. For example, within these<code class="email">&lt;ion-nav-buttons&gt;</code> elements, you can see a navigation button on line 8-9, which has a <code class="email">menu-toggle</code> attribute of value <code class="email">left</code>. This is simply saying that when this button is tapped, the left-sided side menu should be triggered. Remember that there<a id="id179" class="calibre1"/> can be up to two side menus with one being on the left and one being on the right in a side menu app.</p><p class="calibre10">The second direct child element is the<code class="email">&lt;ion-nav-view&gt;</code> element on line 12 from the preceding screenshot. We talked about this same element earlier when we had a look at the <code class="email">index.html</code> file. This element is a placeholder for where the actual content is injected. This particular <code class="email">&lt;ion-nav-view&gt;</code> element has a <code class="email">name</code> attribute with the value of <code class="email">menuContent</code>. This attribute is important as it is used like a value to uniquely identify<code class="email">&lt;ion-nav-view&gt;</code>.</p><p class="calibre10">With all that said, we have now lightly touched on the <code class="email">&lt;ion-side-menu-content&gt;</code> element and its main functions. Always think of this element as the element that houses the main content area of your side menu application.</p></div><div class="book" title="The &lt;ion-side-menu&gt;element"><div class="book"><div class="book"><div class="book"><h5 class="title4"><a id="ch05lvl5sec07" class="calibre28"/>The &lt;ion-side-menu&gt;element</h5></div></div></div><p class="calibre10">The <code class="email">&lt;ion-side-menu&gt;</code> element is an element that we use to specify the side menu of our app. Just<a id="id180" class="calibre1"/> like the <code class="email">&lt;ion-side-menu-content&gt;</code> element, it lives as a direct child of the <code class="email">&lt;ion-side-menus&gt;</code> element. There can be up to two<code class="email">&lt;ion-side-menu&gt;</code> elements within the<code class="email">&lt;ion-side-menus&gt;</code> element, with only one being on each side. Let's have a closer look at the code of<code class="email">&lt;ion-side-menu&gt;</code> of our LTA application.</p><div class="mediaobject"><img src="../images/00031.jpeg" alt="The &lt;ion-side-menu&gt;element" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">The preceding screenshot is from our <code class="email">menu.html</code> file, and it showcases the code of <code class="email">&lt;ionic-side-menu&gt;</code> from our LTA application. If you look at it closely, you will notice that opening<a id="id181" class="calibre1"/> tag of our <code class="email">&lt;ion-side-menu&gt;</code> element has a <code class="email">side</code> attribute with value <code class="email">left</code>. This is basically saying that we want this particular side menu to be on the left-hand side. Remember that we can have up to two side menus in our app, and one can be positioned on the left and another on the right, but two side menus cannot be positioned on the same side. We can also see that this <code class="email">&lt;ion-side-menu&gt;</code> has two direct child elements. These child elements are <code class="email">&lt;ion-header-bar&gt;</code> and <code class="email">&lt;ion-content&gt;</code>. <code class="email">&lt;ion-header-bar&gt;</code> is an element used to construct the header of a side menu. If you have a look at the following screenshot of our side menu, you should see a representation of it:</p><div class="mediaobject"><img src="../images/00032.jpeg" alt="The &lt;ion-side-menu&gt;element" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">From the preceding screenshot, you can see the header with the title <code class="email">LEFT</code> as reflected in the code as an<code class="email">&lt;h1&gt;</code> element.</p><p class="calibre10">The second child element we can see from the code is the <code class="email">&lt;ion-content&gt;</code>element. Think of this element as what houses the content area below the header of the side menu. Basically, this is anything below the header. <code class="email">&lt;ion-content&gt;</code> could contain any HTML code we want <a id="id182" class="calibre1"/>but in this case, it contains<code class="email">&lt;ion-list&gt;</code> which is something that we used to build our Bucket-List application from <a class="calibre1" title="Chapter 4. Ionic Components" href="part0024_split_000.html#MSDG2-798adc86542b445d8a1bb648e10b6714">Chapter 4</a>, <span class="strong"><em class="calibre14">Ionic Components</em></span>. You can also see a reflection of this code on the screenshot from when we ran our application.</p><p class="calibre10">With that said, you can see that we have successfully had a brief look at what the<code class="email">&lt;ion-side-menu&gt;</code> element entails and how the side menu template of Ionic functions. The next step is for us to actually go ahead and build our LTA application in full scale now.</p></div></div></div><div class="book" title="Developing the LTA application"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch05lvl3sec18" class="calibre1"/>Developing the LTA application</h3></div></div></div><p class="calibre10">We are now <a id="id183" class="calibre1"/>equipped with the know-how on how to code our LTA side menu based application. Remember that the idea behind our application is to have some of our favorite tourist destinations listed in our app. In a normal scenario, we would query this data from a real API. But for the sake of simplicity, we will mimic this API request by making a request to a local JSON file that would act like a real <a id="id184" class="calibre1"/>database with the information we need.</p><div class="book" title="The local JSON database"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch05lvl4sec16" class="calibre1"/>The local JSON database</h4></div></div></div><p class="calibre10">As discussed earlier, we are going<a id="id185" class="calibre1"/> to create a JSON file that will act like a real-life API containing our destinations. This<a id="id186" class="calibre1"/> local file will contain five top tourist destinations in London. The first thing we will need to do is to create this file.</p><div class="book" title="Creating the local JSON database file"><div class="book"><div class="book"><div class="book"><h5 class="title4"><a id="ch05lvl5sec08" class="calibre28"/>Creating the local JSON database file</h5></div></div></div><p class="calibre10">If you do not<a id="id187" class="calibre1"/> have your LTA application open, make sure you open it in your favorite IDE. Now, go ahead and create a new JSON file called <code class="email">sites.json</code> within the <code class="email">www</code> folder of your project. Make sure you name the file as the <code class="email">.json</code> extension in order for it to be parsed as a JSON file. Your directory structure should look similar to what is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00033.jpeg" alt="Creating the local JSON database file" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">With that done, you <a id="id188" class="calibre1"/>have successfully created your local JSON file representing your database for your tourist sites.</p></div><div class="book" title="Populating the JSON file"><div class="book"><div class="book"><div class="book"><h5 class="title4"><a id="ch05lvl5sec09" class="calibre28"/>Populating the JSON file</h5></div></div></div><p class="calibre10">Now we are going to populate the JSON file with some data. This data will be the data of five top tourist attractions in the city of London. The following is a JSON array that represents the <a id="id189" class="calibre1"/>content of our local JSON database. You should copy all the content of the following piece of code into your <code class="email">sites.json</code> file:</p><div class="informalexample"><pre class="programlisting">[
  {
"id":"1",
"name":"London Eye",
"description":"Shows you a great view of the city"
  },
  {
"id":"2",
"name":"The Shard",
"description":"Highest building in London"
  },
  {
"id":"3",
"name":"Oxford Circus",
"description":"The place to shop in London"
  },
  {
"id":"4",
"name":"Buckingham Palace",
"description":"The Queen lives here"
  }
]</pre></div><p class="calibre10">The preceding piece of code is a JSON array that represents four top destinations in London as JSON objects. Each object representing a site has three properties. These properties are:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre11">ID</strong></span>: A unique identifier for the site.</li><li class="listitem"><span class="strong"><strong class="calibre11">Name</strong></span>: The name of the Tourist site.</li><li class="listitem"><span class="strong"><strong class="calibre11">Description</strong></span>: Some small information about the site.</li></ul></div><p class="calibre10">By now, we have successfully completed the creation of our JSON local database. The next step is to see how we can actually render these items and query the database.</p></div></div><div class="book" title="Designing the view"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch05lvl4sec17" class="calibre1"/>Designing the view</h4></div></div></div><p class="calibre10">We have created <a id="id190" class="calibre1"/>our app and we have the data for<a id="id191" class="calibre1"/> the application. Before we<a id="id192" class="calibre1"/> query data, we first need to design how the data will look when rendered. For this very task, we will call on an old friend of ours in the face of<code class="email">&lt;ion-list&gt;</code>. We will use<code class="email">&lt;ion-list&gt;</code> to render a list of tourist attractions from our JSON database.</p><p class="calibre10">Currently if we run our application, the first page we see is the playlist application, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00034.jpeg" alt="Designing the view" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">This is because by default the page is specified in the <code class="email">app.js</code> file by Angular as the root page of our app. We will keep things simple and change the contents of this playlist page and design the <a id="id193" class="calibre1"/>view of our LTA application on it. From your LTA project folder, navigate into the <code class="email">www</code> folder and look into the <code class="email">templates</code> folder. Within the <code class="email">templates</code> folder, there is a <code class="email">playlists.html</code> file. This is the<a id="id194" class="calibre1"/> file that contains the code for our playlist page shown in the preceding screenshot. Open this file and you should see some code that closely resembles what we have in the following screenshot:</p><div class="mediaobject"><img src="../images/00035.jpeg" alt="Designing the view" class="calibre12"/></div><p class="calibre13"> </p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip09" class="calibre1"/>Tip</h3><p class="calibre10">The <code class="email">playlists.html</code> file from the root folder of your LTA project will have a path <code class="email">www/templates/playlists.html</code>.</p></div><p class="calibre10">The first thing we will want to do here is to change the name of the title of our view. Currently, the view <a id="id195" class="calibre1"/>as seen from the screenshots previously, has a title <code class="email">Playlists</code>. This is specified by the <code class="email">view-title</code> attribute of the opening<code class="email">&lt;ion-view&gt;</code> element. This <code class="email">view-title</code> attribute currently has a value <code class="email">Playlists</code>. Change this to <code class="email">London Sites</code>. This is to ensure that the title reflects the mission of our <a id="id196" class="calibre1"/>app, which is to show the top London tourist sites.</p><p class="calibre10">The second thing we need to do is to edit the code for<code class="email">&lt;ion-list&gt;</code>. Replace the <code class="email">&lt;ion-list&gt;</code> code with the one provided in the following code block:</p><div class="informalexample"><pre class="programlisting">&lt;ion-list&gt;
&lt;ion-item ng-repeat="site in sites"&gt;
        {{site.name}}
&lt;/ion-item&gt;
&lt;/ion-list&gt;</pre></div><p class="calibre10">If you have done this correctly, your code should now closely resemble what we have in the following screenshot:</p><div class="mediaobject"><img src="../images/00036.jpeg" alt="Designing the view" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">With this done, we have now completed the process of designing our UI. The next step is to go ahead and wire <a id="id197" class="calibre1"/>up our data to our view.</p><div class="book" title="Wiring up the data"><div class="book"><div class="book"><div class="book"><h5 class="title4"><a id="ch05lvl5sec10" class="calibre28"/>Wiring up the data</h5></div></div></div><p class="calibre10">Earlier, we<a id="id198" class="calibre1"/> created a <code class="email">sites.json</code> file that represented our database. We will be making a real Ajax call to this file in order to retrieve its data and serve it within our app. The thing we need to do to achieve this is firstly to write the code to retrieve the data.</p></div><div class="book" title="Retrieving the data with the $http service"><div class="book"><div class="book"><div class="book"><h5 class="title4"><a id="ch05lvl5sec11" class="calibre28"/>Retrieving the data with the $http service</h5></div></div></div><p class="calibre10">To retrieve the data, we will need to make an Ajax call to the <code class="email">sites.json</code> file. For this, Angular has a great <a id="id199" class="calibre1"/>service called the <code class="email">$http</code> service. This is a service that provides us with functionality to make Ajax calls to local and remote resources via Ajax. To begin using the <code class="email">$http</code> service to write our code, we first need to go to the controller associated with our view. By default, when you create an Ionic app based on the side menu template, there is a controller attached to the views. To find out which controller is attached to our <code class="email">playlist.html</code> file, we need to look at the <code class="email">app.js</code> file of our app to discover this.</p><p class="calibre10">You can find the <code class="email">app.js</code> file by navigating to the <code class="email">www</code> folder of your project and looking into the <code class="email">js</code> folder within it. You should see the <code class="email">app.js</code> file. Open it. After you open this <code class="email">app.js</code> file, look thorough the part where you have code that looks closely to what we have in the following screenshot:</p><div class="mediaobject"><img src="../images/00037.jpeg" alt="Retrieving the data with the $http service" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">The code from the preceding screenshot represents the state definition of the <code class="email">playlist.html</code> file. Pay close attention to the part of the code from the preceding screenshot where<a id="id200" class="calibre1"/> the controller is defined and you will see that the controller specified there is called <code class="email">PlaylistsCtrl</code>. This is the name of the Angular controller that our <code class="email">playlist.html</code> file is wired with.</p><p class="calibre10">The next step is to go to this <code class="email">PlaylistsCtrl</code> controller and write the code to retrieve our data. By default, the controllers are contained in the <code class="email">controller.js</code> file that can be found in the same <code class="email">js</code> folder as our <code class="email">app.js</code> file.</p><div class="mediaobject"><img src="../images/00038.jpeg" alt="Retrieving the data with the $http service" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">Open the <code class="email">controller.js</code> file and<a id="id201" class="calibre1"/> look for a stub of code that closely resembles what I have in the following screenshot:</p><div class="mediaobject"><img src="../images/00039.jpeg" alt="Retrieving the data with the $http service" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">The preceding code block represents the controller definition of <code class="email">PlaylistsCtrl</code>. The first thing we need to do is to clear all the code within the controller. Basically, we need to delete all the<a id="id202" class="calibre1"/> code found within the controller. If you have done this correctly, your controller should now look similar to what we have in the following screenshot:</p><div class="mediaobject"><img src="../images/00040.jpeg" alt="Retrieving the data with the $http service" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">With that done, we can now begin to create the code to query our local JSON database with the angular <code class="email">$http</code> service. The first thing we need to do to achieve this is to first add the dependency of our <code class="email">$http</code> service to our controller. This step is very important as if we do not add this dependency correctly, our app will not load. To do this, simply add <code class="email">$http</code> as the second parameter in the anonymous function part of your controller definition. If you have done this correctly, you should see something similar to what I have in the following screenshot:</p><div class="mediaobject"><img src="../images/00041.jpeg" alt="Retrieving the data with the $http service" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">With that done, we can now go ahead and start writing the code to grab our data from our local database. To start this process, simply write the following code into your controller:</p><div class="informalexample"><pre class="programlisting">$scope.sites = [];
$http.get('/sites.json')
.then(function (response) {
    $scope.sites = response.data;
});</pre></div><p class="calibre10">If you have done<a id="id203" class="calibre1"/> this correctly, your code should look very close to what we have in the following screenshot:</p><div class="mediaobject"><img src="../images/00042.jpeg" alt="Retrieving the data with the $http service" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">At this point, I will explain what this block of code is doing. We start by simply initializing the variable <code class="email">sites</code> as an array to the <code class="email">$scope</code>. It is a good practice to always initialize your Angular <code class="email">$scope</code> variables before using them. The next thing we try to do is make an Ajax <code class="email">get</code> request using the shorthand <code class="email">$http.get()</code> method. This <code class="email">$http.get</code> method returns a promise so we handle this promise by using the <code class="email">.then()</code> method of promise handling of Angular. In the promise handler function, you can see that we start by setting the data property of the response from the promise (<code class="email">response.data</code>). This <code class="email">data</code> property of the promise response (<code class="email">response.data</code>) is the property that holds any data returned which in our case is the data from our <code class="email">sites.json</code> file.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note07" class="calibre1"/>Note</h3><p class="calibre10">One thing that might be a bit confusing is the fact that, for the first parameter of the <code class="email">$http.get()</code> function, which takes the URL of the API or the file we want to consume, we have provided the following relative path<code class="email">'/sites.json'</code>. You might be wondering why we have not correctly given a path relative to the <code class="email">controller.js</code> file. This is because when working with Angular, all paths are referenced from the root <code class="email">index.html</code> file. In our case, the <code class="email">sites.json</code> and <code class="email">index.html</code> files are in the same directory under the <code class="email">www</code> directory, which is why we do not have the path <code class="email">'../sites.json'</code>, and instead have the path<code class="email">'/sites.json'</code>.</p></div><p class="calibre10">With all this <a id="id204" class="calibre1"/>done, we have completed the process of creating our LTA application. All that is left now is to run the application. Go ahead and run this application using the <code class="email">ionic serve</code> technique learned from <a class="calibre1" title="Chapter 1. First Look at Ionic" href="part0015_split_000.html#E9OE1-798adc86542b445d8a1bb648e10b6714">Chapter 1</a>, <span class="strong"><em class="calibre14">First Look at Ionic</em></span>. Make sure you run this command from the root directory of your LTA app project.</p><p class="calibre10">If you have done this correctly, you should see a list of our tourist destinations as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00043.jpeg" alt="Retrieving the data with the $http service" class="calibre12"/></div><p class="calibre13"> </p></div></div></div></div></div></div>
<div class="book" title="Summary" id="PNV61-798adc86542b445d8a1bb648e10b6714"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch05lvl1sec20" class="calibre1"/>Summary</h1></div></div></div><p class="calibre10">In this chapter, we learned how to create an Ionic application based on the side menu template. We used this knowledge to create our London Tourist Application. We also had a look at the code that makes up an Ionic side menu template and learned about the building block elements of a side menu application. We rounded up by querying some data via Ajax using the Angular <code class="email">$http</code> service and rendered our tourist destinations.</p><p class="calibre10">In the next chapter, we will extend our existing application and use some more complex Ionic components to do some really cool stuff.</p></div></body></html>