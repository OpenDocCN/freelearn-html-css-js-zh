<html><head></head><body>
<div id="_idContainer040">
<h1 class="chapter-number" id="_idParaDest-64"><a id="_idTextAnchor063"/><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 id="_idParaDest-65"><a id="_idTextAnchor064"/><span class="koboSpan" id="kobo.2.1">Ensuring Framework Usability and Quality</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Continuing on the theme of framework architecture from the previous chapter, we will begin to look at the more architectural aspects of JavaScript frameworks. </span><span class="koboSpan" id="kobo.3.2">While technical architecture plays the core role and provides the guts of the framework, there are additional pieces of system architecture that engineers can add so that the project has a higher grade of usability and quality. </span><span class="koboSpan" id="kobo.3.3">As we mainly specialize in JavaScript projects, we will find a variety of tools that help us focus on quality. </span><span class="koboSpan" id="kobo.3.4">These tools are often built with JavaScript, but they also integrate with other systems, making it easier for those familiar with the language to cherish </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">the benefits.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">Supporting the technical usability of a framework is a series of development quality and usability patterns. </span><span class="koboSpan" id="kobo.5.2">These include the additional infrastructure that is used as part of framework development and framework usage. </span><span class="koboSpan" id="kobo.5.3">Generally, we look at these components as tools that improve our framework’s life cycle. </span><span class="koboSpan" id="kobo.5.4">First are the techniques that ensure the framework’s usability, for framework authors, contributors, and users. </span><span class="koboSpan" id="kobo.5.5">Second is the supporting infrastructure, such as documentation and many types </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">of tests.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">We are going to explore these important topics in this chapter, focusing on development support patterns that help us build frameworks. </span><span class="koboSpan" id="kobo.7.2">Just like the technical architectures, these skills and tools can be applied while building any type of JavaScript framework. </span><span class="koboSpan" id="kobo.7.3">This chapter’s topics include exploring </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.9.1">Framework documentation</span></strong><span class="koboSpan" id="kobo.10.1"> – a set of written or generated materials that provide information on framework features and how to utilize the framework for new projects. </span><span class="koboSpan" id="kobo.10.2">To learn from the best, in this section, we will take a look at how other JavaScript frameworks produce public and </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">internal documentation.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.12.1">Variety of framework tests</span></strong><span class="koboSpan" id="kobo.13.1"> – used extensively to check the correctness of the framework using different types of tooling, such as unit tests, end-to-end tests, and more. </span><span class="koboSpan" id="kobo.13.2">Focusing further on JavaScript projects, this section explores the testing abilities of </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">framework projects.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.15.1">Development tooling</span></strong><span class="koboSpan" id="kobo.16.1"> – external tools that help with the development process. </span><span class="koboSpan" id="kobo.16.2">This includes additional configurations and tooling that assist with the internal workflow of the framework, such as continuous integration, source control enhancements, and development tweaks. </span><span class="koboSpan" id="kobo.16.3">In the upcoming sections, we will see what type of developer tools are used by JavaScript projects such as Vue.js </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">and Nest.js.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.18.1">Generic framework structure</span></strong><span class="koboSpan" id="kobo.19.1"> – understanding how we can create our own framework structure based on lessons from other open source framework architectures and patterns that we have seen in the book so far. </span><span class="koboSpan" id="kobo.19.2">This will give us a good outline of how authors organize the JavaScript framework code in </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">large projects.</span></span></li>
</ul>
<h1 id="_idParaDest-66"><a id="_idTextAnchor065"/><span class="koboSpan" id="kobo.21.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.22.1">You can find the resources for this chapter in the book’s repository: </span><a href="https://github.com/PacktPublishing/Building-Your-Own-JavaScript-Framework"><span class="koboSpan" id="kobo.23.1">https://github.com/PacktPublishing/Building-Your-Own-JavaScript-Framework</span></a><span class="koboSpan" id="kobo.24.1">. </span><span class="koboSpan" id="kobo.24.2">To make it easier to interact with the practical portion of this chapter, use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.25.1">chapter4</span></strong><span class="koboSpan" id="kobo.26.1"> directory. </span><span class="koboSpan" id="kobo.26.2">The interactive script will make it easier for you to run the samples from this chapter. </span><span class="koboSpan" id="kobo.26.3">It works as follows from your command prompt or terminal window on </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">your machine:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.28.1">
&gt; npm install
...
</span><span class="koboSpan" id="kobo.28.2">&gt; npm start
Welcome to Chapter 4!
</span><span class="koboSpan" id="kobo.28.3">? </span><span class="koboSpan" id="kobo.28.4">Select the demo to run: (Use arrow keys)
&gt; Next.js with Tailwind CSS
  Practical Docus.dev example</span></pre>
<p><span class="koboSpan" id="kobo.29.1">As with other chapters, the code in the repository is designed to work in operating systems that can run the Node.js runtime, such as Windows, macOS, and most variants </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">of Linux.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.31.1">JavaScript testing refresher</span></p>
<p class="callout"><span class="koboSpan" id="kobo.32.1">In this chapter, we will be discussing topics related to JavaScript testing. </span><span class="koboSpan" id="kobo.32.2">If you require a refresher or additional resources to give you in-depth information on various types of testing techniques, then check out additional Packt publications </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">at </span></span><a href="http://subscription.packtpub.com/search?query=javascript+testing"><span class="No-Break"><span class="koboSpan" id="kobo.34.1">subscription.packtpub.com/search?query=javascript+testing</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.35.1">.</span></span></p>
<h1 id="_idParaDest-67"><a id="_idTextAnchor066"/><span class="koboSpan" id="kobo.36.1">Development support</span></h1>
<p><span class="koboSpan" id="kobo.37.1">Let's dive into a series </span><a id="_idIndexMarker337"/><span class="koboSpan" id="kobo.38.1">of techniques and tools that enable developers to build quality frameworks focused on usability and ease of use. </span><span class="koboSpan" id="kobo.38.2">Learning and utilizing these types of development support strategies will help us with our framework development, making our projects more usable in internal (work projects) or public contexts (open source/publicly </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">published projects).</span></span></p>
<p><span class="koboSpan" id="kobo.40.1">Some of these development methodologies and skills are not specific to JavaScript framework development; they are used across many JavaScript and web application development undertakings. </span><span class="koboSpan" id="kobo.40.2">However, in the context of framework development, the approach to these tooling and usability patterns is different from a regular application project. </span><span class="koboSpan" id="kobo.40.3">For example, a framework might have a particular expanded set of tests that ensures that new features and changes do not break the existing applications that use it. </span><span class="koboSpan" id="kobo.40.4">This type of extended testing is a particular case that only applies to framework projects and not </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">application projects.</span></span></p>
<p><span class="koboSpan" id="kobo.42.1">In addition, a framework may focus more on technical design benchmarking and compatibility testing, supporting a variety of use cases. </span><span class="koboSpan" id="kobo.42.2">A lot of this comes from the requirements of the framework consumers </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">and stakeholders.</span></span></p>
<p><span class="koboSpan" id="kobo.44.1">In the </span><em class="italic"><span class="koboSpan" id="kobo.45.1">Core APIs</span></em><span class="koboSpan" id="kobo.46.1"> section of </span><a href="B19014_03.xhtml#_idTextAnchor051"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.47.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.48.1">, we saw examples of interfaces and features, such as </span><em class="italic"><span class="koboSpan" id="kobo.49.1">dependency injection</span></em><span class="koboSpan" id="kobo.50.1">. </span><span class="koboSpan" id="kobo.50.2">These</span><a id="_idIndexMarker338"/><span class="koboSpan" id="kobo.51.1"> interfaces are designed to empower framework users with their flexibility and feature set. </span><span class="koboSpan" id="kobo.51.2">However, these interfaces need to be documented to be accessible to the developers. </span><span class="koboSpan" id="kobo.51.3">Otherwise, even if the framework interface is simple enough or powerful but not discoverable or explained, it probably won’t be utilized by users. </span><span class="koboSpan" id="kobo.51.4">These interfaces also need to be thoroughly tested, in isolation and as part of a greater system. </span><span class="koboSpan" id="kobo.51.5">Finally, we need various types of infrastructure to enable this process of testing, maintenance, and documentation. </span><span class="koboSpan" id="kobo.51.6">Luckily, there are many existing solutions that make framework development and maintenance much easier through the tools provided by the greater JavaScript community and external </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">software services.</span></span></p>
<p><span class="koboSpan" id="kobo.53.1">Let us focus on the three categories of usability and quality patterns that will help us build a </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">great framework:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.55.1">Documentation</span></strong><span class="koboSpan" id="kobo.56.1"> – a collection </span><a id="_idIndexMarker339"/><span class="koboSpan" id="kobo.57.1">of materials targeting different framework stakeholders. </span><span class="koboSpan" id="kobo.57.2">These could be generated or written by the framework’s developers. </span><span class="koboSpan" id="kobo.57.3">This reference can also be internal, showcasing the design decisions and the </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">technical architecture.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.59.1">Framework testing</span></strong><span class="koboSpan" id="kobo.60.1"> – the testing infrastructure is crucial to development, feature set, and maintenance as they ensure framework quality. </span><span class="koboSpan" id="kobo.60.2">This includes using a variety of tools, such as unit, end-to-end, and </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">integration testing.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.62.1">Development tooling</span></strong><span class="koboSpan" id="kobo.63.1"> – the supplementary tools that improve the internal workflow of developers. </span><span class="koboSpan" id="kobo.63.2">The tools incorporate technologies that simplify working with the project. </span><span class="koboSpan" id="kobo.63.3">They do this by introducing processes such as source control improvements, continuous integration, </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">and others.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.65.1">Each category of </span><a id="_idIndexMarker340"/><span class="koboSpan" id="kobo.66.1">these patterns has several subtypes. </span><span class="koboSpan" id="kobo.66.2">In most cases, multiple existing frameworks rely on these types of techniques in their projects. </span><span class="koboSpan" id="kobo.66.3">We are going to get into an in-depth look at those patterns in </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">this chapter.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.68.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.69.1">.1</span></em><span class="koboSpan" id="kobo.70.1"> presents a detailed outlook at an assortment of documentation kinds, types of tests, and additional tooling that is used by JavaScript </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">frameworks today:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-3">
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.72.1">Documentation</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.73.1">Framework testing</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.74.1">Development tooling</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.75.1">Public API</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.76.1">Unit tests</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.77.1">Continuous integration</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.78.1">Examples</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.79.1">Integration tests</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.80.1">Source control</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.81.1">Internal documentation</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.82.1">End-to-end tests</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.83.1">Package configuration</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.84.1">Benchmarks</span></span></p>
</td>
<td class="No-Table-Style"/>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.85.1">Figure 4.1: Subtypes of tools and patterns utilized in frameworks</span></p>
<p><span class="koboSpan" id="kobo.86.1">We begin by looking</span><a id="_idIndexMarker341"/><span class="koboSpan" id="kobo.87.1"> at the documentation, something that our framework cannot </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">survive without.</span></span></p>
<h2 id="_idParaDest-68"><a id="_idTextAnchor067"/><span class="koboSpan" id="kobo.89.1">Documentation</span></h2>
<p><span class="koboSpan" id="kobo.90.1">Writing up documentation is </span><a id="_idIndexMarker342"/><span class="koboSpan" id="kobo.91.1">one of the most crucial things for framework adaptation and usability. </span><span class="koboSpan" id="kobo.91.2">The reference materials produced can enable developers to properly utilize the provided tools. </span><span class="koboSpan" id="kobo.91.3">Framework developers spent a lot of time writing and tweaking their documentation, focusing on providing the most detailed and simple explanations of the components of the framework function. </span><span class="koboSpan" id="kobo.91.4">With a typical web application, you would already have some existing documentation on how to run it and configure parts of it. </span><span class="koboSpan" id="kobo.91.5">However, while developing a framework, a lot more documentation is required, consisting of API methods, learning materials, and other solutions to make it easier to utilize the framework to its maximum potential. </span><span class="koboSpan" id="kobo.91.6">Today, most frameworks invest in showcasing the framework’s API methods, writing up articles that help developers learn the framework from scratch, creating interactive tutorials, and providing detailed examples demonstrating how a framework can approach the challenges of a particular </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">feature set.</span></span></p>
<p><span class="koboSpan" id="kobo.93.1">A great role model example of documentation comes from the creators of React – with the recently launched new learning platform at </span><a href="https://react.dev"><span class="koboSpan" id="kobo.94.1">https://react.dev</span></a><span class="koboSpan" id="kobo.95.1">, which encourages the use of the library across the ecosystem and within frameworks. </span><span class="koboSpan" id="kobo.95.2">To help encourage adaption and successful knowledge transfer, their focus was on creating a learning environment alongside the </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">API reference.</span></span></p>
<p><span class="koboSpan" id="kobo.97.1">As you begin to build out your framework, keep in mind that providing a list of programmatic APIs is not enough. </span><span class="koboSpan" id="kobo.97.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.98.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.99.1">.2</span></em><span class="koboSpan" id="kobo.100.1">, we can see excellent examples of valuable </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">reference material:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer033">
<span class="koboSpan" id="kobo.102.1"><img alt="Figure 4.2: Learning React documentation" src="image/Figure_4.2_B19014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.103.1">Figure 4.2: Learning React documentation</span></p>
<p><span class="koboSpan" id="kobo.104.1">Even though React is a library, there is still much we can learn about how the documentation is structured for this project. </span><span class="koboSpan" id="kobo.104.2">It consists of several vital items. </span><span class="koboSpan" id="kobo.104.3">The installation guide comes first and foremost; this can consist of package installation guidelines and the ability to scaffold a new project using a framework. </span><span class="koboSpan" id="kobo.104.4">Then, the existing or potential framework user is presented with a tutorial and an explanation of the thinking model behind the tool. </span><span class="koboSpan" id="kobo.104.5">Lastly, a series of articles explains the most important topics that a developer needs to know about the tool they are about </span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">to use.</span></span></p>
<p><span class="koboSpan" id="kobo.106.1">Your framework should aspire to a similar form of learning documentation. </span><span class="koboSpan" id="kobo.106.2">Even in cases of internal </span><a id="_idIndexMarker343"/><span class="koboSpan" id="kobo.107.1">framework development, you or your team should still document and create learning reference material to encourage proper usage of your framework procedures. </span><span class="koboSpan" id="kobo.107.2">This kind of approach leads us to the next important part of documentation – </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">the API.</span></span></p>
<h3><span class="koboSpan" id="kobo.109.1">Public API</span></h3>
<p><span class="koboSpan" id="kobo.110.1">In </span><a href="B19014_03.xhtml#_idTextAnchor051"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.111.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.112.1">, as part of </span><a id="_idIndexMarker344"/><span class="koboSpan" id="kobo.113.1">exploring framework packages, we have examined the framework entry points. </span><span class="koboSpan" id="kobo.113.2">Documentation serves as another type of entry point; developers interact with the framework by utilizing the provided documentation. </span><span class="koboSpan" id="kobo.113.3">Primarily, this interaction can be facilitated by</span><a id="_idIndexMarker345"/><span class="koboSpan" id="kobo.114.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">public API</span></strong><span class="koboSpan" id="kobo.116.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">API reference</span></strong><span class="koboSpan" id="kobo.118.1">, created</span><a id="_idIndexMarker346"/><span class="koboSpan" id="kobo.119.1"> from the framework’s code and </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">its interfaces.</span></span></p>
<p><span class="koboSpan" id="kobo.121.1">Every framework we have seen in this book has an API reference published alongside the framework. </span><span class="koboSpan" id="kobo.121.2">This type of API reference can be statically or dynamically generated. </span><span class="koboSpan" id="kobo.121.3">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.122.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.123.1">.3</span></em><span class="koboSpan" id="kobo.124.1">, we see an example of such documentation; the Vue.js docs are generated from the </span><a href="http://github.com/vuejs/docs"><span class="koboSpan" id="kobo.125.1">github.com/vuejs/docs</span></a><span class="koboSpan" id="kobo.126.1"> repository </span><a id="_idIndexMarker347"/><span class="koboSpan" id="kobo.127.1">and assembled using a static </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">site generator:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer034">
<span class="koboSpan" id="kobo.129.1"><img alt="Figure 4.3: Part of the Vue.js API reference" src="image/Figure_4.3_B19014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.130.1">Figure 4.3: Part of the Vue.js API reference</span></p>
<p><span class="koboSpan" id="kobo.131.1">There are many open source projects that can make it easier for you to generate and maintain </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">documentation files:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.133.1">Docusaurus</span></strong><span class="koboSpan" id="kobo.134.1"> (</span><a href="http://docusaurus.io"><span class="koboSpan" id="kobo.135.1">docusaurus.io</span></a><span class="koboSpan" id="kobo.136.1">) – a static</span><a id="_idIndexMarker348"/><span class="koboSpan" id="kobo.137.1"> documentation </span><a id="_idIndexMarker349"/><span class="koboSpan" id="kobo.138.1">site generator. </span><span class="koboSpan" id="kobo.138.2">Specifically for frameworks, it provides features such as search, versioning according to framework releases, </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">and more.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.140.1">MarkDoc</span></strong><span class="koboSpan" id="kobo.141.1"> (</span><a href="http://markdoc.dev"><span class="koboSpan" id="kobo.142.1">markdoc.dev</span></a><span class="koboSpan" id="kobo.143.1">) – another open</span><a id="_idIndexMarker350"/><span class="koboSpan" id="kobo.144.1"> source for custom documentation sites. </span><span class="koboSpan" id="kobo.144.2">It is extensible and aims to provide the best documentation authoring and </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">publishing experience.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.146.1">Docus</span></strong><span class="koboSpan" id="kobo.147.1"> (</span><a href="http://docus.dev"><span class="koboSpan" id="kobo.148.1">docus.dev</span></a><span class="koboSpan" id="kobo.149.1">) – a documentation</span><a id="_idIndexMarker351"/><span class="koboSpan" id="kobo.150.1"> generator that utilizes familiar to us frameworks such as Nuxt.js and Vue.js. </span><span class="koboSpan" id="kobo.150.2">Supports Markdown syntax and zero-configuration deploys across </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">many services.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.152.1">TypeDoc</span></strong><span class="koboSpan" id="kobo.153.1"> (</span><a href="http://typedoc.org"><span class="koboSpan" id="kobo.154.1">typedoc.org</span></a><span class="koboSpan" id="kobo.155.1">) – a documentation </span><a id="_idIndexMarker352"/><span class="koboSpan" id="kobo.156.1">generator for TypeScript source code. </span><span class="koboSpan" id="kobo.156.2">Creates static sites based on the comments inside of the TypeScript files. </span><span class="koboSpan" id="kobo.156.3">The tool also has the ability to output the parsed source as a JSON file. </span><span class="koboSpan" id="kobo.156.4">A similar tool, </span><strong class="bold"><span class="koboSpan" id="kobo.157.1">JSDoc</span></strong><span class="koboSpan" id="kobo.158.1"> (</span><a href="http://jsdoc.app"><span class="koboSpan" id="kobo.159.1">jsdoc.app</span></a><span class="koboSpan" id="kobo.160.1">), is also </span><a id="_idIndexMarker353"/><span class="koboSpan" id="kobo.161.1">available for pure </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">JavaScript projects.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.163.1">TSDoc</span></strong><span class="koboSpan" id="kobo.164.1"> (</span><a href="http://tsdoc.org"><span class="koboSpan" id="kobo.165.1">tsdoc.org</span></a><span class="koboSpan" id="kobo.166.1">) – a similar </span><a id="_idIndexMarker354"/><span class="koboSpan" id="kobo.167.1">project to TypeDoc, backed by Microsoft. </span><span class="koboSpan" id="kobo.167.2">It focuses on standardization efforts around documentation generators by providing an engine</span><a id="_idIndexMarker355"/><span class="koboSpan" id="kobo.168.1"> for other tools to generate comment-based documentation. </span><span class="koboSpan" id="kobo.168.2">Has integrations with several other projects, such as ESLint and Visual </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">Studio Code.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.170.1">Using one of the tools</span><a id="_idIndexMarker356"/><span class="koboSpan" id="kobo.171.1"> we just listed might be going overboard if your framework is just starting up, but given that documentation is critically necessary to the framework’s usability, you need to make sure to make it easier for yourself to maintain readable and clean documentation. </span><span class="koboSpan" id="kobo.171.2">You can also draw inspiration from a larger and more complex framework such as Angular. </span><span class="koboSpan" id="kobo.171.3">The project already provides the in-depth API reference (</span><a href="http://angular.io/api"><span class="koboSpan" id="kobo.172.1">angular.io/api</span></a><span class="koboSpan" id="kobo.173.1">), but in addition, the authors also deliver an exhaustive reference to concepts, error types, and diagnostics. </span><span class="koboSpan" id="kobo.173.2">All of these can be found in the </span><strong class="bold"><span class="koboSpan" id="kobo.174.1">guides</span></strong><span class="koboSpan" id="kobo.175.1"> section (e.g., </span><a href="http://angular.io/guide/file-structure"><span class="koboSpan" id="kobo.176.1">angular.io/guide/file-structure</span></a><span class="koboSpan" id="kobo.177.1">) of the </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">Angular website.</span></span></p>
<p><span class="koboSpan" id="kobo.179.1">As you develop your framework, you will likely introduce drastic breaking changes as you go along from version to version. </span><span class="koboSpan" id="kobo.179.2">If you are in a context where you already have existing framework consumers, then you should spend the time creating a migration reference document. </span><span class="koboSpan" id="kobo.179.3">Good migration guidelines help your stakeholders keep up to date with the changes and use the latest fixes. </span><span class="koboSpan" id="kobo.179.4">Some examples of good migration guides include the Electron </span><em class="italic"><span class="koboSpan" id="kobo.180.1">Breaking Changes</span></em><span class="koboSpan" id="kobo.181.1"> guides (</span><a href="http://electronjs.org/docs/latest/breaking-changes"><span class="koboSpan" id="kobo.182.1">electronjs.org/docs/latest/breaking-changes</span></a><span class="koboSpan" id="kobo.183.1">) and the Express migration </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">overview (</span></span><a href="http://expressjs.com/en/guide/migrating-5.html"><span class="No-Break"><span class="koboSpan" id="kobo.185.1">expressjs.com/en/guide/migrating-5.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.186.1">).</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.187.1">Practical use of documentation tools</span></p>
<p class="callout"><span class="koboSpan" id="kobo.188.1">The repository directory for this chapter has an example of one of the documentation tools in action. </span><span class="koboSpan" id="kobo.188.2">In this case, the example uses Docus, with the Nuxt.js framework powering the behind-the-scenes infrastructure of the project. </span><span class="koboSpan" id="kobo.188.3">You can try this out on your own computer by running the interactive script in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">chapter4</span></strong><span class="koboSpan" id="kobo.190.1"> directory or manually navigating to </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">practical-docus</span></strong><span class="koboSpan" id="kobo.192.1"> and running </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">npm install</span></strong><span class="koboSpan" id="kobo.194.1">, and then </span><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">npm run dev</span></strong><span class="koboSpan" id="kobo.196.1">. </span><span class="koboSpan" id="kobo.196.2">The documentation site will run on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">3001</span></strong><span class="koboSpan" id="kobo.198.1"> and you can live edit and interact with the docs tooling by editing files in </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">the directory.</span></span></p>
<p><span class="koboSpan" id="kobo.200.1">Basic documentation can improve your framework experience greatly, but there is more you can do to make adaptation more effortless. </span><span class="koboSpan" id="kobo.200.2">In the next section, we will focus on the importance of providing</span><a id="_idIndexMarker357"/><span class="koboSpan" id="kobo.201.1"> examples of framework usage. </span><span class="koboSpan" id="kobo.201.2">These meaningful resources can highlight the strong elements of your framework and ease of integration with </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">other systems.</span></span></p>
<h3><span class="koboSpan" id="kobo.203.1">Examples</span></h3>
<p><span class="koboSpan" id="kobo.204.1">Providing examples</span><a id="_idIndexMarker358"/><span class="koboSpan" id="kobo.205.1"> drastically helps reduce one of the most challenging aspects of adapting frameworks – the learning curve. </span><span class="koboSpan" id="kobo.205.2">To encourage adoption and reduce friction, framework developers invest time to produce examples of framework usage. </span><span class="koboSpan" id="kobo.205.3">These could be included as part of the reference documentation or provided alongside the framework source code. </span><span class="koboSpan" id="kobo.205.4">If you are working on an internal framework, investing in examples is still beneficial. </span><span class="koboSpan" id="kobo.205.5">If your project will be used by many internal teams or new hires, maintaining a base case of examples can reduce the number of questions </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">and confusion.</span></span></p>
<p><span class="koboSpan" id="kobo.207.1">As part of my experience contributing to JavaScript testing frameworks, one of the most effective development investments was my focus on creating integration guides and developing examples. </span><span class="koboSpan" id="kobo.207.2">This was particularly important for a testing framework project, as the availability of these resources made it easier for developers to add the testing framework into their systems. </span><span class="koboSpan" id="kobo.207.3">It also showcased the maturity of the project, showing that it is capable of working with many different systems. </span><span class="koboSpan" id="kobo.207.4">It’s not just my experience, almost all JavaScript frameworks concentrate on providing instantly-runnable samples. </span><span class="koboSpan" id="kobo.207.5">These projects utilize tools</span><a id="_idIndexMarker359"/><span class="koboSpan" id="kobo.208.1"> such as </span><strong class="bold"><span class="koboSpan" id="kobo.209.1">StackBlitz</span></strong><span class="koboSpan" id="kobo.210.1"> (</span><a href="http://stackblitz.com"><span class="koboSpan" id="kobo.211.1">stackblitz.com</span></a><span class="koboSpan" id="kobo.212.1">) and </span><strong class="bold"><span class="koboSpan" id="kobo.213.1">CodePen</span></strong><span class="koboSpan" id="kobo.214.1"> (</span><a href="http://codepen.io"><span class="koboSpan" id="kobo.215.1">codepen.io</span></a><span class="koboSpan" id="kobo.216.1">) to enable</span><a id="_idIndexMarker360"/><span class="koboSpan" id="kobo.217.1"> potential developers to get into the framework environment within seconds. </span><span class="koboSpan" id="kobo.217.2">For example, navigating to </span><a href="http://stackblitz.com/fork/angular"><span class="koboSpan" id="kobo.218.1">stackblitz.com/fork/angular</span></a><span class="koboSpan" id="kobo.219.1"> presents you with a ready-to-go Angular </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">framework application.</span></span></p>
<p><span class="koboSpan" id="kobo.221.1">For more inspiration, Next.js takes the approach to examples thoughtfully; the framework maintains over 50 samples at </span><a href="http://github.com/vercel/next.js/tree/canary/examples"><span class="koboSpan" id="kobo.222.1">github.com/vercel/next.js/tree/canary/examples</span></a><span class="koboSpan" id="kobo.223.1">. </span><span class="koboSpan" id="kobo.223.2">These include showcases of GraphQL support, CMS and blog use cases, integrations with other tooling, and deployment targets. </span><span class="koboSpan" id="kobo.223.3">To quickly enable users to run the samples, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">create-next-app</span></strong><span class="koboSpan" id="kobo.225.1"> CLI supports the </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">example</span></strong><span class="koboSpan" id="kobo.227.1"> argument to scaffold based on </span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">the sample:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.229.1">
npx create-next-app --example with-tailwindcss-emotion next-example-app</span></pre>
<p><span class="koboSpan" id="kobo.230.1">When developing examples for your framework, keep in mind that you will later need to maintain all the examples you create, just like the documentation reference. </span><span class="koboSpan" id="kobo.230.2">If some example code gets out of date and no longer functions as it should, then it will cause more burden for </span><a id="_idIndexMarker361"/><span class="koboSpan" id="kobo.231.1">you as the </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">framework maintainer.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.233.1">Practical example with Next.js</span></p>
<p class="callout"><span class="koboSpan" id="kobo.234.1">You can check out this</span><a id="_idIndexMarker362"/><span class="koboSpan" id="kobo.235.1"> example in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">chapter4</span></strong><span class="koboSpan" id="kobo.237.1"> directory in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.238.1">next-example-app</span></strong><span class="koboSpan" id="kobo.239.1"> directory. </span><span class="koboSpan" id="kobo.239.2">Follow the </span><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">README.md</span></strong><span class="koboSpan" id="kobo.241.1"> file for guidelines on setting up the Firebase project. </span><span class="koboSpan" id="kobo.241.2">The project requires Firebase project credentials to run properly. </span><span class="koboSpan" id="kobo.241.3">To initialize the Next.js app, run </span><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">npm install</span></strong><span class="koboSpan" id="kobo.243.1"> and then </span><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">npm run dev</span></strong><span class="koboSpan" id="kobo.245.1">. </span><span class="koboSpan" id="kobo.245.2">You can also use the interactive script directly from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">chapter4</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.247.1"> directory.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.248.1">To open the application, use the localhost URL, which will likely be </span><strong class="source-inline"><span class="koboSpan" id="kobo.249.1">http://localhost:3000</span></strong><span class="koboSpan" id="kobo.250.1">. </span><span class="koboSpan" id="kobo.250.2">Follow the terminal output for instructions. </span><span class="koboSpan" id="kobo.250.3">To edit the files, open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">next-example-app</span></strong><span class="koboSpan" id="kobo.252.1"> project directory with Visual </span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">Studio Code.</span></span></p>
<p><span class="koboSpan" id="kobo.254.1">Depending on the nature of your framework, you can use the JavaScript runtime tools to create a playground environment for your framework. </span><span class="koboSpan" id="kobo.254.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.255.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.256.1">.4</span></em><span class="koboSpan" id="kobo.257.1">, we see a sample of the Vue.js component playground; this kind of environment takes the idea of </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">examples further:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer035">
<span class="koboSpan" id="kobo.259.1"><img alt="Figure 4.4: Vue.js single-file component playground" src="image/Figure_4.4_B19014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.260.1">Figure 4.4: Vue.js single-file component playground</span></p>
<p><span class="koboSpan" id="kobo.261.1">With every “playground” example, you can teach the framework using the most basic features to more advanced </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">use cases.</span></span></p>
<p><span class="koboSpan" id="kobo.263.1">As you are starting up with your own framework, it is better to include your examples as part of your framework repository. </span><span class="koboSpan" id="kobo.263.2">To lessen the maintenance burden, make sure you execute your examples as part of your testing infrastructure (more on that later in </span><a href="B19014_10.xhtml#_idTextAnchor173"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.264.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.265.1">, related to</span><a id="_idIndexMarker363"/><span class="koboSpan" id="kobo.266.1"> framework maintenance). </span><span class="koboSpan" id="kobo.266.2">If you are working on the framework alone or with a small team, the usage of included examples in your framework can greatly enhance the development process, helping you </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">iterate quickly.</span></span></p>
<h3><span class="koboSpan" id="kobo.268.1">Internal documentation</span></h3>
<p><span class="koboSpan" id="kobo.269.1">The internal </span><a id="_idIndexMarker364"/><span class="koboSpan" id="kobo.270.1">documentation is all about helping the framework authors to continue developing the framework. </span><span class="koboSpan" id="kobo.270.2">Even if you are the only author of the framework, it is still useful to maintain internal documentation, even for your own sake. </span><span class="koboSpan" id="kobo.270.3">This way, you can look back on the code and design decisions from the past and make it easier to make updates to your project. </span><span class="koboSpan" id="kobo.270.4">Primarily, this type of documentation should not be consumed by the framework users or stakeholders. </span><span class="koboSpan" id="kobo.270.5">However, it can still be useful to expose these materials for debugging </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">use cases.</span></span></p>
<p><span class="koboSpan" id="kobo.272.1">The internal documentation can potentially include detailed interfaces of internal modules. </span><span class="koboSpan" id="kobo.272.2">It could potentially describe the design principles of the internal implementation. </span><span class="koboSpan" id="kobo.272.3">For instance, the Nuxt.js framework combines both public-facing and internal documentation on its reference pages. </span><span class="koboSpan" id="kobo.272.4">The framework’s renderer, builders, generator, and other classes are described in the Internals Glossary (</span><a href="http://github.com/nuxt/nuxtjs.org/tree/main/content/en/docs/6.internals-glossary"><span class="koboSpan" id="kobo.273.1">github.com/nuxt/nuxtjs.org/tree/main/content/en/docs/6.internals-glossary</span></a><span class="koboSpan" id="kobo.274.1">). </span><span class="koboSpan" id="kobo.274.2">For instance, Nuxt provides its own module system (</span><a href="http://nuxtjs.org/docs/directory-structure/modules"><span class="koboSpan" id="kobo.275.1">nuxtjs.org/docs/directory-structure/modules</span></a><span class="koboSpan" id="kobo.276.1">) to extend the framework functionality, and the internals of that feature are supported by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">ModuleContainer</span></strong><span class="koboSpan" id="kobo.278.1"> class. </span><span class="koboSpan" id="kobo.278.2">This class is part of the framework’s internals and should still be documented. </span><span class="koboSpan" id="kobo.278.3">It also enables framework plugin development for external developers to understand and extend </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">the framework.</span></span></p>
<p><span class="koboSpan" id="kobo.280.1">Another example of using this type of documentation for the framework’s benefit can be seen in Vue.js. </span><span class="koboSpan" id="kobo.280.2">The framework utilizes the TSDoc tooling internally to ensure the specification of its functions, such as the shared </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">utility methods.</span></span></p>
<p><span class="koboSpan" id="kobo.282.1">The following code taken from the developer tools repository of the framework (</span><a href="http://github.com/vuejs/devtools/blob/main/packages/shared-utils/src/util.ts"><span class="koboSpan" id="kobo.283.1">github.com/vuejs/devtools/blob/main/packages/shared-utils/src/util.ts</span></a><span class="koboSpan" id="kobo.284.1">) is a simpler example of documentation annotations that are available to framework developers while browsing the file, can later be exported to an external document, or can be previewed by an IDE </span><a id="_idIndexMarker365"/><span class="koboSpan" id="kobo.285.1">while accessing this </span><span class="No-Break"><span class="koboSpan" id="kobo.286.1">helper function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.287.1">
/**
 * Compares two values
 * @param {*} value Mixed type value that will be cast to string
 * @param {string} searchTerm Search string
 * @returns {boolean} Search match
 */
function compare (value, searchTerm) {
  return ('' + value).toLowerCase().indexOf(searchTerm) !== -1
}</span></pre>
<p><strong class="bold"><span class="koboSpan" id="kobo.288.1">Contribution guidelines</span></strong><span class="koboSpan" id="kobo.289.1"> are also</span><a id="_idIndexMarker366"/><span class="koboSpan" id="kobo.290.1"> part of this type of internal documentation. </span><span class="koboSpan" id="kobo.290.2">For both open and closed frameworks, you will potentially have someone who wants to make changes or contribute to the framework, either helping you fix issues or introducing new features. </span><span class="koboSpan" id="kobo.290.3">Contribution documentation helps enable this, providing the steps to quickly write and test new framework changes. </span><span class="koboSpan" id="kobo.290.4">As part of the contribution instruction, it is often important to list several important pieces </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">of information:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.292.1">First, how to modify the framework, build it, and test it. </span><span class="koboSpan" id="kobo.292.2">This includes pointers to all the relevant scripts that make the development process </span><span class="No-Break"><span class="koboSpan" id="kobo.293.1">more approachable.</span></span></li>
<li><span class="koboSpan" id="kobo.294.1">Second, how to successfully write a patch, both in open source and internal environments. </span><span class="koboSpan" id="kobo.294.2">This includes following the source control guidelines and commit </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">history rules.</span></span></li>
<li><span class="koboSpan" id="kobo.296.1">To make framework contributions easier, this type of documentation should mention the coding rules around public and internal APIs, file formatting, and other potential </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">style guides.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.298.1">To provide some</span><a id="_idIndexMarker367"/><span class="koboSpan" id="kobo.299.1"> examples, Ember.js has a page on their contribution guidelines at </span><a href="http://guides.emberjs.com/release/contributing"><span class="koboSpan" id="kobo.300.1">guides.emberjs.com/release/contributing</span></a><span class="koboSpan" id="kobo.301.1">, and other frameworks such as Angular include a </span><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">CONTRIBUTING.md</span></strong><span class="koboSpan" id="kobo.303.1"> file in their repositories </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">at </span></span><a href="http://github.com/angular/angular/blob/main/CONTRIBUTING.md"><span class="No-Break"><span class="koboSpan" id="kobo.305.1">github.com/angular/angular/blob/main/CONTRIBUTING.md</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.306.1">.</span></span></p>
<h2 id="_idParaDest-69"><a id="_idTextAnchor068"/><span class="koboSpan" id="kobo.307.1">Framework testing</span></h2>
<p><span class="koboSpan" id="kobo.308.1">Just like any software</span><a id="_idIndexMarker368"/><span class="koboSpan" id="kobo.309.1"> project, frameworks require a number of tests to ensure that the framework is functioning as intended. </span><span class="koboSpan" id="kobo.309.2">In the framework context, you will find much in-depth testing focused on correctness, performance, and special framework use cases that need to be handled for all possible usage scenarios. </span><span class="koboSpan" id="kobo.309.3">We have seen examples of testing frameworks in the </span><em class="italic"><span class="koboSpan" id="kobo.310.1">Testing frameworks</span></em><span class="koboSpan" id="kobo.311.1"> section of </span><a href="B19014_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.312.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.313.1">; those can be used from within our frameworks to simplify the testing workflow. </span><span class="koboSpan" id="kobo.313.2">In this section, we are going to look at what techniques JavaScript frameworks use internally to ensure that the final framework product is of </span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">high quality.</span></span></p>
<h3><span class="koboSpan" id="kobo.315.1">Unit tests</span></h3>
<p><span class="koboSpan" id="kobo.316.1">Just like most</span><a id="_idIndexMarker369"/><span class="koboSpan" id="kobo.317.1"> software projects, frameworks also include unit tests for their interfaces. </span><span class="koboSpan" id="kobo.317.2">They utilize a testing framework similar to the ones we have seen listed in </span><a href="B19014_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.318.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.319.1">. </span><span class="koboSpan" id="kobo.319.2">Often, you will see these types of tests called “specs” as well, meaning they are </span><em class="italic"><span class="koboSpan" id="kobo.320.1">specification tests</span></em><span class="koboSpan" id="kobo.321.1">. </span><span class="koboSpan" id="kobo.321.2">This means that, given a certain component of a framework, there is a technical specification that it should adhere to. </span><span class="koboSpan" id="kobo.321.3">In the framework context, comprehensive tests help with refactoring major components much more quickly. </span><span class="koboSpan" id="kobo.321.4">Open source frameworks also benefit from a good unit testing suite when receiving external code contributions. </span><span class="koboSpan" id="kobo.321.5">It is much easier to review and be confident in the code change when there is a vast collection of existing tests and new tests being added as part of </span><span class="No-Break"><span class="koboSpan" id="kobo.322.1">the change.</span></span></p>
<p><span class="koboSpan" id="kobo.323.1">Depending on the type of JavaScript framework, the testing environment and testing challenges can be different. </span><span class="koboSpan" id="kobo.323.2">In frameworks that target the browser, the unit testing requires mocking out browser and web APIs. </span><span class="koboSpan" id="kobo.323.3">For instance, Angular introduces several internal testing interfaces to simplify working with components that are injected into the DOM. </span><span class="koboSpan" id="kobo.323.4">Angular’s “change detection” and other DOM-related functionality use these testing interfaces to abstract away working with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.324.1">document</span></strong><span class="koboSpan" id="kobo.325.1"> object instance directly. </span><span class="koboSpan" id="kobo.325.2">For example, Angular developers create several test wrappers to make it easier to attach the framework’s</span><a id="_idIndexMarker370"/><span class="koboSpan" id="kobo.326.1"> node tree to the DOM body, as seen in </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">this function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.328.1">
export function withBody&lt;T extends Function&gt;(html: string, blockFn: T): T {
 return wrapTestFn(() =&gt; document.body, html, blockFn);
}</span></pre>
<p><span class="koboSpan" id="kobo.329.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">change_detection_spec.ts</span></strong><span class="koboSpan" id="kobo.331.1"> file relies on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">withBody</span></strong><span class="koboSpan" id="kobo.333.1"> helper from the test utilities; these utilities rely on executing many frameworks’ tests in an environment where a </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">document</span></strong><span class="koboSpan" id="kobo.335.1"> object </span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">is present.</span></span></p>
<p><span class="koboSpan" id="kobo.337.1">In backend frameworks, projects may choose to mock out or create test-only classes based on the existing interfaces. </span><span class="koboSpan" id="kobo.337.2">For instance, Nest.js has defined a </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">NoopHttpAdapter</span></strong><span class="koboSpan" id="kobo.339.1"> class (</span><a href="https://github.com/nestjs/nest/blob/master/packages/core/test/utils/noop-adapter.spec.ts"><span class="koboSpan" id="kobo.340.1">https://github.com/nestjs/nest/blob/master/packages/core/test/utils/noop-adapter.spec.ts</span></a><span class="koboSpan" id="kobo.341.1">) that extends </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">AbstractHttpAdapter</span></strong><span class="koboSpan" id="kobo.343.1">, which we have seen before in the </span><em class="italic"><span class="koboSpan" id="kobo.344.1">Backend abstraction</span></em><span class="koboSpan" id="kobo.345.1"> section of </span><a href="B19014_02.xhtml#_idTextAnchor030"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.346.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.347.1">. </span><span class="koboSpan" id="kobo.347.2">The following code shows how the testing adapter is structured to make it easier to use it in </span><span class="No-Break"><span class="koboSpan" id="kobo.348.1">framework tests:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.349.1">
export class NoopHttpAdapter extends AbstractHttpAdapter {
  constructor(instance: any) {
    super(instance);
  }
  close(): any {}
  initHttpServer(options: any): any {}
  // …
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.350.1">This </span><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">HttpAdapter</span></strong><span class="koboSpan" id="kobo.352.1"> TypeScript class is used within the framework’s specification testing to ensure that the main </span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">Application</span></strong><span class="koboSpan" id="kobo.354.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">Routing</span></strong><span class="koboSpan" id="kobo.356.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">Middleware</span></strong><span class="koboSpan" id="kobo.358.1"> classes function as </span><span class="No-Break"><span class="koboSpan" id="kobo.359.1">they should.</span></span></p>
<p><span class="koboSpan" id="kobo.360.1">While developing your JavaScript framework, ensure to unit test every new component or interface that you add. </span><span class="koboSpan" id="kobo.360.2">This process will help you in </span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">several ways:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.362.1">It will increase the code quality and help you organize your framework such that its components fit </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">better together.</span></span></li>
<li><span class="koboSpan" id="kobo.364.1">The framework development process is full of constant refactoring or changes. </span><span class="koboSpan" id="kobo.364.2">Your unit testing suite will grow as your framework grows and will increase your confidence in the changes as you </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">code along.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.366.1">Finally, ensure that your unit testing suite runs efficiently. </span><span class="koboSpan" id="kobo.366.2">For example, Vue.js uses the Vitest test runner. </span><span class="koboSpan" id="kobo.366.3">Vue has over 2,500 unit tests, which execute in about 20 seconds. </span><span class="koboSpan" id="kobo.366.4">The unit tests of your </span><a id="_idIndexMarker371"/><span class="koboSpan" id="kobo.367.1">framework should run as fast as possible to provide you with a blazing-fast feedback loop while you are busy developing new </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">framework features.</span></span></p>
<h3><span class="koboSpan" id="kobo.369.1">Integration tests</span></h3>
<p><span class="koboSpan" id="kobo.370.1">Integration tests</span><a id="_idIndexMarker372"/><span class="koboSpan" id="kobo.371.1"> are created with the purpose of testing how multiple interfaces or components of the framework fit together. </span><span class="koboSpan" id="kobo.371.2">These tests can catch issues that are not detected by unit/specification testing due to the fact that those types of tests are designed to test the component in isolation. </span><span class="koboSpan" id="kobo.371.3">Integration tests simulate the interaction between the components, making sure that the functionality fits </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">well together.</span></span></p>
<p><span class="koboSpan" id="kobo.373.1">In the context of frameworks, the internal core architecture has to fit together. </span><span class="koboSpan" id="kobo.373.2">This means the integration tests would be verifying that behavior. </span><span class="koboSpan" id="kobo.373.3">For instance, a good integration test for a full stack framework would be ensuring that a component is rendered when a particular </span><strong class="source-inline"><span class="koboSpan" id="kobo.374.1">router</span></strong><span class="koboSpan" id="kobo.375.1"> route is called to. </span><span class="koboSpan" id="kobo.375.2">This kind of test ensures that all those components are behaving </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">nicely together.</span></span></p>
<p><span class="koboSpan" id="kobo.377.1">In addition, frameworks usually have to integrate with other systems. </span><span class="koboSpan" id="kobo.377.2">This means developers also need to produce integration tests between a framework and that external system. </span><span class="koboSpan" id="kobo.377.3">For example, the Gatsby framework has integration tests (</span><a href="http://github.com/gatsbyjs/gatsby/tree/master/integration-tests"><span class="koboSpan" id="kobo.378.1">github.com/gatsbyjs/gatsby/tree/master/integration-tests</span></a><span class="koboSpan" id="kobo.379.1">) for its static-site rendering, command-line interface, and caching infrastructure. </span><span class="koboSpan" id="kobo.379.2">These tests verify the framework’s features. </span><span class="koboSpan" id="kobo.379.3">However, Gatsby also includes integration tests to verify that it works with other technologies. </span><span class="koboSpan" id="kobo.379.4">The framework has an integration test to verify compatibility with the JavaScript ESM </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">module standard.</span></span></p>
<p><span class="koboSpan" id="kobo.381.1">Writing integration tests can be challenging, as you have to verify that all sorts of interface combinations are working faultlessly together. </span><span class="koboSpan" id="kobo.381.2">Though it is an essential part of the framework </span><a id="_idIndexMarker373"/><span class="koboSpan" id="kobo.382.1">development process, this type of testing can ultimately be much more beneficial than unit testing if you are in a rush to deliver your new </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">framework project.</span></span></p>
<h3><span class="koboSpan" id="kobo.384.1">End-to-end tests</span></h3>
<p><span class="koboSpan" id="kobo.385.1">End-to-end tests</span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.386.1"> evaluate how the framework is functioning as a system overall. </span><span class="koboSpan" id="kobo.386.2">Usually, these tests simulate almost real user interaction. </span><span class="koboSpan" id="kobo.386.3">For a frontend framework, creating these tests usually means configuring one of the end-to-end testing frameworks. </span><span class="koboSpan" id="kobo.386.4">For server-side frameworks, the end-to-end tests usually simulate real requests to a server that is powered by the framework. </span><span class="koboSpan" id="kobo.386.5">Similar to its set of integration tests, Gatsby also maintains a suite</span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.387.1"> of </span><strong class="bold"><span class="koboSpan" id="kobo.388.1">end-to-end</span></strong><span class="koboSpan" id="kobo.389.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.390.1">E2E</span></strong><span class="koboSpan" id="kobo.391.1">) tests (</span><a href="http://github.com/gatsbyjs/gatsby/tree/master/e2e-tests"><span class="koboSpan" id="kobo.392.1">github.com/gatsbyjs/gatsby/tree/master/e2e-tests</span></a><span class="koboSpan" id="kobo.393.1">). </span><span class="koboSpan" id="kobo.393.2">This helps Gatsby test its full system runtimes and Gatbsy’s integration with its theming engine. </span><span class="koboSpan" id="kobo.393.3">A simpler example is Vue.js’ set of E2E tests for its </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">transition</span></strong><span class="koboSpan" id="kobo.395.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">grid</span></strong><span class="koboSpan" id="kobo.397.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">tree-view</span></strong><span class="koboSpan" id="kobo.399.1"> interfaces. </span><span class="koboSpan" id="kobo.399.2">These can be found at </span><a href="http://github.com/vuejs/core/tree/main/packages/vue/__tests__/e2e"><span class="koboSpan" id="kobo.400.1">github.com/vuejs/core/tree/main/packages/vue/__tests__/e2e</span></a><span class="koboSpan" id="kobo.401.1">. </span><span class="koboSpan" id="kobo.401.2">These tests use Puppeteer to execute commands in a headless Chrome browser, thus simulating real browser and </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">user behavior.</span></span></p>
<p><span class="koboSpan" id="kobo.403.1">An extensive E2E test suite can support the development of your framework in </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">several ways:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.405.1">Catch regressions of the whole system, such as simulating common framework commands and </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">expected functionality.</span></span></li>
<li><span class="koboSpan" id="kobo.407.1">Confirm that all components of your framework can work together as you make changes and develop </span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">new features.</span></span></li>
<li><span class="koboSpan" id="kobo.409.1">Integrate performance trials into E2E tests to be able to detect the slow performance of </span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">your framework.</span></span></li>
<li><span class="koboSpan" id="kobo.411.1">Ensure that the framework works correctly with external systems. </span><span class="koboSpan" id="kobo.411.2">These systems can include different types of web browsers or different </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">backend environments.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.413.1">Another important</span><a id="_idIndexMarker376"/><span class="koboSpan" id="kobo.414.1"> form of testing for frameworks that is relevant in many projects today </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">is benchmarking.</span></span></p>
<h3><span class="koboSpan" id="kobo.416.1">Benchmarks</span></h3>
<p><span class="koboSpan" id="kobo.417.1">The process of </span><a id="_idIndexMarker377"/><span class="koboSpan" id="kobo.418.1">benchmarking runs a set of assessments and trials on a particular scenario of your framework. </span><span class="koboSpan" id="kobo.418.2">These benchmark tests can be written by framework authors or an external party. </span><span class="koboSpan" id="kobo.418.3">For the purposes of framework building, we are focusing on the former, where a framework includes a series of benchmarks as part of its internal testing. </span><span class="koboSpan" id="kobo.418.4">Frameworks can potentially compete on their benchmarking scores for tasks such as rendering a particular component configuration, or, in the case of backend frameworks, the time it takes to process a large number </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">of requests.</span></span></p>
<p><span class="koboSpan" id="kobo.420.1">For JavaScript frameworks, it is essential to benchmark the performance of the code in the runtime. </span><span class="koboSpan" id="kobo.420.2">In the browser runtime, the benchmarks are focused on efficient rendering and processing large inputs. </span><span class="koboSpan" id="kobo.420.3">In the full stack Next.js framework, the authors include several benchmarking scripts to test various features (found at </span><a href="http://github.com/vercel/next.js/blob/canary/bench"><span class="koboSpan" id="kobo.421.1">github.com/vercel/next.js/blob/canary/bench</span></a><span class="koboSpan" id="kobo.422.1">). </span><span class="koboSpan" id="kobo.422.2">When you are developing benchmarks of your own, keep in mind that you probably do not need any complex tooling. </span><span class="koboSpan" id="kobo.422.3">Instead, you can rely on built-in methods of the runtime – in this case, </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">in Node.js.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.424.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.425.1">.5</span></em><span class="koboSpan" id="kobo.426.1"> shows one of the simpler benchmarking </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">scripts </span></span><a href="http://github.com/vercel/next.js/blob/canary/bench/recursive-copy/run.js"><span class="No-Break"><span class="koboSpan" id="kobo.428.1">github.com/vercel/next.js/blob/canary/bench/recursive-copy/run.js</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.429.1">):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer036">
<span class="koboSpan" id="kobo.430.1"><img alt="Figure 4.5: Benchmarking in the Next.js repository" src="image/Figure_4.5_B19014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.431.1">Figure 4.5: Benchmarking in the Next.js repository</span></p>
<p><span class="koboSpan" id="kobo.432.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.433.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.434.1">.5</span></em><span class="koboSpan" id="kobo.435.1">, the main function provides a recursive copy implementation to the test. </span><span class="koboSpan" id="kobo.435.2">Executing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">run</span></strong><span class="koboSpan" id="kobo.437.1"> function with two different implementations provides us with comparison results of these </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">two functions.</span></span></p>
<p><span class="koboSpan" id="kobo.439.1">For backend frameworks, factors such as memory utilization, request throughput, and latency are often benchmarked. </span><span class="koboSpan" id="kobo.439.2">For inspiration, Nest.js maintains a set of benchmarking tools to compare the performance of the HTTP servers provided by the framework at </span><a href="http://github.com/nestjs/nest/tree/master/benchmarks"><span class="koboSpan" id="kobo.440.1">github.com/nestjs/nest/tree/master/benchmarks</span></a><span class="koboSpan" id="kobo.441.1">. </span><span class="koboSpan" id="kobo.441.2">In other types of frameworks, such as application development (Electron) and testing frameworks, the benchmarks are also focused on </span><a id="_idIndexMarker378"/><span class="koboSpan" id="kobo.442.1">performance. </span><span class="koboSpan" id="kobo.442.2">As we saw in the </span><em class="italic"><span class="koboSpan" id="kobo.443.1">Framework testing</span></em><span class="koboSpan" id="kobo.444.1"> section earlier in this chapter, the testing framework itself needs to execute the test suites as efficiently </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">as possible.</span></span></p>
<p><span class="koboSpan" id="kobo.446.1">You, as a framework developer, should focus on setting up benchmarks for two </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">use cases:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.448.1">First, the benchmark for the public interfaces your framework exposes. </span><span class="koboSpan" id="kobo.448.2">These would allow you to gauge how long it takes for your framework to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.449.1">the tasks.</span></span></li>
<li><span class="koboSpan" id="kobo.450.1">Second, you want to look into the micro-benchmarks of the framework internals. </span><span class="koboSpan" id="kobo.450.2">These internal benchmarks help optimize particular parts of the framework’s core, enabling speed improvements in the </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">internal functions.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.452.1">As you further develop your project, keep an eye on measurements of your benchmarks, ensuring that you do </span><a id="_idIndexMarker379"/><span class="koboSpan" id="kobo.453.1">not regress the speed of </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">your framework.</span></span></p>
<h2 id="_idParaDest-70"><a id="_idTextAnchor069"/><span class="koboSpan" id="kobo.455.1">Development tooling</span></h2>
<p><span class="koboSpan" id="kobo.456.1">The framework development</span><a id="_idIndexMarker380"/><span class="koboSpan" id="kobo.457.1"> and the release process can greatly benefit from the inclusion of additional tools that elevate the quality and usability of the framework project. </span><span class="koboSpan" id="kobo.457.2">These workflows could be applied to various aspects of the framework, such as dependency management, testing, editor configuration, formatting, and more. </span><span class="koboSpan" id="kobo.457.3">We already saw a similar approach of relying on additional scripts and tooling in the </span><em class="italic"><span class="koboSpan" id="kobo.458.1">Binaries and scripts</span></em><span class="koboSpan" id="kobo.459.1"> section of </span><a href="B19014_03.xhtml#_idTextAnchor051"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.460.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.461.1">. </span><span class="koboSpan" id="kobo.461.2">Additional tooling that can improve our framework’s development life cycle includes the introduction of continuous integration steps, improving the source control, and the addition of </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">package-level utilities.</span></span></p>
<h3><span class="koboSpan" id="kobo.463.1">Continuous integration</span></h3>
<p><span class="koboSpan" id="kobo.464.1">As part of the development cycle, just like many web application projects, frameworks configure </span><strong class="bold"><span class="koboSpan" id="kobo.465.1">continuous integration</span></strong><span class="koboSpan" id="kobo.466.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.467.1">CI</span></strong><span class="koboSpan" id="kobo.468.1">) steps to</span><a id="_idIndexMarker381"/><span class="koboSpan" id="kobo.469.1"> test the code changes and new releases. </span><span class="koboSpan" id="kobo.469.2">These CI systems run tests of all types, such as the ones mentioned in the </span><em class="italic"><span class="koboSpan" id="kobo.470.1">Framework testing</span></em><span class="koboSpan" id="kobo.471.1"> section of this chapter. </span><span class="koboSpan" id="kobo.471.2">Every change committed using a version control system has to pass the existing test suite. </span><span class="koboSpan" id="kobo.471.3">This ensures that the changes do not introduce breaking changes or bugs. </span><span class="koboSpan" id="kobo.471.4">Besides running the tests, CI runs other types of analysis, such as formatting checks, linting, and more. </span><span class="koboSpan" id="kobo.471.5">These ensure consistency, usability, </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">and quality.</span></span></p>
<p><span class="koboSpan" id="kobo.473.1">If we focus on framework development, there are a few special uses for CI. </span><span class="koboSpan" id="kobo.473.2">It ensures that the framework works properly in different JavaScript environments. </span><span class="koboSpan" id="kobo.473.3">For a frontend framework, this means executing tests in a variety of browsers on different platforms. </span><span class="koboSpan" id="kobo.473.4">Browser support testing goes both ways – new features must work in older browser versions, and new browsers should not break any of the existing framework features. </span><span class="koboSpan" id="kobo.473.5">Node.js and Deno frameworks that run on the backend keep track of newer runtime versions, following the </span><a href="http://github.com/nodejs/release"><span class="koboSpan" id="kobo.474.1">github.com/nodejs/release</span></a><span class="koboSpan" id="kobo.475.1"> release schedule. </span><span class="koboSpan" id="kobo.475.2">Running these compatibility checks in CI is the best solution; the CI platforms allow to quickly spin up different versions of environments and parallelize the test execution in </span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">those environments.</span></span></p>
<p><span class="koboSpan" id="kobo.477.1">Besides the focus on testing in various environments, the CI step can run a series of tests of projects that depend on your framework. </span><span class="koboSpan" id="kobo.477.2">For example, it can generate and run a sample application or an external script with the new framework changes applied. </span><span class="koboSpan" id="kobo.477.3">This way, it can check whether the changes </span><span class="No-Break"><span class="koboSpan" id="kobo.478.1">are compatible.</span></span></p>
<p><span class="koboSpan" id="kobo.479.1">Depending on the framework CI configuration, the integration story may be different. </span><span class="koboSpan" id="kobo.479.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.480.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.481.1">.6</span></em><span class="koboSpan" id="kobo.482.1">, we see four successful checks; this is part of the Vue.js </span><span class="No-Break"><span class="koboSpan" id="kobo.483.1">CI pipeline:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer037">
<span class="koboSpan" id="kobo.484.1"><img alt="Figure 4.6: Vue.js reporting its CI status" src="image/Figure_4.6_B19014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.485.1">Figure 4.6: Vue.js reporting its CI status</span></p>
<p><span class="koboSpan" id="kobo.486.1">In the case of Angular, there are over 20 checks in the CI pipeline before a code change can be merged into the repository. </span><span class="koboSpan" id="kobo.486.2">The reason for a growing number of integration steps is the execution tasks that are not tests. </span><span class="koboSpan" id="kobo.486.3">These could be formatting, spelling, and JavaScript code </span><span class="No-Break"><span class="koboSpan" id="kobo.487.1">usability checks.</span></span></p>
<p><span class="koboSpan" id="kobo.488.1">The CI steps can vary in complexity and type, and they can also contribute to the release process of your framework. </span><span class="koboSpan" id="kobo.488.2">No matter what type of framework you are working on, internal or public, it </span><a id="_idIndexMarker382"/><span class="koboSpan" id="kobo.489.1">is highly advised to configure a CI step as part of your framework development. </span><span class="koboSpan" id="kobo.489.2">This approach will ensure the quality of the code and help you maintain efficiency in your </span><span class="No-Break"><span class="koboSpan" id="kobo.490.1">framework development.</span></span></p>
<h3><span class="koboSpan" id="kobo.491.1">Source control</span></h3>
<p><span class="koboSpan" id="kobo.492.1">Using source control for </span><a id="_idIndexMarker383"/><span class="koboSpan" id="kobo.493.1">frameworks is similar to using it for other application projects. </span><span class="koboSpan" id="kobo.493.2">Nevertheless, JavaScript frameworks rely on source control tooling for tagging framework releases and keeping track of feature development branches. </span><span class="koboSpan" id="kobo.493.3">The use of source control in this context is a bit more in-depth. </span><span class="koboSpan" id="kobo.493.4">For instance, a framework author might need to write patches for an older version of the framework, which means jumping back to an older Git tag to introduce that change. </span><span class="koboSpan" id="kobo.493.5">In many cases, large framework refactoring also takes place in a temporary </span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">Git branch.</span></span></p>
<p><span class="koboSpan" id="kobo.495.1">Most JavaScript frameworks also configure supplementary source control scripts that improve the workflow as new features and changes get developed. </span><span class="koboSpan" id="kobo.495.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.496.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.497.1">.7</span></em><span class="koboSpan" id="kobo.498.1">, we see the Nest framework using the Git pre-commit hook to execute JavaScript </span><span class="No-Break"><span class="koboSpan" id="kobo.499.1">linting scripts:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer038">
<span class="koboSpan" id="kobo.500.1"><img alt="Figure 4.7: The pre-commit hook configuration" src="image/Figure_4.7_B19014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.501.1">Figure 4.7: The pre-commit hook configuration</span></p>
<p><span class="koboSpan" id="kobo.502.1">The pre-commit hook, in this case (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.503.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.504.1">.7</span></em><span class="koboSpan" id="kobo.505.1">), enforces the code quality standards before the changes are committed. </span><span class="koboSpan" id="kobo.505.2">The step to configure this kind of behavior is simplified using a JavaScript module </span><a id="_idIndexMarker384"/><span class="koboSpan" id="kobo.506.1">called </span><strong class="bold"><span class="koboSpan" id="kobo.507.1">Husky</span></strong><span class="koboSpan" id="kobo.508.1"> (</span><a href="http://typicode.github.io/husky"><span class="koboSpan" id="kobo.509.1">typicode.github.io/husky</span></a><span class="koboSpan" id="kobo.510.1">). </span><span class="koboSpan" id="kobo.510.2">You will find this pattern in a lot of the frameworks, as this is a handy addition to make the development process much </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">more friendly.</span></span></p>
<p><span class="koboSpan" id="kobo.512.1">At this point, it is a given that you will use source control for your new framework. </span><span class="koboSpan" id="kobo.512.2">However, you can</span><a id="_idIndexMarker385"/><span class="koboSpan" id="kobo.513.1"> invest in additional tooling by learning from some of the existing frameworks that we’ve seen in this book to improve your </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">coding workflow.</span></span></p>
<h3><span class="koboSpan" id="kobo.515.1">Package configuration</span></h3>
<p><span class="koboSpan" id="kobo.516.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.517.1">package.json</span></strong><span class="koboSpan" id="kobo.518.1"> file </span><a id="_idIndexMarker386"/><span class="koboSpan" id="kobo.519.1">and the additional files in the root of the framework directory define the package configurations of the project. </span><span class="koboSpan" id="kobo.519.2">The number of such configurations may vary depending on the types of tools you use in </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">your framework.</span></span></p>
<p><span class="koboSpan" id="kobo.521.1">The package configuration of Nest.js consists of many tools, such as ESLint, Git, npm, and Gulp, to name a few. </span><span class="koboSpan" id="kobo.521.2">Similar to the Nest.js configuration seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.522.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.523.1">.8</span></em><span class="koboSpan" id="kobo.524.1">, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">package.json</span></strong><span class="koboSpan" id="kobo.526.1"> file will be the development entry point of </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">your framework:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer039">
<span class="koboSpan" id="kobo.528.1"><img alt="Figure 4.8: Package configurations of Nest.js" src="image/Figure_4.8_B19014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.529.1">Figure 4.8: Package configurations of Nest.js</span></p>
<p><span class="koboSpan" id="kobo.530.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">package.json</span></strong><span class="koboSpan" id="kobo.532.1"> file consists of the information about your framework, its dependencies, and auxiliary configuration used by other tools. </span><span class="koboSpan" id="kobo.532.2">For example, the Nest.js package file (</span><a href="http://github.com/nestjs/nest/blob/master/package.json"><span class="koboSpan" id="kobo.533.1">github.com/nestjs/nest/blob/master/package.json</span></a><span class="koboSpan" id="kobo.534.1">) stores configuration for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.535.1">nyc</span></strong><span class="koboSpan" id="kobo.536.1"> code coverage tooling, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.537.1">mocha</span></strong><span class="koboSpan" id="kobo.538.1"> test runner configuration, and commands for the changelog tooling. </span><span class="koboSpan" id="kobo.538.2">Besides those configuration entries, the package file has the </span><strong class="source-inline"><span class="koboSpan" id="kobo.539.1">scripts</span></strong><span class="koboSpan" id="kobo.540.1"> object. </span><span class="koboSpan" id="kobo.540.2">This object consists of commands that can be used during framework </span><a id="_idIndexMarker387"/><span class="koboSpan" id="kobo.541.1">development. </span><span class="koboSpan" id="kobo.541.2">In the Nest.js case, these commands run some of the </span><span class="No-Break"><span class="koboSpan" id="kobo.542.1">following operations:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.543.1">Build</span></strong><span class="koboSpan" id="kobo.544.1"> – the command </span><a id="_idIndexMarker388"/><span class="koboSpan" id="kobo.545.1">that compiles or builds the framework. </span><span class="koboSpan" id="kobo.545.2">Nest.js executes the TypeScript compiler as part of </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">this command.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.547.1">Clean</span></strong><span class="koboSpan" id="kobo.548.1"> – a quick command that cleans the working directory of the framework project. </span><span class="koboSpan" id="kobo.548.2">Usually, this means getting rid of any generated or </span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">built files.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.550.1">Test</span></strong><span class="koboSpan" id="kobo.551.1"> – commands that run all types of tests that are included in the framework. </span><span class="koboSpan" id="kobo.551.2">In the cases of Nest.js and many other frameworks, these types of commands are usually split by the type of tests they </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">are running.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.553.1">Lint</span></strong><span class="koboSpan" id="kobo.554.1"> – analyzes the JavaScript code in the project, looking for coding style errors, pitfalls, and potential issues. </span><span class="koboSpan" id="kobo.554.2">Nest.js uses ESLint, running in parallel to quickly diagnose the </span><span class="No-Break"><span class="koboSpan" id="kobo.555.1">framework files.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.556.1">Publish</span></strong><span class="koboSpan" id="kobo.557.1"> – commands that create a new release of the framework. </span><span class="koboSpan" id="kobo.557.2">Usually, these include fully building all the parts of the framework, running all the tests, increasing the version number of the project, and finally, publishing the project </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">npm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.561.1">Install</span></strong><span class="koboSpan" id="kobo.562.1"> – installs the dependencies of the project. </span><span class="koboSpan" id="kobo.562.2">In the case of Nest.js, the dependency modules provide the functionality that is required to run a backend service. </span><span class="koboSpan" id="kobo.562.3">The developer dependency list has all the infrastructure modules to work on the </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">framework project.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.564.1">Coverage</span></strong><span class="koboSpan" id="kobo.565.1"> – runs testing</span><a id="_idIndexMarker389"/><span class="koboSpan" id="kobo.566.1"> code coverage tooling to determine whether more tests are required to fully cover all the framework logic. </span><span class="koboSpan" id="kobo.566.2">For instance, Nest.js uses </span><strong class="bold"><span class="koboSpan" id="kobo.567.1">Istanbul</span></strong><span class="koboSpan" id="kobo.568.1"> (</span><a href="http://istanbul.js.org"><span class="koboSpan" id="kobo.569.1">istanbul.js.org</span></a><span class="koboSpan" id="kobo.570.1">) for the code </span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">coverage report.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.572.1">This is not an extensive list, but it provides some inspiration for command types you can include in your project. </span><span class="koboSpan" id="kobo.572.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">scripts</span></strong><span class="koboSpan" id="kobo.574.1"> part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.575.1">package.json</span></strong><span class="koboSpan" id="kobo.576.1"> file usually follows the reference material at </span><a href="http://docs.npmjs.com/cli/using-npm/scripts"><span class="koboSpan" id="kobo.577.1">docs.npmjs.com/cli/using-npm/scripts</span></a><span class="koboSpan" id="kobo.578.1">, but different JavaScript package managers may treat these commands a bit differently. </span><span class="koboSpan" id="kobo.578.2">Your framework should utilize </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">package.json</span></strong><span class="koboSpan" id="kobo.580.1"> to your advantage, creating quickly accessible scripts and configuring the </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">package.json</span></strong><span class="koboSpan" id="kobo.582.1"> file as the entry point for your framework’s </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">development workflow.</span></span></p>
<p><span class="koboSpan" id="kobo.584.1">As we have seen in this section, there are a lot of development tools that empower framework development and are crucial to make the project successful. </span><span class="koboSpan" id="kobo.584.2">These development </span><a id="_idIndexMarker390"/><span class="koboSpan" id="kobo.585.1">patterns have been improving over many years and are now deeply embedded in many JavaScript projects. </span><span class="koboSpan" id="kobo.585.2">In the next section, we shall take a look at the overall picture of a framework structure, which will give us a solid outline for our own </span><span class="No-Break"><span class="koboSpan" id="kobo.586.1">framework project.</span></span></p>
<h1 id="_idParaDest-71"><a id="_idTextAnchor070"/><span class="koboSpan" id="kobo.587.1">Learnings from other architectures</span></h1>
<p><span class="koboSpan" id="kobo.588.1">In the current and</span><a id="_idIndexMarker391"/><span class="koboSpan" id="kobo.589.1"> previous chapters, we’ve seen all the different technical structures, tools, and patterns that frameworks use for their benefit. </span><span class="koboSpan" id="kobo.589.2">If we browse through the sources of frameworks gathered in the </span><em class="italic"><span class="koboSpan" id="kobo.590.1">Framework showcase</span></em><span class="koboSpan" id="kobo.591.1"> section of </span><a href="B19014_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.592.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.593.1">, we can start to clearly see repeating patterns. </span><span class="koboSpan" id="kobo.593.2">Following these practices, we can take advantage of them in our own framework development. </span><span class="koboSpan" id="kobo.593.3">By gathering knowledge from the existing designs from different types of JavaScript frameworks, we can conceive a structural system that can serve us well in building our project. </span><span class="koboSpan" id="kobo.593.4">We can fuse all those methods and practices into a general </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">framework structure.</span></span></p>
<p><span class="koboSpan" id="kobo.595.1">The following code shows the generic JavaScript </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">framework structure:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.597.1">
&lt;root framework directory&gt;
  | &lt;main framework packages&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.598.1">    + &lt;core framework interfaces...&gt;</span></strong><span class="koboSpan" id="kobo.599.1">
    + &lt;compiler / bundler&gt;
  | &lt;tests&gt;
    + &lt;unit tests&gt;
    + &lt;integration and end-to-end tests&gt;
    + &lt;benchmarks&gt;
  | &lt;static / dynamic typings&gt;
  | &lt;documentation&gt;
  | &lt;examples / samples&gt;
  | &lt;framework scripts&gt;
  | LICENSE
  | README documentation
  | package.json (package configuration)
  | &lt;.continuous integration&gt;
  | &lt;.source control add-ons&gt;
  | &lt;.editor and formatting configurations&gt;</span></pre>
<p><span class="koboSpan" id="kobo.600.1">This project structure should help demystify the approach to our framework project structure and empower you, as a developer, to design your own. </span><span class="koboSpan" id="kobo.600.2">The framework file and directory structure is the culmination of the last two chapters, combining many of the components that we have seen so far – framework packages, the compiler infrastructure, framework testing, documentation, scripts, and more. </span><span class="koboSpan" id="kobo.600.3">Future chapters will be using this structure for our own </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">framework building.</span></span></p>
<p><span class="koboSpan" id="kobo.602.1">As we look at the core architectures and the examples of what the framework projects consist of, it helps us form what our framework will include and look like. </span><span class="koboSpan" id="kobo.602.2">Not everything that we see in the current architecture example will be necessary for our framework to function or succeed. </span><span class="koboSpan" id="kobo.602.3">In fact, if you will be building a framework for internal project use only, then you will be </span><a id="_idIndexMarker392"/><span class="koboSpan" id="kobo.603.1">choosing a different combination of tools that help you </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">with development.</span></span></p>
<h1 id="_idParaDest-72"><a id="_idTextAnchor071"/><span class="koboSpan" id="kobo.605.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.606.1">This chapter covered the importance of framework documentation, the variety of tests that improve stability, and the array of internal tools that establish efficient framework workflows. </span><span class="koboSpan" id="kobo.606.2">The investment in good documentation helps both framework authors and framework users. </span><span class="koboSpan" id="kobo.606.3">The lack of well-defined documents can be devastating to the framework’s success. </span><span class="koboSpan" id="kobo.606.4">Luckily, there are a ton of tools that help simplify the approach to documentation. </span><span class="koboSpan" id="kobo.606.5">In the same sense, there are existing tools for testing workflows, covering all aspects of code testing within the framework. </span><span class="koboSpan" id="kobo.606.6">Finally, the additional tooling, such as improved source control and editor configurations, makes it much more pleasant to work on the framework and helps authors focus on the framework internals. </span><span class="koboSpan" id="kobo.606.7">All of these development support factors play an essential role in framework development and architecture. </span><span class="koboSpan" id="kobo.606.8">Learning from other projects and utilizing the patterns that support the development process helps us expand our architectural skills and be </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">more efficient.</span></span></p>
<p><span class="koboSpan" id="kobo.608.1">At this point, we have learned a lot about existing framework technologies that enable web application and backend service development targeting the JavaScript runtime. </span><span class="koboSpan" id="kobo.608.2">In the next chapters, using these learnings and detailed exposure to existing framework projects, we will dive into the aspects of our framework building. </span><span class="koboSpan" id="kobo.608.3">This means starting a brand-new project from scratch. </span><span class="koboSpan" id="kobo.608.4">Utilizing the patterns, abstractions, and lessons learned from existing projects, we get to experience what it takes to build our </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">own framework.</span></span></p>
<p><span class="koboSpan" id="kobo.610.1">The next chapter will focus on some of the considerations a framework author needs to take into account before starting off with a </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">new project.</span></span></p>
</div>


<div class="Content" id="_idContainer041">
<h1 id="_idParaDest-73" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor072"/><span class="koboSpan" id="kobo.1.1">Part 2: Framework Development</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In this part, the book builds on top of the real-world framework examples and switches gears to focus on the programming aspects of framework creation from scratch. </span><span class="koboSpan" id="kobo.2.2">The goal is to cover the complete process of planning, architecting, and publishing a new full stack framework. </span><span class="koboSpan" id="kobo.2.3">These stages include several important considerations and a lesson in the architecture of various types of components. </span><span class="koboSpan" id="kobo.2.4">The emphasis is on the practical approach and guidance of each process’s steps that benefit developers of </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">all types.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">In this part, we cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B19014_05.xhtml#_idTextAnchor073"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Framework Considerations</span></em></li>
<li><a href="B19014_06.xhtml#_idTextAnchor089"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 6</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Building a Framework by Example</span></em></li>
<li><a href="B19014_07.xhtml#_idTextAnchor108"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 7</span></em></a><em class="italic"><span class="koboSpan" id="kobo.13.1">, Creating a Full Stack Framework</span></em></li>
<li><a href="B19014_08.xhtml#_idTextAnchor138"><em class="italic"><span class="koboSpan" id="kobo.14.1">Chapter 8</span></em></a><em class="italic"><span class="koboSpan" id="kobo.15.1">, Architecting Frontend Frameworks</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer042">
</div>
</div>
<div>
<div id="_idContainer043">
</div>
</div>
<div>
<div id="_idContainer044">
</div>
</div>
<div>
<div id="_idContainer045">
</div>
</div>
<div>
<div id="_idContainer046">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer047">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer048">
</div>
</div>
<div>
<div id="_idContainer049">
</div>
</div>
<div>
<div id="_idContainer050">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer051">
</div>
</div>
</body></html>