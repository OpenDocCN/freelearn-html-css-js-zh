<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch05"/>Chapter 5. StealJS</h1></div></div></div><p><strong>StealJS</strong> is an independent code manager and packaging tool, which allows us to load JavaScript and other file types into an application, <a id="id252" class="indexterm"/>concatenate multiple JavaScript or CSS files, and compress their content. StealJS provides cross-browser message logging, code generators, and a simple package management tool.</p><p>In this chapter, we will go through all the StealJS features.</p><div><div><h3 class="title"><a id="note10"/>Note</h3><p>StealJS requires Java 1.6 or greater.</p></div></div><div><div><div><div><h1 class="title"><a id="ch05lvl1sec33"/>Dependency management</h1></div></div></div><p><strong>Dependency management</strong> is a tool, <a id="id253" class="indexterm"/>which provides an organized way for managing software components to work together as a one system.</p><p>The following are a few <a id="id254" class="indexterm"/>StealJS key features:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Loading individual files only once</li><li class="listitem" style="list-style-type: disc">Loading files from different domains</li><li class="listitem" style="list-style-type: disc">Loading JavaScript and CoffeeScript</li><li class="listitem" style="list-style-type: disc">Loading CSS less</li></ul></div><p>We have used StealJS many times in the previous chapters. Let's have a closer look at it now.</p><p>Using StealJS, we can load files as follows:</p><div><pre class="programlisting">steal(
    'file_one',
    'file_two',
    function ($) {
    
    }
);</pre></div><p>These files are loaded in parallel and in a random order. If <code class="literal">file_two</code> has dependences in <code class="literal">file_one</code>, we can wait for <code class="literal">file_one</code> before starting to fetch <code class="literal">file_two</code>, as follows:</p><div><pre class="programlisting">steal(
    'file_one').then(
    
    'file_two',
    function ($) {
    
    }
);</pre></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec34"/>Logger</h1></div></div></div><p><code class="literal">steal.dev</code> provides <a id="id255" class="indexterm"/>two logging <a id="id256" class="indexterm"/>functions similar to the popular <code class="literal">console.log()</code> function, and <a id="id257" class="indexterm"/>automatically removes them from the production build.</p><p>We can use it as follows:</p><div><pre class="programlisting">steal.dev.log('See me in the console');
steal.dev.warn('Me too!');</pre></div><div><div><h3 class="title"><a id="note11"/>Note</h3><p>All logs are removed from the production build.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec35"/>Code cleaner</h1></div></div></div><p><code class="literal">steal.clean</code> beautifies <a id="id258" class="indexterm"/>the <a id="id259" class="indexterm"/>JavaScript code and checks it using the <strong>JSLint</strong> code <a id="id260" class="indexterm"/>quality tool:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://www.jslint.com">http://www.jslint.com</a></li><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://jsbeautifier.org">http://jsbeautifier.org</a></li></ul></div><p>We can use the <code class="literal">cleanjs</code> <a id="id261" class="indexterm"/>command to beautify the code in one file:</p><div><pre class="programlisting">$ ./js steal/cleanjs todo/todo.js</pre></div><p>Or all files in our project:</p><div><pre class="programlisting">$ ./js steal/cleanjs todo/todo.html</pre></div><p>To run our code against JSLint, add the <code class="literal">-jslint true</code> parameter:</p><div><pre class="programlisting">$ ./js steal/cleanjs todo/todo.js -jslint true</pre></div><p>We can ignore the files from being cleaned by adding a comment similar to the following:</p><div><pre class="programlisting">//!steal-clean</pre></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec36"/>Concatenation and compression</h1></div></div></div><p><code class="literal">steal.build</code> compresses <a id="id262" class="indexterm"/>and concatenates CSS and JavaScript files into a single or several files. It uses the Google Closure compressor by default.</p><p>Since it opens the applications in Envjs, it can be run against applications that don't use StealJS.</p><p>To make production-ready files of our <a id="id263" class="indexterm"/>
<code class="literal">Todo</code> application, we can run the following command:</p><div><pre class="programlisting">$ ./js steal/buildjs todo/todo.html -to todo_prod</pre></div><p>We can run the script against a URL:</p><div><pre class="programlisting">$ ./js steal/buildjs http://YOUR_SERVER/todo/todo.html -to todo_prod</pre></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec37"/>Summary</h1></div></div></div><p>In this chapter, we learned how to load files into the project, used cross-browser logging systems that are removed in production build, cleaned the code and made a production-ready application.</p></div></body></html>