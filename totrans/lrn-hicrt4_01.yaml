- en: Chapter 1. Web Charts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第一章 网络图表
- en: 'In this chapter, you will learn the general background of web charts. This
    includes a short history of how web charts used to be made before Ajax and HTML5
    became the new standard. The recent advances in JavaScript programming will be
    briefly discussed. Then, SVG support and the new HTML5 feature canvas, the main
    drive behind JavaScript charts, are introduced and demonstrated. This is followed
    by a quick guide to the other JavaScript graphing packages that are available
    on the market. Finally, we are introduced to Highcharts and will explain the advantages
    of using Highcharts over other products. In this chapter, we will cover the following
    topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将了解网络图表的一般背景。这包括网络图表在Ajax和HTML5成为新标准之前是如何制作的简要历史。将简要讨论JavaScript编程的最新进展。然后，介绍SVG支持和新的HTML5功能canvas，这是JavaScript图表的主要推动力，并进行演示。接下来，将快速介绍市场上可用的其他JavaScript绘图包。最后，我们将介绍Highcharts，并解释使用Highcharts相对于其他产品的优势。在本章中，我们将涵盖以下主题：
- en: A short history of web charting
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络图表的简要历史
- en: The rise of JavaScript and HTML5
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JavaScript和HTML5的兴起
- en: JavaScript charts on the market
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 市场上的JavaScript图表
- en: Why Highcharts?
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么选择Highcharts？
- en: A short history of web charting
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络图表的简要历史
- en: Before diving into Highcharts, it is worth mentioning how web charts evolved
    from pure HTML with server-side technology to the current client side.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入研究Highcharts之前，值得提及的是，网络图表是如何从纯HTML和服务器端技术发展到当前客户端技术的。
- en: HTML image map (server-side technology)
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: HTML图像映射（服务器端技术）
- en: This technique has been used since the early days of HTML, when server-side
    operations were the main drive. Charts were only HTML images generated from the
    web server. Before there were any server-side scripting languages such as PHP,
    one of the most common approaches was to use **Common Gateway Interface** (**CGI**),
    which executes plotting programs (such as gnuplot) to output images. Later, when
    PHP became popular, the GD graphic module was used for plotting. One product that
    uses this technique is **JpGraph**.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术自HTML的早期就开始使用，当时服务器端操作是主要驱动力。图表只是由网络服务器生成的HTML图像。在PHP等服务器端脚本语言出现之前，最常见的方法之一是使用**通用网关接口**（**CGI**），它执行绘图程序（如gnuplot）以输出图像。后来，当PHP变得流行时，使用了GD图形模块进行绘图。使用这种技术的产品之一是**JpGraph**。
- en: 'The following is an example of how to include a chart image in an HTML page:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是如何在HTML页面中包含图表图像的示例：
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The chart script file `pie_chart.php` is embedded in an HTML `img` tag. When
    the page is loaded, the browser sees the `img src` attribute and sends an HTTP
    request for `pie_chart.php`. As far as the web browser is concerned, it has no
    knowledge of whether the `.php` file is an image file or not. When the web server
    (with PHP support) receives the request, it recognizes the `.php` extension and
    executes the PHP scripts. The following is a cut down JpGraph example; the script
    outputs the image content and streams it back as an HTTP response, in the same
    way as normal image content would be sent back:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 图表脚本文件 `pie_chart.php` 嵌入HTML `img` 标签中。当页面加载时，浏览器看到 `img src` 属性并发送一个对 `pie_chart.php`
    的HTTP请求。对于网络浏览器来说，它不知道`.php` 文件是否是一个图像文件。当带有PHP支持的服务器接收到请求时，它识别`.php` 扩展名并执行PHP脚本。以下是一个简化的JpGraph示例；脚本输出图像内容并将其作为HTTP响应流回，就像正常图像内容被发送回一样：
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Furthermore, this technology combines with an HTML `map` tag for chart navigation,
    so that, when users click on a certain area of a graph, for example a slice in
    a pie chart, it can load a new page with another graph.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，这项技术与HTML `map` 标签结合，用于图表导航，因此当用户点击图表的某个区域，例如饼图中的一个切片时，它可以加载一个包含另一个图表的新页面。
- en: 'This technology has the following advantages:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术有以下优点：
- en: Ideal for automation tasks, for example scheduled reports or e-mail alerts with
    the graph attached.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非常适合自动化任务，例如带有图形附件的定时报告或电子邮件警报。
- en: Doesn't require JavaScript. It is robust, pure HTML, and is light on the client
    side.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不需要JavaScript。它是健壮的，纯HTML，且对客户端影响较小。
- en: 'It has the following disadvantages:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 它有以下缺点：
- en: More workload on the server side
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器端的工作负载更多
- en: Pure HTML and a limited technology—few interactions can be put on the graphs
    and none on the animations
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 纯HTML和有限的技术——无法在图表上放置更多交互，也无法在动画上放置任何交互
- en: Java applet (client-side) and servlet (server-side)
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Java小程序（客户端）和servlet（服务器端）
- en: A Java applet enables the web browser to execute multiplatform Java bytecode
    to achieve what HTML cannot do, such as graphics display, animations, and advanced
    user interactions. This was the first technology to extend traditional server-based
    work to the client side. To include a Java applet in an HTML page, HTML's `applet`
    (deprecated) or `object` tags are used and require a Java plugin to be installed
    for the browser.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Java小程序使网络浏览器能够执行多平台Java字节码，以实现HTML无法做到的事情，例如图形显示、动画和高级用户交互。这是第一种将传统基于服务器的操作扩展到客户端的技术。要在HTML页面中包含Java小程序，需要使用HTML的`applet`（已弃用）或`object`标签，并且需要在浏览器中安装Java插件。
- en: 'The following is an example of including a Java applet inside an `object` tag.
    As Java does not run in the same environment in Internet Explorer as in other
    browsers, the conditional comments for IE were used:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在`object`标签内包含Java小程序的示例。由于Java在Internet Explorer中与其他浏览器运行的环境不同，因此使用了针对IE的条件注释：
- en: '[PRE2]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Generally, the Java 2D chart products are built from the `java.awt.Graphics2D`
    class and the `java.awt.geom` package from Java **Abstract Window Toolkit** (**AWT**).
    Then, the main chart library allows the users to utilize it in a browser, extending
    from the `Applet` class, or to run it on the server side, extending from the `Servlet`
    class.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，Java 2D图表产品是由Java **抽象窗口工具包**（**AWT**）的`java.awt.Graphics2D`类和`java.awt.geom`包构建的。然后，主要的图表库允许用户通过扩展`Applet`类在浏览器中使用它，或者通过扩展`Servlet`类在服务器端运行它。
- en: 'An example of a Java product is **JFreeChart**. It comes with 2D and 3D solutions
    and is free for nonprofit use. JFreeChart can be run as an applet, servlet, or
    standalone application. The following shows part of the code used to plot data
    points within an applet:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Java产品的例子是**JFreeChart**。它包含2D和3D解决方案，并且免费供非营利使用。JFreeChart可以作为applet、servlet或独立应用程序运行。以下展示了在applet内绘制数据点的部分代码：
- en: '[PRE3]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'To run a chart application on the server side, a servlet container is needed—for
    example Apache Tomcat. The standard `web.xml` file is defined to bind a URL to
    a servlet:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 要在服务器端运行图表应用程序，需要一个servlet容器，例如Apache Tomcat。标准的`web.xml`文件被定义为将URL绑定到servlet：
- en: '[PRE4]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: When the servlet container, such as Tomcat, receives an HTTP request with the
    URL `http://localhost/servlets/piechart`, it resolves the request into a servlet
    application. The web server then executes the chart servlet, formats the output
    into an image, and returns the image content as an HTTP response.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 当Servlet容器，例如Tomcat，接收到URL为`http://localhost/servlets/piechart`的HTTP请求时，它将请求解析为一个servlet应用程序。然后，Web服务器执行图表servlet，将输出格式化为图像，并将图像内容作为HTTP响应返回。
- en: 'This technology has the following advantages:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术有以下优点：
- en: Advanced graphics, animations, and user interfaces
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高级图形、动画和用户界面
- en: 'Reusable core code for different deployment options: client-side, server-side,
    or standalone applications'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可重用核心代码以支持不同的部署选项：客户端、服务器端或独立应用程序
- en: 'It has the following disadvantages:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 它有以下缺点：
- en: Applet security issues
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 小程序安全问题
- en: If the plugin crashes, it can hang or crash the browser
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果插件崩溃，可能会导致浏览器挂起或崩溃
- en: Very CPU intensive
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非常占用CPU
- en: Requires a Java plugin
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要Java插件
- en: Long startup time
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 长启动时间
- en: Standardization problems
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准化问题
- en: Adobe Shockwave Flash (client-side)
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Adobe Shockwave Flash (客户端)
- en: Flash is widely used because it offers audio, graphics, animation, and video
    capabilities on web browsers. Browsers are required to have the Adobe Flash Player
    plugin installed. As for plotting graphs, this technique was a common choice (because
    there weren't many other options) before the HTML5 standard became popular.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: Flash因其能够在网页浏览器中提供音频、图形、动画和视频功能而被广泛使用。浏览器需要安装Adobe Flash Player插件。至于绘图，在HTML5标准流行之前，这种技术是常见的选择（因为其他选项不多）。
- en: Graphing software adopting this technology ships with its own exported **Shockwave
    Flash** (**SWF**) files. These SWF files contain compressed vector-based graphics
    and compiled ActionScript instructions to create a chart. In order for the Flash
    Player to display the graphs, the SWF file has to be loaded from an HTML page.
    To do that, an HTML `object` tag is needed. The tag is internally created and
    injected into the document's DOM by the software's own JavaScript routines.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 采用这种技术的绘图软件自带其自己的导出**Shockwave Flash**（**SWF**）文件。这些SWF文件包含基于压缩矢量的图形和编译后的ActionScript指令来创建图表。为了使Flash
    Player能够显示图表，必须从HTML页面加载SWF文件。为此，需要一个HTML `object`标签。该标签由软件的JavaScript例程内部创建并注入到文档的DOM中。
- en: 'Inside this `object` tag is dimension and SWF path information for plotting
    the graph. The graph variable data is also passed inside this tag. So, as soon
    as the browser sees an `object` tag with specific parameters, it calls the installed
    Flash Player to process both the SWF file and the parameters. To pass the graph''s
    plot data from the server side to the client-side Flash Player, `flashVars` is
    embedded inside a `param` tag with the data type. The following is an example
    from Yahoo YUI 2:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个 `object` 标签内包含用于绘制图表的尺寸和 SWF 路径信息。图表变量数据也包含在这个标签内。因此，一旦浏览器看到具有特定参数的 `object`
    标签，它就会调用已安装的 Flash Player 来处理 SWF 文件和参数。为了将图表的绘图数据从服务器端传递到客户端 Flash Player，`flashVars`
    被嵌入到具有数据类型的 `param` 标签中。以下是一个来自 Yahoo YUI 2 的示例：
- en: '[PRE5]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This technology has the following advantages:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 该技术具有以下优点：
- en: Pretty graphics and animations with rich user interactions
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 精美的图形和动画，丰富的用户交互
- en: 'It has the following disadvantages:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 它有以下缺点：
- en: If the plugin crashes, it can hang or crash the browser
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果插件崩溃，它可能会挂起或崩溃浏览器
- en: Very CPU-intensive
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非常占用 CPU 资源
- en: Long startup time
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 长时间启动
- en: Standardization problems
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准化问题
- en: The rise of JavaScript and HTML5
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: JavaScript 和 HTML5 的兴起
- en: 'The role of JavaScript has shifted significantly from a few simple client routines
    to a dominant language to create and manage web user interfaces. The programming
    technique has moved towards object-oriented with the introduction of function
    object, prototype, and closure. This was driven by a group of pioneers such as
    Douglas Crockford, who was responsible for transforming the language to educate
    and make JavaScript a better language with his book *JavaScript: The Good Parts*,
    *O''Reilly Media / Yahoo Press* Others include Sam Stephenson, creator of the
    Prototype JavaScript library ([http://www.prototypejs.org](http://www.prototypejs.org)),
    and John Resig, creator of the JQuery library ([http://jquery.com](http://jquery.com)),
    who brought JavaScript into a framework for building more complicated frontend
    web software.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 'JavaScript 的作用已经从几个简单的客户端程序转变为创建和管理网络用户界面的主导语言。随着函数对象、原型和闭包的引入，编程技术已经转向面向对象。这得益于像
    Douglas Crockford 这样的先驱者，他通过他的书 *JavaScript: The Good Parts*，*O''Reilly Media
    / Yahoo Press* 负责将语言转化为教育，使 JavaScript 成为一种更好的语言。其他人包括 Sam Stephenson，Prototype
    JavaScript 库的创建者（[http://www.prototypejs.org](http://www.prototypejs.org)），以及
    John Resig，JQuery 库的创建者（[http://jquery.com](http://jquery.com)），他们把 JavaScript
    带入了一个构建更复杂前端网络软件的框架。'
- en: 'It is beyond the scope of this book to give an introduction to this new programming
    style. Readers are expected to know the basics of jQuery and CSS selector syntax,
    which are used in some of the chapters. Readers should also be familiar with the
    advanced JavaScript scripting described in the book *JavaScript: The Good Parts*,
    *O''Reilly Media / Yahoo Press*, such as prototypes, closure, inheritance, and
    function objects.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '本书范围之外，无法介绍这种新的编程风格。读者应了解 jQuery 和 CSS 选择器语法的基础，这些语法在部分章节中使用。读者还应熟悉书中描述的先进
    JavaScript 脚本，如 *JavaScript: The Good Parts*，*O''Reilly Media / Yahoo Press*，包括原型、闭包、继承和函数对象。'
- en: HTML5 (SVG and Canvas)
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: HTML5（SVG 和 Canvas）
- en: In this section, two HTML5 technologies, SVG and Canvas, are covered, along
    with examples.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，介绍了两种 HTML5 技术：SVG 和 Canvas，以及相应的示例。
- en: SVG
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SVG
- en: 'HTML5 is the biggest advance so far in the HTML standard. The adoption of the
    standard is growing fast (also fuelled by Apple mobile devices, which stopped
    supporting Adobe Flash). Again, it is beyond the scope of this book to cover them.
    However, the most relevant part to web charting is **Scalable Vector Graphics**
    (**SVG**). SVG is an XML format for describing vector-based graphics that is composed
    of components such as paths, text, shapes, color, and so on. The technology is
    similar to PostScript, except that PostScript is a stack-based language. As implied
    by its name, one of the major advantages of SVG is that it is a lossless technology
    (the same as PostScript): it doesn''t suffer from any pixelation effects by enlarging
    the image. A reduced image size will not suffer from loss of original content.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: HTML5 是迄今为止 HTML 标准的最大进步。该标准的采用率正在快速增长（也得益于苹果移动设备，它们停止支持 Adobe Flash）。再次强调，本书范围之外，无法涵盖它们。然而，与网络图表最相关的是
    **可缩放矢量图形**（**SVG**）。SVG 是一种 XML 格式，用于描述基于矢量的图形，由路径、文本、形状、颜色等组件组成。这项技术与 PostScript
    类似，但 PostScript 是一种基于堆栈的语言。正如其名称所暗示的，SVG 的一个主要优点是它是一种无损技术（与 PostScript 相同）：放大图像时不会出现任何像素化效果。减小图像尺寸不会导致原始内容丢失。
- en: Furthermore, SVG can be scripted with timing animation **Synchronized Multimedia
    Integration Language** (**SMIL**) and event handling. Apart from IE, this SVG
    technology is supported by all mainstream browsers, [http://caniuse.com/#feat=svg-smil](http://caniuse.com/#feat=svg-smil).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，SVG可以使用**同步多媒体集成语言**（**SMIL**）进行脚本化动画和事件处理。除了IE之外，这项SVG技术被所有主流浏览器支持，[http://caniuse.com/#feat=svg-smil](http://caniuse.com/#feat=svg-smil)。
- en: 'The following is a simple example of SVG code showing a single curved line
    between two points:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个简单的SVG代码示例，展示了两个点之间的单条曲线：
- en: '[PRE6]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The preceding SVG code is executed in the following steps:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的SVG代码按照以下步骤执行：
- en: Draw a path with `id="curveAB"` with data (`d`). First, move `M` to an absolute
    coordinate (`100`, `350`), then draw a Bézier quadratic curve from the current
    position to (`150`, `-300`) and finish at (`300`, `0`).
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `id="curveAB"` 绘制路径，并使用数据 (`d`)。首先，将 `M` 移动到绝对坐标 (`100`, `350`)，然后从当前位置绘制一条贝塞尔二次曲线到
    (`150`, `-300`)，并最终到达 (`300`, `0`)。
- en: Group (`g`) the two circle elements—`"pointA"` and `"pointB"`—with the center
    coordinates (`100`, `350`) and (`400`, `350`) respectively with a radius of `3`
    pixels. Then fill both circles in black.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将两个圆形元素——“pointA”和“pointB”——分别以中心坐标 (`100`, `350`) 和 (`400`, `350`) 以及 `3` 像素的半径组合在一起。然后使用黑色填充两个圆。
- en: Group the two text elements `A` and `B`, started at (`100`, `350`) and (`400`,
    `350`), which display with the sans-serif font in black, and then shift along
    the x-axis (dx) `30` pixels left and right, respectively.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将两个文本元素 `A` 和 `B` 组合在一起，起始位置分别为 (`100`, `350`) 和 (`400`, `350`)，使用无衬线字体黑色显示，然后分别在x轴（dx）上左右移动
    `30` 像素。
- en: 'The following is the final graph from the SVG script:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是从SVG脚本生成的最终图形：
- en: '![SVG](img/7451OS_01_01.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![SVG](img/7451OS_01_01.jpg)'
- en: Canvas
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Canvas
- en: 'Canvas is another new HTML5 standard that is used by some JavaScript chart
    software packages. The purpose of Canvas is as its name implies; you declare a
    drawing area on the `canvas` tag, then use the new JavaScript APIs to draw lines
    and shapes in pixels. This is the distinct difference between the two techniques:
    Canvas is pixel-based, whereas SVG is vector-based. Canvas has no built-in animation
    routine, so API calls in timed sequences are used to simulate an animation. Also,
    there is no event-handling support, so developers need to manually attach event
    handlers to certain regions on the canvas. Fancy chart animation may prove more
    complicated to implement.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Canvas是另一个新的HTML5标准，被一些JavaScript图表软件包所使用。Canvas的目的正如其名所示；你在 `canvas` 标签上声明一个绘图区域，然后使用新的JavaScript
    API以像素为单位绘制线条和形状。这是两种技术的显著区别：Canvas基于像素，而SVG基于矢量。Canvas没有内置的动画例程，因此使用定时序列的API调用来模拟动画。此外，它没有事件处理支持，因此开发者需要手动将事件处理程序附加到画布上的某些区域。复杂的图表动画可能更难实现。
- en: 'The following is an example of Canvas code that achieves the same effect as
    the preceding SVG curve:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个Canvas代码示例，它实现了与前面SVG曲线相同的效果：
- en: '[PRE7]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'As you can see, both canvas and SVG can do the same task, but Canvas requires
    more instructions:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，Canvas和SVG都可以完成相同的工作，但Canvas需要更多的指令：
- en: '![Canvas](img/7451OS_01_02.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![Canvas](img/7451OS_01_02.jpg)'
- en: 'Instead of a continuous path description in SVG, a sequence of JavaScript drawing
    methods is called. The preceding Canvas code follows these steps to draw the curve:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 与SVG中的连续路径描述不同，这里调用了一系列JavaScript绘图方法。前面的Canvas代码遵循以下步骤来绘制曲线：
- en: In the preceding example, it first calls `beginPath` to start a path in the
    canvas, then issues the `moveTo` call to move the path starting point to the coordinate
    (`100, 250`) without creating a line. The `quadraticCurveTo` method creates the
    curve path from the `moveTo` location to the top of the curve and the end point,
    which is (`400, 250`). Once the path is set up, we set up the stroke properties
    before calling the `stroke` method to draw the line along the path.
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在前面的示例中，它首先调用 `beginPath` 在画布上开始一个路径，然后发出 `moveTo` 调用来将路径起点移动到坐标 (`100, 250`)
    而不创建线条。`quadraticCurveTo` 方法从 `moveTo` 位置创建曲线路径到曲线顶部和终点，终点是 (`400, 250`)。一旦路径设置好，我们在调用
    `stroke` 方法绘制路径上的线条之前设置描边属性。
- en: We call `beginPath` to reset to a new path to draw and invoke the `arc` method
    to create a tiny circular path at both the start and end coordinates of the curve
    path. Once we have set up the stroke and fill styles, we call the `fill` and `stroke`
    routines to fill it black, to act as a coordinate marker.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们调用 `beginPath` 来重置为一个新的路径进行绘制，并调用 `arc` 方法在曲线路径的起始和结束坐标处创建一个微小的圆形路径。一旦我们设置了描边和填充样式，我们就调用
    `fill` 和 `stroke` 例程来填充它为黑色，作为坐标标记。
- en: Finally, we set up the font properties and create the text `A` and `B` by calling
    `fillText` with the position near the coordinate markers.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，我们设置了字体属性，并通过调用`fillText`并在坐标标记附近的位置创建文本`A`和`B`。
- en: In a nutshell, instead of a single tag with multiple attributes as in SVG, Canvas
    adopts multiple attribute-setting routines. SVG is mostly declarative, while Canvas
    enforces an imperative programming approach.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，Canvas采用多个属性设置程序，而不是像SVG那样使用带有多个属性的单一标签。SVG主要是声明性的，而Canvas强制执行命令式编程方法。
- en: JavaScript charts on the market
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 市场上的JavaScript图表
- en: It would be unimaginable to program a chart by hand-coding in SVG or Canvas.
    Fortunately, there are many different chart libraries on offer on the market.
    It is impossible to discuss each one of them.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 用SVG或Canvas手动编码编程图表是不可想象的。幸运的是，市场上提供了许多不同的图表库。讨论每一个都是不可能的。
- en: Tip
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: We have omitted some of the products mentioned in the first edition of this
    book, due to a lack of competitive edge.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 由于缺乏竞争优势，我们省略了本书第一版中提到的一些产品。
- en: The chart libraries are open source, but some of them are short-lived in terms
    of not having a comprehensive set of basic charts, such as pie, line, and bar
    charts, and they look rather unfinished. Here, a handful of commercial and open
    source products are discussed, including all the basic charts and some with extras.
    Some of them still support the Flash plugin, which is an option for backwards-compatibility
    because SVG and canvas are not supported in older browsers. Although some of them
    are not free for commercial development, which is understandable, they are very
    affordable.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 图表库是开源的，但其中一些在基本图表方面并不全面，例如饼图、折线图和条形图，看起来相当不完整。在这里，我们讨论了一些商业和开源产品，包括所有基本图表和一些附加功能。其中一些仍然支持Flash插件，这是向后兼容的一个选项，因为SVG和canvas在旧浏览器中不受支持。尽管其中一些产品对商业开发不是免费的，这是可以理解的，但它们的价格非常合理。
- en: Note
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: See [http://code.google.com/p/explorercanvas/](http://code.google.com/p/explorercanvas/).
    Many libraries use this add-on to emulate Canvas prior to IE 9.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 查看[http://code.google.com/p/explorercanvas/](http://code.google.com/p/explorercanvas/)。许多库使用这个附加组件来模拟IE
    9之前的Canvas。
- en: amCharts
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: amCharts
- en: amCharts offers a full set of charts in both 2D and 3D, with other interesting
    charts such as radar, bubble, candlestick, and polar. All the charts look pretty
    and support animations. amCharts is free for commercial use, but a credit label
    will be displayed in the upper-left corner of the charts. The presentation of
    the charts looks nice and the animations are fully customizable. The default animations,
    compared to Highcharts, seems slightly overdone.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: amCharts提供了一套完整的2D和3D图表，以及其他有趣的图表，如雷达图、气泡图、蜡烛图和极坐标图。所有图表看起来都很漂亮，并支持动画。amCharts对商业使用是免费的，但在图表的左上角会显示一个信用标签。图表的展示效果很好，动画可以完全自定义。与Highcharts相比，默认的动画似乎有些过度。
- en: Ext JS 5 charts
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Ext JS 5 图表
- en: Ext JS is a very popular Ajax application framework developed by Sencha, a pioneering
    company specializing in web application development. Ext JS 4 comes with a pure
    JavaScript charts library, unlike its predecessor Ext JS 3 that used the YUI 2
    Flash chart library. As the market trend is moving away from Adobe Flash, Sencha
    responded with a home-brew charting library. Ext JS 4 covers all the basic 2D
    charts plus gauge and radar charts, and all the charts support animations. The
    license is free for open source and noncommercial usage, but a developer license
    is needed for commercial development. One great benefit of Ext JS charts is that
    integration with a comprehensive set of UI components, for example for a chart
    with a storage framework, makes displaying/updating both the chart and the table
    of data very simple to do with editors.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: Ext JS是由专注于Web应用开发的先驱公司Sencha开发的一个非常流行的Ajax应用框架。与使用YUI 2 Flash图表库的前一代Ext JS
    3不同，Ext JS 4自带一个纯JavaScript图表库。随着市场趋势逐渐远离Adobe Flash，Sencha推出了自家的图表库。Ext JS 4涵盖了所有基本的2D图表以及仪表盘和雷达图，所有图表都支持动画。对于开源和非商业用途，许可证是免费的，但商业开发需要开发者许可证。Ext
    JS图表的一个巨大优势是，与一套全面的UI组件集成，例如对于具有存储框架的图表，使用编辑器显示/更新图表和数据表都非常简单。
- en: 'In Ext JS 5, the charting library has been completely restructured. Appearance
    is a major step forward compared to Ext JS 4: the charts look much more professionally
    done and on a par with other competitors. Although the Ext JS 5 chart layout,
    color, and animations may not be as stylish and smooth as Highcharts, it is a
    close call and still well-received.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在Ext JS 5中，图表库已经被完全重构。与Ext JS 4相比，外观是一个巨大的进步：图表看起来更加专业，与其他竞争对手处于同一水平。尽管Ext JS
    5的图表布局、颜色和动画可能不如Highcharts时尚和流畅，但它们仍然非常接近，并且仍然受到好评。
- en: Data Driven Documents
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据驱动文档
- en: '**Data Driven Documents** (**D3**) is the most widely-used charting library.
    It was created by Bostock et al., much improved from their prior academic research
    work on Protovis.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据驱动文档**（**D3**）是最广泛使用的图表库。它由Bostock等人创建，是在他们之前对Protovis的学术研究工作上的重大改进。'
- en: Note
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Bostock, Michael; Ogievetsky, Vadim; Heer, Jeffrey (October 2011), *D3: Data-Driven
    Documents*, IEEE Transactions on Visualization and Computer Graphics, *IEEE Press*.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 'Bostock, Michael; Ogievetsky, Vadim; Heer, Jeffrey (October 2011), *D3: 数据驱动文档*,
    IEEE Transactions on Visualization and Computer Graphics, *IEEE出版社*。'
- en: The principle of D3 is pretty unique, in that it focuses on transformation in
    document elements. In other words, it is a decorative framework to manipulate
    selected elements, known as *selections*, through a myriad of APIs. These APIs
    allow users to join the selections with chart data and style them like CSS or
    apply specific effects. This approach enables D3 to create a wide variety of impressive
    charts with animations that other products cannot produce. It is an ideal tool
    for plotting specific scientific graphs, or graphs that require complex data visualization
    presentation, such as Hierarchical Edge Bundling.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: D3的原则非常独特，因为它专注于文档元素中的转换。换句话说，它是一个装饰性框架，通过众多API来操作选定的元素，称为*选择*。这些API允许用户将选择与图表数据连接，并像CSS一样样式化它们，或者应用特定的效果。这种方法使得D3能够创建出其他产品无法生产的各种令人印象深刻的图表，并带有动画效果。它是绘制特定科学图表或需要复杂数据可视化展示的图表的理想工具，例如层次边束图。
- en: The software is free for commercial use and has attracted a large user base
    and contribution from user communities, especially from the academic sector.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 该软件可用于商业用途且免费，已经吸引了大量用户基础和用户社区的贡献，尤其是来自学术界的贡献。
- en: Due to its highly programmable and comparatively low-level approach, it requires
    a much steeper learning curve that may not appeal to less technical users or developers
    looking for a chart-ready solution on a production level. As for constructing
    3D charts in D3, it can be a challenging task. Although D3 trumps in performance,
    control, and presentation, it is not for everyone.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 由于其高度可编程和相对低级的编程方法，它需要更陡峭的学习曲线，可能不会吸引那些不太技术性的用户或寻求在生产级别上获得图表解决方案的开发者。至于在D3中构建3D图表，这可能是一项具有挑战性的任务。尽管D3在性能、控制和展示方面表现优异，但它并非适合所有人。
- en: FusionCharts
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FusionCharts
- en: 'FusionCharts is probably one of the most impressive-looking tools, and has
    the most comprehensive range of charts on the market. Not only does it come with
    a full variety of interesting 2D charts (radar, dial, map, and candlestick) available
    as a separate product, but it also offers fully interactive 3D charts. All the
    chart animations are very professionally done. FusionCharts can be run in two
    modes: Flash or JavaScript. Although FusionCharts comes with a higher price tag,
    it offers the best looking charts bundled with rotatable, animated 3D charts in
    column, pie, funnel, and pyramid series.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: FusionCharts可能是看起来最令人印象深刻的工具之一，并且在市场上提供了最全面的图表系列。它不仅提供了一系列有趣的2D图表（雷达图、仪表盘、地图和蜡烛图）作为独立产品，而且还提供了完全交互式的3D图表。所有的图表动画都制作得非常专业。FusionCharts可以在两种模式下运行：Flash或JavaScript。尽管FusionCharts的价格较高，但它提供了带有可旋转、动画效果的列、饼图、漏斗图和金字塔图系列的最佳外观图表。
- en: Raphaël
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Raphaël
- en: Raphaël is another free graphics library. It supports both SVG and VML for earlier
    browsers. It is designed like a generic graphics library, handling SVG elements,
    but it can be used as a charting solution. The software offers APIs to create
    a Canvas-like object, paper, that users can then create basic shapes or line SVG
    elements in. The API construct is somewhat similar to D3 in the sense that it
    can bind data into elements and manipulate them, but with rather more primitive
    methods, whereas D3 is a data-centric solution. The documentation is basic and
    it has a smaller user community. Like D3, it requires more effort to program a
    presentable chart than Highcharts and is not an ideal choice for 3D chart solutions.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: Raphaël是另一个免费的图形库。它支持早期浏览器中的SVG和VML。它设计成一个通用的图形库，处理SVG元素，但也可以用作图表解决方案。该软件提供API来创建类似于Canvas的对象，即paper，用户可以在其中创建基本形状或SVG线元素。API结构在某种程度上与D3相似，因为它可以将数据绑定到元素并操作它们，但方法较为原始，而D3是一个以数据为中心的解决方案。其文档基础，用户社区较小。与D3一样，编程一个可展示的图表比Highcharts需要更多努力，并且不是3D图表解决方案的理想选择。
- en: Why Highcharts?
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为什么选择Highcharts？
- en: Highcharts offers very appealing and professional-looking 2D/3D charts on the
    market. It is a product that stands out by paying attention to details, not only
    on the presentation side, but also in other areas that are described later on.
    It was developed by a Norwegian company called Highsoft AS, created and founded
    by Torstein Hønsi, and released in late 2009\. Highcharts is not their first product,
    but is by far their best-selling one.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts在市场上提供了非常吸引人和专业-looking的2D/3D图表。这是一个通过关注细节而脱颖而出的产品，不仅体现在展示方面，还包括后面描述的其他领域。它是由挪威公司Highsoft
    AS开发的，由Torstein Hønsi创建和成立，并于2009年底发布。Highcharts不是他们的第一个产品，但无疑是他们最畅销的产品。
- en: Highcharts and JavaScript frameworks
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Highcharts和JavaScript框架
- en: Although Highcharts is built with the JavaScript framework library, it is implemented
    in such a way that it doesn't totally rely on one particular framework. Highcharts
    is packaged with adapters to make its interfaces to frameworks pluggable.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然Highcharts是用JavaScript框架库构建的，但其实现方式使其不依赖于特定的框架。Highcharts附带适配器，使其接口对框架可插拔。
- en: As a result, Highcharts can be incorporated with MooTools, Prototype, or jQuery
    JavaScript frameworks. Highcharts also has a standalone framework for those who
    write in pure JavaScript. This empowers users without compromising their already-developed
    product, or allows them to decide to use the framework that is best suited for
    their projects. Users who develop their web charting applications in jQuery are
    only required to load the jQuery library before Highcharts.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，Highcharts可以与MooTools、Prototype或jQuery JavaScript框架集成。对于使用纯JavaScript编写的用户，Highcharts还提供了一个独立的框架。这使用户能够在不影响他们已经开发的产品的情况下，或者允许他们选择最适合他们项目的框架。在jQuery中开发他们的网络图表应用的用户，只需在Highcharts之前加载jQuery库即可。
- en: 'To use Highcharts in the MooTools environment, users simply do the following:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在MooTools环境中使用Highcharts，用户只需执行以下操作：
- en: '[PRE8]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'To use Highcharts under Prototype, users need to do the following:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在Prototype下使用Highcharts，用户需要执行以下操作：
- en: '[PRE9]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Presentation
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 展示
- en: 'Highcharts strikes the right balance of look and feel. The charts themselves
    are visually pleasant and yet the style is simple. The default choices of color
    are soothing without a sharp contrast and don''t conflict with each other, aided
    by the subtle shadow and white border effects. None of the text nor the colors
    of the axes are in black or any dark color, which keeps the viewer''s attention
    centered on the colored data presentation. The following is an example of a Highcharts
    representation:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts在视觉效果和感觉上取得了正确的平衡。图表本身视觉上令人愉悦，同时风格简洁。默认的颜色选择令人舒适，没有强烈的对比，并且不会相互冲突，得益于微妙的阴影和白色边框效果。文本和坐标轴的颜色都不是黑色或任何深色，这有助于将观众的注意力集中在彩色数据展示上。以下是一个Highcharts表示的示例：
- en: '![Presentation](img/7451OS_01_03.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![展示](img/7451OS_01_03.jpg)'
- en: 'All the animations (initial, update, tool tip) in Highcharts are finely tuned:
    smooth with a gradual slowdown motion. The initial animation of the donut chart,
    which is a multi-series pie chart, is the most impressive one. This is the area
    in which Highcharts is clearly better. The animations in other charts are too
    mechanical, too much, and sometimes off-putting:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts中的所有动画（初始、更新、工具提示）都经过精心调整：平滑且逐渐减速。多系列饼图的初始动画是最令人印象深刻的，这是一个Highcharts明显优于其他图表的领域。其他图表的动画过于机械，过多，有时甚至令人反感：
- en: '![Presentation](img/7451OS_01_04.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![文档](img/7451OS_01_04.jpg)'
- en: 'The round corners of tool tips and legends (both inner and outer) with a simple
    border do not fight for the viewer''s attention and nicely blend into the chart.
    The following is a tool tip sample:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 工具提示和图例（包括内边和外边）的圆角以及简单的边框不会与观众的注意力竞争，并且很好地融入图表中。以下是一个工具提示示例：
- en: '![Presentation](img/7451OS_01_05.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![演示](img/7451OS_01_05.jpg)'
- en: 'The following is a legend example with two series:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个带有两个系列的图例示例：
- en: '![Presentation](img/7451OS_01_06.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![演示](img/7451OS_01_06.jpg)'
- en: In a nutshell, each element in Highcharts does not compete with others for the
    viewer's attention, so they share the load equally and work together as a chart.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，Highcharts中的每个元素都不会与其他元素竞争观众的注意力，因此它们平均分担负载并协同工作作为图表。
- en: License
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 许可证
- en: 'Highcharts has free noncommercial as well as commercial licenses. The free
    license for personal and nonprofit purposes is **Creative Commons – Attribution
    Noncommercial 3.0**. Highcharts offers different flavors of commercial license
    for different purposes. They have a one-off single website license and, thankfully,
    a developer license. For web development products, a developer license is a better
    model than charging in units of website use or a very high-priced OEM license
    because of the following reasons:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts提供免费的非商业许可证以及商业许可证。个人和非营利目的的免费许可证是**Creative Commons – Attribution
    Noncommercial 3.0**。Highcharts为不同的目的提供不同类型的商业许可证。他们有一个一次性单网站许可证，幸运的是，还有一个开发者许可证。对于网络开发产品，由于以下原因，开发者许可证比按网站使用单位收费或非常昂贵的OEM许可证是一个更好的模型：
- en: It is easier for software companies to work out the math in their development
    plans
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 软件公司更容易在其开发计划中计算出数学问题
- en: There is less worry regarding how many copies are being sold, so as not to violate
    the license
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于销售了多少副本的担忧较少，以免违反许可证
- en: As usual, a developer license does not automatically grant the use of Highcharts
    indefinitely. The license only permits the unlimited use of all the versions released
    within a year from the license purchase date. Thereafter, a brand new license
    is required if developers decide to use a newer version. Moreover, any condition
    can be negotiated for the OEM license, and the quote is usually based on the number
    of developers on the project and the number of deployments.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 与往常一样，开发者许可证不会自动授予无限期使用Highcharts的权利。许可证仅允许在许可证购买日期起一年内无限期使用所有发布的版本。此后，如果开发者决定使用新版本，则需要全新的许可证。此外，OEM许可证可以协商任何条件，报价通常基于项目中的开发人员数量和部署数量。
- en: Simple API model
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 简单的API模型
- en: Highcharts has a very simple API model. To create a chart, the constructor API
    expects an object specifier with all the necessary settings. To dynamically update
    an existing chart, Highcharts comes with a small set of APIs. The configuration
    properties are described in detail in [Chapter 2](ch02.html "Chapter 2. Highcharts
    Configurations"), *Highcharts Configurations*. The API calls are discussed in
    [Chapter 10](ch10.html "Chapter 10. Highcharts APIs"), *Highcharts APIs*.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts具有非常简单的API模型。要创建图表，构造函数API期望一个包含所有必要设置的指定对象。要动态更新现有图表，Highcharts提供了一组小的API。配置属性在[第2章](ch02.html
    "第2章。Highcharts配置")中详细描述，*Highcharts配置*。API调用在第[10章](ch10.html "第10章。Highcharts
    API")中讨论，*Highcharts API*。
- en: Documentations
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 文档
- en: Highcharts' online documentation is one of the areas that really outshines the
    others. It is not just a simple documentation page that dumps all the definitions
    and examples. It's a documentation page built with thought.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts的在线文档是真正优于其他领域的部分之一。它不仅仅是一个简单的文档页面，将所有定义和示例都堆放在一起。这是一个经过深思熟虑的文档页面。
- en: 'The left-hand side of the documentation page is organized in an object structure,
    as you would pass it to create a chart. You can further expand and collapse the
    object''s attributes as in a JavaScript console. This helps users to become familiar
    with the product by using it naturally:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 文档页面的左侧以对象结构组织，正如您创建图表时传递给它一样。您可以根据JavaScript控制台中的方式进一步展开和折叠对象的属性。这有助于用户通过自然使用来熟悉产品：
- en: '![Documentations](img/7451OS_01_07.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![文档](img/7451OS_01_07.jpg)'
- en: 'The well-thought-out part of the documentation is on the right-hand side with
    the definitions of attributes. Each definition comes with a description and an
    online demonstration for each setting, linking to the jsFiddle website:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 文档中经过深思熟虑的部分在右侧，有属性的说明。每个定义都附带一个描述和每个设置的在线演示，链接到jsFiddle网站：
- en: '![Documentations](img/7451OS_01_08.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![文档](img/7451OS_01_08.jpg)'
- en: This instant jsFiddle demo invites users to explore different property values
    and observe the effect on the chart, so the whole documentation-browsing process
    becomes very effective and fluid.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 这个即时的 jsFiddle 示例邀请用户探索不同的属性值并观察它们对图表的影响，因此整个文档浏览过程变得非常有效且流畅。
- en: Openness (feature request with user voice)
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 开放性（带有用户声音的功能请求）
- en: One important way that Highcharts decides new features for every major release
    is via the users' voice (this is not unusual in open source projects, but it is
    one of the areas in which Highcharts is better than others). Users can submit
    new feature requests and then vote for them. The company then reviews the feature
    requests with the most votes and draws up a development plan that includes the
    new features. The details of the plan are then published on the Highcharts website.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts 决定每个主要版本新功能的一个重要方式是通过用户的反馈（这在开源项目中并不罕见，但 Highcharts 在这个领域优于其他项目）。用户可以提交新的功能请求并对它们进行投票。然后公司审查得票最多的功能请求，并制定包括新功能在内的开发计划。该计划的细节随后发布在
    Highcharts 网站上。
- en: 'In addition, Highcharts is hosted on GitHub, an online public source control
    service, which allows JavaScript developers to contribute and clone their own
    versions:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Highcharts 还托管在 GitHub 上，这是一个在线公共源代码控制服务，允许 JavaScript 开发者贡献并克隆他们自己的版本：
- en: '![Openness (feature request with user voice)](img/7451OS_01_09.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![开放性（带有用户声音的功能请求）](img/7451OS_01_09.jpg)'
- en: Highcharts – a quick tutorial
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Highcharts – 快速教程
- en: 'In this section, you will see how to implement your first Highcharts graph.
    Assuming that we want to run Highcharts from our local web server, first download
    the latest version from the Highcharts website: [http://www.highcharts.com/download](http://www.highcharts.com/download).'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将了解如何实现你的第一个 Highcharts 图表。假设我们想从我们的本地 Web 服务器运行 Highcharts，首先从 Highcharts
    网站下载最新版本：[http://www.highcharts.com/download](http://www.highcharts.com/download)。
- en: 'Alternatively, we can load the library via the **Content Delivery Network**
    (**CDN**), as follows:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们可以通过以下方式通过**内容分发网络**（**CDN**）加载库：
- en: '[PRE10]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: For debugging, `highcharts.src.js` is also available from the CDN.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 对于调试，`highcharts.src.js` 也可以从 CDN 获取。
- en: Directory structure
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 目录结构
- en: 'When you unpack the downloaded ZIP file, you should see the following directory
    structure under the `Highcharts-4.x.x` top-level directory:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 当你解压下载的 ZIP 文件时，你应该在 `Highcharts-4.x.x` 顶级目录下看到以下目录结构：
- en: '![Directory structure](img/7451OS_01_10.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![目录结构](img/7451OS_01_10.jpg)'
- en: 'The following is what each directory contains and is used for:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 以下每个目录包含的内容及其用途：
- en: '`index.html`: This is the demo HTML page, which is the same as the demo page
    on the Highcharts website, so that you can experiment with Highcharts offline.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`index.html`：这是演示 HTML 页面，与 Highcharts 网站上的演示页面相同，这样你就可以离线实验 Highcharts。'
- en: '`examples`: This contains all the source files for the examples.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`examples`：这包含所有示例的源文件。'
- en: '`graphics`: This contains image files used by the examples.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`graphics`：这包含示例中使用的图像文件。'
- en: '`gfx`: This contains an image file required to produce the radial gradient
    effect for browsers that only support VML.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gfx`：这包含一个图像文件，用于为仅支持 VML 的浏览器生成径向渐变效果。'
- en: '`exporting-server`: This directory contains three main components: a Java implementation
    of the online export server, a PhantomJs toolkit to run Highcharts on the service
    side, and server script to service the chart export function using Batik. This
    directory is useful for users who need to set up their own internal export service
    or run Highcharts as a server process. See [Chapter 14](ch14.html "Chapter 14. Server-side
    Highcharts"), *Server-side Highcharts* and [Chapter 15](ch15.html "Chapter 15. Highcharts
    Online Services and Plugins"), *Highcharts Online Services and Plugin*.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exporting-server`：这个目录包含三个主要组件：一个在线导出服务器的 Java 实现、一个用于在服务端运行 Highcharts 的
    PhantomJs 工具包，以及一个使用 Batik 服务的服务器脚本。这个目录对需要设置自己的内部导出服务或作为服务器进程运行 Highcharts 的用户很有用。参见[第
    14 章](ch14.html "第 14 章。服务器端 Highcharts")，*服务器端 Highcharts* 和 [第 15 章](ch15.html
    "第 15 章。Highcharts 在线服务和插件")，*Highcharts 在线服务和插件*。'
- en: '`js`: This is the main directory for Highcharts code. Each JavaScript filename
    has two suffixes: `.src.js`, which contains the source code with comments in it,
    and `.js`, which is the minified version of the JavaScript source file. The `highcharts.js`
    file contains the core functionality and the basic chart implementations, `highcharts-3d.js`
    is the 3D charts extension, and `highcharts.more.js` contains additional series
    such as polar, gauge, bubble, range, waterfall, errobar, and boxplot. `Highcharts-all.js`
    lets users provide all the chart series in their application.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`js`：这是 Highcharts 代码的主要目录。每个 JavaScript 文件名有两个后缀：`.src.js`，其中包含带有注释的源代码，以及
    `.js`，这是 JavaScript 源文件的压缩版本。`highcharts.js` 文件包含核心功能以及基本的图表实现，`highcharts-3d.js`
    是 3D 图表的扩展，而 `highcharts.more.js` 包含额外的系列，如极坐标、仪表、气泡、范围、瀑布、误差条和箱线图。`Highcharts-all.js`
    允许用户在他们的应用程序中提供所有图表系列。'
- en: '`adapters`: This contains the default adapter standalone-framework in source
    and compressed format.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`adapters`：此目录包含默认的适配器 standalone-framework，以源代码和压缩格式提供。'
- en: '`modules`: Since the last edition, Highcharts has created a number of plugin
    modules such as solid-gauge, funnel, exporting, drilldown, canvas-tools and so
    on. This directory contains these plugins.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`modules`：自上一版本以来，Highcharts 创建了许多插件模块，如 solid-gauge、funnel、exporting、drilldown、canvas-tools
    等。此目录包含这些插件。'
- en: Note
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: A third-party tool, canvg, supports Android 2.x, as the native browser has no
    SVG support but can display the canvas.
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 第三方工具 canvg 支持安卓 2.x 版本，因为原生浏览器没有 SVG 支持，但可以显示 canvas。
- en: '`themes`: This has a set of JavaScript files prebuilt with settings such as
    background colors, font styles, axis layouts, and so on. Users can load one of
    these files in their charts for different styles.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`themes`：这包含一组预构建的 JavaScript 文件，其中包含背景颜色、字体样式、坐标轴布局等设置。用户可以在他们的图表中加载这些文件之一以实现不同的样式。'
- en: All you need to do is move the top-level `Highcharts-4.x.x/js` directory inside
    your web server document's root directory.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要做的就是将顶层 `Highcharts-4.x.x/js` 目录移动到您的 Web 服务器文档根目录中。
- en: 'To use Highcharts, you need to include `Highcharts-4.x.x/js/highcharts.js`
    library in your HTML file. The following is an example showing the percentage
    of web browser usage for a public website. The example uses the minimal configuration
    settings for getting you started quickly. The following is the top half of the
    example:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 Highcharts，您需要在您的 HTML 文件中包含 `Highcharts-4.x.x/js/highcharts.js` 库。以下是一个示例，展示了公共网站浏览器使用的百分比。该示例使用最小配置设置，以便您快速开始。以下示例的上半部分：
- en: '[PRE11]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: We use the Google public library service to load the jQuery library version
    1.8.2 before loading the Highcharts library. At the time of writing, the latest
    jQuery version is 2.1.1 and the Highcharts system requirement for jQuery is 1.8.2.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用 Google 公共库服务在加载 Highcharts 库之前加载 jQuery 库版本 1.8.2。在撰写本文时，最新的 jQuery 版本是
    2.1.1，而 Highcharts 对 jQuery 的系统要求是 1.8.2。
- en: 'The second half of the example is the main Highcharts code, as follows:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 示例的第二部分是主要的 Highcharts 代码，如下所示：
- en: '[PRE12]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The spline graph is created via an object specifier that contains all the properties
    and series data required. Once the `chart` object is created, the graph is displayed
    in the browser. Within this object specifier, there are major components corresponding
    to the structure of the chart:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 通过一个包含所有属性和系列数据的对象指定符创建样条图。一旦创建 `chart` 对象，图表就会在浏览器中显示。在这个对象指定符中，有与图表结构相对应的主要组件：
- en: '[PRE13]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The `renderTo` option instructs Highcharts to display the graph onto the HTML
    `<div>` element with `''container''` as the ID value, which is defined in the
    HTML `<body>` section. The `type` option is set to the default presentation type
    as `''spline''` for any series data, as follows:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '`renderTo` 选项指示 Highcharts 在具有 `''container''` ID 值的 HTML `<div>` 元素上显示图表，该
    ID 在 HTML `<body>` 部分中定义。`type` 选项设置为默认的展示类型 `''spline''`，适用于任何系列数据，如下所示：'
- en: '[PRE14]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Next is to set `title` and `subtitle`, which appear in the center at the top
    of the chart:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是设置 `title` 和 `subtitle`，它们出现在图表顶部的中央：
- en: '[PRE15]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The `categories` option in the `xAxis` property contains an array of x-axis
    labels for each data point. Since the graph has at least 50 data points, printing
    each x-axis label will make the text overlap. Rotating the labels still results
    in the axis looking very packed. The best compromise is to print every third label,
    (`tickIntervals: 3`), which makes the labels nicely spaced out from each other.'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '`xAxis`属性的`categories`选项包含每个数据点的x轴标签数组。由于图表至少有50个数据点，打印每个x轴标签将使文本重叠。旋转标签仍然会使轴看起来非常拥挤。最佳折衷方案是每打印第三个标签（`tickIntervals:
    3`），这样标签之间的间距就很好。'
- en: 'For the sake of simplicity, we use 50 entries in `xAxis.categories` to represent
    the time. However, we will see a more optimal and logical way to display date
    and time data in the next chapter:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简化，我们在`xAxis.categories`中使用50个条目来表示时间。然而，我们将在下一章看到一种更优化的、更合理的方式来显示日期和时间数据：
- en: '[PRE16]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The options in `yAxis` are to assign the title of the y-axis and set the minimum
    possible value to zero; otherwise, Highcharts will display a negative percentage
    range along the y-axis, which is not wanted for this data set:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '`yAxis`中的选项是分配y轴的标题并设置可能的最小值为零；否则，Highcharts将在y轴上显示负百分比范围，这对于这个数据集来说是不想要的：'
- en: '[PRE17]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The `plotOptions` property is to control how each series is displayed, according
    to its type (line, pie, bar, and so on). The `plotOptions.series` option is the
    general configuration applied to all the series types instead of defining each
    setting inside the `series` array. In this example, the default `linewidth` for
    every series is set to `2`-pixels wide, as follows:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '`plotOptions`属性用于控制每个系列如何显示，根据其类型（线、饼、柱状等）。`plotOptions.series`选项是应用于所有系列类型的通用配置，而不是在`series`数组内部定义每个设置。在这个例子中，每个系列的默认`linewidth`设置为2像素宽，如下所示：'
- en: '[PRE18]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The `series` property is the heart of the whole configuration object that defines
    all the series data. It is an array of the `series` object. The `series` object
    can be specified in multiple ways. For this example, the name is the name of the
    series that appears in the chart legend and tool tip. The data is an array of
    y-axis values that have the same length as the `xAxis.categories` array, to form
    (x,y) data points:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '`series`属性是整个配置对象的核心，它定义了所有系列数据。它是一个`series`对象的数组。`series`对象可以通过多种方式指定。在这个例子中，名称是出现在图表图例和工具提示中的系列名称。数据是一个y轴值的数组，其长度与`xAxis.categories`数组相同，以形成(x,y)数据点：'
- en: '[PRE19]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Tip
  id: totrans-181
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Downloading the example code**'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '**下载示例代码**'
- en: You can download the example code files from your account at [http://www.packtpub.com](http://www.packtpub.com)
    for all the Packt Publishing books you have purchased. If you purchased this book
    elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从您在[http://www.packtpub.com](http://www.packtpub.com)的账户中下载示例代码文件，以获取您购买的所有Packt
    Publishing书籍。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。
- en: 'The following screenshot shows how the final Highcharts should look on the
    Safari browser:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了在Safari浏览器上最终Highcharts应该看起来是什么样子：
- en: '![Directory structure](img/7451OS_01_11.jpg)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![目录结构](img/7451OS_01_11.jpg)'
- en: 'The following screenshot shows how it should look on the Internet Explorer
    11 browser:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了在Internet Explorer 11浏览器上应该看起来是什么样子：
- en: '![Directory structure](img/7451OS_01_12.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![目录结构](img/7451OS_01_12.jpg)'
- en: 'The following screenshot shows how it should look on the Chrome browser:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了在Chrome浏览器上应该看起来是什么样子：
- en: '![Directory structure](img/7451OS_01_13.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![目录结构](img/7451OS_01_13.jpg)'
- en: 'The following screenshot shows how it should look on the Firefox browser:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了在Firefox浏览器上应该看起来是什么样子：
- en: '![Directory structure](img/7451OS_01_14.jpg)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![目录结构](img/7451OS_01_14.jpg)'
- en: Summary
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: Web charting has been around since the early days of HTML, emerging from server-side
    technology to the client side. During this period, several solutions were adopted
    to work around the shortcomings of HTML. Now, with HTML5, which is rich in features,
    web charting has come back to HTML and this time it is for good, with the aid
    of JavaScript.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 网络图表自HTML的早期以来就已经存在，从服务器端技术发展到客户端。在此期间，采用了几种解决方案来克服HTML的不足。现在，随着功能丰富的HTML5的出现，网络图表又回到了HTML，这次它是为了永远，得益于JavaScript。
- en: A number of JavaScript chart products were mentioned in this chapter. Among
    these, Highcharts emerged with a distinct graphical style and smooth user interactions.
    We also went through a simple chart example to experience how quick and easy it
    is to create our very first Highcharts chart.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 本章提到了许多JavaScript图表产品。在这些产品中，Highcharts凭借其独特的图形风格和流畅的用户交互脱颖而出。我们还通过一个简单的图表示例来体验创建我们第一个Highcharts图表是多么快捷和简单。
- en: In the next chapter, we will explore the Highcharts configuration object in
    greater detail with plenty more examples. The configuration object is the core
    part of the product that the structure serves as the common prototype for all
    the charts.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将更深入地探讨Highcharts配置对象，并附带更多示例。配置对象是产品的核心部分，其结构作为所有图表的共同原型。
