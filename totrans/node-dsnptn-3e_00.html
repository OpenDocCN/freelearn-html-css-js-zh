<html><head></head><body>
  <div id="_idContainer006">
    <h1 id="_idParaDest-4" class="Introduction-Title--PACKT-">Preface</h1>
    <p class="normal">Node.js is considered by many a game-changer—possibly the biggest innovation of the decade in web development. It is loved not just for its technical capabilities, but also for the paradigm shift that it introduced in web development and, in general, in the software development ecosystem.</p>
    <p class="normal">First, Node.js applications are written in JavaScript, the most adopted language on the web and the only programming language supported natively by every web browser. This aspect enables scenarios such as single-language application stacks and the sharing of code between the server and the client. A single language also helps to reduce the gap between frontend and backend engineers, making backend programming extremely approachable and intuitive for frontend developers. Once you are acquainted with Node.js and JavaScript, you can easily build software for a wide variety of platforms and contexts.</p>
    <p class="normal">Node.js itself is contributing to the rise and evolution of the JavaScript language. People realize that using JavaScript on the server brings a lot of value, and they are loving it for its pragmatism, for its flexibility, its event-driven approach, and for its hybrid nature, halfway between object-oriented and functional programming.</p>
    <p class="normal">The second revolutionizing factor is Node.js' single-threaded programming model and its asynchronous architecture. Besides obvious advantages from a performance and scalability point of view, this characteristic changed the way developers approach concurrency and parallelism. Mutexes are replaced by queues, threads by callbacks, and synchronization by causality. These abstractions are generally simpler to adopt than their traditional counterparts, but they are still extremely powerful, allowing developers to be very productive while solving day-to-day challenges.</p>
    <p class="normal">The last and most important aspect of Node.js lies in its ecosystem: the npm package manager, its constantly growing database of modules, its enthusiastic and helpful community, and most importantly, its very own culture based on simplicity, pragmatism, and extreme modularity.</p>
    <p class="normal">However, because of these peculiarities, Node.js development gives you a very different feel compared to other server-side platforms, and any developer new to this paradigm will often feel unsure about how to tackle even the most common design and coding problems effectively. Common questions include: <em class="italic">How do I organize my code? What's the best way to design this? How can I make my application more modular? How do I handle a set of asynchronous calls effectively? How can I make sure that my application will not collapse while it grows?</em> Or more simply, <em class="italic">what's the right way to implement this?</em> Fortunately, Node.js has become a mature enough platform and most of these questions can now be easily answered with a design pattern, a proven coding technique, or a recommended practice. The aim of this book is to guide you through this emerging world of patterns, techniques, and practices, showing you what the proven solutions to the most common problems are and teaching you how to use them as the starting point to building the solution to your particular problem.</p>
    <p class="normal">By reading this book, you will learn the following:</p>
    <ul>
      <li class="Bullet--PACKT-"><strong class="keyword">The "Node way"</strong>:<p class="Bullet-Without-Bullet-Within-Bullet--PACKT-">How to use the right point of view when approaching Node.js development. You will learn, for example, how different traditional design patterns look in Node.js, or how to design modules that do only one thing.</p>
      </li>
      <li class="Bullet--PACKT-"><strong class="keyword">A set of patterns to solve common Node.js design and coding problems</strong>:<p class="Bullet-Without-Bullet-Within-Bullet--PACKT-">You will be presented with a "Swiss Army knife" of patterns, ready to use in order to efficiently solve your everyday development and design problems.</p>
      </li>
      <li class="Bullet--PACKT-"><strong class="keyword">How to write scalable and efficient Node.js applications</strong>:<p class="Bullet-Without-Bullet-Within-Bullet--PACKT-">You will gain an understanding of the basic building blocks and principles of writing large and well-organized Node.js applications that can scale. You will be able to apply these principles to novel problems that don't fall within the scope of existing patterns.</p>
      </li>
      <li class="Bullet--PACKT-"><strong class="keyword">Code in "modern JavaScript"</strong>:<p class="Bullet-Without-Bullet-Within-Bullet-End--PACKT-">JavaScript has been around since 1995, but a lot has changed since its first inception, especially in these last few years. This book will take advantage of the most modern JavaScript features, like the class syntax, promises, generator functions, and async/await, giving you a properly up-to-date experience.</p>
      </li>
    </ul>
    <p class="normal">Throughout the book, you will be presented with real-life libraries and technologies, such as LevelDB, Redis, RabbitMQ, ZeroMQ, Express, and many others. They will be used to demonstrate a pattern or technique, and besides making the example more useful, these will also give you great exposure to the Node.js ecosystem and its set of solutions.</p>
    <p class="normal">Whether you use or plan to use Node.js for your work, your side project, or for an open source project, recognizing and using well-known patterns and techniques will allow you to use a common language when sharing your code and design, and on top of that, it will help you get a better understanding of the future of Node.js and how to make your own contributions a part of it.</p>
    <h1 id="_idParaDest-5" class="title">What you need for this book</h1>
    <p class="normal">To experiment with the code, you will need a working installation of Node.js version 14 (or greater) and npm version 6 (or greater). If some examples will require you to use some extra tooling, these will be described accordingly in place. You will also need to be familiar with the command line, know how to install an npm package, and know how to run Node.js applications. Finally, you will need a text editor to work with the code and a modern web browser.</p>
    <h1 id="_idParaDest-6" class="title">Who this book is for</h1>
    <p class="normal">This book is for developers who have already had initial contact with Node.js and now want to get the most out of it in terms of productivity, design quality, and scalability. You are only required to have some prior exposure to the technology through some basic examples and some degree of familiarity with the JavaScript language, since this book will cover some basic concepts as well. Developers with intermediate experience in Node.js will also find the techniques presented in this book beneficial.</p>
    <p class="normal">Some background in software design theory is also an advantage to understand some of the concepts presented.</p>
    <p class="normal">This book assumes that you have a working knowledge of web application development, web services, databases, and data structures.</p>
    <h1 id="_idParaDest-7" class="title">What this book covers</h1>
    <p class="normal"><em class="chapterRef">Chapter 1</em>, <em class="italic">The Node.js Platform</em>, serves as an introduction to the world of Node.js application design by showing the patterns at the core of the platform itself. It covers the Node.js ecosystem and its philosophy, and provides a quick introduction to the Node.js internals and the reactor pattern.</p>
    <p class="normal"><em class="chapterRef">Chapter 2</em>, <em class="italic">The Module System</em>, dives into the module systems available in Node.js, underlining the differences between CommonJS and the more modern ES modules from the ECMAScript 2015 specification.</p>
    <p class="normal"><em class="chapterRef">Chapter 3</em>, <em class="italic">Callbacks and Events</em>, introduces the first steps towards learning asynchronous coding and its patterns, discussing and comparing callbacks and the event emitter (observer pattern).</p>
    <p class="normal"><em class="chapterRef">Chapter 4</em>, <em class="italic">Asynchronous Control Flow Patterns with Callbacks</em>, introduces a set of patterns and techniques for efficiently handling asynchronous control flow in Node.js using callbacks. This chapter teaches you some traditional ways to mitigate the "callback hell" problem using plain JavaScript.</p>
    <p class="normal"><em class="chapterRef">Chapter 5</em>, <em class="italic">Asynchronous Control Flow Patterns with Promises and Async/Await</em>, progresses with the exploration of more sophisticated and modern asynchronous control flow techniques.</p>
    <p class="normal"><em class="chapterRef">Chapter 6</em>, <em class="italic">Coding with Streams</em>, dives deep into one of the most important tools in Node.js: streams. It shows you how to process data with transform streams and how to combine them into different patterns.</p>
    <p class="normal"><em class="chapterRef">Chapter 7</em>, <em class="italic">Creational Design Patterns</em>, starts to explore the traditional design patterns in Node.js. In this chapter, you will learn about some of the most popular creational design patterns, namely the <em class="italic">Factory</em> pattern, the <em class="italic">Revealing Constructor</em> pattern, the <em class="italic">Builder</em> pattern, and the <em class="italic">Singleton</em> pattern.</p>
    <p class="normal"><em class="chapterRef">Chapter 8</em>, <em class="italic">Structural Design Patterns</em>, continues the exploration of traditional design patterns in Node.js, covering structural design patterns such as <em class="italic">Proxy</em>, <em class="italic">Decorator</em>, and <em class="italic">Adapter</em>.</p>
    <p class="normal"><em class="chapterRef">Chapter 9</em>, <em class="italic">Behavioral Design Patterns</em>, concludes the conversation around traditional design patterns in Node.js by introducing behavioral design patterns like <em class="italic">Strategy</em>, <em class="italic">State</em>, <em class="italic">Template</em>, <em class="italic">Middleware</em>, <em class="italic">Command</em>, and <em class="italic">Iterator</em>.</p>
    <p class="normal"><em class="chapterRef">Chapter 10</em>, <em class="italic">Universal JavaScript for Web Applications</em>, explores one of the most interesting capabilities of modern JavaScript web applications: being able to share code between the frontend and the backend. Throughout this chapter, you will learn the basic principles of Universal JavaScript by building a simple web application using modern tools and libraries.</p>
    <p class="normal"><em class="chapterRef">Chapter 11</em>, <em class="italic">Advanced Recipes</em>, takes a problem-solution approach to show you how some common coding and design intricacies can be approached with ready-to-use solutions.</p>
    <p class="normal"><em class="chapterRef">Chapter 12</em>, <em class="italic">Scalability and Architectural Patterns</em>, teaches you the basic techniques and patterns for scaling a Node.js application.</p>
    <p class="normal"><em class="chapterRef">Chapter 13</em>, <em class="italic">Messaging and Integration Patterns</em>, presents the most important messaging patterns, teaching you how to build and integrate complex distributed systems using Node.js and its ecosystem.</p>
    <h1 id="_idParaDest-8" class="title">To get the most out of this book</h1>
    <p class="normal">To get the most out of this book you can download the example code files and the color images as per the instructions below.</p>
    <h2 id="_idParaDest-9" class="title">Download the example code files</h2>
    <p class="normal">You can download the example code files for this book from your account at <a href="http://www.packt.com/"><span class="url">www.packt.com/</span></a>. If you purchased this book elsewhere, you can visit <a href="http://www.packtpub.com/support"><span class="url">www.packtpub.com/support</span></a> and register to have the files emailed directly to you.</p>
    <p class="normal">You can download the code files by following these steps:</p>
    <ol>
      <li class="numbered">Log in or register at <a href="http://www.packt.com"><span class="url">http://www.packt.com</span></a>.</li>
      <li class="numbered">Select the <strong class="screenText">Support</strong> tab.</li>
      <li class="numbered">Click on <strong class="screenText">Code Downloads</strong>.</li>
      <li class="numbered">Enter the name of the book in the <strong class="screenText">Search</strong> box and follow the on-screen instructions.</li>
    </ol>
    <p class="normal">Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p>
    <ul>
      <li class="Bullet--PACKT-">WinRAR / 7-Zip for Windows</li>
      <li class="Bullet--PACKT-">Zipeg / iZip / UnRarX for macOS</li>
      <li class="Bullet-End--PACKT-">7-Zip / PeaZip for Linux</li>
    </ul>
    <p class="normal">The code bundle for the book is also hosted on GitHub at <a href="http://nodejsdp.link/repo"><span class="url">nodejsdp.link/repo</span></a>. In case there's an update to the code, it will be updated on the existing GitHub repository.</p>
    <p class="normal">We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/"><span class="url">https://github.com/PacktPublishing/</span></a>. Check them out!</p>
    <h2 id="_idParaDest-10" class="title">Download the color images</h2>
    <p class="normal">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://static.packt-cdn.com/downloads/9781839214110_ColorImages.pdf"><span class="url">https://static.packt-cdn.com/downloads/9781839214110_ColorImages.pdf</span></a>.</p>
    <h2 id="_idParaDest-11" class="title">Conventions used</h2>
    <p class="normal">In this book, you will find a number of text styles that distinguish between different kinds of information. Here are some examples of these styles and an explanation of their meaning:</p>
    <ul>
      <li class="Bullet--PACKT-"><strong class="keyword">Code words in text</strong>: <code class="Code-In-Text--PACKT-">server.listen(handle)</code></li>
      <li class="Bullet--PACKT-"><strong class="keyword">Pathname</strong>: <code class="Code-In-Text--PACKT-">src/app.js</code></li>
      <li class="Bullet-End--PACKT-"><strong class="keyword">Dummy URL</strong>: <code class="Code-In-Text--PACKT-">http://localhost:8080</code></li>
    </ul>
    <p class="normal">A block of code is generally formatted using StandardJS conventions (<a href="http://nodejsdp.link/standard"><span class="url">nodejsdp.link/standard</span></a>) and it is set as follows:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> zmq <span class="hljs-keyword">from</span> <span class="hljs-string">'zeromq'</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">main</span><span class="hljs-function"> () </span>{
  <span class="hljs-keyword">const</span> sink = <span class="hljs-keyword">new</span> zmq.Pull()
  <span class="hljs-keyword">await</span> sink.bind(<span class="hljs-string">'tcp://*:5017'</span>)
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> rawMessage <span class="hljs-keyword">of</span> sink) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Message from worker: '</span>, rawMessage.toString())
  }
}
</code></pre>
    <p class="normal">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are highlighted in bold:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> ws.Server({ server })
wss.on(<span class="hljs-string">'connection'</span>, <span class="hljs-params">client</span><span class="hljs-function"> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Client connected'</span>)
  client.on(<span class="hljs-string">'message'</span>, <span class="hljs-params">msg</span><span class="hljs-function"> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Message: </span><span class="hljs-subst">${msg}</span><span class="hljs-string">`</span>)
    <strong class="hljs-slc">redisPub.publish(</strong><strong class="hljs-string-slc">'chat_messages'</strong><strong class="hljs-slc">, msg)</strong>
  })
})
</code></pre>
    <p class="normal">Any command-line input or output is written as follows:</p>
    <pre class="programlisting con"><code class="hljs-con">node replier.js
node requestor.js
</code></pre>
    <p class="normal"><strong class="keyword">New terms</strong> and <strong class="keyword">important words</strong> are shown in bold. Words that you see on the screen, for example, in menus or dialog boxes, appear in the text like this: "To explain the problem, we will create a little <strong class="keyword">web spider</strong>, a command-line application that takes in a web URL as the input and downloads its contents locally into a file."</p>
    <div class="note">
      <p class="Information-Box--PACKT-">Warnings or important notes appear like this.</p>
    </div>
    <div class="packt_tip">
      <p class="Tip--PACKT-">Tips and tricks appear like this.</p>
    </div>
    <p class="normal">Most URLs are linked through our own short URL system to make it easier for readers coming through the print edition to access them. These links are in the form <a href="http://nodejsdp.link/some-descriptive-id"><span class="url">nodejsdp.link/some-descriptive-id</span></a>.</p>
    <h1 id="_idParaDest-12" class="title">Get in touch</h1>
    <p class="normal">Feedback from our readers is always welcome.</p>
    <p class="normal"><strong class="keyword">General feedback</strong>: If you have questions about any aspect of this book, mention the book title in the subject of your message and email us at <code class="Code-In-Text--PACKT-">customercare@packtpub.com</code>.</p>
    <p class="normal"><strong class="keyword">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you could report this to us. Please visit <a href="http://www.packtpub.com/support/errata"><span class="url">www.packtpub.com/support/errata</span></a>, select your book, click on the <strong class="keyword">Errata Submission Form</strong> link, and enter the details.</p>
    <p class="normal"><strong class="keyword">Piracy</strong>: If you come across any illegal copies of our works in any form on the Internet, we would be grateful if you could provide us with the location address or website name. Please contact us at <code class="Code-In-Text--PACKT-">copyright@packt.com</code> with a link to the material.</p>
    <p class="normal"><strong class="keyword">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com"><span class="url">authors.packtpub.com</span></a>.</p>
    <h2 id="_idParaDest-13" class="title">Reviews</h2>
    <p class="normal">Please leave a review. Once you have read and used this book, why not leave a review on the site that you purchased it from? Potential readers can then see and use your unbiased opinion to make purchase decisions, we at Packt can understand what you think about our products, and our authors can see your feedback on their book. Thank you!</p>
    <p class="normal">For more information about Packt, please visit <a href="http://packt.com"><span class="url">packt.com</span></a>.</p>
  </div>
</body></html>