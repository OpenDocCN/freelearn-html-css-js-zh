<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Let's Go to the Movies!</h1></div></div></div><p>It didn't take long after the introduction of cameras on phones to ask the question, "What about <a id="id729" class="indexterm"/>video?" Initially video recording <a id="id730" class="indexterm"/>was hampered by the limited space on phones as well as the hardware. It is one thing to snap a few JPEG files that might be a few hundred kilobytes each, but it is entirely another thing to take a video longer than a few seconds that doesn't add up to a pretty large file size. Furthermore, video has to be encoded and compressed, something that can be done in software, but is much better done in hardware.</p><p>When video recording did become practical, it changed the way we saw the world. Suddenly it was possible to have footage of news happening anywhere there was a cell phone – practically everywhere. Video recording became common place, so chances are good that there are very few handsets today that don't support it. In this project, we'll take a look at recording and playing video in our apps.</p><div><div><div><div><h1 class="title"><a id="ch07lvl1sec61"/>What do we build?</h1></div></div></div><p>In all honesty, we're<a id="id731" class="indexterm"/>
<a id="id732" class="indexterm"/> going to be building our <a class="link" href="ch06.html" title="Chapter 6. Say Cheese!">Project 6</a>, <em>Say Cheese!</em>. Remember that one? Instead of working with still pictures, we'll be working with videos instead.</p><p>While the user interface and a good percentage of the code will be the same, video does present some interesting challenges. For example, how does one get a thumbnail of a video? We all know how a thumbnail should look, but how does one actually get it? Or, frankly, how do we do more than simply display the video? How do we enable playback?</p><p>Unfortunately (or fortunately, depending on your viewpoint), we'll need to delve into some native code in order to accomplish these tasks. The tasks themselves aren't complicated, but PhoneGap doesn't provide support for thumbnails of videos, and the Android platform doesn't provide good support for the HTML5<a id="id733" class="indexterm"/> <code class="literal">VIDEO</code> tag, so we'll have to use<a id="id734" class="indexterm"/>
<a id="id735" class="indexterm"/> another plugin for playing video as well.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec132"/>What does it do?</h2></div></div></div><p>Our app, called<a id="id736" class="indexterm"/> <code class="literal">Mem'ry</code> (we've got to be <em>hip</em> by leaving vowels out, right?) will allow the user to record video from within the app. Any recorded videos can be played back. Furthermore, we'll use the same document management we've used before to permit management of these files—deletion, duplication, and renaming.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec133"/>Why is it great?</h2></div></div></div><p>Let's face it, recording <a id="id737" class="indexterm"/>video isn't something that a lot of apps have to deal with. But playing it back? That's a much larger percentage of apps. Therefore, it is very important that you know how to play videos for the end user, but should you ever need to record video as well, this app will give you the tools necessary for that as well.</p><p>We'll also delve into some areas that PhoneGap doesn't really provide any support for. It's not so much PhoneGap's fault, really, it's more that videos aren't simply a collection of images. They're compressed and encoded, and there's no obvious way to get a thumbnail of a video and display it as an image in HTML, which is what we've been using so far when working with PhoneGap. A thumbnail of an image, of course, is easy: just scale the image down. A thumbnail of a video? Not so easy; you've got to construct it from the compressed and encoded file, and HTML doesn't know how to do that. Fortunately, the SDKs provided on the most popular platforms make it easy, but we'll have to do some native coding to get there.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec134"/>How are we going to do it?</h2></div></div></div><p>We'll be <a id="id738" class="indexterm"/>following these steps:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Preparing for the video thumbnail plugin</li><li class="listitem" style="list-style-type: disc">Implementing the video thumbnail plugin for iOS</li><li class="listitem" style="list-style-type: disc">Implementing the video thumbnail plugin for Android</li><li class="listitem" style="list-style-type: disc">Integrating with the video thumbnail plugin</li><li class="listitem" style="list-style-type: disc">Implementing recording and importing of video</li><li class="listitem" style="list-style-type: disc">Implementing video playback</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec135"/>What do I need to get started?</h2></div></div></div><p>First, make <a id="id739" class="indexterm"/>sure to get the files for this project from the download available for this book. We won't be listing the code in its entirely, since it is so similar to that in <a class="link" href="ch06.html" title="Chapter 6. Say Cheese!">Project 6</a>, <em>Say Cheese!</em>, so in order for you to follow along you should either have a quick reference to your previous project or the one from our files.</p><p>Second, be sure to download the Android Video Player plugin from <a class="ulink" href="https://github.com/phonegap/phonegap-plugins/tree/master/Android/VideoPlayer">https://github.com/phonegap/phonegap-plugins/tree/master/Android/VideoPlayer</a>. In this project, we used the plugin for PhoneGap version 2.x and higher.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec62"/>Preparing for the video thumbnail plugin</h1></div></div></div><p>Our app is practically identical <a id="id740" class="indexterm"/>
<a id="id741" class="indexterm"/>with regards to the prior project's user interface and its interactions, so we won't go through the entire design process. Instead, we'll start right off with implementing the video thumbnail plugin.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec136"/>Getting ready</h2></div></div></div><p>We'll be getting our hands dirty with native code for the first time in this book. While we've used plugins before<a id="id742" class="indexterm"/> (the ChildBrowser plugin in <a class="link" href="ch02.html" title="Chapter 2. Let's Get Social!">Project 2</a>, <em>Let's Get Social!</em>), we've never created our own yet. Since we support more than one platform, we'll also have to write the plugin more than once.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec137"/>Getting on with it</h2></div></div></div><p>This task is essentially composed of three steps:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Configuring the project to use the plugins</li><li class="listitem" style="list-style-type: disc">Creating the JavaScript interface</li><li class="listitem" style="list-style-type: disc">Creating the native code</li></ul></div><p>The first two tasks are quite simple, but the last one, well, we'll cross that bridge in a few pages.</p><div><div><div><div><h3 class="title"><a id="ch07lvl3sec03"/>Configuring the project to use the plugins</h3></div></div></div><p>The first thing we need<a id="id743" class="indexterm"/>
<a id="id744" class="indexterm"/> to do is to configure the projects we're building to use the new plugin. The steps are different for each platform, but at a <em>high level</em> they are essentially the same thing. We're telling PhoneGap about the plugin and that it is available for use. The steps are as follows for the different platforms:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">iOS<div><ol class="orderedlist arabic"><li class="listitem">Using Xcode, navigate to the <code class="literal">Cordova.plist</code> file.</li><li class="listitem">Expand the <strong>Plugins</strong> section.</li><li class="listitem">Click on the <strong>+</strong> sign that appears when hovering over a plugin. This will inserta new row.</li><li class="listitem">Add <code class="literal">PKVideoThumbnail</code> as the key, and <code class="literal">PKVideoThumbnail</code> as the value.</li><li class="listitem">Save the file.</li><li class="listitem">Go to the <code class="literal">index.html</code> file and add the <code class="literal">PKVideoThumbnail.js</code> script filegiven as follows:<div><pre class="programlisting">    &lt;script type="application/javascript" charset="utf-8" src="img/PKVideoThumbnail.js"&gt;
    &lt;/script&gt;</pre></div></li></ol></div></li><li class="listitem" style="list-style-type: disc">Android<div><ol class="orderedlist arabic"><li class="listitem">Using Eclipse, navigate to the <code class="literal">/res/xml/config.xml</code> file and open it. If you aren't presented with the editable XML, switch to the XML text editor view.</li><li class="listitem">Find the <strong>Plugin</strong> section of the XML file.</li><li class="listitem">Add the following line:<div><pre class="programlisting">	&lt;plugin name="PKVideoThumbnail" value="com.kerrishotts.PKVideoThumbnail.PKVideoThumbnail"/&gt;</pre></div></li><li class="listitem">Save the file.</li><li class="listitem">Go to the <code class="literal">index_android.html</code> file and add the <code class="literal">PKVideoThumnail.js</code> script file given as follows:<div><pre class="programlisting">    &lt;script type="application/javascript" charset="utf-8" src="img/PKVideoThumbnail.js"&gt;
    &lt;/script&gt;</pre></div></li></ol></div></li></ul></div><p>All this does is tell PhoneGap that we're going to have a plugin available with the name of <code class="literal">PKVideoThumbnail</code>. Without this, the app wouldn't work correctly, since it wouldn't know how to contact the plugin.</p></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec04"/>Creating the JavaScript interface</h3></div></div></div><p>While it is technically<a id="id745" class="indexterm"/>
<a id="id746" class="indexterm"/> possible to call a plugin without having any corresponding <code class="literal">.js</code> file, it is a fact that it is often easier to create an interface so that calling the plugin is just a little bit easier. The interface files will be nearly identical, but the iOS version will be just enough different that it wouldn't work under the Android platform and vice versa.</p><p>Under the <code class="literal">www/plugins/iOS</code> directory, create a file called <code class="literal">PKVideoThumbnail.js</code> with the following contents:</p><div><pre class="programlisting">var PKVideoThumbnail = PKVideoThumbnail || {};

PKVideoThumbnail.createThumbnail = function ( source, target, success, failure )
{
    cordova.exec(success, failure,
    "PKVideoThumbnail",
    "createThumbnail",
     ["file://localhost" + source, target]);
}</pre></div><p>What the preceding code does is simply create an easy-to-use wrapper call that lets us call <code class="literal">PKVideoThumbnail.createThumbnail()</code> whenever we need to get a video's thumbnail instead of using <code class="literal">cordova.exec(some_function,error_function,"PKVideoThumbnail","createThumbnail",[…])</code>.</p><p>For some plugins that offer a lot of functionality, the JavaScript interface essentially acts as a go-between. It translates arguments to what the plugin can understand, and then handles the return results when returning back to JavaScript. In our case, the wrapper is pretty small.</p><p>For the Android version, create a file named <code class="literal">PKVideoThumbnail.js</code> under <code class="literal">www/plugins/Android</code> with these contents:</p><div><pre class="programlisting">var PKVideoThumbnail = PKVideoThumbnail || {};

PKVideoThumbnail.createThumbnail = function ( source, target, success, failure )
{
    cordova.exec(success, failure,
    "PKVideoThumbnail",
    "createThumbnail",
     [source, target]);
}</pre></div><p>Could you spot the difference between the two files?</p><p>I'll give you a clue: look at the penultimate line, just before <code class="literal">source</code>. The iOS version adds <code class="literal">file://localhost</code>, while the Android version doesn't. Small detail, but without it, the iOS version of the app wouldn't work.</p></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec138"/>What did we do?</h2></div></div></div><p>In this task, <a id="id747" class="indexterm"/>
<a id="id748" class="indexterm"/>we modified the project settings so that the project knows about the plugin we're about to create. We also created the JavaScript interface for both iOS and Android that will permit us to communicate with the native code.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec63"/>Implementing the video thumbnail plugin for iOS</h1></div></div></div><p>The iOS version of the video<a id="id749" class="indexterm"/>
<a id="id750" class="indexterm"/>
<a id="id751" class="indexterm"/> thumbnail will use a <em>hidden</em> video player to construct the thumbnail. Technically, we could use another library, but the video player is so convenient and fast when it comes to building images from videos. We hide it to ensure that the user will never actually see what's going on.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec139"/>Getting ready</h2></div></div></div><p>To start, let's create a new <strong>Objective-C class</strong> within Xcode. The easiest way is to right-click on the <strong>Plugins</strong> folder and select <strong>New File...</strong>, as seen in the following screenshot:</p><div><img src="img/9403_07_01.jpg" alt="Getting ready"/></div><p>It's important<a id="id752" class="indexterm"/>
<a id="id753" class="indexterm"/>
<a id="id754" class="indexterm"/> that you use the <strong>Plugins</strong> folder that is a sibling to the <strong>Other Sources</strong> and <strong>Resources</strong> directories; not the one within the <strong>www</strong> directory.</p><div><img src="img/9403_07_02.jpg" alt="Getting ready"/></div><p>Next, ensure the <strong>Cocoa Touch</strong> category is selected and then select the <strong>Objective-C class</strong> icon. Click on <strong>Next</strong>.</p><div><img src="img/9403_07_03.jpg" alt="Getting ready"/></div><p>Then give the<a id="id755" class="indexterm"/>
<a id="id756" class="indexterm"/>
<a id="id757" class="indexterm"/> class a name, in this case <code class="literal">PKVideoThumbnail</code>, and ensure that it is a subclass of <code class="literal">CDVPlugin</code>. Click on <strong>Next</strong> again, and then you'll be prompted to verify where you want to save the files. It should be set to the <strong>Plugins</strong> folder; if not, be sure to navigate there before completing the task.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec140"/>Getting on with it</h2></div></div></div><p>Now that we have the <code class="literal">.h</code> and <code class="literal">.m</code> files, we need to fill them in. Let's start with the <code class="literal">.h</code> file first. The following is the <em>interface</em> or <em>specification</em> for the class:</p><div><pre class="programlisting">#import &lt;Cordova/CDVPlugin.h&gt;

@interface PKVideoThumbnail : CDVPlugin

 #if CORDOVA_VERSION_MIN_REQUIRED &lt;= __CORDOVA_2_0_0
- (void) createThumbnail:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;
 #else
- (void) createThumbnail:(CDVInvokedUrlCommand*)command;
 #endif
@end</pre></div><p>What we're doing in the preceding code is defining a method called <code class="literal">createThumbnail</code> that will be executed whenever we call <code class="literal">PKideoThumbnail.createThumbnail()</code> from JavaScript.</p><p>Take note of the <code class="literal">#if…#else…#endif</code> construct; PhoneGap changed their method signature between versions 2.0 and 2.1, and so this handles both variations.</p><p>So far, though, we've not written any substantive code yet; we've been <em>declaring</em> or <em>defining</em> thus far. Let's change that by working on the <code class="literal">.m</code> file as shown in the following code snippet:</p><div><pre class="programlisting">#import "PKVideoThumbnail.h"
#import &lt;Cordova/CDVPluginResult.h&gt;
#import &lt;MediaPlayer/MediaPlayer.h&gt;</pre></div><p>First, we import several libraries that we need in order to construct our plugin. We also import our <code class="literal">.h</code> file as well; otherwise, the compiler would complain.</p><div><pre class="programlisting">@implementation PKVideoThumbnail

BOOL extractVideoThumbnail ( NSString *theSourceVideoName,NSString *theTargetImageName )
{
    UIImage *thumbnail;</pre></div><p>Next, we define a method <a id="id758" class="indexterm"/>called <code class="literal">extractVideoThumbnail</code> that takes two parameters, namely, the path to the video and the location and name we should use when creating the image. Our method will return <code class="literal">YES</code> if we're successful, and <code class="literal">NO</code> if not. (This is the Objective-C Boolean equivalent to <code class="literal">TRUE</code> and <code class="literal">FALSE</code>.)</p><p>We also <a id="id759" class="indexterm"/>
<a id="id760" class="indexterm"/>
<a id="id761" class="indexterm"/>define a <code class="literal">thumbnail</code> of the type <code class="literal">UIImage</code>. The <em>asterisk</em> (<code class="literal">*</code>) indicates that this is a pointer – something very important in C-based languages. Essentially you'll use one whenever declaring a variable or parameter that's an object. When using numbers, you wouldn't use an asterisk, but in this case, we're only declaring one variable to start.</p><div><pre class="programlisting">    // BASED ON http://stackoverflow.com/a/6432050 //
    MPMoviePlayerController *mp = [[MPMoviePlayerController 
    alloc]
      initWithContentURL: [NSURL 
      URLWithString:theSourceVideoName] ];
    mp.shouldAutoplay = NO;
    mp.initialPlaybackTime = 1;
    mp.currentPlaybackTime = 1;</pre></div><p>The next thing we do is declare and create <code class="literal">MPMoviePlayerController</code>. It's an object, so it gets the asterisk as well. We'll name it <code class="literal">mp</code> for short.</p><p>We pass in the path to the video, which needs to be prefixed with <code class="literal">file://localhost</code>; remember that we do this in <code class="literal">PKVideoThumbnail.js</code>.</p><p>Then we set the playback time to <code class="literal">1</code> second in, and indicate that it shouldn't auto play. We just want a single image from the video, so we don't want to actually play it for the user yet.</p><div><pre class="programlisting">    thumbnail = [mp thumbnailImageAtTime:1
    timeOption:MPMovieTimeOptionNearestKeyFrame];
     [mp stop];
     [mp release];</pre></div><p>Next we ask for the image nearest the 1 second point in the movie. Since compression and encoding in movies uses key frames, we may not get the image at the exact 1 second mark, but it should be pretty close.</p><div><pre class="programlisting">    return [UIImageJPEGRepresentation ( thumbnail, 1.0) writeToFile:theTargetImageName atomically:YES];</pre></div><p>Finally, we save the thumbnail out to the desired file – our JavaScript will generally use the name of the movie and add a <code class="literal">.jpg</code> extension. The return value of the operation will either be <code class="literal">YES</code> or <code class="literal">NO</code>. If it is <code class="literal">NO</code>, the thumbnail wasn't successfully written.</p><div><pre class="programlisting">}

 #if CORDOVA_VERSION_MIN_REQUIRED &lt;= __CORDOVA_2_0_0</pre></div><p>Next up, we need to define the plugin handler for PhoneGap version 2.0 or lower:</p><div><pre class="programlisting">- (void) createThumbnail:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options
{
    NSString* callbackId = [arguments objectAtIndex:0];
    CDVPluginResult* pluginResult = nil;
    NSString* javaScript = nil;</pre></div><p>These three<a id="id762" class="indexterm"/>
<a id="id763" class="indexterm"/>
<a id="id764" class="indexterm"/> variables are always defined in plugins. They are critical to the functioning of the plugin. The first is a unique ID that PhoneGap uses to track calls between JavaScript and native code. The second is the result of our plugin's activities; we can use it to pass data back to JavaScript. The last one is the resulting JavaScript of the return code; this is used to call the success or failure routine.</p><div><pre class="programlisting">    @try {
        NSString* theSourceVideoName = [arguments objectAtIndex:1];
        NSString* theTargetImageName = [arguments objectAtIndex:2];</pre></div><p>Next, we obtain the two parameters that should have been passed to the plugin.</p><div><pre class="programlisting">        if ( extractVideoThumbnail(theSourceVideoName, theTargetImageName) )
        {
          pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:theTargetImageName];
          javaScript = [pluginResult toSuccessCallbackString:callbackId];
        }
        else
        {
          pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR messageAsString:theTargetImageName];
          javaScript = [pluginResult toErrorCallbackString:callbackId];
        }</pre></div><p>We call the <code class="literal">extractVideoThumbnail</code> method with the two parameters. As we said before, if it returns <code class="literal">YES</code>, then it worked, and so our plugin result will be an OK. If it returns <code class="literal">NO</code>, we'll return an error result instead.</p><div><pre class="programlisting">    } @catch (NSException* exception) {
      pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_JSON_EXCEPTION messageAsString:[exception reason]];
      javaScript = [pluginResult toErrorCallbackString:callbackId];
    }

     [self writeJavascript:javaScript];
}</pre></div><p>The <code class="literal">@catch</code> block<a id="id765" class="indexterm"/> here is also important; it catches any errors that occur within the<a id="id766" class="indexterm"/> <code class="literal">@try</code> block. This might occur if something really went wrong <a id="id767" class="indexterm"/>
<a id="id768" class="indexterm"/>
<a id="id769" class="indexterm"/>or the wrong number (or type) of parameters were sent.</p><div><pre class="programlisting"> #else
- (void) createThumbnail:(CDVInvokedUrlCommand*)command
{
    CDVPluginResult* pluginResult = nil;
    NSString* javaScript = nil;

    @try {
        NSString* theSourceVideoName = [command.arguments objectAtIndex:0];
        NSString* theTargetImageName = [command.arguments objectAtIndex:1];
        
        if ( extractVideoThumbnail(theSourceVideoName, theTargetImageName) )
        {
          pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:theTargetImageName];
          javaScript = [pluginResult toSuccessCallbackString:command.callbackId];
        }
        else
        {
          pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR messageAsString:theTargetImageName];
          javaScript = [pluginResult toErrorCallbackString:command.callbackId];
        }
    } @catch (NSException* exception) {
        pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_JSON_EXCEPTION messageAsString:[exception reason]];
        javaScript = [pluginResult toErrorCallbackString:command.callbackId];
    }

     [self writeJavascript:javaScript];
}
 #endif

@end</pre></div><p>Finally, we <a id="id770" class="indexterm"/>
<a id="id771" class="indexterm"/>
<a id="id772" class="indexterm"/>essentially repeat ourselves, but using the PhoneGap 2.1 version of the plugin interface. Look closely, it does the same thing, but there are some subtle differences.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec141"/>What did we do?</h2></div></div></div><p>That's it! Now when we call <code class="literal">PKVideoThumbnail.createThumbnail()</code>, we'll be able to extract a thumbnail from any video we take or import. Cool, isn't it?</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec142"/>What else do I need to know?</h2></div></div></div><p>Okay, so <code class="literal">extractVideoThumbnail()</code> isn't quite standard Objective-C style. Typically, one would write it:</p><div><pre class="programlisting">    BOOL extractThumbnailToFile: (NSString *) theTargetImageName fromVideoNamed: (NSString *)theSourceVideoName</pre></div><p>And we would have called it like:</p><div><pre class="programlisting">  if (extractThumbnailToFile:theTargetImageName fromVideoNamed:theSourceVideoName) …</pre></div><p>But our way does the same thing and is a little less wordy. However, when working with Objective-C methods, it is important to recognize the differences in defining method signatures. If you're going to write a lot of Objective-C code, it's best to get used to the latter, but in a pinch, the former works too.</p><p>One last thing: <a id="id773" class="indexterm"/>
<a id="id774" class="indexterm"/>
<a id="id775" class="indexterm"/>what happens if we can't extract a thumbnail from the video? You'll notice that there's nothing in the code that appears to handle this possibility. Chances are that <code class="literal">thumbnail</code> will be <code class="literal">NULL</code> and that the attempt to write the thumbnail to storage will either return <code class="literal">NO</code> or raise an exception. Either way, we're covered with our code later on where we return <code class="literal">ERROR</code> if <code class="literal">NO</code> is returned.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec64"/>Implementing the video thumbnail plugin for Android</h1></div></div></div><p>The Android version of the <a id="id776" class="indexterm"/>
<a id="id777" class="indexterm"/>
<a id="id778" class="indexterm"/>plugin is very similar to the iOS version, although it doesn't have to worry about the version of PhoneGap in use, so it is a little shorter. Ultimately, though, the steps are the same: grab a frame from a video, save it to storage, and return to JavaScript.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec143"/>Getting ready</h2></div></div></div><p>First off, create a new class by opening the <strong>File</strong> menu, selecting <strong>New</strong>, and then selecting <strong>Class</strong>.</p><p>Next, set the <strong>Package</strong> to <code class="literal">com.kerrishotts.PKVideoThumbnail</code>, the <strong>Name</strong> field of the class to <code class="literal">PKVideoThumbnail</code>, and then uncheck the first item under<strong> Which method stubs would you like to create?</strong> – we won't need any sample code. This is shown in the following screenshot:</p><div><img src="img/9403_07_06.jpg" alt="Getting ready"/></div><p>Next, open the <a id="id779" class="indexterm"/>
<a id="id780" class="indexterm"/>
<a id="id781" class="indexterm"/>resulting file <code class="literal">PKVideoThumbnail.java</code> file, and we'll start writing the Android version.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec144"/>Getting on with it</h2></div></div></div><p>Unlike iOS, we only need one file, and it ends up being a bit shorter too, given as follows:</p><div><pre class="programlisting">package com.kerrishotts.PKVideoThumbnail;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import android.media.*;
import android.provider.MediaStore;

import java.io.*;</pre></div><p>First, as in iOS, we import the libraries we'll need for our plugin to work.</p><div><pre class="programlisting">public class PKVideoThumbnail extends Plugin {


    public PluginResult execute(String action, JSONArray args, String callbackId) {</pre></div><p>Unlike iOS, we define a single method called <code class="literal">execute</code>. If our plugin had multiple actions, we'd need to handle each one within this<a id="id782" class="indexterm"/> <code class="literal">execute</code> method. In iOS, this is done for us.</p><div><pre class="programlisting">        try {
          if (action.equals("createThumbnail")) {</pre></div><p>Since we need to <a id="id783" class="indexterm"/>
<a id="id784" class="indexterm"/>
<a id="id785" class="indexterm"/>check if the incoming action is <code class="literal">createThumbnail</code>, we have the preceding code. Technically, we could avoid this for a plugin only performing one action, but it would be nonstandard to do so.</p><div><pre class="programlisting">              String sourceVideo = args.getString(0);
              String targetImage = args.getString(1);</pre></div><p>In the prior code, we define our two parameters that we pass in from JavaScript. Note the lack of any asterisks like we had in the iOS version. Nice not to have to worry about those pesky things, right?</p><div><pre class="programlisting">              Bitmap thumbnail = ThumbnailUtils.createVideoThumbnail ( sourceVideo, MediaStore.Images.Thumbnails.MINI_KIND);</pre></div><p>Creating a thumbnail from a video is really quite simple; there's already a simple routine pre-written for us. We just pass the path to the video, and ask for a specific size (in our case, <code class="literal">MINI_KIND</code>).</p><div><pre class="programlisting">              FileOutputStream theOutputStream;
              try
              {
                File theOutputFile = new File (targetImage.substring(7));
                if (!theOutputFile.exists())
                {
                  if (!theOutputFile.createNewFile())
                  {
                    return new PluginResult(PluginResult.Status.ERROR,"Could not save thumbnail.");
                  }
                }
                  if (theOutputFile.canWrite())
                  {
                    theOutputStream = new FileOutputStream (theOutputFile);
                    if (theOutputStream != null)
                      {
                        thumbnail.compress(CompressFormat.JPEG, 75, theOutputStream);
                      }
                      else
                      {
                        return new PluginResult(PluginResult.Status.ERROR, "Could not save thumbnail; target not writeable.");
                      }
                  }
                }
                catch (IOException e)
                {
                  e.printStackTrace();
                  return new PluginResult(PluginResult.Status.IO_EXCEPTION, "I/O exception saving thumbnail.");
                }</pre></div><p>Actually saving the <a id="id786" class="indexterm"/>
<a id="id787" class="indexterm"/>
<a id="id788" class="indexterm"/>thumbnail to storage is a bit more involved. We need to check to see if we should create the file first (by checking if it doesn't exist first), and then if we can write to the file. Once we do that, we can use the <code class="literal">thumbnail.compress()</code> method to do the actual work of saving the file. All the other stuff is there to handle errors and such, and Java requires that you handle them. If not, the code will fail to compile.</p><div><pre class="programlisting">                return new PluginResult (PluginResult.Status.OK, targetImage );</pre></div><p>At this point, if we're executing this bit of code, the thumbnail has been created successfully, and so we return <code class="literal">OK</code>. If we aren't here, we've returned <code class="literal">ERROR</code> or <code class="literal">IO_EXCEPTION</code> or even something else, as listed in the following code snippet:</p><div><pre class="programlisting">            } else {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }
        } catch (JSONException e) {
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
        }
    }
}</pre></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec145"/>What did we do?</h2></div></div></div><p>That's all! We've extracted a thumbnail from a video file and saved it to a JPEG file for our JavaScript to work with.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec146"/>What else do I need to know?</h2></div></div></div><p>Ok, so if you <a id="id789" class="indexterm"/>
<a id="id790" class="indexterm"/>
<a id="id791" class="indexterm"/>actually take a close look at what gets saved out of this code, you'll notice it really isn't very much of a thumbnail. In fact it's a image that's the same size as the video resolution. That's not too big a deal, though, since we'll shrink it down in our JavaScript, but I wanted to let you know.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec65"/>Integrating with the video thumbnail plugin</h1></div></div></div><p>Next, we need to actually make<a id="id792" class="indexterm"/>
<a id="id793" class="indexterm"/> the changes to our code so that we can display the video thumbnails. Open up the <code class="literal">documentsView.html</code> file under <code class="literal">www/views</code> so that you can follow along.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec147"/>Getting ready</h2></div></div></div><p>The theory behind displaying the thumbnails is much the same as displaying the thumbnails in our last project; that is, we're still using the <code class="literal">canvas</code> tag to speed up the feel of our app, and we're still generating thumbnails from JPEG files. The difference is that we have to generate those JPEG files from the video file.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec148"/>Getting on with it</h2></div></div></div><p>Let's start by taking a look at the <code class="literal">documentIterator()</code> method<a id="id794" class="indexterm"/> in the following code snippet:</p><div><pre class="programlisting">documentsView.documentIterator = function(o)
  {
    var theHTML = "";
    var theNumberOfDocuments = 0;
<strong>    documentsView.documentToIndex = {};</strong>
    for (var i = 0; i &lt; o.getDocumentCount(); i++)
    {
      var theDocumentEntry = o.getDocumentAtIndex(i);

      theHTML += PKUTIL.instanceOfTemplate($ge("documentsView_documentTemplate"),
      { "src" : theDocumentEntry.fullPath,
      "index" : i
    });
      
      documentsView.documentToIndex[ PKUTIL.FILE.getFileNamePart ( theDocumentEntry.fullPath ) ] = i;
      theNumberOfDocuments++;
    }
    $ge("documentsView_contentArea").innerHTML = theHTML;</pre></div><p>When compared<a id="id795" class="indexterm"/>
<a id="id796" class="indexterm"/> to our previous project, the content is pretty similar so far. The only difference is the highlighted line. We have defined a variable earlier in the file named <code class="literal">documentToIndex</code>, which is an object. We're using it as an associative array, however, so that we can later map the file back to its index. For example, if file <em>1239548.mov</em> is the third item in our document list, we'd store <em>3</em> in the space for <em>1239548.mov</em>.</p><p>Next, as before, we wait for <code class="literal">100 </code>milliseconds before attaching the long press handler and such as seen in the following code snippet:</p><div><pre class="programlisting">    PKUTIL.delay(100, function()
    {
      for (var i = 0; i &lt; theNumberOfDocuments; i++)
      {
        var theDocumentEntry = o.getDocumentAtIndex(i);
        var theElement = $ge("documentsView_item" + i + "");
        var theLPGesture = new GESTURES.LongPressGesture(theElement, function(o)
        {
          documentsView.longPressReceived(o.data);
        });
        theLPGesture.data = i;
 
        PKVideoThumbnail.createThumbnail ( theDocumentEntry.fullPath,
        PKUTIL.FILE.getPathPart ( theDocumentEntry.fullPath ) + PKUTIL.FILE.getFileNamePart ( theDocumentEntry.fullPath ) + ".jpg",documentsView.renderVideoThumbnail,function ( theError )
          { console.log ( JSON.stringify ( theError ) );
          }
        )</pre></div><p>This last portion is where we ask our new plugin to do the work of extracting the video thumbnail. We know the video's path in persistent storage, so we can pass that part along. We can also construct the filename for the JPEG as well (what we're doing is taking everything but the video's extension and substituting <code class="literal">.jpg</code> instead). Then when the video thumbnail has been generated successfully, <code class="literal">renderVideoThumbnail()</code> <a id="id797" class="indexterm"/>will be called. If an error occurs, we'll log it to the console.</p><div><pre class="programlisting">      }
    });
  }
  
  documentsView.renderVideoThumbnail = function ( theTargetImage )
  {
        var img = new Image();
        var i = documentsView.documentToIndex[ PKUTIL.FILE.getFileNamePart ( theTargetImage ) ];</pre></div><p>The<a id="id798" class="indexterm"/> <code class="literal">renderVideoThumbnail()</code> method as a whole is very similar to the remainder of the code inside the last project's <code class="literal">documentIterator()</code>. We've <a id="id799" class="indexterm"/>
<a id="id800" class="indexterm"/>broken it out to make it a little easier to read, but otherwise it does the same thing. The only difference between the two is that we have to figure out the index – which image are we talking about. If you remember the variable we defined earlier, <code class="literal">documentToIndex[]</code>, we can figure out the index of the image from the filename, which is what we do in the preceding code snippet. From there on the code is identical, and we won't list the rest here.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec149"/>What did we do?</h2></div></div></div><p>In this task, we modified the <code class="literal">documentIterator()</code> method<a id="id801" class="indexterm"/> to work with our new plugin. We've asked for a thumbnail from a video, and we've managed to display it back to the end user when needed.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec66"/>Implementing recording and importing of video</h1></div></div></div><p>We've <a id="id802" class="indexterm"/>
<a id="id803" class="indexterm"/>
<a id="id804" class="indexterm"/>
<a id="id805" class="indexterm"/>done the first part of our app, which was displaying thumbnails from videos, but we've got to actually record them before we can get anything into our app. In this task, we'll do exactly that—record a new video.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec150"/>Getting ready</h2></div></div></div><p>We'll be working in the <code class="literal">documentsView.html</code> file in the <code class="literal">www/views</code> directory, if you want to follow along.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec151"/>Getting on with it</h2></div></div></div><p>You might think that we'd use the camera code from our previous project, and you'd be partially correct. For iOS, we can indeed use virtually the exact same code to import new videos, but for any platform to record video, we have to use a new API—the <code class="literal">CAPTURE </code>API.</p><p>Let's take a look at the code for <code class="literal">takeMovie()</code>:</p><div><pre class="programlisting">documentsView.takeMovie = function()
  {
    navigator.device.capture.captureVideo(</pre></div><p>The <code class="literal">CAPTURE</code> API<a id="id806" class="indexterm"/> provides more<a id="id807" class="indexterm"/>
<a id="id808" class="indexterm"/>
<a id="id809" class="indexterm"/>
<a id="id810" class="indexterm"/> methods than simply capturing video; you can capture audio as well (which is similar to using the <code class="literal">MEDIA</code> API in <a class="link" href="ch05.html" title="Chapter 5. Talking to Your App">Project 5</a>, <em>Talking to Your App</em>). In our case, we use the<a id="id811" class="indexterm"/> <code class="literal">captureVideo()</code> method. It takes three parameters: the <code class="literal">success</code> function, the <code class="literal">failure</code> function, and any options we want to pass along. In our case, the only option is that we will limit the user to one video at a time. Technically, the API will allow more than one video in a session, but for our purposes, one at a time simplifies things.</p><div><pre class="programlisting">      function (mediaFiles)
      {
        var uri = mediaFiles[0].fullPath;
        var fileExt = PKUTIL.FILE.getFileExtensionPart ( uri );
        PKFILE.moveFileTo ( uri, 
        "doc://" + PKUTIL.getUnixTime() + "." + fileExt,
        function ()
          {
            documentsView.reloadAvailableDocuments();
          },
        function (evt)
          {
            console.log (JSON.stringify(evt));
            var anAlert = new PKUI.MESSAGE.Alert(__T("Oops!"), __T("Failed to save the video."));
            anAlert.show();
        } )
    },</pre></div><p>The preceding code shows the <code class="literal">success</code> method, which will be called with a list of files. In our case, it will only have one filename, which we get by using the <code class="literal">zero</code>th index of the list. From that point forward, it's nearly identical to the way we copy a file from temporary storage to permanent storage in <a class="link" href="ch06.html" title="Chapter 6. Say Cheese!">Project 6</a>, <em>Say Cheese!</em>. The only difference is that we don't assume that the file extension will be <code class="literal">.jpg</code>. Videos on different platforms can often have very different extensions.</p><div><pre class="programlisting">      function (error)
      {
        var msg = 'An error occurred during capture: ' + error.code;
        var anAlert = new PKUI.MESSAGE.Alert(__T("Oops!"), msg);
        anAlert.show();
      },</pre></div><p>Next up is the <code class="literal">failure</code> function, where all we'll worry about is letting the user know the error code, but if you wanted, you could give a much better error message based on the code.</p><div><pre class="programlisting">      {limit: 1});
  }</pre></div><p>Finally, the third <a id="id812" class="indexterm"/>
<a id="id813" class="indexterm"/>
<a id="id814" class="indexterm"/>
<a id="id815" class="indexterm"/>parameter is that set of options. In this case, we only want one video at a time, but there are other options one could pass, such as the video encoding type. Different platforms support these other options differently, so we won't dwell on them here, but they are available in the PhoneGap API documentation should you need them. (<a class="ulink" href="http://docs.phonegap.com/en/edge/cordova_media_capture_capture.md.html#Capture">http://docs.phonegap.com/en/edge/cordova_media_capture_capture.md.html#Capture</a>)</p><p>For importing video, we can use nearly the same code from the previous project, but we'll put it all in <code class="literal">importMovie()</code>:</p><div><pre class="programlisting">  documentsView.importMovie = function()
  {
    navigator.camera.getPicture ( function (uri)
    {
      var fileExt = PKUTIL.FILE.getFileExtensionPart ( uri );
      PKFILE.moveFileTo ( uri, "doc://" + PKUTIL.getUnixTime() + "." + fileExt, function ()
      {
        documentsView.reloadAvailableDocuments();
      },
        function (evt)
        {
          console.log (JSON.stringify(evt));
          var anAlert = new PKUI.MESSAGE.Alert(__T("Oops!"), __T("Failed to save the video."));
          anAlert.show();
        } )
     },
     function (msg)
     {
       var anAlert = new PKUI.MESSAGE.Alert(__T("Oops!"), msg);
       anAlert.show();
     },
      { destinationType: Camera.DestinationType.FILE_URI,
      sourceType: Camera.PictureSourceType.PHOTOLIBRARY,
      mediaType: Camera.MediaType.VIDEO,
      saveToPhotoAlbum: false
     }
   );
  }</pre></div><p>Most of this code is <a id="id816" class="indexterm"/>
<a id="id817" class="indexterm"/>
<a id="id818" class="indexterm"/>
<a id="id819" class="indexterm"/>identical to the code in the previous project for <code class="literal">doPicture()</code>. The only real differences are the handling of the file extension and the <code class="literal">mediaType</code> option. Notice we pass <code class="literal">Camera.MediaType.VIDEO</code> instead. This ensures we will only get videos in return.</p><p>One catch: this doesn't seem to work well on Android. We haven't disabled it in the app (just in case you have better luck), but you may wish to disable the import functionality in your Android apps. On iOS, however, it works quite well.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec152"/>What did we do?</h2></div></div></div><p>In this task, we implemented the code to record video and import video.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec67"/>Implementing video playback</h1></div></div></div><p>Playing videos is a very <a id="id820" class="indexterm"/>
<a id="id821" class="indexterm"/>important feature, especially if we're recording it, right? But even for apps that don't support video recording, video playback can be essential. Consider an e-learning type of application; reading about the subject can work well for a lot of people, but actually seeing the subject in action can help even more. Video would make an excellent platform for this type of learning.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec153"/>Getting ready</h2></div></div></div><p>We'll be working in <code class="literal">documentsView.html</code> and <code class="literal">movieView.html</code> in the <code class="literal">www/views</code> directory if you want to follow along.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec154"/>Getting on with it</h2></div></div></div><p>First off, there's a catch. Playing video happens to be really easy on iOS devices. Playing video on other devices, well, not so much.</p><p>For iOS, we'll use the movie view, which is akin to the image view in our previous project. Most of the code is duplicated, so we'll just talk about the changes here.</p><p>The template portion of the movie view looks like the following:</p><div><pre class="programlisting">&lt;div id="movieView_documentTemplate" class="hidden"&gt;
    &lt;video src="img/%SRC%" controls autoplay autobuffer style="width:100%; height: 100%;" /&gt;
&lt;/div&gt;</pre></div><p>Whereas, in the <a id="id822" class="indexterm"/>
<a id="id823" class="indexterm"/>previous project we used an <code class="literal">IMG</code> tag to display the image, we are now using a <code class="literal">VIDEO</code> tag to display the video. This is a feature of HTML 5 that iOS supports very nicely, and as such, it makes it very easy for us to support video playback.</p><p>The tag will have <code class="literal">%SRC%</code> replaced with the video filename when the documents view calls <code class="literal">setMovie()</code>, which looks like the following:</p><div><pre class="programlisting">  movieView.setMovie = function ( moviePath, movieIndex )
  {
    movieView.moviePath = moviePath;
    movieView.movieIndex = movieIndex;
    
    $ge("movieView_contentArea").innerHTML =
      PKUTIL.instanceOfTemplate($ge("movieView_documentTemplate"),
        { "src" : movieView.moviePath,
          "thumb": PKUTIL.FILE.getPathPart ( moviePath ) +PKUTIL.FILE.getFileNamePart ( moviePath ) + ".jpg"});
  }</pre></div><p>It's essentially the same as <code class="literal">setImage()</code> <a id="id824" class="indexterm"/>in the prior project, though we have introduced a <em>thumb</em> portion, which you could use if you wanted to display a small thumbnail that the user had to click on prior to playing the movie.</p><p>Once the movie view is pushed (by the documents view), and <code class="literal">setMovie()</code> is called, the <code class="literal">VIDEO</code> tag in the preceding code will cause the video to start playing instantly on iOS devices. Chances are good that the video will also fill the entire screen, something common on all mobile platforms. Tablets will generally permit inline video, but smaller form factors usually attempt to play video in full screen mode.</p><p>So, as we already said, iOS is easy: HTML 5 video is properly supported, and we can display it simply with a minimum of fuss.</p><p>Oh, if the other platforms were only as nice. Android, for example, claims to support the <code class="literal">VIDEO</code> tag, but its implementation is so horribly broken that chances are slim you'll find a device on which it will actually work. Yes, the controls will display, but that's about it.</p><p>What do we do <a id="id825" class="indexterm"/>
<a id="id826" class="indexterm"/>instead? We use another plugin, this time written by Simon MacDonald who decided to help the PhoneGap community out by providing a simple video player plugin. (<a class="ulink" href="http://simonmacdonald.blogspot.com/2011/11/video-player-plugin-for-phonegap.html">http://simonmacdonald.blogspot.com/2011/11/video-player-plugin-for-phonegap.html</a>)</p><p>First, you need to install the plugin into your Java project using the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Copy the <code class="literal">src</code> directory from the <code class="literal">Android/VideoPlayer</code> directory and add it to your project. Make sure the contents are included; deep inside this directory is a file called <code class="literal">VideoPlayer.java</code> that you need in your project.</li><li class="listitem">Copy the <code class="literal">video.js</code> file in the <code class="literal">Android/VideoPlayer/www</code> directory in the plugin package to <code class="literal">www/plugins/Android</code> in your project.</li><li class="listitem">Add the following line to your <code class="literal">index_android.html file</code>:<div><pre class="programlisting">    &lt;script type="application/javascript" charset="utf-8" src="img/video.js"&gt;&lt;/script&gt;</pre></div></li><li class="listitem">Add the following line to your <code class="literal">/res/xml/config.xml</code> file:<div><pre class="programlisting">    &lt;plugin name="VideoPlayer" value="com.phonegap.plugins.video.VideoPlayer"/&gt;</pre></div></li><li class="listitem">Next, we'll alter our code in <code class="literal">documentsView.html</code> to play video using this player if we're an Android device. We'll be doing this in the<a id="id827" class="indexterm"/> <code class="literal">documentContainerTapped()</code> method:<div><pre class="programlisting">  documentsView.documentContainerTapped = function(idx)
  {
    var theElement = $ge("documentsView_item"+ idx + "_canvas");
    if (documentsView.inSelectionMode)
    {
     … this code is identical to the previous chapter …
    }
    else
    {
      if ( PKDEVICE.platform() != "android" )
      {
        PKUI.CORE.pushView (movieView);
        PKUTIL.delay(500, function()
        {
          movieView.setMovie ( documentsView.availableDocuments.getDocumentAtIndex(idx).fullPath, idx );
        } );
      }
      else
      {
        window.plugins.videoPlayer.play( documentsView.availableDocuments.getDocumentAtIndex(idx).fullPath );
     }
    }
  }</pre></div></li></ol></div><p>If we're any platform but Android, we'll attempt to use the movie view to play the video, but if we are on Android, we'll use the highlighted code in the preceding code snippet, which asks the video player plugin to play the desired video. When asked, the video will be played immediately, and in full screen. This does mean that Android devices won't ever display the movie view, but the actions available from within the view (<em>delete</em> and <em>share</em>) are also available from the documents view, so this isn't a big loss.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec155"/>What did we do?</h2></div></div></div><p>In this task we used the <a id="id828" class="indexterm"/>
<a id="id829" class="indexterm"/>HTML 5 <code class="literal">VIDEO</code> tag to play video on devices that support it, and we also learned how to use the video player plugin created by Simon MacDonald to play video on Android devices.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec68"/>Game Over..... Wrapping it up</h1></div></div></div><p>Let's see what we finally ended up with; first for iOS the view will be as follows:</p><div><img src="img/9403_07_07.jpg" alt="Game Over..... Wrapping it up"/></div><p>For Android the view will be as follows:</p><div><img src="img/9403_07_08.jpg" alt="Game Over..... Wrapping it up"/></div><p>If you look at our final app, it's very similar to our previous project's app. We've changed some of the graphics a little bit, yes, but visually it's nearly identical, and from the code's perspective, it's nearly identical. We've swapped out the bits that dealt solely with images and replaced them with bits that work with video instead. We've worked with HTML 5 <code class="literal">VIDEO</code> and also written our own plugins using native code. You should now be able to take what you've learned and apply it to your own apps in order to record and play video files.</p></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec69"/>Can you take the HEAT? The Hotshot Challenge</h1></div></div></div><p>There are several ways that you could further improve this app. How about challenging yourself to a few?</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add the ability to upload the video files to a social network via the <strong>Share</strong> button. </li><li class="listitem" style="list-style-type: disc">Allow the user to record more than one video at once, and process each one accordingly.</li><li class="listitem" style="list-style-type: disc">Change the whole app around into an e-learning style app where the videos aren't recorded by the user, but baked into the app. Then allow the user to watch your videos so that they can learn about a particular subject.</li></ul></div></div></body></html>