<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch10"/>Chapter 10. Collaboration Tools</h1></div></div></div><p>In this chapter, we will cover the following topics:</p><div><ul class="itemizedlist"><li class="listitem">Setting up a blog for the intranet</li><li class="listitem">Setting up a wiki portlet</li><li class="listitem">Setting up a forum for an intranet</li><li class="listitem">Banning a user for an inappropriate post</li><li class="listitem">Setting up the calendar as a personal tasks management tool</li><li class="listitem">Using bookmarks to store favorite links</li><li class="listitem">Tracking social activities of site members</li><li class="listitem">Using the announcements portlet for group messaging</li></ul></div><div><div><div><div><h1 class="title"><a id="ch10lvl1sec65"/>Introduction</h1></div></div></div><p>Liferay provides a wide range of collaboration tools that can effectively improve communication between employees by encouraging them to produce and share information within their project teams, departments, or the entire company. Intranet users may create blogs, take part in forums, build a corporate knowledge base as a set of Wiki pages, gather useful links, receive or publish important messages, and plan their work in calendars. They can also track activities of other employees.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec66"/>Setting up a blog for the intranet</h1></div></div></div><p>Each site in Liferay has its own separate blog, which can be accessed by going to <strong>Admin</strong> | <strong>Site Administration</strong> | <strong>Content</strong> | <strong>Blogs</strong>. In addition, it is also possible to place the Blogs portlet on one of the pages, where it can be shared between users who do not have access to the admin functionalities.</p><p>The Blogs portlet <a id="id556" class="indexterm"/>presents blog entries created by members of the site. A blog entry can consist of text, graphics, tables, lists, and links to other assets. Additionally, each blog entry can be tagged and <a id="id557" class="indexterm"/>categorized or provided with the list of assets related to it, which will be listed in the related assets section under the main content of the blog entry. It is also possible to define permissions that specify which actions can be performed on it by users assigned to different roles.</p><p>In this recipe, we will show you how to create a shared blog for members of the site by placing the Blogs portlet on the page within this site. We will also show you how to configure this Blogs portlet to best fit users' purposes.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec177"/>How to do it…</h2></div></div></div><p>Let's imagine that our company's public relations department wants to launch a blog written by employees from different departments, informing other employees about interesting corporate initiatives. They would like to show on the page the list of 10 newest blog entries (each blog entry on the list should be presented in a form of abstract user clicks and is redirected to its full content), but do not want to allow users to comment or rate other users' entries. The blog should also provide some e-mail notifications and RSS functionality to help people stay updated.</p><p>In the first step, we will add the Blogs portlet to the page. In order to do this, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to the page on which the Blogs portlet should be placed.</li><li class="listitem">Click on the add button (this is a <strong>+</strong> sign on the left side).</li><li class="listitem">Click on the <strong>Applications</strong> tab.</li><li class="listitem">Find the Blogs portlet using search mechanism or by browsing the list of available portlets (the Blogs portlet can be found in the <strong>Collaboration</strong> section).</li><li class="listitem">Click on the <strong>Add</strong> link next to the portlet name. The Blogs portlet with basic configuration will be added to the page.</li></ol><div></div><p>After adding the Blogs portlet to the page, we can change its default configuration. To configure the Blogs portlet, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the options icon of the newly added portlet (this will be a gear icon in the portlet's top-right corner).</li><li class="listitem">Choose the <strong>Configuration</strong> option.<div><img src="img/image00366.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Set <strong>Maximum Items to Display</strong> to <strong>10</strong>.</li><li class="listitem">Set <strong>Display Template</strong> to <strong>Abstract</strong>.</li><li class="listitem">Disable<a id="id558" class="indexterm"/> the <strong>Enable Flags</strong> option.</li><li class="listitem">Disable <a id="id559" class="indexterm"/>the <strong>Enable Related Assets</strong> option.</li><li class="listitem">Disable <strong>Enable Ratings</strong> option.</li><li class="listitem">Disable the <strong>Enable Comments</strong> option.</li><li class="listitem">Disable the <strong>Enable Comment Ratings</strong> option.</li><li class="listitem">Disable the <strong>Enable Social Bookmarks</strong> option.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Email From</strong> tab.</li><li class="listitem">Provide the sender's  <strong>Name</strong> and <strong>Address</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Entry Added Email</strong> or <strong>Entry Updated Email</strong> tab.</li><li class="listitem">Set the <strong>Enabled</strong> option.</li><li class="listitem">Provide <strong>Subject</strong> and <strong>Body</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>RSS</strong> tab.</li><li class="listitem">Leave <strong>Enable RSS Subscription</strong> option enabled.</li><li class="listitem">Set <strong>Maximum Items to Display</strong> to <strong>10</strong>.</li><li class="listitem">Choose the <strong>Abstract</strong> option from the <strong>Display Style</strong> list.</li><li class="listitem">Leave the <strong>Format</strong> option set as it is.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec178"/>How it works…</h2></div></div></div><p>The Blogs portlet <a id="id560" class="indexterm"/>configuration <a id="id561" class="indexterm"/>allows us to set the following options:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Maximum Items to Display</strong>: This option defines how many blog entries will be displayed on a single page of the Blogs portlet</li><li class="listitem"><strong>Display Template</strong>: This option allows us to choose how the asset should be displayed (as a title list, full content, abstract, and so on)</li><li class="listitem"><strong>Enable Flags</strong>: This option enables the flags functionality, which provides a contact form for notification of irregularities</li><li class="listitem"><strong>Enable Social Bookmarks</strong>: This option displays the Google+, Facebook, and Twitter sharing buttons</li><li class="listitem"><strong>Enable Related Assets</strong>: This option enables the related asset section of blogs entry, which presents a list of related assets defined for each Wiki page</li><li class="listitem"><strong>Enable Ratings</strong>: This option enables the rating functionality that allows us to rate each blog entry and presents the average rating for each entry</li><li class="listitem"><strong>Enable Comments</strong>: This option enables the comments functionality that allows you to comment on each blog entry</li><li class="listitem"><strong>Enable Comment Ratings</strong>: This option enables the comments rating functionality that allows you to vote for each comment on the blogs and presents the number of votes for each comment</li><li class="listitem"><strong>Display Template</strong>: This option allows you to choose the template to display the Wiki page</li><li class="listitem"><strong>Email From</strong>: This tab allows you to provide the sender's name and e-mail address</li><li class="listitem"><strong>Entry Added Email</strong> and <strong>Entry Updated Email</strong>: These tabs allow you to enable the e-mail messaging functionality and set subject and message content using the available variables</li><li class="listitem"><strong>Enable RSS Subscription</strong>: This option allows users to track activities using RSS</li><li class="listitem"><strong>Display Style</strong>: This option allows you to decide whether full content, abstract, or title should be shown</li><li class="listitem"><strong>Maximum Items to Display</strong>: This option allows us to set the maximum amount of items displayed by the RSS channel</li><li class="listitem"><strong>Format</strong>: This option allows us to decide whether RSS should be served in Atom 1.0, RSS 1.0, or RSS 2.0 format</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec179"/>See also</h2></div></div></div><p>For information on <a id="id562" class="indexterm"/>how to<a id="id563" class="indexterm"/> configure SMTP servers, refer to the <em>Configuring Liferay with the SMTP server</em> recipe from <a class="link" title="Chapter 11. Quick Tricks and Advanced Knowledge" href="part0080.xhtml#aid-2C9D01">Chapter 11</a>, <em>Quick Tricks and Advanced Knowledge</em>.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec67"/>Setting up a wiki portlet</h1></div></div></div><p>Liferay provides the Wiki functionality that allows us to create a corporate database developed collaboratively by a community of employees similar to the commonly known Wikipedia. The Wiki functionality can be accessed by going to <strong>Admin</strong> | <strong>Site Administration</strong> | <strong>Content</strong> | <strong>Wiki</strong> or using the Wiki portlet, which allows users to manage and present Wiki pages on a site page on which it is located.</p><p>Each Wiki page<a id="id564" class="indexterm"/> presented by the Wiki portlet may contain text, headers, lists, pictures, tables, and links that can be defined using simple creole, media Wiki, or HTML languages. Additionally, Wiki includes a link-tracking mechanism, which provides information about incoming and outgoing links and allows us to create new pages by defining links to them. While editing a Wiki page, a user can provide an additional description of what has been done. This allows the user to track the changes made by different users.</p><p>In this recipe, we will show you how to configure the Wiki portlet to best fit users' purposes.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec180"/>How to do it…</h2></div></div></div><p>Let's assume that the Wiki functionality in our company's intranet (except all the management functions) should provide the possibility to comment on and rate Wiki pages. Additionally, users should receive e-mail notifications when a page is added or modified. However, the RSS functionality is not required.</p><p>To add a Wiki portlet to the page, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to the page on which the Wiki portlet should be placed.</li><li class="listitem">Click on the add button (this is a <strong>+</strong> sign on the left side).</li><li class="listitem">Click on the <strong>Applications</strong> tab.</li><li class="listitem">Find the Wiki portlet using the search feature or by browsing the list of available portlets (the Blogs portlet can be found in the <strong>Collaboration</strong> and <strong>Wiki</strong> sections).</li><li class="listitem">Click on the <strong>Add</strong> link next to the portlet name. The Wiki portlet with basic configuration will be added to the page.</li></ol><div></div><p>After adding the Wiki portlet to the page, it is possible to change its default configuration. To configure the Wiki portlet, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the <a id="id565" class="indexterm"/>options icon of the newly added portlet (this will be a gear icon in the top-right corner of the portlet).</li><li class="listitem">Choose the <strong>Configuration</strong> option.<div><img src="img/image00367.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Make sure you are on the <strong>Display Settings</strong> tab.</li><li class="listitem">Unmark the <strong>Enable Related Assets</strong> option.</li><li class="listitem">Leave the <strong>Enable Page Ratings</strong> option enabled.</li><li class="listitem">Leave the <strong>Enable Comments</strong> option enabled.</li><li class="listitem">Unmark <strong>Enable Comment Ratings</strong> option.</li><li class="listitem">Leave the <strong>Display Template</strong> and <strong>Visible Wikis</strong> options as they are.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Email From</strong> tab.</li><li class="listitem">Provide the sender's <strong>Name</strong> and <strong>Address</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Page Added Email</strong> or <strong>Page Updated Email</strong> tab.</li><li class="listitem">Set the <strong>Enabled</strong> option.</li><li class="listitem">Provide a <strong>Subject</strong>, <strong>Body</strong> and <strong>Signature</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>RSS</strong> tab.</li><li class="listitem">Unmark <strong>Enable RSS Subscription</strong> option.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec181"/>How it works…</h2></div></div></div><p>The Wiki portlet configuration <a id="id566" class="indexterm"/>allows us to set the following options:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Enable Related Assets</strong>: This option enables the related asset section of the Wiki page, which presents a list of related assets defined for each Wiki page</li><li class="listitem"><strong>Enable Page Ratings</strong>: This option enables the rating functionality that allows you to rate each Wiki page and presents its average rating for each page</li><li class="listitem"><strong>Enable Comments</strong>: This option enables the comments functionality that allows us to comment on each Wiki page</li><li class="listitem"><strong>Enable Comment Ratings</strong>: This option enables the comments rating functionality that allows you to vote for each comment on the Wiki page and presents the number of votes for each comment</li><li class="listitem"><strong>Display Template</strong>: This option allows you to choose the template to display the Wiki page</li><li class="listitem"><strong>Visible Wikis</strong>: This option allows you to define which available Wikis should be visible in this particular Wiki portlet</li><li class="listitem"><strong>Email From</strong>: This option allows you to provide the sender's name and e-mail address</li><li class="listitem"><strong>Page Added Email</strong> and <strong>Page Updated Email</strong>: These tabs allow you to enable the e-mail messaging functionality and set the subject and message content using the available variables</li><li class="listitem"><strong>Enable RSS Subscription</strong>: This option allows users to track activities using RSS</li><li class="listitem"><strong>Display Style</strong>: This option allows you to decide whether full content, abstract, or title should be shown</li><li class="listitem"><strong>Maximum Items to Display</strong>: This option allows you to set the maximum amount of items displayed by the RSS channel</li><li class="listitem"><strong>Format</strong>: This options allows you to decide whether RSS should be served in the Atom 1.0, RSS 1.0, or RSS 2.0 format</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec182"/>See also</h2></div></div></div><p>For information on how to <a id="id567" class="indexterm"/>configure SMTP servers, refer to the <em>Configuring Liferay with the SMTP server</em> recipe from <a class="link" title="Chapter 11. Quick Tricks and Advanced Knowledge" href="part0080.xhtml#aid-2C9D01">Chapter 11</a>, <em>Quick Tricks and Advanced Knowledge</em>.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec68"/>Setting up a forum for an intranet</h1></div></div></div><p>Forum is a very powerful collaboration and social tool that allows multiple user communication. Liferay Portal CMS provides basic ready-to-use forum functionality called message boards. Message boards can be accessed by going to <strong>Admin</strong> | <strong>Site Administration</strong> | <strong>Content</strong> | <strong>Message Boards</strong> using the Message Boards portlet. This portlet can be used by <a id="id568" class="indexterm"/>end users of <a id="id569" class="indexterm"/>our intranet.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec183"/>How to do it…</h2></div></div></div><p>In this recipe, we will show you how to add a Message Boards portlet to the page and how to set it to best fit our purpose.</p><p>Let's start by adding the Message Boards portlet to the page. To do this, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to the page on which the message boards should be placed.</li><li class="listitem">Click on the add button (this is a <strong>+</strong> sign on the left side).</li><li class="listitem">Click on the <strong>Applications</strong> tab.</li><li class="listitem">Find the <strong>Message Boards</strong> portlet using the search feature or by browsing the list of available portlets (the message boards portlet can be found in the <strong>Collaboration</strong> section).</li><li class="listitem">Click on the <strong>Add</strong> link next to the portlet name. The message board with basic configuration will be added to the page.</li></ol><div></div><p>To configure the message board portlet, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the options icon of the newly added portlet (this will be a gear icon in the top-right corner of the portlet).</li><li class="listitem">Choose the <strong>Configuration</strong> option.<div><img src="img/image00368.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Make<a id="id570" class="indexterm"/> sure that <a id="id571" class="indexterm"/>you are on the <strong>General</strong> tab.</li><li class="listitem">Disable the <strong>Allow Anonymous Posting</strong> option.</li><li class="listitem">Leave the <strong>Subscribe by Default</strong> option enabled.</li><li class="listitem">Choose HTML from the <strong>Message Format</strong> dropdown list.</li><li class="listitem">Leave the <strong>Enable Flags</strong> and <strong>Enable Ratings</strong> options enabled.</li><li class="listitem">Leave the <strong>Thread as Question by Default</strong> option disabled.</li><li class="listitem">Set the <strong>30 days</strong> option on the <strong>Show Recent Posts from Last</strong> list.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Email From</strong> tab.</li><li class="listitem">Provide the sender's <strong>Name</strong> and <strong>Address</strong>.</li><li class="listitem">Click on the <strong>Message Added Email</strong> or <strong>Message Updated Email</strong> tab.</li><li class="listitem">Set the <strong>Enabled</strong> option.</li><li class="listitem">Provide a <strong>Subject</strong>, <strong>Body</strong> and <strong>Signature</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Thread Priorities</strong> tab.</li><li class="listitem">Enter the name, image, and priority level for each level in descending order.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on <strong>User Rank</strong> tab.</li><li class="listitem">Provide rank names by entering ranks and minimum post pairs (for example, Yoda = 1000 ).</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>RSS</strong> tab.</li><li class="listitem">Make sure that the <strong>Enable RSS Subscription</strong> option is enabled.</li><li class="listitem">Set <strong>Maximum Items to Display</strong> to <strong>10</strong>.</li><li class="listitem">Choose the <strong>Abstract</strong> option form the <strong>Display Style</strong> list.</li><li class="listitem">Leave the <strong>Format</strong> option as it is.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec184"/>How it works…</h2></div></div></div><p>Message boards <a id="id572" class="indexterm"/>provide typical <a id="id573" class="indexterm"/>forum mechanisms that allow us to create a folder-similar structure built with categories and subcategories. Both categories and subcategories can contain other subcategories or threads, and each thread consists of at least one post. Threads in a message board can be split (as a result of splitting, we create two threads from one) or moved (by moving, we create one thread from two already existing threads). It is possible to lock the thread in order to block users from adding more posts and make it available for users in read-only mode. What's more, message board provides a banning mechanism for the message board user management. The banning mechanism will be described in the next recipe.</p><p>Message boards portlet configuration allows us to set the following options:</p><div><ul class="itemizedlist"><li class="listitem"><strong>General</strong>:<div><ul class="itemizedlist"><li class="listitem"><strong>Allow Anonymous Posting</strong>: This allows you to decide whether it is possible for anonymous users to create posts or not</li><li class="listitem"><strong>Subscribe by Default</strong>: This enables you to subscribe users by default to the threads they participate in</li><li class="listitem"><strong>Message Format</strong>: This option allows you to choose the format of the messages added</li><li class="listitem"><strong>Enable Flags</strong>: This option enables the flags functionality, which provides a contact form for notification of irregularities</li><li class="listitem"><strong>Enable Ratings</strong>: This option enables the post rating functionality that allows us to rate each post and presents its rating for each post</li><li class="listitem"><strong>Thread as Question by Default</strong>: After enabling this option, all new threads are marked as question by default (the <strong>Mark As Question</strong> option in the new thread form is marked). Threads marked as questions on the thread list are marked by "waiting for an answer" flag.</li><li class="listitem"><strong>Show Recent Posts from Last</strong>: This option allows us to set the period for the recent Posts tab.</li></ul></div></li><li class="listitem"><strong>E-mail notifications</strong>:<p>Message boards <a id="id574" class="indexterm"/>provide two types of e-mail notifications: Message Added Email and Message Updated Email. Here are the following configuration options for message boards e-mail notifications:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Email From</strong>: This tab allows us to provide the sender's name and e-mail address</li><li class="listitem"><strong>Message Added Email</strong> and <strong>Message Updated Email</strong>: These tabs allow us to enable the e-mail messaging functionality and set the subject, signature and message content using the available variables.</li></ul></div></li><li class="listitem"><strong>Thread Priorities</strong>:<p>It is possible to <a id="id575" class="indexterm"/>set priorities <a id="id576" class="indexterm"/>for threads. Threads with a higher priority are displayed before threads with a lower priority. The <strong>Thread Priority</strong> tab allows us to define multiple priorities<a id="id577" class="indexterm"/> by providing the following information for each of them:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Name</strong>: This option displays name of the priority</li><li class="listitem"><strong>Image</strong>: This option displays image of the priority (URL or a path relative to the theme)</li></ul></div></li><li class="listitem"><strong>User Ranks</strong>: The <strong>User Ranks</strong> tab allows us to define the ranks that the user will acquire to <a id="id578" class="indexterm"/>create the specified amount of posts.</li><li class="listitem"><strong>RSS</strong>: The message boards portlet<a id="id579" class="indexterm"/> also allows users to track activities using RSS. As was indicated in the preceding recipe, portlet configuration allows us to choose:<div><ul class="itemizedlist"><li class="listitem">The amount of items displayed by the RSS channel</li><li class="listitem">Whether full content, abstract, or title should be shown</li><li class="listitem">Whether RSS should be served in the Atom 1.0, RSS 1.0 or RSS 2.0 format</li></ul></div></li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec185"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem">For information on how to configure SMTP servers, refer to the <em>Configuring Liferay with the SMTP server</em> recipe from <a class="link" title="Chapter 11. Quick Tricks and Advanced Knowledge" href="part0080.xhtml#aid-2C9D01">Chapter 11</a>, <em>Quick Tricks and Advanced Knowledge</em></li><li class="listitem">For information on how to ban and unban users, refer to the <em>Banning a user for inappropriate post</em> recipe from this chapter</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec69"/>Banning a user for an inappropriate post</h1></div></div></div><p>The message boards portlet provides a built-in banning mechanism, which allows us to block a use from<a id="id580" class="indexterm"/> viewing and participating in forums.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec186"/>How to do it…</h2></div></div></div><p>To ban a user, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to the page on which the message board should be placed.</li><li class="listitem">Go to the post added by the user you want to ban.</li><li class="listitem">Click on the <strong>Ban This User</strong> link located under the screen name (or name and surname) of the user.<div><img src="img/image00369.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <strong>Banned Users</strong> tab in the <strong>message boards</strong> menu. The user you have just banned will be on the list.</li></ol><div></div><p>To unban a user, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the <strong>Banned Users</strong> tab in the <strong>message boards</strong> menu.</li><li class="listitem">Click on the <strong>Unban This User</strong> link, located near the screen name of the user you want to unban. The user will disappear from the list and will not be blocked from using message <a id="id581" class="indexterm"/>boards any more.<div><img src="img/image00370.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec187"/>How it works…</h2></div></div></div><p>As was shown in the preceding recipe, each user who added any post on the message board can be banned and unbanned by the site owner and administrator (or other users that have any custom role that permits it).</p><p>The banned user is not able to view the content of message boards or add a new category, thread, or post. If not unbanned by the message boards administrator (or other user who has permission to ban and unban other users), the banned user will be unbanned automatically in 10 days time. This default value can be changed in the <code class="literal">message.boards.expire.ban.interval </code>property (set to 0 to disable autoexpire). In order to override each property, you can put the specific property in the <code class="literal">${liferay.home}/portal-ext.properties</code> file.</p><p>Note that there is also the <code class="literal">message.boards.expire.ban.job.interval</code> property, which allows us to enter the time in minutes for how often the unbanning user job is run. This can affect the real time of unbanning a user. If a ban is expected to expire at 12:05 P.M. and the job runs at 2 P.M., the expiry will take place during the 2 P.M. run.</p></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec188"/>See also</h2></div></div></div><p>For information on how to configure the message boards portlet, refer to the <em>Setting up a forum for intranet</em> recipe from this chapter.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec70"/>Setting up the calendar as a personal tasks management tool</h1></div></div></div><p>Liferay Calendar helps users manage their tasks, time, and resources. The Calendar portlet allows us to create events, invite other users to participate in them, set reminders, and manage resources (such as car or conference room) that can be reserved by other users. Events may be presented in the day, week, month, or agenda view. The Calendar portlet provides a couple of configuration <a id="id582" class="indexterm"/>options that help adapt the calendar functionality to our needs.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec189"/>How to do it…</h2></div></div></div><p>To set a Calendar portlet, you have to add it to the page. In order to do this, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to the page on which the Calendar portlet should be placed.</li><li class="listitem">Click on the add button (this is a <strong>+</strong> sign on the left side).</li><li class="listitem">Click on the <strong>Applications</strong> tab.</li><li class="listitem">Find the <strong>Calendar</strong> portlet using the search feature or by browsing the list of available portlets (the Calendar portlet can be found in the <strong>Collaboration</strong> section).</li><li class="listitem">Click on the <strong>Add</strong> link next to the portlet name. The Calendar portlet with basic configuration will be added to the page.</li></ol><div></div><p>To configure the Calendar portlet, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the options icon of the newly added portlet (this will be a gear icon in the top-right corner of the portlet).</li><li class="listitem">Choose the <strong>Configuration</strong> option.<div><img src="img/image00371.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Make <a id="id583" class="indexterm"/>sure that you are on the <strong>User Settings</strong> tab.</li><li class="listitem">Set <strong>Time Format</strong> to <strong>24 hour</strong>.</li><li class="listitem">Set <strong>Default Duration</strong> to <strong>60 minutes</strong>.</li><li class="listitem">Set <strong>Default View</strong> to <strong>Day</strong>.</li><li class="listitem">Set the <strong>Week Starts On</strong> option to <strong>Monday</strong>.</li><li class="listitem">Disable the <strong>Use Global Time Zone</strong> option.</li><li class="listitem">Set <strong>Time Zone</strong> to <strong>UTC</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>RSS</strong> tab.</li><li class="listitem">Leave the <strong>Enable RSS Subscription</strong> option enabled.</li><li class="listitem">Set <strong>Maximum Items to Display</strong> to <strong>10</strong>.</li><li class="listitem">Choose the <strong>Abstract</strong> option from the <strong>Display Style</strong> list.</li><li class="listitem">Leave the <strong>Format</strong> option set as it is.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec190"/>How it works…</h2></div></div></div><p>When configuring the <a id="id584" class="indexterm"/>Calendar portlet, you can set the following properties:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Time format</strong>: This option allows you to decide whether the calendar will present hours in A.M./P.M. or in the 24-hour format</li><li class="listitem"><strong>Default Duration</strong>: The option allows you to set the default duration of an event (it works for fast-event creation only)</li><li class="listitem"><strong>Default View</strong>: This option allows you to set which view of the calendar will be present as default</li><li class="listitem"><strong>Week Starts On</strong>: This option allows you to choose the day presented as the first day of the week</li><li class="listitem"><strong>Use Global Time Zone</strong>: This option allows you to decide whether the calendar will work according to global time zone settings or the time zone specified in the <strong>Time Zone</strong> field in the calendar portlet configuration</li><li class="listitem"><strong>Enable RSS Subscription</strong>: This option allows users to track activities using RSS</li><li class="listitem"><strong>Display Style</strong>: This option allows you to decide whether full content, abstract, or title should be shown</li><li class="listitem"><strong>Maximum Items to Display</strong>: This option allows you to set the maximum amount of items displayed by the RSS channel</li><li class="listitem"><strong>Format</strong>: This option allows you to decide whether RSS should be served in the Atom 1.0, RSS 1.0, or RSS 2.0 format</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec71"/>Using bookmarks as good container to store favorite links</h1></div></div></div><p>The Bookmarks functionality allows users to gather, organize, and share useful or favorite links. Each site in Liferay has its own separate bookmarks repository, which can be accessed by going to <strong>Admin</strong> | <strong>Site Administration</strong> | <strong>Content</strong> | <strong>Bookmarks</strong>. In addition, it is also possible to place the Bookmarks portlet on one of the pages where it can be shared between users who do not<a id="id585" class="indexterm"/> have access to the admin functionalities.</p><p>The Bookmarks portlet provides tools to create, edit, and delete bookmark folders and bookmarks. In this recipe, we will show you how to configure the Bookmarks portlet to adapt it to our users' needs.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec191"/>How to do it…</h2></div></div></div><p>First, let's add a new Bookmarks portlet. In order to do this, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to the page on which the Bookmarks portlet should be placed.</li><li class="listitem">Click on the <strong>Add</strong> button.</li><li class="listitem">Click on the <strong>Applications</strong> tab.</li><li class="listitem">Find the Bookmarks portlet using the search feature or by browsing the list of available portlets (the Bookmarks portlet can be found in the <strong>Community</strong> section).</li><li class="listitem">Click on the <strong>Add</strong> link next to the portlet name. The Bookmarks portlet with basic configuration will be added to the page.</li></ol><div></div><p>After adding the <a id="id586" class="indexterm"/>Bookmarks portlet to the page, we can change its default configuration. To configure Bookmarks portlet, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the options icon of the newly added portlet (this will be a gear icon in the top-right corner of the portlet).</li><li class="listitem">Choose the <strong>Configuration</strong> option.</li><li class="listitem">Choose <strong>Root Folder</strong> by clicking on the <strong>Select</strong> button and then on the <strong>Choose</strong> button next to the name of the folder you want to set as root.</li><li class="listitem">Enable the <strong>Show Search</strong> option.</li><li class="listitem">Enable the <strong>Show Subfolders</strong> option.</li><li class="listitem">Type <strong>10</strong> in the <strong>Folders per Page</strong> field.</li><li class="listitem">Leave the selected columns in the <strong>Show Columns</strong> filed.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Email From</strong> tab.</li><li class="listitem">Provide the sender's <strong>Name</strong> and <strong>Address</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Click on the <strong>Entry Added Email</strong> or <strong>Entry Updated Email</strong> tab.</li><li class="listitem">Set the <strong>Enabled</strong> option.</li><li class="listitem">Provide the <strong>Subject</strong> and <strong>Body</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec192"/>How it works…</h2></div></div></div><p>The Bookmarks portlet configuration allows us to set folders listing, bookmarks listing, and e-mail notification messages.</p><p>Here are the <a id="id587" class="indexterm"/>following options to list folders:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Root Folder</strong>: This option allows us to choose the folder that will be the highest (root) folder presented by the Bookmarks portlet</li><li class="listitem"><strong>Show Search</strong>: This option enables the search functionality within the Bookmarks portlet</li><li class="listitem"><strong>Show Subfolders</strong>: This option allows us to define the number of announcements presented on one list page</li><li class="listitem"><strong>Folders per Page</strong>: This option allows us to decide the number of folders shown on a single page of listing</li><li class="listitem"><strong>Show Columns</strong>: This option allows us to choose the set of columns presented on folders listing screen</li></ul></div><p>Here are the following bookmarks listing options:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Enable Related Assets</strong>: This option enables the related assets functionality, which lists all the assets defined as related in the adding/editing asset form</li><li class="listitem"><strong>Documents per Page</strong>: This option allows us to decide the number of folders shown on a single page of listing</li><li class="listitem"><strong>Show Columns</strong>: This option allows us to choose the set of columns presented on the folders listing screen</li><li class="listitem"><strong>Email From</strong>: This tab allows us to provide the sender's name and e-mail address</li><li class="listitem"><strong>Page Added Email</strong> and <strong>Page Updated Email</strong>: These tabs allow us to enable the e-mail messaging functionality and set the subject and message content using the available variables</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec193"/>See also</h2></div></div></div><p>For information on how to configure SMTP servers, refer to the <em>Configuring Liferay with the SMTP server</em> recipe from <a class="link" title="Chapter 11. Quick Tricks and Advanced Knowledge" href="part0080.xhtml#aid-2C9D01">Chapter 11</a>, <em>Quick Tricks and Advanced Knowledge</em>.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec72"/>Tracking social activities of site members</h1></div></div></div><p>The Activities portlet shows social activities of members of the site within which it is located and allows us to track products of such activities by showing where they can be found. The portlet informs <a id="id588" class="indexterm"/>us who performed certain activities on a site and when these activities have been performed, and presents URL addresses to these products.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec194"/>How to do it…</h2></div></div></div><p>To configure the Activities portlet on a page, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to the page on which the Activities portlet should be placed.</li><li class="listitem">Click on the add button (this is a <strong>+</strong> sign on the left side).</li><li class="listitem">Click on the <strong>Applications</strong> tab.</li><li class="listitem">Find the <strong>Activities</strong> portlet using the search feature or by browsing the list of available portlets (the Activities portlet can be found in the <strong>Social</strong> section).</li><li class="listitem">Click on the <strong>Add</strong> link next to the portlet name. The Activities portlet with basic configuration will be added to the page.</li><li class="listitem">Click on the options icon of the newly added portlet (this will be a gear icon in the top-right corner of the portlet).</li><li class="listitem">Choose the <strong>Configuration</strong> option.<div><img src="img/image00372.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Make sure that you are on the <strong>Setup</strong> tab.</li><li class="listitem">Choose <strong>10</strong> from the <strong>Maximum Activities to Display</strong> list.</li><li class="listitem">Leave <strong>Enable RSS Subscription</strong> option enabled.</li><li class="listitem">Set <strong>Maximum Items to Display</strong> to <strong>10</strong>.</li><li class="listitem">Choose the <strong>Abstract</strong> option from the <strong>Display Style</strong> list.</li><li class="listitem">Leave the <strong>Format</strong> option as it is.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec195"/>How it works…</h2></div></div></div><p>The Activities portlet lists activities performed by users, such as adding or editing web content, Wiki pages, message boards <a id="id589" class="indexterm"/>categories, posts and threads, documents, shortcuts, blog entries, bookmarks, and calendar events. The portlet also informs us that the user rated some content.</p><p>The portlet lists as many activities as indicated in the portlet configuration by the amount set in the <strong>Maximum Activities to Display</strong> option. It also allows users to track activities by using RSS. As was indicated in the preceding recipe, portlet configuration allows us to choose the following:</p><div><ul class="itemizedlist"><li class="listitem">The amount of items displayed by the RSS channel</li><li class="listitem">Whether full content, abstract, or title should be shown</li><li class="listitem">Whether RSS should be served in the Atom 1.0, RSS 1.0 or RSS 2.0 format</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec196"/>There's more</h2></div></div></div><p>It is also possible to use the Activities portlet on the user profile page. If the portlet is located within a user's profile page, it shows only this user's activities. To configure the Activities portlet on the user's profile page, click on the <strong>My Profile</strong> link located in the user's menu and follow all the steps indicated earlier.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec73"/>Using the announcements portlet for group messaging</h1></div></div></div><p>The Announcements <a id="id590" class="indexterm"/>portlet allows <a id="id591" class="indexterm"/>us to present and manage group messages called announcements. The Announcements functionality allows us to provide employees with some reminders or important organizational information. In the Announcements portlet, each user can see only messages that are dedicated to a group they belong to. Users will be notified via e-mails of new announcements.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec197"/>How to do it…</h2></div></div></div><p>To configure the <a id="id592" class="indexterm"/>Announcements<a id="id593" class="indexterm"/> portlet, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to the page on which the Announcements portlet should be placed.</li><li class="listitem">Click on the add button (this is a <strong>+</strong> sign on the left side).</li><li class="listitem">Click on the <strong>Applications</strong> tab.</li><li class="listitem">Find the <strong>Announcements</strong> portlet using the search feature or by browsing the list of available portlets (the Announcements portlet can be found in the <strong>Social</strong> section).</li><li class="listitem">Click on the <strong>Add</strong> link next to the portlet name. The Announcements portlet with basic configuration will be added to the page.</li><li class="listitem">Click on the options icon of the newly added portlet (this will be a gear icon the top-right corner of the portlet).</li><li class="listitem">Make sure you are on the <strong>Setup</strong> tab.</li><li class="listitem">Choose the <strong>Configuration</strong> option.</li><li class="listitem">Choose <strong>10</strong> from the <strong>Maximum Items to Display</strong> list.<div><img src="img/image00373.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div><p>To create a new announcement, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to the page on which the Announcements portlet is placed.</li><li class="listitem">Click on the <strong>Manage Entries</strong> tab.</li><li class="listitem">Choose the <strong>Site Member</strong> role from the <strong>Distribution Scope</strong> list. The <strong>Add Entry</strong> button will appear:<div><img src="img/image00374.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on<a id="id594" class="indexterm"/> the <strong>Add Entry</strong> button.</li><li class="listitem">Provide <strong>Title</strong> for the announcement (obligatory).</li><li class="listitem">Provide <strong>URL</strong> for the page to which the user will be redirected after clicking on the title of the announcement.</li><li class="listitem">Provide <strong>Content</strong> for the announcement.</li><li class="listitem">Choose <strong>Type</strong>, for example, <strong>News</strong>.</li><li class="listitem">Set <strong>Priority</strong> to <strong>Important</strong>.</li><li class="listitem">Leave <strong>Display Date</strong> as it is.</li><li class="listitem">Leave the <strong>Display Immediately</strong> option enabled.</li><li class="listitem">Set <strong>Expiration Date</strong>.</li><li class="listitem">Click on <strong>Save</strong> button.</li></ol><div></div><p>To edit an <a id="id595" class="indexterm"/>announcement, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to the page on which the Announcements portlet is placed.</li><li class="listitem">Click on the <strong>Edit</strong> link, located next to the title of the announcement you want to edit.<div><img src="img/image00375.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Modify the <a id="id596" class="indexterm"/>title, content, priority, and type of the announcement.</li><li class="listitem">Set <strong>Display Date</strong> or <a id="id597" class="indexterm"/>enable the <strong>Display Immediately</strong> option.</li><li class="listitem">Set <strong>Expiration Date</strong>.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div><p>To remove an announcement, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to the page on which the Announcements portlet is placed.</li><li class="listitem">Go to the <strong>Entries</strong> tab.</li><li class="listitem">Click on the <strong>Delete</strong> link located next to the title of the announcement you want to remove.</li><li class="listitem">Click on the <strong>Ok</strong> button. The announcement will be removed permanently.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec198"/>How it works…</h2></div></div></div><p>Announcements can be <a id="id598" class="indexterm"/>created by the <a id="id599" class="indexterm"/>site administrator or another user who has a role that contains permissions to create announcements. Such a user can distribute announcements to a specific group of users. However, a user who receives an announcement is not able to answer it or send it to other users (one-way communication). It is possible to distribute an announcement to all users from a specific organization, site, group, or to users having a particular role. The Announcement portlet consists of two tabs: the Entries and Manage Entries tabs. The Entries tab is available for all users and lists all the announcements dedicated to each user. The manage tab is visible for users having permissions to manage announcements and allows us to create, edit, and remove announcements.</p><div><div><div><div><h3 class="title"><a id="ch10lvl3sec72"/>Announcement management</h3></div></div></div><p>While creating a <a id="id600" class="indexterm"/>new announcement, a user has to define the following properties:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Distribution scope</strong>: This allows you to choose a group of users who will receive a message. Providing the distribution scope is obligatory.</li><li class="listitem"><strong>Title</strong>: The title text that will represent an announcement on the list. Defining the title is obligatory.</li><li class="listitem"><strong>URL</strong>: The page that will be shown after clicking on the title of the announcement.</li><li class="listitem"><strong>Content</strong>: The content of an announcement. Providing the content is obligatory.</li><li class="listitem"><strong>Type</strong>: The type of the announcement. The type is shown as a parameter on the list of entries on the <strong>Manage Entries</strong> tab.</li><li class="listitem"><strong>Priority</strong>: This allows you to define the priority of an announcement. Priority determines the position of an announcement on the list. Announcements with "Important" priority are listed before the "Normal" ones.</li><li class="listitem"><strong>Display Date</strong>: This allows you to define the day and hour of displaying an announcement.</li><li class="listitem"><strong>Display Immediately</strong>: This announcement will be displayed immediately after saving it.</li><li class="listitem"><strong>Expiration Date</strong>: This allows you to define the day and hour of the expiry of an announcement. Expired announcements are not listed on the <strong>Entries</strong> tab.</li></ul></div><p>It is very important to choose the distribution group wisely while adding a new announcement. This is because the distribution group is the only parameter that cannot be changed by editing an announcement.</p><p>Unlike other types <a id="id601" class="indexterm"/>of content, such as web content or documents (which are always moved to the trash at first), deleting an announcement causes the permanent removal of an announcement.</p></div><div><div><div><div><h3 class="title"><a id="ch10lvl3sec73"/>Portlet configuration</h3></div></div></div><p>Liferay allows us <a id="id602" class="indexterm"/>to customize this portlet setting. In order to change the settings, put the specific property in <code class="literal">${liferay.home}/portal-ext.properties</code>.</p><p>The Announcement portlet configuration allows us to define the number of announcements presented on one list page. To set the available values for the number of announcements to display per page, use the <code class="literal">announcements.entry.page.delta.values=5,10,20,30,50,75</code> property.</p><p>To set the list of announcement types, use the <code class="literal">announcements.entry.types=general,news,test</code> property.</p><p>You can also set the interval in minutes for how often <code class="literal">CheckEntryMessageListener</code> will run to check for new announcements and then inform users of new announcements via e-mail. To set this interval, use the <code class="literal">announcements.entry.check.interval</code> property.</p></div></div></div></body></html>