<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;The App: Displaying Movie Data via CSS3"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. The App: Displaying Movie Data via CSS3</h1></div></div></div><p>We already added some styles to our enterprise application using CSS in <a class="link" href="ch03.html" title="Chapter 3. The App: Structure and Semantics">Chapter 3</a>, <span class="emphasis"><em>The App: Structure and Semantics</em></span>, but we have not introduced the properties that make CSS3 a game changer. In this chapter, we will run through some useful CSS3 properties and practical implementations for our application explaining the scope of them in any web application.</p><p>Each example will feature support (and fallback when it is needed) for the most popular web browsers in the market.</p><p>The main topics covered in this chapter are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Back to the browsers' babel tower</li><li class="listitem" style="list-style-type: disc">CSS Magic: Adding more styles to MovieNow (rounded corners, color, gradients, box shadows, text shadows)</li><li class="listitem" style="list-style-type: disc">Movies and styles (transitions and animations)</li><li class="listitem" style="list-style-type: disc">Choosing between transitions and animations</li><li class="listitem" style="list-style-type: disc">Using media queries</li><li class="listitem" style="list-style-type: disc">Applying CSS3 selectors</li></ul></div><div class="section" title="Back to the browsers' babel tower"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec46"/>Back to the browsers' babel tower</h1></div></div></div><p>Whenever you start using a new CSS property, it is necessary to check the list of browsers that support it. If it is supported, you need to verify how to implement it and if it requires a prefix or a special form such as <code class="literal">filter</code> in Internet Explorer.</p><p>The following are the most common prefixes for CSS properties:<a id="id247" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">-moz-</code> Firefox</li><li class="listitem" style="list-style-type: disc"><code class="literal">-webkit-</code> Safari, Safari iOS, and Chrome</li><li class="listitem" style="list-style-type: disc"><code class="literal">-o-</code> Opera</li><li class="listitem" style="list-style-type: disc"><code class="literal">-ms-</code> Internet Explorer</li></ul></div><p>Workarounds when you do not have support of any property include use of images and removal of some visuals (following graceful degradation and trying to avoid the removal of features).</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip26"/>Tip</h3><p>We could use a JavaScript library such as Lea Verou's -prefix-free (<a class="ulink" href="http://leaverou.github.com/prefixfree/">http://leaverou.github.com/prefixfree/</a>) to avoid the use of multiple vendor prefixes, but this can affect our application's performance. As a general rule CSS is almost always faster (execution time) than JavaScript, so performance-wise a couple of lines more in our stylesheet is worth the effort.</p></div></div><p>As we saw in <a class="link" href="ch03.html" title="Chapter 3. The App: Structure and Semantics">Chapter 3</a>, <span class="emphasis"><em>The App: Structure and Semantics</em></span>, it is possible to add conditional CSS imports. This technique only works for Internet Explorer and you can compare versions using the following syntax:<a id="id248" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">lt</code> (less than)</li><li class="listitem" style="list-style-type: disc"><code class="literal">lte</code> (less than or equal to)</li><li class="listitem" style="list-style-type: disc"><code class="literal">gt</code> (greater than)</li><li class="listitem" style="list-style-type: disc"><code class="literal">gte</code> (greater than or equal to)</li></ul></div><p>For example, if you want to add a specific CSS file for Internet Explorer 7 and previous versions, you can use the following declaration:</p><div class="informalexample"><pre class="programlisting">&lt;!--[if lte IE 7]&gt; 
  &lt;link rel="stylesheet" href="css/ie7.css" type="text/css" /&gt;
&lt;![endif]--&gt;</pre></div><p>It is good practice to include Internet Explorer specific hacks and fallbacks in a separate stylesheet in order to achieve clear coding and avoid extra loading time in other browsers.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip27"/>Tip</h3><p>To add support for common CSS3 features such as border-radius and box-shadow, you can include CSS3 Pie <a id="id249" class="indexterm"/>(<a class="ulink" href="http://css3pie.com">http://css3pie.com</a>), a JavaScript library that adds support to these features for Internet Explorer 6 to 9.</p></div></div></div></div>
<div class="section" title="CSS3 Magic &#x2013; adding more styles to MovieNow"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec47"/>CSS3 Magic – adding more styles to MovieNow</h1></div></div></div><a id="id250" class="indexterm"/><p>Let us continue with our movie application development. As a general rule, you should plan in advance or, in other words, have a visual design before beginning to mess around with styles. A benefit of following this rule (and preferably having a style guide as well) is that your application will reflect a unified visual identity. Let us start styling some elements that we already know in our enterprise application.</p><p>We removed our <span class="strong"><strong>Find Movies</strong></span> button to make an automatic call later.</p><div class="section" title="Adding rounded corners"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec56"/>Adding rounded corners</h2></div></div></div><a id="id251" class="indexterm"/><p>If you had to create rounded corners with CSS1 and CSS2, you should know how complicated the possible solutions for rounded corners were. Generally, they involve images or heavy processing JavaScript affecting the performance of your enterprise application.</p><p>In CSS3, we have the <code class="literal">border-radius</code> property that allows us to specify rounded shapes for the four borders of the element.</p><p>The syntax of this property is as follows:</p><div class="informalexample"><pre class="programlisting">border-radius:top-left-radius top-right-radius bottom-right-radius top-left-radius;</pre></div><p>You can specify <code class="literal">%</code>, <code class="literal">em</code>, and <code class="literal">px</code> as units for each corner.</p><p>Supposing that we need to add rounded borders to the bottom of our <span class="strong"><strong>Top 5 Box Office</strong></span> section. We can use the <code class="literal">border-radius</code> property (and its equivalents with prefixes for each browser) using <code class="literal">0</code> for <code class="literal">top left</code> and <code class="literal">right</code>, and <code class="literal">8px</code> for <code class="literal">bottom left</code> and <code class="literal">right</code>.</p><div class="informalexample"><pre class="programlisting">aside{
  float:right;
  width:200px;
  padding:30px 0 10px 0;
  margin:0 10px;
  background-color:#E4E4E4;
<span class="strong"><strong>  /** TOP 5 ROUNDED BORDER **/</strong></span>
<span class="strong"><strong>  border-radius:0 0 8px 8px;</strong></span>
<span class="strong"><strong>  -moz-border-radius:0 0 8px 8px;</strong></span>
<span class="strong"><strong>  -webkit-border-radius:0 0 8px 8px;</strong></span>
<span class="strong"><strong>  -o-border-radius:0 0 8px 8px;</strong></span>
}</pre></div><p>Applying this, we can see the difference between the original Box Office (left) and the <code class="literal">border-radius</code> one (right).<a id="id252" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/5689_05_01.jpg" alt="Adding rounded corners"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip28"/>Tip</h3><p>Notice that if we use shorthand <code class="literal">border-radius:0 8px</code>, it adds round borders for top-right and bottom-left corners only.</p></div></div><p>This property is shorthand for <code class="literal">border-top-left-radius</code>, <code class="literal">border-top-right-radius</code>, <code class="literal">border-bottom-left-radius</code>, and <code class="literal">border-bottom-right-radius </code>properties.</p><p>Sadly, in the case of Internet Explorer, the property is supported only since IE9.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip29"/>Tip</h3><p>As an alternative, you can use <a id="id253" class="indexterm"/>CSS3 Pie (<a class="ulink" href="http://css3pie.com">http://css3pie.com</a>) or Curved Corner<a id="id254" class="indexterm"/> (<a class="ulink" href="http://code.google.com/p/curved-corner/)">http://code.google.com/p/curved-corner/)</a> to give support for previous versions of Internet Explorer.</p></div></div></div><div class="section" title="Setting color"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec57"/>Setting color</h2></div></div></div><a id="id255" class="indexterm"/><p>There are multiple ways to describe colors inside our stylesheets; the most common one is the hexadecimal <code class="literal">#rrggbb</code> where the first pair represents the numeric value of red, the second pair represents green, and the last one blue. Additionally, we can use a shorthand notation <code class="literal">#rgb</code> that will convert our value to <code class="literal">#rrggbb</code>, for example, if we use <code class="literal">#123</code> that will be recognized as <code class="literal">#112233</code>.</p><p>Let us go over other ways to describe colors:</p><div class="section" title="Red, green, and blue"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec04"/>Red, green, and blue</h3></div></div></div><a id="id256" class="indexterm"/><p>You can define a color using the syntax <code class="literal">rgb(R,G,B)</code> where R, G, and B indicate the intensity of the colors red, green, and blue and can be:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">An integer from 0 (no color) to 255 (max intensity)</li><li class="listitem" style="list-style-type: disc">A float 0.0% (no color) to 100.0% (max intensity)</li></ul></div><p>You must use the same units inside the declaration. It is supported in all modern browsers. Here is a class <code class="literal">title</code> with red fonts:</p><div class="informalexample"><pre class="programlisting">.title{
  color:rgb(255,0,0);
}</pre></div></div><div class="section" title="Red, green, blue, and alpha"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec05"/>Red, green, blue, and alpha</h3></div></div></div><a id="id257" class="indexterm"/><p>An extended specification of <code class="literal">rgb</code> that adds a value at the end for alpha transparency uses values from <code class="literal">0.0</code> (invisible) to <code class="literal">1.0</code> (completely visible). It is supported in all modern browsers and Internet Explorer since Version 9. We can define a red color for fonts in our class <code class="literal">title</code> with 50 percent of alpha transparency:</p><div class="informalexample"><pre class="programlisting">.title{
  color:rgba(255,0,0, .5);
}</pre></div></div><div class="section" title="Hue, saturation, and lightness"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec06"/>Hue, saturation, and lightness</h3></div></div></div><a id="id258" class="indexterm"/><p>HSL is a cylindrical-coordinate representation of colors. <code class="literal">vHue</code> is a floating point representation of an angle; this value defines the color on which saturation and lightness will be applied and its values range from <code class="literal">0</code> to <code class="literal">360</code>. Saturation is a percentage that goes from <code class="literal">0</code> (white) to <code class="literal">100%</code> (full color) and defines the colorfulness. Finally, lightness defines the amount of light and goes from <code class="literal">0%</code> (no light, total black) to <code class="literal">100%</code> (full color). The syntax is <code class="literal">hsl(H,S,L)</code>. It is supported in all modern browsers and Internet Explorer since Version 9. If we want to apply red fonts in our class <code class="literal">title</code>, we can do the following:</p><div class="informalexample"><pre class="programlisting">.title{
  color:hsl(0,100%,100%);
}</pre></div></div><div class="section" title="Hue, saturation, lightness, and alpha"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec07"/>Hue, saturation, lightness, and alpha</h3></div></div></div><a id="id259" class="indexterm"/><p>This is an extended specification of <code class="literal">hsl</code> that adds a value at the end for alpha transparency in the same way <code class="literal">rgba</code> does for <code class="literal">rgb</code>. It is supported in all modern browsers and Internet Explorer since Version 9. We can define a red color for fonts in our class <code class="literal">title</code> with 50 percent of alpha transparency as follows:</p><div class="informalexample"><pre class="programlisting">.title{
  color:hsla(0,100%,100%, .5);
}</pre></div><p>You can use a conditional CSS import for older versions of Internet Explorer and apply opacity and an alpha filter to get the same effect:</p><div class="informalexample"><pre class="programlisting">.title{
  color:#f00;
  opacity: 0.5;
  filter: alpha(opacity=50);
}</pre></div></div></div><div class="section" title="Adding gradients"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec58"/>Adding gradients</h2></div></div></div><a id="id260" class="indexterm"/><p>New applications in the market have adopted a plain design not because of technical restrictions but for the sake of simplicity. Even though it is sometimes necessary to add some styling to simulate depth, gradients make the process much easier.</p><p>CSS3 introduces <code class="literal">linear-gradient</code> and <code class="literal">radial-gradient</code> to <code class="literal">background</code> values. You can apply <code class="literal">gradients</code> to <code class="literal">background</code> or <code class="literal">background-image</code> properties.</p><p>A possible syntax for this is as follows:</p><div class="informalexample"><pre class="programlisting">background-image:linear-gradient(angle, color position, color position);</pre></div><p>You can add as many <code class="literal">color position</code> pairs as you want. Although it is possible to use hexadecimal colors, in this example we are going to use <code class="literal">rgb</code>.</p><a id="id261" class="indexterm"/><p>First, we add a gradient that goes from <code class="literal">top</code> to <code class="literal">bottom</code> to our navigation bar. It starts with light grey and ends with light grey, so we only need two points: <code class="literal">0%</code> and <code class="literal">100%</code>. The initial color will be <code class="literal">rgb(102,102,102)</code> and the final one will be <code class="literal">rgb(70,70,70)</code>. Adding this to <code class="literal">nav</code> with pertinent prefixes we have:</p><div class="informalexample"><pre class="programlisting">nav{
<span class="strong"><strong>  </strong></span>background-color:#666;
<span class="strong"><strong>  background-image:linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);</strong></span>
<span class="strong"><strong>  background-image:-moz-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);</strong></span>
<span class="strong"><strong>  background-image:-webkit-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);</strong></span>
<span class="strong"><strong>  background-image:-o-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);</strong></span>
<span class="strong"><strong>  background-image:-ms-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);</strong></span>
}</pre></div><p>As a result we can see the right image compared with the original one at the left:</p><div class="mediaobject"><img src="graphics/5689_05_02.jpg" alt="Adding gradients"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip30"/>Tip</h3><p>If you do not want to deal with every vendor prefix, an option is to use a generator such as<a id="id262" class="indexterm"/> Colorzilla Gradient Generator (<a class="ulink" href="http://www.colorzilla.com/gradient-editor/">http://www.colorzilla.com/gradient-editor/</a>). You only need to define your gradient with a visual tool and then copy the code generated into your CSS.</p></div></div><p>To show that we can add multiple points, let us apply a more complex effect to our <span class="strong"><strong>Top 5 Box Office</strong></span> area. In this case, we apply the effect from <code class="literal">bottom</code> to <code class="literal">top</code>:</p><div class="informalexample"><pre class="programlisting">aside{
  float:right;
  width:200px;
  padding:30px 0 10px 0;
  margin:0 10px;
  background-color:#E4E4E4;
  /** TOP 5 ROUNDED BORDER **/ 
  border-radius:0 0 8px 8px;
  -moz-border-radius:0 0 8px 8px;
  -webkit-border-radius:0 0 8px 8px;
  -o-border-radius:0 0 8px 8px;
  <span class="strong"><strong>/** BOX OFFICE GRADIENT **/</strong></span>
<span class="strong"><strong>  background:linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);</strong></span>
<span class="strong"><strong>  background:-o-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);</strong></span>
<span class="strong"><strong>  background:-moz-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);</strong></span>
<span class="strong"><strong>  background:-webkit-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);</strong></span>
<span class="strong"><strong>  background:-ms-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);</strong></span>
}</pre></div><p>As in our previous example, we use percentages to define positions. In this case, we use <code class="literal">35%</code>, <code class="literal">68%</code>, and <code class="literal">98%</code>.</p><a id="id263" class="indexterm"/><p>Finally, we can compare the original area (left) with the final one (right), as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/5689_05_03.jpg" alt="Adding gradients"/></div><a id="id264" class="indexterm"/><p>We can apply the same principles to our header:</p><div class="informalexample"><pre class="programlisting">header{
  color:#fff;
  height:122px;
  /** HEADER GRADIENT **/
  background-color:#1A1A1A;
  <span class="strong"><strong>background-image:url(../img/logo_back.png), linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);</strong></span>
<span class="strong"><strong>  background-image:url(../img/logo_back.png), -moz-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);</strong></span>
<span class="strong"><strong>  background-image:url(../img/logo_back.png), -webkit-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);</strong></span>
<span class="strong"><strong>  background-image:url(../img/logo_back.png), -o-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);</strong></span>
<span class="strong"><strong>  background-image:url(../img/logo_back.png), -ms-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);</strong></span>
}</pre></div><a id="id265" class="indexterm"/><p>We get a more interesting header (bottom) compared to the original one (top):</p><div class="mediaobject"><img src="graphics/5689_05_04.jpg" alt="Adding gradients"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip31"/>Tip</h3><p>The prefix <code class="literal">-ms- </code>for gradients in Internet Explorer was deprecated by Microsoft. Refer to the following link: <a class="ulink" href="http://msdn.microsoft.com/en-us/library/windows/apps/hh453527.aspx">http://msdn.microsoft.com/en-us/library/windows/apps/hh453527.aspx</a>.</p></div></div><p>It is always possible to fallback gradients using images in tile and the <code class="literal">background-image</code> property.</p></div><div class="section" title="Adding box shadows"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec59"/>Adding box shadows</h2></div></div></div><a id="id266" class="indexterm"/><p>We can use shadows to simulate depth giving the effect of inset and outset visuals. The property <code class="literal">box-shadow</code> allows us to create shadows based on the borders of the element.</p><p>The syntax for <code class="literal">box-shadow</code> is as follows:</p><div class="informalexample"><pre class="programlisting">box-shadow:horizontal-shadow vertical-shadow blur spread color inset;</pre></div><p>Only <code class="literal">horizontal-shadow</code> and <code class="literal">vertical-shadow</code> are required. <code class="literal">inset</code> specifies if the shadow is applied inside the element.</p><a id="id267" class="indexterm"/><p>Let us add a bottom drop shadow to our <code class="literal">nav</code>. We can specify <code class="literal">0</code> for <code class="literal">horizontal-shadow</code>, <code class="literal">1px</code> for <code class="literal">vertical-shadow</code> to show our shadow below the element, <code class="literal">3px</code> to give some <code class="literal">blur</code>, and color as <code class="literal">#999</code>:</p><div class="informalexample"><pre class="programlisting">nav{
  background-color:#666;
  background-image:linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);
  background-image:-moz-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);
  background-image:-webkit-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);
  background-image:-o-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);
  background-image:-ms-linear-gradient(top, rgb(102,102,102) 0%, rgb(70,70,70) 100%);
  <span class="strong"><strong>/** NAVIGATION SHADOW **/</strong></span>
<span class="strong"><strong>  box-shadow: 0 1px 3px #999;</strong></span>
<span class="strong"><strong>  -moz-box-shadow: 0 1px 3px #999;</strong></span>
<span class="strong"><strong>  -webkit-box-shadow: 0 1px 3px #999;</strong></span>
<span class="strong"><strong>  -o-box-shadow: 0 1px 3px #999;</strong></span>
}</pre></div><p>We can compare the <code class="literal">nav</code> menu without the shadow (left) and with the shadow (right):</p><div class="mediaobject"><img src="graphics/5689_05_05.jpg" alt="Adding box shadows"/></div><p>To demonstrate <code class="literal">inset</code>, we can add an inner shadow to our <span class="strong"><strong>Top 5 Box Office</strong></span> area. Here we apply negative positioning, <code class="literal">-1px</code>, for <code class="literal">vertical-shadow</code> to show a part of the shadow in the bottom, <code class="literal">1px</code> for <code class="literal">blur</code>, <code class="literal">1px</code> for <code class="literal">spread</code> (as we want to modify the size of our shadow), color <code class="literal">#aaa</code>, and finally <code class="literal">inset</code> to have an inner shadow:</p><div class="informalexample"><pre class="programlisting">aside{
  float:right;
  width:200px;
  padding:30px 0 10px 0;
  margin:0 10px;
  background-color:#E4E4E4;
  /** TOP 5 ROUNDED BORDER **/ 
  border-radius:0 0 8px 8px;
  -moz-border-radius:0 0 8px 8px;
  -webkit-border-radius:0 0 8px 8px;
  -o-border-radius:0 0 8px 8px;
  /** BOX OFFICE GRADIENT **/
  background:linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);
  background:-o-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);
  background:-moz-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);
  background:-webkit-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);
  background:-ms-linear-gradient(bottom, rgb(200,200,200) 35%, rgb(210,210,210) 68%, rgb(220,220,220) 98%, rgb(80,80,80) 100%);
  <span class="strong"><strong>/** BOX OFFICE INNER SHADOW **/</strong></span>
<span class="strong"><strong>  box-shadow:0 -1px 1px 1px #aaa inset;</strong></span>
<span class="strong"><strong>  -moz-box-shadow:0 -1px 1px 1px #aaa inset;</strong></span>
<span class="strong"><strong>  -webkit-box-shadow:0 -1px 1px 1px #aaa inset;</strong></span>
<span class="strong"><strong>  -o-box-shadow:0 -1px 1px 1px #aaa inset; </strong></span>
}</pre></div><a id="id268" class="indexterm"/><p>As a result, our <span class="strong"><strong>Top 5 Box Office</strong></span> area looks deeper than before:</p><div class="mediaobject"><img src="graphics/5689_05_06.jpg" alt="Adding box shadows"/></div><a id="id269" class="indexterm"/><p>We can apply this to our wrapper to have shadows on the left and right borders:</p><div class="informalexample"><pre class="programlisting">.wrapper{
  background-color:#fff;
  <span class="strong"><strong>/** PAGE SIDES SHADOWS **/</strong></span>
<span class="strong"><strong>  box-shadow: 1px 0 2px 1px #aaa;</strong></span>
<span class="strong"><strong>  -moz-box-shadow: 0 -1px 1px 1px #aaa;</strong></span>
<span class="strong"><strong>  -webkit-box-shadow: 0 -1px 1px 1px #aaa;</strong></span>
<span class="strong"><strong>  -o-box-shadow: 0 -1px 1px 1px #aaa;</strong></span>
}</pre></div><p>While it is difficult to notice, the sum of these small details helps to reflect the visual richness of the enterprise application:</p><div class="mediaobject"><img src="graphics/5689_05_07.jpg" alt="Adding box shadows"/></div><a id="id270" class="indexterm"/><p>
<code class="literal">box-shadow</code> is supported by all modern browsers except Internet Explorer, which only supports it from IE9 onwards.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip32"/>Tip</h3><p>Unfortunately, fake flexible drop shadows are hard to create or expensive because sometimes it is better to not use shadows in old browsers, following the principles of graceful degradation.</p></div></div></div><div class="section" title="Adding text shadows"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec60"/>Adding text shadows</h2></div></div></div><a id="id271" class="indexterm"/><p>To add shadows to text we cannot use <code class="literal">box-shadow</code> because it applies the shadow to a square container. If we want to add shadows to any text, we should use the <code class="literal">text-shadow</code> property.<a id="id272" class="indexterm"/>
</p><p>The syntax for <code class="literal">text-shadow</code> is as follows:</p><div class="informalexample"><pre class="programlisting">text-shadow: horizontal-shadow vertical-shadow blur color;</pre></div><p>
<code class="literal">text-shadow</code> is not supported by Internet Explorer, but for that case it is possible to use <code class="literal">filter:dropshadow</code> instead. The only downside (apart from compatibility) is that it is not possible to specify blur.</p><p>The syntax for <code class="literal">filter:dropshadow</code> is as follows:</p><div class="informalexample"><pre class="programlisting">filter: dropshadow(color=color, offx=horizontal-shadow, offy= vertical-shadow);</pre></div><p>Even shadow effects are thought of as a way to pop out text. We can change the <code class="literal">color</code> property and fake <code class="literal">inset</code> elements. We use a light gray and 1px displacement horizontally and vertically with no blur in our <span class="strong"><strong>Top 5 Box Office</strong></span> title:</p><div class="informalexample"><pre class="programlisting">aside h2{
  padding:0 20px 10px;
  margin:0 0 0;
  font-size:1.3em;
<span class="strong"><strong>  text-shadow: 1px 1px 0px #f2f2f2;</strong></span>
<span class="strong"><strong>  filter: dropshadow(color=#f2f2f2, offx=1, offy=1);</strong></span>
}</pre></div><a id="id273" class="indexterm"/><p>You can check the <code class="literal">inset</code> element (right):</p><div class="mediaobject"><img src="graphics/5689_05_08.jpg" alt="Adding text shadows"/></div><p>We will use a more traditional approach in our navigation bar, including <code class="literal">blur</code> on <code class="literal">hover</code>:</p><div class="informalexample"><pre class="programlisting">nav a{
  color:#ccc;
  text-decoration:none;  
}
nav a:hover{
  color:#fff;
<span class="strong"><strong>  text-shadow: 2px 2px 1px #222;</strong></span>
<span class="strong"><strong>  filter: dropshadow(color=#222222, offx=2, offy=2);</strong></span>
}</pre></div><div class="mediaobject"><img src="graphics/5689_05_09.jpg" alt="Adding text shadows"/></div></div><div class="section" title="Some tricks to fake 3D"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec61"/>Some tricks to fake 3D</h2></div></div></div><a id="id274" class="indexterm"/><p>Some depth effects can be simulated by using CSS previous to Version 3. For example, we can use borders to simulate depth by placing a dark color border over a light color one:</p><div class="informalexample"><pre class="programlisting">aside ol{
  padding:20px 0 0 36px;
  margin:0;
  counter-reset:counter;
  <span class="strong"><strong>border-top:1px dashed #f8f8f8;</strong></span>
}
aside h2{
  padding:0 20px 10px;
  margin:0 0 0;
  font-size:1.3em;
  text-shadow: 1px 1px 0px #f2f2f2;
  filter: dropshadow(color=#f2f2f2, offx=1, offy=1);
<span class="strong"><strong>  border-bottom:1px dashed #bbb;</strong></span>
}</pre></div><a id="id275" class="indexterm"/><p>We can do this by applying this to our <span class="strong"><strong>Top 5 Box Office</strong></span> area:</p><div class="mediaobject"><img src="graphics/5689_05_10.jpg" alt="Some tricks to fake 3D"/></div><p>In some cases, the effect is not obvious but helps to give depth as a part of other effects:</p><div class="informalexample"><pre class="programlisting">header{
  …
  <span class="strong"><strong>border-bottom:1px solid #222;</strong></span>
}
nav{
  …
  <span class="strong"><strong>border-top:1px solid #777;</strong></span>
  font-size:.9em;

}</pre></div><p>Applying this to the top of the navigation menu, we get the following:</p><div class="mediaobject"><img src="graphics/5689_05_11.jpg" alt="Some tricks to fake 3D"/></div><p>With all of our effects applied to our initial layout:</p><div class="mediaobject"><img src="graphics/5689_05_12.jpg" alt="Some tricks to fake 3D"/></div><a id="id276" class="indexterm"/><p>We see this:</p><div class="mediaobject"><img src="graphics/5689_05_13.jpg" alt="Some tricks to fake 3D"/></div></div></div>
<div class="section" title="Movies and styles"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec48"/>Movies and styles</h1></div></div></div><a id="id277" class="indexterm"/><p>Suppose that we have a requirement for the creation of a movie list with simple information, where every element shows more details when you click. Because of the tight deadline, the client decides to have a simple implementation, so that the requirement goes to a web designer and as a result we have an initial design:</p><div class="mediaobject"><img src="graphics/5689_05_14.jpg" alt="Movies and styles"/></div><a id="id278" class="indexterm"/><p>In a meeting with our web designer and our final client, we decide to show the movie synopsis on the click of the movie poster. Based on this, let us build a first approach to our structure.</p><p>For a list where the order does not mean anything, we can use an unordered list <code class="literal">ul</code>. We first add movie posters to identify each element easily (using <code class="literal">img</code>), and then we define two blocks using the <code class="literal">main-info</code> (to show as a default) and <code class="literal">description</code> (to show on click) sections. In <code class="literal">main-info</code>, we add the title as <code class="literal">h3</code>, genre and rate as <code class="literal">p</code> with the <code class="literal">details</code> class, movie theater with tag<code class="literal"> p</code> and the <code class="literal">theater</code> class, and actors as <code class="literal">p</code> with the <code class="literal">actors</code> class. In the details, we add the title as <code class="literal">h3</code> and the description as <code class="literal">p</code>. Now, our structure looks like the following code:</p><div class="informalexample"><pre class="programlisting">&lt;div id="movies-near-me"&gt;
  &lt;ul&gt;
    &lt;li itemtype="http://schema.org/Movie" itemscope="" class=""&gt;
      &lt;img width="120" alt="The Amazing Spider-Man" src="http://o.aolcdn.com/os/movies/movie_posters/30101_p_m"&gt;
      &lt;section class="main-info"&gt;
      &lt;h3 itemprop="name"&gt;The Amazing Spider-Man&lt;/h3&gt;
      &lt;p itemprop="genre" class="details genre"&gt;Action,Drama,Fantasy,Science Fiction&lt;/p&gt;
      &lt;p class="details"&gt;PG-13&lt;/p&gt;
      &lt;p class="theater"&gt;Regal E-Walk 13 247 West 42nd St&lt;/p&gt;
      &lt;p class="actors"&gt;Andrew Garfield,Emma Stone,Rhys Ifans,Denis Leary,Campbell Scott&lt;/p&gt;
    &lt;/section&gt;
    &lt;section class="description"&gt;
      &lt;h3 itemprop="name"&gt;The Amazing Spider-Man&lt;/h3&gt;
      &lt;p&gt;Typical teenager Peter Parker (Andrew Garfield) embraces his incredible destiny after uncovering one of his father's most carefully guarded secrets as Columbia Pictures reboots the Spider-Man franchis...&lt;/p&gt;
      &lt;/section&gt;
    &lt;/li&gt;
…
  &lt;/ul&gt;
&lt;/div&gt;</pre></div><a id="id279" class="indexterm"/><p>First, we add the AJAX call to the end of <code class="literal">movienow.geolocation.js</code>:</p><div class="informalexample"><pre class="programlisting">this.getLocation();</pre></div><p>Then, we modify the structure of the AJAX callback with our structure:</p><div class="informalexample"><pre class="programlisting">this.displayShowtimes = function(movies) {
  var movie = null;
  var html = '&lt;ul&gt;';
  for (var item in movies.items) {
    movie = movies.items[item];
    <span class="strong"><strong>var movieDesc=(movie.synopsis.length&gt;200)?movie.synopsis.substr(0,200)+"...": movie.synopsis;</strong></span>
<span class="strong"><strong>    var movieHTML='&lt;li itemscope itemtype="http://schema.org/Movie"&gt;';         </strong></span>
<span class="strong"><strong>    movieHTML+='&lt;img src="'+movie.poster+'" alt="'+movie.title+'" width="120" /&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;section class="main-info"&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;h3 itemprop="name"&gt;'+movie.title+'&lt;/h3&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;p class="details genre" itemprop="genre"&gt;'+Array(movie.genre).join(', ')+'&lt;/p&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;p class="details"&gt;'+movie.mpaaRating+'&lt;/p&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;p class="theater"&gt;'+movie.theater.title+" "+movie.theater.address+'&lt;/p&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;p class="actors"&gt;'+Array(movie.selectedStar).join(', ')+'&lt;/p&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;/section&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;section class="description"&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;h3 itemprop="name"&gt;'+movie.title+'&lt;/h3&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;/section&gt;';</strong></span>
<span class="strong"><strong>    movieHTML+='&lt;/li&gt;';</strong></span>
<span class="strong"><strong>    html+=movieHTML;</strong></span>
  }
  html+= '&lt;/ul&gt;';
  $('#movies-near-me').html(html);
  $("#movies-near-me li").click(function(){$(this).toggleClass("open")});
};</pre></div><a id="id280" class="indexterm"/><p>We are creating our DOM structure concatenating a string, but if you want to use a more elegant solution you can use a client-side template library such as<a id="id281" class="indexterm"/> jQuery tmpl (<a class="ulink" href="http://api.jquery.com/category/plugins/templates/">http://api.jquery.com/category/plugins/templates/</a>), <a id="id282" class="indexterm"/>Mustache (<a class="ulink" href="http://mustache.github.com/">http://mustache.github.com/</a>), <a id="id283" class="indexterm"/>Underscore (<a class="ulink" href="http://documentcloud.github.com/underscore/">http://documentcloud.github.com/underscore/</a>), or <a id="id284" class="indexterm"/>Pure (<a class="ulink" href="http://beebole.com/pure/">http://beebole.com/pure/</a>). Template libraries allow you to separate the DOM structure from data. Some of them, such as Underscore, include logic.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note16"/>Note</h3><p>Notice that we limit the size of <code class="literal">movie.synopsys</code> using <code class="literal">substr</code>.</p></div></div><p>As we want to add some highlights in white, we should change the <code class="literal">wrapper</code> and <code class="literal">main-info</code> <code class="literal">background-color</code> structures to a light gray as we saw in the original design, so we can use:</p><div class="informalexample"><pre class="programlisting">.wrapper, #movies-near-me li section.main-info{
  background-color:#f1f1f1;
}</pre></div><p>Our Top 5 box is floated right, so we can give some <code class="literal">margin</code> to our movies container allowing for a more flexible design. We will change the original width of our <code class="literal">wrapper</code> structure:</p><div class="informalexample"><pre class="programlisting">#movies-near-me{
  margin-right:200px;
}</pre></div><div class="section" title="Styling our list"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec62"/>Styling our list</h2></div></div></div><a id="id285" class="indexterm"/><p>We want to apply some animations later, so we will add <code class="literal">position:relative</code> to move the absolute positioned elements inside, using <code class="literal">li</code> as our point of reference. We add <code class="literal">overflow:hidden</code> to account for any elements out of our <code class="literal">li</code> area. We use <code class="literal">borders top </code>and <code class="literal">bottom</code> with light and dark colors respectively to add a sensation of depth. Finally, we add dark gray as <code class="literal">background-color</code> (not in the original design, but this will be covered with <code class="literal">main-info</code> and <code class="literal">img</code>) and we set the mouse <code class="literal">cursor</code> attribute to <code class="literal">pointer</code> to indicate that the element is clickable:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li{
  position:relative;
  overflow:hidden;
  border-top:1px solid #fff;
  border-bottom:1px solid #ccc;
  background-color: #202125;
  cursor:pointer;
}</pre></div><p>Let's float <code class="literal">img</code> to show <code class="literal">main-info</code> at its side and not below it. Oh, and some <code class="literal">margin</code> to leave a space between <code class="literal">img</code> and description text (that will be hidden for now):</p><div class="informalexample"><pre class="programlisting">#movies-near-me li img{
  float:left;
  margin-right:10px;
}</pre></div><p>We will be defining size, weight, and spacing for our titles as follows:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li h3{
  font-size:1.2em;
  font-weight:bold;
  padding:10px 0 3px 14px;  
}</pre></div><p>We will add padding for each information inside <code class="literal">p</code> tags:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li p{
  padding:5px 14px;
}</pre></div><p>Add a different text color and size for some details:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li .details{
  color:#333;
  font-size:.9em;
}</pre></div><p>We will define a different text color and size for the movie theater and italic style using the following declaration:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li .theater{
  color:#555;
  font-style:italic;
  font-size:.9em;
}</pre></div><a id="id286" class="indexterm"/><p>Applying a new style for actors:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li .actors{
  color:#666;
  font-size:.8em;
}</pre></div><p>We define a static height that is the same as each movie poster image:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li,#movies-near-me li section.main-info,#movies-near-me li section.description{
  height:178px;
}</pre></div><p>Absolute positioning is applied to <code class="literal">main-info</code> (to animate it later). We add <code class="literal">margin</code> equal to the <code class="literal">width</code> attribute of our movie poster image and some padding for our text inside:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li section.main-info{
  position:absolute;
  top:0;
  left:0;
  right:0;
  margin-left:120px;
  padding: 5px 0;
}</pre></div><p>Finally, we will be adding some styles for our hidden description, including an <code class="literal">inset box-shadow</code> attribute to simulate depth:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li section.description{
  color:#f1f1f1;
  font-size:.9em;
  line-height:1.4em;
  box-shadow:1px -8px 3px 4px #000 inset;
  -moz-box-shadow:1px -8px 3px 4px #000 inset;
  -webkit-box-shadow:1px -8px 3px 4px #000 inset;
  -o-box-shadow:1px -8px 3px 4px #000 inset;  
}</pre></div><p>At this point our design looks the same as the image supplied by our web designer, but we still cannot see movie details. Before we satisfy this requirement, let us talk about transitions and animations.<a id="id287" class="indexterm"/>
</p></div><div class="section" title="Transitions"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec63"/>Transitions</h2></div></div></div><a id="id288" class="indexterm"/><p>Usually we change classes of HTML elements based on interactions. For example, link styles on hover, show, and hiding of blocks of text on click for tabbed panels, and so on. Before CSS3, if we wanted to animate these changes, the only way to do it was with JavaScript. With CSS3, a simple way to do this is with <code class="literal">transition</code>. Having an initial class and a pseudo class triggered on an interaction, we can add a <code class="literal">transition</code> element with the properties that change between class and pseudo class to animate them.</p><p>The syntax for shorthand <code class="literal">transition</code> is as follows:</p><div class="informalexample"><pre class="programlisting">transition: transition-property transition-duration transition-timing-function transition-delay</pre></div><p>
<code class="literal">transition-timing-function</code> specifies how fast transition occurs. Possible values for this are: <code class="literal">linear</code>, <code class="literal">ease</code>, <code class="literal">ease-in</code>, <code class="literal">ease-out</code>, <code class="literal">ease-in-out</code>, and <code class="literal">cubic-bezier(n,n,n,n)</code>.</p><p>
<code class="literal">transition-delay</code> is used if we wanted to start our animation in another point in time other than initial state (0s).</p><p>We can use multiple transitions at the same time:</p><div class="informalexample"><pre class="programlisting">transition: property1 duration1 easing1 start-point1,..., propertyN durationN easingN start-pointN</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip33"/>Tip</h3><p>Transitions are triggered with interactions and have only two states: initial and final.</p></div></div></div><div class="section" title="Animations"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec64"/>Animations</h2></div></div></div><a id="id289" class="indexterm"/><p>If we want to implement complex movement that involves multiple states, it is not possible to use transitions. For this, we have animations. Moreover, you do not need to trigger an interaction to start an animation (but we shall keep this a secret so as to avoid a new animated GIF boom in this era).</p><p>Animations rely on <code class="literal">@keyframes</code>. Similar to their counterpart in animation tools (including Adobe Flash), a keyframe allows you to define states and the values of the properties in them.</p><p>For example, we can use:</p><div class="informalexample"><pre class="programlisting">@keyframes animation-name
{
  from {width:0}
  to {width:50px}
}</pre></div><a id="id290" class="indexterm"/><p>Or more complex constructs using percentages and multiple properties:</p><div class="informalexample"><pre class="programlisting">@keyframes animation-name
{
  0%{width:0;height:0}
  20%{width:5px;height:2px}
  60%{width:7px;height:10px}
  100%{width:50px;height:12px}
}</pre></div><p>We can specify as many steps as we want. <code class="literal">animation-name</code> is used later to call our keyframe.</p><p>The syntax used for animation is as follows:</p><div class="informalexample"><pre class="programlisting">animation: animation-name animation-duration animation-timing-function animation-delay animation-iteration-count animation-direction;</pre></div><p>Most of the properties have the same meaning as transitions. <code class="literal">animation-iteration-count</code> specifies the number of times that the animation will repeat (or <code class="literal">infinite</code> if it never stops), <code class="literal">animation-direction</code> allows the animation to run normally (<code class="literal">normal</code>), or alternate back and forward (<code class="literal">alternate</code>).</p><p>Additionally, we have <code class="literal">animation-play-state</code> that is not on the shorthand mode. This property allows us to stop (<code class="literal">paused</code>) and start again (<code class="literal">running</code>) our animation.</p></div></div>
<div class="section" title="Choosing between transitions and animations"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec49"/>Choosing between transitions and animations</h1></div></div></div><a id="id291" class="indexterm"/><a id="id292" class="indexterm"/><p>In our case we have only two states, one that shows the general details of the movie and a pseudo class state that shows the description of the movie. This should be triggered on click, so the simplest solution is to use a transition.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip34"/>Tip</h3><p>Although it is possible to use <code class="literal">animation</code> in every situation, it is better to rely on <code class="literal">transition</code> for simple requirements related to common interactions.</p></div></div><p>In our case, we want to animate the <code class="literal">main-info</code> <code class="literal">left</code> and <code class="literal">right</code> properties. The initial state s <code class="literal">0</code> for both: <a id="id293" class="indexterm"/>
<a id="id294" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">#movies-near-me li section.main-info{
  top:0;
<span class="strong"><strong>  left:0%;</strong></span>
<span class="strong"><strong>  right:0%;</strong></span>
  margin-left:120px;
  padding: 5px 0;
}
#movies-near-me li.open section.main-info{
  <span class="strong"><strong>left:100%;</strong></span>
<span class="strong"><strong>  right:-100%;</strong></span>
}</pre></div><p>The final state will be <code class="literal">left:100%</code> (<code class="literal">li</code> right side) and <code class="literal">right:-100%</code> (<code class="literal">100%</code> to the right from <code class="literal">li</code> right side). We create a pseudo state with class <code class="literal">open</code> for <code class="literal">li</code>:.</p><p>To change the class on click, we add a <code class="literal">toggleClass</code> call on click for each <code class="literal">li</code> using jQuery on <code class="literal">movienow.js</code>. <code class="literal">toggleClass</code> adds and removes the <code class="literal">open</code> class:</p><div class="informalexample"><pre class="programlisting">$("#movies-near-me li").click(function(){$(this).toggleClass("open")});</pre></div><p>If you click on each element, you will notice the change that shows and hides each description.</p><p>To add our <code class="literal">transition</code>, we specify the <code class="literal">left</code> and <code class="literal">right</code> properties and a duration of <code class="literal">.3</code> seconds for each one. Using multiple browser prefixes we have the following code:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li section.main-info{
  top:0;
<span class="strong"><strong>  left:0%;</strong></span>
<span class="strong"><strong>  right:0%;</strong></span>
  margin-left:120px;
  padding: 5px 0;
  <span class="strong"><strong>transition: right .3s, left .3s;</strong></span>
<span class="strong"><strong>  -moz-transition: right .3s, left .3s;</strong></span>
<span class="strong"><strong>  -webkit-transition: right .3s, left .3s;</strong></span>
<span class="strong"><strong>  -o-transition: right .3s, left .3s;</strong></span>
}</pre></div><p>Testing again, we should see a fluid movement that goes from one state to another.</p><div class="mediaobject"><img src="graphics/5689_05_15.jpg" alt="Choosing between transitions and animations"/></div><a id="id295" class="indexterm"/><a id="id296" class="indexterm"/><p>If we click on <span class="strong"><strong>Brave</strong></span>, we will see an animation and then the movie synopsis, as partially depicted in the following screenshot.</p><div class="mediaobject"><img src="graphics/5689_05_16.jpg" alt="Choosing between transitions and animations"/></div><p>Let us add an animation to our header to test the <a id="id297" class="indexterm"/>
<code class="literal">animation</code> property. Our header shows a movie roll film decoration. If we want to roll the roll film, we need to define some keyframes. In this case, we specify only two states: <code class="literal">from</code> and <code class="literal">to</code>. Because of our design, we move the roll horizontally from 0 to -19px (the space between white rectangles, to create the same initial and end state to our loop). We will add this with the respective browser prefixes and naming our <code class="literal">keyframe</code>with <code class="literal">movierolling</code>: <a id="id298" class="indexterm"/>
<a id="id299" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">@keyframes movierolling{
  from {background-position: 0 0;}
  to {background-position: -19px 0;}
}
/* Firefox */
@-moz-keyframes movierolling{
  from {background-position: 0 0;}
  to {background-position: -19px 0;}
}
/* Safari and Chrome */
@-webkit-keyframes movierolling{
  from {background-position: 0 0;}
  to {background-position: -19px 0;}
}
/* Opera */
@-o-keyframes movierolling{
  from {background-position: 0 0;}
  to {background-position: -19px 0;}
}</pre></div><p>We add <code class="literal">movierolling</code> as <code class="literal">animation</code> in our header specifying <code class="literal">.5 segs</code> <code class="literal">animation:movierolling .5s</code>, an infinite loop <code class="literal">animation-iteration-count:infinite</code>, and a linear easing to make a fluid loop <code class="literal">animation-timing-function:linear</code>. As a result, we have the following code:</p><div class="informalexample"><pre class="programlisting">header{
  color:#fff;
  height:122px;
  /** HEADER GRADIENT **/
  background-color:#1A1A1A;
  background-image:url(../img/logo_back.png), linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);
  background-image:url(../img/logo_back.png), -moz-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);
  background-image:url(../img/logo_back.png), -webkit-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);
  background-image:url(../img/logo_back.png), -o-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);
  background-image:url(../img/logo_back.png), -ms-linear-gradient(right, rgb(26,26,26) 35%, rgb(40,40,40) 68%, rgb(61,61,61) 85%);
  border-bottom:1px solid #222;
  <span class="strong"><strong>animation:movierolling .5s;</strong></span>
<span class="strong"><strong>  -moz-animation:movierolling .5s;</strong></span>
<span class="strong"><strong>  -webkit-animation:movierolling .5s;</strong></span>
<span class="strong"><strong>  -o-animation:movierolling .5s;</strong></span>
<span class="strong"><strong>  animation-iteration-count:infinite;</strong></span>
<span class="strong"><strong>  -moz-animation-iteration-count:infinite;</strong></span>
<span class="strong"><strong>  -webkit-animation-iteration-count:infinite;</strong></span>
<span class="strong"><strong>  -o-animation-iteration-count:infinite; </strong></span>
<span class="strong"><strong>  animation-timing-function:linear;</strong></span>
<span class="strong"><strong>  -moz-animation-timing-function:linear;</strong></span>
<span class="strong"><strong>  -webkit-animation-timing-function:linear;</strong></span>
<span class="strong"><strong>  -o-animation-timing-function:linear;</strong></span>
}</pre></div><p>And the roll is rolling!</p><a id="id300" class="indexterm"/><a id="id301" class="indexterm"/><p>Let us comment out this animation code for now and get back to our application.</p></div>
<div class="section" title="Using media queries"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec50"/>Using media queries</h1></div></div></div><a id="id302" class="indexterm"/><p>The transition that we added to visualize the synopses works nicely, but on mobile devices we do not have enough space to show the complete synopsis for each movie. A possible solution could be to hide the movie posters images for mobile devices, that should give us at least an additional 120 px.</p><p>As we saw in previous chapters, we can use media queries to specify different behaviors for different screen sizes. We can add a case for devices until 737 px:</p><div class="informalexample"><pre class="programlisting">@media only screen and (max-width: 737px){ … }</pre></div><p>Let us apply a transition with the same time of our <code class="literal">main-info</code> one, but in this case only for <code class="literal">margin-left</code>:</p><div class="informalexample"><pre class="programlisting">  #movies-near-me li img{
    <span class="strong"><strong>transition: margin-left .3s;</strong></span>
<span class="strong"><strong>    -moz-transition: margin-left .3s;</strong></span>
<span class="strong"><strong>    -webkit-transition: margin-left .3s;</strong></span>
<span class="strong"><strong>    -o-transition: margin-left .3s; </strong></span>
  }</pre></div><p>The final position should have a negative <code class="literal">margin</code> value to move our images outside of the <code class="literal">li</code> area:</p><div class="informalexample"><pre class="programlisting">  #movies-near-me li.open img{
    <span class="strong"><strong>margin-left:-120px;</strong></span>
  }</pre></div><a id="id303" class="indexterm"/><p>Additionally, let us hide actors and genres to have more space inside <code class="literal">main-info</code>:</p><div class="informalexample"><pre class="programlisting">  #movies-near-me li .actors, #movies-near-me li .genre{
    display:none;
  } </pre></div><p>Now we can see a different interaction in small devices, allowing us to see the complete description:</p><div class="mediaobject"><img src="graphics/5689_05_17.jpg" alt="Using media queries"/></div><a id="id304" class="indexterm"/><p>If we click on <span class="strong"><strong>The Bourne Legacy</strong></span>, we will see an animation and then the movie synopsis.</p><div class="mediaobject"><img src="graphics/5689_05_18.jpg" alt="Using media queries"/></div></div>
<div class="section" title="Applying CSS3 selectors"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec51"/>Applying CSS3 selectors</h1></div></div></div><a id="id305" class="indexterm"/><p>We have been using common selectors, but CSS3 introduces a new set that opens styling to new possibilities.</p><p>Most of these selectors are not supported in Internet Explorer 8 or the previous versions; you can verify support using the compatibility tables mentioned at the following link: <a class="ulink" href="http://www.quirksmode.org/css/contents.html#CSS3">http://www.quirksmode.org/css/contents.html#CSS3</a>. You can always substitute these selectors for class declarations on your CSS and add these classes in your HTML using conditionals in your code.</p><p>We will not include this code as a part of our project, but you can test it using <code class="literal">styles.css</code>
<a id="id306" class="indexterm"/> (code commented) in the <code class="literal">3.- selectors</code> folder to visualize the results.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">:first-of-type</code>:<a id="id307" class="indexterm"/> <a id="id308" class="indexterm"/>This selects the first element with the selector's type. Let us say we want to apply a different <code class="literal">background-color</code> to the first element inside our movie list. We can select the first appearance of <code class="literal">li</code> followed by the selector that indicates which element must change its background color:<div class="informalexample"><pre class="programlisting">#movies-near-me li:first-of-type section.main-info{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:last-of-type</code>: <a id="id309" class="indexterm"/>This is similar to the previous selector, but it selects the last element. Applying the same case as before:<div class="informalexample"><pre class="programlisting">#movies-near-me li:last-of-type section.main-info{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:only-of-type</code>: <a id="id310" class="indexterm"/>This selects only unique elements of the type indicated. Using our movie's details, if we apply the following:<a id="id311" class="indexterm"/><div class="informalexample"><pre class="programlisting">#movies-near-me li section.main-info h3:only-of-type{
  background-color:#ccc;
}</pre></div><p>We can add <code class="literal">background-color</code> to <code class="literal">h3</code> since it is only <code class="literal">h3</code> contained by its parent, but if we use the following, nothing is selected because there are multiple <code class="literal">p</code> elements inside:</p><div class="informalexample"><pre class="programlisting">#movies-near-me li section.main-info p:only-of-type{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:only-child</code>:<a id="id312" class="indexterm"/> This selects elements whose parents only contain them. For example, using this selector we can change <code class="literal">article</code> <code class="literal">background-color</code> because it is the only element contained by its parent.<a id="id313" class="indexterm"/><div class="informalexample"><pre class="programlisting">article:only-child{
  background-color:#ccc;
}</pre></div><p>But if we select <code class="literal">section</code>, nothing will be selected because there are multiple children in its parent.<a id="id314" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">section:only-child{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:nth-child(n)</code>: <a id="id315" class="indexterm"/>This allows us to specify the element we want to select using positions. If we want to select the third element in our list:<a id="id316" class="indexterm"/><div class="informalexample"><pre class="programlisting">#movies-near-me li:nth-child(3) section.main-info{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:nth-last-child(n)</code>: <a id="id317" class="indexterm"/><a id="id318" class="indexterm"/>This applies the same principle as the prior selector, but counting from the last element:<a id="id319" class="indexterm"/><div class="informalexample"><pre class="programlisting">#movies-near-me li:nth-last-child(2) section.main-info{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:nth-of-type(n)</code>: <a id="id320" class="indexterm"/>This uses the same principle as before, but it will count only elements of the same type. For example, if we apply <code class="literal">p:nth-of-type(2)</code> to select the second element, it will ignore any differences to <code class="literal">p</code>. Selecting the second <code class="literal">p</code> element, we have:<a id="id321" class="indexterm"/><div class="informalexample"><pre class="programlisting">#movies-near-me li section.main-info p:nth-of-type(2){
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:nth-last-of-type(n)</code>: <a id="id322" class="indexterm"/>This does the same, but counts from the last element:<a id="id323" class="indexterm"/><div class="informalexample"><pre class="programlisting">#movies-near-me li section.main-info p:nth-last-of-type(2){
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:last-child</code>:<a id="id324" class="indexterm"/> This selects the element that is the last child of its parent. Selecting the last movie, we have the following code snippet:<a id="id325" class="indexterm"/><div class="informalexample"><pre class="programlisting">#movies-near-me li:last-child section.main-info{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:root</code>: <a id="id326" class="indexterm"/>This allows us to select the <code class="literal">html</code> root tag. Let us change the <code class="literal">background-color</code> value of <code class="literal">html</code>, but first we reset the already defined <a id="id327" class="indexterm"/><code class="literal">background-color</code> attribute for <code class="literal">html</code> and <code class="literal">body</code> tags:<a id="id328" class="indexterm"/><div class="informalexample"><pre class="programlisting">html,body{
  background:none;
}</pre></div><p>Add <code class="literal">background-color</code> to <code class="literal">root</code> (<code class="literal">html</code>):</p><div class="informalexample"><pre class="programlisting">:root{
  background-color:#666; 
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:empty</code>: <a id="id329" class="indexterm"/>This selects elements with no children or text. Let us show in red <code class="literal">div</code> elements with no content in our application:<a id="id330" class="indexterm"/><div class="informalexample"><pre class="programlisting">div:empty{
  background-color:#ff0000;
}</pre></div><p>You should see the logo area and <code class="literal">div.push</code> in red.</p></li><li class="listitem" style="list-style-type: disc"><code class="literal">:target</code>: <a id="id331" class="indexterm"/>This selects elements with the <code class="literal">id</code> value equal to the active <code class="literal">anchor</code>. To test this we can define a link with an anchor and an <code class="literal">id</code> attribute to mark the link as active:<a id="id332" class="indexterm"/><a id="id333" class="indexterm"/><div class="informalexample"><pre class="programlisting">&lt;nav&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href="#home" id="home"&gt;Home&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;</pre></div><p>We can define the style to mark the text in yellow:</p><div class="informalexample"><pre class="programlisting">:target{
  color:#FFFF00;
}</pre></div><p>If you click the link, you will see the color change.</p></li><li class="listitem" style="list-style-type: disc"><code class="literal">:not(selector)</code>:<a id="id334" class="indexterm"/> This selects all elements that do not fulfill the conditions of the selector. For example, if we want to select all <code class="literal">p </code>elements except the ones with the <code class="literal">theater</code> class:<a id="id335" class="indexterm"/><div class="informalexample"><pre class="programlisting">p:not(.theater){
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:enabled</code>: <a id="id336" class="indexterm"/>This selects input fields with no disabled property. If we have, <code class="literal">&lt;input type="button" value="enable"  /&gt;</code>, we can define an orange border using the following code:<a id="id337" class="indexterm"/><div class="informalexample"><pre class="programlisting">input:enabled{
  border:1px solid #E38217;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:disabled</code>:<a id="id338" class="indexterm"/> <a id="id339" class="indexterm"/>This selects input fields with the <code class="literal">disabled</code> property. <a id="id340" class="indexterm"/>As before we can have:<div class="informalexample"><pre class="programlisting">&lt;input type="button" value="disable" disabled="disabled" /&gt;
input:disabled{
  border:1px solid #E38217;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">:checked</code>: <a id="id341" class="indexterm"/><a id="id342" class="indexterm"/>This selects <code class="literal">input</code> with <code class="literal">type</code> <code class="literal">checkbox</code> that are <code class="literal">checked</code>. If we have the following code, we can see that the element changes style when it is checked:<a id="id343" class="indexterm"/><div class="informalexample"><pre class="programlisting">&lt;label&gt;&lt;input type="checkbox" /&gt;Checked&lt;/label&gt;
Applying style:
input:checked{
  width:20px;
  height:20px;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">element1~element2</code>:<a id="id344" class="indexterm"/> <a id="id345" class="indexterm"/>This selects <code class="literal">element2</code> preceded by <code class="literal">element1</code>. If we want to select <code class="literal">p</code> elements preceded by<code class="literal"> h3</code>, we can apply the following:<div class="informalexample"><pre class="programlisting">h3~p{
  background-color:#ccc;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">[attribute^=value]</code>:<a id="id346" class="indexterm"/> <a id="id347" class="indexterm"/>This selects elements whose "attribute" begins with a particular "value". For example, let us hide the poster's images for every image whose <code class="literal">alt</code> attribute starts with <code class="literal">Dark</code>:<div class="informalexample"><pre class="programlisting">img[alt^="Dark"]{
  display:none;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">[attribute$=value]</code>: <a id="id348" class="indexterm"/>This selects elements whose "attribute" ends with a particular "value". For example, let us hide the poster's images for every image whose <code class="literal">alt</code> attribute ends with <code class="literal">s</code>:<a id="id349" class="indexterm"/><div class="informalexample"><pre class="programlisting">img[alt$="s"]{
  display:none;
}</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">[attribute*=value]</code>: <a id="id350" class="indexterm"/>This selects elements whose "attribute" contains a "value". For example, let us hide the poster's images for every image whose <a id="id351" class="indexterm"/><code class="literal">alt</code> attribute contains <code class="literal">ar</code>:<a id="id352" class="indexterm"/><a id="id353" class="indexterm"/><div class="informalexample"><pre class="programlisting">img[alt*="ar"]{
  display:none;
}</pre></div></li></ul></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec52"/>Summary</h1></div></div></div><p>New CSS3 features are not a new introduction to web development; they are a simplification of the execution. Before CSS3, it was possible to use gradients, drop shadows, rounded corners and even animations, but implementations were expensive and the scalability intricate. With all these possibilities, we should not forget old techniques that rely on images and complex JavaScript because even though we all hope for a simpler future based only in new generation browsers, we must face the problems of old generation browsers.</p><p>We have shown how to apply the most used CSS3 properties to our enterprise applications and how to manage compatibility issues related with styles across the browsers. Additionally, we introduced CSS3 animations and transitions, so now we are capable of selecting the right solution for our projects. Finally, we can apply media queries and selectors to our stylesheets for more complex and elegant solutions.</p><p>The following chapter will introduce HTML5 video and audio management, JavaScript control of media reproduction, and basic strategies to grant backward compatibility.</p></div></body></html>