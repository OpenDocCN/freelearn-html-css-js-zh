<html><head></head><body>
		<div><h1 id="_idParaDest-32"><em class="italic"><a id="_idTextAnchor043"/>Chapter 3:</em> Setting Up the Environment</h1>
			<p>The main learning goal of this chapter is to get used to setting up the testing environment for writing end-to-end tests using TestCafe. You will learn how to set up a Node.js environment (including TestCafe itself), create a basic configuration file to run the tests, and structure the test code to follow the best practices.</p>
			<p>This is especially important because in real life, each new project/repository usually requires a testing infrastructure to be set up to prevent regressions and to keep the code quality high.</p>
			<p>To sum up, this chapter will cover the following main topics:</p>
			<ul>
				<li><a id="_idTextAnchor044"/>Setting up the test project environment.</li>
				<li>Creating the test project configuration file.</li>
				<li><a id="_idTextAnchor045"/>Structuring the test code.</li>
			</ul>
			<h1 id="_idParaDest-33"><a id="_idTextAnchor046"/>Technical requirements</h1>
			<p>All the code examples for this chapter can be found on GitHub at <a href="https://github.com/PacktPublishing/Modern-Web-Testing-with-TestCafe/tree/master/ch3">https://github.com/PacktPublishing/Modern-Web-Testing-with-TestCafe/tree/master/ch3</a>.</p>
			<h1 id="_idParaDest-34"><a id="_idTextAnchor047"/>Setting up the test project environment</h1>
			<p>It is important to set<a id="_idIndexMarker087"/> up the environment properly now as we will be using it for the rest of the chapter and up to the end of this book. Doing so will also help you understand the basics of how Node.js deals with different packages and how to spin up pretty much any JavaScript/Node.js-based testing framework. We will divide the setup process into two sections:</p>
			<ul>
				<li>Installing Node.js.</li>
				<li><a id="_idTextAnchor048"/>Installing TestCafe.</li>
			</ul>
			<p>So, let's go through the whole process, starting from the beginning—installing Node.js.</p>
			<h2 id="_idParaDest-35"><a id="_idTextAnchor049"/>Installing Node.js</h2>
			<p>JavaScript is a client-side<a id="_idIndexMarker088"/> programming language<a id="_idIndexMarker089"/> that mostly deals with the frontend, which means it is usually processed by the browser of each user that opens your website or web application. Node.js was developed as a JavaScript runtime environment to provide the ability to use JavaScript as a server-side backend language.</p>
			<p>In order to launch almost<a id="_idIndexMarker090"/> any development tools written in JavaScript, you'll need to use Node.js and <code>node_modules</code> folder).</p>
			<p>Node.js is available for a variety of operating systems, macOS, Ubuntu/Linux, and Windows being among them. The easiest way to install Node.js and <code>npm</code> is to follow these steps:</p>
			<ol>
				<li>Open <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>.</li>
				<li> Select<a id="_idIndexMarker091"/> the <strong class="bold">long-term support (LTS)</strong> version.</li>
				<li> Select your operating system.</li>
				<li>Download the installation file and run it.</li>
			</ol>
			<p>Another slightly more complex <a id="_idIndexMarker092"/>but reusable way is to install Node.js through <strong class="bold">Node Version Manager (nvm </strong>– <a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a>) or n (<a href="https://github.com/tj/n">https://github.com/tj/n</a>). Version managers give you the ability to install several versions of Node.js simultaneously and switch between them whenever you like, which is quite useful during test development.</p>
			<p>Once the installation is finished, you can check whether both Node.js and <code>npm</code> are working properly by <a id="_idIndexMarker093"/>opening <a id="_idIndexMarker094"/>any shell (for example, Terminal or PowerShell) and executing the following:</p>
			<pre>$ node -v
$ npm -v</pre>
			<p>That should output the version number for Node.js and <code>npm</code>, respectively.</p>
			<h2 id="_idParaDest-36"><a id="_idTextAnchor050"/>Installing TestCafe</h2>
			<p>As we already <a id="_idIndexMarker095"/>have Node.js and <a id="_idIndexMarker096"/><code>npm</code> installed, let's proceed with installing TestCafe. It can be installed from <code>npm</code> locally (to run from your project folder) or globally (to run from any location).</p>
			<h3>Installing TestCafe locally</h3>
			<p>To install TestCafe locally <a id="_idIndexMarker097"/>to your project <a id="_idIndexMarker098"/>directory and save it to the dependencies list, open any shell, go to your project folder, and execute the following two commands:</p>
			<pre>$ npm init --yes
$ npm install testcafe --save-dev</pre>
			<p>The first command will create a simple <code>package.json</code> file to store all the dependencies. The second command will install the <code>testcafe</code> package and save it to the list of your project's dependencies in <code>package.json</code>.</p>
			<h3>Installing TestCafe globally</h3>
			<p>To install TestCafe<a id="_idIndexMarker099"/> globally, open any shell <a id="_idIndexMarker100"/>and execute the following command:</p>
			<pre>$ npm install testcafe --global</pre>
			<p>This will install TestCafe globally, and it will be accessible from any folder.</p>
			<p>You can always check the version of the <code>testcafe</code> package that is installed by executing the following command:</p>
			<pre>$ npx testcafe -v --no-install</pre>
			<p class="callout-heading">Note</p>
			<p class="callout">On macOS (starting from v10.15 Catalina and up), TestCafe requires screen recording permission to carry out test actions and take screenshots and videos. When TestCafe tests launch for the first time, macOS will ask you to allow screen recording for TestCafe browser tools. Go to <strong class="bold">System Preferences</strong> - <strong class="bold">Security and Privacy</strong> - <strong class="bold">Privacy</strong> and check <strong class="bold">TestCafe Browser Tools</strong> to grant permission. When you update macOS or TestCafe, security permissions may be purged—in this case, the system will repeat the request. So, when the <strong class="bold">Security and Privacy</strong> popup opens again, just uncheck and recheck the <strong class="bold">TestCafe Browser Tools</strong> checkbox.</p>
			<p>Now, as we<a id="_idIndexMarker101"/> have Node.js, npm, and<a id="_idIndexMarker102"/> TestCafe installed and ready, let's proceed with creating a configuration file for our tests.</p>
			<h1 id="_idParaDest-37"><a id="_idTextAnchor051"/>Creating the test project configuration file</h1>
			<p>In this section, we <a id="_idIndexMarker103"/>will see how to configure TestCafe. However, before reviewing the main configuration options, let's set a convention for some coding style standards.</p>
			<h2 id="_idParaDest-38"><a id="_idTextAnchor052"/>Accepting code styling convention</h2>
			<p>When writing code <a id="_idIndexMarker104"/>throughout this book, we will follow some simple rules, such as indenting with two spaces for <code>.json</code> files and four spaces for <code>.js</code> files. We will also use semicolons and single-quotes. Most popular code editors support a <code>.editorconfig</code> configuration file to automatically apply the rules:</p>
			<pre>root = true [*]indent_style = space indent_size = 4 end_of_line = lf insert_final_newline = true charset = utf-8 trim_trailing_whitespace = true max_line_length = 120 [*.json]indent_size = 2</pre>
			<p>You can copy the basic <a id="_idIndexMarker105"/>config file that we will be using from <a href="https://github.com/PacktPublishing/Modern-Web-Testing-with-TestCafe/blob/master/.editorconfig">https://github.com/PacktPublishing/Modern-Web-Testing-with-TestCafe/blob/master/.editorconfig</a>.</p>
			<h2 id="_idParaDest-39"><a id="_idTextAnchor053"/>Exploring the configuration settings</h2>
			<p>The TestCafe <a id="_idIndexMarker106"/>configuration settings are usually stored in the <code>.testcaferc.json</code> file in the root folder of your project. Let's look at the main options that can be specified:</p>
			<ul>
				<li><code>browsers</code> is a string, or an array of strings, that sets one or more browsers to launch tests in. Browser aliases should be specified for any locally installed browsers, such as <code>chrome</code>, <code>firefox</code>, <code>safari</code>, <code>ie</code>, <code>edge</code>, or <code>opera</code> (<a href="https://devexpress.github.io/testcafe/documentation/guides/concepts/browsers.html#locally-installed-browsers">https://devexpress.github.io/testcafe/documentation/guides/concepts/browsers.html#locally-installed-browsers</a>). You can see the list of all the available browsers in your system—just open any shell and run the following command:<pre><code>.testcaferc.json</code> will look like this:</p><pre>{<a id="_idTextAnchor054"/>  "browsers": "chrome"}</pre><p>To run tests in Firefox and Chrome, your test will look like this:</p><pre>{<a id="_idTextAnchor055"/>  "browsers": ["firefox", "chrome"]}</pre><p>To run tests in remote browsers (such as SauceLabs, BrowserStack, CrossBrowserTesting, and so on) with a browser provider plugin, set the browser provider name, together with the browser alias and operating system, as follows:</p><pre>{<a id="_idTextAnchor056"/>  "browsers": "saucelabs:Chrome@83.0:Windows 10"}</pre><p>Postfixes to <a id="_idIndexMarker107"/>browser aliases can be used to launch tests in headless mode or to apply Chrome device emulation (<a href="https://devexpress.github.io/testcafe/documentation/guides/concepts/browsers.html#use-chromium-device-emulation">https://devexpress.github.io/testcafe/documentation/guides/concepts/browsers.html#use-chromium-device-emulation</a>):</p><pre>{<a id="_idTextAnchor057"/>  "browsers": ["firefox:headless",     "chrome:emulation:device=iphone X"]}</pre><p class="callout-heading">Note</p><p class="callout">TestCafe starts Chrome and Firefox with a fresh profile by default, without any extensions or profile settings. If you need to launch a browser with the current user profile, add the <code>:userProfile</code> postfix flag after the browser alias.</p></li>
				<li><code>src</code> is a string, or an <a id="_idIndexMarker108"/>array of strings, that sets a path to files or directories from where the tests should be launched. To run tests from one file, use the following code:<pre>{<a id="_idTextAnchor058"/>  "src": "tests/login-test.js"}</pre><p>Global patterns can be used to parse a set of files:</p><pre>{<a id="_idTextAnchor059"/>  "src": ["tests/**/*.js", "utils/helpers/"]}</pre></li>
				<li><code>reporter</code> is a string or an array of objects that sets the name of a built-in or custom reporter for generating test reports (<a href="https://devexpress.github.io/testcafe/documentation/guides/concepts/reporters.html">https://devexpress.github.io/testcafe/documentation/guides/concepts/reporters.html</a>). By default, a <code>spec</code> reporter is used. To specify any other reporters—for example, <code>minimal</code>—use the following:<pre>{<a id="_idTextAnchor060"/>  "reporter": "minimal"}</pre><p>Multiple reporters can be set at the same time, but only one reporter can write to the console output (standard output, or <code>stdout</code>), and all other reporters should write to the files:</p><pre>{<a id="_idTextAnchor061"/>  "reporter": [    {      "name": "minimal"    },    {      "name": "json",      "output": "tests/reports/report.json"    },    {      "name": "xunit",      "output": "tests/reports/report.xml"    }  ]}</pre><p>You can also explore and <a id="_idIndexMarker109"/>use any of the available reporters from <a href="https://www.npmjs.com/search?q=testcafe-reporter">https://www.npmjs.com/search?q=testcafe-reporter</a>.</p></li>
				<li><code>screenshots</code> is an object that allows you to set the screenshot options. These options include <code>path</code>, which is a string for the directory where screenshots are saved; <code>takeOnFails</code>, which is a boolean for whether a screenshot should be captured whenever a test fails; <code>pathPattern</code>, which is a string for the custom pattern to create a relative path and a name for the screenshot; and <code>fullPage</code>, which is a boolean for whether a screenshot should be taken of the full page (including any content that is not visible because of the overflow):<pre>{<a id="_idTextAnchor062"/>  "screenshots": {    "path": "tests/screenshots/",    "takeOnFails": true,    "pathPattern": "${DATE}_${TIME}/test-${TEST_   INDEX}/${USERAGENT}/${FILE_INDEX}.png",    "fullPage": true   }}</pre><p class="callout-heading">Note</p><p class="callout">See the full list of the placeholder path patterns that can be used for screenshots and videos at <a href="https://devexpress.github.io/testcafe/documentation/guides/advanced-guides/screenshots-and-videos.html#path-pattern-placeholders">https://devexpress.github.io/testcafe/documentation/guides/advanced-guides/screenshots-and-videos.html#path-pattern-placeholders</a>.</p></li>
				<li><code>videoPath</code> is a string for the <a id="_idIndexMarker110"/>directory where videos of test runs are saved:<pre>{<a id="_idTextAnchor063"/>  "videoPath": "tests/videos/"}</pre></li>
				<li><code>videoOptions</code> is an object that allows you to set the video options. These options include <code>failedOnly</code>, which is a boolean that should be set to <code>true</code> to enable recording for the failed tests only or to <code>false</code> (the default) to record all the tests; <code>singleFile</code>, which is a boolean that should be set to <code>true</code> to save the whole record in a single file or to <code>false</code> (the default) for a separate file per test; and <code>pathPattern</code>, which is a string for the custom pattern to compose the relative path and the name of the video file:<pre>{<a id="_idTextAnchor064"/>  "videoOptions": {    "failedOnly": true,    "singleFile": true,    "pathPattern": "${TEST_INDEX}/${USERAGENT}/${FILE_INDEX}.mp4"  }}</pre></li>
				<li><code>videoEncodingOptions</code> is an object that sets the video encoding options (all the <code>FFmpeg</code> library options are supported, which you can find at <a href="https://ffmpeg.org/ffmpeg.html#Options">https://ffmpeg.org/ffmpeg.html#Options</a>). For example, let's set the frame rate and video display aspect ratio:<pre>{<a id="_idTextAnchor065"/>  "videoEncodingOptions": {    "r": 24,    "aspect": "16:9"  }}</pre></li>
				<li><code>quarantineMode</code> is a boolean to switch failed tests to quarantine mode (to rerun the unstable tests):<pre>{<a id="_idTextAnchor066"/>  "quarantineMode": true }</pre><p>If quarantine mode is turned on, tests run will follow the next logic:</p></li>
			</ul>
			<div><div><img src="img/B16280_03_01_New.jpg" alt="Figure 3.1 – Tests run logic in quarantine mode&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.1 – Tests run logic in quarantine mode</p>
			<ul>
				<li><code>debugMode</code> is a boolean to run tests in debugging mode:<pre>{ <a id="_idTextAnchor067"/> "debugMode": true }</pre><p class="callout-heading">Note</p><p class="callout">If debug mode is on, test execution will be paused before the first action or assertion so that you can open the developer tools and start debugging. To make it easier, a status bar will be displayed in the footer showing the available debug actions: <strong class="bold">Unlock page</strong>, <strong class="bold">Resume</strong>, and <strong class="bold">Next step</strong>.</p></li>
				<li><code>debugOnFail</code> is a boolean to automatically enable debug mode after a test fails. If this option is set to <code>true</code> (it's set to <code>false</code> by default), TestCafe will pause during the test failure so that you can view the tested page, open the developer tools, and figure out why it failed:<pre>{ <a id="_idTextAnchor068"/> "debugOnFail": true }</pre></li>
				<li><code>skipJsErrors</code> is a boolean to ignore JavaScript errors on a tested web page (by default, when these errors occur, TestCafe will stop running the test and post an error message with a stack trace to the output report):<pre>{ <a id="_idTextAnchor069"/> "skipJsErrors": true }</pre></li>
				<li><code>skipUncaughtErrors</code> is a boolean to ignore uncaught JavaScript errors and unhandled <a id="_idIndexMarker111"/>promise rejections on a tested web page (by default, when these errors or promise rejections occur, TestCafe will stop running the test and post an error message with a stack trace to the output report):<pre>{ <a id="_idTextAnchor070"/> "skipUncaughtErrors": true }</pre></li>
				<li><code>appCommand</code> is a string to execute the specified shell command before tests are started. This option is often used to launch the application you need to run tests over (such application will be automatically stopped after all the tests are executed):<pre>{ <a id="_idTextAnchor071"/> "appCommand": "node server.js"}</pre></li>
				<li><code>appInitDelay</code> is the time TestCafe will wait before launching the tests (in milliseconds; the default value is <code>1000</code>). So, this delay is used to give an application launched with the <code>appCommand</code> option some time to start:<pre>{ <a id="_idTextAnchor072"/> "appCommand": "node server.js",  "appInitDelay": 5000 }</pre></li>
				<li><code>concurrency</code> is the number of browser instances spawned to run tests in parallel. TestCafe will start with a specified number of browser instances and create a pool of those instances. Tests will be launched simultaneously against this pool; each test will take the first free browser instance from the pool and run inside this instance:<pre>{ <a id="_idTextAnchor073"/> "concurrency": 4 }</pre></li>
				<li><code>selectorTimeout</code> is the time within which the selector sends requests to retrieve a web element node (in milliseconds; the default value is <code>10000</code>):<pre>{ <a id="_idTextAnchor074"/> "selectorTimeout": 15000 }</pre></li>
				<li><code>assertionTimeout</code> is the time during which TestCafe performs assertion requests (in milliseconds; the default<a id="_idIndexMarker112"/> value is <code>3000</code>). This timeout will be applied only if a selector property or a client function is used in an assertion as an <code>actual</code> value:<pre>{ <a id="_idTextAnchor075"/> "assertionTimeout": 5000 }</pre></li>
				<li><code>pageLoadTimeout</code> is the time after the <code>DOMContentLoaded</code> event within which TestCafe waits for the <code>window.load</code> event to be fired (in milliseconds; the default value is <code>3000</code>). TestCafe starts the test after the <code>window.load</code> event is triggered or the timeout passes (whichever happens first):<pre>{ <a id="_idTextAnchor076"/> "pageLoadTimeout": 10000 }</pre></li>
				<li><code>speed</code> is the test execution speed (<code>1</code> is the fastest and <code>0.01</code> is the slowest; <code>1</code> is the default). This option can be used to slow down the tests:<pre>{ <a id="_idTextAnchor077"/> "speed": 0.5 }</pre><p class="callout-heading">Note</p><p class="callout">If the speed is set in <code>.testcaferc.json</code> and also within the test for an individual action, the action's speed setting will have a higher priority and will override the speed set in the configuration file.</p></li>
				<li><code>clientScripts</code> is an object, an array of objects, or a string for the scripts to be injected into any pages opened during the tests. This property is often used to add client-side mock functions, modules, or helper scripts. You can set <code>content</code>, which is a string with the code to inject the JavaScript code; <code>module</code>, which is a string with the module name to inject the module; and <code>path</code>, which is a string with the path to the file to inject the JavaScript file. Any of these settings can be paired with the optional <code>page</code> setting to set a specific page that the<a id="_idIndexMarker113"/> provided scripts should be injected into:<pre>{ <a id="_idTextAnchor078"/> "clientScripts": [    {      "content": "Date.prototype.getTimestamp = () =&gt; new Date().getTime().toString();"    },    {      "module": "js-automation-tools"    },    {      "path": "scripts/helpers.js",      "page": "https://test-site.com/page/"    }  ]}</pre></li>
				<li><code>port1</code> and <code>port2</code> are numbers in the range of <code>0</code> to <code>65535</code> that represent a custom port, which TestCafe uses to launch the testing infrastructure (if ports are not set, TestCafe automatically selects them):<pre>{ <a id="_idTextAnchor079"/> "port1": 12340, <a id="_idTextAnchor080"/> "port2": 56789 }</pre></li>
				<li><code>hostname</code> is a string for the hostname of your computer, used when you run tests within remote browsers. If <code>hostname</code> is not set, TestCafe will use the operating system hostname or the network IP address of the current machine:<pre>{ <a id="_idTextAnchor081"/> "hostname": "host.test-site.com"}</pre></li>
				<li><code>proxy</code> is a string for the proxy server used in your local network to access the internet:<pre>{ <a id="_idTextAnchor082"/> "proxy": "123.123.123.123:8080"}</pre><p>Authentication credentials can also be set with the proxy host:</p><pre>{ <a id="_idTextAnchor083"/> "proxy": "username:password@proxy.t<a id="_idTextAnchor084"/>est-site.com"}</pre></li>
				<li><code>proxyBypass</code> is a <a id="_idIndexMarker114"/>string (or an array of strings) that requires TestCafe to bypass the proxy server to access the specified resources:<pre>{ <a id="_idTextAnchor085"/> "proxyBypass": ["localhost:8080", "internal.corp.test-site.com"]}</pre></li>
				<li><code>developmentMode</code> is a boolean to diagnose errors (if you want to report an issue to TestCafe Support, you should set this option to <code>true</code>):<pre>{ <a id="_idTextAnchor086"/> "developmentMode": true }</pre></li>
				<li><code>stopOnFirstFail</code> is a boolean to stop a test run right after any of the tests fail:<pre>{ <a id="_idTextAnchor087"/> "stopOnFirstFail": true }</pre></li>
				<li><code>tsConfigPath</code> is a string to enable TestCafe to use a custom TypeScript configuration file and set its location (<a href="https://devexpress.github.io/testcafe/documentation/guides/concepts/typescript-and-coffeescript.html#customize-compiler-options">https://devexpress.github.io/testcafe/documentation/guides/concepts/typescript-and-coffeescript.html#customize-compiler-options</a>). A relative or an absolute path can be used:<pre>{ <a id="_idTextAnchor088"/> "tsConfigPath": "/Users/john/testcafe/tsconfig.json"}</pre><p>In the case of relative paths, they will be resolved against the directory from which you run TestCafe.</p></li>
				<li><code>disablePageCaching</code> is a boolean<a id="_idIndexMarker115"/> to prevent the page's content from being cached by the browser:<pre>{ <a id="_idTextAnchor089"/> "disablePageCaching": true }</pre><p>When browsers open a cached page inside the role code, the <code>localStorage</code> and <code>sessionStorage</code> content will not be saved. To keep the storage items after navigation, set <code>disablePageCaching</code> to <code>true</code>.</p><p class="callout-heading">Note</p><p class="callout">Here is a good example of a <code>.testcaferc.json</code> file with all the main settings: <a href="https://github.com/DevExpress/testcafe/blob/master/examples/.testcaferc.json">https://github.com/DevExpress/testcafe/blob/master/examples/.testcaferc.json</a>.</p></li>
			</ul>
			<h1 id="_idParaDest-40"><a id="_idTextAnchor090"/>Creating a basic configuration for the test project</h1>
			<p>Now, let's assemble all that<a id="_idIndexMarker116"/> we have learned in this section and create a folder with the basic configuration for our test project by opening any shell (for example, we will use Terminal with Bash) and executing the following steps:</p>
			<ol>
				<li value="1">As we have already downloaded and installed Node.js, let's check its version:<pre><strong class="bold">$ node -v</strong></pre></li>
				<li>Then, create a folder for your future test project:<pre><strong class="bold">$ mkdir test-project</strong></pre></li>
				<li>Now, go to that folder and initiate a basic <code>package.json</code> file to store all the dependencies:<pre><strong class="bold">$ cd test-project/</strong>
<strong class="bold">$ npm init --yes</strong></pre></li>
				<li>After that, install the TestCafe package and save it to your list as a development dependency:<pre><strong class="bold">$ npm install testcafe --save-dev</strong></pre></li>
				<li>As a final step (for now), create a <code>.testcaferc.json</code> configuration file with a minimal set of options:<pre>{  "browsers": "chrome",  "src": [    "tests/**/*.js",    "tests/**/*.feature"  ],  "screenshots": {    "path": "tests/screenshots/",    "takeOnFails": true,    "pathPattern": "${DATE}_${TIME}/test-${TEST_INDEX}/${USERAGENT}/${FILE_INDEX}.png"  },  "quarantineMode": false,  "stopOnFirstFail": true,  "skipJsErrors": true,  "skipUncaughtErrors": true,  "concurrency": 1,  "selectorTimeout": 3000,  "assertionTimeout": 1000,  "pageLoadTimeout": 1000,  "disablePageCaching": true }</pre></li>
			</ol>
			<p>We have covered the options from this file in the <em class="italic">Exploring the configuration settings</em> section, so you can always refer back to it to understand this example.</p>
			<p>You can also review and download this configuration file from GitHub at <a href="https://github.com/PacktPublishing/Modern-Web-Testing-with-TestCafe/blob/master/ch3/test-project/.testcaferc.json">https://github.com/PacktPublishing/Modern-Web-Testing-with-TestCafe/blob/master/ch3/test-project/.testcaferc.json</a>.</p>
			<p>As we <a id="_idIndexMarker117"/>installed Node.js and TestCafe and created a basic config file, let's continue setting up our test project by organizing our test code structure.</p>
			<h1 id="_idParaDest-41"><a id="_idTextAnchor091"/>Structuring the test code</h1>
			<p>To gain a better<a id="_idIndexMarker118"/> understanding of test code structure organization, let's divide it into several parts: fixtures, tests, the starting web page, metadata, and skipping tests.</p>
			<h2 id="_idParaDest-42"><a id="_idTextAnchor092"/>Fixtures</h2>
			<p>TestCafe tests are usually <a id="_idIndexMarker119"/>grouped into test suites, called fixtures (which are the same as the <code>describe</code> blocks in the Jasmine and Mocha test frameworks). Any JavaScript, TypeScript, or CoffeeScript files with TestCafe tests should contain one or more fixtures. Test fixtures can be declared with the <code>fixture</code> function, which only accepts one argument—<code>fixtureName</code>—which is a string for the name of the fixture (set of tests):</p>
			<pre>fixture('Name for the set of the tests');</pre>
			<p>Alternatively, you can write this without the brackets:</p>
			<pre>fixture `Name for the set of the tests`;</pre>
			<p>A fixture is basically a wrapper to indicate the beginning of a set of tests. Let's see how these tests should be structured.</p>
			<h2 id="_idParaDest-43"><a id="_idTextAnchor093"/>Tests</h2>
			<p>Tests are usually written <a id="_idIndexMarker120"/>right after the <code>fixture</code> declaration. To create a test, call the <code>test</code> function, which accepts two arguments:</p>
			<ul>
				<li><code>testName</code>: A string for the name of the test.</li>
				<li><code>function</code>: An asynchronous function that contains the test code and accepts one argument — <code>t</code>, which is an object for the test controller used to access all actions and assertions.</li>
			</ul>
			<p>A simple test with the block of code usually looks like this: </p>
			<pre>test('Go to the main page', async (t) =&gt; {    await t.click('#button-main-page');    await t.expect(Selector('#logo-main-page').visible).ok();});</pre>
			<p>Due to the fact that TestCafe tests are executed on the server side, you can use any additional packages or modules. Also, inside the test, you can do the following:</p>
			<ul>
				<li>Use test actions to interact with the tested web page.</li>
				<li>Use selectors and client functions to get information regarding page element states or obtain other data from the client side.</li>
				<li>Use assertions to verify whether the page elements have the expected parameters.</li>
			</ul>
			<p>Now, let's see how to specify a starting page for all tests in a fixture.</p>
			<h2 id="_idParaDest-44"><a id="_idTextAnchor094"/>The starting web page</h2>
			<p>You can set the initial <a id="_idIndexMarker121"/>web page that will be the starting point for all tests in a fixture with the <code>fixture.page</code> function. It only accepts one argument—<code>url</code>, which is a string for the URL of the web page where all tests in a fixture start:</p>
			<pre>fixture('Contacts page').page('http://test-site.com/example');test('Test Contact form', async (t) =&gt; {    // Starts at http://test-site.com/example });</pre>
			<p>Next, let's see how to specify metadata for fixtures and tests.</p>
			<h2 id="_idParaDest-45"><a id="_idTextAnchor095"/>Metadata</h2>
			<p>In TestCafe, you can also<a id="_idIndexMarker122"/> provide additional information for tests, such as key-value metadata. This can be used to filter tests and display this data in reports. To define metadata, use the <code>fixture.meta</code> and <code>test.meta</code> methods. They accept two string arguments:</p>
			<ul>
				<li><code>name</code>: A string for the name of the metadata entry.</li>
				<li><code>value</code>: A string for the value of the metadata entry.</li>
			</ul>
			<p>Alternatively, they can accept one argument—<code>metadata</code>, which is an object for key-value pairs of metadata.</p>
			<p>Both styles of setting metadata can be combined, which will look like this:</p>
			<pre>fixture('Contacts page')    .meta('env', 'production')    .meta('fixtureId', 'f0001')    .meta({ author: 'John', creationDate: '01.06.2020' });test.meta('testId', 't0001')    .meta({ testType: 'fast', testedFeatureVersion: '1.1' })    ('Test Contact form', async (t) =&gt; {    // Your test code });</pre>
			<p>Fixtures or tests can be launched by the specific metadata values that they contain. To filter tests by <code>metadata</code>, add the <code>filter.testMeta</code> and <code>filter.fixtureMeta</code> properties to the <code>.testcaferc.json</code> configuration file:</p>
			<pre>{  "filter": {    "fixtureMeta": {      "env": "production",      "author": "John"    },    "testMeta": {      "testType": "fast",      "testedFeatureVersion": "1.1"    }  }}</pre>
			<p>This configuration will run only tests that have the <code>testType</code> property of <code>metadata</code> set to <code>fast</code> and <code>testedFeatureVersion</code> set to <code>1.1</code>, as well as tests whose fixture's metadata has the <a id="_idIndexMarker123"/><code>env</code> property set to <code>production</code> and the <code>author</code> property set to <code>John</code>.</p>
			<p>You can use custom reporters (<a href="https://devexpress.github.io/testcafe/documentation/guides/extend-testcafe/reporter-plugin.html">https://devexpress.github.io/testcafe/documentation/guides/extend-testcafe/reporter-plugin.html</a>) to display fixture's and test's metadata in reports.</p>
			<h2 id="_idParaDest-46"><a id="_idTextAnchor096"/>Skipping tests</h2>
			<p>In TestCafe, you can<a id="_idIndexMarker124"/> also specify a fixture or test to skip while all the other tests run. This is achieved with the <code>fixture.skip</code> and <code>test.skip</code> methods:</p>
			<pre>fixture.skip('Contacts page');test('Test Contact form', async (t) =&gt; {    // Your test code });test('Test Review form', async (t) =&gt; {    // Your test code });fixture('About page');test('Test Reviews block', async (t) =&gt; {    // Your test code });test.skip('Test More info form', async (t) =&gt; {    // Your test code });test('Test Our mission block', async (t) =&gt; {    // Your test code });</pre>
			<p>In this example, all tests from the <code>Contacts</code> <code>page</code> fixture will be excluded from running. The <code>Test More info form</code> test will not be executed either.</p>
			<p>Another pair of useful methods is <code>fixture.only</code> and <code>test.only</code>. They are used to specify that only a particular fixture or test should be launched, and all others should be skipped. If several fixtures or tests are marked with <code>.only</code>, then all fixtures or tests marked with <code>.only</code> will be executed:</p>
			<pre>fixture.only('Contacts page');test('Test Contact form', async (t) =&gt; {    // Your test code });test('Test Review form', async (t) =&gt; {    // Your test code });fixture('About page');test('Test Reviews block', async (t) =&gt; {    // Your test code });test.only('Test More info form', async (t) =&gt; {    // Your test code });test('Test Our mission block', async (t) =&gt; {    // Your test code });</pre>
			<p>In this example, only the tests <a id="_idIndexMarker125"/>from the <code>Contacts</code> <code>page</code> fixture and the <code>Test More info form</code> test will be executed.</p>
			<h1 id="_idParaDest-47"><a id="_idTextAnchor097"/>Summary</h1>
			<p>In this chapter, we learned how to set up the testing environment for writing end-to-end tests using TestCafe. We installed Node.js and TestCafe, reviewed the configuration options, and created a basic <code>.testcaferc.json</code> file to store them. In addition to that, we found out about several techniques to structure TestCafe code, including fixtures, tests, the starting web page, metadata, and skipping tests.</p>
			<p>The lessons of this chapter are important as you will be going through the configuration phase for any new project that you'll start.</p>
			<p>Now, we are well prepared and ready to proceed with utilizing this knowledge in writing TestCafe tests for our test project. We will learn how to create and debug a test, and will start building a real-life test suite right after that.</p>
		</div>
	</body></html>