<html><head></head><body><div class="chapter" title="Chapter&#xA0;8.&#xA0;Extending Wijmo"><div class="titlepage"><div><div><h1 class="title"><a id="ch08"/>Chapter 8. Extending Wijmo</h1></div></div></div><p>In this chapter, I show you how to modify Wijmo's widgets and CSS styles for themes. You will learn how to add a button to the dialog widget without overriding existing buttons. Then, I introduce an easy way to modify existing Wijmo themes.</p><div class="section" title="Extending Wijmo Open"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec38"/>Extending Wijmo Open</h1></div></div></div><p>Wijmo <a id="id328" class="indexterm"/>Open is a set of open source jQuery UI widgets. Wijmo widgets such as the slider, dialog, or accordion are extensions to jQuery UI's widgets. Others, such as Wijmo's menu or dropdown, are new widgets.</p><div class="section" title="Modifying the Dialog widget"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec32"/>Modifying the Dialog widget</h2></div></div></div><p>In <a class="link" href="ch02.html" title="Chapter 2. The Dialog Widget">Chapter 2</a>, <span class="emphasis"><em>The Dialog Widget</em></span>, I showed you how to add custom buttons to the dialog widget without changing the internals. The API is unwieldy, in that you must override the icons <a id="id329" class="indexterm"/>and behavior for a default button. Now,<a id="id330" class="indexterm"/> I will show you how to add a custom button by extending the API. First, open <code class="literal">jquery.wijmo-open.all.js</code> and rename it as <code class="literal">jquery.wijmo-open.all.extended.js</code>.</p><p>When you open <code class="literal">jquery.wijmo-open.all.extended.js</code> in an editor, use code folding to collapse all the code and search for <code class="literal">wijdialog</code>. You will get a view that looks like the following screenshot after expanding on the line with <code class="literal">varWijDialog</code>:</p><div class="mediaobject"><img src="graphics/6067OT_8_02.jpg" alt="Modifying the Dialog widget"/></div><p>All of <a id="id331" class="indexterm"/>the Wijmo Open widgets start with <code class="literal">"use strict"</code>. This turns <a id="id332" class="indexterm"/>on strict semantics for ECMAScript 5 and allows code to run faster on browsers that support it. Let's take a look at those lines that start with <code class="literal">WijDialog.prototype</code>. All the methods that start with an underscore are private, while the other ones are accessible through the API and documented. Under the <code class="literal">_createCaptionButtons</code> function<a id="id333" class="indexterm"/>, there is a <code class="literal">button</code> object<a id="id334" class="indexterm"/> with all the buttons on the title bar. To add a <code class="literal">hint</code> button<a id="id335" class="indexterm"/> to the dialog title bar, we use the same format as the other buttons:</p><div class="informalexample"><pre class="programlisting">varcaptionButtons = [], self = this, o = self.options, i, buttons = {
  pin: {
    visible: true,
    click: self.pin,
    iconClassOn: "ui-icon-pin-w",
    iconClassOff: "ui-icon-pin-s"
  },
  refresh: {
    visible: true,
    click: self.refresh,
    iconClassOn: "ui-icon-refresh"
  },
  toggle: {
    visible: true,
    click: self.toggle,
    iconClassOn: "ui-icon-carat-1-n",
    iconClassOff: "ui-icon-carat-1-s"
  },
<span class="strong"><strong>  hint: {</strong></span>
<span class="strong"><strong>    visible: true,</strong></span>
<span class="strong"><strong>    click: self.hint,</strong></span>
<span class="strong"><strong>    message: "",</strong></span>
<span class="strong"><strong>    iconClassOn: "ui-icon-lightbulb"</strong></span>
<span class="strong"><strong>  },</strong></span>
  minimize: {
    visible: true,
    click: self.minimize,
    iconClassOn: "ui-icon-minus"
  },
  maximize: {
    visible: true,
    click: self.maximize,
    iconClassOn: "ui-icon-extlink"
  },
  close: {
    visible: true,
    click: self.close,
    iconClassOn: "ui-icon-close"
  }
}</pre></div><div class="tip" title="Tip" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>
<code class="literal">"use strict"</code> may cause unexpected behavior in your code. You may want to check with<a id="id336" class="indexterm"/> a utility such as JSHint (<a class="ulink" href="http://www.jshint.com/">http://www.jshint.com/</a>) or remove strict mode altogether.</p></div></div><p>The click <a id="id337" class="indexterm"/>event for the button is specified <a id="id338" class="indexterm"/>with<a id="id339" class="indexterm"/> the <code class="literal">click</code> option. For the hint<a id="id340" class="indexterm"/> button, use <code class="literal">self.hint</code>. So, we write the <code class="literal">hint</code> function as <a id="id341" class="indexterm"/>a <code class="literal">WijDialog</code> method:</p><div class="informalexample"><pre class="programlisting">WijDialog.prototype.hint = function () {
  var self = this, o = self.options;
  alert(o.message);
};</pre></div><p>In this function, the options are read from <code class="literal">self.options</code>, and the message string set in the option is used in an alert box. To use the new API for the hint button, we just need to set the message option:</p><div class="informalexample"><pre class="programlisting">$('#dialog').wijdialog({message: 'Success! You just added a title bar button.'});</pre></div><p>Be sure to change the reference to the <code class="literal">jquery.wijmo-open.all.js</code> script to <code class="literal">jquery.wijmo-open.all.extended.js</code>.</p></div><div class="section" title="Modifying a Wijmo theme with ThemeRoller"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec33"/>Modifying a Wijmo theme with ThemeRoller</h2></div></div></div><p>To modify <a id="id342" class="indexterm"/>an existing Wijmo<a id="id343" class="indexterm"/> theme, open the <code class="literal">jquery-wijmo.css</code> file <a id="id344" class="indexterm"/>in the <code class="literal">lib</code> folder in our project structure. You can find more themes in your Wijmo download under the <code class="literal">Themes</code> folder. Once you've opened up the CSS file, search for <code class="literal">jQuery UI CSS Framework</code>. There should be a comment section like the following:</p><div class="informalexample"><pre class="programlisting">/*
 * jQuery UI CSS Framework 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Theming/API
 *
 * To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=...
 */</pre></div><p>When you visit the link in the browser, ThemeRoller loads the Wijmo theme. The theme settings can be caned under the <span class="strong"><strong>Roll Your Own</strong></span> tab on the left side. You can see the Rocket theme loaded in ThemeRoller in the following screenshot:</p><div class="mediaobject"><img src="graphics/6067OT_8_03.jpg" alt="Modifying a Wijmo theme with ThemeRoller"/></div><p>For<a id="id345" class="indexterm"/> details on how to modify<a id="id346" class="indexterm"/> a <a id="id347" class="indexterm"/>theme, <a id="id348" class="indexterm"/>see <a class="ulink" href="http://wijmo.com/wiki/index.php/Wijmo_Loves_ThemeRoller:_An_Overview">http://wijmo.com/wiki/index.php/Wijmo_Loves_ThemeRoller:_An_Overview</a>.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec39"/>Summary</h1></div></div></div><p>Now that you have a sense of how to change things in Wijmo, you're in a better position to use Wijmo in your projects. Often, the situation requires changes to the theme or the behavior of widgets. Wijmo makes it easy to make those changes.</p></div></body></html>