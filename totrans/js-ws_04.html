<html><head></head><body>
		<div><div></div>
		</div>
		<div><h1 id="_idParaDest-148"><a id="_idTextAnchor156"/>4. JavaScript Libraries and Frameworks</h1>
		</div>
		<div><p class="callout-heading">Overview</p>
			<p class="callout">By the end of this chapter, you will be able to use JavaScript frameworks and libraries to perform different tasks; demonstrate event handling with jQuery; use popular JavaScript Frameworks; name the do's and don'ts of using a framework; and build a library</p>
			<p class="callout">In this chapter, you will learn how and when to combine your source code with external software. </p>
			<h1 id="_idParaDest-149"><a id="_idTextAnchor157"/>Introduction</h1>
			<p>In the previous chapters, you learned how to utilize conditional logic, loops, and the most common data structures. These form the groundwork and essentials for writing programs and building complex JavaScript applications. Still, building actual software is an inherently challenging task; focusing on only business logic is even more so. Therefore, as developers, we often rely on external software that lets us dedicate ourselves to the source code that's the most relevant to our product or business. This software does this by simplifying specific tasks and abstracting away complexity for us. Those pieces of external software are what we refer to as <strong class="bold">frameworks</strong> or <strong class="bold">libraries</strong>.</p>
			<p>The following are some of the tasks that modern JavaScript frameworks can support us with:</p>
			<ul>
				<li>Performance rendering of complex or dynamic single-page applications (SPAs)</li>
				<li>Managing ongoing dataflow between the controllers and views of client-side applications</li>
				<li>Creating sophisticated animations</li>
				<li>Creating with fast and straightforward server APIs</li>
			</ul>
			<p>Before we dive deeper into the whys and the wherefores of using external code, we need to clarify what the difference is between the terms "framework" and "library." This will be the topic of the following section.</p>
			<h1 id="_idParaDest-150"><a id="_idTextAnchor158"/>Framework versus Library</h1>
			<p>Library describes an external collection of functions that perform a given task. These functions are made accessible to us as users of the library via APIs. One useful library is <code>lodash</code>, which can, for example, remove all duplicated values from an array:</p>
			<pre>const duplicatedArray = [1,2,1,2,3];
const uniqueArray = lodash.uniq(duplicatedArray)
// =&gt; [1,2,3]</pre>
			<p>Frameworks, on the other hand, are a particular form of library. They are reusable code frames that build the foundation of a JavaScript application. In contrast to libraries, which extend your code with functionality, a framework can stand alone and is enhanced with your source code to create an app as you like.</p>
			<p>A popular framework is <code>Vue.js</code>, which we can use as follows:</p>
			<pre>library-vue.js
1 // example.html
2 &lt;div id="example"&gt;
3 &lt;input :value="text" @input="update"/&gt;
4 &lt;div v-html="myOwnText"&gt;&lt;/div&gt;
5 &lt;/div&gt;
6 //————————————————————————————————
7 // example.js
8 new Vue({
9 el: '#example',
10 data: {
11 text: 'My first framework'
12 },
13  computed: {
14 myOwnText: function () {
15 return this.text
16 }
The full code is available at: <a href="https://packt.live/32MD4IN">https://packt.live/32MD4IN</a></pre>
			<p>As you can see, in general, there is more complexity to a framework than there is to a library. Nonetheless, both are equally important to software development.</p>
			<p>Despite the technical differences between libraries and frameworks, we are going to use those terms interchangeably. Another synonym you'll encounter in the JavaScript world to describe external source code is "package." One of those packages you may encounter in JS resources is <code>Vanilla.js</code>. We'll have a look at it in the next section.</p>
			<h2 id="_idParaDest-151"><a id="_idTextAnchor159"/>Vanilla.js</h2>
			<p>This specific framework follows the informal convention of including the JavaScript file extension with the name <code>nameOfFramework.js</code>. However, vanilla.js is not a framework; it's not even a library. People referring to <code>vanilla.js</code> are talking about plain JavaScript without any external code or tooling. The name is a running gag within the JavaScript community because some developers and non-developers think we need to use a framework for everything we build. We will discuss why this isn't the case later.</p>
			<h1 id="_idParaDest-152"><a id="_idTextAnchor160"/>Popular JavaScript Frameworks</h1>
			<p>We have just looked at lodash.js, a library that helps developers handle data structures; (to be used, for example, making arrays unique) and Vue.js, a framework for building modular and dynamic user interfaces. These are just two examples of quite popular and widely used JS frameworks/libraries. In addition to those, there is a vast and ever-growing number of external packages you can choose from. Each one of them is useful for solving one specialized set of problems.</p>
			<p>A few modern and often used alternatives that support creating browser applications are, for instance, React.js, Vue.js, and Angular.js. Other libraries that help you store and manage data in your app are MobX, VueX, and Redux.</p>
			<p>Again, others can transform source code so that it supports older browser engines, for example, <strong class="bold">Babel</strong>, or handle and manipulate time for you, such as moment.js.</p>
			<p>Then, there are frameworks such as Express.js or Hapi that let you create simple, easy-to-maintain, and performant REST APIs for Node.js.</p>
			<p>Some packages make building <strong class="bold">command-line interfaces</strong> (<strong class="bold">CLIs</strong>) or desktop applications easy.</p>
			<p>Most build and productivity tools for the JavaScript ecosystem are provided to the community as a library, too. Webpack, Parcel, and Gulp are a few of these tools.</p>
			<p>Not all of the available libraries are equally popular or useful. Their popularity depends on a few key facts:</p>
			<ul>
				<li>Whether they fix a problem that bothers many developers</li>
				<li>How well their API is defined and structured</li>
				<li>The quality of their documentation</li>
				<li>The level of performance optimization</li>
			</ul>
			<p>Keep these in mind when crafting a package that you want to become well known.</p>
			<h2 id="_idParaDest-153"><a id="_idTextAnchor161"/>Everlasting jQuery</h2>
			<p>One evergreen library that has been around for over a decade is jQuery. It touches almost every web app in one way or another and belongs in the toolkit of everybody who builds browser applications:</p>
			<div><div><img alt="Figure 4.1: jQuery documentation&#13;&#10;" src="img/C14377_04_01.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.1: jQuery documentation</p>
			<p><strong class="bold">jQuery</strong> was not the first but was definitely among the earliest JavaScript libraries ever to be used by developers all over the world to make their jobs easier. Since it was first released, a lot of maintainers and engineers have contributed to making jQuery what it is today – namely, a robust and essential part of the modern internet that offers lots of different functionalities.</p>
			<p>jQuery provides, but is not limited to providing, the following features:</p>
			<ul>
				<li>DOM manipulations</li>
				<li>Event handling</li>
				<li>Animated effects and transitions</li>
			</ul>
			<p>We will see how to do these things when we look at jQuery in more detail later in this chapter.</p>
			<h2 id="_idParaDest-154"><a id="_idTextAnchor162"/>Where to Find and How to Use External Code</h2>
			<p>There are a few different approaches when it comes to including libraries in your program. Depending on those approaches, we get packages from different places.</p>
			<p>One is to copy the library's source code and to handle it as we wish. This approach is the most secure in the sense that we have all the control of the software and can customize it to fit our needs. However, by doing so, we give up compatibility and automated updates and patches. Most open-source projects host their code on GitHub or any other version control platform. Therefore, it's rather easy to access and fork the package's code. As soon as we download the source code, we can do whatever we want to get it working with our software. Possible solutions could be hosting it on our <strong class="bold">cloud distribution network</strong> (<strong class="bold">CDN</strong>) and accessing it from there or bundling it with our source code.</p>
			<p>Another approach is downloading the package from a CDN from the client at runtime. The most popular CDN to exclusively host JavaScript libraries is <a href="http://cdnjs.com">cdnjs.com</a>. It hosts thousands of libraries you can include in your markup without you having to worry about where to store it or how to upgrade it:</p>
			<div><div><img alt="Figure 4.2: Downloading a package from cdnjs.com&#13;&#10;" src="img/C14377_04_02.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.2: Downloading a package from cdnjs.com</p>
			<p>The following is an example of how you'd include Vue.js with your markup:</p>
			<pre>// myApplicationMarkup.html
&lt;html&gt;
&lt;script src="img/vue.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
console.log("Vue was loaded: ", !!Vue)
// =&gt; Vue was loaded: true
&lt;/script&gt;
&lt;/html&gt;</pre>
			<p class="callout-heading">Note</p>
			<p class="callout">If you include packages by loading them from the browser during runtime, you have to be aware of the order of the script tags. They're loaded from top to bottom. Therefore, if you switched the two script tags in the preceding example, console.log would print that there is no <code>Vue.js</code> loaded, even though, eventually, it will be.</p>
			<p>The previous approach gained lots of popularity and is now by far the most common due to the development of the JavaScript ecosystem in recent years. It involves the <strong class="bold">Node.js Package Manager</strong> (<strong class="bold">npm</strong>). npm is a tool that, as its name suggests, takes care of JavaScript packages within the Node.js ecosystem. npm itself consists of three parts:</p>
			<ul>
				<li>The website <a href="http://lodash.com">npmjs.com</a>, for hosting all the documentation and package searches</li>
				<li>The CLI that gets installed with <code>Node.js</code></li>
				<li>The registry, which is where all of the modules are stored and made installable:</li>
				<li><div><img alt="Figure 4.3: NPM website&#13;&#10;" src="img/C14377_04_03.jpg"/></div></li>
			</ul>
			<p class="figure-caption">Figure 4.3: NPM website</p>
			<p>Using npm requires a <code>Node.js</code> version to be installed on your machine and any tool to bundle all your JavaScript together to make it executable in the browser.</p>
			<p>Then, all you have to do is install any module you can find on npm:</p>
			<pre>// in your terminal
$ npm install &lt;package&gt;</pre>
			<p>This command then stores the package in a particular folder, called <strong class="bold">node_modules</strong>. This folder contains all the source code of the libraries you installed, and from there, the bundler will join it into your application during build time.</p>
			<p>All of the aforementioned methods to include libraries and frameworks with your source code are valid and have their preferred use cases. However, it's likely that you are going to use the latter the most as new projects are set up within the <code>Node.js</code> ecosystem, which is where modules and npm come from, naturally. Nonetheless, knowing how to use external resources without npm can come in handy when you want something much more comfortable and quicker than an entire project setup. Therefore, let's perform an exercise in which we will load a third-party library into our code.</p>
			<h2 id="_idParaDest-155"><a id="_idTextAnchor163"/>Exercise 4.01: Using a Third-Party Library in Your Code</h2>
			<p>As we've already discovered, using external software, namely libraries and frameworks, is an extremely useful skill as it can save a lot of resources and help you build highly functional apps. In this exercise, we are going to find and utilize a library ourselves. We'll use the <code>lodash</code> library to create an array of unique values. Let's get started:</p>
			<ol>
				<li>Create a new HTML file:<pre>&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;/html&gt;</pre></li>
				<li>Find the CDN URL for the latest <code>lodash</code> version. To do so, navigate to <code>cdnjs.com</code> and search for lodash, and then copy the URL highlighted in the figure:<div><img alt="Figure 4.4: Search result of lodash at cdnjs.com&#13;&#10;" src="img/C14377_04_04.jpg"/></div><p class="figure-caption">Figure 4.4: Search result of lodash at cdnjs.com</p></li>
				<li>To look at the <code>lodash</code> documentation, navigate to <a href="http://lodash.com">lodash.com</a>. There, you can use the search bar to find the "<code>uniq</code>" function:<div><img alt="Figure 4.5: lodash.com documentation for uniq function&#13;&#10;" src="img/C14377_04_05.jpg"/></div><p class="figure-caption">Figure 4.5: lodash.com documentation for uniq function</p></li>
				<li>Load the CDN URL in a script tag's <code>src</code> attribute. To do so, paste the URL you previously copied in <em class="italic">step 2</em>:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/lodash.min.    js"&gt;&lt;/script&gt;
  &lt;/head&gt;
&lt;/html&gt;</pre></li>
				<li>Create another <code>script </code>tag and write JS code using <em class="italic">lodash</em> to make an array, <code>[1,5,5,2,6,7,2,1]</code>, that contains <code>unique</code> values:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/lodash.min.    js"&gt;&lt;/script&gt;&lt;script type=„text/javascript"&gt;
      // create an array with duplicated values
      const exampleArray = [1,5,5,2,6,7,2,1];
      // use lodash.uniq to make the array contain unique values
      const uniqueArray = _.uniq(exampleArray);
      // print the unique array to the console
      console.log(uniqueArray);
      // =&gt; [1,5,2,6,7]
    &lt;/script&gt;
  &lt;/head&gt;
&lt;/html&gt;</pre></li>
				<li>Open your HTML, including the JavaScript, in a browser and verify that you created an array with unique values inside the browser's development tools console:</li>
				<li><div><img alt="Figure 4.6: Unique array values in the browser's development tools console&#13;&#10;" src="img/C14377_04_06.jpg"/></div></li>
			</ol>
			<p class="figure-caption">Figure 4.6: Unique array values in the browser's development tools console</p>
			<p>In this exercise, we used the <em class="italic">lodash</em> library to create an array that contains sole unique values.</p>
			<h2 id="_idParaDest-156"><a id="_idTextAnchor164"/>jQuery versus Vanilla.js</h2>
			<p>Earlier, in the <em class="italic">Everlasting jQuery</em> section of this chapter, we had a look at jQuery and how it has an exceptional standing in the JavaScript community. To demonstrate why libraries and frameworks, but mainly jQuery, became popular, we will compare it to <code>Vanilla.js</code> (plain JS). </p>
			<h3 id="_idParaDest-157"><a id="_idTextAnchor165"/>Manipulating the DOM</h3>
			<p>If we wanted to fade out and then remove one element in plain JavaScript, we would write verbose and less comprehensive code:</p>
			<pre>// Vanilla.js
const styles = document.querySelector('#example').style;
styles.opacity = 1;(function fade() {
styles.opacity -= .1;
styles.opacity&lt; 0
? styles.display = "none"
: setTimeout(fade, 40)
})();</pre>
			<p>On the other hand, with jQuery, we could have all this in just one line of understandable code:</p>
			<pre>// jQuery
$('#example').fadeOut();</pre>
			<h1 id="_idParaDest-158"><a id="_idTextAnchor166"/>Making XHR Requests</h1>
			<p>A fundamental functionality of modern web pages and applications is requesting additional resources or data from remote servers. Every browser provides interfaces to execute these so-called XHR requests. Those interfaces can be used from JavaScript. As we can see in the following code examples, jQuery, compared to vanilla.js, lets us write clean and self-explanatory code:</p>
			<pre>// Vanilla.js
const request = new XMLHttpRequest();
request.open("POST", "/example/api", true);
request.onreadystatechange = function() {
if (request.readyState != 4 || request.status != 200) return;
console.log("Successful XHR!");
};
request.send("example=payload");</pre>
			<p>In comparison to the preceding snippet, the code for making calls to a server is much clear and readable in jQuery. It is more readable in the sense that it is very clear and understandable regarding what exactly the function needs as parameters and what it is going to do. Let's have a look at a <code>POST</code> Ajax request to the <code>/example/api</code> URL with a specified payload data and also a function that gets triggered when the request is successful:</p>
			<pre>// jQuery
$.ajax({
type: "POST",
url: "/example/api",
data: "example=payload",
success: function() {
console.log("Successful XHR!");
}
});</pre>
			<p class="callout-heading">Note</p>
			<p class="callout">jQuery assigns itself to the $ variable. Hence, in the code examples,<code>$.functionName</code> could be replaced with <code>jquery.functionName</code>.</p>
			<p>We could go on and show you more use cases where jQuery gets us faster to our goal than raw JS would. Instead, in the following exercises, we will use the library and gain some first-hand experience with it. Specifically, we will be writing code to handle a button-click event, once with jQuery and once with plain JavaScript.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The dev tools in all modern major browsers have adapted to <code>$</code>, but only as a wrapper for <code>document.querySelector</code>.</p>
			<h2 id="_idParaDest-159"><a id="_idTextAnchor167"/>Exercise 4.02: Handling Click Events with jQuery</h2>
			<p>In this exercise, we will identify how jQuery can help us react to events that get propagated when the target (in our case, a button) gets clicked. Let's get started:</p>
			<ol>
				<li value="1">Create a new HTML file including a button tag with the ID <code>exampleButton</code>. This button will be our target:<pre>&lt;html&gt;
  &lt;body&gt;
    &lt;button id="exampleButton"&gt;Click me.&lt;/button&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Find the latest jQuery CDN URL on <a href="http://cdnjs.com">cdnjs.com</a>.</li>
				<li>Read the jQuery documentation for .<code>on()</code>(<a href="https://api.jquery.com/on/">https://api.jquery.com/on/</a>) erytion:<div><img alt="Figure 4.7: JQuery.com Documentation for .on()&#13;&#10;" src="img/C14377_04_07.jpg"/></div><p class="figure-caption">Figure 4.7: jquery.com Documentation for .on()</p></li>
				<li>Load in the CDN URL:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/jquery.min.    js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button id="exampleButton"&gt;Click me.&lt;/button&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Create a script tag containing code that logs a <code>Hello World</code> message to the console when you click the button:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/jquery.min.    js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button id="exampleButton"&gt;Click me.&lt;/button&gt;
    &lt;script type="text/javascript"&gt;
      $('#exampleButton').on('click', function() {
        console.log('Hello World')
      })
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Make sure you place the <code>script</code> tag after the button tag.</li>
				<li>Open the HTML in your browser and open the dev tool console.</li>
				<li>Press the <code>Click me.</code> button and verify that it prints <code>Hello World</code> to the console:<div><img alt="Figure 4.8: Hello world output using jQuery click events&#13;&#10;" src="img/C14377_04_08.jpg"/></div></li>
			</ol>
			<p class="figure-caption">Figure 4.8: Hello world output using jQuery click events</p>
			<p>In this exercise, you handled an event that got fired by the browser on a button click using jQuery. The handler you implemented prints <code>Hello World</code> to the browser's console as soon as the <code>click me</code> button is pressed.</p>
			<p>You also saw how easy it is to use a library such as jQuery to do work that, otherwise, you would need to do manually.</p>
			<p>Handling a click event, however, is not particularly hard to do in vanilla.js either, as you'll see in the next exercise.</p>
			<h2 id="_idParaDest-160"><a id="_idTextAnchor168"/>Exercise 4.03: Handling the Same Event with Vanilla.js</h2>
			<p>In contrast to the previous exercise, this one demonstrates how to create a handler that gets triggered on a click event using plain JavaScript. Let's get started:</p>
			<ol>
				<li value="1">Create a new HTML file that includes a button tag with the ID exampleButton:<pre>&lt;html&gt;
  &lt;body&gt;
    &lt;button id="exampleButton"&gt;Click me.&lt;/button&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Create a script tag containing vanilla.js code that logs a <code>Hello World</code> message to the dev tools console when you click the button. <code>addEventListener</code> is a vanilla API provided to us by the browser. It takes <code>eventType</code> and <code>handlerFunction</code> as parameters:<pre>&lt;html&gt;
  &lt;body&gt;
    &lt;button id="exampleButton"&gt;Click me.&lt;/button&gt;
    &lt;script type="text/javascript"&gt;
      const button = document.querySelector('#exampleButton')
      button.addEventListener('click', function() {
        console.log('Hello World')
      })
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre><p>Again, make sure you place the <code>script</code> tag after the button tag.</p></li>
				<li>Open the HTML in your browser and open the dev tools console. Press the "Click me." button and verify that it prints "Hello World" to the console:<div><img alt="Figure 4.9: Hello World output using Vanilla.js&#13;&#10;" src="img/C14377_04_09.jpg"/></div></li>
			</ol>
			<p class="figure-caption">Figure 4.9: Hello World output using Vanilla.js</p>
			<p>In the previous two exercises, we added an event listener to a button. We did so once with the help of jQuery and the other time with no external code and instead used the native APIs that the browser provided us with.</p>
			<h2 id="_idParaDest-161"><a id="_idTextAnchor169"/>UI Animation Using jQuery</h2>
			<p>In addition to the use cases for jQuery that we have seen in the code examples in the Manipulating the DOM and Making XHR Requests sections and in <em class="italic">Exercise 4.02: Handling Click Events with jQuery</em>, there is another important functionality that <code>jQuery</code> provides us with: animating the user interface (UI).</p>
			<p>Animations contribute to a more engaging website and can mean that your users enjoy the experience of using your application more. Often reactions to user input are animated to highlight the fact that the interaction has been acknowledged or that something has changed. For example, appearing elements could be animated or placeholders inside of input fields. Proceed with the following exercise to implement the former UI animation example yourself.</p>
			<h2 id="_idParaDest-162"><a id="_idTextAnchor170"/>Exercise 4.04: Animating a "Peek-a-boo" on Button Click</h2>
			<p>In this exercise, you will build on the knowledge you have gained regarding how to handle events using jQuery. The relevant part, however, will be animating an element on the page.</p>
			<p>Whenever the <code>"Peek…</code>" button is clicked, the <code>…a-boo</code> headline will show up. Let's get started:</p>
			<ol>
				<li value="1">Create a new HTML file that includes a button tag with the ID <code>Peek...</code>, a headline with the ID <code>…a-boo</code>, and a <code>display: none </code>style attribute:<pre>&lt;html&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;button id="peek"&gt;Peek...&lt;/button&gt;
    &lt;h1 id="aboo" style="display: none;"&gt;...a-boo&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Load the latest <code>jQuery</code> CDN URL, from <code>cdnjs.com</code> (see <em class="italic">Exercise 2, Handling Click Events with jQuery, step 2</em>), inside a script tag:<pre>&lt;html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquer
    y.min.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button id="peek"&gt;Peek...&lt;/button&gt;
    &lt;h1 id="aboo" style="display: none;"&gt;...a-boo&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;&lt;head&gt;
    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquer
    y.min.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button id="peek"&gt;Peek...&lt;/button&gt;
    &lt;h1 id="aboo" style="display: none;"&gt;...a-boo&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Create a script tag containing the code to select the peek button and add an <code>onClick </code>event listener:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/jquery.min.    js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button id="peek"&gt;Peek...&lt;/button&gt;
    &lt;h1 id="aboo" style="display: none;"&gt;...a-boo&lt;/h1&gt;
    &lt;script type="text/javascript"&gt;
      const peekButton = $(‚#peek');
      peekButton.on('click', function() {});
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Inside the new script tag, write additional code to select the <code>aboo</code> headline and use the <code>jQuery.fadeToggle</code> function to animate the headline so that it's fading in and fading out:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/jquery.min.    js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button id="peek"&gt;Peek...&lt;/button&gt;
    &lt;h1 id="aboo" style="display: none;"&gt;...a-boo&lt;/h1&gt;
    &lt;script type="text/javascript"&gt;
      const peekButton = $('#peek');
      const abooHeadline = $('#aboo');
      peekButton.on('click', function() {
        abooHeadline.fadeToggle();
      });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Open the HTML page in your browser and click the <code>peek</code> button.</li>
				<li>You should see the <code>aboo</code> headline fading in and fading out whenever you click the <code>peek</code> button:<div><img alt="Figure 4.10: Animated output using the Click button&#13;&#10;" src="img/C14377_04_10.jpg"/></div></li>
			</ol>
			<p class="figure-caption">Figure 4.10: Animated output using the Click button</p>
			<p>In this exercise, you used <code>jQuery</code> to execute yet another type of task in the browser. Animations in UIs can be as simple as our fading example, but they can also be very complex when building games or creating 3D animations.</p>
			<p>By now, you have an idea of what jQuery, and also other libraries or frameworks, can help you do. In the next section, we will explore why and when it may be wiser to renounce external source code.</p>
			<h1 id="_idParaDest-163"><a id="_idTextAnchor171"/>Frameworks versus Core JavaScript</h1>
			<p>So far, we've spoken a lot about why, how, and in what situations to use libraries. But we are yet to discuss when and why it would be a better idea not to rely on them.</p>
			<p>First of all, all of the things that frameworks and libraries do can be done by ourselves. In a business context, or for the sake of development speed, however, we usually decide to buy them when facing the "make-or-buy" decision. But sometimes, we should keep in mind that adding external sources to our program or even founding it on top of these sources expands the amount of source code we have. Increasing the overall size of the necessary resources is particularly unpleasant for us JavaScript developers who build client-facing applications since we should be optimizing for delivering performance (how fast the app loads on the client). In general, more JavaScript code leads to the following:</p>
			<ul>
				<li>Longer download times</li>
				<li>Longer parsing times</li>
				<li>More delayed execution</li>
				<li>Potentially blocked rendering or usability of the app</li>
			</ul>
			<p>Though we have complex optimization algorithms such as tree shaking or dead code elimination, which help us cope with huge bundle sizes in these cases, often, the better choice is to do the task at hand on our own.</p>
			<p>Another aspect to consider is the security of our application. Some libraries or frameworks may open up attack vectors that we cannot control because we do not have full ownership or understanding of the involved code. However, the most popular libraries are concerned with the security of their packages and are also very fast at releasing patches for known vulnerabilities.</p>
			<p>To provide an actual use case that spells out the negative impact a library or framework may have on our application, in the following two exercises, we will create a list and render it to the screen. The first one will make use of an external library, whereas the second one will be written in raw JavaScript.</p>
			<h2 id="_idParaDest-164"><a id="_idTextAnchor172"/>Exercise 4.05: Rendering a List of To-Dos Using React</h2>
			<p>In this exercise, we're going to display a few list tags as bullet points of an imaginary <code>todo</code> list. To do so, we'll be using a massively popular library called <code>react.js</code> and its complementary <code>react-dom.js</code>. Let's get started:</p>
			<ol>
				<li value="1">Create a new empty HTML file with a head and a div tag with the <code>root</code> ID inside the HTML body:<pre>&lt;html&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;div id="root"&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Go to <code>cdnjs.com</code> and to get the latest <code>react.js</code> and <code>react-dom.js</code> CDN URLs and load the URLs into a script tag inside the HTML head:<pre>&lt;script src="img/react.production.min.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;script src="img/react-dom.production.min.js" charset="utf-8"&gt;&lt;/script&gt;</pre></li>
				<li>Use <code>react.js</code> and <code>react-dom</code> to create three list items and render them to the <code>root</code> <code>div</code>-element:<pre>  &lt;script type="text/javascript"&gt;
    const todoListItems = [
      'buy flowers',
      'tidy up',
      'go to the gym'
    ];
    const todoListElements = todoListItems.map(item =&gt;
      React.createElement('li', null, item)
    );
    ReactDOM.render(todoListElements, document.getElementById('root'));
  &lt;/script&gt;</pre></li>
				<li>Open the HTML page inside your browser and make sure that your <code>todo</code> list items are displayed correctly.</li>
				<li>Open the network tab of your browser's dev tools and have a glance at how many kilobytes of JavaScript was loaded:<div><img alt="Figure 4.11: Size of the JavaScript that was loaded into the Network tab&#13;&#10;" src="img/C14377_04_11.jpg"/></div></li>
			</ol>
			<p class="figure-caption">Figure 4.11: Size of the JavaScript that was loaded into the Network tab</p>
			<p>In this exercise, you learned where to find and how to use React.js. Although in this exercise you simply created a small, static list of To-Dos, <code>React.js</code> lets you create complex, dynamic UIs without you having to worry about native browser APIs that you would normally need to create such UIs. However, as we mentioned previously, using a framework also comes at a cost, measured in kilobytes.</p>
			<p>Next, you will learn how to do the same task without React. Afterward, you will be able to understand the kilobytes versus complexity trade-off when building applications.</p>
			<h2 id="_idParaDest-165"><a id="_idTextAnchor173"/>Exercise 4.06: Rendering a List of To-Dos without a Library</h2>
			<p>In the previous exercise, we used the trendy library known as React.js to load more than <code>37 KB</code> (in ZIP format) and a couple of hundred bytes for the HTML, including the script tags, to create and render a list of three items. In this exercise, we are going to do the same thing, except we will utilize all the functionality that's already provided by the browser. Let's get started:</p>
			<ol>
				<li value="1">Create a new empty HTML file with a div tag with an ID of <code>root</code> inside the HTML body:<pre>&lt;html&gt;
  &lt;body&gt;
    &lt;div id="root"&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Create a script tag and write some JS to create three list items and render them to the <code>root</code> div element:<pre>index.html
<a id="_idTextAnchor174"/>4 &lt;script type="text/javascript"&gt;
5  const todoListItems = [
6    'buy flowers',
7    'tidy up',
8    'go to the gym'
9   ];
10  const rootElement = document.getElementById('root');
11  const listFragment = document.createDocumentFragment();
12  todoListItems.forEach(item =&gt; {
13   const currentItemElement = document.createElement('li');
14   currentItemElement.innerText = item;
15   listFragment.appendChild(currentItemElement)
16   });
The full code is available at: <a href="https://packt.live/2QYfUxb">https://packt.live/2QYfUxb</a></pre></li>
				<li>Open the HTML page inside your browser and make sure your <code>todoListItems</code> are presented correctly.</li>
				<li>Open the network tab of your browser's dev tools and have a glance at how many kilobytes of JavaScript was loaded:<div><img alt="Figure 4.12: Loading the JavaScript's download size without using a library&#13;&#10;" src="img/C14377_04_12.jpg"/></div></li>
			</ol>
			<p class="figure-caption">Figure 4.12: Loading the JavaScript's download size without using a library</p>
			<p>There's exactly no, that is, 0 KB, additional JavaScript. That gives us 37 KB of downloading, parsing, and execution advantage over the method using <code>react.js</code>, all while achieving the same thing.</p>
			<p>Of course, this is a simplified example. In general, real-world applications are more complex than our exercise. Nonetheless, you may often find yourself in an analogous situation where performance is a thing to consider and the task can plausibly be done using <code>vanilla.js</code>.</p>
			<p>We have spoken in detail about what libraries and frameworks are and what they can help us to do. In order to really grasp what libraries may look like internally and how easy it actually is to build one, we'll be creating one ourselves in the following exercise.</p>
			<h2 id="_idParaDest-166"><a id="_idTextAnchor175"/>Exercise 4.07: Creating a Library Yourself</h2>
			<p>Our library won't be capable of much at first, but you may want to put some effort into it and extend it as you wish.</p>
			<p><code>HeadlineCreator.js</code> is our library's name. It's a good name because it already hints at what it does; that is, it creates headlines. Technically speaking, our library will do the following:</p>
			<ul>
				<li>Be accessible on the global window object of the current browser tab, just as we've seen with jQuery before: window.headlineCreator.</li>
				<li>Provide a single method called createHeadline.</li>
				<li>Allow us (through the createHeadline method) to create a headline with the given text and append it to a given parent element.</li>
				<li>Take care of error handling for us, for instance, if we forgot to define some text to be displayed or passed an invalid selector for the parent element</li>
				<li>To verify that our library is working and having an example of its usage, we will create, additional to creating the library itself, an HTML page including script tags using our HeadlineCreator.js library.<p>Let's get started:</p></li>
			</ul>
			<ol>
				<li value="1">Create an empty HTML file with a head tag, a body tag, and a div tag with an ID of <code>root</code> inside it:<pre>&lt;html&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;div id="root"&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Load a local JS file with the name <code>headlineCreator.js</code> inside a <code>script</code> tag:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/headlineCreator.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="root"&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li>
				<li>Create the <code>headlineCreator.js</code> file inside of the same directory you created the empty HTML file in.</li>
				<li>Inside the JavaScript file, create an IIFE and assign it to the <code>headlineCreator</code> variable:<pre>// headlineCreator.js
const headlineCreator = (function(){})();</pre><p class="callout-heading">Note</p><p class="callout">IIFE stands for "immediately invoked function expression." This sounds more complicated than it is. IIFEs are functions that are executed at the very same moment they are defined. One use case for them in frameworks or libraries is to prevent name collisions with variables that are used in the source code. This includes the library. For example, using a create function within your library can cause weird side effects since this is a very common and ambiguous name. Hence, the library could be a different function than it was supposed to be.</p></li>
				<li>Within the IIFE, create another function and name it <code>createHeadline</code>. This function takes two parameters, <code>text</code> and <code>parentElementSelector</code>:<pre>// headlineCreator.js
const headlineCreator = (() =&gt; {
 function createHeadline(text, parentElementSelector = '#root') {}
})();</pre></li>
				<li>Inside the IIFE <code>headlineCreator</code>, add a r<code>eturn</code> statement. This <code>return</code> statement will return an object with a single key named <code>createHeadline</code> that has the value of the same name (just like the function name we created in the previous step):<pre>{}return {
createHeadline: createHeadline
  };;</pre></li>
				<li>Extend the new function with a DOM query to look for an element with the <code>parentElementSelector</code> that is passed as an argument to the <code>createHeadline</code> function.</li>
				<li>Assign the result of the DOM query to a variable called <code>parentElement</code>:<pre>{{const parentElement = document.querySelector(parentElementSelector);{e;;</pre></li>
				<li>Next, create an <code>h1</code> tag element and set the <code>innerText</code> attribute of this element to the <code>text</code> parameter that is passed to the function:<pre>{{; const headlineToInsert = document.createElement('h1');
headlineToInsert.innerText = text;}{e;;</pre></li>
				<li>Lastly, append the created headline to the node that we stored in <code>parentElement</code>:<pre>{{;;;parentElement.appendChild(headlineToInsert);}{e;;</pre></li>
				<li>Refresh your HTML page and inside the dev tools console, call the <code>window.headlineCreator.createHeadline</code> function with any parameter you'd like. Then, view the result:<div><img alt="Figure 4.13: The window.headlineCreator.createHeadline function in the console and its output&#13;&#10;" src="img/C14377_04_13.jpg"/></div><p class="figure-caption">Figure 4.13: The window.headlineCreator.createHeadline function in the console and its output</p></li>
				<li>If you'd like to, you can add some error handling and return the newly created headline element since that's considered good practice in such a case:<pre>headlineCreator.js
1 // headlineCreator.js
2 window.headlineCreator = (function() {
3   function createHeadline(text, parentElementSelector = '#root') {
4     const parentElement = 5 document.querySelector(parentElementSelector);
5    if (!text) {
6       throw new Error('You forgot to pass the "text" parameter');
7     }
8     if (!parentElement) {
9       throw new Error(
10         `There was no node found for the Selector: "${parentElementSelector}"`
11       );
12     }
The full code is available at: <a href="https://packt.live/2OIR6q0">https://packt.live/2OIR6q0</a></pre></li>
				<li>To test the error handling, simply call the <code>headlineCreator</code> function without the text parameter:<div><img alt="Figure 4.14: Error message in the console&#13;&#10;" src="img/C14377_04_14.jpg"/></div><p class="figure-caption">Figure 4.14: Error message in the console</p></li>
				<li>Last but not least, add a script tag to the HTML file and call the <code>headlineCreator</code> library from there so that every time the HTML is loaded, a headline is created:<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;script src="img/headlineCreator.js" charset="utf-8"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="root"&gt;&lt;/div&gt;
    &lt;script type="text/javascript"&gt;
      headlineCreator.createHeadline('This is the HeadlineCreator');
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre><p>This results in the following output:</p></li>
			</ol>
			<div><div><img alt="Figure 4.15: The HeadlineCreator.js library created&#13;&#10;" src="img/C14377_04_15.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 4.15: The HeadlineCreator.js library created</p>
			<p>Going through this exercise has taught you that the inner workings of a library don't have to be complex and hard to understand. The <code>headlineCreator</code> library lets the user create and append a headline to a given parent element. Even though this is a simplified and almost trivial use case, it demonstrates the basic process of building and using a library – that is, having a programmatic problem, finding a solution to it, abstracting the complexity, and providing it to others through a library.</p>
			<h2 id="_idParaDest-167">Activity 4.01: <a id="_idTextAnchor176"/>Adding an Animation to the To-Do List Application</h2>
			<p>In this activity, you have been asked to animate the <code>todo</code> list application that you have been building in the activities from the preceding chapters. Do so using one of the following three libraries:</p>
			<ul>
				<li>jQuery</li>
				<li>Velocity.js</li>
				<li>Anime.js</li>
			</ul>
			<p>The resulting <code>todo</code> list should animate the to-dos whenever you click the Shuffle button. It's up to you what exact animation you use, but nonetheless, I advise you to start with something simple, such as fading the to-dos.</p>
			<p>The high-level steps for the activity are as follows:</p>
			<p>Choose one of the frameworks. To gain a better understanding of how to use them, search for them online and have a look at their documentation (<a href="https://jquery.com">https://jquery.com</a>, <a href="http://velocityjs.org">http://velocityjs.org</a>, <a href="https://animejs.com">https://animejs.com</a>):</p>
			<ol>
				<li value="1">Go to <a href="http://cdnjs.com">cdnjs.com</a> and get the jQuery CDN URL.</li>
				<li>Load the library into the head tag of your existing Todo-List-HTML using a script tag. This will enable you to use jQuery within your code.</li>
				<li>Inside <code>activity.js</code>, you need to change the <code>todoEle</code> variable. Change it to a jQuery element.</li>
				<li>Inside the <code>replaceListElements</code> function, you can now use functions on the <code>todoEle</code> element that jQuery provides to you.</li>
				<li>Hide and clear what's inside the element using the jQuery functions.</li>
				<li>Inside the for loop, create the <code>liEle</code> list item element, set the text contest, and append it to the <code>listEle</code> list element.</li>
				<li>Finally, slowly fade in the new sorted <code>todo</code> list, that is, <code>listEle</code>.</li>
				<li>Now, open the HTML in your browser and click the <code>Shuffle</code> button. The to-do list should fade out, shuffle, and fade in again. You will see the expected output.</li>
				<li>Now, we'll use the <code>Velocity.js</code> method. Go to <a href="http://cdnjs.com">cdnjs.com</a> and get the <code>velocity.js</code> CDN URL.</li>
				<li>Load the library into the head tag of your existing Todo-List-HTML using a script tag. This will allow you to use <code>velocity.js</code> within your code.</li>
				<li>Inside the <code>replaceListElements</code> function, you can now use <code>Velocity.js</code> to hide (by setting opacity to 0) the list element, <code>listEle</code>, and then empty the elements inside of it.</li>
				<li>To fade the list element back in, animate <code>listEle</code> using <code>Velocity.js</code> and set the opacity to 1. Set the code after the <code>for</code> loop.</li>
				<li>Now, open the HTML in your browser and click the <code>Shuffle</code> button. The to-do list should fade out, shuffle, and fade in again.</li>
				<li>Finally, using the <code>Animae</code> method, go to <a href="http://cdnjs.com">cdnjs.com</a> and get the <code>Anime.js</code> CDN URL.</li>
				<li>Load the library into the head tag of your existing Todo-List-HTML using a <code>script</code> tag. This will allow you to use <code>Anime.js</code> within your code.</li>
				<li>Inside the <code>replaceListElements</code> function, you can now use <code>Anime.js</code> to move (by using <code>translateX = -1000</code>) the list element, <code>listEle</code>, out of view and then empty the elements inside of it.</li>
				<li>To show the newly shuffled to-do list, use Anime.js to animate the <code>listEle</code> list element back into view (<code>translateX = 0</code>). Do so inside a timeout to ensure that the shuffling has been done already.<p>Now, open the HTML in your browser and click the <code>Shuffle</code> button. The to-do list should fade out, shuffle, and fade in again. It should appear as follows:</p><div><img alt="Figure 4.16: Animated todo list on click&#13;&#10;" src="img/C14377_04_16.jpg"/></div></li>
			</ol>
			<p class="figure-caption">Figure 4.16: Animated to-do list on click</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution to this activity can be found on page 719.</p>
			<h1 id="_idParaDest-168"><a id="_idTextAnchor177"/>Summary</h1>
			<p>In this chapter, we took a dive into the vast world of JavaScript libraries. We started with an explanation of the terms library and framework. From there, we had a look at a few popular frameworks and what they can help us with. The exercises in this chapter demonstrated where we can find external packages and how we can make use of them. Some of the things we did with these libraries included creating fading effects, removing duplicated entries from a list, and rendering DOM elements to the document. We discussed the disadvantages of using external source code as well. However, the biggest achievement of this chapter was creating our own library that helped us create headlines. We finished this chapter by making use of various libraries to enhance our to-do list with some nice UI effects.</p>
			<p>The next chapter will show us how to work with data in JavaScript. We will gain an understanding of how data is represented, how it can be passed around, and how specific types can be cast into different types.</p>
		</div>
	</body></html>