<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Reporting"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Reporting</h1></div></div></div><p>In this chapter we will create the report and display it with four different types of graphs on the dashboard.</p><p>You will learn to:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create a pie chart to display the quotation and bill data</li><li class="listitem" style="list-style-type: disc">Create a bar chart to display the data of the customer</li><li class="listitem" style="list-style-type: disc">Create a line chart to display the quotation and bill data by month</li><li class="listitem" style="list-style-type: disc">Create a radar chart for monetary amounts</li><li class="listitem" style="list-style-type: disc">Display each chart inside a panel</li><li class="listitem" style="list-style-type: disc">Layout four panels in the dashboard</li></ul></div><div class="section" title="Creating charts on dashboard"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec42"/>Creating charts on dashboard</h1></div></div></div><p>First create<a id="id196" class="indexterm"/> four empty panels and make it so that the <span class="strong"><strong>component test</strong></span> (<span class="strong"><strong>CT</strong></span>)<a id="id197" class="indexterm"/> can <a id="id198" class="indexterm"/>display them. These panels are for a pie chart, bar chart, line chart, and a radar chart. This process is very simple and now you should have four empty panels prepared.</p><p>To create each chart class as before, we will copy a different <code class="literal">view.html</code> and create a new HTML, modify the title and the JavaScript file.</p><div class="section" title="Pie chart for CT"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec52"/>Pie chart for CT</h2></div></div></div><p>Let's<a id="id199" class="indexterm"/> create the class name with <code class="literal">MyApp.view.dashboard.Pie</code>. Please see the following source files for the code:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/pie_view.html</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/pie_view.js</code><div class="informalexample"><pre class="programlisting">...
Ext.onReady(function() {
    Ext.create('MyApp.view.dashboard.Pie', {
        width: 800,
        height: 600,
        renderTo: Ext.getBody()
    });
});
...</pre></div></li></ul></div><p>We'll now<a id="id200" class="indexterm"/> implement the class specified in the previous code (source file: <code class="literal">01_making_charts_on_dashboard/app/view/dashboard/Pie.js</code>).</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Pie', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-pie',
    title: 'Pie Chart'
});</pre></div></div><div class="section" title="Bar chart for CT"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec53"/>Bar chart for CT</h2></div></div></div><p>The <a id="id201" class="indexterm"/>content is<a id="id202" class="indexterm"/> the same as for the bar chart. Let's create the class name with <code class="literal">MyApp.view.dashboard.Bar</code>. Please see the following source files for the code:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/bar_view.html</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/bar_view.js</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/app/view/dashboard/Bar.js</code><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Bar', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-bar',
    title: 'Bar Chart'
});</pre></div></li></ul></div></div><div class="section" title="Line chart for CT"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec54"/>Line chart for CT</h2></div></div></div><p>The same as<a id="id203" class="indexterm"/> with a pie chart and bar chart, let's create the class name with <code class="literal">MyApp.view.dashboard.Line</code>. Please see the following source files for the code:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/line_view.html</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/line_view.js</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/app/view/dashboard/Line.js</code><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Line', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-line',
    title: 'Line Chart'
});</pre></div></li></ul></div></div><div class="section" title="Radar chart for CT"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec55"/>Radar chart for CT</h2></div></div></div><p>In the<a id="id204" class="indexterm"/> same <a id="id205" class="indexterm"/>way as the other charts, let's create the class name with <code class="literal">MyApp.view.dashboard.Radar</code>. Please see the following source files for the code:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/radar_view.html</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/ct/dashboard/radar_view.js</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">01_making_charts_on_dashboard/app/view/dashboard/Radar.js</code><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Radar', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-radar',
    title: 'Radar Chart'
});</pre></div></li></ul></div></div><div class="section" title="Layout to dashboard"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec56"/>Layout to dashboard</h2></div></div></div><p>So, let's arrange these four<a id="id206" class="indexterm"/> panels onto <a id="id207" class="indexterm"/>the dashboard (source file: <code class="literal">02_layout_to_dashboard/app/view/dashboard/DashBoard.js</code>).</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.DashBoard', {
    
    requires: [
        'MyApp.view.dashboard.Pie',
        'MyApp.view.dashboard.Bar',
        'MyApp.view.dashboard.Line',
        'MyApp.view.dashboard.Radar'
    ],
    title: 'Dashboard',
    layout: {
        type: 'hbox',
        pack: 'start',
        align: 'stretch'
    },
    items: [{
        xtype: 'container',
        flex: 1,
        padding: '20 10 20 20',
        layout: {
            type: 'vbox',
            pack: 'start',
            align: 'stretch'
        },
        items: [{
            flex: 1,
            padding: '0 0 10 0',
            xtype: 'myapp-dashboard-pie'
        }, {
            flex: 1,
            padding: '10 0 0 0',
            xtype: 'myapp-dashboard-bar'
        }]
    }, {
        xtype: 'container',
        flex: 1,
        padding: '20 20 20 10',
        layout: {
            type: 'vbox',
            pack: 'start',
            align: 'stretch'
        },
        items: [{
            flex: 1,
            padding: '0 0 10 0',
            xtype: 'myapp-dashboard-line'
        }, {
            flex: 1,
            padding: '10 0 0 0',
            xtype: 'myapp-dashboard-radar'
        }]
    }]
});</pre></div><p>Now, in the <code class="literal">requires</code> parameter on the dashboard panel, set up the four panels you made earlier. You can specify the <code class="literal">xtype</code> in items by doing this.</p><p>Next comes the<a id="id208" class="indexterm"/> layout part. In the <code class="literal">hbox</code> layout divide the top and bottom equally into two equal areas, then in each area divide the left and right with the <code class="literal">vbox</code> layout.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>An important point is that <code class="literal">container</code> is being specified by the <code class="literal">xtype</code>. Having seen a variety of Ext JS code, in this case a lot of code doesn't specify the <code class="literal">xtype</code>. In such a case, <code class="literal">panel</code> will be specified as the initial value.</p><p>If you just want to execute the layout, you should specify the <code class="literal">container</code> parameter. If you don't do that and use <code class="literal">panel</code>, an unnecessary DOM will be created just for carrying out the layout and will badly affect the performance.</p></div></div><p>Now that you have successfully divided the dashboard into four parts, in order to adjust the appearance, make the adjustments to the padding. Of course, it's okay to do this directly with CSS.</p><p>In each of the four areas, set up the chart panels with <code class="literal">xtype</code>.</p><p>Hopefully your <a id="id209" class="indexterm"/>database is starting to take shape. Let's continue and implement the various charts.</p><div class="mediaobject"><img src="graphics/5446OS_05_01.jpg" alt="Layout to dashboard"/></div></div></div></div>
<div class="section" title="Creating a pie chart"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec43"/>Creating a pie chart</h1></div></div></div><p>First, we <a id="id210" class="indexterm"/>made the CT for display purposes, but now let's create the CT to make it run.</p><p>We will use the <code class="literal">Direct</code> function, so let's prepare that as well. In reality we've done this already.</p><p>Duplicate a different <code class="literal">app.html</code> and change the JavaScript file like we have done before. Please see the source file for the code: <code class="literal">03_making_a_pie_chart/ct/dashboard/pie_app.html</code>.</p><div class="section" title="Implementing the Direct function"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec57"/>Implementing the Direct function</h2></div></div></div><p>Next, prepare<a id="id211" class="indexterm"/> the <code class="literal">Direct</code> function to read the data.</p><p>First, it's the <code class="literal">config.php</code> file that defines the <code class="literal">API</code>. Let's gather them together and implement the four graphs (source file: <code class="literal">04_implement_direct_function/php/config.php</code>).</p><div class="informalexample"><pre class="programlisting">    ....
    'MyAppDashBoard'=&gt;array(
        'methods'=&gt;array(
            'getPieData'=&gt;array(
                'len'=&gt;0
            ),
            'getBarData'=&gt;array(
                'len'=&gt;0
            ),
            'getLineData'=&gt;array(
                'len'=&gt;0
            ),
            'getRadarData'=&gt;array(
                'len'=&gt;0
            )
        )
    ....</pre></div><p>Next, let's create the following methods to acquire data for the various charts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">getPieData</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">getBarData</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">getLineData</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">getRadarData</code></li></ul></div><p>First, implement the <code class="literal">getPieData</code> method for the pie chart. We'll implement the <code class="literal">Direct</code> method to get the data for the pie chart. Please see the actual content for the source code (source file: <code class="literal">04_implement_direct_function/php/classes/ MyAppDashBoard.php</code>).</p><p>This is acquiring valid quotation and bill data items. With the data to be sent back to the client, set the array in items and set up the various names and data in a key array. You will now combine the definitions in the next model.</p></div><div class="section" title="Preparing the store for the pie chart"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec58"/>Preparing the store for the pie chart</h2></div></div></div><p>Charts<a id="id212" class="indexterm"/> need a store, so let's define the store and model (source file: <code class="literal">05_prepare_the_store_for_the_pie_chart/app/model/ Pie.js</code>).</p><p>We'll create the <code class="literal">MyApp.model.Pie</code> class that has the <code class="literal">name</code> and <code class="literal">data</code> fields. Connect this with the data you set with the return value of the <code class="literal">Direct</code> function. If you increased the number of fields inside the model you just defined, make sure to amend the return field values, otherwise it won't be applied to the chart, so be careful. We'll use the model we made in the previous step and implement the store (source file: <code class="literal">05_prepare_the_store_for_the_pie_chart/app/model/ Pie.js</code>).</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.store.Pie', {
    extend: 'Ext.data.Store',
    storeId: 'DashboardPie',
    model: 'MyApp.model.Pie',
    proxy: {
        type: 'direct',
        directFn: 'MyAppDashboard.getPieData',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
})</pre></div><p>Then, define the store using the model we made and set up the <code class="literal">Direct</code> function we made earlier in the proxy.</p></div><div class="section" title="Creating the View"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec59"/>Creating the View</h2></div></div></div><p>We have now<a id="id213" class="indexterm"/> prepared the presentation data. Now, let's quickly create the view to display it (source file: <code class="literal">06_making_the_view/app/view/dashboard/Pie.js</code>).</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Pie', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-pie',
    title: 'Pie Chart',
    layout: 'fit',
    requires: [
        'Ext.chart.Chart',
        'MyApp.store.Pie'
    ],
    initComponent: function() {
        var me = this, store;
        store = Ext.create('MyApp.store.Pie');
        Ext.apply(me, {
            items: [{
                xtype: 'chart',
                store: store,
                series: [{
                    type: 'pie',
                    field: 'data',
                    showInLegend: true,
                label: {
                    field: 'name',
                    display: 'rotate',
                    contrast: true,
                    font: '18px Arial'
                }
            }]
            }]
        });
        me.callParent(arguments);
    }
});</pre></div></div><div class="section" title="Implementing the controller"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec60"/>Implementing the controller</h2></div></div></div><p>With the <a id="id214" class="indexterm"/>previous code, data is not being read by the store and nothing is being displayed.</p><p>In the same way that reading was performed with <code class="literal">onShow</code>, let's implement the controller (source file: <code class="literal">06_making_the_view/app/controller/DashBoard.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.controller.dashboard.DashBoard', {
    extend: 'MyApp.controller.Abstract',
    screenName: 'dashboard',
    init: function() {
        var me = this;
        me.control({
            'myapp-dashboard': {
                'myapp-show': me.onShow,
                'myapp-hide': me.onHide
            }
        });
    },
    onShow: function(p) {
        p.down('myapp-dashboard-pie chart').store.load();
    },
    onHide: function() {
    }
});</pre></div><p>With the charts we create from now on, as we create them it would be good to add the reading <a id="id215" class="indexterm"/>process to <code class="literal">onShow</code>. Let's take a look at our pie chart which appears as follows:</p><div class="mediaobject"><img src="graphics/5446OS_05_02.jpg" alt="Implementing the controller"/></div></div></div>
<div class="section" title="Creating a bar chart"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec44"/>Creating a bar chart</h1></div></div></div><p>In the same way as<a id="id216" class="indexterm"/> with the pie chart, first prepare the CT. Again in the same way as creating the pie chart, let's change the JavaScript file and create the bar chart HTML (source file: <code class="literal">07_making_a_bar_chart/ct/dashboard/bar_app.html</code>).</p><p>Apart from the created class name (<code class="literal">MyApp.view.dashboard.Bar</code>), the JavaScript file here is the same as the pie chart (source file: <code class="literal">07_making_a_bar_chart/ct/dashboard/bar_app.js</code>).</p><div class="section" title="Implementing the Direct function"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec61"/>Implementing the Direct function</h2></div></div></div><p>Now,<a id="id217" class="indexterm"/> it's the <code class="literal">Direct</code> function. As the definition is already made in <code class="literal">config.php</code>, I will not repeat it here.</p><p>Let's go ahead and implement the <code class="literal">Direct</code> method (<code class="literal">getBarData</code>) to get the data for the bar chart. Please refer to the source code in the source file if you want to see the content (source file: <code class="literal">08_implement_direct_function/php/classes/ MyAppDashBoard.php</code>). It will acquire the count for the levels of quotations or bills created for each client.</p></div><div class="section" title="Preparing the store for the chart"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec62"/>Preparing the store for the chart</h2></div></div></div><p>Next comes<a id="id218" class="indexterm"/> the model store in the same way as we did for the pie chart. The name is the client name; quotation and bill are where the various counts are stored.</p><p>We'll now create the <code class="literal">MyApp.model.Bar</code> class that has the fields, such as <code class="literal">name</code>, <code class="literal">quotation</code>, and <code class="literal">bill</code> (source file: <code class="literal">09_prepare_the_store_for_the_pie_chart/app/model/ Bar.js</code>).</p><p>We'll implement the store using the model we made in the previous step. It is the same way as we did for the pie chart so just see the source file if you need reference. Be careful as the model <code class="literal">name</code>, <code class="literal">StoreId</code>, and <code class="literal">Direct</code> method titles are different (source file: <code class="literal">09_prepare_the_store_for_the_pie_chart/app/store/ Bar.js</code>).</p></div><div class="section" title="Creating the view"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec63"/>Creating the view</h2></div></div></div><p>Let's go ahead<a id="id219" class="indexterm"/> and define the content inside so that we can display it (source file: <code class="literal">10_making_the_view/app/view/dashboard/Bar.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Bar', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-bar',
    title: 'Bar Chart',
    layout: 'fit',
    requires: [
        'Ext.chart.Chart',
        'MyApp.store.Bar'
    ],
    initComponent: function() {
        var me = this, store;
        store = Ext.create('MyApp.store.Bar');
        Ext.apply(me, {
            items: [{
                xtype: 'chart',
                store: store,
                axes: [{
                    type: 'Numeric',
                    position: 'bottom',
                    fields: ['quotation', 'bill'],
                    title: 'Document Count',
                    grid: true,
                    minimum: 0
                }, {
                    type: 'Category',
                    position: 'left',
                    fields: ['name'],
                    title: 'Customers'
                }],
                series: [{
                    type: 'bar',
                    axis: 'bottom',
                    highlight: true,
                    tips: {
                        trackMouse: true,
                        width: 140,
                        height: 28,
                        renderer: function(storeItem, item) {
                            var tail = '';
                            if(storeItem.get(item.yField) &gt; 1) {
                                tail = 's';
                            }
                            this.setTitle([
                                 storeItem.get('name'),
                                 ': ',
                                 storeItem.get(item.yField),
                                 ' ',
                                 item.yField,
                            ].join(''));
                        }
                    },
                    label: {
                        display: 'insideEnd',
                        field: 'quotation',
                        renderer: Ext.util.Format.numberRenderer('0'),
                        orientation: 'horizontal',
                        color: '#333',
                        'text-anchor': 'middle'
                    },
                    xField: 'name',
                    yField: ['quotation', 'bill']
                }]
            }]
        });
        me.callParent(arguments);
    }
});</pre></div></div><div class="section" title="Implementing the controller"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec64"/>Implementing the controller</h2></div></div></div><p>Like <a id="id220" class="indexterm"/>what we did with <code class="literal">onShow</code>, I'll put this implementation in a postscript (source file: <code class="literal">11_making_the_view/app/controller/DashBoard.js</code>).</p><div class="informalexample"><pre class="programlisting">    ....
    onShow: function(p) {
        p.down('myapp-dashboard-pie chart').store.load();
        p.down('myapp-dashboard-bar chart').store.load();
    },
    ....</pre></div><p>Let's take a look at our bar chart which appears as follows:</p><div class="mediaobject"><img src="graphics/5446OS_05_03.jpg" alt="Implementing the controller"/></div></div></div>
<div class="section" title="Creating a line chart"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec45"/>Creating a line chart</h1></div></div></div><p>As before,<a id="id221" class="indexterm"/> let's set out by creating the CT. In the same way as for the pie chart, change the JavaScript file to be read and create the line chart HTML (source file: <code class="literal">12_making_a_line_chart/ct/dashboard/line_app.html</code>).</p><p>In this JavaScript file, everything is the same as the pie chart apart from the create class name: <code class="literal">MyApp.view.dashboard.Line</code> (source file: <code class="literal">12_making_a_line_chart/ct/dashboard/line_app.js</code>).</p><div class="section" title="Implementing the Direct function"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec65"/>Implementing the Direct function</h2></div></div></div><p>In the same way<a id="id222" class="indexterm"/>, implement the <code class="literal">Direct</code> function. Let's implement the <code class="literal">Direct</code> method (<code class="literal">getLineData</code>) to acquire data in the same way as we did for the bar chart. Please refer to the source file if you want to see the source code (source file: <code class="literal">13_implement_direct_function/php/classes/ MyAppDashBoard.php</code>).</p></div><div class="section" title="Preparing the store for the chart"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec66"/>Preparing the store for the chart</h2></div></div></div><p>Create the<a id="id223" class="indexterm"/> model store in a similar way. We'll create the <code class="literal">MyApp.model.Line</code> class that has the fields <code class="literal">name</code>, <code class="literal">quotation</code>, and <code class="literal">bill</code> (source file: <code class="literal">14_prepare_the_store_for_the_pie_chart/app/model/ Line.js</code>).</p><p>We'll now implement the store using the model we made in the previous step. The details are the same as in the pie chart. Refer to the following source file for the code. Again, the model <code class="literal">name</code>, <code class="literal">StoreId</code>, and <code class="literal">Direct</code> method titles have changed so take note of this (source file: <code class="literal">14_prepare_the_store_for_the_pie_chart/app/store/ Line.js</code>).</p></div><div class="section" title="Creating the view"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec67"/>Creating the view</h2></div></div></div><p>Let's <a id="id224" class="indexterm"/>make the <code class="literal">quotation</code> and <code class="literal">bill</code> variables to display per month. With the <code class="literal">Direct</code> function, at most it can receive output of 12 months, and in case that the data doesn't exist, the number of months will decrease (source file: <code class="literal">15_making_the_view/app/view/dashboard/Line.js</code>).</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Line', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-line',
    title: 'Line Chart',
    layout: 'fit',
    requires: [
        'MyApp.store.Line'
    ],
    initComponent: function() {
        var me = this, store;
        store = Ext.create('MyApp.store.Line');
        Ext.apply(me, {
            items: [{
                xtype: 'chart',
                store: store,
                legend: {
                    position: 'right'
                },
                axes: [{
                    type: 'Numeric',
                    minimum: 0,
                    position: 'left',
                    fields: ['quotation', 'bill'],
                    title: 'Documents',
                    minorTickSteps: 1
                }, {
                    type: 'Category',
                    position: 'bottom',
                    fields: ['mon'],
                    title: 'Month of the Year'
                }],
                series: [{
                    type: 'line',
                    highlight: {
                        size: 7,
                        radius: 7
                    },
                    axis: 'left',
                    xField: 'mon',
                    yField: 'quotation'
                }, {
                    type: 'line',
                    highlight: {
                        size: 7,
                        radius: 7
                    },
                    axis: 'left',
                    xField: 'mon',
                    yField: 'bill'
                }]
            }]
        });
        me.callParent(arguments);
    }
});</pre></div></div><div class="section" title="Implementing the controller"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec68"/>Implementing the controller</h2></div></div></div><p>As it is <a id="id225" class="indexterm"/>the same process, I will add a postscript about the command to read the controller store (source file: <code class="literal">16_making_the_view/app/controller/DashBoard.js</code>).</p><div class="informalexample"><pre class="programlisting">    ....
    onShow: function(p) {
        p.down('myapp-dashboard-pie chart').store.load();
        p.down('myapp-dashboard-bar chart').store.load();
        p.down('myapp-dashboard-line chart').store.load();
    },
    ....</pre></div><p>Let's take a look<a id="id226" class="indexterm"/> at our line chart which appears as follows:</p><div class="mediaobject"><img src="graphics/5446OS_05_04.jpg" alt="Implementing the controller"/></div></div></div>
<div class="section" title="Creating a radar chart"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec46"/>Creating a radar chart</h1></div></div></div><p>Now, let's make the final CT.</p><p>In the same <a id="id227" class="indexterm"/>way as the pie chart, change the JavaScript file to be read and create the radar chart HTML (source file: <code class="literal">17_making_a_radar_chart/ct/dashboard/radar_app.html</code>).</p><p>Again, everything is the same as the pie chart in this JavaScript file apart from the create class name: <code class="literal">MyApp.view.dashboard.Radar</code> (source file: <code class="literal">17_making_a_radar_chart/ct/dashboard/radar_app.js</code>).</p><div class="section" title="Implementing the Direct function"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec69"/>Implementing the Direct function</h2></div></div></div><p>As <a id="id228" class="indexterm"/>the title says, let's implement the <code class="literal">Direct</code> function. As before, we'll implement the <code class="literal">Direct</code> method (<code class="literal">getRadarData</code>) to acquire the data for the radar chart. Please refer to the following source file for details (source file: <code class="literal">18_implement_direct_function/php/classes/ MyAppDashBoard.php</code>).</p><p>You've guessed it, the process is exactly the same as the <code class="literal">getLineData</code>. So, there's no need to implement it unnecessarily, but if you want to display different data on the radar chart, please amend this method.</p></div><div class="section" title="Preparing the store for the chart"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec70"/>Preparing the store for the chart</h2></div></div></div><p>Let's<a id="id229" class="indexterm"/> prepare the store. We'll create the <code class="literal">MyApp.model.Radar</code> class that has the <code class="literal">name</code>, <code class="literal">quotation</code>, and <code class="literal">bill</code> fields (source file: <code class="literal">19_prepare_the_store_for_the_pie_chart/app/model/ Radar.js</code>).</p><p>Again, we'll implement the store with the model we made in the previous step. The details are the same as for the pie chart, and again be careful because the model <code class="literal">name</code>, <code class="literal">StoreId</code>, and <code class="literal">Direct</code> method titles are different (source file: <code class="literal">19_prepare_the_store_for_the_pie_chart/app/store/ Radar.js</code>).</p></div><div class="section" title="Creating the view"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec71"/>Creating the view</h2></div></div></div><p>Next, we <a id="id230" class="indexterm"/>will create the view (source file: <code class="literal">20_making_the_view/app/view/dashboard/Radar.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.dashboard.Radar', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.myapp-dashboard-radar',
    title: 'Radar Chart',
    layout: 'fit',
    requires: [
        'MyApp.store.Radar'
    ],
    initComponent: function() {
        var me = this, store;
        store = Ext.create('MyApp.store.Radar');
        Ext.apply(me, {
            items: [{
                xtype: 'chart',
                store: store,
                insetPadding: 20,
                legend: {
                    position: 'right'
                },
                axes: [{
                    type: 'Radial',
                    position: 'radial',
                    label: {
                        display: true
                    }
                }],
                series: [{
                    type: 'radar',
                    xField: 'mon',
                    yField: 'quotation',
                    showInLegend: true,
                    showMarkers: true,
                    markerConfig: {
                        radius: 5,
                        size: 5
                    },
                    style: {
                        'stroke-width': 2,
                        fill: 'none'
                    }
                },{
                    type: 'radar',
                    xField: 'mon',
                    yField: 'bill',
                    showInLegend: true,
                    showMarkers: true,
                    markerConfig: {
                        radius: 5,
                        size: 5
                    },
                    style: {
                        'stroke-width': 2,
                        fill: 'none'
                    }
                }]
            }]
        });
        me.callParent(arguments);
    }
});</pre></div></div><div class="section" title="Implementing the controller"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec72"/>Implementing the controller</h2></div></div></div><p>Postscript<a id="id231" class="indexterm"/> the store's data reading settings in <code class="literal">onShow</code> (source file: <code class="literal">21_making_the_view/app/controller/DashBoard.js</code>).</p><div class="informalexample"><pre class="programlisting">    ....
    onShow: function(p) {
        p.down('myapp-dashboard-pie chart').store.load();
        p.down('myapp-dashboard-bar chart').store.load();
        p.down('myapp-dashboard-line chart').store.load();
        p.down('myapp-dashboard-radar chart').store.load();
    },
    ....</pre></div><p>Finally, let's look at our radar chart which appears as follows:</p><div class="mediaobject"><img src="graphics/5446OS_05_05.jpg" alt="Implementing the controller"/></div><p>In the near future, the chart should look like the previous chart. However, in the current Ext JS 4.2.2-GPL Version, setting the store to a chart and acquiring the data from the server causes a bug that distorts the display of the lines and the labels. The bug has been confirmed as EXTJSIV-7778.</p><p>In the case of the previous chart, we managed to display it by taking the exact same response received from the server and setting it in the store's local data.</p><div class="mediaobject"><img src="graphics/5446OS_05_06.jpg" alt="Implementing the controller"/></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec47"/>Summary</h1></div></div></div><p>You must agree this is starting to look like an application!</p><p>The dashboard is the first screen you see right after logging in. Charts are extremely effective in order to visually check a large and complicated amount of data. If you keep adding panels as and when you feel it's needed, you'll increase its practicability. This sample will become a customizable base for you to use in future projects.</p><p>Now, in the next and final chapter we'll move on to data management.</p></div></body></html>