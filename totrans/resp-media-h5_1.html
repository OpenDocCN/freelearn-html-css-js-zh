<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Working with Responsive Images"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Working with Responsive Images</h1></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>"A picture tells a thousand words…"</p></blockquote></div><p>These words used in an advert dating from 1913 for the Piqua Auto Supply House of Piqua, Ohio, still ring true over a hundred years later. The only difference is the advent of technology—with the increasing use of mobile phones, tablets, and portable devices comes a need to display content on smaller devices. While text might be easy to display, images are less so, but are still just as important. Throughout this chapter, we're going to look at some of the tips and tricks you need to learn in order to display images of the right size and quality on a variety of different devices.</p><p>Creating responsive images can be as easy or complex as needed. In this chapter, we will cover a host of topics, which include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Working with fluid images, icons, and sprites</li><li class="listitem" style="list-style-type: disc">Catering to vendor prefixes, image formats, and different platforms</li><li class="listitem" style="list-style-type: disc">Catering to HD/Retina images and using the <code class="literal">&lt;picture&gt;</code> tags</li><li class="listitem" style="list-style-type: disc">Determining an available viewport for use</li><li class="listitem" style="list-style-type: disc">Working out media queries using CSS, JavaScript, or data tags</li><li class="listitem" style="list-style-type: disc">Building a responsive carousel and creating responsive maps</li></ul></div><p>Curious? Let's get started!</p><div class="section" title="Getting started"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>Getting started</h1></div></div></div><p>Throughout this chapter, we'll work using a project area. Before we get started, it is strongly recommended that you create a project folder. For the purposes of this chapter, I will assume it is called <code class="literal">code</code>; inside <a id="id0" class="indexterm"/>it, you will need to create four folders: <code class="literal">css</code>, <code class="literal">js</code>, <code class="literal">font</code>, and <code class="literal">img</code>, as shown in this screenshot:</p><div class="mediaobject"><img src="graphics/6968OT_01_01.jpg" alt="Getting started"/></div><p>We will refer to the folders created here throughout the chapter.</p></div></div>
<div class="section" title="Beginning with fluid images"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Beginning with fluid images</h1></div></div></div><p>How many times <a id="id1" class="indexterm"/>have you created web pages only to find that a viewer complains that they look poor on a mobile device? I'll bet that one possible reason for this is image content. The image is set with fixed sizes, so it doesn't resize well in smaller browsers, right?</p><p>In this tutorial, we will take a look at the basics needed to move away from fixed images to those that adapt when a browser window has been resized or content is being viewed on a mobile device.</p><p>For this exercise, I've created a dummy page about Lake Peyto in Canada—a truly stunning part of Canada if you are fortunate to be able to visit! Throughout this tutorial, we're going to make some changes to help make the image react better when resized in a browser window. These steps will guide you through the exercise:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Let's start by cracking open a copy of the code download and extracting <code class="literal">simplefluid1.html</code> and <code class="literal">simplefluid1.css</code>. This a simple web page about Lake Peyto, Canada.</li><li class="listitem">Try resizing the browser window. Notice how it doesn't resize any of the content? Let's fix that by making two small changes to our code.</li><li class="listitem">Alter the two lines in <code class="literal">simplefluid1.css</code> as shown in these lines of code:<div class="informalexample"><pre class="programlisting">img { max-width: 100%; height: auto; float: left; padding: 10px; }
#description { box-sizing: border-box; }
#peytoe { ... padding: 0px 10px 10px; <span class="strong"><strong>width: 66%;</strong></span> }</pre></div><p>The three changes we just performed are all that is required to make the content responsive and adapt to fit the resized window. We've used <code class="literal">max-width</code> to control the size of the image and the use of <code class="literal">height: auto</code> helps to keep the aspect ratio of the image to prevent it from looking distorted.</p><p>One might think that this is enough, right? Well no, not quite; try resizing the content to a smaller size and we can see the image is starting to spill over the border.</p><p>To make the image truly adaptive, we need to convert the sizes to their percentage equivalents; for this, we can use the formula <span class="emphasis"><em>target ÷ context = result</em></span>. Let's put this into practice. Consider <code class="literal">443px</code> (width of image) / <code class="literal">800px</code> (original size of box) * 100 = 55.375 percent.</p></li><li class="listitem">Using this <a id="id2" class="indexterm"/>formula, go ahead and modify the <code class="literal">img</code> rule as follows:<div class="informalexample"><pre class="programlisting">img { <span class="strong"><strong>width: 55.375%; height: 37.125%;</strong></span> float: left; padding: 10px; }</pre></div></li></ol></div><p>If all is well when resizing the image, the content will adjust but remain within the confines of the <code class="literal">#peytoe</code> div, as shown in this screenshot:</p><div class="mediaobject"><img src="graphics/6968OT_01_02.jpg" alt="Beginning with fluid images"/></div><p>It should be noted that this approach may not work for all sites. For example, it may be preferable to crop it first using the background position before scaling it down to a smaller size. It will depend on your design as well as the type and quantity of images used; this is something that needs to be considered during design.</p><p>Now that we've seen the <a id="id3" class="indexterm"/>basics of making images responsive, let's move on and take a look at how we can improve on this by using higher quality images on supported devices. Before we do this though, it is worth covering a couple of key points about responsive design, namely relating to the use of vendor prefixes and image formats.</p></div>
<div class="section" title="Catering to vendor prefixes and image formats"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Catering to vendor prefixes and image formats</h1></div></div></div><p>We'll start this <a id="id4" class="indexterm"/>section with a question. Hands up if you thought that creating <a id="id5" class="indexterm"/>responsive content requires special image formats or lots of vendor prefixes? If you think yes is the answer, then think again—two to three years ago, you may have had to work with something like the following lines of code as an example media query:</p><div class="informalexample"><pre class="programlisting">@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
only screen and (min--moz-device-pixel-ratio: 1.5),
only screen and (-o-device-pixel-ratio: 3/2), 
only screen and (min-device-pixel-ratio: 1.5) {
    /* High-res version of image assets go here */
}</pre></div><p>Now, all you need to cater to most modern browsers (that is, versions released within the last 12 to 18 months) is this—not a vendor prefix in sight:</p><div class="informalexample"><pre class="programlisting">(min-resolution: 192dpi) { 
    /* CSS styles here */
}</pre></div><p>A similar principle applies for images—there <a id="id6" class="indexterm"/>is no need for a special format that needs to be used solely for media queries, or a need to use lots of different formats to cater to different devices. We only need to choose one format—any format will work. The exception here is that while <a id="id7" class="indexterm"/>using PNG or JPG images will produce results, you will find that the quality will begin to suffer in some instances as these formats do not scale up well.</p><p>Instead, it is better to use the SVG format when working responsively. This is effectively XML, which can be edited using tools such as Inkscape or Illustrator; it even can be edited in a text editor! The key to using SVG though is that it scales perfectly; irrespective of the size of the browser window, the image quality will be unaffected. It's an ideal format for logos, patterns, icons, and so on, but not for photographs, where the lossy format will not scale well.</p></div>
<div class="section" title="Catering to different platforms"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Catering to different platforms</h1></div></div></div><p>At this point, you may <a id="id8" class="indexterm"/>hopefully be asking yourself, "What about mobile devices?"—it's a good question after all: the whole point of responsive design is to cater to mobile devices! Most of the tips and tricks we will encounter throughout this chapter will work on a mobile platform, although there are some useful guidelines that are worth noting:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Shrink the images. Use any online service such as TinyPNG or XnConvert; they need to be made as small as possible without sacrificing too much quality.</li><li class="listitem" style="list-style-type: disc">Be careful with retina images. Memory usage for these can vary dramatically between different mobile devices, so ensure you set your media queries appropriately.</li><li class="listitem" style="list-style-type: disc">If you're using jQuery to provide fallback support, then consider using conditional loading to only call jQuery when needed and not by default.</li><li class="listitem" style="list-style-type: disc">Make sure that different sized versions of the same image have been created. There is no point in forcing a mobile user to download a huge file when a small one will do! To get help with this, look online for tools such as Andi Smith's Responsive <a id="id9" class="indexterm"/>Images tool at <a class="ulink" href="http://www.andismith.com/grunt-responsive-images/">http://www.andismith.com/grunt-responsive-images/</a>, which can help automate the process.</li><li class="listitem" style="list-style-type: disc">Test in an <a id="id10" class="indexterm"/>online applet such as the Responsive tool available at <a class="ulink" href="http://coolestguidesontheplanet.com/responsive/">http://coolestguidesontheplanet.com/responsive/</a>, as there is no substitute for testing! It is much better to test thoroughly now and fix errors before going live than to suffer the embarrassment at a later date.</li><li class="listitem" style="list-style-type: disc">Work in a mobile first capacity. Mobile devices need to be set to download the smallest images first; browsers will handle the replacement with larger images automatically if the media queries have been created within the site.</li><li class="listitem" style="list-style-type: disc">Consider <a id="id11" class="indexterm"/>using something similar to the Network API (<a class="ulink" href="http://code.tutsplus.com/tutorials/html5-network-information-api--cms-21598">http://code.tutsplus.com/tutorials/html5-network-information-api--cms-21598</a>) or Modernizr (<a class="ulink" href="http://www.modernizr.com">http://www.modernizr.com</a>) to determine whether the visitor is using a mobile platform; we <a id="id12" class="indexterm"/>can link these to jQuery/JavaScript based media queries if required to determine which image should be served.</li><li class="listitem" style="list-style-type: disc">Don't use display: none <a id="id13" class="indexterm"/>to hide images, serve them in media queries. Using the former approach still downloads them even if they are hidden.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>Remember this sentence from RevUnit's Seth Waite: "1 in 4 people abandon a web page that takes more than four seconds to load." This becomes more critical with mobile devices; loading a large image will blow this straight out of the water! You can see his original article at <a class="ulink" href="http://sethwaite.com/2012/08/how-slow-website-speed-destroys-your-conversion-rates/">http://sethwaite.com/2012/08/how-slow-website-speed-destroys-your-conversion-rates/</a>.</p></div></div></li></ul></div><p>Now that the <a id="id14" class="indexterm"/>theory is out of the way, let's get coding! We're going to begin with one of the key elements of working with responsive media—catering to <span class="strong"><strong>high-resolution</strong></span> (<span class="strong"><strong>hi-res</strong></span>) or retina-based images.</p></div>
<div class="section" title="Catering to HD or retina images"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Catering to HD or retina images</h1></div></div></div><p>How often have <a id="id15" class="indexterm"/>you used a mobile device, such as an iPad, only to find images of poor quality? With the advent of retina displays on devices such as iPads, it is becoming more important to ensure your images are of sufficient quality on high-resolution screens.</p><p>
<span class="strong"><strong>Retina display</strong></span> is a <a id="id16" class="indexterm"/>proprietary marketing term coined by Apple, rather than a scientific term. To some it might evoke images of a complex scientific process; in reality it is just double resolution where pixels have been very closely packed to give higher quality and resolution. As an example, the pixel count can be anywhere from 220 <a id="id17" class="indexterm"/>
<span class="strong"><strong>pixels per inch</strong></span> (<span class="strong"><strong>PPI</strong></span>) for third generation Mac Book Pros to 401 PPI for iPhone 6 Plus!</p><p>Adding retina support to our code is easy. There are several options open to us:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">We can set images as the background image using <code class="literal">background-size: cover</code> to ensure it covers the full display. Images can then be swapped out with higher resolution ones using CSS media queries.</li><li class="listitem" style="list-style-type: disc">We can resize images as larger retina images then use CSS to resize them on screen; this results in a larger file but not necessarily twice as large due to the way JPEG compression works. We may need to use <code class="literal">-ms-interpolation-mode: bicubic</code> to ensure the compression level is as efficient as possible in some browsers though!</li></ul></div><p>We can always <a id="id18" class="indexterm"/>set our code to display high-resolution images; however, there is a cost in displaying these images in the form of a bigger file size; the quality will be lost on <span class="strong"><strong>low-resolution</strong></span> (<span class="strong"><strong>low-res</strong></span>) devices.</p><p>Instead, we could use a plugin, such as Retina JS, to tell browsers to serve hi-res images only when needed. Let's take a look at using one in action:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Start by adding the following code to a new file, saving it as <code class="literal">retina.html</code>:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;script src="js/retina.min.js"&gt;&lt;/script&gt; 
&lt;/head&gt;
&lt;body&gt;
  &lt;img src="img/mothorchid.png" data-at2x="img/mothorchid@2x.png" width="584px" height="389px"&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></li><li class="listitem">Next, we need to <a id="id19" class="indexterm"/>download the RetinaJS library—this is available at <a class="ulink" href="https://github.com/imulus/retinajs/releases/download/1.3.0/retina-1.3.0.zip">https://github.com/imulus/retinajs/releases/download/1.3.0/retina-1.3.0.zip</a> (at the time of writing of this book, the latest version is 1.3.0). Extract <code class="literal">retina.min.js</code> and drop it into a subfolder called <code class="literal">js</code> within your project folder.</li><li class="listitem">We also need two images: one needs to be of a higher resolution than the other; for this example, I will use two PNG files that are available in the code download: <code class="literal">mothorchid.png</code> and <code class="literal">mothorchid@2x.png</code>. Note that the second file must have <code class="literal">@2x</code> at the end of the filename; this is the key to making Retina JS work.</li></ol></div><p>To preview the results, it <a id="id20" class="indexterm"/>is recommended to use Google Chrome. We can easily simulate changing the device pixel ratio setting; change it from <code class="literal">1</code> to <code class="literal">2</code> and refresh the <a id="id21" class="indexterm"/>screen to see the change from the low-res image to the one of higher quality. We will cover how to create media queries that support hi-res images later in this chapter in the <span class="emphasis"><em>Working out media queries</em></span> section.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>There are plenty of examples <a id="id22" class="indexterm"/>online of plugins that can provide retina support—two of the examples are: <code class="literal">responsImg</code>, which you can download from <a class="ulink" href="http://etiennetalbot.github.io/responsImg/">http://etiennetalbot.github.io/responsImg/</a>. Alternatively, you can use Grunt to do the heavy work with Andi Smith's responsive images plugin <a id="id23" class="indexterm"/>for Grunt at <a class="ulink" href="http://mattstow.com/experiment/responsive-images/responsive-images.html">http://mattstow.com/experiment/responsive-images/responsive-images.html</a>.</p></div></div></div>
<div class="section" title="Using sprites to display responsive images"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Using sprites to display responsive images</h1></div></div></div><p>So far, our <a id="id24" class="indexterm"/>examples all have something in common: they work with individual images. This is fine for those that may only <a id="id25" class="indexterm"/>appear once or twice at the most, but what if they appear frequently throughout your site? It seems pointless to have to call them each time. Fortunately, we can get around this with the use of image sprites.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>For a discussion on how image sprites work, take a look at a useful article by Chris Coyier at <a class="ulink" href="http://css-tricks.com/css-sprites/">http://css-tricks.com/css-sprites/</a>.</p></div></div><p>For the uninitiated, image sprites are a way of combining lots of (ideally, small) images into one larger one then using CSS style rules to display the relevant part of that image. We typically might use <code class="literal">background-position</code> to position the image; using values in pixels, this works perfectly well. We can use the same principle with responsive sprites but with one key difference: we use percentage values instead, not pixels! Let's take a look at how to do it using some battery icons as an example:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Start by extracting a copy of <code class="literal">imagesprites.html</code> from the code download that accompanies this book. It contains some simple markup with <code class="literal">&lt;img&gt;</code> references to some battery icons that we will use in our demo.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>At this point, you may notice the long string of random characters—these are <a id="id26" class="indexterm"/>data URIs; they were generated using the responsive sprite image creator service at <a class="ulink" href="http://responsive-css.spritegen.com/">http://responsive-css.spritegen.com/</a>. For now, it's enough to know that these are the images converted into a format that reduces the need to continually request images from the server.</p></div></div></li><li class="listitem">In a <a id="id27" class="indexterm"/>separate file, add the <a id="id28" class="indexterm"/>following code, saving it as <code class="literal">imagesprites.css</code> in the <code class="literal">css</code> subfolder of our project folder:<div class="informalexample"><pre class="programlisting">#demo img { display: block; margin: 1em auto; }

.battery { background-position: 0 0%; background-size: 100%; }
.battery-charge { background-position: 0 25%; background-size: 100%; }
.battery-full { background-position: 0 50%; background-size: 100%; }
.battery-half { background-position: 0 75%; background-size: 100%; }
.battery-plug { background-position: 0 100%; background-size: 100%; }

.battery, .battery-charge, .battery-full, .battery-half, .battery-plug
{ max-width: 100%; background-size: 100%; background-image: url('../img/index.png'); }</pre></div></li><li class="listitem">From the code download, extract a copy of <code class="literal">index.png</code> from the <code class="literal">img</code> folder. This is our sprite image that has been premade using the CSS Sprites service from earlier in this exercise. Save it in the <code class="literal">img</code> subfolder of the project folder. The battery <a id="id29" class="indexterm"/>icons used were from <a class="ulink" href="http://www.fatcow.com/free-icons">http://www.fatcow.com/free-icons</a>. If you have others you would prefer to use, please alter the code accordingly.</li><li class="listitem">If we preview the results, we should expect to see our responsive sprite image appear. If we resize the screen, it automatically updates the position of the image as shown in this screenshot:<div class="mediaobject"><img src="graphics/6968OT_01_03.jpg" alt="Using sprites to display responsive images"/></div></li></ol></div><p>However, there <a id="id30" class="indexterm"/>are some drawbacks that we need to be aware of when using this approach:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">If we try to decode the base64 URIs given in the code, it doesn't appear to produce a valid image—what gives?</li><li class="listitem" style="list-style-type: disc">The use of long URIs in HTML makes it harder to read</li><li class="listitem" style="list-style-type: disc">It makes it very difficult, if not impossible, to adapt this code for use with <code class="literal">@media</code> queries or to use retina-based images</li></ul></div><p>To see how awkward it is and to see the resulting changes in code required to remove the use of data URIs from the HTML markup, take a look at <code class="literal">imagesprites2.html</code> and <code class="literal">imagesprites2.css</code> in the code download that accompanies this book. Notice how the CSS has <a id="id31" class="indexterm"/>significantly changed.</p><p>Let's change tack—a key concept of responsive design is to determine the available viewport we can use when displaying content. Let's see what this means, when working with images.</p></div>
<div class="section" title="Determining the available viewport for use"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Determining the available viewport for use</h1></div></div></div><p>Viewport? Surely <a id="id32" class="indexterm"/>you mean screen estate or perhaps resolution? In this instance, no. When designing responsively, we have to cater to screens of all different shapes and sizes; it's not enough to simply design for a certain screen resolution. Instead, we have to allow for the fact that the available space in a browser window (or viewport) might be smaller; we have to design our breakpoints to fit this available space.</p><p>A good reference point to <a id="id33" class="indexterm"/>see the available viewport on a host of devices is <a class="ulink" href="http://viewportsizes.com/">http://viewportsizes.com/</a> and then navigating to <a class="ulink" href="http://viewportsizes.com/mine/">http://viewportsizes.com/mine/</a>. This will display the current space available to us. There are two ways to set the available viewport for use: one using CSS/HTML markup and the <a id="id34" class="indexterm"/>other using jQuery or JavaScript. We'll take a look at using the CSS method first.</p><div class="section" title="Using CSS to set our viewport"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>Using CSS to set our viewport</h2></div></div></div><p>This is probably <a id="id35" class="indexterm"/>one of the simplest settings to add to any responsive design, yet it has the potential to open up a hornet's nest of problems! Setting the viewport using CSS is a one-line piece of code; the difficulty is in working out the CSS <a id="id36" class="indexterm"/>styling needed to position the elements correctly once the viewport has been set.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>For this demo, it is recommended that you use Google Chrome. It has a built-in device emulation facility that makes it easy to test our results in different viewports. I will assume for the purposes of this demo that you have it installed.</p></div></div><p>We'll begin with setting the markup first, so we can at least see what happens when the viewport has not been set in CSS:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll start, as always, by preparing our markup. From the code download, extract the files: <code class="literal">viewport-css.html</code>, <code class="literal">viewport-css.css</code>, and <code class="literal">pixel-grid.png</code>; save them into the <code class="literal">css</code> subfolder and <code class="literal">img</code> subfolder respectively.</li><li class="listitem">We've used the PT <a id="id37" class="indexterm"/>Sans font for decorative purposes. This is available from <a class="ulink" href="http://www.fontsquirrel.com/fonts/PT-Sans">http://www.fontsquirrel.com/fonts/PT-Sans</a>; you will need to download it and extract the fonts into a <code class="literal">fonts</code> subfolder within your project area.</li><li class="listitem">Open Google Chrome and set the <span class="strong"><strong>Emulation</strong></span> facility to emulate the Sony Xperia S, Ion devices, within the Developer Toolbar.</li></ol></div><p>At this point, it is worth previewing the results in a browser; if all is well, we should see a result similar to this screenshot:</p><div class="mediaobject"><img src="graphics/6968OT_01_04.jpg" alt="Using CSS to set our viewport"/></div><p>The keen-eyed among you will have noticed that something is clearly amiss. Our screen has not resized properly and text is being chopped off the right edge of the window. Let's fix that now using the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In <code class="literal">viewport-css.html</code>, add <a id="id38" class="indexterm"/>the following line as indicated:<div class="informalexample"><pre class="programlisting">  &lt;title&gt;Demo - Setting a viewport using CSS&lt;/title&gt;
<span class="strong"><strong>  &lt;meta name="viewport" content="width=360"&gt;</strong></span>
  &lt;link href="css/viewport-css.css" rel="stylesheet"&gt;</pre></div></li><li class="listitem">Resave the file and then refresh the screen in Chrome. If all is well, we can now see the <a id="id39" class="indexterm"/>results of our change with the text correctly sized and no overlap:<div class="mediaobject"><img src="graphics/6968OT_01_05.jpg" alt="Using CSS to set our viewport"/></div></li></ol></div><p>In this example, we've used <code class="literal">&lt;meta name="viewport" content="width=360"&gt;</code>, which sets a very specific width of 360 px. For a more general setting where no specific width is used <code class="literal">&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</code> can be set instead.</p><p>When using media queries, we can always set the size of elements within our query. It's worth setting <a id="id40" class="indexterm"/>the viewport too so that items don't disappear off the page <a id="id41" class="indexterm"/>when resizing the browser window.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>For a good discussion on using the viewport <code class="literal">meta</code> tag, it is worth checking out an article by Paul Underwood, which is available at <a class="ulink" href="http://www.paulund.co.uk/understanding-the-viewport-meta-tag">http://www.paulund.co.uk/understanding-the-viewport-meta-tag</a>.</p></div></div></div><div class="section" title="Getting the viewport using JavaScript"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>Getting the viewport using JavaScript</h2></div></div></div><p>The <a id="id42" class="indexterm"/>alternative to using the CSS <code class="literal">&lt;meta viewport&gt;</code> tag is to use JavaScript (or we could equally use jQuery). In this instance, we can work out what the values are and use these as a basis for our design, rather than simply set <a id="id43" class="indexterm"/>specific sizes as we did in the previous example.</p><p>Let's dig in and take a look to see how we can get our sizes:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll begin with adding the following markup to a new file, saving it as <code class="literal">viewport-js.html</code> in the root of our project folder:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8" /&gt;
  &lt;title&gt;Demo - What's my Viewport Size?&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" /&gt;
  &lt;link rel="stylesheet" href="css/viewport-js.css"&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="c"&gt;
  &lt;p&gt;Your viewport size:&lt;/p&gt;
  &lt;p id="ua"&gt;&lt;/p&gt;
  &lt;/div&gt;
  &lt;div id="vp"&gt;&lt;span id="w"&gt;&lt;/span&gt;&lt;span id="h"&gt;&lt;/span&gt;&lt;/div&gt;
  &lt;script src="js/viewport-js.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></li><li class="listitem">Next, add <a id="id44" class="indexterm"/>this JavaScript to a new <a id="id45" class="indexterm"/>file, saving it as <code class="literal">viewport-js.js</code> in the <code class="literal">js</code> subfolder in the project folder:<div class="informalexample"><pre class="programlisting">(function() {
  if (typeof(document.documentElement.clientWidth) != 'undefined') {
    var $w = document.getElementById('w'),
          $h = document.getElementById('h'),
       $ua = document.getElementById('ua');
  $w.innerHTML = document.documentElement.clientWidth;
  $h.innerHTML = ' &amp;times; ' + document.documentElement.clientHeight;
  window.onresize = function(event) {
    $w.innerHTML = document.documentElement.clientWidth;
    $h.innerHTML = ' &amp;times; ' + document.documentElement.clientHeight;
  };
    $ua.innerHTML = navigator.userAgent;
  }
})();</pre></div></li><li class="listitem">We need <a id="id46" class="indexterm"/>some basic styling, so go ahead and <a id="id47" class="indexterm"/>add the following to <code class="literal">viewport-js.css</code>, saving it to the <code class="literal">css</code> subfolder in our project folder:<div class="informalexample"><pre class="programlisting">html, body { border: 0; margin: 0; padding: 0; font-family: 'Helvetica',courier new; font-weight: bold; }
#vp { background: #e00; color: #fff; font-size: 3.125em; line-height: normal; padding: 3px; text-align: center; }
#h { color: #ff8080; }
#c { font-size: 1.25em; line-height: 1.5em; padding: 0 1em; }</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div></li><li class="listitem">If we preview the results in a browser, we'll see the size of our available viewport area displayed along with the current user agent string being used by our browser, as shown in this screenshot:<div class="mediaobject"><img src="graphics/6968OT_01_06.jpg" alt="Getting the viewport using JavaScript"/></div></li></ol></div><p>There are plenty of good examples online to show us how to determine the available viewport area; we've used a modified version of one produced by Matt Stow at <a class="ulink" href="http://viewportsizes.com/">http://viewportsizes.com/</a>. In it, he also has an extensive list of viewport sizes for a variety of devices. We could of course use something like Modernizr to perform the same function, but this <a id="id48" class="indexterm"/>is at the expense of depending on an <a id="id49" class="indexterm"/>outside solution; our example here is written in vanilla JavaScript, removing any dependencies and keeping the code concise.</p></div></div>
<div class="section" title="Working out media queries"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Working out media queries</h1></div></div></div><p>Now that we've <a id="id50" class="indexterm"/>worked out how much space we have to work with, we can now work out what happens to elements when we hit the limits of our available space. This is particularly relevant if we want to display hi-res images for example. After all, we don't want to show a high quality image if it chokes the available bandwidth of our device!</p><p>Let's take a look at how we can use media queries to switch between lo-res and hi-res versions of a single image:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We will start with setting up the markup we need for our demo. From the code bundle for this book, extract a copy of <code class="literal">min-resolution.html</code> and save it to the root of the project folder.</li><li class="listitem">In a new file, add these style rules and save it as <code class="literal">min-resolution.css</code> in the <code class="literal">css</code> subfolder of our project folder. This is where the magic happens, that is, switching from the lo-res to hi-res versions of our image:<div class="informalexample"><pre class="programlisting">#orchid { background-image: url('../img/mothorchid.png'); height: 24.31rem; width: 36.5rem; } 

@media (min-resolution: 120dpi) { 
  #orchid { background-image: url('../img/mothorchid@2x.png'); 
    height: 24.31rem; width: 36.5rem; } 
}</pre></div></li><li class="listitem">From the code download that accompanies this book, extract and save copies of <code class="literal">mothorchid.png</code> and <code class="literal">mothorchid@2x.png</code> into the <code class="literal">img</code> subfolder of our project folder.</li><li class="listitem">If we preview the <a id="id51" class="indexterm"/>results of our work, we will first see the standard resolution image <code class="literal">mothorchid.png</code>.<div class="mediaobject"><img src="graphics/6968OT_01_07.jpg" alt="Working out media queries"/></div></li><li class="listitem">However, if we resize the image by zooming in to at least 133 percent, we will see it <a id="id52" class="indexterm"/>switch to its hi-res equivalent.<div class="mediaobject"><img src="graphics/6968OT_01_08.jpg" alt="Working out media queries"/></div></li><li class="listitem">Click on the <span class="strong"><strong>–</strong></span> button to reset back to 100 percent and we will see the image revert back to the standard resolution version.</li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>
<span class="strong"><strong>Using Google Chrome?</strong></span>
</p><p>We can achieve the same effect using Chrome's Developer Toolbar. Press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>I</em></span> to display it and then click on the drawer icon. Now, switch to the <span class="strong"><strong>Screen</strong></span> tab and change the Device pixel ratio setting from <code class="literal">1</code> to <code class="literal">2</code> to show the hi-res image. For more details, please visit <a class="ulink" href="https://developer.chrome.com/devtools/docs/device-mode">https://developer.chrome.com/devtools/docs/device-mode</a>.</p></div></div><p>At this point, we can use this trick to display any hi-res image we need; the key is to ensure we have two images, one of a standard resolution, while the other is of a higher quality. A small word of note though—if you spend any time researching different types of media queries, then you <a id="id53" class="indexterm"/>may come across something akin to these lines of code:</p><div class="informalexample"><pre class="programlisting">@media (-webkit-min-device-pixel-ratio: 1.25),
(min-resolution: 120dpi){ 
    /* Retina-specific stuff here */
}</pre></div><p>While still perfectly usable, the initial <code class="literal">–webkit-min-device-pixel-ratio</code> setting has been deprecated in favor of min-resolution; there is no need to use it unless you have to cater to really old browsers!</p><p>Now, we could easily use CSS queries in all of our projects, but there may still be occasions where standard queries might not work. A good example is for a navigation that behaves differently at different sizes. Fortunately, there is a solution for this—we can achieve a similar effect <a id="id54" class="indexterm"/>using the <code class="literal">breakpoints.js</code> library. Let's delve in now and take a look.</p></div>
<div class="section" title="Using pure JS to determine page breakpoints"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>Using pure JS to determine page breakpoints</h1></div></div></div><p>So far, we've <a id="id55" class="indexterm"/>worked mainly with modern browsers. These handle media queries effectively, allowing us to display the right image at the <a id="id56" class="indexterm"/>right time. What if we had to support old IE browsers, for example, that can't handle media queries without some form of help? No problem—enter <code class="literal">breakpoints.js</code>, one of the many JavaScript/jQuery libraries available to help us mimic media queries. I feel an exercise coming on, so let's make a start building an example to see how it works:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll begin with setting up our markup for the demo. This contains some simple textboxes set to show in a group. For this, we need to extract copies of <code class="literal">breakpoints.html</code> and <code class="literal">breakpoints.css</code> from the code download that accompanies this book. Save them both into the project folder: the HTML file at the root and the CSS file within the <code class="literal">css</code> subfolder.</li><li class="listitem">We need a copy of jQuery 2.x—there should already be one in our project folder from <a id="id57" class="indexterm"/>earlier demos; if not, extract a copy from the code download that accompanies this book or from <a class="ulink" href="http://code.jquery.com">http://code.jquery.com</a>.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>Although <code class="literal">breakpoints.js</code> is a few years old, I've tested it with jQuery 2.1.1 with no noticeable issues seen.</p></div></div></li><li class="listitem">Next comes the all important <code class="literal">breakpoints.js</code> library. Go ahead and extract a copy from the <a id="id58" class="indexterm"/>code download that accompanies this book and save it to the <code class="literal">js</code> subfolder of our project folder. Newer versions will be available at <a class="ulink" href="http://xoxco.com/projects/code/breakpoints/">http://xoxco.com/projects/code/breakpoints/</a>.</li><li class="listitem">We need to add the call to initialize our breakpoints, so go ahead and add this <a id="id59" class="indexterm"/>code in between the empty <code class="literal">&lt;script&gt;</code> tags:<div class="informalexample"><pre class="programlisting">  $(function () {
    $.breakpoints({
      '.article': {
        'small': [0, 320],
        'medium': [320, 480],
        'large': [480, null]
      }
    });
  });</pre></div></li><li class="listitem">Save your work. If all is well, we should see these three boxes when previewing our work in a browser session:<div class="mediaobject"><img src="graphics/6968OT_01_09.jpg" alt="Using pure JS to determine page breakpoints"/></div></li></ol></div><p>At this point, try <a id="id60" class="indexterm"/>resizing the browser window. Notice how <a id="id61" class="indexterm"/>each of the text boxes resize. We're using image placeholders from the Placehold.it service at <a class="ulink" href="http://placehold.it/">http://placehold.it/</a>; these automatically resize in the same manner.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>There is a <a id="id62" class="indexterm"/>working example of this exercise available on the code download for this book—extract <code class="literal">breakpoints-finished.html</code> and <code class="literal">breakpoints-finished.css</code>, along with jQuery and <code class="literal">breakpoints.js</code>, then rename the HTML and CSS files to <code class="literal">breakpoints.html</code> and <code class="literal">breakpoints.css</code> to view the demo. You will need to store them in the appropriate subfolder of our project folder for them to work correctly.</p></div></div><p>But hold on! A closer look at the CSS shows no media queries. This is the beauty of <code class="literal">breakpoints.js</code>; it allows us to replicate media queries for those browsers that don't support them natively. Sure, it's a little extra overhead; we can get around this using conditional comments (or Modernizr), so the overhead only appears when needed.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>There are other examples available online that you may prefer to use. Take a look at <a class="ulink" href="http://www.responsivejs.com">http://www.responsivejs.com</a> or search through GitHub to find alternatives.</p></div></div><p>Let's move forward and take a look at a different method of switching images; so far we've used media queries to handle which image should be displayed. However, we're not limited to using them. We can use an alternative method in the form of source shuffling.</p><p>Source <a id="id63" class="indexterm"/>shuffling uses both jQuery and CSS—if JavaScript is disabled, then CSS media queries will kick in and perform a similar function instead. Let's dig into an example to see how it works and why this could potentially provide <a id="id64" class="indexterm"/>the best of both solutions to us.</p></div>
<div class="section" title="Using data tags to allow bandwidth constraints"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Using data tags to allow bandwidth constraints</h1></div></div></div><p>The title <a id="id65" class="indexterm"/>of this exercise is a real mouthful, but serves to highlight an interesting experiment: "What if we could use data tags to switch images?"</p><p>The immediate benefit of source shuffling is that it keeps CSS media queries out of the HTML <a id="id66" class="indexterm"/>markup (to see what I mean, take a look at the HTML code used in <span class="emphasis"><em>Working with the &lt;picture&gt; tags</em></span> in the next section.)</p><p>It's an interesting concept and one you may want to consider using; to see how it works, we'll use an adapted version of an example created by the UX designer Jordan Moore. This uses JavaScript-based Conditional CSS library by Jeremy Keith to great effect. To see what I mean, let's get going on a demo to see how it works:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Our journey through this demo starts with setting up the markup needed. In a new file, add the following and save it as <code class="literal">datatags.html</code> in the root of our project area:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Responsive Images using data- tags - Demo&lt;/title&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
  &lt;link rel="stylesheet" href="css/datatags.css"&gt;
  &lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/onmediaquery.min.js"&gt;&lt;/script&gt;
  &lt;script src="js/datatags.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;img class="thumbnail" src="img/small.jpg" data-medium="img/ medium.jpg" data-large="img/large.jpg" alt="Responsive images example"&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></div></li><li class="listitem">We now need a handful of accompanying files. From the code bundle, extract <code class="literal">small.jpg</code>, <code class="literal">medium.jpg</code>, and <code class="literal">large.jpg</code> and save these to the <code class="literal">img</code> subfolder in our project folder.</li><li class="listitem">Next <a id="id67" class="indexterm"/>comes the three JavaScript files that we need: <code class="literal">jquery.min.js</code>, <code class="literal">onmediaquery.min.js</code>, and <code class="literal">datatags.js</code> should be extracted from the code download <a id="id68" class="indexterm"/>and saved into the <code class="literal">js</code> subfolder of our project area.</li><li class="listitem">Finally, we need some styling. In a new file, add the following and save it as <code class="literal">datatags.css</code> in our <code class="literal">css</code> subfolder:<div class="informalexample"><pre class="programlisting">img { max-width: 100%; }
body:after { content: "global"; display: none; }

@media screen and (min-width: 35em) {
  body:after { content: "tablet"; display: none; }
}

@media screen and (min-width: 56em) {
  body:after { content: "desktop"; display: none; }
}</pre></div></li><li class="listitem">We're all set. If all is well, we should see our small image appear first followed immediately by either of the large ones, depending on the size of our browser window.</li></ol></div><p>The key to <a id="id69" class="indexterm"/>note in this demo is that we will only see the <code class="literal">small.jpg</code> image on mobile devices where the viewport is already smaller. On larger devices and desktops, either the <code class="literal">medium.jpg</code> or <code class="literal">large.jpg</code> images will <a id="id70" class="indexterm"/>be shown instead as dictated by the media query in effect.</p></div>
<div class="section" title="Working with the &lt;picture&gt; tags"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec18"/>Working with the &lt;picture&gt; tags</h1></div></div></div><p>When working <a id="id71" class="indexterm"/>in responsive design, we frequently have to provide different images and use a series of media queries to display the right ones at the appropriate time. This works fine, but is a little labor intensive. Instead, we can use the upcoming <code class="literal">&lt;picture&gt;</code> tag to produce a neater effect.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>Support for the <code class="literal">&lt;picture&gt;</code> tag is still somewhat early; we have to use a polyfill to provide support for the tag for some browsers. For more details, it's worth checking the <a id="id72" class="indexterm"/>CanIUse.com site at <a class="ulink" href="http://caniuse.com/#feat=picture">http://caniuse.com/#feat=picture</a>.</p></div></div><p>Let's dive in and take a look at how we can use the tag using these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll start, as always, with setting up the markup for our demo. From the code download that accompanies this book, extract copies of the <code class="literal">picturefill.html</code>, <code class="literal">picturefill.css</code>, and <code class="literal">picturefill.js</code> files; save these into the root, <code class="literal">css</code>, and <code class="literal">js</code> subfolders of our project area, respectively.</li><li class="listitem">In the code download, there are three images we also need: <code class="literal">small.jpg</code>, <code class="literal">medium.jpg</code>, and <code class="literal">large.jpg</code>; these need to go into the <code class="literal">img</code> subfolder as well.</li></ol></div><p>Now, we have our demo set up. Next, try resizing the browser window smaller or larger. Notice how the two images change, albeit at different response points. The key to this is the use of the <code class="literal">picturefill.js</code> polyfill created by Scott Jehl. This aims to replicate the functionality of <code class="literal">&lt;picture&gt;</code> until such time as the browser supports it natively and we can remove the fall back.</p><p>The library is called using this script block—<code class="literal">document.createElement</code> is used to create a dummy <code class="literal">picture</code> fallback element, as it doesn't exist yet at this point:</p><div class="informalexample"><pre class="programlisting">  &lt;script&gt;
    document.createElement( "picture" );
  &lt;/script&gt;
  &lt;script async="true" src="js/picturefill.js"&gt;&lt;/script&gt;</pre></div><p>We then provide the fallback code as follows:</p><div class="informalexample"><pre class="programlisting">  &lt;p&gt;Here's how that renders in the browser. Feel free to resize to see it change.&lt;/p&gt;
  &lt;img sizes="(min-width: 20em) 80vw, 100vw" srcset="img/small.jpg 375w, img/medium.jpg 480w, img/large.jpg 768w" alt="A random image"&gt;</pre></div><p>This is followed by the native &lt;picture&gt; element, which will be supported by Firefox, Opera, and Chrome within the next few versions of each browser:</p><div class="informalexample"><pre class="programlisting">  &lt;picture&gt;
    &lt;source srcset="img/large.jpg" media="(min-width: 768px)"&gt;
    &lt;source srcset="img/medium.jpg" media="(min-width: 480px)"&gt;
    &lt;img srcset="img/small.jpg" media="(min-width: 375px)"&gt;
  &lt;/picture&gt;</pre></div><p>It's worth getting to <a id="id73" class="indexterm"/>know the <code class="literal">&lt;picture&gt;</code> element. While it means that we have to have our CSS media queries in-line, it produces a cleaner result as we don't need to use individual media queries in a separate style sheet.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>Rather than using plain PNG or JPG images, you may like to look at using WebP images instead. They are technically similar but provide a better compression rate. You may need to get additional support added to use them in applications such as <a id="id74" class="indexterm"/>GIMP (visit <a class="ulink" href="http://registry.gimp.org/node/25874">http://registry.gimp.org/node/25874</a>).</p></div></div><div class="section" title="Maintaining the &lt;picture&gt; tag in our code"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>Maintaining the &lt;picture&gt; tag in our code</h2></div></div></div><p>A small word <a id="id75" class="indexterm"/>of warning: the <code class="literal">&lt;picture&gt;</code> tag is still very new, so expect there to be changes to the overall design before it is finalized. It may raise some important questions about whether using it is right for your needs and how it should be maintained within your code; for example, are you happy to use it, but accept that not every browser might support it yet? Are your needs such that you can't use it yet, but can live with using a polyfill as an interim measure?</p><p>If you do decide to use it, it will require careful planning in terms of implementing it. Thankfully, Scott Jehl's implementation (as used in this chapter), is close to the intended final version of <code class="literal">&lt;picture&gt;</code>; this should make the switchover relatively painless.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>To get an up-to-date picture (pun intended!) of the latest state of play with the <code class="literal">&lt;picture&gt;</code> tag and its use for responsive images, it's worth taking a look at the Responsive Image <a id="id76" class="indexterm"/>Community Group's site at <a class="ulink" href="http://responsiveimages.org/">http://responsiveimages.org/</a>.</p></div></div><p>In the last exercise, we mentioned some different formats and that something similar to WebP is a better alternative; we can do even better by using SVG, when working responsively. How? Let me reveal all with a look at using it for improved scalability.</p></div></div>
<div class="section" title="Working with the SVG image format for scalability"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec19"/>Working with the SVG image format for scalability</h1></div></div></div><p>If you <a id="id77" class="indexterm"/>have spent any time working with <a id="id78" class="indexterm"/>media in a responsive capacity, no doubt you will find that some image formats don't resize well. To get around it, it may be necessary to provide several different versions of our image and set the code to pick the right one at the appropriate point.</p><p>Do we want to be doing that all the time? Somehow I don't think so. It's a real pain to produce all those different versions! There's a better way to achieve the same result if we switch to using the vector-based SVG format, which will resize smoothly without loss of quality. Let's delve into an example to see how it works:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll start with preparing the images that we will use for the purposes of this demo. We'll use the dark modern LCD display SVG image that is available from the <a id="id79" class="indexterm"/>XOO.me website at <a class="ulink" href="http://xoo.me/template/details/12636-dark-modern-lcd-display-vector">http://xoo.me/template/details/12636-dark-modern-lcd-display-vector</a>. If you prefer to use an alternative, then please alter the code accordingly; we will need PNG and SVG versions of the same image.</li><li class="listitem">Add this code to a new file and save it as <code class="literal">svgfallback.html</code> in the root of our project folder:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;link rel="stylesheet" href="css/svgfallback.css"&gt;
&lt;/head&gt;
&lt;body&gt;
  This is an image displayed using SVG, with PNG fallback:
  &lt;br&gt;
  &lt;div id="lcd"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></li><li class="listitem">Next, add the following CSS styles to a new file and save it as <code class="literal">svgfallback.css</code> in the <code class="literal">css</code> subfolder of our project folder:<div class="informalexample"><pre class="programlisting">#lcd { background: url('../img/lcd.png');
  background-image: url('../img/lcd.svg'), none;
  width: 576px; height: 383px; background-repeat: no-repeat; }</pre></div></li><li class="listitem">Let's see what happens when we preview the results in most browsers; it will show the SVG image of our LCD monitor. Let's first look at the source code of our page in a DOM inspector where we can see both PNG and SVG ticked as <a id="id80" class="indexterm"/>shown in this screenshot; the latter takes precedence:<div class="mediaobject"><img src="graphics/6968OT_01_10.jpg" alt="Working with the SVG image format for scalability"/></div></li><li class="listitem">To prove <a id="id81" class="indexterm"/>it works, the following is the SVG image in all its glory:<div class="mediaobject"><img src="graphics/6968OT_01_11.jpg" alt="Working with the SVG image format for scalability"/></div></li><li class="listitem">To force our demo to display the PNG fallback, we need to emulate a browser that doesn't support SVG images natively; IE8 is a perfect candidate for this. I <a id="id82" class="indexterm"/>recommend using a recent version of IE, such as 9 or 10. We can use its Emulation mode to force it to display in IE8 mode, and therefore choose the PNG image instead:<div class="mediaobject"><img src="graphics/6968OT_01_12.jpg" alt="Working with the SVG image format for scalability"/></div></li></ol></div><p>The beauty of using SVG is that we can actually edit the content of the image using a text editor; SVG images are after all just plain XML files! SVG images are great for several reasons:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">They are <a id="id83" class="indexterm"/>small file sizes that compress well</li><li class="listitem" style="list-style-type: disc">They scale to any size without losing clarity (except very tiny)</li><li class="listitem" style="list-style-type: disc">They look great on retina display</li><li class="listitem" style="list-style-type: disc">They design control like interactivity and filters</li></ul></div><p>Using standard images such as PNGs or JPGs will work, but they won't resize properly beyond their native resolution; instead, we are likely to need several versions of the same image in order to view them properly. It's worth spending time getting to know the SVG format. There is a <a id="id84" class="indexterm"/>useful article by Nick Salloum at <a class="ulink" href="http://callmenick.com/2014/04/02/svg-fallback-with-png/">http://callmenick.com/2014/04/02/svg-fallback-with-png/</a>, which extols different mechanisms we can use to provide fallback for SVG images.</p><p>If you really want to <a id="id85" class="indexterm"/>get into editing SVG images, take a look at <a class="ulink" href="http://css-tricks.com/using-svg/">http://css-tricks.com/using-svg/</a>. It's a great article by Chris Coyier that shows us how we can edit the content to really alter its appearance.</p></div>
<div class="section" title="Using image icons for scalability"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec20"/>Using image icons for scalability</h1></div></div></div><p>One of the <a id="id86" class="indexterm"/>major problems we have when creating responsive content is the use of icons: their bitmap format doesn't scale well when resizing them. This is often the same for icon sprites; for example, if you resize the battery icons demo <a id="id87" class="indexterm"/>from earlier in the chapter, then you will soon notice how pixelated it becomes when anti-aliasing kicks in!</p><p>To get around this, designers may simply drop the use of icons; the alternative is to replace them with <a id="id88" class="indexterm"/>vector-based web fonts, such as the Font Awesome icons, available at <a class="ulink" href="http://fortawesome.github.io/Font-Awesome/">http://fortawesome.github.io/Font-Awesome/</a>. There is an excellent article online by Jason Cranford Teague at <a class="ulink" href="http://webstandardssherpa.com/reviews/responsive-webfont-icons">http://webstandardssherpa.com/reviews/responsive-webfont-icons</a>, extolling the benefits of using them in the main due to their scalability with no loss of fidelity.</p><p>To see how they work in action, we're going to use some social media icons from Entypo, created by Daniel Bruce and available at <a class="ulink" href="http://www.entypo.com">http://www.entypo.com</a>. For this tutorial, we're going to use a simplified version of an example created by Teague, which uses a number of icons. You can see the original article at <a class="ulink" href="http://webstandardssherpa.com/reviews/responsive-webfont-icons">http://webstandardssherpa.com/reviews/responsive-webfont-icons</a>. </p><p>Perform these steps for this tutorial:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Let's start by extracting a copy of <code class="literal">webicons.html</code> and <code class="literal">webicons.css</code> from the code download that accompanies this book. Instead of building this up (particularly as it uses a fair bit of CSS), we're going to take a look at some of the key concepts in use. Store the <code class="literal">webicons.css</code> file in the <code class="literal">css</code> subfolder of our project folder, while the <code class="literal">webicons.html</code> file should be stored at the root.</li><li class="listitem">If we preview the <a id="id89" class="indexterm"/>file in a browser window, we will see a range of icons displayed; the screenshot shows them resized in Firefox at 67 percent:<div class="mediaobject"><img src="graphics/6968OT_01_13.jpg" alt="Using image icons for scalability"/></div></li><li class="listitem">Try zooming in and out. Notice how the icons increase and decrease in size without any apparent loss of quality? We've used web fonts, in place of standard images; this principle works beautifully for simple icons such as the logos used in our example. The key to this is the use of the <code class="literal">rem</code> sizes or root <code class="literal">em</code>. This sizes <a id="id90" class="indexterm"/>each character to the font size of the HTML element not the parent, which is used by <code class="literal">em</code>.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip07"/>Tip</h3><p>There's a useful article by Jonathan Snook that explains how <code class="literal">rem</code> and <code class="literal">em</code> work, available at <a class="ulink" href="http://snook.ca/archives/html_and_css/font-size-with-rem">http://snook.ca/archives/html_and_css/font-size-with-rem</a>.</p></div></div></li><li class="listitem">Notice the <a id="id91" class="indexterm"/>use of the format set for each icon? This is the <span class="strong"><strong>Unicode Private Use</strong></span> area of the font; instead of using <code class="literal">t</code> from the font (which represents the Twitter icon), we can use this private use area. It achieves the same result. The only difference being that the letter <code class="literal">t</code> is not displayed when using the private area.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>For more <a id="id92" class="indexterm"/>information about Unicode Private Use Areas, take a look at the article on Wikipedia at <a class="ulink" href="http://en.wikipedia.org/wiki/Private_Use_Areas">http://en.wikipedia.org/wiki/Private_Use_Areas</a>.</p></div></div></li></ol></div><p>Let's move on and take <a id="id93" class="indexterm"/>a look at a couple of examples of real-world <a id="id94" class="indexterm"/>applications of responsive design, beginning with <span class="emphasis"><em>Building a responsive carousel</em></span>.</p></div>
<div class="section" title="Building a responsive carousel"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec21"/>Building a responsive carousel</h1></div></div></div><p>So far we've <a id="id95" class="indexterm"/>covered a lot of different techniques to help us produce responsive content. Most of it has been simple examples in a development context. It's time to take a look at a couple of examples of real-world applications where responsive functionality has been put to good use. Our first example is in the form of a responsive carousel. There are dozens of example libraries online that can be used to create one, so there is no need to build from scratch!</p><p>Let's take a look at one of my favorites—<code class="literal">ResponsiveSlides.js</code>; it's a simple library that provides a useful solution, but doesn't try to achieve everything. We'll borrow one of their examples to see how it works.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">As always, we need to start somewhere. Let's begin by downloading the <code class="literal">ResponsiveSlides</code> <a id="id96" class="indexterm"/>library from <a class="ulink" href="http://responsiveslides.com/">http://responsiveslides.com/</a>; the current version is 1.5.4 at the time of writing. Save this in the <code class="literal">js</code> subfolder of our project folder.</li><li class="listitem">We also need the styling file for <code class="literal">ResponsiveSlides</code>, along with a copy of the jQuery library. Extract a copy of <code class="literal">carousel.css</code>, saving it in the <code class="literal">css</code> subfolder of our project folder; then do the same for jQuery in the <code class="literal">js</code> subfolder.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>The <code class="literal">ResponsiveSlides</code> package comes with jQuery 1.8.3; I've tested it with Version 2.1.1 of jQuery with no apparent ill effects.</p></div></div></li><li class="listitem">Next, extract a copy of <code class="literal">carousel.html</code> from the code download that accompanies this book; add the following code between the empty <code class="literal">&lt;script&gt;</code> tags immediately below the link to the <code class="literal">responsiveslides.js</code> library:<div class="informalexample"><pre class="programlisting">&lt;script&gt;
  $(function () {
    $("#slides1").responsiveSlides({ auto: false, pagination: true, nav: true, fade: 500, maxwidth: 800
    });
  });
&lt;script&gt;</pre></div></li><li class="listitem">Save the file. If we <a id="id97" class="indexterm"/>preview the results in a browser, we will see our carousel appear.<div class="mediaobject"><img src="graphics/6968OT_01_14.jpg" alt="Building a responsive carousel"/></div></li><li class="listitem">Try resizing the browser window now. We should see the carousel reduce in size but continue to scroll through the images with no loss of quality.</li></ol></div><p>There are plenty of examples of responsive carousels available online—two such examples are WOW <a id="id98" class="indexterm"/>Slider at <a class="ulink" href="http://wowslider.com/">http://wowslider.com/</a>, with an example of what is possible at <a class="ulink" href="http://www.wowslider.com/responsive-image-gallery-glass-collage.html">http://www.wowslider.com/responsive-image-gallery-glass-collage.html</a>, Owl Carousel (<a class="ulink" href="http://www.owlgraphic.com/owlcarousel">http://www.owlgraphic.com/owlcarousel</a>) and <a id="id99" class="indexterm"/>BXSlider, available at <a class="ulink" href="http://bxslider.com/">http://bxslider.com/</a>. It is a matter of trying a selection and choosing the one that suits your requirements.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note13"/>Note</h3><p>There is a prebuilt working example on the code download that accompanies this book. Extract <a id="id100" class="indexterm"/>copies of <code class="literal">carousel-finished.html</code> and <code class="literal">carousel-finished.css</code>, then rename them to <code class="literal">carousel.html</code> and <code class="literal">carousel.css</code>. You will need to extract the accompanying libraries, as outlined in this exercise, for it to operate correctly.</p></div></div></div>
<div class="section" title="Creating responsive maps using Google Maps"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec22"/>Creating responsive maps using Google Maps</h1></div></div></div><p>In the <a id="id101" class="indexterm"/>second of our two real-world examples, we're going to look at making a responsive map using Google Maps. Responsive <a id="id102" class="indexterm"/>maps, I hear you ask? Surely this should come automatically, right? Well no, it doesn't, which makes its use a little awkward on mobile devices. Fortunately, we can easily fix this; the great thing about it is that it only requires a little additional CSS:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Let's make a start by browsing to <a class="ulink" href="http://maps.google.com">http://maps.google.com</a>, then entering the zip code of our chosen location. In this instance, I will use the UK office of Packt Publishing, which is B3 2PB.</li><li class="listitem">Click on the cog, then select <span class="strong"><strong>Share and embed map</strong></span>:<div class="mediaobject"><img src="graphics/6968OT_01_15.jpg" alt="Creating responsive maps using Google Maps"/></div></li><li class="listitem">In the dialog box that appears, switch to the <span class="strong"><strong>Embed map</strong></span> tab, then copy the contents of the text field starting with <code class="literal">&lt;iframe src=…</code>.</li><li class="listitem">In a copy of the code download that accompanies this book, extract a copy of <code class="literal">googlemaps.html</code> in your favorite text editor and add the <code class="literal">&lt;iframe&gt;</code> code in between the <code class="literal">google-maps div</code> tags.</li><li class="listitem">Next, add this <a id="id103" class="indexterm"/>CSS styling to a new file and save it as <code class="literal">googlemaps.css</code>:<div class="informalexample"><pre class="programlisting">#container { margin: 0 auto; padding: 5px; max-width: 40rem; }
.google-maps { position: relative; padding-bottom: 60%; height: 0; overflow: hidden; }
.google-maps iframe { position: absolute; top: 0; left: 0; width: 100% !important; height: 100% !important; }   </pre></div></li></ol></div><p>If all is well, we will see a Google Maps image of Birmingham with our office marked accordingly:</p><div class="mediaobject"><img src="graphics/6968OT_01_16.jpg" alt="Creating responsive maps using Google Maps"/></div><p>At this point, try resizing the browser window. You will see that the map resizes automatically; the <a id="id104" class="indexterm"/>CSS styling that we've added <a id="id105" class="indexterm"/>has overridden the standard styles used within Google Maps to make our map responsive and accessible from any device we care to use.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec23"/>Summary</h1></div></div></div><p>Wow! We've certainly covered a lot over the last few pages! Let's take a moment to recap and let what we've learned sink in.</p><p>We began with a look at creating basic fluid images, which are a key to responsive design and should form the mainstay for any responsively designed site. We then covered some key points in the form of what image formats to use, as well as whether we need to use any vendor prefixes in our code. Next up came a discussion on some useful tips to cater to mobile devices. We saw how many are common sense, but particularly apply when designing for mobile devices.</p><p>Our first coding example came in the form of a look at catering to high-definition or retina images; we then moved on to examining how we can also use sprites to add responsive media to our projects. We then moved on to looking at sizing our available viewport space using both jQuery and CSS; these we can then use to determine what our media queries should look like. We also covered off how you can use JavaScript to define media queries as well, in the event we need to provide fallback support in our sites.</p><p>Moving on, next up we covered a couple of examples of how to switch images responsively—the first using data tags and the second using the upcoming <code class="literal">&lt;picture&gt;</code> tags. We also looked at a trick whereby we can provide two images at the same time but rely on the browser to pick which one it can support. We finished our look at using images in the form of a peek at how we can use web icons to serve content responsively and that these scale beautifully without any loss of quality. We then finished of the chapter with a look at two real-world examples in the form of building a responsive carousel and creating responsive maps.</p><p>In the next chapter, we'll take a look at the other major element of media content and how to add videos responsively to our sites.</p></div></body></html>