<html><head></head><body><div><div><div><div><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Tipping the Scales</h1></div></div></div><p>In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Using continuous scales</li><li class="listitem" style="list-style-type: disc">Using the time scale</li><li class="listitem" style="list-style-type: disc">Using the ordinal scale</li><li class="listitem" style="list-style-type: disc">Interpolating a string</li><li class="listitem" style="list-style-type: disc">Interpolating colors</li><li class="listitem" style="list-style-type: disc">Interpolating compound objects</li></ul></div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec28"/>Introduction</h1></div></div></div><p>As a data visualization developer, one of the key tasks that you will need to perform over and over is to map values from your data domain to your visual domain; for example, mapping your most recent purchase of a fancy tablet of $453.00 to a 653-px-long bar, and your last night's pub bill of $23.59 to a 34-px-long bar. In a sense, this is what data visualization is all about, mapping data elements to their visual metaphor in an efficient and accurate manner. Because this is an absolutely essential task in data visualization and animation (animation will be discussed in <a class="link" href="ch06.html" title="Chapter 6. Transition with Style">Chapter 6</a>, <em>Transition with Style</em>, in detail), D3 provides rich and robust support on this topic, which is the focus of this chapter.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec69"/>What are scales?</h2></div></div></div><p>D3 provides various constructs called <em>scales</em> to help you perform this kind of mapping. A proper understanding of these constructs conceptually is crucial to become an effective visualization developer. This is because scales are used not only to perform the mapping we mentioned previously, but also to serve as fundamental building blocks for many other D3 constructs, such as transition and axes.</p><p>
<em>What are these scales anyway?</em> In short, scales can be thought of as mathematical <em>functions</em>. Mathematical functions differ from functions defined in imperative programming languages, such as JavaScript functions. In mathematics, a function is defined as mapping between two sets:</p><div><blockquote class="blockquote"><p>
<em>Let A and B be nonempty sets. A function f from A to B is an assignment of exactly one element of B to each element of A. We write f(a) = b if b is the unique element of B assigned by the function f to the element a of A.</em>
</p></blockquote></div><div><blockquote class="blockquote"><p>
<em> -Rosen K. H. 2007</em>
</p></blockquote></div><p>Despite the dryness of this definition, you still can not help but notice how nicely it fits the task we need to perform, mapping elements from the data domain to the visual domain.</p><p>Another fundamentally important concept we will need to illustrate here is the <em>domain</em> and <em>range</em> of a given function.</p><div><blockquote class="blockquote"><p>
<em>If f is a function from A to B, we say that A is the domain of f and B is the codomain of f. If f(a) = b, we say that b is the image of a and a is a preimage of b. The range, or image, of f is the set of all images of elements of A. Also, if f is a function from A to B, we say that f maps A to B.</em>
</p></blockquote></div><div><blockquote class="blockquote"><p>
<em>-Rosen K. H. 2007</em>
</p></blockquote></div><p>To help us understand this concept, let's take a look at the following illustration:</p><p>
</p><div><img src="img/image_04_001.jpg" alt="What are scales?"/></div><p>
</p><p>Function f maps A to B</p><p>As we can clearly see now, in the preceding illustration for function <strong>f</strong>, the domain is set <strong>A</strong> and the range is set <strong>B</strong>. Imagine if set <strong>A</strong> represents our data domain and <strong>B</strong> represents the visual domain, then a function <strong>f</strong> defined here is essentially a scale in D3 that maps elements from set <strong>A</strong> to set <strong>B</strong>.</p><div><div><h3 class="title"><a id="note42"/>Note</h3><p>For the mathematically inclined readers, scale functions in data visualization are usually one-to-one, but not <em>onto</em> functions. This is a useful insight to know but not critical to the purpose of this book. Therefore, we will not discuss it further here.</p></div></div><p>Now that we discussed the conceptual definition of scale functions in D3, let's take a look at how it can be used to help us develop our visualization project.</p></div></div></div></div></div>
<div><div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec29"/>Using continuous scales</h1></div></div></div><p>In this recipe, we will examine the most commonly used scales provided by D3: the continuous scales that map a continuous quantitative domain to a continuous range, including linear, power, logarithmic, and time scales.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec70"/>Getting ready</h2></div></div></div><p>Open your local copy of the following file in your web browser:</p><p>
<a class="ulink" href="https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/continuous-scales.html">https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/continuous-scales.html
</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec71"/>How to do it...</h2></div></div></div><p>Let's take a look at the following code example:</p><pre class="programlisting">&lt;div id="linear" class="clear"&gt;&lt;span&gt;n&lt;/span&gt;&lt;/div&gt; 
&lt;div id="linear-capped" class="clear"&gt; 
    &lt;span&gt;1 &amp;lt;= a*n + b &amp;lt;= 20&lt;/span&gt; 
&lt;/div&gt; 
&lt;div id="pow" class="clear"&gt;&lt;span&gt;n^2&lt;/span&gt;&lt;/div&gt; 
&lt;div id="pow-capped" class="clear"&gt; 
    &lt;span&gt;1 &amp;lt;= a*n^2 + b &amp;lt;= 10&lt;/span&gt; 
&lt;/div&gt; 
&lt;div id="log" class="clear"&gt;&lt;span&gt;log(n)&lt;/span&gt;&lt;/div&gt; 
&lt;div id="log-capped" class="clear"&gt; 
    &lt;span&gt;1 &amp;lt;= a*log(n) + b &amp;lt;= 10&lt;/span&gt; 
&lt;/div&gt; 
 
&lt;script type="text/javascript"&gt; 
    var max = 11, data = []; 
    for (var i = 1; i &lt; max; ++i) data.push(i); 
 
    var linear = d3.scaleLinear() // &lt;-A 
        .domain([1, 10]) // &lt;-B 
        .range([1, 10]); // &lt;-C         
    var linearCapped = d3.scaleLinear() 
        .domain([1, 10])         
        .range([1, 20]); // &lt;-D 
         
    var pow = d3.scalePow().exponent(2); // &lt;-E 
    var powCapped = d3.scalePow() // &lt;-F 
        .exponent(2) 
        .domain([1, 10]) 
        .rangeRound([1, 10]); // &lt;-G 
         
    var log = d3.scaleLog(); // &lt;-H 
    var logCapped = d3.scaleLog() // &lt;-I 
        .domain([1, 10]) 
        .rangeRound([1, 10]); 
 
 
    function render(data, scale, selector) { 
        d3.select(selector).selectAll("div") 
                    .data(data) 
                .enter() 
                .append("div") 
                    .classed("cell", true) 
                    .style("display", "inline-block") 
                    .text(function (d) { 
                        return d3.format(".2")(scale(d), 2); 
                    }); 
    } 
 
    render(data, linear, "#linear"); 
    render(data, linearCapped, "#linear-capped"); 
    render(data, pow, "#pow"); 
    render(data, powCapped, "#pow-capped"); 
    render(data, log, "#log"); 
    render(data, logCapped, "#log-capped"); 
&lt;/script&gt; 
</pre><p>The preceding code generates the following output in your browser:</p><p>
</p><div><img src="img/image_04_002.jpg" alt="How to do it..."/></div><p>
</p><p>Quantitative scale output</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec72"/>How it works...</h2></div></div></div><p>In this recipe, we demonstrated some of the most common scales provided by D3.</p><div><div><div><div><h3 class="title"><a id="ch04lvl3sec7"/>Linear scale</h3></div></div></div><p>In the preceding code example, we have our data array filled with integers from <code class="literal">1</code> to <code class="literal">10</code>, as shown by the for loop above line <code class="literal">A</code>. We created a <em>linear scale</em> by calling the <code class="literal">d3.scaleLinear()</code> function. This returns a linear quantitative scale function with the default domain set to <code class="literal">[0, 1]</code> and the default range set to <code class="literal">[0, 1]</code>. Thus, the default scale is essentially the <em>identity function</em> for numbers. Therefore, this default function is not that useful to us, but typically needs to be further customized using its <code class="literal">domain</code> and <code class="literal">range</code> functions on lines <code class="literal">B</code> and <code class="literal">C</code>. In this case, we set them both to <code class="literal">[1, 10]</code>. This scale basically defines the function <em>f(n) = n </em>as shown in the following code snippet:</p><pre class="programlisting">    var linear = d3.scaleLinear() // &lt;-A 
        .domain([1, 10]) // &lt;-B 
        .range([1, 10]); // &lt;-C         
</pre><p>
</p><div><img src="img/image_04_003.jpg" alt="Linear scale"/></div><p>
</p><p>Identity scale</p><p>The second linear scale is a little bit more interesting and illustrates the mapping between the two sets better. On line <code class="literal">D</code>, we set the range as <code class="literal">[1, 20]</code>, which is different from its domain. Hence, now this function essentially represents the following equations:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>f(n) = a * n + b</em></li><li class="listitem" style="list-style-type: disc"><em>1 &lt;= f(n) &lt;= 20</em></li></ul></div><p>This is by far the most common case when using D3 scales because your dataset will be an identical match of your visual set:</p><pre class="programlisting">    var linearCapped = d3.scaleLinear() 
        .domain([1, 10])         
        .range([1, 20]); // &lt;-D 
</pre><p>
</p><div><img src="img/image_04_004.jpg" alt="Linear scale"/></div><p>
</p><p>Linear scale</p><p>In this second scale, D3 will automatically calculate and assign the value of constants <code class="literal">a</code> and <code class="literal">b</code> to satisfy the equation.</p><div><div><h3 class="title"><a id="note43"/>Note</h3><p>Some basic algebraic calculation will tell you that <code class="literal">a</code> is approximately 2.11 and <code class="literal">b</code> is -1.11, as in the previous example.</p></div></div></div><div><div><div><div><h3 class="title"><a id="ch04lvl3sec8"/>Power scale</h3></div></div></div><p>The second scale we created is a <em>power scale</em>. On line <code class="literal">E</code>, we defined a power scale with <code class="literal">exponent</code> of <code class="literal">2</code>. The <code class="literal">d3.scalePow()</code> function returns a default power scale function with its <code class="literal">exponent</code> set as <code class="literal">1</code>. This scale effectively defines the function <em>f(n) = n^2</em>:</p><pre class="programlisting">    var pow = d3.scalePow().exponent(2); // &lt;-E 
</pre><p>
</p><div><img src="img/image_04_005.jpg" alt="Power scale"/></div><p>
</p><p>Simple power scale</p><p>On line <code class="literal">F</code>, a second power scale was defined, this time with a different range set on line <code class="literal">G</code> with rounding; the <code class="literal">rangeRound()</code> function works pretty much the same as the <code class="literal">range()</code> function, which sets the range for a scale. However, the <code class="literal">rangeRound</code> function rounds the output number so that there are no decimal fractions. This is very handy since scales are commonly used to map elements from the data domain to the visual domain. So, the output of a scale is very likely to be a number that describes some visual characteristics, for example, the number of pixels. Avoiding sub-pixel numbers is a useful technique that prevents anti-alias in rendering.</p><p>The second power scale defines the following function, which is demonstrated in the code after the function:</p><p>
<em>f(n) = a*n^2 + b, 1 &lt;= f(n) &lt;= 10</em>
</p><pre class="programlisting">    var powCapped = d3.scalePow() // &lt;-F 
        .exponent(2) 
        .domain([1, 10]) 
        .rangeRound([1, 10]); // &lt;-G 
</pre><p>
</p><div><img src="img/image_04_006.jpg" alt="Power scale"/></div><p>
</p><p>Power scale</p><p>Similar to the linear scale, D3 will automatically find the suitable constants <code class="literal">a</code> and <code class="literal">b</code> to satisfy the constraints defined by <code class="literal">domain</code> and <code class="literal">range</code> on a power scale.</p></div><div><div><div><div><h3 class="title"><a id="ch04lvl3sec9"/>Log scale</h3></div></div></div><p>On line <code class="literal">H</code>, a third kind of quantitative scale was created using the <code class="literal">d3.scaleLog()</code> function. The default log scale has a <code class="literal">base</code> of <code class="literal">10</code>. Line <code class="literal">H</code> essentially defines the following mathematical function <em>f(n) = log(n)</em>, as follows:</p><pre class="programlisting">    var log = d3.scale.log(); // &lt;-H 
</pre><p>
</p><div><img src="img/image_04_007.jpg" alt="Log scale"/></div><p>
</p><p>Simple log scale</p><p>On line <code class="literal">I</code>, we customized the log scale to have a domain of <code class="literal">[1, 10]</code> and a rounded range of <code class="literal">[1, 10]</code>, which defines the following constrained mathematical function <em>f(n) = a*log(n) + b, 1 &lt;= f(n) &lt;= 10</em>.</p><pre class="programlisting">    var logCapped = d3.scaleLog() // &lt;-I 
        .domain([1, 10]) 
        .rangeRound([1, 10]); 
</pre><p>
</p><div><img src="img/image_04_008.jpg" alt="Log scale"/></div><p>
</p><p>Log scale</p></div></div></div></div></div>
<div><div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec30"/>Using the time scale</h1></div></div></div><p>Often, we will need to create visualization on a dataset that has time and date dimensions; therefore, D3 provides a built-in time scale to help perform this type of mapping. In this recipe, we will learn how to use the D3 time scale.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec73"/>Getting ready</h2></div></div></div><p>Open your local copy of the following file in your web browser:</p><p>
<a class="ulink" href="https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/time-scale.html">https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/time-scale.html
</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec74"/>How to do it...</h2></div></div></div><p>First, let's take a look at the following code example:</p><pre class="programlisting">&lt;div id="time" class="clear"&gt; 
    &lt;span&gt;Linear Time Progression&lt;br&gt;&lt;/span&gt; 
    &lt;span&gt;Mapping [01/01/2016, 12/31/2016] to [0, 1200]&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
 
&lt;script type="text/javascript"&gt; 
    var start = new Date(2016, 0, 1), // &lt;-A 
        end = new Date(2016, 11, 31), 
        range = [0, 1200], 
        time = d3.scaleTime().domain([start, end]) // &lt;-B 
            .rangeRound(range), // &lt;-C 
        max = 12, 
        data = []; 
 
    for (var i = 0; i &lt; max; ++i){ // &lt;-D 
        var date = new Date(start.getTime()); 
        date.setMonth(start.getMonth() + i); 
        data.push(date); 
    } 
 
    function render(data, scale, selector) { // &lt;-E 
        d3.select(selector).selectAll("div.fixed-cell") 
                    .data(data) 
                .enter() 
                    .append("div") 
                        .classed("fixed-cell", true) 
                        .style("margin-left", function(d){ // &lt;-F 
                            return scale(d) + "px"; 
                        }) 
                        .html(function (d) { // &lt;-G 
                            var format = d3.timeFormat("%x"); // &lt;-H 
                            return format(d) + "&lt;br&gt;" + scale(d) + "px"; 
                        }); 
    } 
 
    render(data, time, "#time"); 
&lt;/script&gt; 
</pre><p>This recipe generates the following visual output:</p><p>
</p><div><img src="img/image_04_009.jpg" alt="How to do it..."/></div><p>
</p><p>Time scale</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec75"/>How it works...</h2></div></div></div><p>In this recipe, we have a <code class="literal">Date</code> range between January 1, 2016 and December 31, 2016 defined on line <code class="literal">A</code>.</p><pre class="programlisting">var start = new Date(2016, 0, 1), // &lt;-A 
        end = new Date(2016, 11, 31), 
        range = [0, 1200], 
        time = d3.scaleTime().domain([start, end]) // &lt;-B 
            .rangeRound(range), // &lt;-C 
</pre><div><div><h3 class="title"><a id="note44"/>Note</h3><p>The JavaScript <code class="literal">Date</code> object starts its month from <code class="literal">0</code> and day from <code class="literal">1</code>. Therefore, <code class="literal">new Date(2016, 0, 1)</code> will present January 1, 2016, while <code class="literal">new Date(2016, 0, 0)</code> actually will present December 31, 2015.</p></div></div><p>This range was then used to create a D3 <em>time scale</em> on line <code class="literal">B</code> using the <code class="literal">d3.scaleTime</code> function. Similar to other continuous scales, time scale also supports separate <code class="literal">domain</code> and <code class="literal">range</code> definition, which is used to map date- and time-based data points to visual range. In this example, we set the range of the scale to <code class="literal">[0, 900]</code>. This effectively defines a mapping from any date and time value in the time range between January 1, 2016 and December 31, 2016 to a number between 0 and 900.</p><p>With the time scale defined, we can now map any given <code class="literal">Date</code> object by calling the scale function, for example, <code class="literal">time(new Date(2016, 4, 1))</code> will return <code class="literal">395</code>, <code class="literal">time(new Date(2016, 11, 15))</code> will return <code class="literal">1147</code>, and so on.</p><p>In the following code, on line <code class="literal">D</code>, we created our data array that consists of 12 months from January to December in 2013, as shown in the following code snippet:</p><pre class="programlisting">    for (var i = 0; i &lt; max; ++i){ // &lt;-D 
        var date = new Date(start.getTime()); 
        date.setMonth(start.getMonth() + i); 
        data.push(date); 
    } 
</pre><p>Then we created 12 cells that represent each month in a year using the <code class="literal">render</code> function.</p><p>To spread the cells horizontally, line <code class="literal">F</code> performs a mapping from the month to the <code class="literal">margin-left</code> CSS style using the time scale we defined:</p><pre class="programlisting">.style("margin-left", function(d){ // &lt;-F 
    return scale(d) + "px"; 
}) 
</pre><p>Line <code class="literal">G</code> generates the label that demonstrates what the scale-based mapping produces in this example:</p><pre class="programlisting">.html(function (d) { // &lt;-G 
    var format = d3.timeFormat("%x"); // &lt;-H 
    return format(d) + "&lt;br&gt;" + scale(d) + "px"; 
}); 
</pre><p>To generate human-readable strings from a JavaScript <code class="literal">Date</code> object, we used a D3 time formatter on line <code class="literal">H</code>, which is an alias to the <code class="literal">d3.locale.format</code> function. D3 ships with a powerful and flexible time-formatting library as part of locale format libraries, which is extremely useful when dealing with the <code class="literal">Date</code> object.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec76"/>There's more...</h2></div></div></div><p>The following are some of the most useful <code class="literal">d3.locale.format</code> patterns:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">%a</code>: This is the abbreviated weekday name</li><li class="listitem" style="list-style-type: disc"><code class="literal">%A</code>: This is the full weekday name</li><li class="listitem" style="list-style-type: disc"><code class="literal">%b</code>: This is the abbreviated month name</li><li class="listitem" style="list-style-type: disc"><code class="literal">%B</code>: This is the full month name</li><li class="listitem" style="list-style-type: disc"><code class="literal">%d</code>: This is the zero-padded day of the month as a decimal number <code class="literal">[01</code><code class="literal">,31]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%e</code>: This is the space-padded day of the month as a decimal number <code class="literal">[1,31]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%H</code>: This is the hour (24-hour clock) as a decimal number <code class="literal">[00,23]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%I</code>: This is the hour (12-hour clock) as a decimal number <code class="literal">[01,12]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%j</code>: This is the day of the year as a decimal number <code class="literal">[001,366]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%m</code>: This is the month as a decimal number <code class="literal">[01,12]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%M</code>: This is the minute as a decimal number <code class="literal">[00,59]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%L</code>: This is the milliseconds as a decimal number <code class="literal">[000, 999]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%p</code>: This is either AM or PM</li><li class="listitem" style="list-style-type: disc"><code class="literal">%S</code>: This is the time in seconds as a decimal number <code class="literal">[00,61]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%x</code>: This is the date, as <code class="literal">%m/%d/%Y</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%X</code>: This is the time, as <code class="literal">%H:%M:%S</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%y</code>: This is the year without century as a decimal number <code class="literal">[00,99]</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">%Y</code>: This is the year with century as a decimal number</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec77"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">For the complete reference on D3 locale format pattern, visit the following link - <a class="ulink" href="https://github.com/d3/d3-time-format/blob/master/README.md#locale_format">https://github.com/d3/d3-time-format/blob/master/README.md#locale_format
</a>.</li></ul></div></div></div></div></div>
<div><div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec31"/>Using the ordinal scale</h1></div></div></div><p>In some cases, we may need to map our data to some ordinal values, for example, <code class="literal">["a", "b", "c"]</code> or <code class="literal">["#1f77b4", "#ff7f0e", "#2ca02c"]</code>. So, how can we perform this kind of mapping using D3 scales? This recipe is dedicated to answer this question.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec78"/>Getting ready</h2></div></div></div><p>Open your local copy of the following file in your web browser:</p><p>
<a class="ulink" href="https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/ordinal-scale.html">https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/ordinal-scale.html
</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec79"/>How to do it...</h2></div></div></div><p>This kind of ordinal mapping is quite common in data visualization. For example, you may want to map certain data points through categorization into some textual value or perhaps into RGB color code, which in turn can be used in CSS styling. D3 offers a specialized scale implementation to handle this kind of mapping. We will explore its usage here. The following is the code of the <code class="literal">ordinal-scale.html</code> file:</p><pre class="programlisting">&lt;div id="alphabet" class="clear"&gt; 
    &lt;span&gt;Ordinal Scale with Alphabet&lt;br&gt;&lt;/span&gt; 
    &lt;span&gt;Mapping [1..10] to ["a".."j"]&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
&lt;div id="category10" class="clear"&gt; 
    &lt;span&gt;Ordinal Color Scale Category 10&lt;br&gt;&lt;/span&gt; 
    &lt;span&gt;Mapping [1..10] to category 10 colors&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
&lt;div id="category20" class="clear"&gt; 
    &lt;span&gt;Ordinal Color Scale Category 20&lt;br&gt;&lt;/span&gt; 
    &lt;span&gt;Mapping [1..10] to category 20 colors&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
&lt;div id="category20b" class="clear"&gt; 
    &lt;span&gt;Ordinal Color Scale Category 20b&lt;br&gt;&lt;/span&gt; 
    &lt;span&gt;Mapping [1..10] to category 20b colors&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
&lt;div id="category20c" class="clear"&gt; 
    &lt;span&gt;Ordinal Color Scale Category 20c&lt;br&gt;&lt;/span&gt; 
    &lt;span&gt;Mapping [1..10] to category 20c colors&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
 
&lt;script type="text/javascript"&gt; 
    var max = 10, data = []; 
 
    for (var i = 1; i &lt;= max; ++i) data.push(i); // &lt;-A 
     
    var alphabet = d3.scaleOrdinal() // &lt;-B 
        .domain(data) 
        .range(["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"]); 
         
    function render(data, scale, selector) { // &lt;-C 
        var cells  = d3.select(selector).selectAll("div.cell") 
                .data(data); 
 
        cells.enter() 
                .append("div") 
                    .classed("cell", true) 
                    .style("display", "inline-block") 
                    .style("background-color", function(d){  // &lt;-D 
                        return scale(d).indexOf("#") &gt;=0 ?  
                                             scale(d) : "white"; 
                    }) 
                    .text(function (d) { // &lt;-E 
                        return scale(d); 
                    }); 
    } 
 
    render(data, alphabet, "#alphabet"); // &lt;-F 
render(data, d3.scaleOrdinal(d3.schemeCategory10),  
                                      "#category10"); 
render(data, d3.scaleOrdinal(d3.schemeCategory20),  
                                      "#category20"); 
render(data, d3.scaleOrdinal(d3.schemeCategory20b),  
                                      "#category20b"); 
render(data, d3.scaleOrdinal(d3.schemeCategory20c),  
                                      "#category20c"); // &lt;-G 
&lt;/script&gt; 
</pre><p>The preceding code outputs the following in your browser:</p><p>
</p><div><img src="img/image_04_010.jpg" alt="How to do it..."/></div><p>
</p><p>Ordinal scale</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec80"/>How it works...</h2></div></div></div><p>In the preceding code example, a simple data array containing integers from <code class="literal">0</code> to <code class="literal">9</code> was defined on line <code class="literal">A</code>:</p><pre class="programlisting">for (var i = 0; i &lt; max; ++i) data.push(i); // &lt;-A     
var alphabet = d3.scaleOrdinal() // &lt;-B 
    .domain(data) 
.range(["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"]); 
</pre><p>Then, an ordinal scale was created using the <code class="literal">d3.scaleOrdinal</code> function on line <code class="literal">B</code>. The domain of this scale was set to our integer array data, whereas range was set to a list of alphabets from <code class="literal">a</code> to <code class="literal">j</code>.</p><p>With this scale defined, we can perform the mapping by simply invoking the scale function, for example, <code class="literal">alphabet(0)</code> will return <code class="literal">a</code>, <code class="literal">alphabet(4)</code> will return <code class="literal">e</code>, and so on.</p><p>On line <code class="literal">C</code>, the <code class="literal">render</code> function was defined to generate a number of <code class="literal">div</code> elements on the page to represent the 10 elements in a data array. Each <code class="literal">div</code> element has its <code class="literal">background-color</code> attribute set to the scale function's output or <code class="literal">white</code> if the output is not an RGB color string:</p><pre class="programlisting">.style("background-color", function(d){  // &lt;-D 
    return scale(d).indexOf("#")&gt;=0 ? scale(d) : "white"; 
}) 
</pre><p>On line <code class="literal">E</code>, we also set the text of each cell to display the scale function's output:</p><pre class="programlisting">.text(function (d) { // &lt;-E 
    return scale(d); 
}); 
</pre><p>Now, with all the structures in place, from line <code class="literal">F</code> to <code class="literal">G</code>, the <code class="literal">render</code> function was repetitively called with different ordinal scales to produce different visual outputs. On line <code class="literal">F</code>, calling <code class="literal">render</code> with the <code class="literal">alphabet</code> ordinal scale produces the following output:</p><p>
</p><div><img src="img/image_04_011.jpg" alt="How it works..."/></div><p>
</p><p>Alphabetic ordinal scale</p><p>While on line <code class="literal">G</code>, calling the <code class="literal">render</code> function with the built-in <code class="literal">d3.scaleOrdinal(d3.schemeCategory20c)</code> ordinal color category scheme produces the following output:</p><p>
</p><div><img src="img/image_04_012.jpg" alt="How it works..."/></div><p>
</p><p>Color ordinal scale</p><p>As assigning different colors to different elements in visualization is a common task, for example, assigning different colors in pie and bubble charts, D3 provides a number of different built-in ordinal color scales as we saw in this recipe.</p><div><div><h3 class="title"><a id="tip45"/>Tip</h3><p>It is quite easy to build your own simple custom ordinal color scale. Just create an ordinal scale with the range set to the colors you want to use, as shown in the following example:
<code class="literal">d3.scaleOrdinal()</code>
<code class="literal">.range(["#1f77b4", "#ff7f0e", "#2ca02c"]);</code>
</p></div></div></div></div></div></div>
<div><div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec32"/>Interpolating a string</h1></div></div></div><p>In some cases, you might need to interpolate numbers embedded in a string; perhaps a CSS style for font, for example.</p><p>In this recipe, we will examine how you can do that using D3 scale and interpolation. However, before we jump right into string interpolation, a bit of background knowledge on interpolator is due, and the following section will cover the basics of what interpolation is and how D3 implements interpolator functions.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec81"/>Interpolator</h2></div></div></div><p>In the first three recipes, we went over three different D3 scale implementations; now it is time to delve a little deeper into D3 scales. You are probably already asking the question, <em>How do different scales know what value to use for different inputs?</em> In fact, this question can be generalized through the following definition of interpolator:</p><div><blockquote class="blockquote"><p>
<em>We are given the values of a function f(x) at different points x0, x1, ... ,xn. We want to find approximate values of the function f(x) for "new" x's that lie between these points. This process is called interpolation.</em>
</p></blockquote></div><div><blockquote class="blockquote"><p>
<em>-Kreyszig E and Kreyszig H, and Norminton E. J. (2010)</em>
</p></blockquote></div><p>Interpolation is not only important in scale implementation but also essential to many other core D3 capabilities, for example, animation and layout management. It is because of this essential role that D3 has designed a separate and reusable construct called <em>interpolator</em> so that this common cross-functional concern can be addressed in a centralized and consistent fashion. Let's take a simple interpolator as an example:</p><pre class="programlisting">var interpolate = d3.interpolateNumber(0, 100); 
interpolate(0.1); // =&gt; 10 
interpolate(0.99); //=&gt; 99 
</pre><p>In this simple example, we created a D3 number interpolator with a range of <code class="literal">[0, 100]</code>. The <code class="literal">d3.interpolateNumber</code> function returns an interpolate function, which we can use to perform number-based interpolations. The interpolate function is equivalent to the following code:</p><pre class="programlisting">function interpolate(t) { 
    return a * (1 - t) + b * t; 
} 
</pre><p>In this function, <code class="literal">a</code> represents the start of the range and <code class="literal">b</code> represents the end of the range. The parameter <code class="literal">t</code> passed into the <code class="literal">interpolate()</code> function is a float-point number, ranging from 0 to 1, and it signifies how far the return value is from <code class="literal">a</code>.</p><p>D3 provides a number of built-in interpolators. Due to limited scope in this book, we will focus on some of the more interesting interpolators for the next few recipes; we will end our discussion on simple number interpolation here. Nevertheless, the fundamental approach and mechanism will remain the same, whether it is a number or an RGB color code interpolator.</p><div><div><h3 class="title"><a id="note46"/>Note</h3><p>For more details on number and round interpolation, please refer to the D3 reference documents at <a class="ulink" href="https://github.com/d3/d3/blob/master/API.md#interpolators-d3-interpolate">https://github.com/d3/d3/blob/master/API.md#interpolators-d3-interpolate
</a>.</p></div></div><p>Now, with general interpolation concepts behind us, let's take a look at how string interpolator works in D3.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec82"/>Getting ready</h2></div></div></div><p>Open your local copy of the following file in your web browser:</p><p>
<a class="ulink" href="https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/string-interpolation.html">https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/string-interpolation.html
</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec83"/>How to do it...</h2></div></div></div><p>String interpolator finds the numbers embedded in the string, and then performs interpolation using D3 number interpolator:</p><pre class="programlisting">&lt;div id="font" class="clear"&gt; 
    &lt;span&gt;Font Interpolation&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
 
&lt;script type="text/javascript"&gt; 
    var max = 11, data = []; 
 
    var sizeScale = d3.scaleLinear() // &lt;-A 
        .domain([0, max]) 
        .range([  // &lt;-B 
            "italic bold 12px/30px Georgia, serif",  
            "italic bold 120px/180px Georgia, serif" 
        ]); 
 
    for (var i = 0; i &lt; max; ++i) data.push(i); 
 
    function render(data, scale, selector) { // &lt;-C 
        var cells = d3.select(selector).selectAll("div.cell") 
                .data(data); 
 
        cells.enter() 
            .append("div") 
                .classed("cell", true) 
                .style("display", "inline-block") 
            .append("span") 
                .style("font", function(d,i){ 
                    return scale(d); // &lt;-D 
                }) 
                .text(function(d,i){return i;}); // &lt;-E 
    } 
 
    render(data, sizeScale, "#font"); 
&lt;/script&gt; 
</pre><p>The preceding code produces the following output:</p><p>
</p><div><img src="img/image_04_013.jpg" alt="How to do it..."/></div><p>
</p><p>String interpolation</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec84"/>How it works...</h2></div></div></div><p>In this example, we created a linear scale on line <code class="literal">A</code> with a range specified between two strings that represent the start and end <code class="literal">font</code> styles:</p><pre class="programlisting">var sizeScale = d3.scale.linear() // &lt;-A 
        .domain([0, max]) 
        .range([  // &lt;-B 
            "italic bold 12px/30px Georgia, serif",  
            "italic bold 120px/180px Georgia, serif" 
        ]); 
</pre><p>As you can see in the code of the <code class="literal">string-interpolation.html</code> file, the <code class="literal">font</code> style strings contain <code class="literal">font-size</code> numbers <code class="literal">12px/30px</code> and <code class="literal">120px/180px</code>, which we want to interpolate in this recipe. At this point, you might be asking how the linear scale function can map a number domain to these arbitrary font CSS styles. By default, linear scale uses the <code class="literal">d3.interpolateString</code> function to handle string-based range. The <code class="literal">d3.interpolateString</code> function will try to identify embedded numbers in a given string, in our case, the font-size numbers, and apply interpolation on those numbers only. Therefore, in this recipe, we essentially mapped our domain to the font sizes using a linear scale.</p><p>On line <code class="literal">C</code>, the <code class="literal">render()</code> function simply creates 10 cells containing each cell's index numbers (line <code class="literal">E</code>) styled using the interpolated <code class="literal">font</code> style string calculated on line <code class="literal">D</code>.</p><pre class="programlisting">.style("font", function(d,i){  
    return scale(d); // &lt;-D 
}) 
.text(function(d,i){return i;}); // &lt;-E 
</pre><p>As we can see, simply setting the font style to the output of <code class="literal">scale(d)</code> is enough since the function output is a complete font CSS style string with transformed embedded numbers.</p><div><div><h3 class="title"><a id="note47"/>Note</h3><p>If you inspect the output of this recipe, you will notice the output CSS style is actually longer than the original style string we used. The output looks like this:
<code class="literal">font-style: italic; font-variant: normal; font-weight: bold; font-stretch: normal; font-size: 90.5455px; line-height: 139.091px; font-family: Georgia, serif;</code>
This is because D3 CSS transformation parses CSS styles first and then uses browser-computed fully qualified CSS string for interpolation. This is done to avoid some subtle bugs that could otherwise be caused by direct interpolation.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec85"/>There's more...</h2></div></div></div><p>Though we demonstrated string interpolation in D3 using a CSS font style as an example, D3 string interpolator is not only limited to handling CSS styles. It can basically handle any string and interpolates the embedded number as long as the number matches the following <strong>Regex</strong> pattern:</p><pre class="programlisting">/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g 
</pre><div><div><h3 class="title"><a id="note48"/>Note</h3><p>When you generate a string using interpolation, very small values, when stringified, may get converted to scientific notation, for example, 1e-7. To avoid this particular conversion, you will need to keep your value larger than 1e-6</p></div></div></div></div></div></div>
<div><div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec33"/>Interpolating colors</h1></div></div></div><p>It is sometimes necessary to interpolate colors when you interpolate values that do not contain numbers but rather RGB or HSL color code. This recipe addresses the question <em>how can you define scales for color codes and perform interpolation on them?</em>
</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec86"/>Getting ready</h2></div></div></div><p>Open your local copy of the following file in your web browser:</p><p>
<a class="ulink" href="https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/color-interpolation.html">https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/color-interpolation.html
</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec87"/>How to do it...</h2></div></div></div><p>Color interpolation is such a common operation in visualization that D3 actually provides a number of different kinds of interpolators dedicated to color supporting, for example, <strong>RGB</strong>, <strong>HSL</strong>, <strong>L*a*b*</strong>, <strong>HCL</strong>, and <strong>Cubehelix</strong> color space. In this recipe, we will demonstrate how color interpolation can be performed in RGB color space. However, all other color interpolators work in the same way.</p><div><div><h3 class="title"><a id="note49"/>Note</h3><p>D3 color interpolate function always returns the interpolated color in RGB space, no matter what the original color space is, since not all browsers support HSL or L*a*b* color spaces.</p></div></div><p>Here is what the code for this recipe looks like:</p><pre class="programlisting">&lt;div id="color" class="clear"&gt; 
    &lt;span&gt;Linear Color Interpolation&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
&lt;div id="color-diverge" class="clear"&gt; 
    &lt;span&gt;Poly-Linear Color Interpolation&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
 
&lt;script type="text/javascript"&gt; 
    var max = 21, data = []; 
 
    var colorScale = d3.scaleLinear() // &lt;-A 
        .domain([0, max]) 
        .range(["white", "#4169e1"]); 
 
    var divergingScale = function(pivot) { // &lt;-B 
        return d3.scaleLinear() 
                .domain([0, pivot, max]) // &lt;-C 
                .range(["white", "#4169e1", "white"]) 
    }; 
 
    for (var i = 0; i &lt; max; ++i) data.push(i); 
 
    function render(data, scale, selector) { // &lt;-D 
        var cells = d3.select(selector).selectAll("div.cell") 
                .data(data); 
 
        cells.enter() 
            .append("div").merge(cells) 
                .classed("cell", true) 
                .style("display", "inline-block") 
                .style("background-color", function(d){ 
                    return scale(d); // &lt;-E 
                }) 
                .text(function(d,i){return i;}); 
    } 
 
    render(data, colorScale, "#color"); 
    render(data, divergingScale(5), "#color-diverge"); 
&lt;/script&gt; 
 
&lt;div class="control-group clear"&gt; 
    &lt;button onclick="render(data, divergingScale(5), '#color-diverge')"&gt;Pivot at 5&lt;/button&gt; 
    &lt;button onclick="render(data, divergingScale(10), '#color-diverge')"&gt;Pivot at 10&lt;/button&gt; 
    &lt;button onclick="render(data, divergingScale(15), '#color-diverge')"&gt;Pivot at 15&lt;/button&gt; 
    &lt;button onclick="render(data, divergingScale(20), '#color-diverge')"&gt;Pivot at 20&lt;/button&gt; 
&lt;/div&gt; 
</pre><p>The preceding code produces the following visual output:</p><p>
</p><div><img src="img/image_04_014.jpg" alt="How to do it..."/></div><p>
</p><p>Color interpolation</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec88"/>How it works...</h2></div></div></div><p>The first step in this recipe is to define a linear color scale on line <code class="literal">A</code> with its range set as <code class="literal">["white", "#4169e1"]</code>:</p><pre class="programlisting">var colorScale = d3.scaleLinear() // &lt;-A 
    .domain([0, max]) 
    .range(["white", "#4169e1"]); 
</pre><div><div><h3 class="title"><a id="note50"/>Note</h3><p>As we demonstrated earlier, D3 color interpolator is pretty smart when it comes to color space. Similar to your browser, it understands both color keywords and hexadecimal values.</p></div></div><p>One new technique used in this recipe, that we haven't encountered yet, is the <em>poly-linear scale</em>, which is defined in the <code class="literal">divergingScale</code> function on line <code class="literal">B</code>, as follows:</p><pre class="programlisting">var divergingScale = function(pivot) { // &lt;-B 
    return d3.scaleLinear() 
            .domain([0, pivot, max]) // &lt;-C 
            .range(["white", "#4169e1", "white"]) 
}; 
</pre><p>A poly-linear scale is a scale with a non-uniformed linear progression. It is achieved by providing a poly-linear domain on a linear scale as we can see on line <code class="literal">C</code>. You can think of a poly-linear scale as a scale that stitches two linear scales with different domains together. Hence, this poly-linear color scale is effectively the two following linear scales combined together:</p><pre class="programlisting">d3.scaleLinear() 
    .domain([0, pivot]).range(["white", "#4169e1"]); 
d3.scaleLinear() 
.domain([pivot, max]).range(["#4169e1", "white "]); 
</pre><p>No surprise in the rest of the recipe. The <code class="literal">render()</code> function defined on line <code class="literal">D</code> generates 20 cells that are numbered by its index and colored using the output of two color scales we defined earlier. Clicking on the buttons on the web page (such as <strong>Pivot at 5</strong>) will show you the effect of pivoting at different positions in a poly-linear color scale.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec89"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">For a complete list of supported color keywords in CSS3, please refer to the W3C official reference at <a class="ulink" href="https://www.w3.org/TR/css3-color/#html4">https://www.w3.org/TR/css3-color/#html4
</a>.</li></ul></div></div></div></div></div>
<div><div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec34"/>Interpolating compound objects</h1></div></div></div><p>There will be cases when what you need to interpolate in your visualization is not a simple value but rather an object consisting of multiple and different values, for example, a rectangular object with width, height, and color attributes. Fortunately, D3 has a built-in support for this type of compound object interpolation.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec90"/>Getting ready</h2></div></div></div><p>Open your local copy of the following file in your web browser:</p><p>
<a class="ulink" href="https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/compound-interpolation.html">https://github.com/NickQiZhu/d3-cookbook-v2/blob/master/src/chapter4/compound-interpolation.html
</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec91"/>How to do it...</h2></div></div></div><p>In this recipe, we will examine how compound object interpolation is performed in D3. The code for the <code class="literal">compound-interpolation.html</code> file is as follows:</p><pre class="programlisting">&lt;div id="compound" class="clear"&gt; 
    &lt;span&gt;Compound Interpolation&lt;br&gt;&lt;/span&gt; 
&lt;/div&gt; 
 
&lt;script type="text/javascript"&gt; 
    var max = 21, data = []; 
 
    var compoundScale = d3.scalePow() 
            .exponent(2) 
            .domain([0, max]) 
            .range([ 
                {color:"#add8e6", height:"15px"}, // &lt;-A 
                {color:"#4169e1", height:"150px"} // &lt;-B 
            ]); 
 
    for (var i = 0; i &lt; max; ++i) data.push(i); 
 
    function render(data, scale, selector) { // &lt;-C 
        var bars = d3.select(selector).selectAll("div.v-bar") 
                .data(data); 
        bars.enter() 
                .append("div") 
                .classed("v-bar", true) 
                .style("height", function(d){ // &lt;-D 
                        return scale(d).height; 
                    }) 
                .style("background-color", function(d){ // &lt;-E 
                    return scale(d).color; 
                }) 
                .text(function(d,i){return i;}); 
    } 
 
    render(data, compoundScale, "#compound"); 
&lt;/script&gt; 
</pre><p>The preceding code generates the following visual output:</p><p>
</p><div><img src="img/image_04_015.jpg" alt="How to do it..."/></div><p>
</p><p>Compound object interpolation</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec92"/>How it works...</h2></div></div></div><p>This recipe is different from the previous recipes in this chapter by the fact that the scale we will use in this recipe has a range defined using two objects rather than simple primitive data types:</p><pre class="programlisting">var compoundScale = d3.scalePow() 
            .exponent(2) 
            .domain([0, max]) 
            .range([ 
                {color:"#add8e6", height:"15px"}, // &lt;-A 
                {color:"#4169e1", height:"150px"} // &lt;-B 
            ]); 
</pre><p>We can see on lines <code class="literal">A</code> and <code class="literal">B</code> that the start and the end of the scale range are two objects that contain two different kinds of values: one for RGB color and the other one for CSS height style. When you interpolate this kind of a scale containing compound range, D3 will iterate through each of the fields inside an object and recursively apply interpolation rules on each one of them. In other words, for this example, D3 will interpolate the <code class="literal">color</code> field using color interpolation from <code class="literal">#add8e6</code> to <code class="literal">#4169e1</code> while using string interpolation on height field from <code class="literal">15px</code> to <code class="literal">150px</code>.</p><div><div><h3 class="title"><a id="note51"/>Note</h3><p>Internally, D3 uses the <code class="literal">d3.interpolateObject</code> function to recursively interpolate an object; the recursive nature of this algorithm allows D3 to interpolate even on nested objects. Therefore, you can interpolate on an object like this:
<code class="literal">{</code>
<code class="literal">  color:"#add8e6",</code>
<code class="literal">  size{</code>
<code class="literal">    height:"15px",</code>
<code class="literal">    width: "25px"</code>
<code class="literal">  }</code>
<code class="literal">}</code>
</p></div></div><p>A compound scale function, when invoked, returns a compound object that matches the given range definition:</p><pre class="programlisting">.style("height", function(d){ 
  return scale(d).height; // &lt;-D 
})  
.style("background-color", function(d){ 
  return scale(d).color; // &lt;-E 
}) 
</pre><p>As we can see on lines <code class="literal">D</code> and <code class="literal">E</code>, the returned value is a compound object, and this is why, we can access its attribute to retrieve the interpolated values.</p><div><div><h3 class="title"><a id="note52"/>Note</h3><p>Though it is not a common case, if the start and end of your compound scale range do not have identical attributes, D3 won't complain but rather it will just treat the missing attribute as a constant. The following scale will render the height to be <code class="literal">15px</code> for all the <code class="literal">div</code> elements:
<code class="literal">var compoundScale = d3.scalePow()</code>
<code class="literal">            .exponent(2)</code>
<code class="literal">            .domain([0, max])</code>
<code class="literal">                 range([</code>
<code class="literal">                 {color:"#add8e6", height:"15px"}, // &lt;-A</code>
<code class="literal">                 {color:"#4169e1"} // &lt;-B</code>
<code class="literal">            ]);</code>
</p></div></div><p>In this chapter we have covered an important fundamental concept in D3 - scales. In next chapter we will move on to the first visualization component in this book that is actually built on top of scales - Axes.</p></div></div></div></div></body></html>