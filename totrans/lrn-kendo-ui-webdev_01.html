<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Interacting with Data: DataSource, Templates, TabStrip, and Grid"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Interacting with Data: DataSource, Templates, TabStrip, and Grid</h1></div></div></div><p>Today is an exciting time to be a web developer. Web browsers and web standards have matured to the point that today's programmer has rich frameworks available to boost productivity and to reach wide audiences with less code and fewer headaches. HTML<a id="id0" class="indexterm"/>, CSS, <a id="id1" class="indexterm"/>and JavaScript<a id="id2" class="indexterm"/> have converged into a powerful and coherent unit that allows web applications to be both aesthetically and architecturally beautiful and elegant. Kendo UI, from Telerik<a id="id3" class="indexterm"/>, is a modern framework that embraces these advances and provides a set of tools to enable rich web development and configurable widgets, all with a familiar and accessible syntax.</p><p>Along these same lines, development tools have been improving as well and Visual Studio 2012 from Microsoft is a good example. JavaScript is now a first-class citizen in the Microsoft world and there are many improvements for JavaScript development in the IDE, along with improved support for HTML5 and CSS3. This is largely to support a new programming model in Windows 8 that allows web developers to take their skills to the Windows 8 desktop, but these improvements also directly benefit ASP.NET development —especially ASP.NET MVC. This is the programming environment that we will use throughout this book to demonstrate and learn the Kendo UI framework for the web.</p><div class="section" title="Setting up the sample project"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Setting up the sample project</h1></div></div></div><p>Kendo UI<a id="id4" class="indexterm"/> for web development is a client-side, jQuery-powered JavaScript framework that is <a id="id5" class="indexterm"/>not dependent on any specific server technology or platform. This means that you can type and run the client-side examples in this book using your choice of tools and debugging/testing environment. However, Telerik has also released a great set of server-side extensions for the Microsoft ASP.NET MVC framework that can significantly boost productivity. To take advantage of both of these models, I will be using Visual Studio 2012 and the ASP.NET MVC 4 project<a id="id6" class="indexterm"/> template for all my demonstrations and I invite you to follow along with me. <a id="id7" class="indexterm"/>Visual Studio 2012 Express is a freely available download from <a class="ulink" href="http://www.microsoft.com/visualstudio/eng/products/visual-studio-overview">http://www.microsoft.com/visualstudio/eng/products/visual-studio-overview</a>, if you do not already have it installed.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p><span class="strong"><strong>Rather download completed samples?</strong></span></p><p>The samples that are displayed in this book are available for download and you can start from the completed code if you do not want to follow all of the steps of setting it up yourself.</p></div></div><p>Once you have Visual Studio 2012 installed, click on <span class="strong"><strong>New Project</strong></span> either from the Start page or from the <span class="strong"><strong>File</strong></span> menu. Then choose <span class="strong"><strong>ASP.NET MVC 4 Web Application</strong></span> from the <span class="strong"><strong>Web</strong></span> group of project choices. As you can see from the following screenshot, I have named my project <a id="id8" class="indexterm"/>
<code class="literal">LearningKendoUIWeb</code>:</p><div class="mediaobject"><img src="graphics/4346OT_01_01.jpg" alt="Setting up the sample project"/></div><p>Select this and click on <span class="strong"><strong>OK</strong></span>. The next window will display some selections for the type of template you <a id="id9" class="indexterm"/>want to use. I chose the basic template, but you can choose any of the templates other than the empty template in order to follow along with the examples. You do not need to create a unit test project for the purposes of this book.</p><div class="mediaobject"><img src="graphics/4346OT_01_21.jpg" alt="Setting up the sample project"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p><span class="strong"><strong>Downloading the example code</strong></span></p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a> . If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div><p>Visual Studio will create the folder structure for your new project, and will copy all of the necessary files into that <a id="id10" class="indexterm"/>structure so that you can run your project in the debugger. Once this is complete, you will see your project tree in the <span class="strong"><strong>Solution Explorer</strong></span> section of the <a id="id11" class="indexterm"/>Visual Studio IDE.</p><div class="mediaobject"><img src="graphics/4346OT_01_02.jpg" alt="Setting up the sample project"/></div><p>Now that we have our structure, it is time to download the Telerik Kendo UI files and place them in their proper location. Navigate to the Telerik Kendo UI website<a id="id12" class="indexterm"/> at <a class="ulink" href="http://www.kendoui.com/download.aspx">http://www.kendoui.com/download.aspx</a> and download the 30-day free trial of the Kendo UI Complete package that includes the server wrappers for ASP.NET MVC. It will arrive as a ZIP file containing everything that you need for development with Kendo UI. Extract the contents of the ZIP file somewhere you will remember since you will need to reference these files throughout the rest of the book. This screenshot shows what the ZIP file should contain:</p><div class="mediaobject"><img src="graphics/4346OT_01_03.jpg" alt="Setting up the sample project"/></div><p>Now, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go back to Visual Studio and right-click on the <code class="literal">Content</code> folder in the <span class="strong"><strong>Solution Explorer</strong></span> and choose <span class="strong"><strong>Add, New Folder</strong></span>. Name the new folder <code class="literal">kendo</code>.</li><li class="listitem">Right-click<a id="id13" class="indexterm"/> on the <code class="literal">kendo</code> folder that you just created and create two more folders—<code class="literal">Default</code> and <code class="literal">textures</code>. Now, right-click on the <code class="literal">Default</code> folder and choose <span class="strong"><strong>Add, Existing Item</strong></span>.</li><li class="listitem">In the file dialog that displays, navigate to the folder with the unzipped Kendo files, then open the <code class="literal">Styles</code> folder and then the <code class="literal">Default</code> folder inside it.</li><li class="listitem">Select all of the files in this folder and click on the <span class="strong"><strong>Add</strong></span> button. This will add all of these items to the Visual Studio project so that they show in <span class="strong"><strong>Solution Explorer</strong></span> and can be managed from the Visual Studio IDE.</li><li class="listitem">Next, follow these same steps to add all of the items to the <code class="literal">textures</code> folder. Once you have these files in place, right click on the <code class="literal">kendo</code> folder in <span class="strong"><strong>Solution Explorer</strong></span> again and choose <span class="strong"><strong>Add, Existing Item</strong></span>.</li></ol></div><p>In the dialog that displays, choose these two specific files from the <code class="literal">Styles</code> folder of the unzipped kendo files and add them as well:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">kendo.common.min.css</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">kendo.default.min.css</code></li></ul></div><p>Once these two files appear in <span class="strong"><strong>Solution Explorer</strong></span>, rename them by removing the .<code class="literal">min</code> portion of their file names (<code class="literal">kendo.default.min.css</code> becomes <code class="literal">kendo.default.css</code>); this will be explained in greater detail in next few paragraphs. The <code class="literal">Content</code> folder in <span class="strong"><strong>Solution Explorer</strong></span> should look something like this when you are finished:</p><div class="mediaobject"><img src="graphics/4346OT_01_04.jpg" alt="Setting up the sample project"/></div><p>Next, we will prepare the <code class="literal">Scripts</code> folder by following some very similar steps. Create a <code class="literal">kendo</code> folder inside <a id="id14" class="indexterm"/>of the <code class="literal">Scripts</code> folder in <span class="strong"><strong>Solution Explorer</strong></span> and then copy these files from the <code class="literal">js</code> folder of the downloaded Kendo files:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">jquery.min.css</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">kendo.all.min.js</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">kendo.aspnetmvc.min.jskendo.web.min.js</code></li></ul></div><p>Once again, remove the <code class="literal">.min</code> portion of their filenames. We will, however, need two versions of the <code class="literal">kendo.aspnetmvc.js</code> file as will be explained later. Go ahead and copy the file, but only remove the &lt;code&gt;.min&lt;/code&gt; portion of the filename from one copy. This way you will have one copy of the file with a <code class="literal">.min</code> filename and another copy of the file without the <code class="literal">.min</code> file name. The completed <code class="literal">kendo</code> folder in <span class="strong"><strong>Solution Explorer</strong></span> should look something like this:</p><div class="mediaobject"><img src="graphics/4346OT_01_05.jpg" alt="Setting up the sample project"/></div><p>As a web developer, you are surely familiar with the exercise of referencing scripts and styles in the head portion of your web pages. ASP.NET MVC 4<a id="id15" class="indexterm"/> comes with a great feature that enables bundling and minimization of these scripts, along with built-in caching, so that the <a id="id16" class="indexterm"/>browser can download these files faster and thereby increase the performance of your site with very little effort on your part. This feature also works with CDN locations, so that you can run with local files during debugging and still reference CDN hosted scripts or style sheets when your site is deployed. To enable this functionality for our sample project, you will need to add the following code to the <code class="literal">BundleConfig.cs</code> file in the <code class="literal">App_Start</code> folder of the project. First, add this code at the top of the file to enable CDN functionality and to save the paths of the CDN locations that we want to use:</p><div class="informalexample"><pre class="programlisting">// Enable CDN
bundles.UseCdn = true;

// CDN paths for kendo stylesheet files
var kendoCommonCssPath = "http://cdn.kendostatic.com/2013.1.319/styles/kendo.common.min.css";
var kendoDefaultCssPath = "http://cdn.kendostatic.com/2013.1.319/styles/kendo.default.min.css";

// CDN paths for kendo javascript files
var kendoWebJsPath = "http://cdn.kendostatic.com/2012.2.710/js/kendo.web.min.js";</pre></div><p>Then, add this code at the bottom of the file to create the bundles for your Kendo files. By passing the CDN location as the second parameter of the <code class="literal">ScriptBundle</code> constructor<a id="id17" class="indexterm"/>, Visual Studio will build your solution using your local files when debugging and will build your solution using the CDN location files when building in release mode. This is also where I should explain why we removed the <code class="literal">.min</code> portion of the JavaScript and stylesheet filenames. The bundling and minification features of ASP.NET MVC intentionally ignore files that include <code class="literal">.min</code> in their filenames during debugging. This means that none of your script references from the Kendo download will work during debugging because we do not have the pre-minified files included in our project. There are several documented<a id="id18" class="indexterm"/> ways to deal with this problem floating around the Internet, but the easiest way to address this for our project is just to rename to files to avoid the entire issue.</p><div class="informalexample"><pre class="programlisting">// Create the CDN bundles for kendo javascript files
bundles.Add(new ScriptBundle("~/bundles/kendo/web/js", kendoWebJsPath)
.Include("~/Scripts/kendo/kendo.web.js"));
// The ASP.NET MVC script file is not available from the Kendo Static CDN,
// so we will include the bundle reference without the CDN path.
bundles.Add(new ScriptBundle("~/bundles/kendo/mvc/js")
.Include("~/Scripts/kendo/kendo.aspnetmvc.js"));

// Create the CDN bundles for the kendo styleshseet files
bundles.Add(new StyleBundle("~/bundles/kendo/common/css", kendoCommonCssPath)
    .Include("~/Content/kendo/kendo.common.css"));
bundles.Add(new StyleBundle("~/bundles/kendo/default/css", kendoDefaultCssPath)
    .Include("~/Content/kendo/kendo.default.css"));</pre></div><p>Now that we have the <code class="literal">BundleConfig.cs</code> file properly configured, we can adjust the references in the head portion of our <code class="literal">_Layout.cshtml</code> file<a id="id19" class="indexterm"/>. The <code class="literal">_Layout.cshtml</code> file acts as our default master page by creating a uniform head structure for all of our pages and a default layout within which all the other pages place their specific content. Open the <code class="literal">_Layout.cshtml</code> file in the <code class="literal">Views</code>, <code class="literal">Shared</code> folder and make some changes. By default, it will have some script references that appear in the body portion of the page and some that appear in the head portion.</p><p>There are undoubtedly some good reasons for doing this, but since we will have references to Kendo scripts in the body of our page before these script references would appear, we need to move everything to the head portion. Since this file is not very long, I have included my finished version here so that you can copy it:</p><div class="informalexample"><pre class="programlisting">@using Kendo.Mvc.UI;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta name="viewport" content="width=device-width" /&gt;
&lt;title&gt;@ViewBag.Title&lt;/title&gt;
@Styles.Render("~/Content/css")
@Styles.Render("~/bundles/kendo/common/css")
@Styles.Render("~/bundles/kendo/default/css")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/kendo/web/js")
@Scripts.Render("~/bundles/kendo/mvc/js")
&lt;/head&gt;
&lt;body&gt;
@RenderBody()

@RenderSection("scripts", required: false)
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>Note also that I have added an <code class="literal">@using</code> statement at the top of the file, make sure you copy that as well<a id="id20" class="indexterm"/> since it will enable <span class="strong"><strong>Intellisense</strong></span>
<a id="id21" class="indexterm"/> on all of your pages. Intellisense is a feature of Visual Studio that auto-completes code as you write and is a great productivity booster. To fully enable this, you will also need to add a reference to the <code class="literal">Kendo.Mvc.dll</code> file to your Visual Studio project:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, right-click on the <span class="strong"><strong>LearningKendoUIWeb</strong></span> project in the Visual Studio <span class="strong"><strong>Solution Explorer</strong></span> and choose <span class="strong"><strong>Add Reference</strong></span>.<div class="mediaobject"><img src="graphics/4346OT_01_22.jpg" alt="Setting up the sample project"/></div></li><li class="listitem">Next, click on <span class="strong"><strong>Browse</strong></span> and navigate the file dialog to the location where you downloaded the Kendo files.</li><li class="listitem">Find the folder named <code class="literal">aspnetmvc</code>, open the folder named <code class="literal">Binaries</code> inside it, and then open the folder named <code class="literal">Mvc3</code> inside that.</li><li class="listitem">Here you will find the <code class="literal">Kendo.Mvc.dll</code> file; click on it and choose <span class="strong"><strong>Add</strong></span>.<div class="mediaobject"><img src="graphics/4346OT_01_23.jpg" alt="Setting up the sample project"/></div></li><li class="listitem">With this reference added, you can make the code inside it available to all of your web pages by adding a special entry in a file called <code class="literal">web.config</code>.</li><li class="listitem">This file is <a id="id22" class="indexterm"/>located in the root of your <span class="strong"><strong>LearningKendoUIWeb</strong></span> project. Open <code class="literal">web.config</code> and locate the section called <code class="literal">namespaces</code>. Add the <code class="literal">Kendo.Web.UI</code> namespace to the list like this:<div class="informalexample"><pre class="programlisting">&lt;pages&gt;
&lt;namespaces&gt;
  &lt;add namespace="System.Web.Helpers" /&gt;
  &lt;add namespace="System.Web.Mvc" /&gt;
  &lt;add namespace="System.Web.Mvc.Ajax" /&gt;
  &lt;add namespace="System.Web.Mvc.Html" /&gt;
  &lt;add namespace="System.Web.Optimization" /&gt;
  &lt;add namespace="System.Web.Routing" /&gt;
  &lt;add namespace="System.Web.WebPages" /&gt;
  &lt;add namespace="Kendo.Mvc.UI" /&gt;
&lt;/namespaces&gt;
&lt;/pages&gt;</pre></div></li></ol></div><p>Now create a folder to hold static content in the project. Right-click the project name in <span class="strong"><strong>Solution Explorer</strong></span>, choose <span class="strong"><strong>Add, New Folder</strong></span>. Call the new folder <code class="literal">static</code>. This will be the location where we place all of our client-side examples that run apart from the MVC framework.</p><p>Visual Studio 2012 includes <a id="id23" class="indexterm"/>some good improvements in JavaScript Intellisense and it is going to help us as we write our code. Open the file called <code class="literal">"_references.js</code>" in the scripts folder and delete all of the text in it. This is the entire contents of my <code class="literal">"_references.js</code>" file, copy this into yours as well:</p><div class="informalexample"><pre class="programlisting">/// &lt;reference path="kendo/jquery.js" /&gt;
/// &lt;reference path="kendo/kendo.web.js" /&gt;
/// &lt;reference path="kendo/kendo.aspnetmvc.js" /&gt;</pre></div><p>Visual Studio 2012 uses this file as the list of JavaScript libraries that it should use for Intellisense in the editor. I have included the jQuery file included with the Kendo zipped package and two JavaScript files that we will be using in the majority of our web pages. Once you have this in place, you will get some very helpful coding assistance in your JavaScript files like this:</p><div class="mediaobject"><img src="graphics/4346OT_01_06.jpg" alt="Setting up the sample project"/></div><p>Notice how all of the Kendo options show up as you type JavaScript code in the editor? As you program the examples throughout this book, this will become something that you will help you.</p><p>OK, now we are ready!</p></div></div>
<div class="section" title="KendoUI syntax styles"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>KendoUI syntax styles</h1></div></div></div><p>When <a id="id24" class="indexterm"/>using the KendoUI framework in your web pages, you will find that there are two ways to add the widgets to your content. The standard method is to use a jQuery syntax within script elements like this:</p><div class="informalexample"><pre class="programlisting">&lt;input type="date" id="makeMeADatePicker" /&gt;
&lt;script type="text/javascript"&gt;
    $("#makeMeADatePicker").kendoDatePicker();
&lt;/script&gt;</pre></div><p>The convention, as shown, is to select the elements through jQuery and then apply a JavaScript method from the Kendo namespaces that alters the content into an interactive Kendo UI widget.</p><p>There is another way, now available through HTML5, to add Kendo UI widgets to your content through a method known as declarative initialization. This is a practice where you typically add special attributes to your elements that start with "data-" and then call an initializer that reads these attributes and then applies the appropriate changes. See this code as an example:</p><div class="informalexample"><pre class="programlisting">&lt;input type="date" id="makeMeADatePicker" data-role="datepicker" /&gt;
&lt;script type="text/javascript"&gt;
kendo.init($("#makeMeADatePicker"));
&lt;/script&gt;</pre></div><p>This type of syntax allows for a cleaner separation between JavaScript and mark-up, and is important in the MVVM pattern that we will cover later in the book. It is also powerfully expressive and can make the code more readable, since relevant attributes are contained directly within the elements to which they pertain. Script blocks containing code do not necessarily appear beside the code actually being affected, which can make things difficult to trace in a complicated project.</p></div>
<div class="section" title="Kendo UI MVC &#x2013; basics"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Kendo UI MVC – basics</h1></div></div></div><p>Since we will <a id="id25" class="indexterm"/>be using ASP.NET MVC quite a bit in this book, I should define some important terms so that there isn't any confusion later. <span class="strong"><strong>MVC</strong></span> stands for <span class="strong"><strong>Model-View-Controller</strong></span>;
<a id="id26" class="indexterm"/> so let's establish a common terminology around these. First, a web page is referred to as a <span class="emphasis"><em>view</em></span> and, when using Razor syntax with C#, the web pages have a file extension, <code class="literal">cshtml</code>. There is also the option of using Visual Basic in which case the web pages have a file extension, <code class="literal">vbhtml</code>, but we will be using C# in this book so you won't see this in the examples.</p><p>Second, the <span class="emphasis"><em>controller</em></span> is a server-side classfile that is responsible for all of the logic used in generating the content included in a web page (view). The controller, along with the route table, is also responsible for establishing the publicly accessible URLs to which the server will respond, and enforcing which HTTP verbs are required to access them. In general, a controller is responsible for contacting any external dependencies, such as a database or web server, performing any necessary logic and calculations on the data retrieved from those external dependencies, and then packaging up all of that processed data into an object called the <span class="emphasis"><em>model</em></span>.</p><p>The model,<a id="id27" class="indexterm"/> then, is an object container that contains the data that the web page (view) needs in order to display itself. In a properly separated system, the controller is the engine that performs all logic, data manipulation, user-input handling, authorization, and security. The view is the data presenter and is concerned only with the graphical representation of the data it has been given; no logic apart from what is required for presentation (not to say that presentation can't be complex). The model is the standard data format that the controller uses to send its final product to the view to be presented to the user.</p><p>When programming in the ASP.NET MVC environment, Kendo UI offers a rich set of server-side extensions for creating its widgets. Instead of typing out an HTML element, specifying its attributes and wiring it up to Kendo UI JavaScript, the entire process can be done using server-side objects that appear in the view. For example, creating a <code class="literal">DatePicker</code> widget<a id="id28" class="indexterm"/> in MVC Razor syntax<a id="id29" class="indexterm"/> looks like this:</p><div class="informalexample"><pre class="programlisting">@(Html.Kendo().DatePicker().Name("datePickerField"))</pre></div><p>No HTML, no JavaScript, just extension methods on the HTML class. When the page is generated, however, you can see what was sent to the browser:</p><div class="informalexample"><pre class="programlisting">&lt;input class="k-input" id="datePicker" name="datePicker" type="date" /&gt;
&lt;script&gt;
jQuery(function(){jQuery("#datePicker").kendoDatePicker({format:"M/d/yyyy",
min:new Date(1900,0,1,0,0,0,0),max:new Date(2099,11,31,0,0,0,0)});});
&lt;/script&gt;</pre></div><p>The extension methods create all the HTML, JavaScript, and CSS information dynamically. You can see how the final output uses the jQuery method of selecting the input element and using <code class="literal">.kendoDatePicker(…)</code> to create the widget through JavaScript. So, although the programmer didn't type out the JavaScript, it was still necessary for Kendo UI to work; the MVC extensions are only wrappers around the normal Kendo UI client-side framework.</p><p>I should also explain that even though the view is what generates the final web page sent to the user's browser, it is processed on the server first. The Razor syntax (everything that starts with <code class="literal">@</code>) never appears in the final page markup, it is processed on the server in order to generate the final markup. This means that the Kendo MVC extension methods are really a server-side shortcut to creating the final markup needed to make them work as they normally would in JavaScript.</p><p>Programming in the <a id="id30" class="indexterm"/>MVC framework allows for a very clean separation of concerns within the web server itself and this, in turn, allows for a great deal of flexibility around how the views run and how dependent they are on server-side logic. For example, widgets that use data can receive this data either as embedded material in the view itself (a dependency on server-side logic), or they can query for data from the client-side by calling action methods that return JSON (less dependency on server-side logic).</p><p>As an example of a server-dependent implementation, here is a strongly-typed view with embedded model data that can then be used by widgets on the page. A strongly-typed view is a view page that specifies a specific type of object that contains its model data. You can see the strongly-typed model object in this sample on the first line starting with <code class="literal">@model</code>:</p><div class="informalexample"><pre class="programlisting">@model IEnumerable&lt;LearningKendoUIWeb.Models.StateTerritory&gt;
&lt;textarea id="serverData" style="display:none"&gt;
@Html.Raw(ViewBag.serverData)
&lt;/textarea&gt;
&lt;script type="text/javascript"&gt;
varserverData = eval($("#serverData").html());
for (var i = 0; i&lt;serverData.length; i++) {
console.log(serverData[i].Name);
    }
&lt;/script&gt;</pre></div><p><code class="literal">ViewBag</code>
<a id="id31" class="indexterm"/> is a dynamic object that is available to you within controller action methods and view pages. It is a dictionary object that can contain any data or objects that you need in your view pages. The controller can add anything that you need to <code class="literal">ViewBag,</code> and your view pages will then have access to that data or object just as this sample code has shown. In this case, the controller has attached an object called <code class="literal">serverData</code> that contains a JSON representation of its model data. We are using the JavaScript function called <code class="literal">eval()</code>
<a id="id32" class="indexterm"/> to parse it into a JavaScript object and then showing on the JavaScript console what was inside. This is merely an example of how to embed data into the view itself without having to use additional network requests, such as the jQuery functions <code class="literal">$.get</code> or <code class="literal">$.ajax</code>, to retrieve data to display on the page; it may prove beneficial in some cases where network traffic needs to be weighed against immediate data availability that the server can provide up front.</p><p>The <code class="literal">ViewBag.serverData</code> property<a id="id33" class="indexterm"/> is filled in the controller like this:</p><div class="informalexample"><pre class="programlisting">publicActionResultAutoCompletePage()
{
var repository = new SampleRepository();
var data = repository.GetStatesAndTerritories();
ViewBag.serverData = new JavaScriptSerializer().Serialize(data);
return View(data);
}</pre></div><p>Note that in this example the controller is both filling in this <code class="literal">ViewBag</code> property and sending the same data to the view as a strongly-typed model; this isn't necessary, but it is handy here since we<a id="id34" class="indexterm"/> can leverage the server's <code class="literal">JavaScriptSerializer</code> class to create JSON for us before we send it to the view. Here is what the JavaScript console shows when we fill <code class="literal">ViewBag.serverData</code> with the JSON representation of an array of objects that have a <span class="strong"><strong>Name</strong></span> property:</p><div class="mediaobject"><img src="graphics/4346OT_01_11.jpg" alt="Kendo UI MVC – basics"/></div><p>It is far more common to request data from a separate endpoint and then use it once it has been retrieved. This allows for data from external sources, and breaks the dependency on the server to provide the data inside the page, which in turn means the specific server implementation is likely less important and less complex. jQuery provides several common and friendly ways of retrieving JSON data such as <code class="literal">$.ajax</code>, <code class="literal">$.get</code>, and <code class="literal">$.getJSON</code>. Kendo also provides standard ways of retrieving external data through configuration options on its widgets, often through the property method <code class="literal">transport.read</code>. We will see more about this in the rest of this chapter as we discuss DataSource and Grid, and throughout the rest of the book.</p></div>
<div class="section" title="Managing data"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Managing data</h1></div></div></div><p>The Kendo UI framework <a id="id35" class="indexterm"/>consists of two parts—the framework components<a id="id36" class="indexterm"/> and the user interface (UI) widgets<a id="id37" class="indexterm"/>. Most of the content that we will cover in this book relates to the user interface widgets and how to use them, but we will begin with the important topic of how to manage data within Kendo UI. The DataSource component and Templates provide a good starting place and will build a foundation that we will use throughout the rest of this book.</p><div class="section" title="Templates"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec06"/>Templates</h2></div></div></div><p>Kendo UI Templates<a id="id38" class="indexterm"/> are script blocks that contain a small section of page markup that is used by other Kendo UI widgets to display repeating content. We will cover these first, since they will be used throughout the rest of our examples. Here is an example of a simple template:</p><div class="informalexample"><pre class="programlisting">var template = kendo.template("&lt;span&gt;#= horseColor #&lt;/span&gt;");
$("#horseDiv").html(template({
  horseColor: 'brown}));</pre></div><p>Running this code would set the HTML content of the <code class="literal">horseDiv</code> to a span element that contained the <code class="literal">horseColor</code> value that was passed into the template function object. It would produce the following code output:</p><div class="informalexample"><pre class="programlisting">&lt;div id='horseDiv'&gt;&lt;span&gt;brown&lt;/span&gt;&lt;/div&gt;</pre></div><p>Templates can also be written <a id="id39" class="indexterm"/>within a special type of HTML script block so that their layout appears more naturally within the HTML content.</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/x-kendo-template" id="template"&gt;
&lt;tr&gt;
&lt;td&gt;#= rank #&lt;/td&gt;
&lt;td&gt;#= rating #&lt;/td&gt;
&lt;td&gt;#= title #&lt;/td&gt;
&lt;td&gt;#= year #&lt;/td&gt;
&lt;/tr&gt;
&lt;/script&gt;</pre></div><p>In this template sample, note the lines containing the code fragments <code class="literal">#= variable_name #</code>. These indicate the sections of code that are interpreted by the Kendo UI Template engine. The variable names inside these code blocks are supplied to the template when it is used. The JavaScript property names that you use inside of a template need to be properties on the object that is passed to the template when it is called. Note also that the script type is <code class="literal">x-kendo-template</code> instead of <code class="literal">javascript</code>, this is important so that the browser will not attempt to execute the script block on its own. This is a code sample showing this template being initialized in JavaScript:</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/javascript"&gt;
var template = kendo.template($("#template").html());

functionshowMovies() {
$("#moviesTable").html(template(
            {rank: 1, rating: 9.2, title: 'Prometheus', year: 2012}
        ));
    }
showMovies();
&lt;/script&gt;</pre></div><p>Notice how the template is created through a call to <code class="literal">kendo.template()</code>. This method takes the literal <a id="id40" class="indexterm"/>template code as its parameter, which is why the example shows a call to the jQuery statement <code class="literal">$("#template").html()</code> since this code returns the literal content of the template script block as it appears in the web page. So, in this example, it is equivalent to calling <code class="literal">kendo.template('&lt;tr&gt;&lt;td&gt;#= rank #&lt;/td&gt;…')</code>. This means that templates can also be created in-line by typing out the exact template code directly in the constructor.</p><p>When the template object is called as a method, it needs the data passed in as a parameter. When the example code above runs, it produces this output:</p><div class="informalexample"><pre class="programlisting">&lt;table id="moviesTable"&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;9.2&lt;/td&gt;
&lt;td&gt;Prometheus&lt;/td&gt;
&lt;td&gt;2012&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;</pre></div><p>Templates can also include JavaScript which makes it possible to do more advanced operations, such as iterating over an array and rendering the template for each item in that array individually. In this case, you supply the template with an array of objects instead of a single object as before. This time, using the explicit parameter name <code class="literal">data</code> is critical. Note how JavaScript code is surrounded by single <code class="literal">#</code> signs like <code class="literal"># javascript code #</code> and variable statements are surrounded by <code class="literal">#=</code> and then <code class="literal">#</code> as in <code class="literal">#= variable statement #</code>. Note also that the space between the <code class="literal">#</code> signs and the content inside is important.</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/x-kendo-template" id="template"&gt;
# for(vari=0; i&lt;data.length; i++) { #
&lt;tr&gt;
&lt;td&gt;#= data[i].rank #&lt;/td&gt;
&lt;td&gt;#= data[i].rating #&lt;/td&gt;
&lt;td&gt;#= data[i].title #&lt;/td&gt;
&lt;td&gt;#= data[i].year #&lt;/td&gt;
&lt;/tr&gt;
    # } #
&lt;/script&gt;</pre></div><p>Templates are<a id="id41" class="indexterm"/> an important part of building functional Kendo UI widgets, and they become even more useful when used in tandem with the DataSources and Grids as we will see later.</p></div><div class="section" title="DataSource"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec07"/>DataSource</h2></div></div></div><p>The Kendo UI DataSource<a id="id42" class="indexterm"/> is a JavaScript object that gives data a common interface for the various Kendo UI widgets. The full documentation for the DataSource object can be found on the<a id="id43" class="indexterm"/> Kendo UI website at this address: <a class="ulink" href="http://docs.kendoui.com/api/framework/datasource">http://docs.kendoui.com/api/framework/datasource</a>. The DataSource is a fairly complicated object and relies on some building blocks that deserve explanations of their own. These building blocks are the Kendo objects known as Schema, Transport, and Model. Let's address these first and then continue exploring the DataSource itself.</p><p>It is important to note that when creating a DataSource object, you should use the <code class="literal">new</code> keyword to instantiate a new object instead of just using an object literal:</p><div class="informalexample"><pre class="programlisting">var dataSource = new kendo.data.DataSource({...&lt;properties&gt;...});</pre></div><div class="section" title="Model"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec01"/>Model</h3></div></div></div><p>The Model object<a id="id44" class="indexterm"/> is from the namespace <code class="literal">kendo.data.Model</code>
<a id="id45" class="indexterm"/> and inherits from Kendo's <code class="literal">ObservableObject</code>. It provides<a id="id46" class="indexterm"/> a known structure, or model, to the data that is used by a DataSource and can also be used to enable some more advanced functionality such as change tracking. To create a new model, you must do so through the method <code class="literal">kendo.data.Model.define()</code>
<a id="id47" class="indexterm"/>. In this method, you pass an object that defines the structure of the model and sets configurable options on the data elements within. Here is an example of a model:</p><div class="informalexample"><pre class="programlisting">var Service = kendo.data.Model.define( {
id: "serviceId", // the identifier of the model
fields: {
"serviceName": {
type: "string"
        },
"unitPrice": {
type: "number"
        },
"serviceId": {
type: "number"
  }
    }
});

var currentService = new Service( {
serviceName: "Rotate Tires",
unitPrice: 29.95,
serviceId: 400
});

console.log(currentService.get("serviceName")); // outputs "Rotate Tires"
console.log(currentService.get("unitPrice")); // outputs 29.95</pre></div><p>In this example, we have created a model with three properties and we set the data type for each <a id="id48" class="indexterm"/>of them. We then created a new model object from our model definition and demonstrated how to access its properties through the <code class="literal">model.get()</code> method<a id="id49" class="indexterm"/>. We just demonstrated that the ID of the model object is defined through the property called <code class="literal">id</code>, and that the fields are defined through a property called <code class="literal">fields</code>. Within the <code class="literal">fields</code> property, these are the options that can be set to configure each data element:</p><div class="informalexample"><pre class="programlisting">fields: {
"serviceName": {    // Property name for a field
type: "string", // "string"(default), "number", "boolean", or "date"
defaultValue: "Inspection", // Default value for field when model is
                           / created. Default for string is "", number
                         // is 0, and date is new Date() (.i.e. today)
editable: true, // Specifies whether field is editable
nullable: false, // Specifies if default value should be used when empty
parse: function(){...} // Specifies custom parser for field value
validation: {...} // Specifies the validation options used by Kendo
                      // Validator such as 'required', 'min', and 'max'.
    },...
}</pre></div><p>These are not all required, but they are available when you want a very specific configuration. Here is an example from the Kendo UI site:</p><div class="informalexample"><pre class="programlisting">var Product = kendo.data.Model.define( {
id: "id", // the identifier is the "id" field (declared below)
fields: {
  /* name of the field */ 
name: {
type: "string", // the field is a string
validation: { // validation rules
required: true // the field is required
    },
defaultValue: "&lt;empty&gt;" // default field value
  },

  /* name of the field */ price: {
type: "number", // the field is a number
validation: { // validation rules
required: true, // the field is required
min: 1 // the minimum value is 1
    },
defaultValue: 99.99 // default field value
  },

  /* name of the field */ id: {
editable: false, // this field is not editable
nullable: true // a default value will not be assigned
        }
    }
});</pre></div><p>Since the properties within a model are observable, you need to use special getter and setter methods to properly <a id="id50" class="indexterm"/>trigger the behaviors that other functions and objects are observing. To retrieve the current value of one of these properties, use <code class="literal">model_name.get()</code> such as <code class="literal">currentService.get('unitPrice')</code>. To set the value of the property and thereby change it, use <code class="literal">model_name.set()</code> such as <code class="literal">currentService.set('unitPrice', 14.95)</code>. The concept of observable objects is a key feature of the MVVM framework that we will cover in a later chapter.</p><p>Two other methods available on model objects are <code class="literal">isNew</code> and <code class="literal">toJSON</code>. The <code class="literal">isNew</code> method<a id="id51" class="indexterm"/> checks if the model is new or not. This is determined by whether or not the <code class="literal">id</code> field is still set at the default value. If the <code class="literal">id</code> field is not set at the default value, the model object is not considered new. The <code class="literal">toJSON</code> method<a id="id52" class="indexterm"/> returns a JSON representation of the complete model's properties and values.</p><p>Since, as I mentioned, the model inherits from <code class="literal">ObservableObject</code>, it exposes three events to which you can attach custom behaviors—<code class="literal">change</code>, <code class="literal">get</code>, and <code class="literal">set</code>. The syntax for these is to use <code class="literal">model.bind()</code> with the name of the event and a function to handle it:</p><div class="informalexample"><pre class="programlisting">currentService.bind('change', function(e){
alert(e.field + " just changed its value to " +
currentService.get([e.field]));
});</pre></div></div><div class="section" title="Schema"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec02"/>Schema</h3></div></div></div><p>The<a id="id53" class="indexterm"/> <code class="literal">schema</code> object<a id="id54" class="indexterm"/> within a DataSource is responsible for describing the raw data format. It functions at a higher level than the model, and can even contain a model definition within it. The Schema's job is to instruct the DataSource on where to find information on errors, aggregates, data, groups, and total records within the raw data object that the DataSource is using. Each of these pieces of information exists as a property within the <code class="literal">schema</code> object like this:</p><div class="informalexample"><pre class="programlisting">schema: {
  errors: function(response) {
    return response.errors;
  },
  aggregates: function(response) {
    return response.aggregates;
  },
  data: function(response) {
    return response.data;
  },
  total: function(response) {
    return response.totalCount;
  }
}</pre></div><p>In the preceding code sample, each of the properties has been set to a function which, when passed the raw data object, will return the appropriate data from within that object. These properties can also be set to text fields, in which case the field name given must exist at the top level of the object and already contain the appropriate data in the appropriate format:</p><div class="informalexample"><pre class="programlisting">schema: {
  errors: "errors_field_name",
  aggregates: "aggregates_field_name",
  data: "data_field_name",
  total: "total_field_name"
}</pre></div><p>The <code class="literal">aggregates</code> property needs data returned in an object format with a structure something like <a id="id55" class="indexterm"/>this. Each property name inside the <span class="strong"><strong>aggregates</strong></span> object can contain information on its aggregate values, such as the maximum value (<span class="strong"><strong>max</strong></span>), minimum value (<span class="strong"><strong>min</strong></span>), or the total <span class="strong"><strong>count</strong></span>:</p><div class="informalexample"><pre class="programlisting">{
unitPrice: {   // Field Name
  max: 100,     // Aggregate function and value
  min: 1     // Aggregate function and value
  },
productName: {  // Field Name
  count: 42     // Aggregate function and value
  }
}</pre></div><p>In this case, the data has a <span class="strong"><strong>max</strong></span> and <span class="strong"><strong>min</strong></span> defined on the <span class="strong"><strong>unitPrice</strong></span> field and a <span class="strong"><strong>count</strong></span> defined on the <span class="strong"><strong>productName</strong></span> field. The DataSource object has not calculated these values; rather they are already present in the raw data sent from the remote server, and the schema has indicated to the DataSource object where to locate them. It is possible to use a function to calculate aggregate values, but it is normal for the raw data to already contain these values within it as returned by a remote server.</p><p>As I said earlier, the schema can contain a model definition within it. If this is the case, the DataSource will call <code class="literal">kendo.data.Model.define</code> on the model definition for you, in order to create the model objects from the raw data:</p><div class="informalexample"><pre class="programlisting">var dataSource = new kendo.data.DataSource({
schema: {
  model: {
    id: "ProductID",
    fields: {
    ProductID: {
      editable: false,
      nullable: true
      },
      ...</pre></div><p>If you have already defined a Model definition, you can simply reference it and the DataSource will use it just the same:</p><div class="informalexample"><pre class="programlisting">vardataSource = new kendo.data.DataSource({
schema: {
model: Product // Use the existing Product model
    }
});</pre></div><p>The <code class="literal">schema</code> object has a <code class="literal">parse</code> property, which you can set to a function that will be called before the raw data is processed. This gives you a chance to do any pre-processing if you need it. There is also a <code class="literal">type</code> property that can be set to either <code class="literal">json</code> or <code class="literal">xml</code>.</p></div><div class="section" title="Transport"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec03"/>Transport</h3></div></div></div><p>The<a id="id56" class="indexterm"/> <code class="literal">transport</code> object<a id="id57" class="indexterm"/> contains properties that a DataSource can use to communicate with a remote server for any of its normal data functions. Those data functions are <code class="literal">create</code>, <code class="literal">destroy</code>, <code class="literal">read</code>, and <code class="literal">update</code> (corresponding to the different actions that can be taken on a record). Each of these data functions exists as a property object within the <code class="literal">transport</code> object and follows the same pattern of configuration options. I should note that not all of the data functions are required; only those functions that your DataSource should perform need to be defined within your <code class="literal">transport</code> object. This is the basic configuration structure for the <code class="literal">transport</code> object.</p><div class="informalexample"><pre class="programlisting">transport: {
  create: { // this sets configuration for creating new records
            // on the remote server
  },
  destroy: { // this sets configuration for deleting records
             // on the remote server
  },
  read: {  // this sets configuration for reading records
           // from the remote server
  },
  update: { // this sets configuration for updating records
            // on the remote server
  },
  autoSync: false, // set true to automatically sync all changes
  batch: false     // set true to enable batch mode
}</pre></div><p>Here are the different options for configuring the transport object's remote data operations. Each of the four properties follows the same configuration pattern, but in this code sample I have shown different ways of configuring them for the sake of example. In this first code sample, I have configured the <span class="strong"><strong>create</strong></span> operation to simply send the value of an HTML element to the remote server.</p><div class="informalexample"><pre class="programlisting">create: { // for creating data records on remote source.
url: "/orders/create", // the url to the create service.
data: {  // data to send to the create service as part of the request.
// this can also be specified as a function call.
orderId: $("#input").val()
},
cache: true, // make false to force fresh requests every time.
contentType: "application/json", // default is 
  // "application/w-www-form-urlencoded"
dataType: "json", // "jsonp" is also common.
type: "POST" // which http verb to use.
  }</pre></div><p>In this example, we have set the destroy method to use a jQuery<code class="literal"> $.ajax</code> function to send data to <a id="id58" class="indexterm"/>the remote server instead of configuring it directly on the <span class="strong"><strong>destroy</strong></span> configuration object. You can do this if you prefer the jQuery syntax and want to easily attach callback functions to the results of the operation.</p><div class="informalexample"><pre class="programlisting">destroy: {  // same options as "create", with some alternatives shown.
      // this is how you use $.ajax() to run this remote service call.
          // this option can be used with "create", "destroy", "read",
              // and "update"
    $.ajax( {
url: "/orders/destroy",
data: options.data, // the data field contains paging, sorting,
                          // filtering, and grouping data
success: function(result) {
               // notify the DataSource that the operation is complete
Options.success(result);
}
});
}</pre></div><p>In this example, we have created a function to serve as the source of data for the read operation. This might be useful if you need to perform some custom logic before receiving remote data, or if you need to bypass the remote data source entirely for some reason.</p><div class="informalexample"><pre class="programlisting">read: {  // same options as above in "create" and "destroy".
data: function() {  // this is how you specify data as a function.
return {
id: 42,
name: "John Doe"
};
}
}</pre></div><p>Remember that the configuration options you just saw are valid for any of the transport operations, I simply showed different operations as an example for each configuration. When a DataSource<a id="id59" class="indexterm"/> is configured with a transport configuration like this, it will use the properties and functions within these options to perform the related actions. It will call <code class="literal">read</code> when it is loading data, <code class="literal">update</code> when a record has been changed, <code class="literal">destroy</code> when a record has been deleted, and <code class="literal">create</code> when a new record is added.</p></div><div class="section" title="Other DataSource properties"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec04"/>Other DataSource properties</h3></div></div></div><p>When reading from local data, you need to reference it by using the property called <code class="literal">data</code> like this:</p><div class="informalexample"><pre class="programlisting">var someData = [{ title: 'Prometheus', year: 2012, rating: 9, rank: 25 }];

var dataSource = new kendo.data.DataSource({
data: someData
});</pre></div><p>Some other properties<a id="id60" class="indexterm"/> of DataSource that we have not yet seen are more for data manipulation—<code class="literal">aggregate</code>
<a id="id61" class="indexterm"/>, <code class="literal">filter</code>
<a id="id62" class="indexterm"/>, <code class="literal">group</code>
<a id="id63" class="indexterm"/>, <code class="literal">sort</code>
<a id="id64" class="indexterm"/>, <code class="literal">page</code>
<a id="id65" class="indexterm"/>, and <code class="literal">pageSize</code>. <a id="id66" class="indexterm"/>They can work on the data client-side, or they can request that the server do the operations by using the <code class="literal">serverAggregates</code>, <code class="literal">serverFiltering</code>, <code class="literal">serverGrouping</code>, <code class="literal">serverSorting</code>, and <code class="literal">serverPaging</code> properties by adding these to the DataSource object properties list and setting them to true.</p><p>The <code class="literal">aggregate</code> property<a id="id67" class="indexterm"/> takes an array of fieldnames and aggregate function names:</p><div class="informalexample"><pre class="programlisting">aggregate: [{ field: 'title', aggregate: 'count' }]</pre></div><p>The <a id="id68" class="indexterm"/>
<code class="literal">filter</code> property can take a simple object, an array of simple objects, or a configurable object with some more logic to specify filtering that should be done on the data:</p><div class="informalexample"><pre class="programlisting">// simple object
filter: { field: 'title', operator: 'startswith', value: 'Shawshank' }

// ...or array...
filter: [{field: 'year', operator: 'eq', value: '1998'}, {field: ...

// ...or configurable object...
filter:{
logic: "or",
filters: [
{ field: 'title', operator: 'startswith', value: 'Shawshank' }]
}</pre></div><p>These are the different <a id="id69" class="indexterm"/>operators that can be used with the filter object. They can also be used when asking the server for filtering by using the <code class="literal">serverFiltering</code>
<a id="id70" class="indexterm"/> property.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Equality</strong></span>: <code class="literal">eq</code>, <code class="literal">==</code>, <code class="literal">isequalto</code>, <code class="literal">equals</code>, <code class="literal">equalto</code>, <code class="literal">equal</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Inequality</strong></span>: <code class="literal">neq</code>, <code class="literal">!=</code>, <code class="literal">isnotequalto</code>, <code class="literal">notequals</code>, <code class="literal">notequalto</code>, <code class="literal">notequal</code>, <code class="literal">ne</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Less</strong></span>: <code class="literal">lt</code>, <code class="literal">&lt;</code>, <code class="literal">islessthan</code>, <code class="literal">lessthan</code>, <code class="literal">less</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Less or Equal</strong></span>: <code class="literal">lte</code>, <code class="literal">&lt;=</code>, <code class="literal">islessthanorequalto</code>, <code class="literal">lessthanequal</code>, <code class="literal">le</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Greater</strong></span>: <code class="literal">gt</code>, <code class="literal">&gt;</code>, <code class="literal">isgreaterthan</code>, <code class="literal">greaterthan</code>, <code class="literal">greater</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Greater or Equal</strong></span>: <code class="literal">gte</code>, <code class="literal">&gt;=</code>, <code class="literal">isgreaterthanorequalto</code>, <code class="literal">greaterthanequal</code>, <code class="literal">ge</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Starts With</strong></span>: <code class="literal">startswith</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Ends With</strong></span>: <code class="literal">endswith</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Contains</strong></span>: <code class="literal">contains</code></li></ul></div><p>The <code class="literal">group</code>
<a id="id71" class="indexterm"/> and <a id="id72" class="indexterm"/>
<code class="literal">sort</code> properties can take either an object or an array of objects to specify grouping:</p><div class="informalexample"><pre class="programlisting">group: { field: 'year', dir: 'asc' }
sort: { field: 'title', dir: 'desc' }</pre></div><p>The <a id="id73" class="indexterm"/>
<code class="literal">page</code> and<a id="id74" class="indexterm"/> <code class="literal">pageSize</code> properties both take numbers to indicate the page number and records per page respectively.</p></div><div class="section" title="DataSource methods"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec05"/>DataSource methods</h3></div></div></div><p>The DataSource <a id="id75" class="indexterm"/>methods are used to either change or retrieve certain elements of the DataSource object. Several of them are related to the same data manipulation properties that we just talked about—<code class="literal">aggregate</code>, <code class="literal">aggregates</code>, <code class="literal">filter</code>, <code class="literal">group</code>, <code class="literal">page</code>, <code class="literal">pageSize</code>, and <code class="literal">sort</code>. In each of these cases, calling the method<a id="id76" class="indexterm"/> without parameters will return the current value of the like-named property within the DataSource; calling the method with a parameter value will set the value of the like-named property of the DataSource to the new value passed in:</p><div class="informalexample"><pre class="programlisting">// get the current group descriptors
var g = dataSource.group();

// set a new value for filtering
dataSource.filter({ field: 'year', operator: 'gt', value: 1990 });</pre></div><p>There are also methods for adding and removing records. The methods <code class="literal">add</code> and <code class="literal">insert</code> both add a new record to the DataSource. The <a id="id77" class="indexterm"/>
<code class="literal">add</code> method<a id="id78" class="indexterm"/> simply takes a model object or an object literal matching the current data format of the items in the DataSource. The <a id="id79" class="indexterm"/>
<code class="literal">insert</code>
<a id="id80" class="indexterm"/> method takes the same object as <code class="literal">add,</code> but also specifies an <code class="literal">index</code> property indicating the zero-based location at which to insert the new record. The<a id="id81" class="indexterm"/> <code class="literal">remove</code> method <a id="id82" class="indexterm"/>takes a model object and removes it from the DataSource:</p><div class="informalexample"><pre class="programlisting">// add a new item
dataSource.add({ year: 1997, title: 'The Fifth Element', rating: 10 });

// insert an item at the 6th position in the DataSource
dataSource.insert(5, {year: 1995, title: 'Twelve Monkeys', rating 9.5});

// remove an item from the DataSource
var movie = dataSource.at(5);
dataSource.remove(movie);</pre></div><p>The<a id="id83" class="indexterm"/> <code class="literal">at</code>
<a id="id84" class="indexterm"/>, <a id="id85" class="indexterm"/>
<code class="literal">get</code>
<a id="id86" class="indexterm"/>, and <a id="id87" class="indexterm"/>
<code class="literal">getByUid</code> methods <a id="id88" class="indexterm"/>retrieve specific records from the DataSource:</p><div class="informalexample"><pre class="programlisting">// get the 3rd item in the DataSource
var movie = dataSource.at(2);

// get the model instance with an id of 5
// (id is determined by the value of the schema.model.id property)
var movie = dataSource.get(5);

// get the model instance, or ObservableObject if no model has been set
// uid is a property inherited from ObservableObject
varuid = $("tr").data("uid");
var movie = dataSource.getByUid(uid);</pre></div><p>The<a id="id89" class="indexterm"/> <code class="literal">fetch</code>
<a id="id90" class="indexterm"/>, <a id="id91" class="indexterm"/>
<code class="literal">query</code>
<a id="id92" class="indexterm"/>, <a id="id93" class="indexterm"/>
<code class="literal">read</code>
<a id="id94" class="indexterm"/>, <code class="literal">sync</code>
<a id="id95" class="indexterm"/>
<a id="id96" class="indexterm"/>, <a id="id97" class="indexterm"/>
<code class="literal">cancelChanges</code>
<a id="id98" class="indexterm"/>, and <a id="id99" class="indexterm"/>
<code class="literal">view</code>
<a id="id100" class="indexterm"/> methods are used for managing the current contents and structure of the DataSource:</p><div class="informalexample"><pre class="programlisting">// fetches data using the current filter/sort/group/paging information.
// will fetch data from transport if data is not already available in memory.
dataSource.fetch(); // can optionally take a callback function which
                    // is executed once the data is ready.

// executes a query over the data (i.e. paging/sorting/filtering/grouping)
// this effects what the call to dataSource.view() will return.
dataSource.query({ page: 5, pageSize: 20, group:{field:'year',dir:'asc'}});

// read data into the DataSource using the transport.read setting
dataSource.read();  // also conveniently causes the change event to fire

// synchronizes changes through the transport for any pending CRUD operations.
// if batch mode is enabled, it uses only one call per operation type (create,
//   read, update, destroy)
dataSource.sync();

// discards all un-synced changes made to the DataSource
dataSource.cancelChanges();

// returns the current state of the items in the DataSource with all applied
//settings such as paging, sorting, filtering, and grouping.
// to ensure that data is available, this method should be used from
//within the change event of the DataSource
change: function(e){
    ...
kendo.render(template, dataSource.view());
}</pre></div><p>To finish up the list, we will look<a id="id101" class="indexterm"/> at<a id="id102" class="indexterm"/> <code class="literal">data</code>, <a id="id103" class="indexterm"/>
<code class="literal">total</code>
<a id="id104" class="indexterm"/>, and<a id="id105" class="indexterm"/> <a id="id106" class="indexterm"/>
<code class="literal">totalPages</code>:</p><div class="informalexample"><pre class="programlisting">// retrieve an observable array of items (the current data within the DataSource)
var movies = dataSource.data();

// set the DataSource to some new data
datSource.data([{year: 2009, title: 'Cargo', rating: 6.8}, {year: ... ]);

// get, but not set, the total number of items in the DataSource
var total = dataSource.total();

// get, but not set, the total number of pages of items in the DataSource
var pages = dataSource.totalPages();</pre></div><p>It is important to note that you must call <code class="literal">dataSource.read()</code> in order for the DataSource object to initiate the read process and populate itself with data. In other words, until you call <code class="literal">dataSource.read()</code>, there is nothing to read inside your DataSource.</p></div><div class="section" title="DataSource events"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec06"/>DataSource events</h3></div></div></div><p>There are three <a id="id107" class="indexterm"/>events that are available on the DataSource object—<a id="id108" class="indexterm"/>
<code class="literal">change</code>
<a id="id109" class="indexterm"/>, <code class="literal">error</code>
<a id="id110" class="indexterm"/>
<a id="id111" class="indexterm"/>, and <a id="id112" class="indexterm"/>
<code class="literal">requestStart</code>
<a id="id113" class="indexterm"/>. The <code class="literal">change</code> event is fired when data is changed or read from the transport. The <code class="literal">error</code> event is fired any time an error occurs during data read or data sync; it is also fired if <code class="literal">schema.errors</code> has been set within the DataSource and the response from a server operation contains data in the field specified by <code class="literal">schema.errors</code>. The <code class="literal">requestStart</code> event is fired when a data request is about to start. Like other events, these can be set as part of the DataSource definition or later through the <code class="literal">bind</code> method.</p><div class="informalexample"><pre class="programlisting">// set event handler as part of DataSource definition
var dataSource = new kendo.data.DataSource({
change: function(e){
        // handle event
    }
});

// or set event handler later through the bind method
dataSource.bind("error", function(e){
    // handle event
});</pre></div><p>As you will see later, the change event can be a good place to put some code in order to generate markup while a DataSource is reading in new records. It is also the appropriate place to put any other code that should respond to changes in the DataSource.</p></div><div class="section" title="Getting started with basic usage"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec07"/>Getting started with basic usage</h3></div></div></div><p>Now that <a id="id114" class="indexterm"/>we have seen the definitions of the components within a DataSource, we will put together our first example page to demonstrate the basic usage of the DataSource object in JavaScript. Add a new HTML file to the static folder of the project and name it <code class="literal">DataSource.html</code>. Start out by adding this code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;DataSource&lt;/title&gt;
&lt;script src="/Scripts/kendo/jquery.js"&gt;&lt;/script&gt;
&lt;script src="/Scripts/kendo/kendo.all.js"&gt;&lt;/script&gt;
&lt;link href="/Content/kendo/kendo.common.css" rel="stylesheet" /&gt;
&lt;link href="/Content/kendo/kendo.default.css" rel="stylesheet" /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="example" class="k-content"&gt;
&lt;table id="movies"&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Rank&lt;/th&gt;
&lt;th&gt;Rating&lt;/th&gt;
&lt;th&gt;Title&lt;/th&gt;
&lt;th&gt;Year&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td colspan="4"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>We have referenced jQuery and Kendo UI Web JavaScript files in the head of our page. Now let's<a id="id115" class="indexterm"/> add a template block after the <code class="literal">div</code> tag so that we can script the creation of additional table rows:</p><div class="informalexample"><pre class="programlisting">&lt;script id="template" type="text/x-kendo-template"&gt;
&lt;tr&gt;
&lt;td&gt;#= rank #&lt;/td&gt;
&lt;td&gt;#= rating #&lt;/td&gt;
&lt;td&gt;#= title #&lt;/td&gt;
&lt;td&gt;#= year #&lt;/td&gt;
&lt;/tr&gt;
&lt;script&gt;</pre></div><p>Now what we need is the ability to take some data and fill out that table using the layout as defined by this template, enter the DataSource. Add this code after the template script block that you just typed in:</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/javascript"&gt;
    $(document).ready(function() {
        // create a template using the above definition
var template = kendo.template($("#template").html());

var movies = [
{ "rank": 1, "rating": 9.2, "year": 1994,
"title": "The Shawshank Redemption" },
{ "rank": 2, "rating": 9.2, "year": 1972,
"title": "The Godfather" },
{ "rank": 3, "rating": 9, "year": 1974,
"title": "The Godfather: Part II" },
{ "rank": 4, "rating": 8.9, "year": 1966,
"title": "Il buono, ilbrutto, ilcattivo." },
{ "rank": 5, "rating": 8.9, "year": 1994,
"title": "Pulp Fiction" },
{ "rank": 6, "rating": 8.9, "year": 1957,
"title": "12 Angry Men" },
{ "rank": 7, "rating": 8.9, "year": 1993, 
"title": "Schindler's List" },
{ "rank": 8, "rating": 8.8, "year": 1975, 
"title": "One Flew Over the Cuckoo's Nest" },
{ "rank": 9, "rating": 8.8, "year": 2010, 
"title": "Inception" },
{ "rank": 10, "rating": 8.8, "year": 2008, 
"title": "The Dark Knight" }
        ];

var dataSource = new kendo.data.DataSource({
data: movies,
change: function () {
// subscribe to the CHANGE event of the data source
$("#movies tbody").html(
kendo.render(template, this.view())); // populate the table
            }
        });

// read data from the "movies" array
dataSource.read();
    });
&lt;/script&gt;</pre></div><p>Let's step through this code. You should recognize the first few lines where a Kendo template is <a id="id116" class="indexterm"/>created from the script block that you typed just a few paragraphs ago. After that, you see a JavaScript array of objects holding data about various movies. This array is going to be the raw data behind the DataSource object that comes next. The DataSource object is instantiated (note the <code class="literal">new</code> keyword) into the variable called <code class="literal">dataSource</code>. It references the <code class="literal">movies</code> array as its data parameter and then defines a function to handle the <code class="literal">change</code> event of the DataSource object. Inside this <code class="literal">change</code> event, we are using jQuery to select the <code class="literal">movies</code> table and then using <code class="literal">kendo.render()</code> to generate markup from our <code class="literal">template</code> variable for each item in our <code class="literal">dataSource</code> object. Note how the template we are using does not need special JavaScript to iterate over a collection; the DataSource object passes all of the data to the <code class="literal">change</code> event through <code class="literal">this.view()</code>. Finally, we call <code class="literal">dataSource.read()</code> which reads in the data and consequently fires the <code class="literal">change</code> event, thereby adding the content to our <code class="literal">movies</code> table.</p><p>The <code class="literal">kendo.render()</code> method takes a template function as its first argument and then an array of data as its second argument. It runs the data through the template, generating the resulting markup and returning it back to the caller. In the case above, we have used jQuery to set the <code class="literal">&lt;tbody&gt;</code> element's HTML to the result of this <code class="literal">kendo.render()</code>function.</p><div class="section" title="Binding to remote data"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl4sec01"/>Binding to remote data</h4></div></div></div><p>Our last<a id="id117" class="indexterm"/> example was a demonstration of using local data (a JavaScript array) with a DataSource. It is also very common and important to use the DataSource with data that exists on a remote system. To simulate this, we will turn to the ASP.NET MVC framework to create a server for our remote data.</p><p>In the Visual Studio Solution Explorer window, right-click on the <span class="strong"><strong>Controllers</strong></span> folder and choose <span class="strong"><strong>Add, Controller</strong></span>. Name the new controller <span class="strong"><strong>KendoController</strong></span> and leave the rest of the dialog that opens at its default settings.</p><div class="mediaobject"><img src="graphics/4346OT_01_08.jpg" alt="Binding to remote data"/></div><p>The newly created controller class will appear in the editor portion of Visual Studio and you will see a <a id="id118" class="indexterm"/>generic <code class="literal">Index()</code> method sitting in the file. This method is known as an <span class="strong"><strong>action method</strong></span>
<a id="id119" class="indexterm"/> and is used to process an HTML response back to a web browser. The comment above it indicates the route and HTTP verb that are used to locate this action method:</p><div class="informalexample"><pre class="programlisting">// GET: /Kendo/

public ActionResult Index()
{
return View();
}</pre></div><p>In this case, it shows that typing the route "Kendo", as in <code class="literal">http://&lt;server-name&gt;/Kendo/</code>, would match this action method and cause it to return its view to the browser. It would also work to specify <code class="literal">http://&lt;server-name&gt;/Kendo/Index</code> and it is usual to supply both the controller name, "Kendo", and the action method name, "Index", in a normal route. As a matter of convention, the MVC framework names all controller classes with the suffix "Controller", but it does not use the suffix when referring to the controller in an actual route (such as the path in the address bar of your web browser). This means<a id="id120" class="indexterm"/> that the <code class="literal">KendoController</code> class<a id="id121" class="indexterm"/> is referred to as "kendo" when it is part of a route. GET is the default HTTP verb that this controller will accept when the browser requests this route.</p><p>At the top of <code class="literal">KendoController</code>, add a <code class="literal">using</code> statement for a namespace that we are about to create—<code class="literal">LearningKendoUIWeb.Repository</code>. Also add <code class="literal">Kendo.Mvc.UI</code> and <code class="literal">Kendo.Mvc.Extensions</code>:</p><div class="mediaobject"><img src="graphics/4346OT_01_09.jpg" alt="Binding to remote data"/></div><p>Add a new action method called <code class="literal">RemoteData</code> and set it up like this:</p><div class="informalexample"><pre class="programlisting">publicJsonResultRemoteData()
{
var repository = new SampleRepository();
var data = repository.GetAllMovies();
returnJson(result, JsonRequestBehavior.AllowGet);
}</pre></div><p>This is a simple method that instantiates a repository (which we will create in just a moment), gathers some data from that repository, and then returns it to the client as JSON<a id="id122" class="indexterm"/>. The second parameter to the <code class="literal">Json()</code> method<a id="id123" class="indexterm"/> notifies the controller class that it is acceptable to return JSON data from this method even though the verb is GET.</p><p>Right-click on the <span class="strong"><strong>Models</strong></span> folder and click on <span class="strong"><strong>Add, Class</strong></span>. Name the new class <code class="literal">Movie.cs</code>. This is a very simple class to hold data about a movie:</p><div class="informalexample"><pre class="programlisting">namespace LearningKendoUIWeb.Models
{
public class Movie
  {
public int Rank { get; set; }
public double Rating { get; set; }
public int Year { get; set; }
public string Title { get; set; }
  }
}</pre></div><p>Add a new folder to the project and call it <code class="literal">Repository</code>. Add a class to this folder called <code class="literal">SampleRepository.cs</code>:</p><div class="informalexample"><pre class="programlisting">using LearningKendoUIWeb.Models;

namespaceLearningKendoUIWeb.Repository
{
public class SampleRepository
  {
public List&lt;Movie&gt;GetAllMovies()
    {
var movies = new List&lt;Movie&gt;{
new Movie { Rank = 1, Rating = 9.2, 
                    Title = "The Shawshank Redemption", Year = 1994 },
new Movie { Rank = 2, Rating = 9.1,
                    Title = "The Godfather", Year = 1974 }
            };
            Return movies;
      }
   }
}</pre></div><p>Feel free to add more movies to this list, the more the better. Now we have a simple repository<a id="id124" class="indexterm"/> class that can return a list of movie objects, so the action method we created in <code class="literal">KendoController</code> is finally valid. When the <code class="literal">RemoteData</code> action method is called, it will return the list of Movie objects as a JSON array of objects like this:</p><div class="mediaobject"><img src="graphics/4346OT_01_10.jpg" alt="Binding to remote data"/></div><p>I have added more movies to my repository, but the structure of the result is the same. This is exactly the sort of data that DataSource knows how to use. Here is how to wire up DataSource to use it, find the line in the <code class="literal">RemoteData.cshtml</code> file where the <code class="literal">dataSource</code> variable is created in JavaScript and change the code so that it looks like this:</p><div class="informalexample"><pre class="programlisting">var dataSource = new kendo.data.DataSource({
  transport: {
read: {
url: 'Kendo/RemoteData/'
        }
    },
change: function () {
        $("#movies tbody").html(kendo.render(template, this.view()));
    }
});</pre></div><p>Instead of <a id="id125" class="indexterm"/>the using the <code class="literal">data</code> property to point to a locally available array of objects, we are using the <code class="literal">transport</code> property to tell Kendo that we need to request the data from a remote source. In this case, all we have specified is how the DataSource can read remote data and that is all we need, since the only method call we make to the DataSource is in this line:</p><div class="informalexample"><pre class="programlisting">dataSource.read();</pre></div><p>These examples have only scratched the surface, but it does show the DataSource in action in a real page. It is hard, however, to really demonstrate a DataSource object in isolation. The DataSource is only actually useful when it serves a data-rich widget, like the Kendo UI Grid. In the pages to follow, we will explore this Grid widget and will be able to demonstrate a more fully configured DataSource that the Grid can take full advantage of. We will also see how to configure both the Grid and the DataSource through the MVC Razor syntax within a view page.</p></div></div></div></div>
<div class="section" title="Page layout"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Page layout</h1></div></div></div><p>Now that we have discussed the DataSource and Template features of the Kendo UI framework, we can turn our attention to widgets that provide graphical elements on our web pages. Some of these widgets actually assist you in organizing the content or the data in your page, and the Grid is a very good example of this, which we will cover next.</p><div class="section" title="Grid"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>Grid</h2></div></div></div><p>The Kendo UI Grid<a id="id126" class="indexterm"/> is a very handy widget to be familiar with. It is an easy way to transform data into a usable and interactive grid that would normally take a full-featured server control (as in ASP.NET WebForms) or some complex and time-consuming JavaScript development in the page markup. In fact, it is remarkably easy <a id="id127" class="indexterm"/>to set up a simple example. Let's say we have some JavaScript data like this that we want to display within a web page:</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/javascript"&gt;
var repairs = [{
name: "State Inspection",
price: 39.75,
labor: 1,
staff: 1
            },
            {
name: "Brake &amp; Clutch System Service",
price: 149.95,
labor: 3,
staff: 1
            },
            {
name: "Power Steering Service",
price: 109.96,
labor: 3,
staff: 1
            },
            {
name: "Cooling System Service",
price: 126.95,
labor: 2,
staff: 1
            },
            {
name: "Oil Change",
price: 37.77,
labor: 1,
staff: 1
            },
            {
name: "CV Axle Replacement",
price: 271.11,
labor: 5,
staff: 2
            },
            {
name: "Battery Cabling Replacement",
price: 179.97,
labor: 2,
staff: 1
            },
            {
name: "Battery Replacement",
price: 118.38,
labor: 1,
staff: 1
            },
            {
name: "Fuel Induction Service",
price: 168.88,
labor: 3,
staff: 2
            },
            {
name: "Engine Air Filter Replacement",
price: 36.63,
labor: 1,
staff: 1
            },
            {
name: "Timing Belt Replacement",
price: 221.75,
labor: 3,
staff: 2
            },
            {
name: "Drive Belt Replacement",
price: 194.79,
labor: 3,
staff: 2
            }
        ];
&lt;/script&gt;</pre></div><p>In order to turn this into a well-formatted dynamic table, it would normally require some looping and<a id="id128" class="indexterm"/> HTML markup generation, probably through jQuery. With Kendo UI, however, all we have to do is create a <code class="literal">kendoGrid()</code> function<a id="id129" class="indexterm"/> and we can see some magic in action. Take note of how little code is involved to create a grid from this data here:</p><div class="informalexample"><pre class="programlisting">&lt;div id="repairsGrid"&gt;&lt;/div&gt;
&lt;script type="text/javascript"&gt;
        $("#repairsGrid").kendoGrid({
dataSource: repairs
        });
&lt;/script&gt;</pre></div><p>And here is the page output from this simple code:</p><div class="mediaobject"><img src="graphics/4346OT_01_12.jpg" alt="Grid"/></div><p>See how the code involved didn't even require a table to be present within the web page? Kendo UI <a id="id130" class="indexterm"/>generated everything that it needed in order to display this data as a grid on the page. Now we can turn our attention to creating grids that are more interactive and intelligent, and explore what the Kendo UI Grid widget has to offer in displaying data from different sources.</p><div class="section" title="Columns"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec08"/>Columns</h3></div></div></div><p>First of all, we can take control of the<a id="id131" class="indexterm"/> formatting of the Grid by specifying properties on a <code class="literal">columns</code> object array<a id="id132" class="indexterm"/>. This object array is used to indicate to the Grid how to display the data appropriately so that it appears as you want on the page. Here is a columns object example<a id="id133" class="indexterm"/> using the Grid that we saw just a moment ago to demonstrate the various options available for formatting:</p><div class="informalexample"><pre class="programlisting">$("#repairsGrid").kendoGrid({
...
columns: [{
field: "name",
title: "Service",
width: 300
    },
    {
field: "price",
title: "Price",
width: 50,
format: "${0:##.##}"
    },
    {
field: "labor",
title: "Labor",
width: 50,
template: "#= labor# hour(s)"
    },
    {
field: "staff",
title: "Staff",
width: 50,
template: "#= staff # tech(s)"
    }]</pre></div><p>Here is the effect on the output:</p><div class="mediaobject"><img src="graphics/4346OT_01_13.jpg" alt="Columns"/></div><p>There are also<a id="id134" class="indexterm"/> simple options for enabling some dynamic interactive behaviors by specifying which<a id="id135" class="indexterm"/> columns are filterable or sortable. Note that these are only useful if the Grid, as a whole, has <code class="literal">pageable</code> and/or <code class="literal">sortable</code> set to <code class="literal">true</code>.</p><div class="informalexample"><pre class="programlisting">$("#repairsGrid").kendoGrid({
    ...
columns: [{
field: "name",
title: "Service",
width: 300,
sortable: true,
filterable: true
    },
    {
field: "price",
title: "Price",
width: 50,
format: "${0:##.##}",
sortable: true,
filterable: true
    },
    {
field: "labor",
title: "Labor",
width: 50,
template: "#= labor # hour(s)",
sortable: true,
filterable: true
    },
    {
field: "staff",
title: "Staff",
width: 50,
template: "#= staff # tech(s)",
sortable: false,
filterable: false
    }],
sortable: true,
filterable: true</pre></div><p>Note in the following screenshot, how the <span class="strong"><strong>Service</strong></span> column has been sorted alphabetically and I have clicked the filter icon, which enables me to input a filter on the data to be displayed on the page.<a id="id136" class="indexterm"/> You can see the filter icon right above the open window on the screen, it looks like a small funnel. Kendo UI takes care of actually doing the sorting and the filtering by means of the <code class="literal">dataSource</code> property that we set on the Grid. This means that settings you have put in place on the <code class="literal">dataSource</code> that you supply to the Grid will be used by the Grid for sorting and filtering:</p><div class="mediaobject"><img src="graphics/4346OT_01_14.jpg" alt="Columns"/></div><p>When the Grid has been configured to allow editing of data, the <code class="literal">columns</code> property<a id="id137" class="indexterm"/> allows you to specify a <a id="id138" class="indexterm"/>custom editor function that can be used when changing data in that column. This can be a useful way of giving the user an easier way to input a change, or even to control the sort of changes that can be made. For example, this updated code sample shows adding an editor function to the <code class="literal">Labor</code> column so that it displays a drop-down list when edited, giving the user a specific set of options to choose from. There are a couple of other changes here that we will talk about next:</p><div class="informalexample"><pre class="programlisting">$("#repairsGrid").kendoGrid({
dataSource: repairs,
columns: [
  {
title: "Action",
width: 75,
command: ["edit"]
  },
{
field: "name",
title: "Service",
width: 300,
sortable: true,
filterable: true
  },
{
field: "price",
title: "Price",
width: 50,
format: "${0:##.##}",
sortable: true,
filterable: true
  },
{
field: "labor",
title: "Labor",
width: 50,
template: "#= labor # hour(s)",
sortable: true,
filterable: true,
editor: function (container, options) {
varselectEditor = $("&lt;select name=" + options.field +
"&gt;&lt;/select&gt;");
selectEditor.append(new Option("1", 1));
selectEditor.append(new Option("2", 2));
selectEditor.append(new Option("3", 3));
selectEditor.append(new Option("4", 4));
selectEditor.append(new Option("5", 5));
selectEditor.appendTo(container);
    }
  },
  {
field: "staff",
title: "Staff",
width: 50,
template: "#= staff # tech(s)",
sortable: false,
filterable: false
  }],
sortable: true,
filterable: true,
editable: "inline"</pre></div><p>Here is the output of the <code class="literal">editor</code> function, showing the drop-down list that appears when a row enters the<a id="id139" class="indexterm"/> edit mode. It is important to set the <code class="literal">name</code> attribute of the <code class="literal">&lt;select&gt;</code> element<a id="id140" class="indexterm"/> so that Kendo can bind the user's choice back to the <code class="literal">dataSource</code> when the edit is saved.</p><div class="mediaobject"><img src="graphics/4346OT_01_15.jpg" alt="Columns"/></div><p>When using a custom editor function like this, the <code class="literal">container</code> and <code class="literal">options</code> objects that are passed in have some specific properties available to them that can be useful to you when writing your function. The <code class="literal">container</code> object is the page element to which you should add any new mark-up, as we did in our example. The <code class="literal">options</code> object contains two properties: <code class="literal">options.field</code> and <code class="literal">options.model</code>. The <code class="literal">options.field</code>
<a id="id141" class="indexterm"/> property contains the name of the field that you should use in your new mark-up so that Kendo can bind everything properly. The <code class="literal">options.model</code> property<a id="id142" class="indexterm"/> contains a reference to the actual model of the data being edited if one was specified in the <code class="literal">dataSource</code>; this gives you access to data that could be important when creating your custom logic.</p><p>Additional changes<a id="id143" class="indexterm"/> that appeared in the code sample were the <code class="literal">editable: "inline"</code> property on the Grid definition (required for editing to work; the alternative to <code class="literal">inline</code> is <code class="literal">popup</code>, which opens a special window for editing the record), and the new column that includes command buttons. The command property of a column object takes an array of command buttons to generate within each row. The available options for this array include <code class="literal">edit</code>, <code class="literal">create</code>, <code class="literal">destroy</code>, <code class="literal">save</code>, and <code class="literal">cancel</code>. We will return to this topic soon when we go into more detail on how to bind a Grid to CRUD operations.</p><p>Note that all that was necessary to add these command buttons to the Grid was to specify the <code class="literal">command</code> property of the column object. I did not add any <code class="literal">&lt;button&gt;</code> elements<a id="id144" class="indexterm"/> to the column, nor did I create JavaScript event handlers. Kendo UI generated all of this necessary markup for me through the Grid widget's existing functionality.</p><p>A significant portion<a id="id145" class="indexterm"/> of Grid functionality can be enabled through properties that describe the Grid's current capabilities. Each of them end in -able. These properties are <a id="id146" class="indexterm"/>
<code class="literal">editable</code>
<a id="id147" class="indexterm"/>, <a id="id148" class="indexterm"/>
<code class="literal">filterable</code>
<a id="id149" class="indexterm"/>, <a id="id150" class="indexterm"/>
<code class="literal">groupable</code>
<a id="id151" class="indexterm"/>, <a id="id152" class="indexterm"/>
<code class="literal">navigatable</code>
<a id="id153" class="indexterm"/>, <a id="id154" class="indexterm"/>
<code class="literal">pageable</code>
<a id="id155" class="indexterm"/>, <a id="id156" class="indexterm"/>
<code class="literal">scrollable</code>
<a id="id157" class="indexterm"/>, <a id="id158" class="indexterm"/>
<code class="literal">selectable</code>
<a id="id159" class="indexterm"/>, and <a id="id160" class="indexterm"/>
<code class="literal">sortable</code>
<a id="id161" class="indexterm"/>. We have already seen <code class="literal">filterable</code> and <code class="literal">sortable</code> and that they take simple true/false values when used. We have also seen <code class="literal">editable</code>, but there is more that can be done with this option:</p><div class="informalexample"><pre class="programlisting">...
editable: {
confirmation: "Are you sure?", // text displayed to confirm a delete operation
destroy: true,         // whether or not to delete item when button is clicked
mode: "popup",                 // options are "incell", "inline", and "popup"
template: "#= ... #",          // template to use for pop-up editing
update: true                   // switch item to edit mode when clicked?
}</pre></div><p>The <code class="literal">groupable</code> property lets the user group columns by dragging them to the top of the screen. The <code class="literal">groupable</code> option also includes a property, <code class="literal">groupable.messages.empty</code> that will be displayed in an empty grouping area on a Grid. If you specify this <code class="literal">messages</code> property, the <code class="literal">groupable: true</code> value is assumed and does not need to be specified. The <code class="literal">navigatable</code> property turns on or off keyboard navigation within the Grid. Here is how the bottom of our Grid definition would look with <code class="literal">groupable</code> and <code class="literal">navigatable</code> turned on:</p><div class="informalexample"><pre class="programlisting">...
sortable: true,
filterable: true,
editable: "inline",
navigatable: true,
groupable: {
messages: {
empty: "Drag column header here for grouping"
    }
}</pre></div><p>And the output in the page when rendered with these options:</p><div class="mediaobject"><img src="graphics/4346OT_01_16.jpg" alt="Columns"/></div><p>The <code class="literal">pageable</code> option <a id="id162" class="indexterm"/>can be simply set to <code class="literal">true</code>/<code class="literal">false</code>, like several of the other options, but it also allows for more fine-grained control if you desire it:</p><div class="informalexample"><pre class="programlisting">...
pageable: {
pageSize: 10,
previousNext: true, // show buttons navigating to first/last/next/previous
numeric: true, // show numeric portion of the pager in the Grid?
buttonCount: 10, // number of buttons to show in numeric pager
input: true, // create input element allowing user to navigate to page
pageSizes: [5,10,20], //array of page size choices for user
refresh: true, //  show a refresh button in the Grid?
info: true, // show a label with current paging information in it
messages: {
display: "Detail Template – {1} of {2} items", // info text
empty: "No Records", // text to show when there are no records
page: "Page", // first part of text of input option
of: "of Detail Template", // last part of text of input option
itemsPerPage: "items per page", // text for selecting page size
first: "Go to first page", // text of first page button tooltip
previous: "Go to the previous page", // previous page tooltip
next: "Go to next page", // next page tooltip
last: "Go to the last page", // last page tooltip
refresh: "Refresh" // text of refresh button tooltip
  }
}</pre></div><p>Our example code <a id="id163" class="indexterm"/>configured for paging with 10 items per page would appear like this:</p><div class="informalexample"><pre class="programlisting">...
sortable: true,
filterable: true,
editable: "inline",
navigatable: true,
groupable: {
messages: {
empty: "Drag column header here for grouping"
}
},
<span class="strong"><strong>pageable: {</strong></span>
<span class="strong"><strong>pageSize: 10</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>And the output generated with these options:</p><div class="mediaobject"><img src="graphics/4346OT_01_17.jpg" alt="Columns"/></div><p>The <code class="literal">scrollable</code>
<a id="id164" class="indexterm"/> property configures whether a Grid can have a vertical scroll bar within it, and is usually specified <a id="id165" class="indexterm"/>if you have restricted the height of the Grid on your page. It can be set to a simple Boolean value of <code class="literal">true/false</code>.</p><p>The <code class="literal">selectable</code>
<a id="id166" class="indexterm"/> property indicates whether selection is enabled or disabled within the Grid. Its possible values are <code class="literal">row</code>, <code class="literal">cell</code>, <code class="literal">multiple, row</code>, and <code class="literal">multiple, cell</code>. Here is how our example Grid looks with <code class="literal">selectable: "multiple, cell"</code>.</p><p>Note that I have selected some rows for display.</p><div class="mediaobject"><img src="graphics/4346OT_01_18.jpg" alt="Columns"/></div><p>The <code class="literal">toolbar</code>
<a id="id167" class="indexterm"/> property enables a toolbar for the Grid with a certain set of commands, similar to the command<a id="id168" class="indexterm"/> property of the column objects. Each toolbar within the <code class="literal">toolbar</code> object array can have a <code class="literal">name</code>, <code class="literal">template</code>, and <code class="literal">text</code> configured:</p><div class="informalexample"><pre class="programlisting">...
toolbar: [
"create",
{ name: "save", text: "Save This Record" },
{ name: "cancel", text: "Cancel Changes: }]</pre></div><p>Note how a toolbar can be a simple text value indicating which command to implement. You can also specify objects to contain the configuration data that you want (as in the preceding screenshot). Refer to the following screenshot:</p><div class="mediaobject"><img src="graphics/4346OT_01_19.jpg" alt="Columns"/></div></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Summary</h1></div></div></div><p>In this chapter, we have covered a lot of fundamental information so that you can get started creating Kendo UI-enabled web pages properly. It is essential to understand how to use a Template and how to use a DataSource in order to do much at all with the Kendo UI framework. Second to these, the Grid is an essential component of the Kendo UI framework and knowing how to configure it will give you a head start when building pages that need to display tabular data to a user.</p><p>In the next chapter, we will learn about the AutoComplete widget. It allows you to add a word-wheel effect to input text boxes, to assist users in typing information that can be looked up from a data source. It is a great tool that many users are drawn to and will add a lot of functionality to your web pages without a lot of effort in writing the code.</p></div></body></html>