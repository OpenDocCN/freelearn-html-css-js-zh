<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch10"/>Chapter 10. A Sample PhoneGap Project</h1></div></div></div><p>
<em>Until now, we have seen how to create a PhoneGap project, use various APIs individually, and finally how to build the application. After learning these important things, we will need to package all our learning and create an actual app with all the APIs. Working on this demo app project will help you to understand the practical usage of the APIs and how to put them to use. I have tried to make the project as simple as possible, so that you can understand it without any difficulties.</em>
</p><p>In this chapter, you will:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create a new PhoneGap project</li><li class="listitem" style="list-style-type: disc">Learn how to include Bootstrap and other libraries in the project</li><li class="listitem" style="list-style-type: disc">Develop the demo app using all the APIs provided by PhoneGap</li><li class="listitem" style="list-style-type: disc">Build the application and try it in a real device</li></ul></div><div><div><div><div><h1 class="title"><a id="ch10lvl1sec90"/>What's in the app?</h1></div></div></div><p>The<a id="id719" class="indexterm"/> demo app that we are going to create will showcase all the features of the PhoneGap/Cordova APIs. The app will list all sections in a sliding menu and the user can choose which API they are interested in. The demo app <a id="id720" class="indexterm"/>is available in the Google Play Store at <a class="ulink" href="https://play.google.com/store/apps/details?id=com.iyaffle.phonegap">https://play.google.com/store/apps/details?id=com.iyaffle.phonegap</a>.</p><div><div><h3 class="title"><a id="note45"/>Note</h3><p>For the benefit of everyone, the complete project source is available in the GitHub repository. Readers can view or download the entire source from <a class="ulink" href="https://github.com/iYaffle/PhoneGap-Demo-App">https://github.com/iYaffle/PhoneGap-Demo-App</a>. Happy learning!</p></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec81"/>Libraries used</h2></div></div></div><p>We are going to use the<a id="id721" class="indexterm"/> following libraries in our demo app. We will find out why we are using each of these libraries in our demo.</p><div><div><div><div><h3 class="title"><a id="ch10lvl3sec03"/>Twitter Bootstrap</h3></div></div></div><p>Bootstrap is<a id="id722" class="indexterm"/> the most popular HTML, CSS, and <a id="id723" class="indexterm"/>JS framework for developing responsive projects on the web. Bootstrap <a id="id724" class="indexterm"/>will be our primary UI framework of the project.</p><p>It can be downloaded from <a class="ulink" href="http://www.getbootstrap.com/">http://www.getbootstrap.com/</a>.</p></div><div><div><div><div><h3 class="title"><a id="ch10lvl3sec04"/>jQuery</h3></div></div></div><p>jQuery is<a id="id725" class="indexterm"/> a JavaScript framework that has changed the<a id="id726" class="indexterm"/> life of many web developers. It has redefined the way JavaScript is coded. It provides an API to<a id="id727" class="indexterm"/> easily deal with DOM manipulation, event handling, animation, and AJAX.</p><p>It can be downloaded from <a class="ulink" href="http://www.jquery.com/">http://www.jquery.com/</a>.</p></div><div><div><div><div><h3 class="title"><a id="ch10lvl3sec05"/>mMenu</h3></div></div></div><p>mMenu <a id="id728" class="indexterm"/>is<a id="id729" class="indexterm"/> the famous jQuery plugin that creates sliding submenus for websites and web apps. It has a dependency of jQuery and we will be using it to create our sliding menu.</p><a id="id730" class="indexterm"/><p>It can be downloaded from <a class="ulink" href="http://www.mmenu.frebsite.nl/">http://www.mmenu.frebsite.nl/</a>.</p></div><div><div><div><div><h3 class="title"><a id="ch10lvl3sec06"/>FastClick</h3></div></div></div><p>FastClick<a id="id731" class="indexterm"/> is a tiny but useful library, which will<a id="id732" class="indexterm"/> help us to eliminate the 300 ms delay in touch devices. For more information on this, refer to the <em>Handling click delays</em> section of <a class="link" href="ch08.html" title="Chapter 8. Advanced PhoneGap">Chapter 8</a>, <em>Advanced PhoneGap</em>.</p><a id="id733" class="indexterm"/><p>It can be downloaded from <a class="ulink" href="https://github.com/ftlabs/fastclick">https://github.com/ftlabs/fastclick</a>.</p><div><div><h3 class="title"><a id="note46"/>Note</h3><p>This chapter will be a basic one and it's highly recommended for the readers to read the previous chapters to understand the APIs before proceeding. We have covered only the critical aspects of the project and the rest is left to the readers to read and interpret in order to encourage development of the project.</p></div></div></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec91"/>Creating the project</h1></div></div></div><p>As the first step<a id="id734" class="indexterm"/> of our activity, we need to create a new PhoneGap project. We will be using PhoneGap CLI tools to create a project and install various plugins.</p><p>Now, let's create a new project named <code class="literal">PhoneGap</code>, using PhoneGap CLI:</p><div><pre class="programlisting">
<strong>C:\&gt; phonegap create PhoneGap</strong>
</pre></div><p>After creating the project, as you know, a new directory with the project name will be created. Let's make that our current directory:</p><div><pre class="programlisting">
<strong>C:\&gt; cd PhoneGap</strong>
</pre></div><p>Now, let's add Android as our target platform. If you are interested, you can add other platforms too, if you have the required SDKs installed:</p><div><pre class="programlisting">
<strong>C:\PhoneGap&gt; phonegap platform add android</strong>
</pre></div><p>We should have the <code class="literal">fastclick.js</code>, <code class="literal">jquery.mmenu.min.all</code>, and <code class="literal">jquery-2.1.3.min.js</code> libraries downloaded in the <code class="literal">js</code> folder of the project's home <code class="literal">www</code> directory. Note that all CSS files of the jQuery and mMenu libraries should be placed in the <code class="literal">css</code> directory of the <code class="literal">www</code> directory. Now, we can kick off our project development.</p><div><div><div><div><h2 class="title"><a id="ch10lvl2sec82"/>Installing plugins</h2></div></div></div><p>As our <a id="id735" class="indexterm"/>application is going to use almost all of the APIs, we will be installing them in our project. You can either install all of these plugins now or install them as and when required. The commands to install them are as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-dialogs</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-device</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-vibration</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-camera</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-network-information</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-contacts</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-splashscreen</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-device-motion</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-geolocation</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-media-capture</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-file</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-globalization</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-inappbrowser</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cordova plugin add cordova-plugin-media</code></li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec83"/>Design of the homepage</h2></div></div></div><p>For every app, the <code class="literal">index.html</code> page will be<a id="id736" class="indexterm"/> the homepage, and that's where our application will start too. To begin from scratch, clear out the body contents of the file. Inside the <code class="literal">&lt;body&gt;</code> tag of the <code class="literal">index.html</code> file, we will add the following code:</p><div><pre class="programlisting">&lt;div id="page"&gt;
    &lt;div class="header"&gt;
        &lt;a href="#menu"&gt;&lt;/a&gt;
        PhoneGap Demo Home
    &lt;/div&gt;

    &lt;div class="content"&gt;
        &lt;div class="jumbotron"&gt;
            &lt;h1&gt;Welcome PhoneGap&lt;/h1&gt;
            &lt;img src="img/logo.png" /&gt;
            &lt;p&gt;
              &lt;button id="openMenu" class="btn-lg btn-primary" onclick=""&gt;Start Here&lt;/button&gt;
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;

&lt;/div&gt;</pre></div><p>To understand each of the sections in the preceding code, we will need to understand the Bootstrap components. In Bootstrap, we can have a header for the page that is identified by the <code class="literal">header</code> class. The actual contents of the page are placed under the <code class="literal">div</code> element with the <code class="literal">content</code> class. These are standard Bootstrap techniques and you can easily understand them if you read the Bootstrap documents.</p><p>Now, we'll add the CSS file references to the <code class="literal">&lt;head&gt;</code> section of the page, as follows:</p><div><pre class="programlisting">&lt; link rel="stylesheet" type="text/css" href="css/demo.css"&gt;
&lt; link rel="stylesheet" type="text/css" href="css/index.css"&gt;</pre></div><p>Now, we will add all the required JavaScript files that we are going to use above the <code class="literal">&lt;/body&gt;</code> tag. Ensure that you are adding each file in the correct order, so that dependencies are resolved:</p><div><pre class="programlisting">&lt;script type="text/javascript" src="img/cordova.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="img/jquery-2.1.3.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="img/jquery.mmenu.min.all.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="img/fastclick.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="img/main.js"&gt;&lt;/script&gt;</pre></div><a id="id737" class="indexterm"/><p>You may have noticed that we have added a button with the <code class="literal">id</code> value as <code class="literal">openMenu</code>. Now, we will add the event for it. We are trying to open the slide menu when the user clicks on the button. The slide menu has become a famous approach recently, as it is used in the Facebook mobile application:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    $("#openMenu").click(function() {
        $("#menu").trigger("open.mm");
    });
&lt;/script&gt;</pre></div><p>With the provided CSS styling (refer to the <code class="literal">.css</code> files), you would see the app as shown in the following screenshot:</p><div><img src="img/B03476_10_01.jpg" alt="Design of the homepage"/></div><p>Now, let's <a id="id738" class="indexterm"/>see the sliding menu. We have defined the menu content in a separate template file and we are going to include that in our page using AJAX. We will have the code in a separate JS file <code class="literal">main.js</code> so that we can include it in every page. The code snippet is provided here for your reference:</p><div><pre class="programlisting">$(document).ready(function() {
    $.ajax({
        url: "menu.html",
        success: function(result) {
            $("#page").prepend(result);

            $("#menu").mmenu({
                "header": {
                    "title": "PhoneGap Demo Menu",
                    "add": true,
                    "update": true
                }
            });
        }
    });
});</pre></div><p>The <code class="literal">menu.html</code> file <a id="id739" class="indexterm"/>will have a plain list with links to all the pages that we have created. Check that out for yourself here:</p><div><pre class="programlisting">&lt;nav id="menu"&gt;
   &lt;ul&gt;
      &lt;li&gt;&lt;a href="motion.html"&gt;Accelerometer&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="device.html"&gt;Device Info&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="camera.html"&gt;Camera&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="capture.html"&gt;Capture&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="connection.html"&gt;Connection&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="contacts.html"&gt;Contacts&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="file.html"&gt;Files&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="geolocation.html"&gt;GeoLocation&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="globalization.html"&gt;Globalization&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="browser.html"&gt;InApp Browser&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="notifications.html"&gt;Notifications&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="splash.html"&gt;Splash Screen&lt;/a&gt;&lt;/li&gt;
      &lt;li class="Spacer Label"&gt;This demo app is for learning only&lt;/li&gt;
      &lt;li&gt;&lt;p&gt;For bugs, issues &amp; suggestions please create an issue in GitHub. Feel free to fork the GitHub Repo and contribute to make it better.&lt;/p&gt;&lt;/li&gt;
   &lt;/ul&gt;
&lt;/nav&gt;</pre></div><p>This code takes care of getting the content of <code class="literal">menu.html</code> and pushes that to the HTML document under the <code class="literal">div</code> element identified by the <code class="literal">id</code> value as <code class="literal">page</code>. Then, we apply the sliding option on the menu item that we have included.</p><p>After doing this correctly, when you click on the <strong>Start Here</strong> button, you will see the sliding menu open in front of you:</p><div><img src="img/B03476_10_02.jpg" alt="Design of the homepage"/></div><p>With this, we have <a id="id740" class="indexterm"/>made our basic framework of the app ready. Next, we will learn about each API and their usage. Going forward, only the main snippet will be provided. It will be helpful for readers to learn and try the rest themselves.</p></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec84"/>Using the Accelerometer API</h2></div></div></div><p>We are now<a id="id741" class="indexterm"/> going to use the Accelerometer API. Using<a id="id742" class="indexterm"/> this API, we are going to get the acceleration coordinates and display them in the application. For the same, we have defined some <code class="literal">div</code> elements, as shown here:</p><div><pre class="programlisting">&lt;div class="content"&gt;
    &lt;br/&gt;Acceleration X :
    &lt;div id="dataX"&gt;0&lt;/div&gt;
    &lt;br/&gt;
    &lt;br/&gt;Acceleration Y :
    &lt;div id="dataY"&gt;0&lt;/div&gt;
    &lt;br/&gt;
    &lt;br/&gt;Acceleration Z :
    &lt;div id="dataZ"&gt;0&lt;/div&gt;
    &lt;br/&gt;
    &lt;br/&gt;TimeStamp :
    &lt;div id="timeStamp"&gt;0&lt;/div&gt;
    &lt;br/&gt;
    &lt;br/&gt;</pre></div><p>Next, we have <a id="id743" class="indexterm"/>two buttons to start and stop the acceleration watch:</p><div><pre class="programlisting">    &lt;button id="start" onclick="onDeviceReady();" style="display:none;" class="btn-lg btn-success"&gt;Start Watching&lt;/button&gt;
    &lt;br&gt;
    &lt;button id="stop" onclick="stopWatch();" class="btn-lg btn-danger"&gt;Stop Watching&lt;/button&gt;
&lt;/div&gt;</pre></div><p>Now, let's come to the core JavaScript for this. We are instructing the app to watch the acceleration continuously for one second, using the <code class="literal">onDeviceReady()</code> function and update the values in the corresponding <code class="literal">div</code> elements.</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    var watchID = null;

    document.addEventListener('deviceready', onDeviceReady, false);

    function onDeviceReady() {
        $('#stop').show();
        $('#start').hide();

        var options = {
            frequency: 1000
        }; // Update every 1 seconds

        watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);
    }

    function onSuccess(acceleration) {
        $('#dataX').html(acceleration.x);
        $('#dataY').html(acceleration.y);
        $('#dataZ').html(acceleration.z);
        $('#timeStamp').html(acceleration.timestamp);
    };

    function onError() {
        alert('onError!');
    };

    function stopWatch() {
        if (watchID) {
            navigator.accelerometer.clearWatch(watchID);
            watchID = null;

            $('#start').show();
            $('#stop').hide();
        }

    }
&lt;/script&gt;</pre></div><p>The output<a id="id744" class="indexterm"/> for this will be as follows:</p><div><img src="img/B03476_10_03.jpg" alt="Using the Accelerometer API"/></div><p>When we want<a id="id745" class="indexterm"/> to stop the watch, we trigger the <code class="literal">stopWatch()</code> function by clicking on the <strong>Stop Watching</strong> button. When we click on the <strong>Start Watching</strong> button, the watch will be started again, as shown here:</p><div><img src="img/B03476_10_04.jpg" alt="Using the Accelerometer API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec85"/>Using the Device API</h2></div></div></div><p>With <a id="id746" class="indexterm"/>the <a id="id747" class="indexterm"/>Device API, we are going to get the information about our device. We will define five <code class="literal">&lt;p&gt;</code> tags to hold the data:</p><div><pre class="programlisting">&lt;p id="model"&gt;&lt;/p&gt;
&lt;p id="platform"&gt;&lt;/p&gt;
&lt;p id="version"&gt;&lt;/p&gt;
&lt;p id="uuid"&gt;&lt;/p&gt;
&lt;p id="cordova"&gt;&lt;/p&gt;</pre></div><p>We have the following script that will get the device information and put it in the DOM. You may have noticed that we are using the attribute ID value of the <code class="literal">&lt;p&gt;</code> element:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    document.addEventListener('deviceready', onDeviceReady, false);

    function onDeviceReady() {

        $('#model').html(device.model);
        $('#cordova').html(device.cordova);
        $('#platform').html(device.platform);
        $('#uuid').html(device.uuid);
        $('#version').html(device.version);

    }
&lt;/script&gt;</pre></div><p>The output<a id="id748" class="indexterm"/> will be as shown here:</p><div><img src="img/B03476_10_05.jpg" alt="Using the Device API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec86"/>Using the Camera API</h2></div></div></div><p>The <a id="id749" class="indexterm"/>Camera API <a id="id750" class="indexterm"/>can be used to capture an image from the device camera and also to select an image from the image gallery. We will see both of these uses with an example:</p><div><pre class="programlisting">&lt;div class="content"&gt;
    &lt;ul class="nav nav-tabs"&gt;
        &lt;li class="active"&gt;&lt;a href="#capture" data-toggle="tab"&gt;Capture Photo&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;&lt;a href="#album" data-toggle="tab"&gt;From Album&lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class="tab-content" id="tabs"&gt;
        &lt;div id="capture" class="tab-pane active"&gt;
            &lt;br/&gt;
            &lt;button onclick="capturePhoto();" class="btn btn-success"&gt;Capture Camera Photo&lt;/button&gt;
            &lt;br/&gt;
            &lt;br/&gt;
            &lt;img style="display:none;" id="smallImage" src="img/" class="img-responsive img-rounded" alt="Responsive image" /&gt;

        &lt;/div&gt;

        &lt;div id="album" class="tab-pane"&gt;
            &lt;br/&gt;
            &lt;button onclick="getPhoto(Camera.PictureSourceType.SAVEDPHOTOALBUM);" class="btn btn-info"&gt;Select Image from Album&lt;/button&gt;
            &lt;br/&gt;
            &lt;br/&gt;

            &lt;img style="display:none;" id="largeImage" src="img/" class="img-responsive img-rounded" alt="Responsive image" /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre></div><p>You will now be able to take photos, using your device camera:</p><div><img src="img/B03476_10_06.jpg" alt="Using the Camera API"/></div><p>You will now <a id="id751" class="indexterm"/>also be able to select images from your device album:</p><div><img src="img/B03476_10_07.jpg" alt="Using the Camera API"/></div><p>The following is the script used for this example and it's recommended that you read about the Camera API <a id="id752" class="indexterm"/>before proceeding with this example:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;

    function capturePhoto() {

        navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
            quality: 50,
            allowEdit: true,
            destinationType: Camera.DestinationType.DATA_URL
        });
    }

    function onPhotoDataSuccess(imageData) {

        var smallImage = document.getElementById('smallImage');

        smallImage.style.display = 'block';
        smallImage.src = "data:image/jpeg;base64," + imageData;


    }

    function onPhotoURISuccess(imageURI) {

        var largeImage = document.getElementById('largeImage');

        largeImage.style.display = 'block';

        largeImage.src = "data:image/jpeg;base64," + imageURI;
    }

    function getPhoto(source) {
        navigator.camera.getPicture(onPhotoURISuccess, onFail, {
            quality: 50,
            destinationType: Camera.DestinationType.DATA_URL,
            sourceType: source
        });
    }


    function onFail(message) {
        alert(message);
    }
&lt;/script&gt;</pre></div><p>The following <a id="id753" class="indexterm"/>are the screenshots of the example in action:</p><div><img src="img/B03476_10_08.jpg" alt="Using the Camera API"/></div><p>Once you shoot the picture, you will be asked to select or reject the taken image:</p><div><img src="img/B03476_10_09.jpg" alt="Using the Camera API"/></div><p>Once you have <a id="id754" class="indexterm"/>accepted the image, it will be shown in the app:</p><div><img src="img/B03476_10_10.jpg" alt="Using the Camera API"/></div><p>When you select<a id="id755" class="indexterm"/> the option to choose from the image gallery, the Gallery application will be shown for image selection:</p><div><img src="img/B03476_10_11.jpg" alt="Using the Camera API"/></div><p>Again, once you've <a id="id756" class="indexterm"/>selected an image from the gallery, it will be shown in the page:</p><div><img src="img/B03476_10_12.jpg" alt="Using the Camera API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec87"/>Using the Capture API</h2></div></div></div><p>With<a id="id757" class="indexterm"/> the help of<a id="id758" class="indexterm"/> the Capture API, we can capture audio, video, and camera images. We will see a simple code to perform all of these operations. The following code will add three buttons to the page and bind an event to each of those buttons:</p><div><pre class="programlisting">&lt;div class="content"&gt;
    &lt;div class="btn-group-vertical" role="group" aria-label="..."&gt;
        &lt;button onclick="captureAudio();" class="btn-lg btn-success"&gt;Capture Audio&lt;/button&gt;
        &lt;br&gt;
        &lt;button onclick="captureImage();" class="btn-lg btn-warning"&gt;Capture Image&lt;/button&gt;
        &lt;br&gt;
        &lt;button onclick="captureVideo();" class="btn-lg btn-danger"&gt;Capture Video&lt;/button&gt;
        &lt;br&gt;
    &lt;/div&gt;

    &lt;div id="details" style="display:none"&gt;
        &lt;b&gt;File Path : &lt;/b&gt; 
        &lt;div id="fullPath"&gt;&lt;/div&gt;
        &lt;br/&gt;
        &lt;b&gt;File Name : &lt;/b&gt; 
        &lt;div id="name"&gt;&lt;/div&gt;
        &lt;br/&gt;
        &lt;b&gt;Type : &lt;/b&gt; 
        &lt;div id="type"&gt;&lt;/div&gt;
        &lt;br/&gt;
        &lt;b&gt;Last Modified Timestamp : &lt;/b&gt; 
        &lt;div id="lastModifiedDate"&gt;&lt;/div&gt;
        &lt;br/&gt;
        &lt;b&gt;File Size (bytes) : &lt;/b&gt; 
        &lt;div id="size"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre></div><p>The following<a id="id759" class="indexterm"/> is the JavaScript code snippet; each function is easy to understand:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    function captureSuccess(mediaFiles) {
        var i, len;
        for (i = 0, len = mediaFiles.length; i &lt; len; i += 1) {
            uploadFile(mediaFiles[i]);
        }
    }

     // Called if something bad happens.
    function captureError(error) {
        var msg = 'An error occurred during capture: ' + error.code;
        navigator.notification.alert(msg, null, 'Uh oh!');
    }

    // A button will call this function
    function captureAudio() {
        $('#details').hide();

        // Launch device audio recording application,
        // allowing user to capture up to 1 audio clips
        navigator.device.capture.captureAudio(captureSuccess, captureError, {
            limit: 1,
            duration: 10
        });
    }

    // A button will call this function
    function captureImage() {
        $('#details').hide();

        // Launch device camera application,
        // allowing user to capture up to 1 images
        navigator.device.capture.captureImage(captureSuccess, captureError, {
            limit: 1
        });
    }

    function captureVideo() {
        $('#details').hide();

        // Launch device video recording application,
        // allowing user to capture up to 1 video clip
        navigator.device.capture.captureVideo(captureSuccess, captureError, {
            limit: 1,
            duration: 10
        });
    }

    // Upload files to server
    function uploadFile(mediaFile) {
        $('#fullPath').html(mediaFile.fullPath.replace(mediaFile.name, ""));
        $('#name').html(mediaFile.name);
        $('#type').html(mediaFile.type);
        $('#lastModifiedDate').html(mediaFile.lastModifiedDate);
        $('#size').html(mediaFile.size);
        $('#details').show();
        //Upload file using FileTransfer method not shown here
    }
&lt;/script&gt;</pre></div><p>The output of this<a id="id760" class="indexterm"/> will be as follows:</p><div><img src="img/B03476_10_13.jpg" alt="Using the Capture API"/></div><p>Try recording<a id="id761" class="indexterm"/> your voice using the app:</p><div><img src="img/B03476_10_14.jpg" alt="Using the Capture API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec88"/>Using the Connection API</h2></div></div></div><p>The<a id="id762" class="indexterm"/> Connection API is one of the simplest APIs to work<a id="id763" class="indexterm"/> with. We are going to find what kind of data connection the device has and then display it.</p><p>To hold the data, we define a new element, as shown here:</p><div><pre class="programlisting">&lt;p id="status" class="list-group-item-text"&gt;</pre></div><p>In the JavaScript function, we get the connection type and validate it using the <code class="literal">checkConnection()</code> method. Then, we display a friendly message:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
  document.addEventListener('deviceready', onDeviceReady, false);

  function onDeviceReady() {
    checkConnection();
  }

  function checkConnection() {
    var networkState = navigator.connection.type;

    var states = {
    };
    states[Connection.UNKNOWN] = 'Unknown Connection';
    states[Connection.ETHERNET] = 'Ethernet Connection';
    states[Connection.WIFI] = 'WiFi Connection';
    states[Connection.CELL_2G] = 'Cell 2G Connection';
    states[Connection.CELL_3G] = 'Cell 3G Connection';
    states[Connection.CELL_4G] = 'Cell 4G Connection';
    states[Connection.CELL] = 'Cell Generic Connection';
    states[Connection.NONE] = 'No Network Connection';

    $('#status').html(states[networkState]);
  }
&lt;/script&gt;</pre></div><p>The output<a id="id764" class="indexterm"/> of this will be as follows:</p><div><img src="img/B03476_10_15.jpg" alt="Using the Connection API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec89"/>Using the Contacts API</h2></div></div></div><p>Now, let's <a id="id765" class="indexterm"/>see some advanced concepts of the<a id="id766" class="indexterm"/> Contacts API. We are going to do the following three things:</p><div><ol class="orderedlist arabic"><li class="listitem">Fetch ten phone numbers from a device; we have limited it to ten for simplicity.</li><li class="listitem">Search for a contact and display their phone number, along with the contact name.</li><li class="listitem">Add a new contact using the app.</li></ol></div><p>The following is the HTML code; it looks big as we have used Bootstrap styles to create tab styles:</p><div><pre class="programlisting">&lt;div id="page"&gt;
    &lt;div class="header"&gt;
        &lt;a href="#menu"&gt;&lt;/a&gt;
        Contacts API
    &lt;/div&gt;
    &lt;div class="content"&gt;

        &lt;ul class="nav nav-tabs"&gt;
            &lt;li class="active"&gt;&lt;a href="#fetch" data-toggle="tab"&gt;Fetch&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a href="#add" data-toggle="tab"&gt;Add&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;

        &lt;div class="tab-content" id="tabs"&gt;

            &lt;div id="fetch" class="tab-pane active"&gt;
                &lt;br/&gt;
                &lt;button onclick="fetchContacts('');" class="btn btn-info"&gt;Fetch 10 Contacts&lt;/button&gt;
                &lt;button id="searchName" class="btn btn-info"&gt;Search Name&lt;/button&gt;
                &lt;br/&gt;
                &lt;br/&gt;
                &lt;div id="status"&gt;&lt;/div&gt;

                &lt;div id="panel" style="display:none"&gt;
                    &lt;div class="list-group"&gt;
                        &lt;a href="#" class="list-group-item active"&gt;
                            &lt;h4 class="list-group-item-heading"&gt;Total Contacts&lt;/h4&gt;
                        &lt;/a&gt;
                        &lt;a href="#" class="list-group-item"&gt;
                            &lt;p id="count" class="list-group-item-text"&gt;&lt;/p&gt;
                        &lt;/a&gt;
                    &lt;/div&gt;

                    &lt;table class="table table-striped"&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;th&gt;#&lt;/th&gt;
                                &lt;th&gt;Name&lt;/th&gt;
                                &lt;th&gt;Phone Number&lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tbody id="contacts"&gt;
                        &lt;/tbody&gt;
                    &lt;/table&gt;

                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div id="add" class="tab-pane"&gt;
                &lt;form id="saveForm"&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="firstName"&gt;First Name&lt;/label&gt;
                        &lt;input class="form-control" type="text" id="firstName" placeholder="Enter First Name" /&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="lastName"&gt;Last Name&lt;/label&gt;
                        &lt;input class="form-control" type="text" id="lastName" placeholder="Enter Last Name" /&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="email"&gt;Phone Number&lt;/label&gt;
                        &lt;input class="form-control" type="tel" id="number" placeholder="Enter Number" /&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="email"&gt;Email Address&lt;/label&gt;
                        &lt;input class="form-control" type="email" id="email" placeholder="Enter Email" /&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="note"&gt;Note&lt;/label&gt;
                        &lt;textarea class="form-control" id="note" placeholder="Enter Notes"&gt;&lt;/textarea&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;input class="btn btn-danger" type="button" name="save" id="saveBtn" value="Save Contact" /&gt;
                    &lt;/div&gt;

                &lt;/form&gt;
            &lt;/div&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre></div><p>Coming to<a id="id767" class="indexterm"/> the JavaScript section, the following is the code for each operation. Reading the section about the Contacts API will help you to understand this. We have few jQuery-related statements<a id="id768" class="indexterm"/> too in the code:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    $("#searchName").click(function() {
        $('#status').html("");
        $('#panel').hide();

        navigator.notification.prompt(
            'Please enter search text',
            onPrompt,
            'Contact Search', ['Ok', 'Exit'],
            ''
        );
    });

    $("#saveBtn").click(function() {
        var firstName = document.getElementById('firstName').value;
        var lastName = document.getElementById('lastName').value;
        var fullName = firstName + ' ' + lastName;
        var number = document.getElementById('number').value;
        var note = document.getElementById('note').value;
        var emailAddress = document.getElementById('email').value;

        var theContact = navigator.contacts.create({
            "displayName": fullName
        });
        theContact.note = note;

        var emails = [];
        emails[0] = new ContactField('email', emailAddress, false);
        theContact.emails = emails;

        var phoneNumbers = [];
        phoneNumbers[0] = new ContactField('work', number, false);
        phoneNumbers[1] = new ContactField('mobile', number, true); // preferred number
        phoneNumbers[2] = new ContactField('home', number, false);
        theContact.phoneNumbers = phoneNumbers;

        theContact.save(onSaveSuccess, onSaveError);
    });

    function onSaveSuccess(contact) {
        navigator.notification.alert(
            "Contact Saved",
            null,
            'PhoneGap HandsOn Project',
            'OK'
        );

        document.getElementById("saveForm").reset();

    }

    function onSaveError(contactError) {
        navigator.notification.alert(
            "Contact Not Saved - Error Code : " + contactError.code,
            null,
            'PhoneGap HandsOn Project',
            'OK'
        );
    }

    function onPrompt(results) {
        if (results.buttonIndex == 1) {
            if (results.input1 == "") {
                navigator.notification.alert(
                    "Empty Search Text",
                    null,
                    'PhoneGap HandsOn Project',
                    'Try Again'
                );
            } else {
                fetchContacts(results.input1);
            }
        }
    }

    function fetchContacts(filter) {
        $('#panel').hide();
        $('#status').html("In Progress.... Please Wait!");

        var options = new ContactFindOptions();
        options.filter = filter;
        options.multiple = true;
        var fields = ["*"];
        navigator.contacts.find(fields, onSuccess, onError, options);

    };

    function onSuccess(contacts) {

        if (contacts.length == 0) {
            $('#panel').hide();
            $('#status').html("No Contacts Found");
            return;
        }

        var text = "";

        var totalCount = 0;

        for (var i = 0; i &lt; contacts.length; i++) {
            if (totalCount &gt; 9) {
                break;
            }

            if (contacts[i].phoneNumbers) {
                totalCount++;
                for (var j = 0; j &lt; contacts[i].phoneNumbers.length; j++) {
                    text = text + '&lt;tr&gt;&lt;td&gt;' + totalCount + "&lt;/td&gt;&lt;td&gt;" + contacts[i].displayName + "&lt;/td&gt;&lt;td&gt;" + contacts[i].phoneNumbers[j].value + "&lt;/td&gt;&lt;/tr&gt;";
                }
            }
        }

        $('#contacts').html(text);
        $('#count').html(contacts.length);
        $('#status').html("");
        $('#panel').show();
    }

    function onError(contactError) {
        alert(contactError);
    }
&lt;/script&gt;</pre></div><p>Ten contacts will<a id="id769" class="indexterm"/> be fetched and displayed when you click on the <strong>Fetch 10 Contacts</strong> button:</p><div><img src="img/B03476_10_16.jpg" alt="Using the Contacts API"/></div><p>The total count of<a id="id770" class="indexterm"/> the contacts in the device and 10 contacts will be displayed, along with the phone number:</p><div><img src="img/B03476_10_17.jpg" alt="Using the Contacts API"/></div><p>The contact <a id="id771" class="indexterm"/>names and numbers are hidden for the sake of privacy. You can also search for contacts, as shown here:</p><div><img src="img/B03476_10_18.jpg" alt="Using the Contacts API"/></div><p>Once you <a id="id772" class="indexterm"/>enter the search text and click on the <strong>OK</strong> button, you will see the results for your search:</p><div><img src="img/B03476_10_19.jpg" alt="Using the Contacts API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec90"/>Using the Files API</h2></div></div></div><p>Using <a id="id773" class="indexterm"/>the Files API, we can handle files and directories in<a id="id774" class="indexterm"/> the real device. This API makes it easy for the developers to handle all file-related operations:</p><div><pre class="programlisting">&lt;div id="page"&gt;
    &lt;div class="content"&gt;
        &lt;div class="btn-group-vertical" role="group" aria-label="..."&gt;
            &lt;button class="btn-lg btn-success" onclick="readDirectory()"&gt;Get All Directories&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div id="contents"&gt;&lt;/div&gt;
&lt;/div&gt;</pre></div><p>The following is the code to get all the directories in the device filesystem. You can extend the <a id="id775" class="indexterm"/>code to read all files, as well as read, edit, and delete a file:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    function readDirectory() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, doDirectoryListing, null);
    }

    function doDirectoryListing(fileSystem) {

        var dirReader = fileSystem.root.createReader();

        dirReader.readEntries(gotDir, onError);
    }

    function gotDir(entries) {
        var s = '&lt;ul class="list-group"&gt;';
        for (var i = 0, len = entries.length; i &lt; len; i++) {

            if (entries[i].isDirectory) {
                s += '&lt;li class="list-group-item"&gt;' + entries[i].fullPath + '&lt;/li&gt;';
            }

        }

        s += "&lt;/ul&gt;";
        $('#contents').html(s);
    }

    function onError(error) {
        alert(error.code);
    }
&lt;/script&gt;</pre></div><p>The output will be as shown here:</p><div><img src="img/B03476_10_20.jpg" alt="Using the Files API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec91"/>Using the Globalization API</h2></div></div></div><p>The<a id="id776" class="indexterm"/> Globalization API helps you to customize <a id="id777" class="indexterm"/>content such as numbers, date, and currency based on your user's device locale, instead of showing them in a hardcoded format. With this API, you can truly create a real globalized application.</p><p>Let's create the menu for each of the options we are going to try:</p><div><pre class="programlisting">    &lt;div class="btn-group"&gt;
        &lt;button type="button" class="btn btn-success"&gt;Globalization Menu&lt;/button&gt;
        &lt;button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-expanded="false"&gt;
            &lt;span class="caret"&gt;&lt;/span&gt;
            &lt;span class="sr-only"&gt;Toggle Dropdown&lt;/span&gt;
        &lt;/button&gt;
        &lt;ul class="dropdown-menu" role="menu"&gt;
            &lt;li&gt;&lt;a id="prefLang" href="#"&gt;Language&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="locale" href="#"&gt;Locale&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="pattern" href="#"&gt;Date Pattern&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="numPattern" href="#"&gt;Number Pattern&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="currPattern" href="#"&gt;Currency Pattern&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="dateStr" href="#"&gt;Date to String&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="strDate" href="#"&gt;String to Date&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="monNames" href="#"&gt;Month Names&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="dst" href="#"&gt;DST?&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;a id="firstWeekDay" href="#"&gt;Week First Day&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;hr/&gt;
    &lt;div id="data"&gt;&lt;/div&gt;
&lt;/div&gt;</pre></div><p>With the<a id="id778" class="indexterm"/> preceding code, you will see the app as shown in the following screenshot; it has a drop-down menu for selecting the options to be used:</p><div><img src="img/B03476_10_21.jpg" alt="Using the Globalization API"/></div><p>Now, the <a id="id779" class="indexterm"/>complete script is provided here; we have assigned each function to the click event of each link:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    $("#prefLang").click(function() {
        navigator.globalization.getPreferredLanguage(setLanguage, onError);
    });

    $("#locale").click(function() {
        navigator.globalization.getLocaleName(setLocale, onError);
    });

    $("#dateStr").click(function() {
        navigator.globalization.dateToString(new Date(), setDate, onError, {
            formatLength: 'full',
            selector: 'date and time'
        });
    });

    $("#strDate").click(function() {
        navigator.globalization.stringToDate('12/31/2015', setStringDate, onError, {
            selector: 'date'
        });
    });

    $("#pattern").click(function() {
        navigator.globalization.getDatePattern(setPattern, onError, {
            formatLength: 'short',
            selector: 'date and time'
        });
    });

    $("#monNames").click(function() {
        navigator.globalization.getDateNames(setDateNames, onError, {
            type: 'wide',
            item: 'months'
        });
    });

    $("#dst").click(function() {
        navigator.globalization.isDayLightSavingsTime(new Date(), setDST, onError);
    });

    $("#firstWeekDay").click(function() {
        navigator.globalization.getFirstDayOfWeek(setFDW, onError);
    });

    $("#numPattern").click(function() {
        navigator.globalization.getNumberPattern(setNumPattern, onError, {
            type: 'decimal'
        });
    });

    $("#currPattern").click(function() {
        navigator.globalization.getCurrencyPattern('USD', setCurrencyPattern, onError);
    });

    function setCurrencyPattern(pattern) {
        $('#data').html('Currency Pattern: ' + pattern.pattern + '&lt;br/&gt;' +
            'code: ' + pattern.code + '&lt;br/&gt;' +
            'fraction: ' + pattern.fraction + '&lt;br/&gt;' +
            'rounding: ' + pattern.rounding + '&lt;br/&gt;' +
            'decimal: ' + pattern.decimal + '&lt;br/&gt;' +
            'grouping: ' + pattern.grouping);
    }

    function setNumPattern(pattern) {
        $('#data').html('Number Pattern : &lt;br&gt;' + pattern.pattern + '&lt;br/&gt;' +
            'symbol: ' + pattern.symbol + '&lt;br/&gt;' +
            'fraction: ' + pattern.fraction + '&lt;br/&gt;' +
            'rounding: ' + pattern.rounding + '&lt;br/&gt;' +
            'positive: ' + pattern.positive + '&lt;br/&gt;' +
            'negative: ' + pattern.negative + '&lt;br/&gt;' +
            'decimal: ' + pattern.decimal + '&lt;br/&gt;' +
            'grouping: ' + pattern.grouping);
    }

    function setFDW(day) {
        $('#data').html('Fist Day of Week : ' + day.value);
    }

    function setDST(date) {
        $('#data').html('Day Light Savings : ' + date.dst);
    }

    function setDateNames(names) {
        var str = '';

        for (var i = 0; i &lt; names.value.length; i++) {
            str += names.value[i] + '&lt;br/&gt;';
        }

        $('#data').html('Month Names : &lt;br/&gt;' + str);
    }

    function setPattern(date) {
        $('#data').html('Date Pattern : ' + date.pattern + ' ' + date.timezone);
    }

    function setDate(date) {
        $('#data').html('Formatted Date : ' + date.value);
    }

    function setStringDate(date) {
        $('#data').html('Date : ' + (date.month + 1) + '/' + date.day + '/' + date.year);
    }

    function setLocale(locale) {
        $('#data').html('Locale Name : ' + locale.value);
    }

    function setLanguage(lang) {
        $('#data').html('Preferred Language : ' + lang.value);
    }

    function onError(error) {
        alert('code: ' + error.code + '\n' +
            'message: ' + error.message + '\n');

    }&lt;/script&gt;</pre></div><p>When you <a id="id780" class="indexterm"/>click on the <strong>Number Pattern</strong> option, you can see the number pattern on the device that is decided based on the phone locale. Try out other menu options as well.</p><div><img src="img/B03476_10_22.jpg" alt="Using the Globalization API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec92"/>Using the InApp Browser API</h2></div></div></div><p>InApp Browser<a id="id781" class="indexterm"/> is a web browser that can be controlled by the app. Your app can open the website in a browser and handle it as required.</p><p>Again, we <a id="id782" class="indexterm"/>will <a id="id783" class="indexterm"/>have a button to launch InApp Browser. We have created a JavaScript function named <code class="literal">launchIAB</code> to get the URL and open it:</p><div><pre class="programlisting">&lt;button onclick="launchIAB('http://www.incredibleindia.org');" class="btn-lg btn-primary"&gt;Launch Browser&lt;/button&gt;</pre></div><p>The output will be as shown here:</p><div><img src="img/B03476_10_23.jpg" alt="Using the InApp Browser API"/></div><p>Now, we will see the JavaScript involved here. We have handled the load, start, and stop events of the <a id="id784" class="indexterm"/>InApp Browser:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;        var iab = null;

        function loadStart(event) {
            // Event object has event.type &amp; event.url properties
            alert('Loading started');
        }

        function loadStop(event) {
            alert('Loading stopped');
        }

        function loadError(event) {
            alert(event.type + ' - ' + event.message);
        }

        function onClose(event) {
            alert('Browser Closed');
            iab.removeEventListener('loadstart', loadStart);
            iab.removeEventListener('loadstop', loadStop);
            iab.removeEventListener('loaderror', loadError);
            iab.removeEventListener('exit', onClose);
        }

        function launchIAB(url) {
            iab = window.open(url, '_blank ', 'location = yes ');
            iab.addEventListener('loadstart', loadStart);
            iab.addEventListener('loadstop', loadStop);
            iab.addEventListener('loaderror', loadError);
            iab.addEventListener('exit', onClose);
        }&lt;/script&gt;</pre></div><p>The<a id="id785" class="indexterm"/> loading start screen will be as follows:</p><div><img src="img/B03476_10_24.jpg" alt="Using the InApp Browser API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec93"/>Using the Notification API</h2></div></div></div><p>With<a id="id786" class="indexterm"/> the Notification API, we can make the <a id="id787" class="indexterm"/>phone beep, vibrate, show alerts, and input and confirm dialog windows. So for each of these five operations, we will have five buttons that each have a trigger event. We have styled the buttons using Bootstrap:</p><div><pre class="programlisting">&lt;div class="content"&gt;
    &lt;br/&gt;
    &lt;div class="btn-group-vertical" role="group" aria-label="..."&gt;
        &lt;button onclick="beepNow();" class="btn-lg btn-primary"&gt;Beep 3 Times&lt;/button&gt;
        &lt;button onclick="vibrateNow();" class="btn-lg btn-info"&gt;Vibrate 1 Sec&lt;/button&gt;
        &lt;button onclick="alertNow();" class="btn-lg btn-success"&gt;Alert Notify&lt;/button&gt;
        &lt;button onclick="confirmNow();" class="btn-lg btn-warning"&gt;Confirm Notify&lt;/button&gt;
        &lt;button onclick="promptNow();" class="btn-lg btn-danger"&gt;Prompt Notify&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre></div><p>The output will be as follows:</p><div><img src="img/B03476_10_25.jpg" alt="Using the Notification API"/></div><p>The following <a id="id788" class="indexterm"/>code is very much self-explanatory. Don't forget to take note of the syntax of the alert, confirm, and prompt dialog boxes:</p><div><pre class="programlisting">function beepNow() {
    navigator.notification.beep(3);
}

function vibrateNow() {
    navigator.notification.vibrate(1000);
}</pre></div><p>The preceding two functions will produce the default beep sound on your device three times and vibrate <a id="id789" class="indexterm"/>for one second, respectively:</p><div><pre class="programlisting">function alertNow() {
    navigator.notification.alert(
        'You got an alert now', // message
        null, // callback
        'Notifications API', // title
        'Done' // buttonName
    );

}

function confirmNow() {
    navigator.notification.confirm(
        'You like this app?', // message
        onConfirm, // callback to invoke with index of button pressed
        'App Feedback', // title
        ['Yes', 'No'] // buttonLabels
    );

}

function onConfirm(buttonIndex) {
    alert('Button Selected : ' + buttonIndex);
}

function promptNow() {
    navigator.notification.prompt(
        'Please enter your name', // message
        handleAction, // callback to invoke
        'Registration', // title
        ['Ok', 'Exit'], // buttonLabels
        'Super Star Rajini' // defaultText
    );

    function handleAction(results) {
        alert("You selected button " + results.buttonIndex + " with input '" + results.input1 + "'");
    }

}</pre></div><p>This is how the alert window is shown:</p><div><img src="img/B03476_10_26.jpg" alt="Using the Notification API"/></div><p>The <a id="id790" class="indexterm"/>confirmation box is shown in the following screenshot:</p><div><img src="img/B03476_10_27.jpg" alt="Using the Notification API"/></div><p>You can use the <a id="id791" class="indexterm"/>prompt dialog to get inputs from the user:</p><div><img src="img/B03476_10_28.jpg" alt="Using the Notification API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec94"/>Using the Splash Screen API</h2></div></div></div><p>Splash <a id="id792" class="indexterm"/>screens are the ones that you see when <a id="id793" class="indexterm"/>an application start. Although not all applications have it, it's available in some famous apps such as Microsoft Office Mobile. When the applications start, a fullscreen image shows up and closes automatically after a few seconds. This can be used to hide the backend loading of the application.</p><p>We will have a button with a click event to show the splash screen:</p><div><pre class="programlisting">&lt;button onclick="showScreen();"&gt;Show Splash Screen&lt;/button&gt;</pre></div><p>Coming to the JavaScript, we use the <code class="literal">navigator.splashscreen.show()</code> method to show the splash screen, as shown here:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    function showScreen() {
        navigator.splashscreen.show();
    }
&lt;/script&gt;</pre></div><p>The output will be as follows:</p><div><img src="img/B03476_10_29.jpg" alt="Using the Splash Screen API"/></div><p>When<a id="id794" class="indexterm"/> the <strong>Show Splash Screen</strong> button is clicked, you will see the splash screen open and close after a few seconds:</p><div><img src="img/B03476_10_30.jpg" alt="Using the Splash Screen API"/></div><p>Note that<a id="id795" class="indexterm"/> there is also a function of <code class="literal">hide()</code>, and I am leaving that to you to try out.</p></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec95"/>Using the GeoLocation API</h2></div></div></div><p>With <a id="id796" class="indexterm"/>the GeoLocation API, we are going to get<a id="id797" class="indexterm"/> the location coordinates and use Google Maps to plot them in a map:</p><div><pre class="programlisting">&lt;div id="page"&gt;
    &lt;div class="header"&gt;
        &lt;a href="#menu"&gt;&lt;/a&gt;
        GeoLocation API
    &lt;/div&gt;
    &lt;div class="content"&gt;
        &lt;div id="geolocation"&gt;&lt;/div&gt;
        &lt;br/&gt;
        &lt;div id="googleMap" style="width:75%;height:75%;"&gt;Loading...&lt;/div&gt;
    &lt;/div&gt;

&lt;/div&gt;</pre></div><p>The <code class="literal">div</code> element<a id="id798" class="indexterm"/> with <code class="literal">id</code> as <code class="literal">geolocation</code> will hold the geolocation values. The <code class="literal">div</code> element, <code class="literal">googleMap</code>, will have the Google Map:</p><div><pre class="programlisting">&lt;script type="text/javascript"&gt;
    document.addEventListener("deviceready", onDeviceReady, false);

    var watchID = null;

    function onDeviceReady() {
        // Throw an error if no update is received
        var options = {
            timeout: 50000
        };
        watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
    }

    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        element.innerHTML = 'Latitude: ' + position.coords.latitude + '&lt;br /&gt;' +
            'Longitude: ' + position.coords.longitude + '&lt;br /&gt;' +
            'Altitude: ' + position.coords.altitude + '&lt;br /&gt;' +
            'Accuracy: ' + position.coords.accuracy + '&lt;br /&gt;' +
            'Altitude Accuracy: ' + position.coords.altitudeAccuracy + '&lt;br /&gt;' +
            'Heading: ' + position.coords.heading + '&lt;br /&gt;' +
            'Speed: ' + position.coords.speed + '&lt;br /&gt;' +
            'Timestamp: ' + position.timestamp + '&lt;br /&gt;';

        var myLatlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        var mapOptions = {
            zoom: 4,
            center: myLatlng
        }
        var map = new google.maps.Map(document.getElementById('googleMap'), mapOptions);

        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Hello World!'
        });

    }

    function onError(error) {
        alert('code: ' + error.code + '\n' +
            'message: ' + error.message + '\n');
    }
&lt;/script&gt;</pre></div><p>The output <a id="id799" class="indexterm"/>will be as follows:</p><div><img src="img/B03476_10_31.jpg" alt="Using the GeoLocation API"/></div></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec96"/>Building the app</h2></div></div></div><p>As we <a id="id800" class="indexterm"/>have completed the development of the application, we can now build and try the app in a real device. You can either use a local build or build using the online PhoneGap services.</p><p>To use the local build using Cordova, use the following command:</p><div><pre class="programlisting">
<strong>C:\PhoneGap&gt; phonegap build</strong>
</pre></div><p>After the build is complete, the app will be created for all the platforms you added when you created the project. You can see the Android app (<code class="literal">.apk</code>) inside the <code class="literal">platforms\android\ant-build\</code> directory and the iOS app (<code class="literal">.ipa</code>) inside <code class="literal">platforms/ios/build/device</code>, if you have added the iOS platform.</p><p>You can take the Android <code class="literal">.apk</code> file and directly install it in the device. However, for iOS, you need to perform provisioning. The details are covered in <a class="link" href="apb.html" title="Appendix B. Publishing Your App">Appendix B</a>, <em>Publishing Your App</em>. Congratulations on creating our full-fledged app using PhoneGap. Now, install the app in your real device and enjoy the feel of using your first full-fledged application.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec92"/>Scope for improvements</h1></div></div></div><p>The app<a id="id801" class="indexterm"/> that we saw is very basic and there is a lot of scope for improvements. The following are a few things that can be done to the app we just finished:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Use a templating engine such as HandleBarJS</li><li class="listitem" style="list-style-type: disc">Use the Ionic framework</li><li class="listitem" style="list-style-type: disc">Use RequireJS to dynamically load the required libraries</li><li class="listitem" style="list-style-type: disc">Handle hardware-accelerated, GPU-based animations</li><li class="listitem" style="list-style-type: disc">Compress source files</li></ul></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec93"/>Summary</h1></div></div></div><p>We have learned how to create an app using PhoneGap and its API. This is just a start and there are many more challenges in creating a real-life app. We hope this tutorial will be a good foundation for your skills on hybrid app development. PhoneGap development is not limited to these APIs and there are several other useful plugins to be used. We wish you good luck for your PhoneGap development.</p></div></body></html>