<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Getting the Information You Need</h1>
                </header>
            
            <article>
                
<p><span><span>We've let our Pi discover its immediate surroundings, and let it show data through various means. We've even given them the ability to move! But there's a cosmos of data to be collected, and sometimes the data you want can't be collected locally. That's where the internet, and initiatives to make more and more data freely available, come into play. In this chapter, we'll look into connecting your Pi to the internet and obtaining weather information in order to create a weather dashboard.</span></span></p>
<p>The following topics will be covered in this chapter:</p>
<ul>
<li>Why connect your NodeBots to the internet?</li>
<li>Getting weather data on our Pi with OpenWeatherMap</li>
<li>Building a weather dashboard with an LCD</li>
<li>Scraping websites for data with your Pi</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>For this project, you'll want your Pi and an LCD character display with an I<sup>2</sup>C interface. You can purchase and solder together an LCD (<a href="https://www.adafruit.com/product/198">https://www.adafruit.com/product/198</a>) and backpack (<a href="https://www.adafruit.com/product/292">https://www.adafruit.com/product/292</a>) from Adafruit, or a pre-built module via SainSmart (<a href="https://www.amazon.in/SainSmart-Serial-Module-Shield-Arduino/dp/B00AE0FRDQ/">https://www.amazon.in/SainSmart-Serial-Module-Shield-Arduino/dp/B00AE0FRDQ/</a>).</p>
<p>You'll also want to make sure your Pi can access the outside world with internet access, as we set it up to in <a href="bab2feb9-9667-4f8b-bb2e-1702009b87b4.xhtml" target="_blank">Chapter 1</a>, <em>Setting Up Your Development Environment.</em></p>
<div class="packt_infobox">The code for this chapter is available at: <a href="https://github.com/PacktPublishing/Hands-On-Robotics-with-JavaScript/tree/master/Chapter09">https://github.com/PacktPublishing/Hands-On-Robotics-with-JavaScript/tree/master/Chapter09</a>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Why connect your NodeBots to the internet?</h1>
                </header>
            
            <article>
                
<p>While sensors can provide local data, sometimes you want to display data from far away or data from sensors attached to other devices. This is where we can really leverage Node.js and npm packages in our favor for our Raspberry Pi projects.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using the power of npm modules</h1>
                </header>
            
            <article>
                
<p>Back in <a href="307e1c9c-bd59-475c-ae7b-91ca5970794e.xhtml" target="_blank">Chapter 2</a>, <em>Creating Your First Johnny-Five Project</em>, we used the <kbd>color npm</kbd> module to manage colors for us. We've used the <kbd>barcli</kbd> module to get our sensor data into bar graphs. Now it's time to use the request <kbd>npm</kbd> module to retrieve data from websites for us! This allows us to simplify development over microcontrollers that use C by not having to create HTTP requests by hand each time, and being able to use asynchronous calls.</p>
<p>For those unfamiliar with the request module, we'll use it to make HTTP GET requests like so:</p>
<pre>const request = require('request')<br/><br/>request.get(url, (err, response, body) =&gt; {<br/>  console.log(body)<br/>})</pre>
<p>We give the <kbd>request.get()</kbd> call a URL and a callback that receives an error (that is, hopefully, null), a response object, and a body which is conveniently extracted for us from the full request object (which can be huge and complex).</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using the data you collect</h1>
                </header>
            
            <article>
                
<p>You can use data you collect from the internet for many different projects:</p>
<p class="mce-root"/>
<ul>
<li>I have a string of lights in my lab that are controllable by Twitch live chat</li>
<li>You can compare information in a local project to data from far away</li>
<li>You can just use random data! Markov chains and other semi-random data can make for fun projects</li>
</ul>
<p>Just a few things you'll want to know that will be going into your data collection project:</p>
<ul>
<li>Is this a REST API? Will I get JSON data back or will it need to be parsed? </li>
<li>Is this scraping an HTTP website? How will I parse out the HTML data I'm looking for? (Caution: this gets tricky and can be brittle if the website you're scraping changes often.)</li>
<li>Do I need an API key or JSON Web Token (JWT) for authentication purposes? </li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Some things to keep in mind</h1>
                </header>
            
            <article>
                
<p>Here are some things to keep in mind when doing internet data collection on your Pi projects:</p>
<ul>
<li>Wi-Fi uses a lot of power, so if you're running your project on a battery, you'll need to keep power consumption in mind.</li>
<li>Use your robotics powers for good, don't build projects that do harm, collect information they shouldn't, or have other dubious purposes!</li>
<li>Parsing out huge JSON or HTML responses can take a while on the Pi, so take a look at what you're getting if your project is running a bit slowly.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting weather data on our Pi with OpenWeatherMap</h1>
                </header>
            
            <article>
                
<p>We're going to build a weather bot for this one, and while we could use a temperature sensor, that'd only tell us what it's like indoors, and usually we'd like to see what the weather's like outside before we head out the door. So we're going to use the OpenWeatherMap API to get data and display it on a character LCD; but let's walk before we can run by starting with getting the data from the API to the Pi.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting an OpenWeatherMap API key</h1>
                </header>
            
            <article>
                
<p>First, you'll need to sign up for an account at <a href="https://openweathermap.org/">https://openweathermap.org/</a>, and generate an API key. Then, click your username in the upper-left corner and select <span class="packt_screen">API Keys</span> from the tabs that appear near the top of the page:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5ea5f6af-f9d7-42fc-b514-ffb3398d58c4.png"/></p>
<p>Generate an API key on this page and keep the tab open; we'll use it in the next section to get the info we need.</p>
<p>Next, open the API link in a separate tab; you'll see the main API function calls on this page. The one we're looking for is right at the top – current weather data.</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-597 image-border" src="assets/c10209e8-451e-475f-975f-4236ce2f3bf3.png" style="width:19.83em;height:17.17em;"/></p>
<p class="mce-root"/>
<p>Click the <span class="packt_screen">API doc</span> button and we'll figure out what URL we'll need to make a request to. At the time of writing, the URL is as follows:</p>
<pre>http://api.openweathermap.org/data/2.5/weather?q=[city]&amp;appid=[your API key]</pre>
<p>If you go to that URL in your browser with your city and API key filled in, you should see something like this:</p>
<pre>{"coord":{"lon":-97.74,"lat":30.27},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"base":"stations","main":{"temp":305.59,"pressure":1016,"humidity":46,"temp_min":304.15,"temp_max":307.15},"visibility":16093,"wind":{"speed":3.6,"deg":170,"gust":8.2},"clouds":{"all":1},"dt":1534470960,"sys":{"type":1,"id":2558,"message":0.0037,"country":"US","sunrise":1534507156,"sunset":1534554612},"id":4671654,"name":"Austin","cod":200} </pre>
<div class="packt_tip">If those temperatures look a little high to you (even for Austin, TX), that's because they're in degrees Kelvin. We'll pass the units parameter in our URL in our project set to <kbd>metric</kbd> for degrees Celsius or 'imperial' for degrees Farenheit.</div>
<p>Now we're ready to code in the <kbd>npm</kbd> request module and get our data into our Pi.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Bringing in request</h1>
                </header>
            
            <article>
                
<p>Let's write a basic program without Johnny-Five to collect our data on the Pi before adding in our LCD. In a file on your Pi or ready to be moved to your Pi called <kbd>weather-test.js</kbd>:</p>
<pre class="mce-root">const request = require('request')<br/><br/>setInterval(() =&gt; {<br/>  request({<br/>    url: 'http://api.openweathermap.org/data/2.5/weather',<br/>    qs: {<br/>      q: [your city],<br/>      appid: [your API key],<br/>      units: ['metric' or 'imperial']<br/>    },<br/>    json: true // returns the parsed json body for us<br/>  }, (err, resp, body) =&gt; {<br/>    console.log(body)<br/>  })<br/>}, 60000)</pre>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Parsing the response</h1>
                </header>
            
            <article>
                
<p>The JSON object that is printed out by the console looks something like this (formatted for easier reading):</p>
<pre>{<br/>  "coord":{"lon":-97.74,"lat":30.27},<br/>  "weather":[<br/>    {"id":800,"main":"Clear","description":"clear sky",<br/>       "icon":"01n"}<br/>  ],<br/>  "base":"stations",<br/>  "main":{<br/>    "temp":305.59,<br/>    "pressure":1016,<br/>    "humidity":46,<br/>    "temp_min":304.15,<br/>    "temp_max":307.15<br/>  },<br/>  "visibility":16093,<br/>  "wind":{<br/>    "speed":3.6,<br/>    "deg":170,<br/>    "gust":8.2<br/>  },<br/>  "clouds":{"all":1},<br/>  "dt":1534470960,<br/>  "sys":{<br/>    "type":1,<br/>    "id":2558,<br/>    "message":0.0037,<br/>    "country":"US",<br/>    "sunrise":1534507156,<br/>    "sunset":1534554612<br/>  },<br/>  "id":4671654,<br/>  "name":"Austin",<br/>  "cod":200<br/>} </pre>
<p>That's a lot of weather data! Luckily, because the request <kbd>npm</kbd> module was passed the <kbd>json</kbd>: true property in the options, it assumes that anything passed back is JSON and parses it for you, so you can access data properties right away:</p>
<pre>let longitude = body.coords.lon // -97.74<br/>let conditions = weather.condition // 'clear sky'<br/>let currentTemp = main.temp // 305.59 degrees Kelvin</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Building a weather dashboard with an LCD</h1>
                </header>
            
            <article>
                
<p>Now that we have our weather data, it's time to wire our character LCD to our Pi and use it to show the weather data. We'll explore the Johnny-Five LCD object, wire it to the Pi, and code it all together with Johnny-Five and the <kbd>npm</kbd> request module.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding an LCD to the Pi</h1>
                </header>
            
            <article>
                
<p>Refer to the following diagram for the connection:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-598 image-border" src="assets/6662c3f9-43c8-4744-b1a7-3b6a465954fd.png" style="width:43.00em;height:37.83em;"/></p>
<div class="packt_infobox">Keep in mind that backpack with the I<sup>2</sup>C interface is on the back of the LCD; I moved it forward in the diagram to help you see the connections to the Pi.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The LCD object</h1>
                </header>
            
            <article>
                
<p>Let's take a look at the LCD object in the Johnny-Five documentation in order to figure out how to construct and use our LCD in our weather dashboard code.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Constructing our LCD</h1>
                </header>
            
            <article>
                
<p>Usually, an LCD without the I2C can take up to eight pins! That's a lot, and I like as few wires as possible in my robotics projects (easier to debug later). With our backpack, we only need the two power pins and two I2C pins. But that also means we'll need to find our controller—if you are using the Adafruit backpack, then our controller is the <kbd>PCF8574</kbd>; if you're bought another backpack, make sure it uses one of the PCF8574x chips!</p>
<p>We'll also need the size of the LCD in rows and columns of characters—most are 2 rows by 16 columns, but you may have gone bigger with the 4 row by 20 columns character model. In either case, use whichever works for the LCD you attached to the backpack.</p>
<p>With all that in mind, our constructor should look like this:</p>
<pre><span class="hljs-keyword">let LCD = new</span><span> five.LCD({<br/> controller: </span><span class="hljs-string">"PCF8574",<br/> rows: 2,<br/> cols: 14<br/></span><span>});</span></pre>
<p>Now that we've constructed our LCD, let's see what we need to get set up and get characters on the screen!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up the LCD</h1>
                </header>
            
            <article>
                
<p>First thing we need to do is turn the backlight on:</p>
<pre>LCD.on()</pre>
<p class="mce-root"/>
<p>Then, we'll want to make the blinking cursor disappear:</p>
<pre>LCD.noBlink()</pre>
<p>Now, we're ready to learn about moving the cursor, printing statements, and clearing the LCD. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Printing to and clearing the LCD</h1>
                </header>
            
            <article>
                
<p>Before we print, we want to make sure that the LCD is cleared out:</p>
<pre>LCD.clear()</pre>
<p>And that the cursor is in the home (row 0, col 0) position:</p>
<pre>LCD.home()</pre>
<p>Next, we can print to the LCD:</p>
<pre>LCD.print("Hello, World!")</pre>
<p>Note, you can also chain LCD functions together, as Johnny-Five returns the LCD object from every object function:</p>
<pre>LCD.clear(),home(),print('Hello World!')</pre>
<p>Now, we have everything we need to start making our dashboard!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Coding it all together</h1>
                </header>
            
            <article>
                
<p>We need to take what we've learned in this chapter and put it together. Start by creating a file called <kbd>weather-dashboard.js</kbd> in your <kbd>project</kbd> folder, and setting up your Johnny-Five, Raspi-IO, and request  libraries, constructing your <kbd>Board</kbd> object, and creating your <kbd>board.on('ready')</kbd> handler:</p>
<pre><span>const</span><span> </span><span>Raspi</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'raspi-io'</span><span>)<br/></span><span>const</span><span> </span><span>five</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'johnny-five'</span><span>)<br/>const request = require('request')<br/><br/></span><span>const</span><span> </span><span>board</span><span> </span><span>=</span><span> </span><span>new</span><span> </span><span>five</span><span>.</span><span>Board</span><span>({<br/></span><span> io:</span><span> </span><span>new</span><span> </span><span>Raspi</span><span>()<br/></span><span>})<br/><br/></span><span>board</span><span>.</span><span>on</span><span>(</span><span>'ready'</span><span>, () </span><span>=&gt;</span><span> {</span><span><br/></span><span>})</span></pre>
<p class="mce-root"/>
<p>Then, inside the <kbd>board.on('ready')</kbd> handler, construct and set up our LCD:</p>
<pre>let LCD = new Five.LCD({<br/>  controller: '<span>PCF8574'</span><br/>}) <br/><br/>LCD.noBlink()<br/>LCD.on()</pre>
<p>Then, we'll create a function that gets the weather data, and set it on an interval of one minute:</p>
<pre>function getWeather() {<br/>  request({<br/>    url: 'http://api.openweathermap.org/data/2.5/weather',<br/>    qs: {<br/>      q: [your city],<br/>      appid: [your API key],<br/>      units: ['metric' or 'imperial'],<br/>      json: true<br/>    }<br/>  }, (err, resp, body) =&gt; {<br/><br/>  })<br/>}<br/><br/>setInterval(getWeather, 60000)</pre>
<p>In the request callback, we'll clear, and write to, the LCD:</p>
<pre>LCD.clear()<br/>LCD.home().print('Temp: ' + body.main.temp + ' Deg [F or C]')<br/>LCD.setCursor(0, 1).print(body.weather.description)</pre>
<p>Finally, call the <kbd>getWeather()</kbd> function at the start to prevent the project from taking a full minute before showing anything:</p>
<pre>getWeather()</pre>
<p>Once you have the full code together, load the <kbd>project</kbd> folder onto our Pi the following, navigate to the folder in your Pi SSH session, and run the following commands:</p>
<pre><strong>npm i</strong><br/><strong>sudo node weather-dashboard.js</strong></pre>
<p class="mce-root"/>
<p>You should have the temperature and conditions for the city you put in appear on the LCD, and they should refresh every minute.</p>
<p>Now that we've seen a project where the Pi pulls from a nice neat JSON REST API, let's take a crack at getting data from a bit more difficult source: HTML scraping.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Project – scraping data from websites with your Pi</h1>
                </header>
            
            <article>
                
<p>HTML scraping is the process of making a request to a webpage in order to obtain the HTML itself, so data can be parsed out of it. We're going to build a bot that shows whether <kbd>johnny-five.io</kbd> is up or not by scraping <a href="https://downforeveryoneorjustme.com/">https://downforeveryoneorjustme.com/</a>, a site that tells you if a site is down from multiple sources.</p>
<p>You don't need to change the wiring setup from the weather dashboard for this project, our current hardware is all we need.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Scraping downforeveryoneorjustme.com for johnny-five.io</h1>
                </header>
            
            <article>
                
<p>First, go to <a href="https://downforeveryoneorjustme.com/">https://downforeveryoneorjustme.com/</a> and enter <kbd>johnny-five.io</kbd> in the URL input, and hit <em>Enter</em>. You should end up at <a href="https://downforeveryoneorjustme.com/johnny-five.io">https://downforeveryoneorjustme.com/johnny-five.io</a>, where hopefully you'll see a rather simple page that looks like this:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-469 image-border" src="assets/f20a3b72-33f2-4fa0-ba9d-5a021f349d43.png" style="width:43.83em;height:17.33em;"/></p>
<p>Now to prepare for our web scraping code, we need to know what HTML element we're looking for as well as the URL. Right-click the <span class="packt_screen">It's just you.</span> and select <span class="packt_screen">Inspect</span> (or whichever variation it is on your browser. In Chrome, you'll see something like this:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-599 image-border" src="assets/11d40637-b797-45ae-abc4-a9b83c7c9f88.png" style="width:40.67em;height:21.25em;"/></p>
<p>This is one of the perils of web scraping: there's not always a lot to go on to find your element. The closest we get is the first paragraph (<kbd>p</kbd> tag) of the div with ID <kbd>domain-main-content</kbd>. We'll want to see if it contains the string <kbd>It's just you.</kbd> in order to determine if <kbd>johnny-five.io</kbd> is up.</p>
<p>Now that we have our URL and intended element and parsing criteria, let's start coding by getting the HTML into our Johnny-Five project.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Making the HTTP request</h1>
                </header>
            
            <article>
                
<p>Create a new file in your <kbd>project</kbd> folder called <kbd>scraper-j5-alert.js</kbd>. Start with the normal libraries, <kbd>Board</kbd> construction, and <kbd>board.on('ready')</kbd> handler. Don't forget to include the request <kbd>npm</kbd> module:</p>
<pre><span>const</span><span> </span><span>Raspi</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'raspi-io'</span><span>)<br/></span><span>const</span><span> </span><span>five</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'johnny-five'</span><span>)<br/>const request = require('request')<br/><br/></span><span>const</span><span> </span><span>board</span><span> </span><span>=</span><span> </span><span>new</span><span> </span><span>five</span><span>.</span><span>Board</span><span>({<br/></span><span>  io:</span><span> </span><span>new</span><span> </span><span>Raspi</span><span>()<br/></span><span>})<br/><br/></span><span>board</span><span>.</span><span>on</span><span>(</span><span>'ready'</span><span>, () </span><span>=&gt;</span><span> {</span><span><br/></span><span>})<br/></span></pre>
<p>Then, inside your <kbd>board.on('ready')</kbd> handler, construct and set up your LCD object:</p>
<pre>let LCD = new Five.LCD({<br/> controller: '<span>PCF8574'</span><br/>}) <br/><br/>LCD.noBlink()<br/>LCD.on()</pre>
<p>Then, we're going to create a function to get the HTML from <a href="https://downforeveryoneorjustme.com/johnny-five.io">https://downforeveryoneorjustme.com/johnny-five.io</a> and place it on a five-minute interval. Lastly, we call it so we don't have to wait five minutes for the first result:</p>
<pre>function isJohnnyFiveDown() {<br/>  request('https://downforeveryoneorjustme.com/johnny-five.io',<br/>    (err, resp, body) {<br/>      console.log(body)<br/>    })<br/>}<br/><br/>setInterval(isJohnnyFiveDown, 300000)<br/>isJohnnyFiveDown()</pre>
<p>Load the <kbd>project</kbd> folder onto your Pi, navigate to the folder in you Pi SSH session, and run:</p>
<pre><strong>sudo node scraper-j5-alert.js</strong></pre>
<p>You should, maybe after a few seconds, see something like this in the console (I just screenshotted a small part):</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-471 image-border" src="assets/6305a9db-d760-4a5d-ab20-be8e9b7d979b.png" style="width:120.00em;height:23.83em;"/></p>
<p class="mce-root"/>
<p>But how do we get the info out of that giant string? Regular Expressions? Please, no, not those. Luckily, as Stilwell's Law (see <a href="307e1c9c-bd59-475c-ae7b-91ca5970794e.xhtml" target="_blank">Chapter 2</a>, <em>Creating Your First Johnny-Five Project</em>) states, if you can think of functionality, there exists a package on <kbd>npm</kbd> for it. In this case, we have the cheerio module that allows us to parse and query the HTML string with a JQuery-style API.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using Cheerio to get the element we want</h1>
                </header>
            
            <article>
                
<p>In your <kbd>project</kbd> folder, run the following command:</p>
<pre><strong>npm i --save cheerio</strong></pre>
<p>The basics on cheerio are you parse text by calling:</p>
<pre>const cheerio = require('cheerio')<br/>const $ = cheerio.load(htmlText)</pre>
<p>Then, query using the <kbd>$</kbd> variable like you would with JQuery (see <em>Further reading</em> if you've never used JQuery for a link to a great primer on selecting elements):</p>
<pre>let divWithIDHello = $('#hello')<br/>let helloDivText = divWithIDHello.text()</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Parsing the HTML and showing the result</h1>
                </header>
            
            <article>
                
<p>This is all we'll need to scrape the HTML and get the status. Inside <kbd>scraper-alert-j5.js</kbd>, we're going to add cheerio's <kbd>require()</kbd> call to the top of the file with the other requires: </p>
<pre>const cheerio = require('cheerio')</pre>
<p>Then, we're going to modify the callback that fires when request is done fetching the HTML. We're going to add the cheerio call to load the text and look for the first <kbd>p</kbd> child of the div with ID <kbd>domain-main-content</kbd>, and pull out its text. Then, we'll see if that text contains <kbd>It's just you.</kbd> and write to the LCD:</p>
<pre>function isJohnnyFiveDown() {<br/>  request('https://downforeveryoneorjustme.com/johnny-five.io',<br/>    (err, resp, body) =&gt; {<br/>      let $ = cheerio.load(body)<br/>      let statusText = $('#domain-main-content p')[0].text()<br/>      LCD.clear()<br/>      LCD.home()<br/>      LCD.print('johnny-five.io')<br/>      LCD.cursor(0, 1)<br/>      // make sure to use " to surround the string!<br/>      if(statusText.contains("It's just you.")){ <br/>        LCD.print('is up!')<br/>      } else {<br/>        LCD.print('is down (possibly)!')<br/>      }<br/>  })<br/>}</pre>
<p>We're ready to load it and run it! Load your project onto your Pi, navigate to the folder in your Pi SSH session, and run the following commands:</p>
<pre><strong>npm i</strong><br/><strong>sudo node scraper-alert-j5.js</strong></pre>
<p>And you should see whether Johnny-Five is up or not on your LCD!</p>
<div class="packt_tip">You may have noticed I put <kbd>possibly</kbd> in the down condition. This is because, as I mentioned before, HTML scraping is very brittle.  If they change <span class="packt_screen">It's just you.</span> to <span class="packt_screen">It is just you.</span>, our code will break! So I like to remind the LCD viewer that it may not necessarily be down. Again, this is an example of why, if you can find it, it's better to get data from an API. But sometimes there's no real choice.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we built a weather dashboard using an I<sup>2</sup>C LCD screen knowledge of npm modules and using REST APIs, and leveraged the power of Node.js and the Pi together. You can go forward to build so many new projects with these skills; if you can get the information from the internet, you can use it in your Johnny-Five and Pi projects.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Questions</h1>
                </header>
            
            <article>
                
<ol>
<li>Why is the Pi well suited for projects that require remote data?</li>
<li>What considerations need to be made when making regular web requests from the Pi?</li>
<li>Why can we chain the LCD object calls, such as <kbd>LCD.clear().home()</kbd>?</li>
<li>Why do we use an I2C backpack with our LCD?</li>
<li>Would we need more components to use the LCD without the backpack?</li>
<li>Does <kbd>LCD.on()</kbd> turn on the entire LCD? If not, what does it do?</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Further reading</h1>
                </header>
            
            <article>
                
<ul>
<li><strong>The request npm module page</strong>: <a href="https://www.npmjs.com/package/request">https://www.npmjs.com/package/request</a></li>
<li><strong>The full OpenWetherMap API</strong>: <a href="https://openweathermap.org/api">https://openweathermap.org/api</a></li>
<li><strong>The Johnny-Five LCD documentation</strong>: <a href="http://johnny-five.io/api/lcd/">http://johnny-five.io/api/lcd/</a></li>
<li><strong>The cheerio npm module page</strong>: <a href="https://www.npmjs.com/package/cheerio">https://www.npmjs.com/package/cheerio</a></li>
<li><strong>JQuery 'Selecting Elements' tutorial</strong>: <a href="https://learn.jquery.com/using-jquery-core/selecting-elements/">https://learn.jquery.com/using-jquery-core/selecting-elements/</a></li>
</ul>


            </article>

            
        </section>
    </body></html>