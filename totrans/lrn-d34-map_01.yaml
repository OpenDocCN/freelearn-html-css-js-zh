- en: Gathering Your Cartography Toolbox
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 收集您的地图学工具箱
- en: Welcome to the world of cartography with D3\. In this chapter, you will be given
    all the tools you need to create a map using D3\. These tools exist freely and
    openly, thanks to the wonderful world of open source. Given that we are going
    to be speaking in terms of the web, our languages will be HTML, CSS, and JavaScript.
    After reading this book, you will be able to use all three languages effectively
    in order to create maps on your own.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎来到D3的地图学世界。在本章中，您将获得创建地图所需的所有工具，这些工具都是免费和开源的，得益于美好的开源世界。鉴于我们将使用网络术语进行讨论，我们的语言将是HTML、CSS和JavaScript。阅读完这本书后，您将能够有效地使用这三种语言来创建自己的地图。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Quick bootstrap
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 快速引导
- en: Step-by-step bootstrap
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 逐步引导
- en: Installing key libraries and tools
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装关键库和工具
- en: Using the web browser as a development tool
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用网络浏览器作为开发工具
- en: When creating maps in D3, your toolbox is extraordinarily light. The goal is
    to focus on creating data visualizations and remove the burden of heavy IDEs and
    map-making software.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在D3中创建地图时，您的工具箱非常轻便。目标是专注于创建数据可视化，并移除重IDE和地图制作软件的负担。
- en: Quick bootstrap
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 快速引导
- en: The following instructions assume that Node.js , `npm`, and `git` are already
    installed on your system. If not, feel free to follow the *Step-by-Step bootstrap*
    section.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 以下说明假设Node.js、`npm`和`git`已安装到您的系统上。如果没有，请随意遵循*逐步引导*部分。
- en: 'Type the following in the command line to install a light webserver::'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在命令行中输入以下内容以安装轻量级网络服务器：
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Install TopoJSON:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 安装TopoJSON：
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Clone the sample code with included libraries:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 克隆包含库的示例代码：
- en: '[PRE2]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Go to the root project:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 进入根项目：
- en: '[PRE3]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'To start the server type the following:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动服务器，请输入以下命令：
- en: '[PRE4]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: You can download the example code files from your account at [http://www.packtpub.com](http://www.packtpub.com)
    for all the Packt Publishing books you have purchased. If you purchased this book
    elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files emailed directly to you.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://www.packtpub.com](http://www.packtpub.com)下载示例代码文件，这些文件存储在您购买的所有Packt
    Publishing书籍的账户中。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。
- en: 'Now, open your web browser to `http://localhost:8080/chapter-1/example-1.html`,
    and you should see the following map:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，打开您的网络浏览器到`http://localhost:8080/chapter-1/example-1.html`，您应该看到以下地图：
- en: '![](img/9cd01d3a-43f6-4b21-99c5-3e33f3fea051.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9cd01d3a-43f6-4b21-99c5-3e33f3fea051.png)'
- en: Step-by-step bootstrap
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 逐步引导
- en: The next section covers detailed instructions to set up your development environment
    if you do not have any of the required packages. By the end of the chapter, you
    will have a working environment for the rest of the book (an example of a running
    map and an initial look at tools used to create visualizations).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 下一节将详细介绍如何设置开发环境，如果您没有安装所需的任何包。到本章结束时，您将拥有本书剩余部分的工作环境（一个运行中的地图示例以及创建可视化所使用的工具的初步了解）。
- en: A lightweight web server
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 轻量级网络服务器
- en: 'Technically, most of the content we will craft can render directly in the browser
    without the use of a web server. However, we highly recommend you do not go ahead
    with this approach. Running a web server in your local development environment
    is extremely easy and provides several benefits:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术上讲，我们将创建的大部分内容可以直接在浏览器中渲染，而无需使用网络服务器。然而，我们强烈建议您不要采取这种方法。在本地开发环境中运行网络服务器非常简单，并提供了一些好处：
- en: Geographic information, statistical data, and visualization code can be clearly
    separated into isolated files
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地理信息、统计数据和可视化代码可以清晰地分离到独立的文件中
- en: API calls can be stubbed and simulated, allowing easy integration into a full-stack
    application in the future
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: API调用可以被模拟和模拟，允许轻松集成到未来的全栈应用程序中
- en: It will prevent common mistakes when making AJAX calls to fetch geographic and
    statistical data (for example, the same-origin policy)
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它将防止在调用AJAX以获取地理和统计数据时出现常见错误（例如，同源策略）
- en: For our choice of web server and other tools in our toolbox, we will rely on
    a Node.js package named `http-server`. Node.js is a platform built on Chrome's
    JavaScript runtime, which is used to build fast, scalable network applications.
    The platform includes **Node Package Manager** (**npm**), which was created by
    other members of the vibrant Node.js community and allows the developer to quickly
    install packages of pre-built software.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们选择的 Web 服务器和工具箱中的其他工具，我们将依赖于一个名为 `http-server` 的 Node.js 包。Node.js 是一个基于
    Chrome 的 JavaScript 运行时的平台，用于构建快速、可扩展的网络应用程序。该平台包括 **Node 包管理器** (**npm**)，它是由充满活力的
    Node.js 社区的其他成员创建的，允许开发者快速安装预构建软件的包。
- en: 'To install Node.js, simply perform the following steps:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装 Node.js，只需执行以下步骤：
- en: Go to the website [http://nodejs.org](http://nodejs.org).
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问网站 [http://nodejs.org](http://nodejs.org)。
- en: Click on the INSTALL button.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击安装按钮。
- en: Open the downloaded package and follow the defaults.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开下载的包并遵循默认设置。
- en: 'To test the installation, type the following in the command line:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 要测试安装，请在命令行中输入以下内容：
- en: '[PRE5]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Something similar should return:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 应该返回类似以下的内容：
- en: '[PRE6]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: This means we have installed the given version of Node.js.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着我们已经安装了本书编写时的给定版本的 Node.js。
- en: TopoJSON is a command-line utility used to create files in the TopoJSON-serialized
    format. The TopoJSON format will be discussed in detail in [Chapter 6](80f84fe0-7828-4ecc-9973-3e2bdef7ab55.xhtml),
    *Finding and Working with Geographic Data*. The TopoJSON utility is also installed
    via `npm`.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: TopoJSON 是一个命令行工具，用于创建 TopoJSON 序列化格式的文件。TopoJSON 格式将在第 6 章 [80f84fe0-7828-4ecc-9973-3e2bdef7ab55.xhtml]
    中详细讨论，*寻找和操作地理数据*。TopoJSON 工具也是通过 `npm` 安装的。
- en: 'We have already installed Node.js and `npm`, so enter the following on the
    command line:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经安装了 Node.js 和 `npm`，所以请在命令行中输入以下内容：
- en: '[PRE7]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Once the installation is complete, you should check the version of TopoJSON
    installed on your machine just as we did with Node.js:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，你应该检查机器上安装的 TopoJSON 版本，就像我们检查 Node.js 一样：
- en: '[PRE8]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: If you see version 3.x, it means you have successfully installed TopoJSON.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你看到版本 3.x，这意味着你已成功安装 TopoJSON。
- en: TopoJSON uses `node-gyp` which has several dependencies based on the operating
    system. Please go to [http://github.com/TooTallNate/node-gyp](http://github.com/TooTallNate/node-gyp)
    for details.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: TopoJSON 使用 `node-gyp`，它基于操作系统有几个依赖项。请访问 [http://github.com/TooTallNate/node-gyp](http://github.com/TooTallNate/node-gyp)
    获取详细信息。
- en: 'If you''re using Windows, the basic steps to get TopoJSON working are as follows:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是 Windows 系统，使 TopoJSON 工作的基本步骤如下：
- en: Install Python 2.x (3.x not supported at the time of writing this book).
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装 Python 2.x（本书编写时不支持 3.x）。
- en: Install Microsoft Visual Studio C++ 2012 for Desktop (Express).
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装桌面版 Microsoft Visual Studio C++ 2012。
- en: Using the web browser as a development tool
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用网页浏览器作为开发工具
- en: Although any modern browser supports **Scalable Vector Graphics** (**SVG**)
    and has some kind of console, we strongly recommend you use Google Chrome for
    these examples. It comes bundled with developer tools that will allow you to very
    easily open, explore, and modify the code. If you are not using Google Chrome,
    please go to [http://www.google.com/chrome](http://www.google.com/chrome) and
    install Google Chrome.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然任何现代浏览器都支持 **可缩放矢量图形** (**SVG**) 并有一些类型的控制台，但我们强烈建议你使用 Google Chrome 进行这些示例。它捆绑了开发者工具，这将使你能够非常容易地打开、探索和修改代码。如果你没有使用
    Google Chrome，请访问 [http://www.google.com/chrome](http://www.google.com/chrome)
    并安装 Google Chrome。
- en: Installing the sample code
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装示例代码
- en: Go to [https://github.com/climboid/d3jsMaps](https://github.com/climboid/d3jsMaps)
    and either clone the repo, if you are familiar with Git cloning, or simply download
    the zipped version. Once it is downloaded, make sure to extract the file if you
    have it zipped.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 访问 [https://github.com/climboid/d3jsMaps](https://github.com/climboid/d3jsMaps)
    并根据你是否熟悉 Git 克隆，克隆仓库或简单地下载压缩版本。下载完成后，请确保如果你有压缩文件，将其解压。
- en: 'Use the command prompt or terminal to go to the directory where you downloaded
    your file. For instance, if you downloaded the file to your desktop, type in the
    following:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 使用命令提示符或终端转到你下载文件的目录。例如，如果你将文件下载到桌面，请输入以下内容：
- en: '[PRE9]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'To start the server type the following:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动服务器，请输入以下内容：
- en: '[PRE10]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The last command will launch the simple server we installed previously for the
    supplied sample code. This means that, if you open your browser and go to `http://localhost:8080/chapter-1/example-1.html`,
    you should see a map
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一条命令将启动我们之前安装的用于提供示例代码的简单服务器。这意味着，如果你打开浏览器并转到 `http://localhost:8080/chapter-1/example-1.html`，你应该看到一个地图
- en: of Europe, similar to the one shown earlier.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 欧洲的，类似于前面展示的。
- en: Working with the developer tools
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用开发者工具
- en: 'It''s time to open the developer tools. In the top-right corner of the browser,
    you will see the icon as shown in the following screenshot:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候打开开发者工具了。在浏览器的右上角，你会看到以下截图所示的图标：
- en: '![](img/f5ed9df7-4f56-4a0b-9aea-1042f753eb7d.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f5ed9df7-4f56-4a0b-9aea-1042f753eb7d.png)'
- en: This icon opens a submenu. Click on More Tools, then click on Developer tools.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 此图标打开一个子菜单。点击更多工具，然后点击开发者工具。
- en: A panel will open at the bottom of the browser, containing all the developer
    tools at your disposal.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器底部将打开一个面板，包含你可用的一切开发者工具。
- en: The option names mentioned here might differ according to the version of Chrome
    you are using.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 这里提到的选项名称可能会根据你使用的 Chrome 版本而有所不同。
- en: '![](img/14c14339-fa60-4251-bca3-fc68c396d1c7.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/14c14339-fa60-4251-bca3-fc68c396d1c7.png)'
- en: For quick access to developer tools on the Mac, use *alt* + command + *I*; for
    Windows PCs, use *Ctrl* + *Shift* + *I*.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 为了快速访问 Mac 上的开发者工具，使用 *alt* + command + *I*；对于 Windows PC，使用 *Ctrl* + *Shift*
    + *I*。
- en: 'Within developer tools, you have a series of tabs (Elements, Network, Sources,
    and so on). These tools are extremely valuable and will allow you to inspect different
    aspects of your code. For more information on the Chrome developer tools, please
    go to this link: [https://developer.chrome.com/devtools/docs/authoring-development-workflow](https://developer.chrome.com/devtools/docs/authoring-development-workflow).'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发者工具中，你有一系列标签（元素、网络、源等）。这些工具非常有价值，将允许你检查代码的不同方面。有关 Chrome 开发者工具的更多信息，请访问此链接：[https://developer.chrome.com/devtools/docs/authoring-development-workflow](https://developer.chrome.com/devtools/docs/authoring-development-workflow)。
- en: Since we are going to focus on the Elements tab, click on it if it is not already
    selected.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们将重点放在元素标签上，如果它尚未选中，请点击它。
- en: 'You should see something similar to the preceding screenshot; it will have
    the following code statement:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该看到与前面的截图类似的内容；它将包含以下代码语句：
- en: '[PRE11]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: If you click on the SVG item, you should see it expand and display the path
    tag. The path tag will have several numbers and characters tied to a `d` attribute.
    These numbers are control points that draw the path. We will cover how the path
    is drawn in the next chapter and how path tags are used to create maps in [Chapter
    4](c22382c6-84d9-411f-b795-681df2321005.xhtml)*,* *Creating a Map* and [Chapter
    5](d2d3d4c7-b83a-4947-993a-84baa0f01674.xhtml)*,* *Click-Click Boom! Applying
    Interactivity to Your Map*.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击 SVG 项目，你应该看到它展开并显示路径标签。路径标签将包含与 `d` 属性相关联的几个数字和字符。这些数字是绘制路径的控制点。我们将在下一章中介绍路径的绘制方式以及路径标签如何用于创建地图，在[第
    4 章](c22382c6-84d9-411f-b795-681df2321005.xhtml)*,* *创建地图*和[第 5 章](d2d3d4c7-b83a-4947-993a-84baa0f01674.xhtml)*,*
    *点击-点击爆炸！为你的地图添加交互性*。
- en: 'We also want to draw your attention to how the HTML5 application loads the
    D3 library. Again, in the Elements tag, after the SVG tag, you should see the
    `<script>` tag pointing to D3.js and TopoJSON:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还希望引起你的注意，HTML5 应用程序如何加载 D3 库。同样，在元素标签中，在 SVG 标签之后，你应该看到指向 D3.js 和 TopoJSON
    的 `<script>` 标签：
- en: '[PRE12]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: If you click on the path located inside the SVG tag, you will see a new panel
    called the CSS inspector or the styles inspector. It shows and controls all the
    styles that are applied to a selected element, in this case, the path element.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击位于 SVG 标签内的路径，你会看到一个名为 CSS 检查器或样式检查器的新面板。它显示并控制应用于所选元素的所有样式，在这种情况下，是路径元素。
- en: 'These three components create a D3 visualization:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这三个组件创建了一个 D3 可视化：
- en: HTML5 (the SVG and path elements)
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: HTML5（SVG 和路径元素）
- en: JavaScript (the D3.js library and map code)
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JavaScript（D3.js 库和地图代码）
- en: CSS (the styling of the HTML5 elements)
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CSS（HTML5 元素的样式）
- en: Creating maps and visualizations using these three components will be discussed
    and analyzed throughout the book.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在整本书中，将讨论和分析使用这三个组件创建地图和可视化。
- en: Summary
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概述
- en: This chapter reveals a quick glimpse of the steps for basic setup in order to
    have a well-organized codebase to create maps with D3\. You should become familiar
    with this setup because we will be using this convention throughout the book.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 本章简要介绍了基本设置的步骤，以便有一个组织良好的代码库来使用 D3 创建地图。你应该熟悉这个设置，因为我们将在整个书中使用这个约定。
- en: The remaining chapters will focus on creating detailed maps and achieving realistic
    visualizations through HTML, JavaScript, and CSS.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 剩余的章节将专注于使用 HTML、JavaScript 和 CSS 创建详细地图和实现逼真的可视化。
- en: Let's go!
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧！
