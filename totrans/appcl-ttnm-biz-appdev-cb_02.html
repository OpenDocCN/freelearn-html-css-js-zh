<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Cross-platform UI"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Cross-platform UI</h1></div></div></div><p>In this chapter, we will cover:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Cross-platform HUD progress indicator</li><li class="listitem" style="list-style-type: disc">In-app notifications</li><li class="listitem" style="list-style-type: disc">Screen Break Menu</li><li class="listitem" style="list-style-type: disc">Metro Style Tab Control</li><li class="listitem" style="list-style-type: disc">Slideout Menu</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Introduction</h1></div></div></div><p>Titanium is not a write-once-and-run-anywhere application framework, but more of a write-once-and-modify-for-each-platform one. Nowhere is this more important than in the user interface of your app. Great user experiences involve making the user feel familiar and at the same time accentuate the device the app is running upon. Titanium does this by embracing both common and platform-specific UI widgets.</p><p>The recipes in this chapter will demonstrate how to create helpful UI widgets to create a unique cross-platform experience for your Enterprise users. Each recipe is designed to be easily branded and used within your existing Titanium Enterprise apps.</p></div></div>
<div class="section" title="Cross-platform HUD progress indicator"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Cross-platform HUD progress indicator</h1></div></div></div><p>The <span class="strong"><strong>Heads Up Display</strong></span> (<span class="strong"><strong>HUD</strong></span>) interaction <a id="id82" class="indexterm"/>pattern, named after the UIKit <code class="literal">UIProgressHUD</code> component, <a id="id83" class="indexterm"/>is an effective way to provide progress information to your users. This is especially true for Enterprise mobile apps, as they typically are deeply integrated with backend systems. So the app does not appear sluggish or unresponsive while making these calls. It is recommended to use the <code class="literal">Waiting</code> or <code class="literal">Progress</code> indicators to provide feedback to the users. This recipe demonstrates how to use an <code class="literal">HUD</code> module to present a <code class="literal">Waiting</code> indicator to inform your user about the progress of long-running actions in your app.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec21"/>Getting ready</h2></div></div></div><p>This chainable CommonJS <code class="literal">HUD</code> module<a id="id84" class="indexterm"/>, <code class="literal">hud.js</code>, provides a native iOS and Android progress indicator experience. This is a simple recipe demonstrating <a id="id85" class="indexterm"/>how to<a id="id86" class="indexterm"/> use the <code class="literal">HUD</code> module. You can use this example to easily incorporate the module into your Titanium project.</p><div class="mediaobject"><img src="graphics/5343OT_02_01.jpg" alt="Getting ready"/></div><div class="section" title="Adding the HUD module to your project"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec14"/>Adding the HUD module to your project</h3></div></div></div><p>Adding the <a id="id87" class="indexterm"/>
<code class="literal">HUD</code> module to your <a id="id88" class="indexterm"/>project is easy. Simply copy the <code class="literal">hud.js</code> file into the <code class="literal">Resources</code> folder of your project, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/5343OT_02_02.jpg" alt="Adding the HUD module to your project"/></div><p>Once you've<a id="id89" class="indexterm"/> added the <code class="literal">hud.js</code> file to your project, you need to use <code class="literal">require</code> to import the module into your code:</p><div class="informalexample"><pre class="programlisting">//Create our application namespace
var my = {
    hud : require('hud'),
    isAndroid : Ti.Platform.osname === 'android'
};</pre></div></div><div class="section" title="Creating a sample window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec15"/>Creating a sample window</h3></div></div></div><p>To demonstrate <a id="id90" class="indexterm"/>the <code class="literal">HUD</code> module, we create a basic window with a single button. To do this, first we create a <code class="literal">Ti.UI.Window</code> and attach a button:</p><div class="informalexample"><pre class="programlisting">var win = Ti.UI.createWindow({
  backgroundColor:'yellow'
});

var hudButton = Ti.UI.createButton({
  title:'Show HUD', height:50, right:5, left:5, bottom: 40
});
win.add(hudButton);</pre></div></div><div class="section" title="Adding HUD listeners"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec16"/>Adding HUD listeners</h3></div></div></div><p>Next in <a id="id91" class="indexterm"/>our example, we add a series of listeners. The following code block demonstrates how to add a listener, to be fired when the HUD window is closed:</p><div class="informalexample"><pre class="programlisting">my.hud.addEventListener('close',function(e){
  Ti.API.info('HUD Window Closed');
});</pre></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">You can also listen to an <code class="literal">open</code> event, which will fire when the HUD window is opened:<div class="informalexample"><pre class="programlisting">my.hud.addEventListener('open',function(e){
  Ti.API.info('HUD Window Open');
});</pre></div></li><li class="listitem">The <code class="literal">dblclick</code> event is fired when the user double taps on the HUD window:<div class="informalexample"><pre class="programlisting">my.hud.addEventListener(dblclick,function(e){
  Ti.API.info('HUD Window double clicked');
});</pre></div></li><li class="listitem">The <code class="literal">hudTextChanged</code> event is fired whenever <code class="literal">updateMessage</code> is called to update the HUD window message:<div class="informalexample"><pre class="programlisting">my.hud.addEventListener('hudTextChanged',function(e){
  Ti.API.info('Text Changed from ' + e.oldValue + ' to ' + e.newValue);
});</pre></div></li><li class="listitem">If you are using the <span class="strong"><strong>Close Timer</strong></span> functionality, it is helpful to know if your window is being closed by the timer or by some other method. To help determine this, you can subscribe to the <code class="literal">timerClose</code> event, as shown in the following snippet:<div class="informalexample"><pre class="programlisting">my.hud.addEventListener('timerClose',function(e){
  Ti.API.info('HUD Window Closed by Timer');
});</pre></div></li></ol></div><div class="section" title="Creating a HUD indicator"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec09"/>Creating a HUD indicator</h4></div></div></div><p>We can <a id="id92" class="indexterm"/>now use the button created earlier, to demonstrate how to show the HUD window. To the click handler of the button we've added logic to <code class="literal">load</code> the <code class="literal">HUD</code> module with the message text, <code class="literal">Please Wait...</code>. Then <a id="id93" class="indexterm"/>we call the <code class="literal">show</code> method, which displays the HUD window to the user.</p><div class="informalexample"><pre class="programlisting">hudButton.addEventListener('click',function(e){
  win.navBarHidden=true;
  my.hud.load('Please Wait...').show();
});</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>On Android, you might wish to hide the navigation bar so that the HUD window can take up the entire screen. If you don't hide the navigation bar, the <code class="literal">HUD</code> module will set the window title to the same text as provided for the HUD display message.</p></div></div></div><div class="section" title="Updating the HUD message"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec10"/>Updating the HUD message</h4></div></div></div><p>By calling<a id="id94" class="indexterm"/> the <code class="literal">updateMessage</code> function<a id="id95" class="indexterm"/>, you can update the HUD window text at<a id="id96" class="indexterm"/> any time. The following line demonstrates how to update the text from <code class="literal">Please Wait...</code> to <code class="literal">Still waiting...</code>.</p><div class="informalexample"><pre class="programlisting">my.hud.updateMessage('Still waiting...');</pre></div></div><div class="section" title="Closing the HUD window"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec11"/>Closing the HUD window</h4></div></div></div><p>There are <a id="id97" class="indexterm"/>two ways to close<a id="id98" class="indexterm"/> the <code class="literal">HUD</code> module window. The first and most common way is to call the <code class="literal">hide</code> function, as shown here:</p><div class="informalexample"><pre class="programlisting">my.hud.hide();</pre></div><p>The second way to close the HUD window is to use the <code class="literal">addCloseTimer</code> function on the <code class="literal">HUD</code> module before the <code class="literal">show</code> function is called, as highlighted in the following snippet. In this example, the HUD window will close after 5,000 milliseconds.</p><div class="informalexample"><pre class="programlisting">my.hud.load('Please Wait...').addCloseTimer(5000).show();</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>The <code class="literal">addCloseTimer</code> function is helpful in dealing with timeout situations. For example, when making network calls you might wish to abandon the process after five seconds so as not to keep the user waiting too long.</p></div></div></div></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec22"/>How it works…</h2></div></div></div><p>The <code class="literal">HUD</code> module <a id="id99" class="indexterm"/>provides a series of functions to create, update, and maintain the HUD progress window. The following list<a id="id100" class="indexterm"/> provides a description of each method along with their associated functionalities:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">load</code> function<a id="id101" class="indexterm"/>: This is called to build the <code class="literal">Ti.UI.Window</code>, <code class="literal">Ti.UI.ActivityIndicator</code>, and <code class="literal">Ti.UI.Label</code>, that will<a id="id102" class="indexterm"/> later be used to display your progress indicator. Please note you will need to first call the <code class="literal">load</code> function, followed by the <code class="literal">show</code> function, to display the HUD window.</li><li class="listitem" style="list-style-type: disc">The <a id="id103" class="indexterm"/><code class="literal">show</code> function: This <a id="id104" class="indexterm"/>displays the HUD window. Please note you first need to call the <code class="literal">load</code> method before calling <code class="literal">show</code>. If this is done out of sequence, the HUD window will not appear.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">updateMessage</code> function<a id="id105" class="indexterm"/>: To update the<a id="id106" class="indexterm"/> HUD label, you call this function, providing a string with the updated text to be displayed.</li><li class="listitem" style="list-style-type: disc">The <a id="id107" class="indexterm"/><code class="literal">hide</code> function<a id="id108" class="indexterm"/>: Calling this will close the HUD window and remove all of the HUD objects created.</li><li class="listitem" style="list-style-type: disc">The <a id="id109" class="indexterm"/><code class="literal">addCloseTimer</code> function: You<a id="id110" class="indexterm"/> use this function to set a timer that will close the HUD window after the provided duration (in milliseconds).</li><li class="listitem" style="list-style-type: disc">The<a id="id111" class="indexterm"/> <code class="literal">removeCloseTimer</code> function: You<a id="id112" class="indexterm"/> use this function to close the timer that you set using <code class="literal">addCloseTimer</code>.</li><li class="listitem" style="list-style-type: disc">The <a id="id113" class="indexterm"/><code class="literal">addEventListener</code> function: The HUD <a id="id114" class="indexterm"/>module supports several events as detailed in the next section. You can subscribe to these events using this function.</li><li class="listitem" style="list-style-type: disc">The <a id="id115" class="indexterm"/><code class="literal">removeEventListener</code> function: Any<a id="id116" class="indexterm"/> events you have subscribed to, can be removed by calling this function. To remove an event, you need to provide the same name and callback arguments as you used while calling <code class="literal">addEventListener</code>.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip07"/>Tip</h3><p>All functions in the HUD module are chainable, similar to jQuery functions.</p></div></div></li></ul></div></div></div>
<div class="section" title="In-app notifications"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>In-app notifications</h1></div></div></div><p>There is often a requirement to alert your users that something has happened. Titanium allows you to <a id="id117" class="indexterm"/>use the <code class="literal">alert</code> function, just as you would do on the web. But, often this modal alert can be limiting and outside of your design requirements.</p><p>This recipe walks through how to use the <code class="literal">NotifyUI</code> module<a id="id118" class="indexterm"/> to create cross-platform, <a id="id119" class="indexterm"/>branded notification windows.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec23"/>Getting ready</h2></div></div></div><p>
<code class="literal">NotifyUI</code> is a CommonJS module consisting of a single JavaScript file, <code class="literal">notify.js</code>, and a few image assets used for styling. You can control the styling of the module through configuration or by updating core image files, making it easy to fit your existing branding requirements.</p><p>This recipe is a simple demonstration on how to use the <code class="literal">NotifyUI</code> module. You can use this example to quickly incorporate the module into your Titanium project.</p><p>The following screenshots show this recipe in action:</p><div class="mediaobject"><img src="graphics/5343OT_02_03.jpg" alt="Getting ready"/></div><div class="section" title="Adding the NotifyUI module to your project"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec17"/>Adding the NotifyUI module to your project</h3></div></div></div><p>Adding the <a id="id120" class="indexterm"/>
<code class="literal">NotifyUI</code> module to your project is easy. <a id="id121" class="indexterm"/>Simply copy the <code class="literal">NotifyUI</code> folder into the <code class="literal">Resources</code> folder of your Titanium project, as highlighted in the following screenshot. This will install the CommonJS module and all supporting images.</p><div class="mediaobject"><img src="graphics/5343OT_02_04.jpg" alt="Adding the NotifyUI module to your project"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip08"/>Tip</h3><p>The <code class="literal">NotifyUI</code> folder must be copied to the <code class="literal">Resources</code> folder of your Titanium project in order for this recipe to work as designed.</p></div></div></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec24"/>How to do it…</h2></div></div></div><p>Once you've added the <code class="literal">NotifyUI</code> folder to your project, you need to use <code class="literal">require</code> to import the module into your code:</p><div class="informalexample"><pre class="programlisting">//Create our application namespace
var my = {
  notify = require('./NotifyUI/notify'),
  isAndroid : Ti.Platform.osname === 'android'
};</pre></div><div class="section" title="Creating a sample window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec18"/>Creating a sample window</h3></div></div></div><p>To <a id="id122" class="indexterm"/>demonstrate the <code class="literal">NotifyUI</code> module, we create a basic window with two buttons:</p><div class="informalexample"><pre class="programlisting">var win = Ti.UI.createWindow({
  backgroundColor:'#fff'
});

var showNotifyButton = Ti.UI.createButton({
  title:'Show Notification', top: 100, 
  height:50, right:5, left:5
});
win.add(showNotifyButton);

var closeNotifyButton = Ti.UI.createButton({
  title:'Close Notification', top: 200, 
  height:50, right:5, left:5
});
win.add(closeNotifyButton);</pre></div></div><div class="section" title="Adding NotifyUI listeners"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec19"/>Adding NotifyUI listeners</h3></div></div></div><p>Next in <a id="id123" class="indexterm"/>our example, we add a series of listeners. The following code block demonstrates how to add a listener, to be fired when the <code class="literal">NotifyUI</code> notification window is closed:</p><div class="informalexample"><pre class="programlisting">my.notify.addEventListener('close',function(e){
  Ti.API.info(Notify Window Closed');
});</pre></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">You can also listen to <code class="literal">open</code> event, which will fire when the notification window is opened.<div class="informalexample"><pre class="programlisting">my.notify.addEventListener('open',function(e){
  Ti.API.info('Notify Window Open');
});</pre></div></li><li class="listitem">The <code class="literal">dblclick</code> event is fired when the user double taps on the notification window.<div class="informalexample"><pre class="programlisting">my.notify.addEventListener('dblclick',function(e){
  Ti.API.info('Notify Window double clicked');
});</pre></div></li><li class="listitem">The <code class="literal">textChanged</code> event is fired from the <code class="literal">NotifyUI</code> module whenever <code class="literal">updateMessage</code> is called to update the notification window message.<div class="informalexample"><pre class="programlisting">my.notify.addEventListener('textChanged',function(e){
  Ti.API.info('Text Changed from ' + e.oldValue + ' to ' + e.newValue);
});</pre></div></li></ol></div><p>If you are<a id="id124" class="indexterm"/> using the Close Timer functionality, it is helpful to know if your window is being closed by the timer or by some other method. To help determine this, you can subscribe to the <code class="literal">timerClose</code> event, as shown in the following snippet:</p><div class="informalexample"><pre class="programlisting">my.notify.addEventListener('timerClose',function(e){
  Ti.API.info('Notify Window Closed by Timer');
});</pre></div></div><div class="section" title="Showing a message window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec20"/>Showing a message window</h3></div></div></div><p>We can now<a id="id125" class="indexterm"/> use the button created earlier, to demonstrate how to show the notification window. To the click handler of the button we've added logic to <code class="literal">load</code> the module with the message text, <code class="literal">Hello World</code>, and the style, <code class="literal">complete</code>. Then we call the <code class="literal">show</code> method, which displays the notification window to the user.</p><div class="informalexample"><pre class="programlisting">showNotifyButton.addEventListener('click',function(e){
  win.navBarHidden = true;
  my.notify.load({
    style:'complete',
    message:'Hello World'
  }).show();
});</pre></div><div class="section" title="Updating a message"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec12"/>Updating a message</h4></div></div></div><p>By calling<a id="id126" class="indexterm"/> the <code class="literal">updateMessage</code> function, you can update the notification text any time. The following demonstrates how to update the text from <code class="literal">Hello World</code> to <code class="literal">I'm a new message</code>:</p><div class="informalexample"><pre class="programlisting">my.notify.updateMessage("I'm a new message");</pre></div></div></div><div class="section" title="Closing a message window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec21"/>Closing a message window</h3></div></div></div><p>There are three <a id="id127" class="indexterm"/>ways to close the notification window. The first and most common way is to call the <code class="literal">hide</code> function, as shown in the following snippet:</p><div class="informalexample"><pre class="programlisting">my.notify.hide();</pre></div><p>The second way to close the notification window is to use the <code class="literal">addCloseTimer</code> function before the <code class="literal">show</code> function is called, as shown in the following code block. In this example, the window will automatically close after 5,000 milliseconds (5 seconds).</p><div class="informalexample"><pre class="programlisting">my.notify.load({
  style:'complete',
  message:'Hello World'
}).addCloseTimer(5000).show();</pre></div><p>The third and the final way to close the notification window is to have the user double tap on the message. This gesture will trigger the module to internally handle the close actions.</p></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec25"/>How it works…</h2></div></div></div><p>The <code class="literal">NotifyUI</code> module <a id="id128" class="indexterm"/>provides a series of functions to create, update, and maintain the notification window. The following list provides a description of each method, along with their associated functionalities:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<a id="id129" class="indexterm"/> <code class="literal">load</code> function: This is called to build the <code class="literal">Ti.UI.Window</code>, <code class="literal">Ti.UI.Label</code>, and <a id="id130" class="indexterm"/>associated notification style, that will later be used to display your notification. Please note you will need to first call the <code class="literal">load</code> function, followed by the <code class="literal">show</code> function, to display the notification window.</li><li class="listitem" style="list-style-type: disc">The <a id="id131" class="indexterm"/><code class="literal">show</code> function: This displays the notification window. Please note you first <a id="id132" class="indexterm"/>need to call the <code class="literal">load</code> method before calling <code class="literal">show</code>. If this is done out of sequence, the notification window will not appear. These sequenced operations provide the flexibility to separate the load and show operations. This can be important if you have several notification events in succession.</li><li class="listitem" style="list-style-type: disc">The <a id="id133" class="indexterm"/><code class="literal">updateMessage</code> function: To update the <a id="id134" class="indexterm"/>notification label, you call this function, providing it a string with the updated text to be displayed.</li><li class="listitem" style="list-style-type: disc">The<a id="id135" class="indexterm"/> <code class="literal">hide</code> function: <a id="id136" class="indexterm"/>Calling this will close the notification window and remove all the <code class="literal">NotifyUI</code> objects created.</li><li class="listitem" style="list-style-type: disc">The <a id="id137" class="indexterm"/><code class="literal">addCloseTimer</code> function: <a id="id138" class="indexterm"/>You use this function to set a timer that will close the notification window after the provided duration (in milliseconds).</li><li class="listitem" style="list-style-type: disc">The<a id="id139" class="indexterm"/> <code class="literal">removeCloseTimer</code> function: Using<a id="id140" class="indexterm"/> this you can close the timer that you set using <code class="literal">addCloseTimer</code>.</li><li class="listitem" style="list-style-type: disc">The <a id="id141" class="indexterm"/><code class="literal">addEventListener</code> function: The <a id="id142" class="indexterm"/><code class="literal">NotifyUI</code> module supports several events as detailed in the next section. You can subscribe to these events using this function.</li><li class="listitem" style="list-style-type: disc">The<a id="id143" class="indexterm"/> <code class="literal">removeEventListener</code> function: <a id="id144" class="indexterm"/>Any events you have subscribed to can be removed by calling this function. To remove an event, you need to provide the same arguments as you used while calling <code class="literal">addEventListener</code>.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip09"/>Tip</h3><p>A majority of the <code class="literal">NotifyUI</code> functions are chainable, providing a useable pattern similar to the one provided by jQuery.</p></div></div></li></ul></div><div class="section" title="Built-in message styles"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec22"/>Built-in message styles</h3></div></div></div><p>The <a id="id145" class="indexterm"/>
<code class="literal">NotifyUI</code> module comes with the<a id="id146" class="indexterm"/> following<a id="id147" class="indexterm"/> built-in styles:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Complete</strong></span>: This <a id="id148" class="indexterm"/>displays a window with a blue background and the default text, <code class="literal">Completed</code><div class="informalexample"><pre class="programlisting">my.notify.load({style:'complete'}).show();</pre></div><div class="mediaobject"><img src="graphics/5343OT_02_05.jpg" alt="Built-in message styles"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Error</strong></span>: This<a id="id149" class="indexterm"/> displays a window with a red background and the default text, <code class="literal">Error</code><div class="informalexample"><pre class="programlisting">my.notify.load({style:'error'}).show();</pre></div><div class="mediaobject"><img src="graphics/5343OT_02_06.jpg" alt="Built-in message styles"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Warning</strong></span>: This <a id="id150" class="indexterm"/>displays a window with an orange background and the default text, <code class="literal">Warning</code><div class="informalexample"><pre class="programlisting">my.notify.load({style:'warning'}).show();</pre></div><div class="mediaobject"><img src="graphics/5343OT_02_07.jpg" alt="Built-in message styles"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Success</strong></span>: This <a id="id151" class="indexterm"/>displays a window with a green background and the default text, <code class="literal">Success</code><div class="informalexample"><pre class="programlisting">my.notify.load({style:'success'}).show();</pre></div><div class="mediaobject"><img src="graphics/5343OT_02_08.jpg" alt="Built-in message styles"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip10"/>Tip</h3><p>All default message texts and text colors can be updated by providing the <code class="literal">message</code> and <code class="literal">messageColor</code> object properties to the <code class="literal">load</code> function call.</p></div></div></li></ul></div></div></div></div>
<div class="section" title="Screen Break Menu"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Screen Break Menu</h1></div></div></div><p>Enterprise<a id="id152" class="indexterm"/> apps often contain a number of features. Providing a compelling way to display these features and submenus can be challenging. One unique navigation option is to implement a Screen Break Menu, similar to how iOS folders work. This <a id="id153" class="indexterm"/>navigation technique allows you to present additional information only when requested by the user.</p><p>In this recipe, we will demonstrate how you can implement a cross-platform version of the Screen Break animation and link this effect to a menu view.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec26"/>Getting ready</h2></div></div></div><p>This recipe walks through using the screen break interaction pattern to create additional space for an <span class="strong"><strong>Add Notes</strong></span> field. You can easily tweak this recipe for more complex menu needs, such as implementing advanced options or an interactive help menu.</p><div class="section" title="Menu when closed"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec23"/>Menu when closed</h3></div></div></div><p>When the <a id="id154" class="indexterm"/>menu is closed, all space is usable for other controls. The following image shows the Screen Break Menu in its closed state.</p><div class="mediaobject"><img src="graphics/5343OT_02_09.jpg" alt="Menu when closed"/></div></div><div class="section" title="The menu, when opened"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec24"/>The menu, when opened</h3></div></div></div><p>When the <a id="id155" class="indexterm"/>menu is opened, the screen is split and the bottom section of the <code class="literal">Ti.UI.Window</code> is animated, exposing a menu area. The following example shows <a id="id156" class="indexterm"/>the Screen Break Menu, when opened, and displaying a <code class="literal">Ti.UI.TextArea</code> for taking notes:</p><div class="mediaobject"><img src="graphics/5343OT_02_10.jpg" alt="The menu, when opened"/></div></div><div class="section" title="Adding the Screen Break Menu to your project"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec25"/>Adding the Screen Break Menu to your project</h3></div></div></div><p>The Screen Break Menu<a id="id157" class="indexterm"/> is a CommonJS module<a id="id158" class="indexterm"/> consisting of a single JavaScript file. To install it, simply copy the <code class="literal">breakmenu.js</code> file into your project, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/5343OT_02_11.jpg" alt="Adding the Screen Break Menu to your project"/></div></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec27"/>How to do it…</h2></div></div></div><p>Once you've <a id="id159" class="indexterm"/>added the <code class="literal">breakmenu.js</code> file to <a id="id160" class="indexterm"/>your project, you need to use <code class="literal">require</code> to import the module into your code, as the following snippet demonstrates:</p><div class="informalexample"><pre class="programlisting">//Create our application namespace
var my = {
  breakingMenu : require('breakmenu')
};</pre></div><div class="section" title="Creating the sample window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec26"/>Creating the sample window</h3></div></div></div><p>To demonstrate the<a id="id161" class="indexterm"/> Screen Break Menu, we create a basic window with a single button. When this button is clicked, the Screen Break Menu is activated.</p><div class="informalexample"><pre class="programlisting">var win = Ti.UI.createWindow({
  backgroundColor:'#fff'
});

//Create button
var button = Ti.UI.createButton({
  title:'Add Notes', left:20, right:20, height:50, top:150
});
win.add(button);</pre></div></div><div class="section" title="Adding Screen Break Menu listeners"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec27"/>Adding Screen Break Menu listeners</h3></div></div></div><p>Next in our example, <a id="id162" class="indexterm"/>we add a series of listeners. The following code block demonstrates how to add a listener, to be fired when the Screen Break Menu starts, to show the menu.</p><div class="informalexample"><pre class="programlisting">my.breakingMenu.addEventListener('breaking',function(e){
  Ti.API.info("Screen is breaking");
});</pre></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The <code class="literal">broken</code> event is fired when the menu is fully displayed.<div class="informalexample"><pre class="programlisting">my.breakingMenu.addEventListener('broken',function(e){
  Ti.API.info("Screen is broken, menu is visible");
});</pre></div></li><li class="listitem">The <code class="literal">closing</code> event is fired when the menu starts to close. This will take a second to fully close.<div class="informalexample"><pre class="programlisting">my.breakingMenu.addEventListener('closing',function(e){
  Ti.API.info('Menu starting to close');
});</pre></div></li><li class="listitem">Only when the menu is fully hidden, the <code class="literal">closed</code> event is fired.<div class="informalexample"><pre class="programlisting">my.breakingMenu.addEventListener('closed',function(e){
  Ti.API.info('Menu is closed');
});</pre></div></li></ol></div></div><div class="section" title="Creating a notes menu object"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec28"/>Creating a notes menu object</h3></div></div></div><p>Displaying<a id="id163" class="indexterm"/> a <code class="literal">Ti.UI.View</code> is at the core of the Screen Break Menu. In this example, we create a notes menu object containing <code class="literal">Ti.UI.View</code> and <code class="literal">Ti.UI.TextArea</code> controls. These controls are used to present the user with an area for entering notes, when the Screen Break Menu is visible.</p><div class="informalexample"><pre class="programlisting">var notesMenu = {
  value : '', //Our value for the notes screen
  view : function(){
    //Create a view container
    var vwMenu = Ti.UI.createView({
      backgroundColor:'yellow',top:150,
      height:200, width: Ti.UI.FILL
    });
    //Create a textArea for the user to type
    var txtField = Ti.UI.createTextArea({
      width: Ti.UI.FILL,height:Ti.UI.FILL,
      hintText:"Add a note", value : notesMenu.value, backgroundColor:'transparent',font:{fontSize:14,fontWeight:'bold'}
    });
    vwMenu.add(txtField);
    //When text is added, update the menu value
    txtField.addEventListener('change',function(e){
      notesMenu.value = txtField.value; 
    });
    //Return the view so we can later bind for display
    return vwMenu;
  }
};</pre></div></div><div class="section" title="Showing the menu"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec29"/>Showing the menu</h3></div></div></div><p>When the <a id="id164" class="indexterm"/>sample's button is pressed, the <code class="literal">breakScreen</code> function<a id="id165" class="indexterm"/> is called to show the Screen Break Menu.</p><p>The <code class="literal">breakScreen</code> function takes the following <a id="id166" class="indexterm"/>parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The first parameter is the <code class="literal">Ti.UI.Window</code> that you wish to split in order to reveal the menu.</li><li class="listitem" style="list-style-type: disc">The second parameter is the <code class="literal">Ti.UI.View</code> that you wish to use as your menu. Please note this can only be a <code class="literal">Ti.UI.View</code> object type.</li><li class="listitem" style="list-style-type: disc">The final parameter is the <code class="literal">settings</code> object. This object contains the following properties:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">breakStartPoint</code>: The <a id="id167" class="indexterm"/>position measured from the top of the screen indicating where the break should start.</li><li class="listitem" style="list-style-type: disc"><code class="literal">bottomViewHeight</code>: This <a id="id168" class="indexterm"/>property decides the height of the bottom-half section. This value determines the size of the bottom half of the screen that is animated down the screen.</li><li class="listitem" style="list-style-type: disc"><code class="literal">slideFinishPoint</code>: The<a id="id169" class="indexterm"/> position from the top of the screen indicating where the bottom view should slide to.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip11"/>Tip</h3><p>You will need to adjust these <code class="literal">settings</code> properties to meet your screen layout requirements.</p></div></div></li></ul></div></li></ul></div><p>The following <a id="id170" class="indexterm"/>code block implements all the three properties:</p><div class="informalexample"><pre class="programlisting">button.addEventListener('click',function(e){
  //Options object
  var settings = {};
  //Point of the screen where the screen will separate
  settings.breakStartPoint = 150; 
  //Size of the bottom half of screen, ie the sliding part
  settings.bottomViewHeight = 218, 
  //The bottom point you want the screen to slide to. 
  //Measured from top of screen
  settings.slideFinishPoint = 340;			
  //Call function to split the screen &amp; show our menu
  my.breakingMenu.breakScreen(win,notesMenu.view(),settings);
});</pre></div></div></div></div>
<div class="section" title="Metro Style Tab Control"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Metro Style Tab Control</h1></div></div></div><p>A tabbed interface is an effective way to organize your Enterprise Titanium app. With their rising prevalence in smart phones and well designed, compelling UI/UX consumer applications, the expectation level for UI-rich Enterprise application is increasing among Enterprise users. Your average Enterprise user is now starting to expect a richer experience than provided in a traditional tabbed interface.</p><p>This recipe demonstrates how to create a unique cross-platform experience<a id="id171" class="indexterm"/> using the <span class="strong"><strong>Metro Style Tab Control</strong></span>
<a id="id172" class="indexterm"/> for your Enterprise app. This control allows you to use the tabbed interaction pattern in a compelling new way while still meeting your branding or organizational styling requirements.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec28"/>Getting ready</h2></div></div></div><p>This recipe walks through the process of creating a Metro Style Tab Control to organize your app's navigation. <a id="id173" class="indexterm"/>The Tab Control is designed to be easily configured to meet your corporate branding and display requirements.</p><p>The next example shows a simple 3-tab navigator at the top of our cross-platform app. The following sections will walk you through the process of creating this sample, and demonstrate how to configure the control to meet your specific needs.</p><div class="mediaobject"><img src="graphics/5343OT_02_12.jpg" alt="Getting ready"/></div><div class="section" title="Adding the Tab Control to your project"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec30"/>Adding the Tab Control to your project</h3></div></div></div><p>
<code class="literal">Metro Tab Control</code> <a id="id174" class="indexterm"/>is a CommonJS module, consisting of a single JavaScript file. To install, simply copy the <code class="literal">tabcontrol.js</code> file into your project, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/5343OT_02_13.jpg" alt="Adding the Tab Control to your project"/></div></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec29"/>How to do it…</h2></div></div></div><p>Once you've<a id="id175" class="indexterm"/> added the <code class="literal">tabcontrol.js</code> file to your project, you need to use <code class="literal">require</code> to import the module into your code, as the following snippet demonstrates:</p><div class="informalexample"><pre class="programlisting">//Create our application namespace
var my = {
  tabControl : require('tabcontrol')
};</pre></div><div class="section" title="Creating a sample window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec31"/>Creating a sample window</h3></div></div></div><p>To demonstrate<a id="id176" class="indexterm"/> the Metro Style Tab Control, create a <code class="literal">Ti.UI.Window</code> to attach this custom control with three tabs.</p><div class="informalexample"><pre class="programlisting">var win = Ti.UI.createWindow({
  backgroundColor:'#fff',title:"Tab Control Example", 
  fullscreen:false, navBarHidden:true
});</pre></div></div><div class="section" title="Creating the settings object"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec32"/>Creating the settings object</h3></div></div></div><p>When <a id="id177" class="indexterm"/>creating the Tab Control, you need a <code class="literal">tabSettings</code> object and an array of tabs. The <code class="literal">tabSettings</code> object contains all the properties needed to create the Tab Control. The tabs are then added to the control. When creating the <code class="literal">tabSettings</code> object, you can use any valid <code class="literal">Ti.UI.ScrollView</code> properties as the Tab Control provides a wrapper around the Titanium native <code class="literal">Ti.UI.ScrollView</code>.</p><p>The <code class="literal">tabSettings</code> object<a id="id178" class="indexterm"/> also has a Tab Control-specific object called <code class="literal">selectedCue</code>. The <code class="literal">selectedCue</code> object contains the <code class="literal">selectedBackgroundColor</code> and <code class="literal">backgroundColor</code> properties. The <code class="literal">selectedBackgroundColor</code> property is the color used to provide a visual cue when the tab is selected. The <code class="literal">backgroundColor</code> property is the default background color used for the visual cue area.</p><div class="informalexample"><pre class="programlisting">var tabSettings = {
  top:0, //Position the control a top of win
  selectedCue : {
    selectedBackgroundColor:'red',
    backgroundColor:'transparent',
  }
};</pre></div></div><div class="section" title="Defining tabs"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec33"/>Defining tabs</h3></div></div></div><p>You <a id="id179" class="indexterm"/>define all of the tabs in the Tab Control at the time of creation. For this example, we will first create an empty array, and then push each Tab Definition into the array.</p><div class="informalexample"><pre class="programlisting">var tabs = [];//Create tab collection</pre></div><p>A <span class="strong"><strong>Tab Definition</strong></span>
<a id="id180" class="indexterm"/> has two main parts, the <code class="literal">Tab</code> and the <code class="literal">Label</code> sections. In the <code class="literal">Tab</code> section, you can use any parameter that is valid, when creating a <code class="literal">Ti.UI.View</code> object. Any additional parameters will be considered custom properties of the <code class="literal">Tab</code> object and will be available once the Tab Control has been added to the <code class="literal">Ti.UI.Window</code>.</p><p>In the <code class="literal">Label</code> section, you can use any parameter that is valid, when creating a <code class="literal">Ti.UI.Label</code> object. The <code class="literal">Label</code> section also has a tab-specific property called <code class="literal">selectedFont</code>. The <code class="literal">selectedFont</code> object<a id="id181" class="indexterm"/> has the same properties as the <code class="literal">Ti.UI.Label</code> font object, but is only applied when the tab has been selected. The next sample is used to demonstrate an increase in the font size and weight.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip12"/>Tip</h3><p>Make sure you include a <code class="literal">width</code> property in your tab definition or <code class="literal">TabStrip</code> will not layout correctly.</p></div></div><div class="informalexample"><pre class="programlisting">var tab0 = {
  Tab : {
    left:1, width:75, height:50
  },
  Label :{
    text:'tab0',
    selectedFont:{
      fontSize:22, fontWeight:'bold'
    },
    font:{
      fontSize:14
    }
  }
};
tabs.push(tab0); //Add tab to collection</pre></div><p>To complete <a id="id182" class="indexterm"/>this recipe, add <code class="literal">tab1</code> and <code class="literal">tab2</code> using the same pattern as demonstrated earlier.</p></div><div class="section" title="Adding Tab Control to the window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec34"/>Adding Tab Control to the window</h3></div></div></div><p>The next step in the <a id="id183" class="indexterm"/>recipe is to call the <code class="literal">createTabStrip</code> method<a id="id184" class="indexterm"/>, providing our settings object, and array of tabs. This method returns an instance of the custom tab control that is then added to the example's <code class="literal">Ti.UI.Window</code>, as shown in the following snippet:</p><div class="informalexample"><pre class="programlisting">//Create our tab control
var tabControl = my.tabControl.createTabStrip(tabSettings,tabs);
//Add our tab control to the window
win.add(tabControl);</pre></div></div><div class="section" title="Adding tab listeners"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec35"/>Adding tab listeners</h3></div></div></div><p>The Metro Tab Control<a id="id185" class="indexterm"/> is derived from the <code class="literal">Ti.UI.ScrollView</code>. It, therefore, inherits its base listeners such as <code class="literal">pinch</code>, <code class="literal">scroll</code>, and <code class="literal">click</code>. Additional events are also available for you to subscribe to.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">When a user taps on a tab, the <code class="literal">tabClick</code> event<a id="id186" class="indexterm"/> is fired, providing the index of the tab tapped.<div class="informalexample"><pre class="programlisting">tabControl.addEventListener('tabClick',function(e){
  Ti.API.info("Tab at Index: " + e.index + " was clicked");
});</pre></div></li><li class="listitem">When a tab is selected, the <code class="literal">indexChanged</code> event<a id="id187" class="indexterm"/> is fired, providing the current and <a id="id188" class="indexterm"/>prior index values.<div class="informalexample"><pre class="programlisting">tabControl.addEventListener('indexChanged',function(e){
  Ti.API.info("Tab Index changed from " + e.oldIndex +" to " + e.index);
});</pre></div></li></ol></div></div></div></div>
<div class="section" title="Slideout Menu"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Slideout Menu</h1></div></div></div><p>Using a Slideout menu<a id="id189" class="indexterm"/> for navigation has become a popular way to display navigation options. This navigation pattern was made popular by Facebook and Path apps. The strength of this navigation pattern is that it can effectively present a large number of menu options. Most Enterprise apps can benefit from this kind of navigation as it increases feature discoverability.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec30"/>Getting ready</h2></div></div></div><p>In this recipe, we will <a id="id190" class="indexterm"/>demonstrate how to create a sample app using the Slideout menu to access four application views, and a logout button. The <code class="literal">Slideout Menu</code> module provides a chainable CommonJS module to easily manage your menu and visual assets that can be easily branded.</p><p>The following screenshots show the Slideout menu when open in our sample cross-platform app. The following steps will walk you through creating this sample, and demonstrate how to configure the control to meet your needs.</p><div class="mediaobject"><img src="graphics/5343OT_02_14.jpg" alt="Getting ready"/></div><div class="section" title="Installing the Ti.Draggable module"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec36"/>Installing the Ti.Draggable module</h3></div></div></div><p>When running on Android, <a id="id191" class="indexterm"/>the Slideout menu uses a popular native module called <code class="literal">Ti.Draggable</code>. This module enables the user to easily slide back the menu cover.</p><p>To install this module, you can easily copy the <code class="literal">modules</code> directory from the recipe's source, or download the <code class="literal">Ti.Draggable</code> project from <a class="ulink" href="https://github.com/pec1985/TiDraggable">https://github.com/pec1985/TiDraggable</a>. Once you have the unzipped module, you will want to copy the contents into your project's <code class="literal">modules</code> folder, as highlighted in the following screenshot:</p><div class="mediaobject"><img src="graphics/5343OT_02_15.jpg" alt="Installing the Ti.Draggable module"/></div><p>After you have copied the files into the <code class="literal">modules</code> directory, you will need to add the module to <a id="id192" class="indexterm"/>your project. This is easily done in Titanium Studio by clicking on the <code class="literal">tiapp.xml</code> file. Once the project configuration screen has loaded, click on the green plus button (shown circled in the following screenshot).</p><div class="mediaobject"><img src="graphics/5343OT_02_16.jpg" alt="Installing the Ti.Draggable module"/></div><p>You will then be presented with a list of all the modules you have installed. Select the <span class="strong"><strong>ti.draggable [android]</strong></span> module, <a id="id193" class="indexterm"/>as shown circled in the following screenshot. After selecting this module, click on <span class="strong"><strong>OK</strong></span> to add the reference module to your project.</p><div class="mediaobject"><img src="graphics/5343OT_02_17.jpg" alt="Installing the Ti.Draggable module"/></div><p>Once you have added the module, make sure you save your project before running it. After saving, you will need to clean your project. You do this by selecting <span class="strong"><strong>Clean…</strong></span> under the <span class="strong"><strong>Project</strong></span> toolbar option in Titanium Studio, as demonstrated in the following screenshot:</p><div class="mediaobject"><img src="graphics/5343OT_02_18.jpg" alt="Installing the Ti.Draggable module"/></div></div><div class="section" title="Adding the Slideout Menu module to your project"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec37"/>Adding the Slideout Menu module to your project</h3></div></div></div><p>Adding the <code class="literal">Slideout Menu</code> module to your project is easy. Simply copy the <code class="literal">SlideOutMenu</code> folder into<a id="id194" class="indexterm"/> the <code class="literal">Resources</code> folder of your Titanium project, as shown in the following screenshot. This will install the CommonJS module and all supporting images.</p><div class="mediaobject"><img src="graphics/5343OT_02_19.jpg" alt="Adding the Slideout Menu module to your project"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip13"/>Tip</h3><p>The <code class="literal">SlideOutMenu</code> folder must be located in the <code class="literal">root</code> folder of your Titanium project in order for this recipe to work as designed.</p></div></div></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec31"/>How to do it…</h2></div></div></div><p>Once you've added the <code class="literal">SlideOutMenu</code> folder to your project, you need to use <code class="literal">require</code> to import the module into your code.</p><div class="informalexample"><pre class="programlisting">//Create our application namespace
var my = {
  views:{},
  menu : require('./SlideOutMenu/MASlidingMenu')
};</pre></div><div class="section" title="Defining our content views"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec38"/>Defining our content views</h3></div></div></div><p>For this sample, <a id="id195" class="indexterm"/>we have created a CommonJS module that works as a view factory. In your app, these views would be the content you wish to have displayed on the screen.</p><div class="informalexample"><pre class="programlisting">my.sampleView = require('sample_views');</pre></div><p>The following snippet builds a <code class="literal">views</code> object that contains our placeholder views created by the sample view factory.</p><div class="informalexample"><pre class="programlisting">my.views = {
  home : my.sampleView.placeholderView({
    title:'Home',backgroundColor:'blue'}),
  inbox : my.sampleView.placeholderView({
    title:'Home',backgroundColor:'green'}),
  sales : my.sampleView.placeholderView({
    title:'Home',backgroundColor:'yellow'}),
  customers : my.sampleView.placeholderView({
    title:'Home',backgroundColor:'blue'}),
  about : my.sampleView.placeholderView({
    title:'About',backgroundColor:'purple'})	
};</pre></div></div><div class="section" title="Building our menu items"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec39"/>Building our menu items</h3></div></div></div><p>The next step<a id="id196" class="indexterm"/> in our recipe is to define our menu items. When open, the menu will display an array of menu items, as shown by <code class="literal">menuData</code> in the following snippet.</p><p>Each menu item can contain the following properties:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Title</strong></span>: This property is used to display the menu text of the item.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Detail Cue</strong></span>: The property <code class="literal">hasDetail</code> determines if the <code class="literal">more</code> arrow visual cue should be displayed. This property is optional, and by default <code class="literal">false</code>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>View Pointer</strong></span>: The optional property view is used to hold a reference to the view that should be displayed when the menu item is pressed.<div class="informalexample"><pre class="programlisting">var menuData = [
  { title:'Home', hasDetail:true, view: my.views.home },
  { title:'Inbox', hasDetail:true, view: my.views.inbox },
  { title:'Sales', hasDetail:true, view: my.views.sales },
  { title:'Customers', hasDetail:true, 
view: my.views.customers },
  { title:'About', hasDetail:true, view: my.views.about },
  { title:'Logout' }
];</pre></div></li></ul></div></div><div class="section" title="Opening the app window"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec40"/>Opening the app window</h3></div></div></div><p>To open the <a id="id197" class="indexterm"/>sample window, you first need to call the <code class="literal">addMenuItems</code> function and provide the <code class="literal">menuData</code> array that we created earlier. This will create the menu objects within the module. Next, you need to pipe the result of the <code class="literal">addMenuItems</code> function into the <code class="literal">open</code> method. This will open your main application window and display the first view in your menu.</p><div class="informalexample"><pre class="programlisting">my.menu.addMenuItems(menuData).open();</pre></div></div><div class="section" title="Adding menu listeners"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec41"/>Adding menu listeners</h3></div></div></div><p>The Slideout menu <a id="id198" class="indexterm"/>provides listeners for <code class="literal">buttonclick</code>, <code class="literal">switch</code>, <code class="literal">open</code>, <code class="literal">close</code>, and <code class="literal">sliding</code>. The following details each of these events as used in the sample.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">When a menu item is tapped, the <code class="literal">buttonclick</code> event is fired, providing the menu item index.<div class="informalexample"><pre class="programlisting">my.menu.addEventListener('buttonclick', function(e) {
  if (e.index === 2) {
    alert('You clicked on Logout');
  }
});</pre></div></li><li class="listitem">When a display view is switched for another view, the <code class="literal">switch</code> event is fired. This event can be used to help load display-view content.<div class="informalexample"><pre class="programlisting">my.menu.addEventListener('switch', function(e) {
  Ti.API.info('menuRow = ' + JSON.stringify(e.menuRow));
  Ti.API.info('index = ' + e.index);
  Ti.API.info('view = ' + JSON.stringify(e.view));
});</pre></div></li><li class="listitem">As the user slides the display view to expose the menu, the <code class="literal">sliding</code> event is fired. This provides the view distance.<div class="informalexample"><pre class="programlisting">my.menu.addEventListener('sliding', function(e) {
  Ti.API.info('distance = ' + e.distance);
});</pre></div></li><li class="listitem">When the menu is fully displayed, the <code class="literal">open</code> event is fired. This event is helpful for tracking visual state.<div class="informalexample"><pre class="programlisting">my.menu.addEventListener('menuOpened', function(e) {
  Ti.API.info('Menu is open');
});</pre></div></li><li class="listitem">When <a id="id199" class="indexterm"/>the menu is fully closed, the <code class="literal">menuClosed</code> event is fired. This event is helpful for tracking visual state.<div class="informalexample"><pre class="programlisting">my.menu.addEventListener('menuClosed ', function(e) {
  Ti.API.info('Menu is closed');
});</pre></div></li></ol></div></div><div class="section" title="Adding custom application listeners"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec42"/>Adding custom application listeners</h3></div></div></div><p>Our example <a id="id200" class="indexterm"/>app also uses the following custom application level events. These events are fired by our sample views to close and toggle the menu.</p><div class="informalexample"><pre class="programlisting">Ti.App.addEventListener('app:toggle_menu',function(e){
  Ti.API.info('App Listener called to toggle menu');
  my.menu.toggle();
});
Ti.App.addEventListener('app:close_menu',function(e){
  Ti.API.info('App Listener called to close menu');
  my.menu.hide();
});</pre></div></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec32"/>How it works…</h2></div></div></div><p>The <code class="literal">Slideout Menu</code> module provides several functions to help you build your app's navigation system.</p><div class="section" title="Creating the menu"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec43"/>Creating the menu</h3></div></div></div><p>The next<a id="id201" class="indexterm"/> snippet demonstrates how to use the <code class="literal">addMenuItems</code> helper function to create a menu using a list of menu items. See this recipe's <span class="emphasis"><em>How to do it…</em></span> section for an example.</p><div class="informalexample"><pre class="programlisting">my.menu.addMenuItems(menuData);</pre></div></div><div class="section" title="Opening the menu container"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec44"/>Opening the menu container</h3></div></div></div><p>The following<a id="id202" class="indexterm"/> line demonstrates how to open the menu container and display the first menu item. See this recipe's <span class="emphasis"><em>How to do it…</em></span> section for an example.</p><div class="informalexample"><pre class="programlisting">my.menu.open();</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip14"/>Tip</h3><p>The <code class="literal">addMenuItems</code> function needs to be called before the menu container can be opened.</p></div></div></div><div class="section" title="Showing the menu"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec45"/>Showing the menu</h3></div></div></div><p>The following <a id="id203" class="indexterm"/>line demonstrates how to fully display the menu:</p><div class="informalexample"><pre class="programlisting">my.menu.expose();</pre></div></div><div class="section" title="Toggling the menu"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec46"/>Toggling the menu</h3></div></div></div><p>When designing <a id="id204" class="indexterm"/>your navigator, you will want to implement a button to allow your users to open and close the menu. The <code class="literal">toggle</code> method, shown in the following snippet, performs this operation for you:</p><div class="informalexample"><pre class="programlisting">my.menu.toggle();</pre></div></div><div class="section" title="Closing the menu"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec47"/>Closing the menu</h3></div></div></div><p>The <a id="id205" class="indexterm"/>following line demonstrates how you can hide the menu:</p><div class="informalexample"><pre class="programlisting">my.menu.hide();</pre></div></div><div class="section" title="Determining menu state"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec48"/>Determining menu state</h3></div></div></div><p>You <a id="id206" class="indexterm"/>can use the following line to determine if the menu is now fully in view:</p><div class="informalexample"><pre class="programlisting">Ti.API.info("Menu is open " + my.menu.isOpen());</pre></div></div><div class="section" title="Accessing the current view"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec49"/>Accessing the current view</h3></div></div></div><p>You will <a id="id207" class="indexterm"/>often need to access the currently displayed view to perform input validation or other operations. The following line demonstrates how you can easily access the current view:</p><div class="informalexample"><pre class="programlisting">var current = my.menu.currentView();</pre></div></div><div class="section" title="Closing the menu container"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec50"/>Closing the menu container</h3></div></div></div><p>The following <a id="id208" class="indexterm"/>line demonstrates how to close the menu container and all associated display views:</p><div class="informalexample"><pre class="programlisting">my.menu.dispose();</pre></div></div><div class="section" title="Using the sample's Global Events"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec51"/>Using the sample's Global Events</h3></div></div></div><p>Each of <a id="id209" class="indexterm"/>our sample views can fire two helpful custom-application-level events. The first of these events is <code class="literal">app:toggle_menu</code>, which is called when you tap on the menu icon. This will either show or hide the menu, depending on its current status.</p><div class="informalexample"><pre class="programlisting">toMenu.addEventListener('click', function(){
  Ti.App.fireEvent('app:toggle_menu');
});</pre></div><p>Often, a user wants to start working with the screen before the menu has fully closed. To facilitate this, each display view will call the <code class="literal">app:close_menu</code> event on a double tap. This will automatically close the view and allow the user to continue working with the current screen.</p><div class="informalexample"><pre class="programlisting">view.addEventListener('dblclick',function(e){
  Ti.App.fireEvent('app:close_menu');
});</pre></div></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec33"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">This recipe is inspired by and contains forks of several great open source projects. The <code class="literal">MASlidingMenu.js</code> CommonJS module used in this recipe is the fork of the <code class="literal">MASlidingMenu</code> project.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">MASlidingMenu</code>: Available<a id="id210" class="indexterm"/> at <a class="ulink" href="https://github.com/appersonlabs/MASlidingMenu">https://github.com/appersonlabs/MASlidingMenu</a>. Author: Matt Apperson.</li><li class="listitem" style="list-style-type: disc"><code class="literal">TiDraggable</code>: Available<a id="id211" class="indexterm"/> at <a class="ulink" href="https://github.com/pec1985/TiDraggable">https://github.com/pec1985/TiDraggable</a>. Author: Pedro Enrique.</li><li class="listitem" style="list-style-type: disc"><code class="literal">CoverSliderExample</code>: Available <a id="id212" class="indexterm"/>at <a class="ulink" href="https://github.com/atsusy/CoverSliderExample">https://github.com/atsusy/CoverSliderExample</a>. Author: Atsushi Kataoka.</li></ul></div></li></ul></div></div></div></body></html>