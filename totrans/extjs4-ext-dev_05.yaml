- en: Chapter 5. Chart Downloader
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter we are going to develop an Ext JS plugin, which will help us
    to download a chart as an image. This plugin will generate a button and when the
    button is clicked, it will perform the required functionality, such that the plugin
    container's chart item will be downloaded as an image.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter we will cover:'
  prefs: []
  type: TYPE_NORMAL
- en: Functional requirements
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Planning and coding the chart downloader
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Functional requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We want to develop a plugin that will facilitate downloading a chart as an image.
    The plugin will generate a button at the container's bottom toolbar. If the container
    does not contain any toolbar at the bottom, this plugin should create a bottom
    toolbar for the container and then it will generate the button within the toolbar.
    When this button is clicked, the plugin will search for a chart item within the
    container and will download the chart as an image.
  prefs: []
  type: TYPE_NORMAL
- en: Planning and coding the chart downloader
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The plugin's container may or may not have the bottom bar, so we need to search
    for the bottom bar within the container. If found, we will use that, otherwise
    we need to create the bottom bar, and then we can add the download button to that
    bottom bar.
  prefs: []
  type: TYPE_NORMAL
- en: Now let us start coding for the plugin.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Here we are providing a configuration option `chartXtype` so that we can configure
    this plugin with a proper xtype of the chart, which we are targeting to download
    as an image. Now let us define the required `init` function for this plugin:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'And now let us define the `handleAfterRender` function:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'In this function, we are trying to get the chart component, and if the chart
    component isn''t found, we will show an error message. And if the chart component
    is found, we will call the `addDownloadButton` function, which will create and
    add the download button. Now let us define the `addDownloadButton` function:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'In this function, first we are trying to get the bottom toolbar by calling
    the `getToolbar` function and then adding the download button to that toolbar.
    Now let us define the `getToolbar` function:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'You can see that in this function we are trying to get the container''s bottom
    toolbar and if the toolbar is found, we are using that, and if not found, we are
    creating a new bottom toolbar. Now let us define the `saveChart` function, which
    will be called by clicking on the **Download** button:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Here we use the plugin within a window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'And the following screenshot is the output where we used our chart downloader
    plugin:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Planning and coding the chart downloader](img/3725OS_05_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: You can see that the **Download as image** button is generated at the window's
    bottom bar, and users can download the image by clicking on this button.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let us test this with another container that has no bottom bar defined:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'And the following screenshot is the output:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Planning and coding the chart downloader](img/3725OS_05_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: You can see that the download button is now generated within the nested panel's
    bottom bar.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter we've developed an Ext JS plugin that can download a chart as
    an image. Through this chapter we've learned the way we can create the Ext JS
    plugins and how easily we can inject functionality through the Ext JS plugins.
    In the next chapter, we will go through a very popular plugin for grid searching,
    where users can select or deselect the grid columns on which they want to apply
    the search.
  prefs: []
  type: TYPE_NORMAL
