<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Implementing the Mobile-First Paradigm</h1>
                </header>
            
            <article>
                
<p>Now that our first Express application is usable, we act on the mantra of this age of software development: mobile-first. Mobile devices, whether they be smartphones, tablet computers, automobile dashboards, refrigerator doors, or bathroom mirrors, are taking over the world. </p>
<p>Another issue is mobile-first indexing, meaning that search engines are starting to preference indexing the mobile version of a website. Search engines so far concentrated on indexing the desktop version of websites, but the growing popularity of mobile devices means search engine results are skewed away from what folks are using. Google says it is not fair to mobile users if the<span> search result, which was derived from the desktop version, does not match the </span>mobile version of a website. For Google's take, including technical tips on the markup to use, see <a href="http://webmasters.googleblog.com/2017/12/getting-your-site-ready-for-mobile.html">http://webmasters.googleblog.com/2017/12/getting-your-site-ready-for-mobile.html</a>.</p>
<p>The primary considerations in designing for mobiles are the small screen sizes, the touch-oriented interaction, that there's no mouse, and the somewhat different user interface expectations. With the <em>Notes</em> application, our user interface needs are modest, and the lack of a mouse doesn't make any difference to us. </p>
<p>In this chapter, we won't do much Node.js development. Instead, we'll:</p>
<p class="mce-root"/>
<ul>
<li>Modify the templates for better mobile presentation</li>
<li>Edit CSS and SASS files to customize the style</li>
<li>Learn about Bootstrap 4, a popular framework for responsive UI design</li>
</ul>
<p>By doing so, we'll dip our toes in the water of what it means to be a full stack web engineer.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Problem – the Notes app isn't mobile friendly</h1>
                </header>
            
            <article>
                
<p>Let's start by quantifying the problem. We need to explore how well (or not) the application behaves on a mobile device. This is simple to do:</p>
<ol>
<li>Start the <em>Notes</em> application. Determine the IP address of the host system.</li>
<li>Using your mobile device, connect to the service using the IP address, and browse around the <em>Notes</em> application, putting it through its paces, noting any difficulties.</li>
</ol>
<p>Another way to approach this is to use your desktop browser, resizing it to be very narrow. The Chrome DevTools also includes a mobile device emulator. Either way, you can mimic the small screen size of a smartphone on your desktop.</p>
<p>To see a real user interface problem on a mobile screen, edit <kbd>views/noteedit.ejs</kbd> and change this line:</p>
<pre>&lt;br/&gt;&lt;textarea rows=5 cols=80 name='body' &gt;<br/>    {{#if note }}{{note.body}}{{/if}} <br/>    &lt;/textarea&gt;  </pre>
<p>What's changed is the <kbd>cols=80</kbd> parameter. We want this <kbd>textarea</kbd> element to be overly large so that you can experience how a non-responsive web app appears on a mobile device. View the application on a mobile device and you'll see something like one of the screens in this screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/6e17c4d5-7d65-4711-bc7d-1bb1b6cf1a4e.png" width="1999" height="1192"/></div>
<p>Viewing a note works well on an iPhone 6, but the screen for editing/adding a note is not good. The text entry area is so wide that it runs off the side of the screen. Even though interaction with <kbd>FORM</kbd> elements work well, it's clumsy. In general, browsing the <em>Notes</em> application gives an acceptable mobile user experience that doesn't suck and won't make our users give rave reviews.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Mobile-first paradigm</h1>
                </header>
            
            <article>
                
<p>Mobile devices have a smaller screen, are generally touch oriented, and have different user experience expectations than a desktop computer.</p>
<p>To accommodate smaller screens, we use <strong>responsive web design</strong> techniques. This means designing the application to accommodate the screen size and ensuring websites provide optimal viewing and interaction across a wide range of devices. Techniques include changing font sizes, rearranging elements on the screen, using collapsible elements that open when touched, and resizing images or videos to fit available space. This is called <strong>responsive</strong> because the application responds to device characteristics by making these changes.</p>
<div class="packt_infobox"><span>By </span>mobile-first<span>, we mean that you design the application first to work well on a mobile device and then move on to devices with larger screens. It's about prioritizing mobile devices first.</span></div>
<p>The primary technique is using media queries in stylesheets to detect device characteristics. Each media query section targets a range of devices, using CSS declaration to appropriately restyle content.</p>
<p>Let's consult a concrete example. The <strong>Twenty Twelve</strong> theme for Wordpress has a straightforward responsive design implementation. It's not built with any framework, so you can see clearly how the mechanism works, and the stylesheet is small enough to be easily digestible. Refer to its source code in the Wordpress repository at <a href="https://themes.svn.wordpress.org/twentytwelve/1.9/style.css"><span class="URLPACKT">https://themes.svn.wordpress.org/twentytwelve/1.9/style.css</span></a>.</p>
<p>The stylesheet starts with a number of <strong>resets</strong>, where the stylesheet overrides some typical browser style settings with clear defaults. Then, the bulk of the stylesheet defines styling for mobile devices. Toward the bottom of the stylesheet is a section labeled <span class="packt_screen">Media queries</span> where, for certain sized screens, the styles defined for mobile devices are overridden to work on devices with larger screens.</p>
<p>It does this with the following two media queries:</p>
<pre>@media screen and (min-width: 600px) { /* Screens above 600px width */ } 
@media screen and (min-width: 960px) { /* Screens above 960px width */ }</pre>
<p>The first segment of the stylesheet configures the page layout for all devices. Next, for any browser viewport at least <kbd>600px</kbd> wide, reconfigure the page to display on the larger screen. Then, for any browser viewport at least <kbd>960px</kbd> wide, reconfigure it again. The stylesheet has a final media query to cover print devices.</p>
<p>These widths are what's called a <strong>breakpoint</strong>. Those threshold viewport widths are where the design changes itself around. You can see breakpoints in action by going to any responsive website, then resizing the browser window. Watch how the design jumps at certain sizes. Those are the breakpoints chosen by the author of that website.</p>
<p>There's a wide range of differing opinions about the best strategy to choose your breakpoints. Do you target specific devices or do you target general characteristics? The Twenty Twelve theme did fairly well on mobile devices using only two <span>viewport-size </span>media queries. The CSS-Tricks blog has posted an extensive list of specific media queries for every known device, which is available at <a href="https://css-tricks.com/snippets/css/media-queries-for-standard-devices/"><span class="URLPACKT">https://css-tricks.com/snippets/css/media-queries-for-standard-devices/</span></a>.</p>
<p>We should at least target these devices:</p>
<ul>
<li><strong>Small</strong>: This includes iPhone 5 SE.</li>
<li><strong>Medium</strong>: This can refer to tablet computers or the larger smartphones.</li>
<li><strong>Large</strong>: This includes larger tablet computers or the smaller desktop computers.</li>
<li><strong>Extra-large</strong>: This refers to larger desktop computers and other large screens.</li>
<li><strong>Landscape/portrait</strong>: You may want to create a distinction between landscape mode and portrait mode. Switching between the two of course changes viewport width, possibly pushing it past a breakpoint. However, your application may need to behave differently in the two modes.</li>
</ul>
<p>Enough with the theory; let's get back to our code.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using Twitter Bootstrap on the Notes application</h1>
                </header>
            
            <article>
                
<p>Bootstrap is a mobile-first framework consisting of HTML5, CSS3, and JavaScript code providing a comprehensive set of world class, responsive web design components. It was developed by engineers at Twitter and then released to the world in August 2011.</p>
<p>The framework includes code to retrofit modern features onto older browsers, a responsive 12-column grid system, and a long list of components (some using JavaScript) for building web applications and websites. It's meant to provide a strong foundation on which to build your application.</p>
<p>Refer to <a href="http://getbootstrap.com"><span class="URLPACKT">http://getbootstrap.com</span></a> for more details.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Setting it up</h1>
                </header>
            
            <article>
                
<p>The first step is to duplicate the code you created in the previous chapter. If, for example, you created a directory named <kbd>chap05/notes</kbd>, then create one named <kbd>chap06/notes</kbd> from the content of <kbd>chap05/notes</kbd>.</p>
<p>Now, we need to go about adding Bootstrap's code in the <em>Notes</em> application. The Bootstrap website suggests loading the required CSS and JavaScript files out of the Bootstrap (and jQuery) public CDN. While that's easy to do, we won't do this for two reasons:</p>
<ul>
<li>It violates the principle of keeping all dependencies local to the application and not relying on global dependencies</li>
<li>It prevents us from generating a custom theme</li>
</ul>
<p>Instead, we'll install a local copy of Bootstrap. There are several ways to install Bootstrap. For example, the Bootstrap website offers a downloadable TAR/GZIP archive (tarball). The better approach is an automated dependency management tool. </p>
<p>The most straightforward choice is using Bootstrap (<a href="https://www.npmjs.com/package/bootstrap">https://www.npmjs.com/package/bootstrap</a>), popper.js (<a href="https://www.npmjs.com/package/popper.js">https://www.npmjs.com/package/popper.js</a>), and jQuery (<a href="https://www.npmjs.com/package/jquery">https://www.npmjs.com/package/jquery</a>) packages in the npm repository. These packages provide no Node.js modules, and instead are frontend code distributed through npm. </p>
<p>We install the packages using the following command:</p>
<pre><strong>$ npm install bootstrap@4.1.x --save</strong><br/><strong>npm notice created a lockfile as package-lock.json. You should commit this file.</strong><br/><strong>npm WARN bootstrap@4.1.0 requires a peer of jquery@1.9.1 - 3 but none is installed. You must install peer dependencies yourself.</strong><br/><strong>npm WARN bootstrap@4.1.0 requires a peer of popper.js@^1.14.0 but none is installed. You must install peer dependencies yourself.</strong><br/><br/><strong>+ bootstrap@4.1.0</strong><br/><strong>added 1 package in 1.026s</strong><br/><br/><strong>$ npm install jquery@1.9.x --save</strong><br/><strong>+ jquery@1.9.1</strong><br/><strong>$ npm install popper.js@1.14.x --save</strong><br/><strong>+ popper.js@1.14.0</strong></pre>
<p>As we see here, when we install Bootstrap, it helpfully tells us the corresponding versions of jQuery and <kbd>popper.js</kbd> to use. Therefore, we dutifully install those versions. What's most important is to see what got downloaded:</p>
<pre class="p1"><strong><span class="s1">$ ls node_modules/bootstrap/dist/*<br/>... directory contents<br/></span><span class="s1">$ ls node_modules/jquery/<br/>... directory contents<br/></span><span class="s1">$ ls node_modules/popper.js/dist<br/>... directory contents</span></strong></pre>
<p>Within each of these directories are the CSS and JavaScript files that are meant to be used in the browser. More importantly, these files are located in a given directory whose pathname is known—specifically, the directories we just inspected. Let's see how to configure our Express app to use those three packages on the browser side.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding Bootstrap to application templates</h1>
                </header>
            
            <article>
                
<p>On the Bootstrap website, they give a recommended HTML structure. We'll be interpolating from their recommendation to use Bootstrap code provided through the CDN to instead use the local copies of Bootstrap, jQuery, and Popper that we just installed. Refer to the <span class="packt_screen">Getting started</span> page at <a href="http://getbootstrap.com/docs/4.0/getting-started/introduction/">http://getbootstrap.com/docs/4.0/getting-started/introduction/</a>.<a href="http://getbootstrap.com/docs/4.0/getting-started/introduction/"/></p>
<p>What we'll do is modify <kbd>views/layout.hbs</kbd> to match their recommended template:</p>
<pre>&lt;!doctype html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;{{title}}&lt;/title&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" <br/>        content="width=device-width, initial-scale=1, shrink-to-<br/>        fit=no"&gt;<br/><br/>    <strong>&lt;link rel="stylesheet" <br/>    href="/assets/vendor/bootstrap/css/bootstrap.min.css"&gt;</strong><br/><strong>    &lt;link rel='stylesheet' href='/assets/stylesheets/style.css' /&gt;</strong><br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    {{&gt; header }}<br/>    {{{body}}}<br/>    &lt;!-- jQuery first, then Popper.js, then Bootstrap JS --&gt;<br/>    <strong>&lt;script src="/assets/vendor/jquery/jquery.min.js"&gt;&lt;/script&gt;</strong><br/><strong>    &lt;script src="/assets/vendor/popper.js/popper.min.js"&gt;&lt;/script&gt;</strong><br/><strong>    &lt;script src="/assets/vendor/bootstrap/js/bootstrap.min.js"&gt;&lt;/script&gt;</strong><br/>  &lt;/body&gt;<br/>&lt;/html&gt;</pre>
<p>This is largely the template shown on the Bootstrap site, incorporating the previous content of <kbd><span><span>views/layout.hbs</span></span></kbd>. Our own stylesheet is loaded following the Bootstrap stylesheet, giving us the opportunity to override anything in Bootstrap we want to change. What's different is that instead of loading Bootstrap, <kbd>popper.js</kbd>, and jQuery packages from their respective CDNs, we use the path <kbd>/assets/vendor/product-name</kbd> instead.</p>
<div class="mce-root packt_infobox"><span>This is the same as recommended on the Bootstrap website except the URLs point to our own site rather than relying on the public CDN.</span></div>
<p>This <kbd>/assets/vendor</kbd> URL is not currently recognized by the <kbd>Notes</kbd> application. To add this support, edit <kbd>app.js</kbd> to add these lines:</p>
<pre>app.use(express.static(path.join(__dirname, 'public')));<br/><strong>app.use('/assets/vendor/bootstrap', express.static( </strong><br/><strong>  path.join(__dirname, 'node_modules', 'bootstrap', 'dist'))); </strong><br/><strong>app.use('/assets/vendor/jquery', express.static( </strong><br/><strong>  path.join(__dirname, 'node_modules', 'jquery'))); </strong><br/><strong>app.use('/assets/vendor/popper.js', express.static( </strong><br/><strong>  path.join(__dirname, 'node_modules', 'popper.js', 'dist')));</strong> </pre>
<p>Within the <kbd>public</kbd> directory, we have a little house-keeping to do. When <kbd>express-generator</kbd> set up the initial project, it generated <kbd>public/images</kbd>, <kbd>public/javascripts</kbd>, and <kbd>public/stylesheets</kbd> directories. We want each to be within the <kbd>/assets</kbd> directory, so do this:</p>
<pre class="p1"><strong><span class="s1">$ mkdir public/assets<br/></span><span class="s1">$ mv public/images/ public/javascripts/ public/stylesheets/ public/assets/</span></strong></pre>
<p>We now have our asset files, including Bootstrap, <kbd>popper.js</kbd>, and jQuery, all available to the <kbd>Notes</kbd> application under the <kbd>/assets</kbd> directory. The page layout refers to these assets and should give us the default Bootstrap theme:</p>
<pre><strong>$ npm start</strong><br/><strong>&gt; notes@0.0.0 start /Users/David/chap06/notes</strong><br/><strong>&gt; DEBUG=notes:* node ./bin/www</strong><br/><br/><strong>  notes:server Listening on port 3000 +0ms</strong><br/><strong>GET / 200 306.660 ms - 883</strong><br/><strong>GET /stylesheets/style.css 404 321.057 ms - 2439</strong><br/><strong>GET /assets/stylesheets/style.css 200 160.371 ms - 165</strong><br/><strong>GET /assets/vendor/bootstrap/js/bootstrap.min.js 200 157.459 ms - 50564</strong><br/><strong>GET /assets/vendor/popper.js/popper.min.js 200 769.508 ms - 18070</strong><br/><strong>GET /assets/vendor/jquery/jquery.min.js 200 777.988 ms - 92629</strong><br/><strong>GET /assets/vendor/bootstrap/css/bootstrap.min.css 200 788.028 ms - 127343</strong></pre>
<p>The on-screen differences are minor, but this is the proof necessary that the CSS and JavaScript files for Bootstrap are being loaded. We have accomplished the first major goal—using a modern, mobile-friendly framework to implement a mobile-first design.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Alternative layout frameworks</h1>
                </header>
            
            <article>
                
<p>Bootstrap isn't the only JavaScript/CSS framework providing a responsive layout and useful components. We're using Bootstrap in this project because of its popularity. These frameworks are worthy of a look:</p>
<ul>
<li>Pure.css ( <a href="https://purecss.io/">https://purecss.io/</a>): A responsive CSS framework with an emphasis on a small code footprint.</li>
<li>Picnic CSS (<a href="https://picnicss.com/">https://picnicss.com/</a>): A responsive CSS framework emphasizing small size and beauty.</li>
<li>Shoelace (<a href="https://shoelace.style/">https://shoelace.style/</a>): A CSS framework emphasizing using future CSS, meaning it uses CSS constructs at the leading edge of CSS standardization. Since most browsers don't support those features, cssnext (<a href="http://cssnext.io/">http://cssnext.io/</a>) is used to retrofit that support. Shoelace uses a grid layout system based on Bootstrap's grid.</li>
<li>PaperCSS (<a href="https://www.getpapercss.com/">https://www.getpapercss.com/</a>): An informal CSS framework which looks like it was hand drawn.</li>
<li>Foundation (<a href="https://foundation.zurb.com/">https://foundation.zurb.com/</a>): Self-described as the most advanced responsive frontend framework in the world.</li>
<li>Base (<a href="http://getbase.org/">http://getbase.org/</a>): A lightweight modern CSS framework.</li>
</ul>
<p>HTML5 Boilerplate (<a href="https://html5boilerplate.com/">https://html5boilerplate.com/</a>) is an extremely useful basis from which to code the HTML and other assets. It contains the current best practices for the HTML code in web pages, as well as tools to normalize CSS support and configuration files for several web servers.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Flexbox and CSS Grids</h1>
                </header>
            
            <article>
                
<p>Other new technologies impacting web application development are two new CSS layout methodologies. The CSS3 committee has been working on several fronts, including page layout. </p>
<p>In the distant past, we used nested HTML tables for page layout. That is a bad memory that we don't have to revisit. More recently, we've been using a box model using DIVs, and even at times using absolute or relative placement techniques. All these techniques have been suboptimal in several ways, some more than others.</p>
<p>One popular layout technique is to divide the horizontal space into columns and assign a certain number of columns to each thing on the page. With some frameworks, we can even have nested DIVs, each with their own set of columns. Bootstrap 3, and other modern frameworks, used that layout technique. </p>
<p>The two new CSS layout methodologies, Flexbox (<a href="https://en.wikipedia.org/wiki/CSS_flex-box_layout">https://en.wikipedia.org/wiki/CSS_flex-box_layout</a>) and CSS Grids (<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout</a>), are a significant improvement over all previous methodologies. We are mentioning these technologies because they're both worthy of attention. Both are somewhat early in their adoption curve—they've been standardized by committees and adopted in the latest browsers, but of course there are a lot of old browsers in the field.</p>
<p>With Bootstrap 4, the Bootstrap team chose to go with Flexbox. Therefore, under the hood are Flexbox CSS constructs. </p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Mobile-first design for the Notes application</h1>
                </header>
            
            <article>
                
<p>We've learned about the basics of responsive design and Bootstrap, and we hooked the Bootstrap framework into our application. Now we're ready to launch a redesign of the application so that it works well on mobile devices.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Laying the Bootstrap grid foundation</h1>
                </header>
            
            <article>
                
<p>Bootstrap uses a 12-column grid system to control layout, giving applications a responsive mobile-first foundation on which to build. It automatically scales components as the viewport changes size or shape. The method relies on <kbd>&lt;div&gt;</kbd> elements with classes to describe the role each <kbd>&lt;div&gt;</kbd> plays in the layout.</p>
<p>The basic layout pattern is as follows:</p>
<pre>&lt;div class="container-fluid"&gt; 
  &lt;div class="row"&gt; 
    &lt;div class="col-sm-3"&gt;Column 1 content&lt;/div&gt; &lt;!-- 25% --&gt;
    &lt;div class="col-sm-9"&gt;Column 2 content&lt;/div&gt; &lt;!-- 75% --&gt;
  &lt;/div&gt; 
  &lt;div class="row"&gt; 
    &lt;div class="col-sm-3"&gt;Column 1 content&lt;/div&gt; &lt;!-- 25% --&gt;
    &lt;div class="col-sm-6"&gt;Column 2 content&lt;/div&gt; &lt;!-- 50% --&gt;
    &lt;div class="col-sm-3"&gt;Column 3 content&lt;/div&gt; &lt;!-- 25% --&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p>The outermost layer is the <kbd>.container</kbd> or <kbd>.container-fluid</kbd> element. Containers provide a means to center or horizontally pad the content. Containers marked as <kbd>.container-fluid</kbd> act as if they have <kbd>width: 100%</kbd>, meaning they expand to fill the horizontal space.</p>
<p>A <kbd>.row</kbd> is what it sounds like, a <kbd>"row"</kbd>. Technically, a row is a wrapper for columns. Containers are wrappers for rows, and rows are wrappers for columns, and columns contain the stuff displayed to our users. Got that?</p>
<p>Columns are marked with variations of the <kbd>.col</kbd> class. With the basic column class, <kbd>.col</kbd>, the columns divide equally into the available space. You can specify a numerical column count to assign different widths to each column. Bootstrap supports up to 12 numbered columns, hence each row in the example adds up to 12 columns. </p>
<p>You can also specify a breakpoint to which the column applies: </p>
<ul>
<li>Using <kbd>col-xs</kbd> targets extra-small devices (smartphones, <kbd>&lt;576px</kbd>)</li>
<li>Using <kbd>col-sm</kbd> targets small devices (<kbd>&gt;= 576px</kbd>)</li>
<li>Using <kbd>col-md</kbd> targets medium devices (<kbd>&gt;= 768px</kbd>)</li>
<li>Using <kbd>col-lg</kbd> targets large devices (<kbd>&gt;= 992px</kbd>)</li>
<li>Using <kbd>col-xl</kbd> targets extra-large devices (<kbd>&gt;= 1200px</kbd>)</li>
</ul>
<p>Specifying a breakpoint, for example <kbd>col-sm</kbd>, means that it applies to devices matching that breakpoint, or larger. Hence, in the example shown earlier, the column definitions applied to <kbd>col-sm</kbd>, <kbd>col-md</kbd>, <kbd>col-lg</kbd>, and <kbd>col-xl</kbd> devices, but not to <kbd>col-xs</kbd> devices.</p>
<p><span>The column count is appended to the class name. That means using <kbd>col-#</kbd> when not targeting a breakpoint, for example, <kbd>col-4</kbd>,  or <kbd>col-{breakpoint}-#</kbd> when targeting a breakpoint, for example, <kbd>col-md-4</kbd>. </span>If the columns add up to more than 12, the columns beyond the twelfth column wrap around to become a new row. The word <kbd>auto</kbd> can be used instead of a numerical column count to size the column to the natural width of its content.</p>
<p>It's possible to mix and match to target multiple breakpoints:</p>
<pre>&lt;div class="container-fluid"&gt; 
  &lt;div class="row"&gt; 
    &lt;div class="col-xs-9 col-md-3 col-lg-6"&gt;Column 1 content&lt;/div&gt; <br/>    &lt;div class="col-xs-3 col-md-9 col-lg-6"&gt;Column 2 content&lt;/div&gt; <br/>  &lt;/div&gt; <br/>  ...<br/>&lt;/div&gt;</pre>
<p>This declares three different layouts, one for extra-small devices, another for medium devices, and the last for large devices. T<span>his gives us enough to start modifying the <kbd>Notes</kbd> application. </span>The grid system can do a lot more. For details, see the documentation: <a href="http://getbootstrap.com/docs/4.0/layout/grid/">http://getbootstrap.com/docs/4.0/layout/grid/</a>.   </p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Responsive page structure for the Notes application</h1>
                </header>
            
            <article>
                
<p>We structured each of the page layouts as follows:</p>
<pre>&lt;!DOCTYPE html&gt; 
&lt;html&gt; 
&lt;head&gt; .. headerStuff &lt;/head&gt; 
&lt;body&gt; 
.. pageHeader 
.. main content <br/>.. bottomOfPageStuff
&lt;/body&gt; 
&lt;/html&gt; </pre>
<p>The page content therefore has two visible rows: the header and the main content. At the bottom of the page are invisible things like the JavaScript files for Bootstrap and jQuery.</p>
<p>No change is required in <kbd>views/layout.hbs</kbd>. One might think the <kbd>container-fluid</kbd> wrapper would be in that file, with the rows and columns specified in the other templates. Instead, we'll do it in the templates to give us the most layout freedom.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using icon libraries and improving visual appeal</h1>
                </header>
            
            <article>
                
<p>The world around us isn't constructed of words, but instead things. Hence, a pictorial style, as icons, should help computer software to be more comprehensible. Giving a good user experience should make our users reward us with more likes in the app store. </p>
<p>There are several icon libraries that can be used in a website. The Bootstrap team has a curated list at <a href="http://getbootstrap.com/docs/4.1/extend/icons/">http://getbootstrap.com/docs/4.1/extend/icons/</a>. For this project, we'll use Feather Icons (<a href="https://feathericons.com/">https://feathericons.com/</a>) and its conveniently available npm package, <a href="https://www.npmjs.com/package/feather-icons">https://www.npmjs.com/package/feather-icons</a>.<a href="https://www.npmjs.com/package/feather-icons"/></p>
<p>In <kbd>package.json</kbd>, add this to the dependencies:</p>
<div>
<pre><span>"feather-icons"</span><span>: </span><span>"&gt;=4.5.x"</span></pre></div>
<p>Then run <kbd>npm install</kbd> to download the new package. You can then inspect the downloaded package and see that <kbd>./node_modules/feather-icons/dist/feather.js</kbd> contains browser-side code, making it easy to use the icons.</p>
<p>We make that directory available by mounting it in <kbd>app.js</kbd>, just as we did for Bootstrap and jQuery libraries. Add this code to <kbd>app.js</kbd>:</p>
<div>
<pre><span>app</span><span>.</span><span>use</span><span>(</span><span>'/assets/vendor/feather-icons'</span><span>, </span><span>express</span><span>.</span><span>static</span><span>(<br/></span>   <span>path</span><span>.</span><span>join</span><span>(</span><span>__dirname</span><span>, </span><span>'node_modules'</span><span>, </span><span>'feather-icons'</span><span>, </span><span>'dist'</span><span>))); </span></pre></div>
<p>Going by the documentation, we must put this at the bottom of <kbd>views/layout.hbs</kbd> to enable <kbd>feather-icons</kbd> support:</p>
<pre><span>&lt;</span><span>script</span><span> </span><span>src=</span><span>"</span>/assets/vendor/feather-icons/feather.js<span>"</span><span>&gt;&lt;/</span><span>script</span><span>&gt;<br/></span><span>&lt;</span><span>script</span><span>&gt;<br/></span><span>  </span><span>feather</span><span>.</span><span>replace</span><span>();<br/></span><span>&lt;/</span><span>script</span><span>&gt;</span></pre>
<p>To use one of the icons, use a <kbd>data-feather</kbd> attribute specifying one of the icon names, like so:</p>
<pre>&lt;<span class="pl-ent">i</span> <strong><span class="pl-e">data-feather</span>=<span class="pl-s"><span class="pl-pds">"</span>circle<span class="pl-pds">"</span></span></strong>&gt;&lt;/<span class="pl-ent">i</span>&gt;</pre>
<p>What's important is the <kbd>data-feather</kbd> attribute, which the Feather Icons library uses to identify the SVG file to use. The Feather Icons library completely replaces the element where it found the <kbd>data-feather</kbd> attribute. Therefore, if you want the icon to be a clickable link, it's necessary to wrap the icon definition with an <kbd>&lt;a&gt;</kbd> tag, rather than adding <kbd>data-feather</kbd> to the <kbd>&lt;a&gt;</kbd> tag. The next section shows an example.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Responsive page header navigation bar</h1>
                </header>
            
            <article>
                
<p>The header section we designed before contains a page title and a little navigation bar. Bootstrap has several ways to spiff this up, and even give us a responsive navigation bar which neatly collapses to a menu on small devices.</p>
<p><span>In</span> <kbd>views/pageHeader.ejs</kbd><span>, make this change:</span></p>
<pre>&lt;header class="page-header"&gt;<br/>&lt;h1&gt;{{ title }}&lt;/h1&gt;<br/>&lt;nav class="navbar navbar-expand-md navbar-dark bg-dark"&gt;<br/>  &lt;a class="navbar-brand" href='/'&gt;&lt;i data-feather="home"&gt;&lt;/i&gt;&lt;/a&gt;<br/>  &lt;button class="navbar-toggler" type="button" <br/>     data-toggle="collapse" data-target="#navbarSupportedContent"<br/>     aria-controls="navbarSupportedContent" <br/>     aria-expanded="false" aria-label="Toggle navigation"&gt;<br/>     &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;<br/>  &lt;/button&gt;<br/>  &lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;<br/>     &lt;div class="navbar-nav col"&gt;<br/>     {{#if breadcrumb}}<br/>     &lt;a class="nav-item nav-link" href='{{breadcrumb.url}}'&gt;<br/>     {{breadcrumb.title}}&lt;/a&gt;<br/>     {{/if}}<br/>     &lt;/div&gt;<br/>     &lt;a class="nav-item nav-link btn btn-light col-auto"<br/>                   href='/notes/add'&gt;ADD Note&lt;/a&gt;<br/>  &lt;/div&gt;<br/>&lt;/nav&gt;<br/>&lt;/header&gt;</pre>
<p>Adding <kbd>class="page-header"</kbd> informs Bootstrap this is, well, the page header. Within that we have the <kbd>&lt;h1&gt;</kbd> header as before, giving the page title, and then a responsive Bootstrap <kbd>navbar</kbd>.</p>
<p>By default the <kbd>navbar</kbd> is expanded—meaning the components inside the <kbd>navbar</kbd> are visible—because of the <kbd>navbar-expand-md</kbd> class. This <kbd>navbar</kbd> is using a <kbd>navbar-toggler</kbd> button which governs the responsiveness of the <kbd>navbar</kbd>. By default, this button is hidden and the body of the <kbd>navbar</kbd> is visible. If the screen is small enough, the <kbd>navbar-toggler</kbd> is switched so it's visible, the body of the <kbd>navbar</kbd> is invisible, and when clicking on the now-visible <kbd>navbar-toggler</kbd>, a menu drops down containing the body of the <kbd>navbar</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/61e44e72-923f-4e83-a47a-8dd50590ebec.png" style="width:38.92em;height:13.17em;" width="774" height="261"/></div>
<p>We chose the f<span>eather icons</span> <em>home</em> icon because it says go home. It's intended that the middle portion of the <kbd>navbar</kbd> will contain a breadcrumb as we navigate around the <em>Notes</em> application. </p>
<p>The <span class="packt_screen">ADD Note</span> button is glued to the right-hand-side with a little Flexbox magic. The container is a Flexbox, meaning we can use the Bootstrap classes to control the space consumed by each item. The breadcrumb area is empty in this case, but the <kbd>&lt;div&gt;</kbd> that would contain it is there and declared with <kbd>class="col"</kbd>, meaning that it takes up a column unit. The <span class="packt_screen">ADD Note</span> button is, on the other hand, declared with <kbd>class="col-auto"</kbd>, meaning it takes up only the room required for itself. It is the empty breadcrumb area that will expand to fill the space, while the <span class="packt_screen">ADD Note</span> button fills only its own space, and is therefore pushed over to the side.</p>
<p>Because it's the same application, the functionality all works; we're simply working on the presentation. We've added a few notes but the presentation of the list on the front page leaves a lot to be desired. The small size of the title is not very touch-friendly, since it doesn't present a large target area for a fingertip. And can you explain why the <kbd>notekey</kbd> value has to be displayed on the home page?  </p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Improving the Notes list on the front page</h1>
                </header>
            
            <article>
                
<p>The current home page has a simple text list that's not terribly touch-friendly and showing the <em>key</em> at the front of the line might be inexplicable to the user. Let's fix this.</p>
<p>Edit <kbd>views/index.hbs</kbd> and make this change:</p>
<pre>&lt;div class="container-fluid"&gt;<br/>  &lt;div class="row"&gt;<br/>    &lt;div class="col-12 btn-group-vertical" role="group"&gt;<br/>      {{#each notelist}}<br/>      &lt;a class="btn btn-lg btn-block btn-outline-dark" <br/>          href="/notes/view?key={{ key }}"&gt;{{ title }}&lt;/a&gt;<br/>      {{/each}}<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</pre>
<p>The first change is to switch away from using a list and to use a vertical button group. By making the text links look and behave like buttons, we're improving the user interface, especially its touch friendliness. We chose the <kbd>btn-outline-dark</kbd> button style because it looks good in the user interface. We use large buttons (<kbd>btn-lg</kbd>) that fill the width of<span><span> the</span></span> container (<kbd>btn-block</kbd>).</p>
<p>We eliminated showing the notekey to the user. This information doesn't add anything to the user experience:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/4dc489ea-d737-4280-ba76-c7805486d2a6.png" style="width:28.17em;height:12.58em;" width="774" height="345"/></div>
<p>This is beginning to take shape, with a decent-looking home page that handles resizing very nicely and is touch friendly. </p>
<p>There's still something more to do with this, since the header area is taking up a fair amount of space. We should always feel free to rethink a plan as we look at intermediate results. Earlier, we created one design for the header area, but on reflection that design looks to be too large. The intention had been to insert a breadcrumb just to the right of the home icon, and to leave the <kbd>&lt;h1&gt;</kbd> title at the top of the header area. But this is taking up vertical space and we can tighten up the header and possibly improve the appearance.</p>
<p>Edit <kbd>partials/header.hbs</kbd> and replace it with the following:</p>
<div>
<pre><span>&lt;</span><span>header</span><span> </span><span>class=</span><span>"page-header"</span><span>&gt;<br/></span><span>&lt;</span><span>nav</span><span> </span><span>class=</span><span>"navbar navbar-expand-md navbar-dark bg-dark"</span><span>&gt;<br/></span><span>  </span><span>&lt;</span><span>a</span><span> </span><span>class=</span><span>"navbar-brand"</span><span> </span><span>href=</span><span>'/'</span><span>&gt;</span><span>&lt;</span><span>i</span><span> </span><span>data-feather=</span><span>"home"</span><span>&gt;&lt;/</span><span>i</span><span>&gt;</span><span>&lt;/</span><span>a</span><span>&gt;<br/></span><span>  </span><span>&lt;</span><span>button</span><span> </span><span>class=</span><span>"navbar-toggler"</span><span> </span><span>type=</span><span>"button"</span><span> <br/></span><span>         </span><span>data-toggle=</span><span>"collapse"</span><span> </span><span>data-target=</span><span>"#navbarSupportedContent"<br/></span><span>         </span><span>aria-controls=</span><span>"navbarSupportedContent"<br/></span><span>        </span><span> </span><span>aria-expanded=</span><span>"false"<br/></span><span>         </span><span>aria-label=</span><span>"Toggle navigation"</span><span>&gt;<br/>    </span><span> </span><span>&lt;</span><span>span</span><span> </span><span>class=</span><span>"navbar-toggler-icon"</span><span>&gt;&lt;/</span><span>span</span><span>&gt;<br/></span><span>  </span><span>&lt;/</span><span>button</span><span>&gt;<br/></span><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class=</span><span>"collapse navbar-collapse"</span><span> </span><span>id</span><span>=</span><span>"navbarSupportedContent"</span><span>&gt;<br/></span><span>    </span><strong>&lt;span class="navbar-text col"&gt;{{ title }}&lt;/span</strong><span><strong>&gt;</strong><br/></span><span>    </span><span>&lt;</span><span>a</span><span> </span><span>class=</span><span>"nav-item nav-link btn btn-light col-auto"</span><span> </span><span>href=</span><span>'/notes/add'</span><span>&gt;</span><span>ADD Note</span><span>&lt;/</span><span>a</span><span>&gt;<br/></span><span>  </span><span>&lt;/</span><span>div</span><span>&gt;<br/></span><span>&lt;/</span><span>nav</span><span>&gt;<br/></span><span>&lt;/</span><span>header</span><span>&gt;</span></pre></div>
<p><span>This removes the <kbd>&lt;h1&gt;</kbd> tag at the top of the header area, immediately tightening the presentation. </span></p>
<p>Within the <kbd>navbar-collapse</kbd> area, we've replaced what had been intended as the breadcrumb, with a simple <kbd>navbar-text</kbd> component. To keep the <span class="packt_screen">ADD Note</span> button glued to the right, we're maintaining the <kbd>class="col"</kbd> and <kbd>class="col-auto"</kbd> settings:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/4a53d717-88b6-48c7-85a9-8b7d2a057de0.png" style="width:34.42em;height:14.00em;" width="773" height="315"/></div>
<p>Which header area design is better? That's a good question. Since beauty is in the eye of the beholder, both designs are probably equally good. What we have demonstrated is the ease with which we can update the design by editing the template files.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Cleaning up the Note viewing experience</h1>
                </header>
            
            <article>
                
<p>Viewing a Note isn't bad, but the user experience can be improved. The user does not need to see the notekey, for example.  Additionally, Bootstrap has nicer-looking buttons we can use.</p>
<p>In<span> </span><kbd>views/noteview.hbs</kbd>, make these changes:</p>
<pre>&lt;div class="container-fluid"&gt;<br/>    &lt;div class="row"&gt;&lt;div class="col-xs-12"&gt;<br/>        {{#if note}}&lt;h3&gt;{{ note.title }}&lt;/h3&gt;{{/if}}<br/>        {{#if note}}&lt;p&gt;{{ note.body }}&lt;/p&gt;{{/if}}<br/>        &lt;p&gt;Key: {{ notekey }}&lt;/p&gt;<br/>    &lt;/div&gt;&lt;/div&gt;<br/>    {{#if notekey }}<br/>        &lt;div class="row"&gt;&lt;div class="col-xs-12"&gt;<br/>        &lt;div class="btn-group"&gt;<br/>            &lt;a class="btn btn-outline-dark" <br/>                href="/notes/destroy?key={{notekey}}" <br/>                role="button"&gt;Delete&lt;/a&gt;<br/>            &lt;a class="btn btn-outline-dark" <br/>                href="/notes/edit?key={{notekey}}" <br/>                role="button"&gt;Edit&lt;/a&gt;<br/>        &lt;/div&gt;<br/>        &lt;/div&gt;&lt;/div&gt;<br/>    {{/if}}<br/>&lt;/div&gt;</pre>
<p>We have declared two rows, one for the Note, and another for buttons to act on the Note. Both are declared to consume all 12 columns, and therefore take up the full available width. The buttons are again contained within a button group:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/768c14aa-610d-474d-aa48-2a2ee93b8f1c.png" style="width:36.25em;height:14.67em;" width="768" height="310"/></div>
<p>Do we really need to show the notekey to the user?  We'll leave it there, but that's an open question for the user experience team. Otherwise, we've improved the <span>note-reading</span> experience.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Cleaning up the add/edit note form</h1>
                </header>
            
            <article>
                
<p>The next major glaring problem is the form for adding and editing notes. As we said earlier, it's easy to get the text input area to overflow a small screen. On the other hand, Bootstrap has extensive support for making nice-looking forms that work well on mobile devices.</p>
<p>Change the <kbd>form</kbd> in <kbd>views/noteedit.hbs</kbd> to this:</p>
<pre>&lt;form method='POST' action='/notes/save'&gt;<br/>  &lt;div class="container-fluid"&gt;<br/>    {{#if docreate}}<br/>      &lt;input type='hidden' name='docreate' value="create"&gt;<br/>    {{else}}<br/>      &lt;input type='hidden' name='docreate' value="update"&gt;<br/>    {{/if}}<br/>    &lt;div class="form-group row align-items-center"&gt;<br/>      &lt;label for="notekey" class="col-1 col-form-label"&gt;Key&lt;/label&gt;<br/>      {{#if docreate }}<br/>        &lt;div class="col"&gt;<br/>          &lt;input type='text' class="form-control" <br/>                 placeholder="note key" name='notekey' value=''/&gt; <br/>        &lt;/div&gt;<br/>      {{else}} <br/>        {{#if note }}<br/>          &lt;span class="input-group-text"&gt;{{notekey}}&lt;/span&gt;<br/>        {{/if}} <br/>        &lt;input type='hidden' name='notekey'<br/>               value='{{#if note }}{{notekey}}{{/if}} '/&gt; <br/>      {{/if}} <br/>    &lt;/div&gt; <br/><br/>    &lt;div class="form-group row"&gt;<br/>      &lt;label for="title" class="col-1 col-form-label"&gt;Title&lt;/label&gt;<br/>      &lt;div class="col"&gt;<br/>        &lt;input type="text" class="form-control" <br/>               id='title' name='title' placeholder="note title" <br/>               value='{{#if note }}{{note.title}}{{/if}}'&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/><br/>    &lt;div class="form-group row"&gt;<br/>      &lt;textarea class="form-control" name='body' <br/>                rows="5"&gt;{{#if note }}{{note.body}}{{/if}}&lt;/textarea&gt;<br/>    &lt;/div&gt;<br/>    &lt;button type="submit" class="btn btn-default"&gt;Submit&lt;/button&gt;<br/> &lt;/div&gt;<br/>&lt;/form&gt;</pre>
<p>There's a lot going on here. What we've done is reorganize the <kbd>form</kbd> so Bootstrap can do the right things with it. The first thing to note is that we have several instances of this:</p>
<pre>&lt;div class="form-group row"&gt; .. &lt;/div&gt; </pre>
<p>These are contained within a <kbd>container-fluid</kbd>, meaning that we've set up three rows in the form. </p>
<p>Bootstrap uses <kbd>form-group</kbd> elements to add structure to forms, and to encourage proper use of <kbd>&lt;label&gt;</kbd> elements, along with other form elements. It's good practice to use a <kbd>&lt;label&gt;</kbd> with every <kbd>&lt;input&gt;</kbd> to improve assistive behavior in the <span>browser, rather </span>than if you simply left some dangling text. </p>
<p>Every form element has <kbd>class="form-control"</kbd>. Bootstrap uses this to identify the controls so it can add styling and behavior.</p>
<p>By default, Bootstrap formats <kbd>form-group</kbd> elements so the <kbd>label</kbd> appears on another line from the input control. Note that we've added <kbd>class="col-1"</kbd> to the labels and <kbd>class="col"</kbd> to the <kbd>&lt;div&gt;</kbd> wrapping the input. This declares two columns, the first consuming one column unit and the other consuming the remainder.</p>
<p>The <kbd>placeholder='key'</kbd> attribute puts sample text in an otherwise empty text input element. It disappears as soon as the user types something and is an excellent way to prompt the user with what's expected.</p>
<p>Finally, we changed the <span class="packt_screen">Submit</span> button to be a Bootstrap button. These look nice, and Bootstrap makes sure that they work great:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/abf9d97c-b6fc-44eb-ab64-d94223d17baf.png" style="width:31.08em;height:25.92em;" width="613" height="511"/></div>
<p>The result looks good and works well on the iPhone. It automatically sizes itself to whatever screen it's on. Everything behaves nicely. In this screenshot, we've resized the window small enough to cause the navbar to collapse. Clicking on the so-called hamburger icon on the right (the three horizontal lines) causes the navbar contents to pop up as a menu.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Cleaning up the delete-note window</h1>
                </header>
            
            <article>
                
<p>The window used to verify the desire to delete a Note doesn't look bad, but it can be improved.</p>
<p>Edit <kbd>views/notedestroy.hbs</kbd> to contain the following:</p>
<div>
<pre><span>&lt;</span><span>form</span><span> </span><span>method=</span><span>'POST'</span><span> </span><span>action=</span><span>'/notes/destroy/confirm'</span><span>&gt;<br/></span><span>  &lt;</span><span>div</span><span> </span><span>class=</span><span>"container-fluid"</span><span>&gt;<br/></span><span>    </span><span>&lt;</span><span>input</span><span> </span><span>type=</span><span>'hidden'</span><span> </span><span>name=</span><span>'notekey'</span><span> </span><span>value=</span><span>'</span><span>{{</span><span>#if</span><span> </span><span>note</span><span>}}{{</span><span>notekey</span><span>}}{{</span><span>/if</span><span>}}</span><span>'</span><span>&gt;<br/></span><span>    </span><span>&lt;</span><span>p</span><span> </span><span>class=</span><span>"form-text"</span><span>&gt;</span><span>Delete </span><span>{{</span><span>note.title</span><span>}}</span><span>?</span><span>&lt;/</span><span>p</span><span>&gt;<br/></span><span>    </span><span>&lt;</span><span>div</span><span> </span><span>class=</span><span>"btn-group"</span><span>&gt;<br/></span><span>      </span><span>&lt;</span><span>button</span><span> </span><span>type=</span><span>"submit"</span><span> </span><span>value=</span><span>'DELETE'</span><span> <br/></span><span>              </span><span>class=</span><span>"btn btn-outline-dark"</span><span>&gt;</span><span>DELETE</span><span>&lt;/</span><span>button</span><span>&gt;<br/></span><span>      </span><span>&lt;</span><span>a</span><span> </span><span>class=</span><span>"btn btn-outline-dark"</span><span> <br/></span><span>              </span><span>href=</span><span>"/notes/view?key=</span><span>{{</span><span>#if</span><span> </span><span>note</span><span>}}{{</span><span>notekey</span><span>}}{{</span><span>/if</span><span>}}</span><span>"</span><span> <br/></span><span>              role=</span><span>"button"</span><span>&gt;<br/></span><span>         Cancel</span><span>&lt;/</span><span>a</span><span>&gt;<br/></span><span>    </span><span>&lt;/</span><span>div</span><span>&gt;<br/></span><span>  &lt;/</span><span>div</span><span>&gt;<br/></span><span>&lt;/</span><span>form</span><span>&gt;</span></pre></div>
<p>We've reworked everything to use Bootstrap form goodness. The question about deleting the Note is wrapped with <kbd>class="form-text"</kbd> so that Bootstrap can display this properly.</p>
<p class="mce-root"/>
<p>The buttons are wrapped with <kbd>class="btn-group"</kbd> as before. The buttons have exactly the same styling as on other screens, giving a consistent look across the application:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/ab3b21c8-0194-4fc5-9c3f-f9591c92556e.png" style="width:36.75em;height:10.83em;" width="798" height="235"/></div>
<p>There is an issue that the title text in the navbar does not use the word <kbd>Delete</kbd>. In <kbd>routes/notes.js</kbd>, we can make this change:</p>
<div>
<pre><span>// Ask to Delete note (destroy)<br/></span><span>router</span><span>.</span><span>get</span><span>(</span><span>'/destroy'</span><span>, </span><span>async</span><span> (</span><span>req</span><span>, </span><span>res</span><span>, </span><span>next</span><span>) </span><span>=&gt;</span><span> {<br/></span><span>  </span><span>var</span><span> </span><span>note</span><span> </span><span>=</span><span> </span><span>await</span><span> </span><span>notes</span><span>.</span><span>read</span><span>(</span><span>req</span><span>.</span><span>query</span><span>.</span><span>key</span><span>);<br/></span><span>  </span><span>res</span><span>.</span><span>render</span><span>(</span><span>'notedestroy'</span><span>, {<br/></span><span>    </span><span>title:</span><span> </span><span>note</span><span> </span><span>?</span><span> </span><strong>`Delete ${note.title}`</strong><span> </span><span>:</span><span> </span><span>""</span><span>,<br/></span><span>    </span><span>notekey:</span><span> </span><span>req</span><span>.</span><span>query</span><span>.</span><span>key</span><span>, </span><span>note:</span><span> </span><span>note<br/></span><span>  });<br/></span><span>});</span></pre></div>
<p>What we've done is changed the <kbd>title</kbd> parameter passed to the template. We'd done this in the <kbd>/notes/edit</kbd> route handler and seemingly missed doing so in this handler.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Building a customized Bootstrap</h1>
                </header>
            
            <article>
                
<p>One reason to use Bootstrap is that you can easily build a customized version. Stylesheets are built using SASS, which is one of the CSS preprocessors to simplify CSS development. In Bootstrap's code, one file (<kbd>scss/_variables.scss</kbd>) contains variables used throughout the rest of Bootstrap's <kbd>.scss</kbd> files. Change one variable and it can automatically affect the rest of Bootstrap.</p>
<p>Earlier, we overrode a couple of Bootstrap behaviors with our custom CSS file, <kbd>public/stylesheets/style.css</kbd>. This is an easy way to change a couple of specific things, but it doesn't work for large-scale changes to Bootstrap. Serious Bootstrap customization requires generating a customized Bootstrap build. </p>
<p>The official documentation on the Bootstrap website (<a href="http://getbootstrap.com/docs/4.1/getting-started/build-tools/">http://getbootstrap.com/docs/4.1/getting-started/build-tools/</a>) is useful for reference on the build process.</p>
<p><span>If you've followed the directions given earlier, you have a directory, </span><kbd>chap06/notes</kbd><span>, containing the <kbd>Notes</kbd> application source code. Create a directory named </span><kbd>chap06/notes/theme</kbd><span>, within which we'll set up a custom Bootstrap build process. </span></p>
<p>As students of the Twelve Factor Application model, we'll be using a <kbd>package.json</kbd> in that directory to automate the build process. There isn't any Node.js code involved; npm is also a convenient tool to automate the software build processes.</p>
<p>To start, download the Bootstrap source tree from <a href="https://github.com/twbs/bootstrap">https://github.com/twbs/bootstrap</a>. While the Bootstrap npm package includes SASS source files, it isn't sufficient to build Bootstrap, and therefore one must download the source tree. What we do is navigate to the GitHub repository, click on the <span class="packt_screen">Releases</span> tab, and select the URL for the most recent release.</p>
<p>With <kbd>theme/package.json</kbd> containing this <kbd>scripts</kbd> section:</p>
<div>
<pre><span>{<br/></span><span>  </span><span>"scripts"</span><span>: {<br/></span><span>    </span><span>"download"</span><span>: </span><span>"wget -O - https://github.com/twbs/bootstrap/archive/v4.1.0.tar.gz | tar xvfz -"</span><span>,<br/>    </span><span>"postdownload"</span><span>: </span><span>"cd bootstrap-4.1.0 &amp;&amp; npm install"<br/></span><span>  }<br/></span><span>}</span></pre></div>
<p>Type this command:</p>
<pre><strong>$ npm run download</strong></pre>
<p>This downloads the tar-gzip (tarball) archive from the Bootstrap repository and immediately unpacks it. If you are on Windows, it will be easiest to run that script in Windows Subsystem for Linux to execute these commands. After downloading and unpacking the archive, the <kbd>postdownload</kbd> step runs <kbd>npm install</kbd> in the directory. The Bootstrap team uses their <kbd>package.json</kbd>, not only to track all the dependencies required to build Bootstrap, but to drive the build process. </p>
<p>The <kbd>npm install</kbd> for Bootstrap will take a long time, so be patient.</p>
<p>This much only installs the tools necessary to build Bootstrap. Building the Bootstrap documentation requires installing additional Ruby-based tools (Jekyll and some plugins). </p>
<p>To build Bootstrap, let's add the following lines to the <kbd>scripts</kbd> section in our <kbd>theme/package.json</kbd>:</p>
<div>
<pre><span>"scripts": {<br/>...<br/> </span><span>"build"</span><span>: </span><span>"cd bootstrap-4.1.0 &amp;&amp; npm run dist"</span><span>,<br/></span><span> </span><span>"watch"</span><span>: </span><span>"cd bootstrap-4.1.0 &amp;&amp; npm run watch"<br/>...<br/>}</span></pre>
<p>Obviously you'll need to adjust the directory name as the Bootstrap project issues new releases. In the Bootstrap source tree, running <kbd>npm run dist</kbd> builds Bootstrap, while <kbd>npm run watch</kbd> sets up an automated process to scan for changed files and rebuilds Bootstrap upon changing any file. By adding these lines to our <kbd>theme/package.json</kbd>, we can start this in the terminal and it automatically reruns the build as needed.</p>
</div>
<p>Now run a build with this command:</p>
<pre><strong>$ npm run build</strong></pre>
<p>The built files land in the <kbd>theme/bootstrap-4.1.0/dist</kbd> directory. The content of that directory will match the contents of the <span>corresponding</span> npm package.</p>
<p>In case it hasn't been obvious all along—there are Bootstrap version numbers embedded in these URLs and file or directory names. As new Bootstrap releases are issued, you must adjust the pathnames to match the current version number. </p>
<p>Before proceeding, let's take a look around the Bootstrap source tree. The <kbd>scss</kbd> directory contains the SASS source that will be compiled into the Bootstrap CSS files. To generate a customized Bootstrap build will require a few modifications in that directory.</p>
<p>The <span class="s1"><kbd>bootstrap-4.1.0/scss/bootstrap.scss</kbd> file contains <kbd>@import</kbd> directives to pull in all Bootstrap components. The file <kbd>bootstrap-4.1.0/scss/_variables.scss</kbd><span> contains definitions used in the remainder of the Bootstrap SASS source. Editing, or overriding, these values will change the look of websites using the resulting Bootstrap build.</span></span></p>
<p>For example, these definitions determine the main color values:</p>
<div>
<pre><strong><span>$white</span><span>: </span><span>#fff</span><span> </span><span>!default</span><span>;<br/></span><span>$gray-100</span><span>: </span><span>#f8f9fa</span><span> </span><span>!default</span><span>;<br/>...</span><span><br/></span><span>$gray-800</span><span>: </span><span>#343a40</span><span> </span><span>!default</span><span>;<br/></span><span>...</span><span><br/></span>$blue<span>: </span><span>#007bff</span><span> </span><span>!default</span><span>;<br/></span><span>...<br/></span>$red<span>: </span><span>#dc3545</span><span> </span><span>!default</span><span>;<br/></span>$orange<span>: </span><span>#fd7e14</span><span> </span><span>!default</span><span>;<br/></span>$yellow<span>: </span><span>#ffc107</span><span> </span><span>!default</span><span>;<br/></span>$green<span>: </span><span>#28a745</span><span> </span><span>!default</span><span>;</span><span><br/></span>...</strong><br/><strong>$primary<span>: </span><span>$blue</span><span> </span><span>!default</span><span>;<br/></span>$secondary<span>: </span><span>$gray-600</span><span> </span><span>!default</span><span>;<br/></span>$success<span>: </span><span>$green</span><span> </span><span>!default</span><span>;<br/></span>$info<span>: </span><span>$cyan</span><span> </span><span>!default</span><span>;<br/></span>$warning<span>: </span><span>$yellow</span><span> </span><span>!default</span><span>;<br/></span>$danger<span>: </span><span>$red</span><span> </span><span>!default</span><span>;<br/></span>$light<span>: </span><span>$gray-100</span><span> </span><span>!default</span><span>;<br/></span>$dark<span>: </span><span>$gray-800</span><span> </span><span>!default</span><span>;</span></strong></pre></div>
<p>These are similar to CSS statements. The <kbd>!default</kbd> attribute designates these values as the default. Any <kbd>!default</kbd> values can be overridden without editing <kbd>_values.scss</kbd>.</p>
<p>Create a file, <kbd>theme/_custom.scss</kbd><span>, containing the following:</span></p>
<div>
<pre><strong>$white: #fff !default;</strong><br/><strong>$gray-900: #212529 !default;</strong><br/><strong>$body-bg: $gray-900 !default;</strong><br/><strong>$body-color: $white !default;</strong></pre></div>
<p class="mce-root"/>
<p>This reverses the values for the <kbd>$body-bg</kbd> and <kbd>$body-color</kbd> settings in <kbd>_variables.scss</kbd>. The Notes app will now use white text on a dark background, rather than the default white background with dark text. Because these declarations do not use <kbd>!default</kbd>, they'll override the values in <kbd>_variables.scss</kbd>.</p>
<p>Then make a copy of <kbd>scss/bootstrap.scss</kbd> in the theme directory and modify it, like so:</p>
<pre><strong>@import "custom"</strong><span><strong>;</strong><br/></span><span>@import</span><span> </span><span>"functions"</span><span>;<br/></span><span>@import</span><span> </span><span>"variables"</span><span>;<br/>...</span></pre>
<p>We're importing the <kbd>_custom.scss</kbd> file we just created. Finally, add this line to the <kbd>scripts</kbd> section of <kbd>theme/package.json</kbd>:</p>
<div>
<pre><span> </span><span>"prebuild"</span><span>: </span><span>"cp _custom.scss bootstrap.scss bootstrap-4.1.0/scss"</span><span>,</span></pre></div>
<p>With that in place, before building Bootstrap these two files will be copied in place. Next, rebuild Bootstrap:</p>
<pre><strong>$ npm run build</strong><br/><br/><strong>&gt; @ prebuild /Users/David/chap06/notes/theme</strong><br/><strong>&gt; cp _custom.scss bootstrap.scss bootstrap-4.1.0/scss</strong><br/><br/><strong>&gt; @ build /Users/David/chap06/notes/theme</strong><br/><strong>&gt; cd bootstrap-4.1.0 &amp;&amp; npm run dist</strong><br/><strong>...</strong></pre>
<p>While that's building, let's modify <kbd>notes/app.js</kbd> to mount the build directory:</p>
<div>
<pre><span>// app.use('/assets/vendor/bootstrap', express.static(<br/></span>// path.join(__dirname, 'node_modules', 'bootstrap', 'dist'))); <span>app</span><span>.</span><span>use</span><span>(</span><span>'/assets/vendor/bootstrap'</span><span>, </span><span>express</span><span>.</span><span>static</span><span>( <br/></span><span>  </span><span>path</span><span>.</span><span>join</span><span>(</span><span>__dirname</span><span>,</span><span> </span><span>'theme</span><span>'</span><span>, </span><span>'bootstrap-4.1.0'</span><span>, </span><span>'dist'</span><span>))); </span></pre></div>
<p>What we've done is switch from the Bootstrap in <kbd>node_modules</kbd> to what we just built in the <kbd>theme</kbd> directory. The Bootstrap version number shows up here, so this must also be updated as new Bootstrap releases are adopted.</p>
<p>Then reload the application, and you'll see the following:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/fa5801c6-c8ea-4622-a4f1-6fa89c824492.png" style="width:40.50em;height:11.42em;" width="880" height="248"/></div>
<p>To get exactly this, you may need to make a change in the templates. The Button elements we used earlier have the <kbd>btn-outline-dark</kbd> class, which works well on a light background. The background is now dark and these buttons need to use light coloring. </p>
<p>To change the buttons, in <kbd>views/index.hbs</kbd> make this change:</p>
<div>
<pre><span>&lt;</span><span>a</span><span> </span><span>class=</span><span>"btn btn-lg btn-block <strong>btn-outline-light</strong>"</span><span> <br/></span><span>   </span><span>href=</span><span>"/notes/view?key=</span><span>{{</span><span> </span><span>key</span><span> </span><span>}}</span><span>"</span><span>&gt;</span><span> </span><span>{{</span><span> </span><span>title</span><span> </span><span>}} </span><span>&lt;/</span><span>a</span><span>&gt;</span></pre></div>
<p>Make a similar change in <kbd>views/noteview.hbs</kbd>:</p>
<div>
<pre><span>&lt;</span><span>a</span><span> </span><span>class=</span><span>"btn <strong>btn-outline-light</strong>"</span><span> h</span><span>ref=</span><span>"/notes/destroy?key=</span><span>{{</span><span>notekey</span><span>}}</span><span>"</span><span> <br/></span><span>   </span><span>role=</span><span>"button"</span><span>&gt;</span><span> Delete</span><span> </span><span>&lt;/</span><span>a</span><span>&gt;<br/></span><span>&lt;</span><span>a</span><span> </span><span>class=</span><span>"btn <strong>btn-outline-light</strong>"</span><span> </span><span>href=</span><span>"/notes/edit?key=</span><span>{{</span><span>notekey</span><span>}}</span><span>"</span><span> <br/></span><span>   </span><span>role=</span><span>"button"</span><span>&gt;</span><span> Edit</span><span> </span><span>&lt;/</span><span>a</span><span>&gt;</span></pre></div>
<p>That's cool, we can now rework the Bootstrap color scheme any way we want. Don't show this to your user experience team, because they'll throw a fit. We did this to prove the point that we can edit <kbd>_custom.scss</kbd> and change the Bootstrap theme.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Pre-built custom Bootstrap themes</h1>
                </header>
            
            <article>
                
<p>If all this is too complicated for you, several websites provide pre-built Bootstrap themes, or else simplified tools to generate a Bootstrap build. To get our feet wet, let's download a theme from Bootswatch<span> (</span><a href="https://bootswatch.com/">https://bootswatch.com/</a><span>). This is both a collection of free and open source themes and a build system for generating custom Bootstrap themes (<a href="https://github.com/thomaspark/bootswatch/">https://github.com/thomaspark/bootswatch/</a>).</span></p>
<p><span class="URLPACKT"><a href="http://getbootstrap.com/customize/"/></span>Let's use the <strong>Minty</strong> <span>theme from Bootswatch to explore the needed changes. You can download the theme from the website or add the following to the <kbd>scripts</kbd> section of <kbd>package.json</kbd></span><span>:</span></p>
<pre>"dl-minty": "mkdir -p minty &amp;&amp; npm run dl-minty-css &amp;&amp; npm run dl-minty-min-css",<br/>"dl-minty-css": "wget https://bootswatch.com/4/minty/bootstrap.css -O minty/bootstrap.css",<br/>"dl-minty-min-css": "wget https://bootswatch.com/4/minty/bootstrap.min.css -O minty/bootstrap.min.css"  </pre>
<p>This will download the prebuilt CSS files for our chosen theme. In passing, notice that the Bootswatch website offers <kbd>_variables.scss</kbd> and <kbd>_bootswatch.scss</kbd> files which should be usable with a workflow similar to what we implemented in the previous section. The GitHub repository matching the Bootswatch website has a complete build procedure for building custom themes.</p>
<p>Perform the download:</p>
<pre class="p1"><strong><span class="s1">$ npm run dl-minty<br/><br/></span><span class="s1">&gt; notes@0.0.0 dl-minty /Users/David/chap06/notes<br/></span><span class="s1">&gt; mkdir -p minty &amp;&amp; npm run dl-minty-css &amp;&amp; npm run dl-minty-min-css<br/><br/></span><span class="s1">&gt; notes@0.0.0 dl-minty-css </span><span class="s1">/Users/David/</span><span class="s1">chap06/notes<br/></span><span class="s1">&gt; wget https://bootswatch.com/4/minty/bootstrap.css -O minty/bootstrap.css<br/><br/></span><span class="s1">&gt; notes@0.0.0 dl-minty-min-css /Users/David/chap06/notes<br/></span><span class="s1">&gt; wget https://bootswatch.com/4/minty/bootstrap.min.css -O minty/bootstrap.min.css</span></strong></pre>
<p>In <kbd>app.js</kbd> we will need to change the Bootstrap mounts to separately mount the JavaScript and CSS files. Use the following:</p>
<pre>// app.use('/assets/vendor/bootstrap', express.static( <br/>// path.join(__dirname, 'node_modules', 'bootstrap', 'dist'))); <br/>// app.use('/assets/vendor/bootstrap', express.static( <br/>// path.join(__dirname, 'theme', 'bootstrap-4.0.0', 'dist'))); <br/>app.use('/assets/vendor/bootstrap/js', express.static( <br/>  path.join(__dirname, 'node_modules', 'bootstrap', 'dist', 'js'))); <br/>app.use('/assets/vendor/bootstrap/css', express.static( <br/>  path.join(__dirname, 'minty')));</pre>
<p>Instead of one mount for <kbd>/vendor/bootstrap</kbd>, we now have two mounts for each of the subdirectories. Simply make the <kbd>/vendor/bootstrap/css</kbd> mount point to a directory containing the CSS files you downloaded from the theme provider.</p>
<p>Because Minty is a light-colored theme, the buttons need to use the dark style. We had earlier changed the buttons to use a light style because of the dark background. We must now switch from <kbd>btn-outline-light</kbd> back to <kbd>btn-outline-dark</kbd>. In <kbd>partials/header.hbs</kbd>, the color scheme requires a change to the navbar content:</p>
<div>
<pre><span>&lt;</span><span>div</span><span> </span><span>class=</span><span>"collapse navbar-collapse"</span><span> </span><span>id</span><span>=</span><span>"navbarSupportedContent"</span><span>&gt;<br/></span><span> </span><span>&lt;</span><span>span</span><span> </span><span>class=</span><span>"navbar-text <strong>text-dark</strong> col"</span><span>&gt;</span><span>{{</span><span> </span><span>title</span><span> </span><span>}}</span><span>&lt;/</span><span>span</span><span>&gt;<br/></span><span> </span><span>&lt;</span><span>a</span><span> </span><span>class=</span><span>"nav-item nav-link btn <strong>btn-dark</strong> col-auto"</span><span> </span><span>href=</span><span>'/notes/add'</span><span>&gt;</span><span>ADD Note</span><span>&lt;/</span><span>a</span><span>&gt;<br/></span><span>&lt;/</span><span>div</span><span>&gt;</span></pre></div>
<p>We selected <kbd>text-dark</kbd> and <kbd>btn-dark</kbd> classes to provide some contrast against the background.</p>
<p>Re-run the application and you'll see something like this:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/dcdb99ab-5a30-425a-ae9c-d03a3110e293.png" style="width:42.08em;height:13.75em;" width="767" height="250"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>The possibilities for using Bootstrap are endless. While we covered a lot of material, we only touched the surface, and we could have done much more to the <em>Notes</em> application.</p>
<p>You learned what the Twitter Bootstrap framework can do. Bootstrap's goal is to make mobile-responsive development easy. We used Bootstrap to make great improvements to the way the <kbd>Notes</kbd> app looks and feels. We customized Bootstrap, dipping our toes into generating a custom theme.</p>
<p>Now, we want to get back to writing Node.js code. We left off <a href="e4322e55-673b-45c5-b64e-fc107d57ef03.xhtml"><span class="ChapterrefPACKT">Chapter 5</span></a>, <em>Your First Express Application</em>, with the problem of persistence so that the <em>Notes</em> application can be stopped and restarted without losing our notes. In <a href=""><span class="ChapterrefPACKT">Chapter 7</span></a>, <em>Data Storage and Retrieval</em>, we'll dive into using databases to store our data.</p>
<p>To give ourselves some experience with the ES6 Module format, we'll rewrite the <em>Notes</em> application accordingly.</p>


            </article>

            
        </section>
    </div>



  </body></html>