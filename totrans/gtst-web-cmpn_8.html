<html><head></head><body>
        

                            
                    <h1 class="header-title">Integrating Web Components with a Web Framework</h1>
                
            
            
                
<p>In the previous chapters, we have either created Web Components from scratch or used a library to create Web Components. We even created a single-page web app using just Web Components. But what if we have an already-existing project? What if this is a monolithic frontend web application and we need a way to use a web component in this project? And what if we want to use a web component for a quick prototyped functionality without much overhead? This could save a lot of effort in both time and money.</p>
<p>This chapter is just for scenarios like this one; here we will look into ways in which we can use Web Components in already-existing projects. </p>
<div><br/>
By the way, this chapter is for advanced users. </div>
<p>I am assuming that you have worked on React, Angular, or Vue and that you are looking for ways to include Web Components into web applications that are already using one or more of these technologies. I am also assuming that you know how to run these web applications. However, for the sake of simplicity, we will look into the simplest component that uses one of these technologies and how two Vanilla Web Components can be included in any of these technologies.</p>
<p>In this chapter, we're going to see the following topics:</p>
<ul>
<li class="h1">Integration with already-existing projects</li>
<li class="h1">Integrating Web Components in React</li>
<li class="h1">Integrating Web Components in Angular</li>
<li class="h1">Integrating Web Components in Vue</li>
</ul>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">The &lt;header-image&gt; web component</h1>
                
            
            
                
<p>Let's say that we have a web component called <kbd>&lt;header-image&gt;</kbd> whose purpose is to show an image, and, on hover, it should be able to show a text that shows a small description of the image. The definition of this web component would look something like this:</p>
<pre>export default class HeaderImage extends HTMLElement {<br/>  constructor() {<br/><br/>    // We are not even going to touch this.<br/>    super();<br/><br/>    // lets create our shadow root<br/>    this.shadowObj = this.attachShadow({mode: 'open'});<br/><br/>    // Then lets render the template<br/>    this.render();<br/>  }<br/><br/>  static get observedAttributes() {<br/>    return ['src', 'alttext'];<br/>  }<br/><br/>  attributeChangedCallback(name, oldValue, newValue) {<br/>    if (name == 'src') {<br/>      this.src = newValue;<br/>      this.render();<br/>    }<br/>    if (name == 'alttext') {<br/>      this.alt = newValue;<br/>      this.render();<br/>    }<br/>  }<br/>  <br/>  ...<br/>  ...<br/><br/>}</pre>
<p>As you can see, we are simply calling the <kbd>super()</kbd> method inside the constructor. Then we are creating a shadow root for the component and then calling the <kbd>render()</kbd> method. We are also making sure that any of the changes coming in via attributes re-render the web component to reflect the updates associated with these attributes.</p>
<p class="mce-root"/>
<p>As for the <kbd>render()</kbd> method, it looks something like the following:</p>
<pre>render() {<br/>  this.shadowObj.innerHTML = this.getTemplate();<br/>}<br/><br/>getTemplate() {<br/>  return `<br/>    &lt;img src="img/${this.getAttribute('src')}"<br/>      alt="${this.getAttribute('alt')}"/&gt;<br/>    ${this.handleErrors()}<br/>    &lt;style&gt;<br/>      img {<br/>        width: 400px;;<br/>      }<br/>    &lt;/style&gt;<br/>  `;<br/>}</pre>
<p>Here we are adding an image to the HTML of the shadow root. In addition, we are also enabling error handling with the help of the <kbd>handleErrors()</kbd> method:</p>
<pre>handleErrors() {<br/>  if(!this.getAttribute('alt')) {<br/>    return `<br/>      &lt;div class="error"&gt;Missing Alt Text&lt;/div&gt;<br/>      &lt;style&gt;<br/>        .error {<br/>          color: red;<br/>        }<br/>      &lt;/style&gt;<br/>    `;<br/>  }<br/><br/>  return ``;<br/>}</pre>
<p>This <kbd>handleErrors()</kbd> method looks for the missing attribute, <kbd>alt</kbd>, and spits out an error message asking the user to enter the <kbd>alttext</kbd>.</p>
<p>We can use this web component with the following HTML:</p>
<pre>&lt;header-image alttext="Blue Clouds"<br/>      src="img/clouds-sky-header-2069-1024x300.jpg"&gt;&lt;/header-image&gt;</pre>
<p>Now that we know what our web component looks like, let's try to use it in already-existing projects. We will start with an existing project that uses React. </p>
<p class="mce-root"/>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">Integrating Web Components in React</h1>
                
            
            
                
<p>Let's say that we have a React app. I am going to use the starter app provided by React. You are free to try this out in your more complex app. The steps for doing so are going to be exactly the same. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting up a React project</h1>
                
            
            
                
<p>If you have your own app, you do not need to go through this section.</p>
<p>You can use the following link to set up the project: <a href="https://facebook.github.io/create-react-app/" target="_blank">https://facebook.github.io/create-react-app/</a>.<a href="https://facebook.github.io/create-react-app/" target="_blank"/></p>
<p>Once the setup is done, you will be left with a project that can be run using the following command:</p>
<pre><strong>npm start</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding a React component</h1>
                
            
            
                
<p>For the sake of simplicity, I am adding a React component. This React component is going to simulate a real life scenario of the component that is responsible for including the <kbd>&lt;header-image&gt;</kbd> web component. Let this React component be <kbd>MainBody</kbd>; its definition would look something like this:</p>
<pre>import React, { Component } from 'react';<br/><br/>export default class MainBody extends Component {<br/>  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;p&gt;This is the main body&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</pre>
<p>As you can see, it shows just one line of text and nothing else. If you have a more complex component, the steps will be the same. As for the starter app, we will include this <kbd>MainBody</kbd> component in our <kbd>App</kbd> component first, which is shown here:</p>
<pre>import React from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';<br/>import MainBody from './main-body/main-body.js';<br/><br/>function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;header className="App-header"&gt;<br/>        &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>        &lt;p&gt;<br/>          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>        &lt;/p&gt;<br/>        &lt;a<br/>          className="App-link"<br/>          href="https://reactjs.org"<br/>          target="_blank"<br/>          rel="noopener noreferrer"<br/>        &gt;<br/>          Learn React<br/>        &lt;/a&gt;<br/>        &lt;MainBody /&gt;<br/>      &lt;/header&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default App;</pre>
<p>Here, we are simply importing the <kbd>MainBody</kbd> component and using it directly in the <kbd>App</kbd> component.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Integration of Vanilla Web Component in a React component</h1>
                
            
            
                
<p>In order to use the <kbd>&lt;header-image&gt;</kbd> component inside the <kbd>MainBody</kbd> React component, we will be adding a few things to the <kbd>MainBody</kbd> component:</p>
<pre>import React, { Component } from 'react';<br/>import HeaderImage from '../web-components/header-image/header-image.js';<br/><br/>export default class MainBody extends Component {<br/><br/>  constructor() {<br/>    super();<br/>    this.state = {<br/>      src: 'https://www.freewebheaders.com/wordpress/wp-content/gallery/clouds-sky/clouds-sky-header-2069-1024x300.jpg',<br/>      altText: 'Blue Clouds'<br/>    }<br/>  }<br/><br/>  componentDidMount() {<br/>    customElements.define('header-image', HeaderImage);<br/>  }<br/><br/>  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;p&gt;This is the main body&lt;/p&gt;<br/>        &lt;header-image alttext={this.state.altText}<br/>          src={this.state.src}&gt;<br/>        &lt;/header-image&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</pre>
<p>Here, we are importing our <kbd>&lt;header-image&gt;</kbd> web component from its respective location and then registering the custom element in the life cycle callback <kbd>componentDidMount()</kbd> method. Then, we are trying to send in <kbd>alt</kbd> and <kbd>src</kbd> via state variables to the <kbd>&lt;header-image&gt;</kbd> component.</p>
<p>The steps are the same for all the React components that are trying to use any Vanilla Web Component. Now that we have an understanding of how a web component can be used in a React project, let's take a look at how it would look inside an Angular app.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Integrating Web Components in Angular</h1>
                
            
            
                
<p>Let's say that we have an already-existing Angular app. This could be a full-fledged project or a starter app, and we want to use the <kbd>&lt;header-image&gt;</kbd> web component in an Angular component. We'll start with the setup.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting up an Angular project</h1>
                
            
            
                
<p>Let's say that we want to start with a starter app. We can follow the steps given at the following URL to install and serve the starter app: <a href="https://angular.io/guide/quickstart" target="_blank">https://angular.io/guide/quickstart</a>.</p>
<p>Angular does not support Vanilla Web Components by default, so even before we start using Web Components, though, we need to tell Angular that we want to use a web component. We can do so by adding the following code in the <kbd>app.module.ts</kbd> file:</p>
<pre>...<br/>import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';<br/>...<br/>...<br/><br/>@NgModule({<br/>  ...<br/>  ...<br/>  schemas: [<br/>   CUSTOM_ELEMENTS_SCHEMA<br/>  ]<br/>})</pre>
<p>This is to tell Angular to expect a custom element that is not built using Angular. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Integrating with Angular</h1>
                
            
            
                
<p>Now, let's say we have a component called <kbd>app-main-body</kbd> built using Angular (<kbd>file: main-body.component.ts</kbd>) that looks something like this:</p>
<pre>import { Component, OnInit } from '@angular/core';<br/><br/>@Component({<br/>  selector: 'app-main-body',<br/>  templateUrl: './main-body.component.html',<br/>  styleUrls: ['./main-body.component.css']<br/>})<br/>export class MainBodyComponent implements OnInit {<br/>  src: string ;<br/>  altText: string;<br/><br/>  constructor() {<br/>    this.src = 'https://www.freewebheaders.com/wordpress/wp-content/gallery/clouds-sky/clouds-sky-header-2069-1024x300.jpg';<br/>    this.altText = 'Blue Clouds';<br/>  }<br/><br/>  ngOnInit() {<br/>    <br/>  }<br/>}</pre>
<p>If we want to include the <kbd>&lt;header-image&gt;</kbd> web component here, we can simply add the following code:</p>
<pre>...<br/>import HeaderImage from '../web-components/header-image/header-image.js';<br/><br/>...<br/>export class MainBodyComponent implements OnInit {<br/>  ...<br/>  ...<br/><br/>  ngOnInit() {<br/>    customElements.define('header-image', HeaderImage);<br/>  }<br/><br/>}</pre>
<p>Here, we are simply importing the component definition, and then inside the <kbd>ngOnInit()</kbd> callback method, we are registering the custom element. If we look at the template file, <kbd>main-body.component.html</kbd>, the web component can be included as shown in the following code:</p>
<pre>&lt;p&gt;<br/>  main-body works!<br/>&lt;/p&gt;<br/>&lt;header-image attr.src={{src}} attr.alttext="{{alttext}}"&gt;&lt;/header-image&gt;</pre>
<p>Here, we are passing in <kbd>src</kbd> as well as <kbd>altText</kbd> to the <kbd>&lt;header-image&gt;</kbd> component as attribute values. In this way, we can have Web Components built outside of Angular for use in Angular projects.</p>
<p>Now that we know how a Vanilla Web Component can be used in Angular projects, let's look at how Web Components can be used in Vue components.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Integrating Web Components in Vue</h1>
                
            
            
                
<p>Vue is another one of those libraries that is growing incredibly fast, so I thought it would be a good thing if we saw how a web component can be included in a Vue component.</p>
<p>Let's say we have a <kbd>&lt;main-body&gt;</kbd> Vue component that looks something like this:</p>
<pre>Vue.component('main-body', {<br/>  props: ['src', 'alt'],<br/>  template: `<br/>    &lt;p&gt;This is the main body&lt;/p&gt;<br/>    `,<br/>})</pre>
<p>As you can see, it does nothing other than show text, just like the main body component in Angular and React. Let's say we want to include the <kbd>&lt;header-image&gt;</kbd> web component to this <kbd>&lt;main-body&gt;</kbd> component. This would make the <kbd>&lt;main-body&gt;</kbd> component look something like this:</p>
<pre>import HeaderImage from '../web-components/header-image/header-image.js';<br/><br/>Vue.component('main-body', {<br/>  props: ['src', 'alt'],<br/>  template: `<br/>    &lt;p&gt;This is the main body&lt;/p&gt;<br/>    &lt;header-image src="img/{{src}}" alttext="{{alt}}"&gt;&lt;/header-image&gt;<br/>    `,<br/>  created: function() {<br/>    customElements.define('header-image', HeaderImage);<br/>  }<br/>})</pre>
<p>Here, we are simply importing the <kbd>HeaderImage</kbd> component and registering the web component inside the <kbd>created()</kbd> callback method. As you can see, it is very simple to use a web component inside a Vue component, and the attribute values can be passed into the web component via interpolation, as shown in the previous code.</p>
<p>Using the process stated in this section, we can add an already-existing web component to any Vue project. </p>
<p class="mce-root"/>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>In this chapter, we looked into how we can integrate Web Components into already-existing projects that use some of the most famous libraries/frameworks in the frontend world. We learned how to add an existing web component built using Vanilla JavaScript to a React, Angular, or Vue project. The techniques learned in this chapter can be used with any framework or library and in any type of existing project. The inclusion of Web Components in already-existing projects is also a good use case for the quick prototyping of features, and the components can even be removed as soon as their work is done. </p>
<p>I hope that this chapter was useful in helping you create better web applications, whether they use Web Components or not.</p>


            

            
        
    </body></html>