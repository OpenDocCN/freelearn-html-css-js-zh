<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Supporting Device Functionalities Using Ionic Native" id="aid-1BRPS1"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Supporting Device Functionalities Using Ionic Native</h1></div></div></div><p>In this chapter, we will cover the following tasks related to native device feature support:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Taking a photo using the camera plugin</li><li class="listitem">Sharing content using the social sharing plugin</li><li class="listitem">Displaying a term of service using InAppBrowser</li><li class="listitem">Creating a Taxi app using the Google Maps plugin and geocode support</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec40"/>Introduction</h1></div></div></div><p>In this chapter, you will learn how to access some common features of a device, such as the camera, contact list, e-mail, and maps. Some of these features can be written in a JavaScript-only environment, but the performance is not on a par with native support.</p><p>Cordova has a very <a id="id563" class="indexterm"/>well supported community with many plugins. You may want to check out <a class="ulink" href="http://plugins.cordova.io/">http://plugins.cordova.io/</a> to understand what is out there. Luckily, you don't need to deal with these plugins directly. You will use the Ionic Native (<a class="ulink" href="http://ionicframework.com/docs/v2/native/">http://ionicframework.com/docs/v2/native/</a>) service on top of Cordova and Angular 2. Keep in mind that you have to use Ionic Native instead of ngCordova for Ionic 2 <a id="id564" class="indexterm"/>because of compatibility issues. You can only use ngCordova for Ionic 1.x.</p></div></div>
<div class="section" title="Taking a photo using the camera plugin"><div class="titlepage" id="aid-1CQAE2"><div><div><h1 class="title"><a id="ch07lvl1sec41"/>Taking a photo using the camera plugin</h1></div></div></div><p>For this section, you <a id="id565" class="indexterm"/>will make an app to take a picture<a id="id566" class="indexterm"/> using the device camera or load an existing picture from the device album. The picture could be either in the Base64 format or saved in a local filesystem relating to your app. The<a id="id567" class="indexterm"/> following is a screenshot of the app:</p><div class="mediaobject"><img src="../Images/image00371.jpeg" alt="Taking a photo using the camera plugin"/></div><p style="clear:both; height: 1em;"> </p><p>Here is the high-level <a id="id568" class="indexterm"/>process:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Access the Cordova camera plugin to trigger camera capture and get the image back in the Base64 or URI format</li><li class="listitem">Parse the Base64 data or URI on an <code class="literal">&lt;img&gt;</code> DOM object</li><li class="listitem">Display the URI if it's in the URI format</li><li class="listitem">Capture an event of a toggle component</li><li class="listitem">Display long data (for example, URI) using horizontal scroll</li></ul></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec96"/>Getting ready</h2></div></div></div><p>You should have a physical device ready in order to test the camera capability. It's possible to just run the code via an emulator, but the filesystem support might look different across the various platforms.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec97"/>How to do it...</h2></div></div></div><p>The following <a id="id569" class="indexterm"/>are the instructions to add camera support:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Start a blank project (for example, <code class="literal">MyCamera</code>) and go to that folder:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic start MyCamera blank --v2</strong></span>
<span class="strong"><strong>$ cd MyCamera</strong></span>
</pre></div></li><li class="listitem">Add the Cordova <a id="id570" class="indexterm"/>camera plugin using the following code:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic plugin add cordova-plugin-camera</strong></span>
</pre></div><div class="note" title="Note"><h3 class="title"><a id="tip18"/>Tip</h3><p>You no longer need to add ngCordova separately. Also, you should not use the <code class="literal">cordova add</code> command line directly; instead but use <code class="literal">ionic plugin add</code>
</p></div><p>You should be able to see a new folder <code class="literal">org.apache.cordova.camera</code> being added in the <code class="literal">/plugins</code> folder.</p></li><li class="listitem">Replace <code class="literal">./src/pages/home/home.html</code> with the following code:<div class="informalexample"><pre class="programlisting">&lt;ion-header&gt;
  &lt;ion-navbar&gt;
    &lt;ion-title&gt;
      Camera
    &lt;/ion-title&gt;
  &lt;/ion-navbar&gt;
&lt;/ion-header&gt;

&lt;ion-content padding&gt;
  &lt;ion-row class="center"&gt;
    &lt;ion-col width-50&gt;
      &lt;button ion-button (click)="getPicture(1)"&gt;Show Camera&lt;/button&gt;  
    &lt;/ion-col&gt;
    &lt;ion-col width-50&gt;
      &lt;button ion-button (click)="getPicture(0)"&gt;Show Album&lt;/button&gt;  
    &lt;/ion-col&gt;
  &lt;/ion-row&gt;

  &lt;ion-item class="no-border"&gt;
    &lt;ion-label&gt;Return image file URI&lt;/ion-label&gt;
    &lt;ion-toggle energized [(ngModel)]="useURI"&gt;
	&lt;/ion-toggle&gt;
  &lt;/ion-item&gt;
  
  &lt;ion-card&gt;
    &lt;img [src]="imageData" *ngIf="imageData" /&gt;
    &lt;ion-card-content&gt;
      &lt;ion-card-title&gt;
        &lt;div *ngIf="useURI"&gt;
          Using URI
        &lt;/div&gt;
        &lt;div *ngIf="!useURI"&gt;
          Using Base64
        &lt;/div&gt;
      &lt;/ion-card-title&gt;
      &lt;p *ngIf="useURI"&gt;
        Your URI is {{ imageData }}
      &lt;/p&gt;
      &lt;p *ngIf="!useURI"&gt;
        Your Base64 image has {{ (imageData + '').length }} bytes
      &lt;/p&gt;
    &lt;/ion-card-content&gt;
  &lt;/ion-card&gt;
&lt;/ion-content&gt;</pre></div><p>Since you have only one page, this template will show two buttons and an area to<a id="id571" class="indexterm"/> display the image.</p></li><li class="listitem">Replace <code class="literal">./src/pages/home/home.ts</code> with<a id="id572" class="indexterm"/> the following code:<div class="informalexample"><pre class="programlisting">import { Component, Input } from '@angular/core';
import { NavController } from 'ionic-angular';
import { Camera } from 'ionic-native';

@Component({
  selector: 'page-home',
  templateUrl: 'home.html'
})
export class HomePage {
  public imageData: string;
  @Input('useURI') useURI: Boolean = true;
  
  constructor(public navCtrl: NavController) {
  }
  
  getPicture(sourceType){
    Camera.getPicture({
        quality: 50,
        allowEdit: true,
        encodingType: Camera.EncodingType.JPEG,
        saveToPhotoAlbum: false,
        destinationType: this.useURI ? Camera.DestinationType.FILE_URI : Camera.DestinationType.DATA_URL,
        targetWidth: 800,
        targetHeight: 800,
        sourceType: sourceType
    }).then((imageData) =&gt; {
        if (this.useURI) {
          this.imageData = imageData;
        } else {
          this.imageData = "data:image/jpeg;base64," + imageData;
        }
    }, (err) =&gt; {
        console.log(err);
    });
  }  
}</pre></div><p>There is only <a id="id573" class="indexterm"/>one method: <code class="literal">getPicture()</code>. This method will return the photo data so that the template can render.</p></li><li class="listitem">Replace <code class="literal">/app/pages/home/home.scss</code> with<a id="id574" class="indexterm"/> the following code:<div class="informalexample"><pre class="programlisting">.center {
  text-align: center;
}

.no-border .item-inner {
  border-bottom: 0;
}</pre></div><p>There are only a few minor changes in the styling so that you can keep them simple.</p></li><li class="listitem">Connect your device<a id="id575" class="indexterm"/> to your computer.</li><li class="listitem">Go to the Terminal and execute the following command line for iOS:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic run ios</strong></span>
</pre></div><div class="note" title="Note"><h3 class="title"><a id="note30"/>Note</h3><p>If you are not able to push the app to your physical device using the preceding command line, you can use <code class="literal">ionic run ios --device</code> to specify the CLI to use the physical device instead of a simulator.</p></div><p>If you want to run the app in your Android device, use the following code:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic run android</strong></span>
</pre></div></li><li class="listitem">When you run<a id="id576" class="indexterm"/> the app and take a picture, you should see the app as shown in the following screenshot:<div class="mediaobject"><img src="../Images/image00372.jpeg" alt="How to do it..."/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec98"/>How it works…</h2></div></div></div><p>
<code class="literal">Camera.getPicture()</code> is just<a id="id577" class="indexterm"/> an abstraction of <code class="literal">navigator.camera.getPicture()</code> from the Cordova camera plugin. If you are already familiar with Cordova or ngCordova from Ionic 1, this should be very familiar. Let's start from the template. You have the following two<a id="id578" class="indexterm"/> buttons, which trigger the same, <code class="literal">getPicture()</code>, method:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">&lt;button ion-button (click)="getPicture(1)"&gt;Show Camera&lt;/button&gt;</code></li><li class="listitem"><code class="literal">&lt;button ion-button (click)="getPicture(0)"&gt;Show Album&lt;/button&gt;</code></li></ul></div><p>These are just different ways to access photos: either from the camera itself or from the existing photos in the phone's album. For the photo to render, you need to pass the photo data into the <code class="literal">src</code> attribute, as follows:</p><div class="informalexample"><pre class="programlisting">&lt;img [src]="imageData" *ngIf="imageData" /&gt;</pre></div><p>Note that you only want to show this <code class="literal">&lt;img&gt;</code> tag when <code class="literal">imageData</code> exists with some data. The <code class="literal">imageData</code> variable could be Base64 or an internal URL of the photo. To specify this option, there is a toggle button, as shown:</p><div class="informalexample"><pre class="programlisting">&lt;ion-toggle energized [(ngModel)]="useURI"&gt;&lt;/ion-toggle&gt;</pre></div><p>You will use the <code class="literal">useURI</code> variable inside the class, as illustrated, to determine which format to return the photo<a id="id579" class="indexterm"/> data in.</p><div class="informalexample"><pre class="programlisting">@Input('useURI') useURI: Boolean = true;</pre></div><p>Both <code class="literal">useURI</code> and <code class="literal">sourceType</code> will be used in the <code class="literal">getPicture()</code> function, as follows:</p><div class="informalexample"><pre class="programlisting">Camera.getPicture({
    quality: 50,
    allowEdit: true,
    encodingType: Camera.EncodingType.JPEG,
    saveToPhotoAlbum: false,
    destinationType: this.useURI ? Camera.DestinationType.FILE_URI: Camera.DestinationType.DATA_URL,
    targetWidth: 800,
    targetHeight: 800,
    sourceType: sourceType
}).then((imageData) =&gt; {
    if (this.useURI) {
      this.imageData = imageData;
    } else {
      this.imageData = "data:image/jpeg;base64," + imageData;
    }
}, (err) =&gt; {
    console.log(err);
});</pre></div><p>It's important to adjust the quality, <code class="literal">targetWidth</code> and <code class="literal">targetHeight</code> to low so that the photo is not too big, which could crash the device, especially when it doesn't have enough memory. When you return the Base64 data, it must be prefixed with the string <code class="literal">data:image/jpeg;base64</code>.</p><p>One item that isn't discussed here is the ability to post image data to the server. The common scenario is to upload the file from the filesystem. It's not a good idea to send data as Base64 because of the data size, which is double the original binary size.</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec99"/>There's more…</h2></div></div></div><p>It is possible to create Instagram-like filter effects using just JavaScript. You can leverage an existing library, such<a id="id580" class="indexterm"/> as Filterous (<a class="ulink" href="https://github.com/girliemac/Filterous">https://github.com/girliemac/Filterous</a>), to modify the image<a id="id581" class="indexterm"/> canvas directly.</p><p>There is an Instagram plugin (<a class="ulink" href="https://github.com/vstirbu/InstagramPlugin">https://github.com/vstirbu/InstagramPlugin</a>) for Cordova on GitHub. You could <a id="id582" class="indexterm"/>write some extra code to pass the image to Instagram. The user must have Instagram installed on the phone first, though. This idea is nice when you plan to do some <a id="id583" class="indexterm"/>cool image processing (for example, adding funny text) before letting Instagram perform the photo filter operation.</p><p>You could even add the Cordova's social network plugin and post the resulting images to Twitter or Facebook.</p></div></div>
<div class="section" title="Sharing content using the social sharing plugin"><div class="titlepage" id="aid-1DOR02"><div><div><h1 class="title"><a id="ch07lvl1sec42"/>Sharing content using the social sharing plugin</h1></div></div></div><p>If you develop an app with shareable content, you might want to utilize the native device feature to share via the device's authorized social media accounts. There are several benefits from using<a id="id584" class="indexterm"/> this approach. First, users don't need to open a separate browser to log in to their social media account each time they want to <a id="id585" class="indexterm"/>share. Second, all the information can be filled out programmatically, such as title, body, link, or image. Finally, since this is a native feature of the device, the menu selection allows users to see multiple accounts, which they are already familiar with, to choose from. The social sharing plugin can greatly enhance the user experience.</p><p>This is the app that you will build:</p><div class="mediaobject"><img src="../Images/image00373.jpeg" alt="Sharing content using the social sharing plugin"/></div><p style="clear:both; height: 1em;"> </p><p>When the user clicks <a id="id586" class="indexterm"/>on the <span class="strong"><strong>Share</strong></span> button, the app<a id="id587" class="indexterm"/> will show the following native button menu for social media account selection:</p><div class="mediaobject"><img src="../Images/image00374.jpeg" alt="Sharing content using the social sharing plugin"/></div><p style="clear:both; height: 1em;"> </p><p>If the user <a id="id588" class="indexterm"/>selects Twitter, a popup will show up<a id="id589" class="indexterm"/> with all the information prefilled, as illustrated:</p><div class="mediaobject"><img src="../Images/image00375.jpeg" alt="Sharing content using the social sharing plugin"/></div><p style="clear:both; height: 1em;"> </p><p>After posting on<a id="id590" class="indexterm"/> Twitter, the user goes right back to the app without ever leaving it.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec100"/>Getting ready</h2></div></div></div><p>You should have<a id="id591" class="indexterm"/> a physical device or simulator ready in order to test the social sharing capability.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec101"/>How to do it…</h2></div></div></div><p>The following are the instructions:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Start a blank project (for example, <code class="literal">LinkSocialShare</code>), as follows, and go to that folder:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic start LinkSocialShare blank --v2</strong></span>
<span class="strong"><strong>$ cd LinkSocialShare</strong></span>
</pre></div></li><li class="listitem">Add the Cordova<a id="id592" class="indexterm"/> camera plugin with the following command line:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic plugin add cordova-plugin-x-socialsharing</strong></span>
</pre></div></li><li class="listitem">Open <code class="literal">./src/pages/home/index.html</code> and replace its contents with the following <a id="id593" class="indexterm"/>code:<div class="informalexample"><pre class="programlisting">&lt;ion-header&gt;
  &lt;ion-navbar&gt;
    &lt;ion-title&gt;
      Home
    &lt;/ion-title&gt;
  &lt;/ion-navbar&gt;
&lt;/ion-header&gt;

&lt;ion-content&gt;
  &lt;ion-card&gt;

    &lt;ion-item&gt;
      &lt;h2 #messageSubject&gt;Ionic Developer&lt;/h2&gt;
      &lt;p&gt;May 5, 2016&lt;/p&gt;
    &lt;/ion-item&gt;

    &lt;img src="https://source.unsplash.com/category/technology/600x390"&gt;

    &lt;ion-card-content&gt;
      &lt;p #messageBody&gt;Wow Ionic 2 is so awesome.I gotta share this to other people.&lt;/p&gt;
    &lt;/ion-card-content&gt;

    &lt;ion-row&gt;
      &lt;ion-col&gt;
        &lt;button ion-button color="primary"clear small icon-left&gt;
          &lt;ion-icon name="thumbs-up"&gt;&lt;/ion-icon&gt;
          &lt;div&gt;12 Likes&lt;/div&gt;
        &lt;/button&gt;
      &lt;/ion-col&gt;
      &lt;ion-col&gt;
        &lt;button ion-button color="primary" clear small icon-left
          (click)="sendShare(messageBody.innerText, messageSubject.innerText,'http://ionicframework.com/docs/v2/')"&gt;
          &lt;ion-icon name="ios-share"&gt;&lt;/ion-icon&gt;
          &lt;div&gt;Share&lt;/div&gt;
        &lt;/button&gt;
      &lt;/ion-col&gt;
      &lt;ion-col center text-center&gt;
        &lt;ion-note&gt;
          11h ago
        &lt;/ion-note&gt;
      &lt;/ion-col&gt;
    &lt;/ion-row&gt;

  &lt;/ion-card&gt;
&lt;/ion-content&gt;</pre></div></li></ol><div style="height:10px; width: 1px"/></div><p>This is a very simple page with the card element. The <span class="strong"><strong>Like</strong></span> button is there just for cosmetic reasons <a id="id594" class="indexterm"/>without code implementation. However, all the <a id="id595" class="indexterm"/>JavaScript logic will focus on the <span class="strong"><strong>Share</strong></span> button:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open <code class="literal">./src/pages/home/home.ts</code>, as shown:<div class="informalexample"><pre class="programlisting">import { Component } from '@angular/core';
import { NavController } from 'ionic-angular';
import { SocialSharing } from 'ionic-native';

@Component({
  selector: 'page-home',
  templateUrl: 'home.html'
})
export class HomePage {
  
  constructor(public navCtrl: NavController) {
  }
  
  sendShare(message, subject, url) {
    SocialSharing.share(message, subject, null, url);
  }
}</pre></div></li><li class="listitem">Go to the Terminal and execute either of the following command lines:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic run ios</strong></span>
<span class="strong"><strong>$ ionic run android</strong></span>
</pre></div></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec102"/>How it works…</h2></div></div></div><p>You can start looking at the template because that is where the social media content is extracted from. The subject value is from the <code class="literal">#messageSubject</code> local variable, as illustrated:</p><div class="informalexample"><pre class="programlisting">&lt;ion-item&gt;
  &lt;h2 #messageSubject&gt;Ionic Developer&lt;/h2&gt;
  &lt;p&gt;May 5, 2016&lt;/p&gt;
&lt;/ion-item&gt;</pre></div><p>In the preceding case, the subject is <code class="literal">Ionic Developer</code> because you will access <code class="literal">messageSubject.innerText</code> later on. <code class="literal">messageSubject</code> is just referencing your H2 DOM node.</p><p>Similarly, the body<a id="id596" class="indexterm"/> is from <code class="literal">#messageBody</code>, as shown:</p><div class="informalexample"><pre class="programlisting">&lt;ion-card-content&gt;
  &lt;p #messageBody&gt;Wow Ionic 2 is so awesome. I gotta share this to other people.&lt;/p&gt;
&lt;/ion-card-content&gt;</pre></div><p>When the user clicks <a id="id597" class="indexterm"/>on the <span class="strong"><strong>Share</strong></span> button, it will trigger the <code class="literal">sendShare()</code> method, as follows:</p><div class="informalexample"><pre class="programlisting">&lt;button ion-button color="primary" clear small icon-left
          (click)="sendShare(messageBody.innerText,messageSubject.innerText, 'http://ionicframework.com/docs/v2/')"&gt;</pre></div><p>Let's take a look at your <code class="literal">home.ts</code> to understand how <code class="literal">sendShare()</code> works.</p><p>First, you need to import the <code class="literal">SocialSharing</code> module from Ionic Native, as illustrated:</p><div class="informalexample"><pre class="programlisting">import { SocialSharing } from 'ionic-native';</pre></div><p>Ionic 2 makes it very convenient because you don't need to install ngCordova separately. Ionic Native is actually a default option that comes with the project during its creation.</p><p>To share your content and trigger the social media menu, the logic, as shown, is very simple:</p><div class="informalexample"><pre class="programlisting">sendShare(message, subject, url) {
  SocialSharing.share(message, subject, null, url);
}</pre></div><p>If you want to share a file, you can replace the third parameter (where it is <code class="literal">null</code>) with the URL to the user's local filesystem. This is useful when you want people to send a PDF or JPG via e-mail or post it on Facebook.</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec103"/>There's more…</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">To see the latest<a id="id598" class="indexterm"/> update of the<a id="id599" class="indexterm"/> Social Share plugin, you <a id="id600" class="indexterm"/>can visit the documentation page at <a class="ulink" href="http://ionicframework.com/docs/v2/native/social-sharing/">http://ionicframework.com/docs/v2/native/social-sharing/</a></li></ul></div></div></div>
<div class="section" title="Displaying a term of service using InAppBrowser"><div class="titlepage" id="aid-1ENBI2"><div><div><h1 class="title"><a id="ch07lvl1sec43"/>Displaying a term of service using InAppBrowser</h1></div></div></div><p>In many apps, you <a id="id601" class="indexterm"/>sometimes require users to accept a term of service before they can move on to the next page. The typical approach is to create a popup modal or a new page showing the term of <a id="id602" class="indexterm"/>service. Once users finish reading, they can click on the <span class="strong"><strong>Done</strong></span> or <span class="strong"><strong>Back</strong></span> button. However, if the content of your term of service changes, you may need to ask users to update the app. In many cases, users don't update apps often. So, the terms of service that they accepted could be older than your current version. Therefore, there is a need to maintain term of service content separately from the app itself. The InAppBrowser plugin is the best solution for this because you can point users to the same Term of Service page that is already on your website.</p><p>The app will just have a simple checkbox and button to demonstrate how InAppBrowser works:</p><div class="mediaobject"><img src="../Images/image00376.jpeg" alt="Displaying a term of service using InAppBrowser"/></div><p style="clear:both; height: 1em;"> </p><p>Once the user clicks on the <span class="strong"><strong>Please agree to our terms</strong></span> checkbox, they will go to the InAppBrowser page:</p><div class="mediaobject"><img src="../Images/image00377.jpeg" alt="Displaying a term of service using InAppBrowser"/></div><p style="clear:both; height: 1em;"> </p><p>After going<a id="id603" class="indexterm"/> through the term of service content, they<a id="id604" class="indexterm"/> can click on <span class="strong"><strong>Done</strong></span> and go back to the previous page with the <span class="strong"><strong>Next</strong></span> button enabled:</p><div class="mediaobject"><img src="../Images/image00378.jpeg" alt="Displaying a term of service using InAppBrowser"/></div><p style="clear:both; height: 1em;"> </p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec104"/>Getting ready</h2></div></div></div><p>You should have a<a id="id605" class="indexterm"/> physical device ready in order<a id="id606" class="indexterm"/> to test InAppBrowser, as this won't work in the browser as an iframe.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec105"/>How to do it...</h2></div></div></div><p>Here are the instructions:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a blank Ionic app (for example, <code class="literal">OnlineTOS</code>) and <code class="literal">cd</code> to that folder, as shown:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic start OnlineTOS blank --v2</strong></span>
<span class="strong"><strong>$ cd OnlineTOS</strong></span>
</pre></div></li><li class="listitem">Install the InAppBrowser plugin using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic plugin add cordova-plugin-inappbrowser</strong></span>
</pre></div></li><li class="listitem">Open <code class="literal">/config.xml</code> in the project folder and insert the following two lines under <code class="literal">&lt;access origin="*"/&gt;</code>, as shown:<div class="informalexample"><pre class="programlisting">&lt;allow-navigation href="http://*/*" /&gt;
&lt;allow-navigation href="https://*/*" /&gt;</pre></div><p>This will tell Cordova that it's okay to allow navigation to any website. Otherwise, the device security will block InAppBrowser. You can read more<a id="id607" class="indexterm"/> about this on the Cordova documentation page at <a class="ulink" href="https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-whitelist/">https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-whitelist/</a>.</p></li><li class="listitem">Open <code class="literal">./src/pages/home/index.html</code> and replace<a id="id608" class="indexterm"/> with the following code:<div class="informalexample"><pre class="programlisting">&lt;ion-content class="home"&gt;
  &lt;div class="top-header center"&gt;
    &lt;ion-icon name="alert"&gt;&lt;/ion-icon&gt;
    &lt;br/&gt;
    &lt;h3&gt;
      Important Information
    &lt;/h3&gt;
  &lt;/div&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Please agree to our terms&lt;/ion-label&gt;
    &lt;ion-checkbox dark (click)="openTOS()"&gt;&lt;/ion-checkbox&gt;
  &lt;/ion-item&gt;
  &lt;div class="center"&gt;
    &lt;button ion-button class="long" [(disabled)]="!readTOS"&gt;Next&lt;/button&gt;
  &lt;/div&gt;
&lt;/ion-content&gt;</pre></div></li><li class="listitem">Open <code class="literal">./src/pages/home/home.ts</code> and<a id="id609" class="indexterm"/> replace with the following code:<div class="informalexample"><pre class="programlisting">import { Component } from '@angular/core';
import { Platform } from 'ionic-angular';
import { InAppBrowser } from 'ionic-native';

@Component({
  selector: 'page-home',
  templateUrl: 'home.html'
})
export class HomePage {
  private platform: any;
  public readTOS: Boolean = false;
  
  constructor(platform: Platform) {
    this.platform = platform;
  }
  
  openTOS() {
    this.readTOS = !this.readTOS;
    this.platform.ready().then(() =&gt; {
      let ref = new InAppBrowser('https://ionic.io/tos','_blank');
      ref.on('exit').subscribe(() =&gt; {
        console.log('Exit In-App Browser');
      });
    });
  }
}</pre></div></li><li class="listitem">Open <code class="literal">./src/pages/home/home.scss</code> and<a id="id610" class="indexterm"/> replace with the<a id="id611" class="indexterm"/> following code:<div class="informalexample"><pre class="programlisting">.home {
  .item-inner {
    border-bottom: 0;
  }  
}

.top-header {
  margin-top: 50px;
  margin-bottom: 50px;
  
  ion-icon {
    color: #EB6B56;
    font-size: 100px;
  }
  
  h3 {
    color: #75706B;
  }
}

.center {
  text-align: center;
}

.long {
  padding: 0 5em;
}</pre></div><p>This is just to provide minor styling to the page.</p></li><li class="listitem">Run the app in the Terminal using the following command line:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic run ios</strong></span>
<span class="strong"><strong>$ ionic run android</strong></span>
</pre></div></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec106"/>How it works…</h2></div></div></div><p>First, let's take a<a id="id612" class="indexterm"/> look at the <code class="literal">template home.html</code>:</p><div class="informalexample"><pre class="programlisting">  &lt;ion-item&gt;
    &lt;ion-label&gt;Please agree to our terms&lt;/ion-label&gt;
    &lt;ion-checkbox dark (click)="openTOS()"&gt;&lt;/ion-checkbox&gt;
  &lt;/ion-item&gt;
  &lt;div class="center"&gt;
    &lt;button ion-button class="long" [(disabled)]="!readTOS"&gt;Next&lt;/button&gt;
  &lt;/div&gt;</pre></div><p>There are two areas that you should make a note on. When the <code class="literal">&lt;ion-checkbox&gt;</code> component is clicked <a id="id613" class="indexterm"/>on, it will trigger the <code class="literal">openTOS()</code> method, which will open the URL via InAppBrowser. The <span class="strong"><strong>Next</strong></span> button is disabled by default (via the <code class="literal">readTOS</code> variable). So, when the user checks the checkbox, this <code class="literal">readTOS</code> will be <code class="literal">True</code> and the button will be enabled.</p><p>In your <code class="literal">home.ts</code>, you must import the <code class="literal">InAppBrowser</code> module first, as shown:</p><div class="informalexample"><pre class="programlisting">import { InAppBrowser } from 'ionic-native';</pre></div><p>This will make the <code class="literal">InAppBrowser</code> object available for use in your class.</p><p>Here is the <code class="literal">openTOS()</code> method:</p><div class="informalexample"><pre class="programlisting">  openTOS() {
    this.readTOS = !this.readTOS;
    this.platform.ready().then(() =&gt; {
      let ref = new InAppBrowser('https://ionic.io/tos', '_blank');
      ref.on('exit').subscribe(() =&gt; {
        console.log('Exit In-App Browser');
      });
    });
  }</pre></div><div class="note" title="Note"><h3 class="title"><a id="tip19"/>Tip</h3><p>You have to wrap everything inside <code class="literal">platform.ready()</code> because sometimes Cordova plugin loads more slowly than the app itself and it will cause an error if the user clicks on the button too fast to trigger it InAppBrowser.</p></div><p>To trigger InAppBrowser, you just need to call <code class="literal">InAppBrowser.open</code> and pass the following three parameters:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The URL to load.</li><li class="listitem">The target to<a id="id614" class="indexterm"/> open the URL. There are four options only—<code class="literal">_self</code>, <code class="literal">_blank</code>, and <code class="literal">_system</code>. <code class="literal">_self</code> will overwrite your current Ionic app; thus, you should never need to use this option. <code class="literal">_blank</code> is typically what you want because it leaves you a way to come<a id="id615" class="indexterm"/> back to your app. Finally, <code class="literal">_system</code> opens a separate browser outside the app.</li><li class="listitem">Options is the last parameter where you have to pass a string. You can visit the official document for more<a id="id616" class="indexterm"/> information (<a class="ulink" href="https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen">https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen</a>). In general, you just need to set <code class="literal">location=true</code> so that the user can see the current URL.<div class="note" title="Note"><h3 class="title"><a id="tip20"/>Tip</h3><p>Android and iOS have different options; so, you should check the GitHub page to compare the different platforms.</p></div></li></ol><div style="height:10px; width: 1px"/></div><p>InAppBrowser also has an <code class="literal">exit</code> event, where you can listen via <code class="literal">ref.on()</code>. This is useful when you want to pop up a Thank You dialog or record an event (via the REST API to your server).</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec107"/>There's more…</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">To stay up to date with the<a id="id617" class="indexterm"/> latest changes in InAppBrowser, you can visit <a class="ulink" href="https://github.com/apache/cordova-plugin-inappbrowser">https://github.com/apache/cordova-plugin-inappbrowser</a></li><li class="listitem">Official support for Ionic Native's InAppBrowser is located at <a class="ulink" href="http://ionicframework.com/docs/v2/native/inappbrowser/">http://ionicframework.com/docs/v2/native/inappbrowser/</a></li></ul></div></div></div>
<div class="section" title="Creating a Taxi app using the Google Maps plugin and geocode support"><div class="titlepage" id="aid-1FLS42"><div><div><h1 class="title"><a id="ch07lvl1sec44"/>Creating a Taxi app using the Google Maps plugin and geocode support</h1></div></div></div><p>Today, many mobile<a id="id618" class="indexterm"/> apps utilize different mapping features, such as showing the current location, creating routes, and providing suggestive <a id="id619" class="indexterm"/>business searches. This section will show<a id="id620" class="indexterm"/> you how to use Ionic Native's Google Maps plugin to provide mapping support.</p><p>You will create a Taxi<a id="id621" class="indexterm"/> app that can do the following things:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Display Google Maps in fullscreen</li><li class="listitem">Add a button overlay<a id="id622" class="indexterm"/> on top of the map</li><li class="listitem">Detect the current device<a id="id623" class="indexterm"/> location</li><li class="listitem">Add a<a id="id624" class="indexterm"/> marker with any text</li></ul></div><p>This is the <a id="id625" class="indexterm"/>screenshot of the Taxi app:</p><div class="mediaobject"><img src="../Images/image00379.jpeg" alt="Creating a Taxi app using the Google Maps plugin and geocode support"/></div><p style="clear:both; height: 1em;"> </p><p>When users click on the <span class="strong"><strong>PICK ME UP</strong></span> button, it will go to the current device location and show longitude and latitude information:</p><div class="mediaobject"><img src="../Images/image00380.jpeg" alt="Creating a Taxi app using the Google Maps plugin and geocode support"/></div><p style="clear:both; height: 1em;"> </p><p>It is possible to<a id="id626" class="indexterm"/> use the HTML5 and JavaScript version of geolocation and maps instead of the Cordova plugin's. However, you will see a negative<a id="id627" class="indexterm"/> impact on performance. It's very obvious<a id="id628" class="indexterm"/> that if you use the SDK, map rendering and optimization tends to be faster. In <a id="id629" class="indexterm"/>addition, HTML5 geolocation sometimes has some strange bugs that require the user to accept permission twice—once for the app and once for the inside browser object.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec108"/>Getting ready</h2></div></div></div><p>The Google Maps plugin requires a Google Maps API key for your project. You need a Google account and<a id="id630" class="indexterm"/> login to get started.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Navigate to the<a id="id631" class="indexterm"/> Google APIs<a id="id632" class="indexterm"/> Console at <a class="ulink" href="https://code.google.com/apis/console/">https://code.google.com/apis/console/</a>.</li><li class="listitem">Create a project if <a id="id633" class="indexterm"/>you don't have one yet. Just fill in the required fields:<div class="mediaobject"><img src="../Images/image00381.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">You need to enable the <span class="strong"><strong>Google Maps SDK for iOS</strong></span>, the <span class="strong"><strong>Google Maps Android API</strong></span>, or <a id="id634" class="indexterm"/>both. It depends on how many platforms you plan to support. Let's select <span class="strong"><strong>Google Maps SDK for iOS</strong></span> for this example:<div class="mediaobject"><img src="../Images/image00382.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click <a id="id635" class="indexterm"/>on the <span class="strong"><strong>Enable API</strong></span> button:<div class="mediaobject"><img src="../Images/image00383.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Go to<a id="id636" class="indexterm"/> <span class="strong"><strong>Credentials</strong></span> to create your <a id="id637" class="indexterm"/>own key:<div class="mediaobject"><img src="../Images/image00384.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the<a id="id638" class="indexterm"/> <span class="strong"><strong>Create credential</strong></span> | <span class="strong"><strong>API key</strong></span> <a id="id639" class="indexterm"/>option:<div class="mediaobject"><img src="../Images/image00385.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Select the<a id="id640" class="indexterm"/> restriction option. In the<a id="id641" class="indexterm"/> following example, you will select the <span class="strong"><strong>iOS apps</strong></span> radio button:<div class="mediaobject"><img src="../Images/image00386.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Fill in your <a id="id642" class="indexterm"/>app's Bundle ID. You might<a id="id643" class="indexterm"/> not know exactly what it is yet<a id="id644" class="indexterm"/> because Ionic will create a random ID. So just put in <code class="literal">com.ionicframework.starter</code> and change that later.<div class="mediaobject"><img src="../Images/image00387.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the<a id="id645" class="indexterm"/> <span class="strong"><strong>Save</strong></span> button.</li><li class="listitem">Now you <a id="id646" class="indexterm"/>should see the key for the iOS applications section as follows:<div class="mediaobject"><img src="../Images/image00388.jpeg" alt="Getting ready"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Copy the API key<a id="id647" class="indexterm"/> so that you can use it to add the Cordova Google Maps plugin.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec109"/>How to do it...</h2></div></div></div><p>Let's start an Ionic <a id="id648" class="indexterm"/>project from scratch and add Google Maps features, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a blank Ionic project, as shown, and go to that folder:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic start TaxiApp blank --v2</strong></span>
<span class="strong"><strong>$ cd TaxiApp</strong></span>
</pre></div></li><li class="listitem">Replace the iOS platform with version 3.9.0 with the following command lines:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic platform remove ios</strong></span>
<span class="strong"><strong>$ ionic platform add ios@3.9.0</strong></span>
<span class="strong"><strong>$ ionic platform add android</strong></span>
</pre></div><div class="note" title="Note"><h3 class="title"><a id="note31"/>Note</h3><p>You have to pick <code class="literal">ios@3.9.0</code> specifically because the current version of the Cordova Google Maps plugin only works with this version. Otherwise, your build will fail. You <a id="id649" class="indexterm"/>should experiment with the newest version if possible.</p></div></li><li class="listitem">Install the<a id="id650" class="indexterm"/> Google Maps plugin with your copied key replacing <code class="literal">`YOUR_IOS_API_KEY_IS_HERE</code>, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ cordova plugin add cordova-plugin-googlemaps --variable API_KEY_FOR_IOS="YOUR_IOS_API_KEY_IS_HERE"`</strong></span>
</pre></div><p>If you do this for both iOS and Android, use the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ cordova plugin add cordova-plugin-googlemaps --variable API_KEY_FOR_ANDROID="key" --variable API_KEY_FOR_IOS="key"</strong></span>
</pre></div><div class="note" title="Note"><h3 class="title"><a id="tip21"/>Tip</h3><p>You have to use the Cordova CLI here because using the Ionic CLI to add Google Maps with the API Key will not work.</p></div></li><li class="listitem">Open <code class="literal">./src/pages/home/home.html</code> to modify your template, as shown:<div class="informalexample"><pre class="programlisting">&lt;ion-content [ngClass]="{'no-scroll': mapRendered}"&gt;
  &lt;div id="map"&gt;
    &lt;button ion-button color="dark" (click)="getMyLocation()"&gt;PICKME UP&lt;/button&gt;
  &lt;/div&gt;
&lt;/ion-content&gt;</pre></div><p>The main element<a id="id651" class="indexterm"/> here is your <code class="literal">div</code> with <code class="literal">map</code> ID because that is where you have to inject the <a id="id652" class="indexterm"/>Google Maps object.</p></li><li class="listitem">Edit your <code class="literal">./src/pages/home/home.ts</code> in the same folder:<div class="informalexample"><pre class="programlisting">import { Component } from '@angular/core';
import { NavController, Platform } from 'ionic-angular';
import { GoogleMap, GoogleMapsEvent, GoogleMapsLatLng, GoogleMapsMarkerOptions, GoogleMapsMarker, CameraPosition } from 'ionic-native';
 
@Component({
  selector: 'home-page',
  templateUrl: 'home.html'
})
export class HomePage {
  public map: GoogleMap;
  public mapRendered: Boolean = false; 

  constructor(public navCtrl: NavController, publicplatform: Platform) {
    this.platform.ready().then(() =&gt; {
      this.showMap();
    });
  }

  showMap(){
    let location = new GoogleMapsLatLng(47.6062, -122.3321);
    this.map = new GoogleMap('map', {
      'camera': {
        'latLng': location,
        'tilt': 30,
        'zoom': 15,
        'bearing': 50
      }
    });

    this.map.on(GoogleMapsEvent.MAP_READY).subscribe(()=&gt; {
      console.log('Map is ready!');
      this.mapRendered = true;
    });
  }

  getMyLocation() {
    this.map.getMyLocation().then((location) =&gt; {
      var msg = ["I am here:\n",
        "latitude:" + location.latLng.lat,
        "longitude:" + location.latLng.lng].join("\n");

      let position: CameraPosition = {
        target: location.latLng,
        zoom: 15
      };
      this.map.moveCamera(position);    

      let markerOptions: GoogleMapsMarkerOptions = {
        'position': location.latLng,
        'title': msg
      };
      this.map.addMarker(markerOptions).then((marker: GoogleMapsMarker) =&gt; {
        marker.showInfoWindow();
      });

    });

  }
}</pre></div></li><li class="listitem">Finally, make<a id="id653" class="indexterm"/> some minor adjustments to the stylesheet <a id="id654" class="indexterm"/>so that the map<a id="id655" class="indexterm"/> can take over the fullscreen. Edit <code class="literal">./src/pages/home/home.scss</code>, as illustrated:<div class="informalexample"><pre class="programlisting">ion-app._gmaps_cdv_ .nav-decor{
  background-color: transparent !important;
}
 
home-page {
  text-align: center;
  #map {
    height: 100%;
    z-index: 9999;
  }
}

.no-scroll {
  .scroll-content {
    overflow-y: hidden;
  }
}</pre></div></li><li class="listitem">Run the app in the Terminal with the following command line:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ionic run ios --device</strong></span>
<span class="strong"><strong>$ ionic run android</strong></span>
</pre></div></li></ol><div style="height:10px; width: 1px"/></div><p>You can use either<a id="id656" class="indexterm"/> one of the preceding command lines, depending on the platform.</p></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec110"/>How it works…</h2></div></div></div><p>The core of this app is mainly in the JavaScript code—<code class="literal">home.ts</code>. In order to use the plugin object, you should declare it on top, as shown:</p><div class="informalexample"><pre class="programlisting">import { GoogleMap, GoogleMapsEvent, GoogleMapsLatLng,GoogleMapsMarkerOptions, GoogleMapsMarker, CameraPosition } from 'ionic-native';</pre></div><p>While it might seem that there are a lot of moving parts, the basic flow is very simple, as listed:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Whenever<a id="id657" class="indexterm"/> Ionic and Cordova are ready, trigger <code class="literal">platform.ready().then</code> to initialize the map by calling <code class="literal">showMap()</code> in the constructor of the <code class="literal">HomePage</code>.</li><li class="listitem">When a user clicks on the button, the app will call <code class="literal">getMyLocation</code> to get the location data.</li><li class="listitem">The data will be used to create the marker and move the map's camera to center on that location.</li></ol><div style="height:10px; width: 1px"/></div><p>It's important to know that <code class="literal">plugin.google.maps.Map.getMap</code> does take some time to process, and it will trigger a <span class="emphasis"><em>ready</em></span> event once it has successfully created the map. That's why you need to add an <a id="id658" class="indexterm"/>event listener for <code class="literal">plugin.google.maps.event.MAP_READY</code>. This example does not do anything right after the map is ready, but later, you could add more processing functions, such as jumping to the <a id="id659" class="indexterm"/>current location automatically or adding more markers on top of the map.</p><p>When the user <a id="id660" class="indexterm"/>clicks on the <code class="literal">PICK ME UP</code> button, it will trigger the <code class="literal">getMyLocation()</code> method. The location object returned will contain the latitude (<code class="literal">location.latLng.lat</code>) and longitude (<code class="literal">location.latLng.lng</code>). To move the camera anywhere, just call <code class="literal">map.moveCamera</code> by passing the location coordinate (<code class="literal">location.latLng</code>). To add a marker, call <code class="literal">map.addMarker</code> with the position and title as HTML.</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec111"/>There's more…</h2></div></div></div><p>The Cordova Google Maps plugin has many more features, such as the following ones:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Showing an InfoWindow</li><li class="listitem">Adding a marker with multiple lines</li><li class="listitem">Modifying icon</li><li class="listitem">Text styling</li><li class="listitem">Base64-encoded icons</li><li class="listitem">Clicking on a marker</li><li class="listitem">Clicking on an InfoWindow</li><li class="listitem">Creating a draggable marker</li><li class="listitem">Dragging events</li><li class="listitem">Creating a flat marker</li></ul></div><p>Since you cannot pop up a <code class="literal">div</code> on top of native Google Maps, the marker features are very handy. Some additional scenarios are as listed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Touch a marker and go to a page</strong></span>: You just need to listen to the <code class="literal">plugin.google.maps.event.MARKER_CLICK</code> event and do whatever is needed in the callback function.</li><li class="listitem"><span class="strong"><strong>Show an avatar/profile image as a marker</strong></span>: The <code class="literal">addMarker</code> does take the Base64 image string. Thus, you can pass something like this in the argument title—<code class="literal">canvas.toDataURL()</code>.</li></ul></div><p>Note that Google has <a id="id661" class="indexterm"/>a quota on free API usage. For example, you cannot exceed one request per second <a id="id662" class="indexterm"/>per use, and you can only have a couple of thousand requests per day. This quota changes all the time, but it's important to know about it. In any case, if you have problems with your key, you have to go back to the <span class="strong"><strong>Credentials</strong></span> page<a id="id663" class="indexterm"/> and regenerate the key. In order to change the key manually in your app, you have to edit <code class="literal">`/plugins/ios.json`</code>. Look for the following two places:</p><div class="informalexample"><pre class="programlisting">"*-Info.plist": {
  "parents": {
    "Google Maps API Key": [
      {
        "xml": "&lt;string&gt;YOUR_IOS_API_KEY_IS_HERE&lt;/string&gt;",
        "count": 1
      }
    ]
  }
}</pre></div><p>Along with the following code:</p><div class="informalexample"><pre class="programlisting">"plugin.google.maps": {
  "API_KEY_FOR_IOS": "YOUR_IOS_API_KEY_IS_HERE",
  "PACKAGE_NAME": "com.ionicframework.starter"
}</pre></div><p>You just need to edit the <code class="literal">YOUR_IOS_API_KEY_IS_HERE</code> line and replace it with your new key.</p><p>There are a lot of ways<a id="id664" class="indexterm"/> to work with Google Maps. You can visit<a id="id665" class="indexterm"/> the GitHub page of the Google Maps plugin to learn more, at <a class="ulink" href="https://github.com/mapsplugin/cordova-plugin-googlemaps">https://github.com/mapsplugin/cordova-plugin-googlemaps</a>.</p></div></div></body></html>