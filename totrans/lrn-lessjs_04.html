<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;4.&#xA0;Working with Variables, Mixins, and Functions"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04" class="calibre1"/>Chapter 4. Working with Variables, Mixins, and Functions</h1></div></div></div><p class="calibre7">So far in this book, we've built up the basics of what will become our development toolkit for working with Less and taken a whistle-stop tour through some of the syntax and concepts that are associated with Less as a CSS preprocessor. I am sure some well-known actor once said in a film somewhere, "It's time...."</p><p class="calibre7">Yes, it's time to get stuck with using Less! However, hold on; this chapter says it's about working with variables, functions, and the like; surely, this means we're developing in programming code, right?</p><p class="calibre7">Wrong. Don't worry, my friends; granted, we will look at functions, but they are nothing like the functions you might see when developing using languages such as C# or Visual Basic. Indeed, the only similarity is the name—as we will see, functions within the world of Less are more akin to using a scientific calculator than complicated code.</p><p class="calibre7">This is just a small part of what we will cover. Throughout this chapter, we will look at some of the building blocks of Less, including:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Creating and scoping variables</li><li class="listitem">Developing simple and parametric mixins</li><li class="listitem">Using Less functions</li><li class="listitem">Using prebuilt libraries</li></ul></div><p class="calibre7">Intrigued? Let's get started...</p></div>

<div class="book" title="Chapter&#xA0;4.&#xA0;Working with Variables, Mixins, and Functions">
<div class="book" title="Discovering variables in Less"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch04lvl1sec35" class="calibre1"/>Discovering variables in Less</h1></div></div></div><p class="calibre7">As with<a id="id265" class="calibre1"/> all good<a id="id266" class="calibre1"/> things, we must start somewhere—it seems like an opportune moment to ask ourselves a question: for those of you who are already familiar with the basics of programming, when is a variable not a variable? It's a constant—but hold on, this section is about variables, right...? If this seemed like double Dutch to you, then don't worry, let me explain.</p><p class="calibre7">Variables in Less are very much like the variables in most programming or scripting languages—they act as a placeholder for a value. Consider the following code:</p><div class="informalexample"><pre class="programlisting">#somediv { width: 200px; height: 200px; }</pre></div><p class="calibre7">Instead of the previous code we could write this:</p><div class="informalexample"><pre class="programlisting">@width: 200px;
@height: 200px;

#somediv { width: @width; height: @height; }</pre></div><p class="calibre7">This code<a id="id267" class="calibre1"/> will produce the same result.</p><p class="calibre7">You<a id="id268" class="calibre1"/> might ask yourself though, "Why write double the code for the same result?" Surely, we can simply use the first method, right?</p><p class="calibre7">Yes and no—on its own, this example isn't actually that effective. However—and this is where the big difference lies when using Less—it comes into its own when you are using the same rule to style multiple items of the same type, with the same effect.</p><p class="calibre7">If we had the need to style a number of buttons throughout a site, for example, then we would normally set the style either inline or using classes. This is likely to require updating of styles at several different places in our style sheet, if we need to make a change; this is time-consuming and prone to errors!</p><p class="calibre7">Instead, we set up variables at the start of our Less styling, which are used throughout our code. This means that with a single stroke, we can automatically update all the instances of a particular value; this can be a real timesaver, particularly if a client is unsure what they want to see!</p><p class="calibre7">The key to setting up variables is planning; with a little care and forethought, we can set up our variables at the head of the style sheet and then use them as appropriate throughout our Less code. To see what I mean, let's put this into practice with a simple example.</p></div></div>

<div class="book" title="Chapter&#xA0;4.&#xA0;Working with Variables, Mixins, and Functions">
<div class="book" title="Discovering variables in Less">
<div class="book" title="Creating Polaroid images"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch04lvl2sec34" class="calibre1"/>Creating Polaroid images</h2></div></div></div><p class="calibre7">In the first <a id="id269" class="calibre1"/>example of this chapter, we're going<a id="id270" class="calibre1"/> to use Less to create the tried-and-trusted <span class="strong"><strong class="calibre8">Polaroid effect</strong></span>, as<a id="id271" class="calibre1"/> developed by the Canadian developer Nick La (<a class="calibre1" href="http://www.webdesignerwall.com">http://www.webdesignerwall.com</a>), and apply it to a number of images, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00040.jpeg" alt="Creating Polaroid images" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">The beauty<a id="id272" class="calibre1"/> of this is that there is no need for <a id="id273" class="calibre1"/>any JavaScript or jQuery in our code; it will use pure Less, which we will compile into valid CSS.</p><p class="calibre7">For the purpose of this book, it is assumed that we will be using Sublime Text that has been configured to automatically compile Less files to valid CSS, as we saw in <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre9">Building a Less Development Toolkit</em></span>.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note16" class="calibre1"/>Note</h3><p class="calibre7">If you are using a different means to compile the Less code, then you will need to adjust the steps accordingly.</p></div><p class="calibre7">In a copy of the code download that accompanies this book, extract a copy of <code class="email">variables.html</code>—we will use this as the basis for our Polaroid image effect.</p><p class="calibre7">With our framework in place, let's add some styling. In a separate file, let's start adding in the Less styles, beginning with the variables that will define our colors:</p><div class="informalexample"><pre class="programlisting">@dark-brown: #cac09f;
@light-grayish-yellow: #fdf8e4;
@dark-grayish-yellow: #787568;
@image-width: 194px;

@caption-text: ' ';</pre></div><p class="calibre7">Now that we have created our variables, it's time to use them; let's begin by styling each list item, to turn them into the container for each image:</p><div class="informalexample"><pre class="programlisting">li { width: <span class="strong"><strong class="calibre8">@image-width</strong></span>; padding: 5px; margin: 15px 10px; border: 1px solid <span class="strong"><strong class="calibre8">@dark-brown</strong></span>; background: <span class="strong"><strong class="calibre8">@light-grayish-yellow</strong></span>; text-align: center; float: left; list-style: none outside none; border-radius: 4px; box-shadow: inset 0 1px rgba(255,255,255,.8), 0 1px 2px rgba(0,0,0,.2); }</pre></div><p class="calibre7">We can now turn our attention to styling the contents of each Polaroid; let's begin by setting the main images to appear within each container, and not displaced to right:</p><div class="informalexample"><pre class="programlisting">figure { position: relative; margin: 0; }</pre></div><p class="calibre7">Next comes the addition of each flower image, along with its overlay effect:</p><div class="informalexample"><pre class="programlisting">figure:before { position: absolute; content: <span class="strong"><strong class="calibre8">@caption-text</strong></span>; top: 0; left: 0; width: 100%; height: 100%; background: url(../img/overlay.png) no-repeat; border: none; }</pre></div><p class="calibre7">Finally, let's add the styling for each image caption:</p><div class="informalexample"><pre class="programlisting">figcaption { font: 100%/120% Handlee, Arial, Helvetica, sans-serif; color: <span class="strong"><strong class="calibre8">@dark-grayish-yellow</strong></span>; width: <span class="strong"><strong class="calibre8">@image-width</strong></span>; }</pre></div><p class="calibre7">Save the <a id="id274" class="calibre1"/>file as <code class="email">variables.less</code>. Sublime Text <a id="id275" class="calibre1"/>will automatically compile this into a valid CSS file, although for the purpose of this demo, we will compile the Less code dynamically as it is not very complex.</p><p class="calibre7">The keen-eyed among you will notice that we are using a nonstandard font for the caption—this is the Handlee font, available from Google Fonts. To ensure that this works as expected, add this line immediately after the <code class="email">&lt;title&gt;</code> tag in <code class="email">variables.html</code>:</p><div class="informalexample"><pre class="programlisting">&lt;link href='http://fonts.googleapis.com/css?family=Handlee' rel='stylesheet' type='text/css'&gt;</pre></div><p class="calibre7">If you preview the results in a browser, you will see something similar to this:</p><div class="mediaobject"><img src="../images/00041.jpeg" alt="Creating Polaroid images" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In our example, we've created a number of variables to handle the colors being used; instead of displaying hex codes throughout our code, which aren't easy to understand, we can use names, such as <code class="email">@dark-brown</code>, which are easier to understand:</p><div class="informalexample"><pre class="programlisting">@dark-brown: #cac09f;
@light-grayish-yellow: #fdf8e4;
@dark-grayish-yellow: #787568;
@image-width: 194px;</pre></div><p class="calibre7">We can also use variables to define text, such as:</p><div class="informalexample"><pre class="programlisting">@caption-text: ' ';</pre></div><p class="calibre7">It is important to note that while using variables to define colors is the most common, it is by no means the only use for variables. We can also use variables to define strings, as we have done here, or even include them in URLs:</p><div class="informalexample"><pre class="programlisting">// Variables
@images: "../img";

// Usage
body { color: #444; background: url("@{images}/white-sand.png");}</pre></div><p class="calibre7">This will compile to:</p><div class="informalexample"><pre class="programlisting">body { color: #444; background: url("../img/white-sand.png"); }</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note17" class="calibre1"/>Note</h3><p class="calibre7">It is worth<a id="id276" class="calibre1"/> reading through the variable examples on the main Less site (<a class="calibre1" href="http://less.github.io/features/#variables-feature">http://less.github.io/features/#variables-feature</a>).</p></div><p class="calibre7">In our<a id="id277" class="calibre1"/> example, we compiled our styles dynamically; so, Less <a id="id278" class="calibre1"/>will automatically substitute every instance of each variable name for the appropriate value throughout our code. At this point, we could easily substitute the Less file for the compiled CSS file—it will produce the same effect. This is something we should do for a production environment; we should also go one step further and minimize the code to ensure that bandwidth usage is kept to a minimum.</p></div></div></div>

<div class="book" title="Chapter&#xA0;4.&#xA0;Working with Variables, Mixins, and Functions">
<div class="book" title="Discovering variables in Less">
<div class="book" title="Loading variables and setting the scope"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch04lvl2sec35" class="calibre1"/>Loading variables and setting the scope</h2></div></div></div><p class="calibre7">When setting<a id="id279" class="calibre1"/> and using variables, there is one key element<a id="id280" class="calibre1"/> that we need to be aware of: setting variable<a id="id281" class="calibre1"/> scope when loading variables in Less.</p><p class="calibre7">Variables in Less are <span class="strong"><strong class="calibre8">lazy-loaded</strong></span>, which means they don't have to be declared before being used. If we have declared an instance of a variable, then redeclare it with a new value. Less will always use the last definition of the variable, searching upwards from the point where it is called. Consider this:</p><div class="informalexample"><pre class="programlisting">@var: 0;
.style1 {
  @var: 1;
  .style {
    @var: 2;
    three: @var;
    @var: 3;
  }
  one: @var;
}</pre></div><p class="calibre7">In this instance, you might expect to see <code class="email">.style1</code> contain a rule of <code class="email">one: 3</code>. Instead, it will compile to <code class="email">one: 1</code>, as the <code class="email">@var: 3</code> is contained in the <code class="email">.class1</code> class rule, which is not within the same scope. It becomes even more important that variables are correctly assigned at<a id="id282" class="calibre1"/> the right point in our Less code, as we don't have to <a id="id283" class="calibre1"/>declare them upfront before using them. As an example, consider<a id="id284" class="calibre1"/> the following two methods of writing the same code, both of which will compile to equally valid CSS. Consider the first method:</p><div class="informalexample"><pre class="programlisting">lazy-eval { width: @var; }

@var: @a;
@a: 9%;</pre></div><p class="calibre7">The other method of writing the code is as follows:</p><div class="informalexample"><pre class="programlisting">.lazy-eval-scope { width: @var; @a: 9%; }

@var: @a;
@a: 100%;</pre></div><p class="calibre7">Both will compile to:</p><div class="informalexample"><pre class="programlisting">.lazy-eval-scope { width: 9%; }</pre></div><p class="calibre7">See what I mean? The first method is more concise—there is no need to use the second method if it produces the same result! On this note, let's change tack and focus on how we can remove repetition in our Less code by introducing the use of mixins.</p></div></div></div>
<div class="book" title="Exploring mixins"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec36" class="calibre1"/>Exploring mixins</h1></div></div></div><p class="calibre7">When writing <a id="id285" class="calibre1"/>code, how many times have you written a similar code, but for different projects? Ever wondered if you could, with a little change in the writing style, convert to using prebuilt blocks of CSS that you can drop in a project at a moment's notice?</p><p class="calibre7">Sure, you could start to create your own library of code—this would work perfectly well. However, it suffers from at least one potential drawback: you will very likely have to manually modify any stored code to fit the needs of a new project. While this will work, you might find yourself expending more time updating code than if it had been written from scratch!</p><p class="calibre7">What if I said you could still maintain a code library, but you don't have to keep modifying each block of library code that you reuse? It is possible—with the use of Less' mixin functionality.</p><p class="calibre7">Mixins are blocks of code that do as the name suggests—they can be mixed-in to your project code and called when required. They can even be moved to a library style sheet, which you can include in your projects—the beauty is that while you may have a library style sheet that is huge, only those styles that are actively used in the code are called and compiled in the resulting CSS style sheet.</p><p class="calibre7">The uses<a id="id286" class="calibre1"/> for mixins are as wide as your imagination—it can be as simple as defining a block of static code to call in your CSS, all the way through to passing specific values as parameters to mixins, otherwise known as parametric mixins. To see how mixins can work, let's begin by creating a simple web form using normal CSS.</p></div>
<div class="book" title="Creating a web form"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec37" class="calibre1"/>Creating a web form</h1></div></div></div><p class="calibre7">If you've spent any time looking at websites—and in this modern day of technology, it would be difficult not to—then you will have come across, or needed to use, the ubiquitous contact form. They pop up everywhere—you could almost take the cynical view that people use them as a means of avoiding human contact!</p><p class="calibre7">Nonetheless, they <a id="id287" class="calibre1"/>still serve a valid purpose. Over the next few sections, we're going to develop a simple contact form and enhance it using Less mixins to illustrate how they can be used to reduce the amount of code that we need to write.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note18" class="calibre1"/>Note</h3><p class="calibre7">For this example, you will need to avail yourself of a copy of the code download that accompanies this book, as we will be using content from it during the exercise.</p></div><p class="calibre7">Start by opening a copy of <code class="email">project.html</code>, which we created earlier, and then updating the <code class="email">&lt;head&gt;</code> section, as follows:</p><div class="informalexample"><pre class="programlisting">  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Demo: Mixins&lt;/title&gt;
    &lt;link rel="stylesheet" href="css/buttons.css"&gt;
  &lt;/head&gt;</pre></div><p class="calibre7">Next, add the following markup in between the <code class="email">&lt;body&gt;</code> tags:</p><div class="informalexample"><pre class="programlisting">  &lt;body&gt;
    &lt;form id="submitfrm" action="demo_form.asp"&gt;
  &lt;label for="fname"&gt;First name:&lt;/label&gt;
  &lt;input type="text" name="fname"&gt;&lt;br&gt;
  &lt;label for="lname"&gt;Last name:&lt;/label&gt;
  &lt;input type="text" name="lname"&gt;&lt;br&gt;
  &lt;input class="button red" id="submitbtn" type="submit" value="Submit"&gt;
    &lt;/form&gt;
  &lt;/body&gt;</pre></div><p class="calibre7">Save this as <code class="email">mixins.html</code>—a copy of this file is also available in the code download. From the code download, retrieve a copy of the <code class="email">buttons.css</code> file that is in the <code class="email">css</code> subfolder, in<a id="id288" class="calibre1"/> the code folder for this chapter. Space constraints mean all 59 lines of the file can't be reproduced in full here, but once they are saved in the same folder, we can preview the results:</p><div class="mediaobject"><img src="../images/00042.jpeg" alt="Creating a web form" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">As we can see from the CSS styles, there is definitely a fair amount of repetition—even for an example as simple as ours! Let's change this by introducing mixins in our code.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Adding basic mixins"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec38" class="calibre1"/>Adding basic mixins</h1></div></div></div><p class="calibre7">We can start by <a id="id289" class="calibre1"/>adding in two simple mixins to our code—let's begin by editing a copy of <code class="email">buttons.css</code> and then adding the following code at the start of the file:</p><div class="informalexample"><pre class="programlisting">.shadow() { box-shadow: 0 1px 2px rgba(0,0,0,.2); text-shadow: 0 1px 1px rgba(0,0,0,.3); }

.formfont { font-size: 14px; font-family: Arial, Helvetica, sans-serif; }</pre></div><p class="calibre7">Next, we can remove the original code from the <code class="email">.button</code> style block, as this is no longer needed—it will be replaced by the names of our three simple mixins:</p><div class="informalexample"><pre class="programlisting">.button {
  .shadow;
  .formfont;
  display: inline-block;
  outline: none;
  cursor: pointer;
  text-align: center;
  text-decoration: none;
  padding: .5em 2em .55em;
  border-radius: .5em;
}</pre></div><p class="calibre7">Save this as <code class="email">mixins1.less</code>; we can then remove the <code class="email">buttons.css</code> link that is already in the code. Don't forget to add in a link for our Less file, within <code class="email">mixins1.html</code>:</p><div class="informalexample"><pre class="programlisting">    &lt;link rel="stylesheet" type="text/less" href="css/mixins1.less"&gt;</pre></div><p class="calibre7">Save the HTML file as <code class="email">mixins1.html</code>—if we preview the results in a browser, we should not see any difference in the outcome, but we can rest assured with the knowledge that our three styles can be reused at any time in our code.</p><p class="calibre7">In our <a id="id290" class="calibre1"/>example, we've made a simple change to hive off styles in the blocks that we can reuse—in this instance, our three mixins could be called by any of the buttons used on a site, but they need to be of a similar style to ours. In each mixin, we've grouped together the styles that complement each other, such as <code class="email">font-family</code> and <code class="email">font-size</code>. There are no hard and fast rules about what should and shouldn't be grouped; it all comes down to what makes sense and helps reduce the amount of code we need to use.</p><p class="calibre7">We can further develop mixins by passing in parameters—this makes them more useful, as we can use the same code to produce different results, depending on our needs. However, when working with mixins, there are a couple of <span class="strong"><em class="calibre9">gotchas</em></span> that we need to be aware of—the first one is code repetition.</p></div>

<div class="book" title="Adding basic mixins">
<div class="book" title="Hiding the original mixin"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch04lvl2sec36" class="calibre1"/>Hiding the original mixin</h2></div></div></div><p class="calibre7">When <a id="id291" class="calibre1"/>working with mixins, Less will compile (and display) both<a id="id292" class="calibre1"/> the mixin and the calling code so that we end up with duplicated code in the CSS style sheet. This isn't desirable, as it will make the style sheet larger than it is necessary and harder to debug in the event of any issue.</p><p class="calibre7">To get around this, we need to make a small modification to our existing styles—in the <code class="email">mixin1.less</code> file, alter both the Less mixins, as follows:</p><div class="informalexample"><pre class="programlisting">.shadow<span class="strong"><strong class="calibre8">()</strong></span> {
  box-shadow: 0 1px 2px rgba(0,0,0,.2);
  text-shadow: 0 1px 1px rgba(0,0,0,.3);
}

.formfont<span class="strong"><strong class="calibre8">()</strong></span> {
  font-size: 14px;
  font-family: Arial, Helvetica, sans-serif;
}</pre></div><p class="calibre7">Save the file as you normally do—Sublime Text will recompile the Less file. We can prove this by examining the code in Firebug—the following screenshot shows the effect of not using <code class="email">()</code> in our mixins:</p><div class="mediaobject"><img src="../images/00043.jpeg" alt="Hiding the original mixin" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">When the<a id="id293" class="calibre1"/> code has been compiled, you can clearly see that the<a id="id294" class="calibre1"/> styles have been removed—they are still present but are incorporated into the CSS style rules and not as separate mixins:</p><div class="mediaobject"><img src="../images/00044.jpeg" alt="Hiding the original mixin" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div class="book" title="Adding basic mixins">
<div class="book" title="Using the !important keyword"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch04lvl2sec37" class="calibre1"/>Using the !important keyword</h2></div></div></div><p class="calibre7">When <a id="id295" class="calibre1"/>working with mixins, we can also specify <a id="id296" class="calibre1"/>the <code class="email">!important</code> attribute, in the same way as we might do with normal CSS. All we need to do is to add it immediately after any style that must take precedence over subsequent definitions of the same rule:</p><div class="informalexample"><pre class="programlisting">.mixin (@a: 0) { border: @a; boxer: @a; }
.unimportant { .mixin(1); }
.important { .mixin(2) !important; }</pre></div><p class="calibre7">This will be compiled by Less as follows:</p><div class="informalexample"><pre class="programlisting">.unimportant { border: 1; boxer: 1; }
.important { border: 2 !important; boxer: 2 !important; }</pre></div><p class="calibre7">As the second style rule has been assigned the <code class="email">!important</code> attribute, this will take precedence over the first rule. The <code class="email">!important</code> override should be used with care though—it has gained something of a bad reputation since its introduction in CSS1 as it has often been misused. When used with care, it can perform an important function—although some might say that if you need to rely on it, then it is worth checking your CSS to ensure that you can't achieve the same results without it!</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note19" class="calibre1"/>Note</h3><p class="calibre7">For a good explanation of the role of the <code class="email">!important</code> tag in CSS as a whole, you might <a id="id297" class="calibre1"/>want to refer to Ian Devlin's article on how to best use this attribute, which you can find at <a class="calibre1" href="http://www.iandevlin.com/blog/2013/05/css/using-important-in-your-media-queries">http://www.iandevlin.com/blog/2013/05/css/using-important-in-your-media-queries</a>.</p></div><p class="calibre7">Let's move on and take a look at how you can make mixins more powerful by passing attributes.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Developing parametric mixins"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec39" class="calibre1"/>Developing parametric mixins</h1></div></div></div><p class="calibre7">So far, we <a id="id298" class="calibre1"/>have examined how you can use mixins to create blocks of code that can easily be reused throughout your style sheets. On principle, this works great. However, what if you found yourself wanting to reuse the same block of code but couldn't, as the values were different?</p><p class="calibre7">Well, this is possible with Less; we've already covered how we can create mixins as reusable blocks of code. Let's take this a step further and introduce the use of parameters—here, we can pass values between the main Less file and individual mixins. When compiled, Less will use the appropriate values that are being passed to produce the desired CSS. Let's see this in action by making some changes to our simple form, which we created earlier in this chapter.</p><p class="calibre7">Crack open a new file and add the following mixins:</p><div class="informalexample"><pre class="programlisting">.background (@bkgrd) { background: @bkgrd; }

.border-radius(@radius) {
  -webkit-border-radius: @radius;
     -moz-border-radius: @radius;
          border-radius: @radius;
}

.box-shadow (@x: 0; @y: 0; @blur: 1px; @color: #000) {
  -webkit-box-shadow: @x @y @blur @color;
     -moz-box-shadow: @x @y @blur @color;
          box-shadow: @x @y @blur @color;
}

.formfont() {
  font-size: 14px;
  font-family: Arial, Helvetica, sans-serif;
}</pre></div><p class="calibre7">Save the<a id="id299" class="calibre1"/> file as <code class="email">mixinlibrary.less</code>. Next, let's modify a copy of <code class="email">mixins1.less</code>, as there are some styles contained in it that are now redundant. In <code class="email">mixins1.less</code>, make the following changes to the <code class="email">.button</code> mixin, as highlighted:</p><div class="informalexample"><pre class="programlisting">.button {
  .formfont;
  .border-radius(.5em);
  .box-shadow(1px; 2px; rgba(0,0,0,.2));
  display: inline-block;
  outline: none;
  cursor: pointer;
  text-align: center;
  text-decoration: none;
  padding: .5em 2em .55em;
}</pre></div><p class="calibre7">At the top of <code class="email">mixins1.less</code>, we need to link in our <code class="email">mixinlibrary.less</code> file; otherwise, the compilation will fail with errors—to fix this, add the following line at the top of <code class="email">mixins1.less</code>:</p><div class="informalexample"><pre class="programlisting">@import "mixinlibrary.less";</pre></div><p class="calibre7">We need to make a few more changes; in <code class="email">mixins1.less</code>, we have three style rules for the <code class="email">.red</code> class, namely <code class="email">.red</code>, <code class="email">.red:hover</code>, and <code class="email">.red:active</code>. Within each, we need to change the rule for <code class="email">.background-color</code> to use the Less mixin we've included in our mixin library. So, let's go ahead and make the following changes, as highlighted:</p><div class="informalexample"><pre class="programlisting">.red {
<span class="strong"><strong class="calibre8">  .background(#ed1c24);</strong></span>

.red:hover {
<span class="strong"><strong class="calibre8">  .background(#f14b52);</strong></span>

.red:hover {
<span class="strong"><strong class="calibre8">  .background(#f14b52);</strong></span>
</pre></div><p class="calibre7">Save the<a id="id300" class="calibre1"/> file as <code class="email">parametric1.less</code>—don't forget to update <code class="email">parametric1.html</code> with a new link for the Less style sheet! If we preview the results in a browser, we can see that there has not been any change to our design (which we would expect):</p><div class="mediaobject"><img src="../images/00045.jpeg" alt="Developing parametric mixins" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">However, on closer inspection using a DOM inspector, such as Firebug (under the <span class="strong"><strong class="calibre8">Console</strong></span> section), we can see that our mixins from <code class="email">mixinslibrary.less</code> have been imported successfully:</p><div class="mediaobject"><img src="../images/00046.jpeg" alt="Developing parametric mixins" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">We covered a couple of useful techniques in this exercise—it's worth taking a moment to go through this in some detail.</p><p class="calibre7">In previous exercises, we used mixins by defining them as static blocks of code that we can drop in at a moment's notice. This is great, but while the code blocks are static, they are limited to what's contained within each block; we will need to modify them to use different values if required, which makes them less useful.</p><p class="calibre7">Instead, we've incorporated parameters, such as this example:</p><div class="informalexample"><pre class="programlisting">.background(#ed1c24);</pre></div><p class="calibre7">These are<a id="id301" class="calibre1"/> passed from the calling statement to the mixin and used to produce different results, depending on the values being passed. When compiled using the mixin in <code class="email">mixinlibrary.less</code>, this will produce the following CSS:</p><div class="informalexample"><pre class="programlisting">background: #ed1c24;</pre></div><p class="calibre7">This makes them infinitely more useful—one mixin can now serve a variety of different uses, depending on which values are passed to it.</p><p class="calibre7">Now, did the keen-eyed among you notice that I said we introduced a couple of useful techniques here? Well, the second one is the use of the <code class="email">@import</code> statement. It is worth getting to know this keyword well, as it is a key part of Less. It allows you to break down long, complicated Less files into smaller, more manageable ones.</p><p class="calibre7">Hold on, I hear you ask: doesn't this mean more CSS files? No, that's the beauty of Less; it doesn't matter how many Less files you create, you will always end up with one compiled CSS file. Ideally, we would limit the number in practice, for practical purposes (7-10 is a good guideline, to allow uses such as WordPress). If you find yourself using more than 10, then I would suggest that you revisit your page design! We will return to importing Less and CSS files later in this chapter, in the <span class="strong"><em class="calibre9">Using external libraries</em></span> section and also in <a class="calibre1" title="Chapter 5. Inheritance, Overriding, and Nesting in Less" href="part0050_split_000.html#page">Chapter 5</a>, <span class="strong"><em class="calibre9">Inheritance, Overriding, and Nesting in Less</em></span>.</p><p class="calibre7">Let's move on and take this a step further; we introduced the use of multiple parameters with the use of the <code class="email">.box-shadow</code> mixin, but it would be worth taking out time to explore these further, as we can make more useful changes to our page's Less design.</p></div>

<div class="book" title="Developing parametric mixins">
<div class="book" title="Passing multiple parameters"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch04lvl2sec38" class="calibre1"/>Passing multiple parameters</h2></div></div></div><p class="calibre7">So far, we've <a id="id302" class="calibre1"/>seen how you can pass a single <a id="id303" class="calibre1"/>parameter to a mixin, such as the radius size when using the border-radius rule. This is a great start, but as always, we can do more—how about passing in <span class="strong"><em class="calibre9">multiple</em></span> parameters?</p><p class="calibre7">This opens up a world of possibilities, as we can widen the scope of what can be passed to our mixins. For example, if we're creating gradients, then we will have to hardcode color values in our mixins, which doesn't make them very flexible! Instead, if we use parametric mixins, then this allows us to pass colors as parameters to the mixin, thereby making the mixin far more flexible and useful.</p><p class="calibre7">Let's take a look at how this works in practice, by updating our existing code for <code class="email">linear-gradient</code> (and the associated vendor prefixes), to use a Less mixin.</p><p class="calibre7">In a copy of <code class="email">mixinlibrary.less</code>, add the following mixin at the end of the file:</p><div class="informalexample"><pre class="programlisting">.button (@color1, @color2, @color3) {
  background: -moz-linear-gradient(top, @color1 0%, @color2 6%, @color3 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, @color1), color-stop(6%, @color2), color-stop(100%, @color3));
  background: -webkit-linear-gradient(top, @color1 0%, @color2 6%, @color3 100%);
  background: -o-linear-gradient(top, @color1 0%, @color2 6%, @color3 100%);
  background: -ms-linear-gradient(top, @color1 0%, @color2 6%, @color3 100%);
  background: linear-gradient(to bottom, @color1 0%, @color2 6%, @color3 100%);  
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='@middle', endColorstr='@stop', GradientType=0);
  border: 1px solid #980c10;  
}</pre></div><p class="calibre7">We now <a id="id304" class="calibre1"/>have redundant code in our Less<a id="id305" class="calibre1"/> file; so, in a copy of <code class="email">parametric1.less</code>, remove the six background statements in each block, along with the filter and border statements. In their place, add the following, as highlighted:</p><div class="informalexample"><pre class="programlisting">.red {
  .background(#ed1c24);
  <span class="strong"><strong class="calibre8">.button(#ed1c24, #e93a3f, #aa1317);</strong></span>
}

.red:hover {
  .background(#f14b52);
  <span class="strong"><strong class="calibre8">.button(#f14b52, #ee686c, #d8181d);</strong></span>
}

.red:active {
  .background(#c61017);
<span class="strong"><strong class="calibre8">  .button(#c61017, #d8181e, #7c0e11);</strong></span>
}</pre></div><p class="calibre7">Save the file as <code class="email">parametric2.less</code>—don't forget to update the <code class="email">parametric.html</code> file with the new name of our Less file.</p><p class="calibre7">In this exercise, we continued with the theme of using parametric mixins, but this time, we called the same mixin with different parameters in each instance. In theory, it doesn't matter how many parameters are passed as long as Less can match them with valid inputs in each mixin. However, if you end up with more than 4-5 parameters being passed, then it would be a good point to reassess your mixin and perhaps see if it should be rewritten!</p><p class="calibre7">If we <a id="id306" class="calibre1"/>preview the results in a browser, we <a id="id307" class="calibre1"/>should not expect to see any visible results in our form, but we can see the change from within the HTML tab in Firebug:</p><div class="mediaobject"><img src="../images/00047.jpeg" alt="Passing multiple parameters" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div class="book" title="Developing parametric mixins">
<div class="book" title="Applying conditions to mixins"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch04lvl2sec39" class="calibre1"/>Applying conditions to mixins</h2></div></div></div><p class="calibre7">When using <a id="id308" class="calibre1"/>static or parametric mixins, there is <a id="id309" class="calibre1"/>one thing that we should note—the mixin will be applied, no matter what the circumstances are and provided that any parameters passed to a mixin can be correctly matched and processed.</p><p class="calibre7">This isn't always a good thing; fortunately, we can fix this by attaching conditions to mixins so that they only execute if they can fulfill the condition(s) attached. These are known as <span class="strong"><strong class="calibre8">guarded mixins</strong></span>—we will cover these in more detail in <a class="calibre1" title="Chapter 8. Media Queries with Less" href="part0074_split_000.html#page">Chapter 8</a>, <span class="strong"><em class="calibre9">Media Queries with Less</em></span>, where we will see how Less can be put to good use when producing responsive websites.</p></div></div>

<div class="book" title="Developing parametric mixins">
<div class="book" title="Using special keywords"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch04lvl2sec40" class="calibre1"/>Using special keywords</h2></div></div></div><p class="calibre7">If you <a id="id310" class="calibre1"/>spend any time working with mixins, then<a id="id311" class="calibre1"/> there are two useful variables that you will come across at some point in your Less development. They are <code class="email">@arguments</code> and <code class="email">@rest</code>. Let's take a look at how they work, in the context of the <code class="email">.box-shadow</code> mixin we created in the last exercise.</p><p class="calibre7">In the last exercise, we created the <code class="email">.box-shadow</code> mixin to handle our <code class="email">box-shadow</code> styling:</p><div class="informalexample"><pre class="programlisting">.box-shadow (@x: 0; @y: 0; @blur: 1px; @color: #000) {
  -webkit-box-shadow: @x @y @blur @color;
     -moz-box-shadow: @x @y @blur @color;
          box-shadow: @x @y @blur @color;
}</pre></div><p class="calibre7">We referenced this mixin using the following command, which works perfectly well:</p><div class="informalexample"><pre class="programlisting">.box-shadow(1px; 2px; rgba(0,0,0,.2));</pre></div><p class="calibre7">However, if you <a id="id312" class="calibre1"/>don't want to deal with all <a id="id313" class="calibre1"/>of the individual parameters (and particularly if there are a few involved), then you can replace <code class="email">@x @y @blur @color;</code> with the <code class="email">@arguments</code> variable:</p><div class="informalexample"><pre class="programlisting">.box-shadow(@x: 0; @y: 0; @blur: 1px; @color: #000) {
  -webkit-box-shadow: @arguments;
     -moz-box-shadow: @arguments;
          box-shadow: @arguments;
}</pre></div><p class="calibre7">This handles the individual parameters in exactly the same way and produces valid CSS when compiled by Less.</p><p class="calibre7">If, however, you want to alter the number of parameters accepted by a mixin, then you can use Less' ability to reference named variables. Less will automatically match them with the variables in the mixin and produce the appropriate result when compiling the code. For example:</p><div class="informalexample"><pre class="programlisting">.mixin(...) {        // matches 0-N arguments
.mixin() {           // matches exactly 0 arguments
.mixin(@x: 1) {      // matches 0-1 arguments
.mixin(@x: 1; ...) { // matches 0-N arguments
.mixin(@x; ...) {    // matches 1-N arguments</pre></div><p class="calibre7">You can also use the <code class="email">@rest</code> keyword—we first pass different values to any named variable in the parameter list and then use <code class="email">@rest</code> to tell Less to work with the remaining variables as they are now:</p><div class="informalexample"><pre class="programlisting">.mixin(@x; @rest...) {
  // @rest is bound to arguments after @x
  // @arguments is bound to all arguments
}</pre></div><p class="calibre7">These two simple tricks will be of great help when you start working with mixins—there is one trick that we have not covered yet, which is a little more advanced: using mixins as if they were functions. Let's fix this now and see what this means for developing mixins.</p></div></div>
<div class="book" title="Creating mixins as functions"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec40" class="calibre1"/>Creating mixins as functions</h1></div></div></div><p class="calibre7">On our journey through creating and developing mixins, we've seen how you can hive off styles into <a id="id314" class="calibre1"/>groups and vary the output if needed, if it is set to receive <a id="id315" class="calibre1"/>values from the calling statements. We have not covered one area though, which is the use of functions within mixins—let's remedy this and take a brief look at what this means.</p><p class="calibre7">Any variable created inside a mixin is visible to the outside world and can be referenced from the calling statement. This means that within a mixin, we can call another mixin and reference any variable from within the second mixin:</p><div class="informalexample"><pre class="programlisting">.mixin() {
  @width:  50%;
  @height: 100px;
}

.caller {
  .mixin();
  width:  @width;
  height: @height;
}</pre></div><p class="calibre7">The previous code, when compiled, results in:</p><div class="informalexample"><pre class="programlisting">.caller {
  width: 50%;
  height: 100px;
}</pre></div><p class="calibre7">Taking this further, we can use the variables defined within a mixin, as if it were a return value—this applies to any variable that is being called within the mixin:</p><div class="informalexample"><pre class="programlisting">.average(@a, @b) {
  @average: ((@a + @b) / 2);
}

div {
  .average(6px, 30px); // "call" the mixin
  padding: @average; // use its "return" value
}</pre></div><p class="calibre7">The preceding code will result in the following:</p><div class="informalexample"><pre class="programlisting">div { padding: 18px; }</pre></div><p class="calibre7">This is really useful, as it means that we don't have to have a bunch of declarations for variables at the start of our code, but we can convert them into mixins that we can store in a mixin library and reuse in future projects. We will cover this in more detail, as a real-world <a id="id316" class="calibre1"/>example, in the<a id="id317" class="calibre1"/> <span class="strong"><em class="calibre9">Moving calculations to a mixin</em></span> section of this chapter.</p></div>
<div class="book" title="Using external libraries"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec41" class="calibre1"/>Using external libraries</h1></div></div></div><p class="calibre7">Until now, we've <a id="id318" class="calibre1"/>developed a number of mixins and referenced them from either our main Less file or from a library file that we've created to store a number of our mixins. This is all good, but—hold on for a minute—one of Less' core concepts is DRY or Don't Repeat Yourself. While we are creating these mixin library files, we are (in a sense) repeating what other individuals may have already done, by creating—and publishing—their own solution.</p><p class="calibre7">With this in mind, it is worth researching online to see if anyone has already made their own mixin library available for use; there are a number of good libraries you can try, which include:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre8">LESS Elements</strong></span>: This<a id="id319" class="calibre1"/> is available at <a class="calibre1" href="http://www.lesselements.com">http://www.lesselements.com</a></li><li class="listitem"><span class="strong"><strong class="calibre8">LESS Hat 2</strong></span>: This<a id="id320" class="calibre1"/> can be downloaded from <a class="calibre1" href="http://www.lesshat.com">http://www.lesshat.com</a></li><li class="listitem"><span class="strong"><strong class="calibre8">3L</strong></span>: This is<a id="id321" class="calibre1"/> hosted on GitHub at <a class="calibre1" href="http://mateuszkocz.github.io/3l/%E2%80%8E">http://mateuszkocz.github.io/3l/‎</a></li><li class="listitem"><span class="strong"><strong class="calibre8">ClearLess</strong></span>: This <a id="id322" class="calibre1"/>is available at <a class="calibre1" href="https://github.com/clearleft/clearless">https://github.com/clearleft/clearless</a></li></ul></div><p class="calibre7">The Less library available as part of Bootstrap also contains some useful mixins—we will look at this in more detail, in <a class="calibre1" title="Chapter 10. Using Bootstrap with Less" href="part0091_split_000.html#page">Chapter 10</a>, <span class="strong"><em class="calibre9">Using Bootstrap with Less</em></span>.</p><p class="calibre7">There are hundreds more available online—it is worth taking the time to look, as a library may exist that fulfills your need.</p><p class="calibre7">To incorporate the library, it is as easy as adding this line to the head of your Less file:</p><div class="informalexample"><pre class="programlisting">@import &lt;name of library file&gt;</pre></div><p class="calibre7">Call the name of the mixin, including any parameters that are needed. We've already used this earlier in this chapter, in the <span class="strong"><em class="calibre9">Developing parametric mixins</em></span> section—the principles used there apply here too, whether it be for calling in a prebuilt library made by someone else or one of your own creations.</p><p class="calibre7">Enough talk of mixins—let's change the subject and focus on another area of Less, which is the use of functions in our code.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Introducing functions"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec42" class="calibre1"/>Introducing functions</h1></div></div></div><p class="calibre7">Another<a id="id323" class="calibre1"/> useful feature of Less is its ability to work out values that should be used in CSS, as a result of calculating the answers to functions and not merely using static values.</p><p class="calibre7">If you are already familiar with functions in programming, you might think that using functions in Less will involve writing lots of complicated formulae. Before you put your hands up in horror, fear not—it doesn't have to be that complicated! In this section, we're going to take a look at how you can use some simple math functions to automatically calculate values, using operators and the <code class="email">data-uri</code> function as the basis for some examples of the many functions available within Less.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note20" class="calibre1"/>Note</h3><p class="calibre7">You can see the complete list of functions, on the main website at <a class="calibre1" href="http://lesscss.org/functions/">http://lesscss.org/functions/</a>.</p></div></div>

<div class="book" title="Introducing functions">
<div class="book" title="Creating column-based layouts"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch04lvl2sec41" class="calibre1"/>Creating column-based layouts</h2></div></div></div><p class="calibre7">One <a id="id324" class="calibre1"/>of the many tasks that a developer has to<a id="id325" class="calibre1"/> perform is to build the outline framework for a site—this could be one of the hundreds of designs, but it is likely that it will involve the use of columns in some format.</p><p class="calibre7">In some cases, this can be fraught with problems, particularly when dealing with differences between each browser. Thankfully, Less can help here—we can use some of its maths operators to construct a suitable layout with ease. To give you an idea of what can be done, here's a screenshot of the finished article from our next exercise:</p><div class="mediaobject"><img src="../images/00048.jpeg" alt="Creating column-based layouts" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In a copy of the code download that accompanies this book, extract a copy of <code class="email">functions1.html</code>—we will use this as the basis for styling our simple page layout.</p><p class="calibre7">If we preview the results now, the design will look terrible. Let's fix this by adding in the all-important styling rules. In a new file, add the following Less styles:</p><div class="informalexample"><pre class="programlisting">@baseWidth: 800px;
@mainWidth: round(@baseWidth / 1.618);
@sidebarWidth: round(@baseWidth * 0.382);

div { padding: 5px; margin-top: 5px; margin-bottom: 5px; font-family: 'Kite One', sans-serif; }
#container { width: <span class="strong"><strong class="calibre8">@baseWidth</strong></span>; border: 1px solid black; margin-left: auto; margin-right: auto; margin-top: 5%; margin-bottom: 5%; border-radius: 4px; box-shadow: 4px 4px 4px 0px rgba(0, 0, 0, 0.5); }
#title { color: #FFF; font-family: 'Kite One', sans-serif;
font-size: 32px; font-weight: 400; padding-left: 100px; padding-top: 30px; position: absolute; }
#header { height: 150px; font-size: 18px; background-image: url("../img/leaves.jpg"); }
#leftmargin { width: <span class="strong"><strong class="calibre8">@sidebarWidth</strong></span>; border-right: 1px solid #ccc;
float: left; box-sizing: border-box; -moz-box-sizing:border-box;
height: 575px; }
#leftmargin li { list-style: none; }
#leftmargin a { text-decoration: none; }
#leftmargin a:hover { text-decoration: underline; }
#content { width: <span class="strong"><strong class="calibre8">@mainWidth</strong></span>; float: left; box-sizing: -box;
-moz-box-sizing:border-box; height: 575px; padding: 10px; }
#footer { border-top: 1px solid #ccc; clear: both; font-size: 12px; }</pre></div><p class="calibre7">Save <a id="id326" class="calibre1"/>the file as <code class="email">functions.less</code>. Sublime Text will <a id="id327" class="calibre1"/>automatically compile this into a valid CSS file as <code class="email">functions.css</code>. If we preview the results, we should see a simple, yet perfectly acceptable page appear:</p><div class="mediaobject"><img src="../images/00049.jpeg" alt="Creating column-based layouts" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In this example, we've used a number of styles to produce a simple two-column web page. The key to this trick lies in the following code:</p><div class="informalexample"><pre class="programlisting">@baseWidth: 800px;
@mainWidth: round(@baseWidth / 1.618);
@sidebarWidth: round(@baseWidth * 0.382);</pre></div><p class="calibre7">Here, we've set <a id="id328" class="calibre1"/>three variables; the first variable, <code class="email">@basewidth</code>, sets<a id="id329" class="calibre1"/> the overall size of the content container and is crucial for working <a id="id330" class="calibre1"/>out the widths that we <a id="id331" class="calibre1"/>will use for each column. Next, we've set the <code class="email">@mainwidth</code> value, which calculates the value from <code class="email">@basewidth</code>, divided by <code class="email">1.618</code> (or approximately 61 percent)—this gives a value of <code class="email">494px</code>. Lastly, we use the same principle to work out the value for the column—the formula for this becomes <code class="email">800 x 0.382</code>, which gives <code class="email">305.6px</code> or approximately 39 percent of the total width.</p><p class="calibre7">Using this calculation means that we can be sure that the columns will maintain the correct width, irrespective of the size of our container.</p></div></div>

<div class="book" title="Introducing functions">
<div class="book" title="Moving calculations to a mixin"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch04lvl2sec42" class="calibre1"/>Moving calculations to a mixin</h2></div></div></div><p class="calibre7">In the <a id="id332" class="calibre1"/>last example, we used some simple maths to<a id="id333" class="calibre1"/> determine the sizes needed to produce<a id="id334" class="calibre1"/> a two-column layout; this formed the basis of a simple, but useful page layout that could be used to produce any number of websites with relative ease.</p><p class="calibre7">However, there is still a nagging thought that we could do better—what if we could turn our statements into a mixin and use it as if it were a function? Sounds crazy? Well, perhaps not—we covered the basics of how to do this earlier in the chapter, in the <span class="strong"><em class="calibre9">Creating mixins as functions</em></span> section. Let's put some of that theory into practice and see it in action.</p><p class="calibre7">Start by opening a copy of <code class="email">functions.less</code>, which we used to create our Less styling for the page demo earlier. At the top, remove the top three variable statements. Next, add the following mixin immediately below it—this is our replacement for the statements we have just commented out:</p><div class="informalexample"><pre class="programlisting">.divSize (@x) {
  @baseWidth: @x;
  @mainWidth: round(@baseWidth / 1.618);
  @sidebarWidth: round(@baseWidth * 0.382);
}</pre></div><p class="calibre7">We need to adjust the three <code class="email">&lt;div&gt;</code> elements, where we use the variables from within this mixin; so, go ahead and make the following changes, as highlighted:</p><div class="informalexample"><pre class="programlisting">#container {
  <span class="strong"><strong class="calibre8">.divSize(800px);</strong></span>
  width: @baseWidth;

#leftmargin {
  <span class="strong"><strong class="calibre8">.divSize(800px);</strong></span>
  width: @sidebarWidth;

#content {
  <span class="strong"><strong class="calibre8">.divSize(800px);</strong></span>
  width: @mainWidth;</pre></div><p class="calibre7">Save the<a id="id335" class="calibre1"/> changes as <code class="email">functions.less</code>. If you <a id="id336" class="calibre1"/>preview the results in a browser, you should not see any <a id="id337" class="calibre1"/>change to the page visually. However, this gives us the opportunity to hive off the mixin into a mixin library, if we've been creating one—a great example is the <code class="email">mixinlibrary.less</code> file, which we put together earlier in the book. Even though this will, by now, contain a number of mixins that we wouldn't need to use here, Less will only ever pull in those mixins that it needs to use if it encounters a direct call for them as part of the compilation process.</p></div></div>

<div class="book" title="Introducing functions">
<div class="book" title="Working with the data-uri function"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch04lvl2sec43" class="calibre1"/>Working with the data-uri function</h2></div></div></div><p class="calibre7">At this<a id="id338" class="calibre1"/> point, we're going to completely <a id="id339" class="calibre1"/>change tack and look at the other functions available within Less—the use of the <code class="email">data-uri</code> option.</p><p class="calibre7">
<code class="email">Data-uri</code> is a <a id="id340" class="calibre1"/>function available in Less, which inlines a resource to your style sheet; it avoids the need to link to external files by embedding the content directly in your style sheet. Although it may not help with document sizes, it will help reduce the number of HTTP requests from your server; this is one of the key factors that can affect how fast a page loads on the Internet. We will cover more of some of the pitfalls at the end of this section.</p><p class="calibre7">Let's get started with writing some code—there are a few steps involved in this process, so to give you a flavor of what we are going to produce, here's a screenshot of the finished article:</p><div class="mediaobject"><img src="../images/00050.jpeg" alt="Working with the data-uri function" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Let's start by opening a copy of <code class="email">functions1.html</code> and altering the <code class="email">&lt;div&gt;</code> footer, as follows:</p><div class="informalexample"><pre class="programlisting">  &lt;/div&gt;
  &lt;div id="footer"&gt;
      &amp;copy; samplesite.com 2014
    &lt;div id="social"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div><p class="calibre7">Save <a id="id341" class="calibre1"/>this as <code class="email">functions2.html</code>. We need to<a id="id342" class="calibre1"/> add some social media icons at this point—there are thousands available on the Internet; the ones I've used in our example are the icons from <span class="strong"><em class="calibre9">Vintage Social Media Stamps: Icon Pack</em></span> by John Negoita, which are available at <a class="calibre1" href="http://designinstruct.com/free-resources/icons/vintage-social-media-stamps-icon-pack/">http://designinstruct.com/free-resources/icons/vintage-social-media-stamps-icon-pack/</a>.</p><p class="calibre7">If you would like some inspiration, you may want to take a look at the various packs listed at <a class="calibre1" href="http://www.hongkiat.com/blog/free-social-media-icon-sets-best-of/">http://www.hongkiat.com/blog/free-social-media-icon-sets-best-of/</a>—there are some stunning examples on display!</p><p class="calibre7">In this example, we're using three icons: the RSS, Facebook, and Twitter icons, although you may prefer to use different icons from the pack, depending on your needs.</p><p class="calibre7">Next, to make positioning of the icons easier, we're going to convert them into an image sprite. For the uninitiated, image sprites are a really useful means of reducing the number of requests for resources from the server. This is particularly useful if you have lots of small images, such as arrows or icons, on your site; once you've downloaded the initial image, it will be cached for further use elsewhere on the site.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note21" class="calibre1"/>Note</h3><p class="calibre7">If you would like to learn more about using CSS image sprites, then visit <a class="calibre1" href="http://css-tricks.com/css-sprites/">http://css-tricks.com/css-sprites/</a>.</p></div><p class="calibre7">There are a number<a id="id343" class="calibre1"/> of ways to create image sprites; the easiest way is to use an online service such as the one at <a class="calibre1" href="http://spritepad.wearekiss.com/">http://spritepad.wearekiss.com/</a>, which we will use in our example.</p><p class="calibre7">Browse to the site and then drag-and-drop each image onto the grid. Position them until you have an even gap around each image—aim to leave 3-5 pixels between each image. When you are happy with the layout, click on <span class="strong"><strong class="calibre8">Download</strong></span> to obtain the converted sprite and associated CSS styles that are produced by the site.</p><p class="calibre7">From the compressed archive that we've just downloaded, extract the image to the <code class="email">lessjs</code> project folder; store it within the <code class="email">img</code> subfolder. Switch to a new document in your text editor and then add the following, assuming that you've used the same icons as those outlined earlier:</p><div class="informalexample"><pre class="programlisting">#social {
  background-image: data-uri('../img/sprites.png');
  width: 175px;
  height: 60px;
  float: right;
}</pre></div><p class="calibre7">Save the file as <code class="email">social.less</code>—don't forget to add a link to <code class="email">social.less</code> in the <code class="email">&lt;head&gt;</code> section of <code class="email">functions2.html</code>:</p><div class="informalexample"><pre class="programlisting">&lt;link rel="stylesheet" href="css/social.less"&gt;</pre></div><p class="calibre7">Sublime Text<a id="id344" class="calibre1"/> will have compiled the code into<a id="id345" class="calibre1"/> valid CSS—while the benefits of using this method won't be apparent immediately, you will see the effects once you look at the <code class="email">social.css</code> file that is produced (and which is available in the code download for this book). To give you a flavor, this is an extract from our compiled <code class="email">social.css</code> file:</p><div class="informalexample"><pre class="programlisting">#social{background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAA...</pre></div><p class="calibre7">If you save the files and preview the results in a browser, you will see the icons appear in the footer of your page, similar to this screenshot:</p><div class="mediaobject"><img src="../images/00051.jpeg" alt="Working with the data-uri function" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In our example, we've taken three images and converted them into a single image sprite. We've then referenced this from our Less style sheet, using the <code class="email">data-uri</code> function, and positioned<a id="id346" class="calibre1"/> this on our page using standard <a id="id347" class="calibre1"/>CSS attributes to determine the height and width (necessary for the background-image rule to work correctly).</p><div class="book" title="Using the data-uri function – some words of caution"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch04lvl3sec04" class="calibre1"/>Using the data-uri function – some words of caution</h3></div></div></div><p class="calibre7">While it<a id="id348" class="calibre1"/> is in a developer's best interests to ensure that his/her page sizes are kept to a minimum, there are some pitfalls that we need to be aware of when using <code class="email">data-uris</code>:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Updating sites that use <code class="email">data-uri</code> to render images throughout can make it harder to maintain—it's better to use <code class="email">data-uri</code> where icons or images are frequently repeated.</li><li class="listitem">It's a good practice to set a long expiry time on the CSS style sheet so that it remains cached as much as possible, particularly for often-repeated images.</li><li class="listitem">Some browsers will have strict limits on the size of <code class="email">data-uri</code> that can be used. For example, IE8 has a maximum of 32KB; this will limit the size of the images that can be used.</li><li class="listitem">You will find that embedded code means larger file sizes—this isn't necessarily an issue as long as the document is cached; you can help reduce this by using the <span class="strong"><strong class="calibre8">gzip</strong></span> compression if needed.</li></ul></div><p class="calibre7">This shouldn't put you off from using <code class="email">data-uri</code>—it just means that you need to be careful about its use in your pages! <code class="email">Data-uri</code> is a really useful way of reducing the number of requests to the server, as long as the content to be used is chosen with care. A good example is small credit card images—these are repeated frequently throughout an e-commerce site, so they could easily be used inline within a CSS style sheet.</p></div></div></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec43" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">Phew! We've covered a lot in this chapter! Let's recap what we learned.</p><p class="calibre7">We kicked off with a look at how to create variables in Less, and with care, we used them to good effect in creating our take on the time-honored Polaroid effect on a series of images. We saw how this can be a real timesaver, by reducing the number of alterations required to code, while at the same time, noting that the scope of variables can be varied, and how this can impact our code.</p><p class="calibre7">We then moved on to looking at mixins—both the static and parametric varieties. Here, we saw, with a little forethought, that we could create reusable blocks of code that can be dropped in with ease either within our main Less file or a code library file. We used this technique to iteratively alter the code required to build a very simple web form in order to prove that the improvements made will not affect the overall outcome.</p><p class="calibre7">Next up, came an introduction to using functions, where we saw that with the use of some simple operators or math functions, we can produce some useful results with little input. We saw how easy it is to create a simple two-column page layout using a small mixin, and that this can be developed further to incorporate more columns, if desired.</p><p class="calibre7">Last, but by no means least, we took a look at using another of Less' functions, in the form of the <code class="email">data-uri</code> operator. We saw how easy it is to convert the image into something that can be rendered inline in our code, helping to reduce the number of requests to render content from the server and increase the speed of accessing our page.</p><p class="calibre7">We're going to move on and change tack to cover another key area of Less in the next chapter, by looking at inheritance, overriding, and nesting within Less.</p></div></body></html>