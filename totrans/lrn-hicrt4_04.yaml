- en: Chapter 4. Bar and Column Charts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四章：条形图和柱状图
- en: 'In this chapter, we will start off by learning about column charts and their
    plotting options. Then, we will apply more advanced options for stacking and grouping
    columns together. After that, we will move on to bar charts by following the same
    example. Then, we will learn how to polish up a bar chart and apply tricks to
    turn a bar chart into mirror and gauge charts. Finally, a web page of multiple
    charts will be put together as a concluding exercise. In this chapter, we will
    cover the following:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将从学习柱状图及其绘图选项开始。然后，我们将应用更高级的选项来堆叠和组合柱状图。之后，我们将通过相同的示例来学习条形图。然后，我们将学习如何润色条形图，并应用技巧将条形图转换为镜像和仪表图表。最后，我们将多个图表的网页组合在一起作为总结练习。在本章中，我们将涵盖以下内容：
- en: Introducing column charts
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍柱状图
- en: Stacking and grouping a column chart
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 堆叠和组合柱状图
- en: Adjusting column colors and data labels
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调整柱状图颜色和数据标签
- en: Introducing bar charts
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍条形图
- en: Constructing a mirror chart
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建镜像图表
- en: Converting a single bar chart into a horizontal gauge chart
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将单个条形图转换为水平仪表图
- en: Sticking the charts together
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将图表粘合在一起
- en: Note
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Most of the content in this chapter remains the same as the first edition. All
    the examples have been run through with the latest version of Highcharts. Apart
    from the different color schemes, the resulting charts look the same as the screenshots
    presented in this chapter.
  id: totrans-10
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 本章的大部分内容与第一版相同。所有示例都已使用最新版本的Highcharts运行。除了不同的配色方案外，生成的图表看起来与本章中展示的截图相同。
- en: Introducing column charts
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍柱状图
- en: The difference between column and bar charts is trivial. The data in column
    charts is aligned vertically, whereas it is aligned horizontally in bar charts.
    Column and bar charts are generally used for plotting data with categories along
    the x axis. In this section, we are going to demonstrate plotting column charts.
    The dataset we are going to use is from the U.S. Patent and Trademark Office.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 柱状图和条形图之间的区别微不足道。柱状图中的数据是垂直排列的，而条形图中的数据是水平排列的。柱状图和条形图通常用于在x轴上具有类别的数据绘图。在本节中，我们将演示如何绘制柱状图。我们将使用的数据来自美国专利和商标局。
- en: 'The graph just after the following code snippet shows a column chart for the
    number of patents granted in the United Kingdom over the last 10 years. The following
    is the chart configuration code:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下代码片段之后的图形显示了过去10年中英国授予的专利数量柱状图。以下是该图表配置代码：
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following is the result that we get from the preceding code snippet:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的结果是前面代码片段得到的结果：
- en: Note
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This data can be found in the online report *All Patents, All Types Report*
    by the Patent Technology Monitoring Team at [http://www.uspto.gov/web/offices/ac/ido/oeip/taf/apat.htm](http://www.uspto.gov/web/offices/ac/ido/oeip/taf/apat.htm).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 这份数据可以在专利技术监测团队发布的在线报告 *所有专利，所有类型报告* 中找到，报告链接为[http://www.uspto.gov/web/offices/ac/ido/oeip/taf/apat.htm](http://www.uspto.gov/web/offices/ac/ido/oeip/taf/apat.htm)。
- en: '![Introducing column charts](img/7451OS_04_01.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![介绍柱状图](img/7451OS_04_01.jpg)'
- en: 'Let''s add another series, France:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再添加一个系列，法国：
- en: '[PRE1]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The following chart shows both series aligned with each other side by side:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图表显示了两个系列并排对齐：
- en: '![Introducing column charts](img/7451OS_04_02.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![介绍柱状图](img/7451OS_04_02.jpg)'
- en: Overlapped column chart
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 重叠柱状图
- en: Another way to present multi-series columns is to overlap the columns. The main
    reason for this type of presentation is to avoid columns becoming too thin and
    over-packed if there are too many categories in the chart. As a result, it becomes
    difficult to observe the values and compare them. Overlapping the columns provides
    more space between each category, so each column can still retain its width.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 展示多序列柱状图的另一种方式是重叠柱状图。这种展示方式的主要原因是为了避免图表中类别过多时柱状图变得过于细长和拥挤。结果，观察值和比较它们变得困难。重叠柱状图在各个类别之间提供了更多的空间，因此每个柱状图仍然可以保持其宽度。
- en: 'We can make both series partially overlap each other with the padding options,
    as follows:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用填充选项使两个序列部分重叠，如下所示：
- en: '[PRE2]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The default setting for padding between columns (also for bars) is 0.2, which
    is a fraction value of the width of each category. In this example, we are going
    to set `pointPadding` to a negative value, which means that, instead of having
    padding distance between neighboring columns, we bring the columns together to
    overlap each other. `groupPadding` is the distance of group values relative to
    each category width, so the distance between the pair of UK and France columns
    in 2005 and 2006\. In this example, we have set it to 0.3 to make sure the columns
    don''t automatically become wider, because overlapping produces more space between
    each group. The following is the screenshot of the overlapping columns:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 列（以及条形）之间的默认填充设置是0.2，这是每个类别宽度的分数值。在这个例子中，我们将`pointPadding`设置为负值，这意味着，而不是在相邻列之间有填充距离，我们将列放在一起以重叠。`groupPadding`是组值相对于每个类别宽度的距离，因此2005年和2006年英国和法国列之间的距离。在这个例子中，我们将它设置为0.3以确保列不会自动变宽，因为重叠会在每个组之间产生更多空间。以下是对重叠列的截图：
- en: '![Overlapped column chart](img/7451OS_04_03.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![重叠柱状图](img/7451OS_04_03.jpg)'
- en: Stacking and grouping a column chart
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 堆叠和分组柱状图
- en: Instead of aligning columns side by side, we can stack the columns on top of
    each other. Although this will make it slightly harder to visualize each column's
    values, we can instantly observe the total values of each category and the change
    of ratios between the series. Another powerful feature with stacked columns is
    to group them selectively when we have more than a couple of series. This can
    give a sense of proportion between multiple groups of stacked series.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 与将列并排对齐不同，我们可以将列堆叠在一起。虽然这会使观察每个列的值稍微困难一些，但我们可以立即观察到每个类别的总值以及系列之间的比率变化。当有多个系列时，堆叠列的另一个强大功能是选择性地对它们进行分组。这可以在多个堆叠系列组之间产生一种比例感。
- en: Let's start a new column chart with the UK, Germany, Japan, and South Korea.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从英国、德国、日本和韩国开始一个新的柱状图。
- en: '![Stacking and grouping a column chart](img/7451OS_04_04.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![堆叠和分组柱状图](img/7451OS_04_04.jpg)'
- en: 'The number of patents granted for Japan is off-the-scale compared to the other
    countries. Let''s group and stack the multiple series into Europe and Asia with
    the following series configuration:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 与其他国家相比，日本获得的专利数量超出了常规。让我们使用以下系列配置将多个系列分组和堆叠到欧洲和亚洲：
- en: '[PRE3]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We declare column `stacking` in `plotOptions` as `''normal''` and then for
    each column series assign a stack group name, `''Europe''` and `''Asia''`, which
    produces the following graph:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在`plotOptions`中声明列`stacking`为`'normal'`，然后为每个柱形系列分配一个堆叠组名，`'Europe'`和`'Asia'`，这产生了以下图表：
- en: '![Stacking and grouping a column chart](img/7451OS_04_05.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![堆叠和分组柱状图](img/7451OS_04_05.jpg)'
- en: As we can see, the chart reduces four vertical bars into two and each column
    comprises two series. The first vertical bar is the `'Europe'` group and the second
    one is `'Asia'`.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，图表将四个垂直条形减少到两个，每个柱形包含两个系列。第一个垂直条形是`'Europe'`组，第二个是`'Asia'`。
- en: Mixing the stacked and single columns
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 混合堆叠和单列
- en: In the previous section, we acknowledged the benefit of grouping and stacking
    multiple series. There are also occasions when multiple series can belong to a
    group but there are also individual series in their own groups. Highcharts offers
    the flexibility to mix stacked and grouped series with single series.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们承认了分组和堆叠多个系列的好处。也有时候，多个系列可以属于一个组，但也有一些单独的系列属于它们自己的组。Highcharts提供了混合堆叠和分组系列与单系列灵活性的功能。
- en: 'Let''s look at an example of mixing a stacked column and a single column together.
    First, we remove the stack group assignment in each series, as the default action
    for all the column series is to remain stacked together. Then, we introduce a
    new column series, US, and manually declare the `stacking` option as `null` in
    the series configuration to override the default `plotOptions` setting:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看混合堆叠柱形和单列的例子。首先，我们移除每个系列的堆叠组分配，因为所有柱形系列的默认行为是保持堆叠在一起。然后，我们引入一个新的柱形系列，美国，并在系列配置中手动声明`stacking`选项为`null`以覆盖默认的`plotOptions`设置：
- en: '[PRE4]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The new series array produces the following graph:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 新的系列数组产生了以下图表：
- en: '![Mixing the stacked and single columns](img/7451OS_04_06.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![混合堆叠和单列](img/7451OS_04_06.jpg)'
- en: The first four series, **UK**, **Germany**, **S. Korea**, and **Japan**, are
    stacked together as a single column and **US** is displayed as a separate column.
    We can easily observe by stacking the series together that the number of patents
    from the other four countries put together is less than two-thirds of the number
    of patents from the **US** (the US is nearly 25 times that of the UK).
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 前四个系列，**英国**、**德国**、**韩国**和**日本**，被堆叠在一起作为一个单独的列，而**美国**则作为一个单独的列显示。通过将系列堆叠在一起，我们可以很容易地观察到其他四个国家的专利总数加起来还不到美国专利总数的三分之二（美国的专利数量几乎是英国的四倍）。
- en: Comparing the columns in stacked percentages
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 比较堆叠百分比中的列
- en: 'Alternatively, we can see how each country compares in columns by normalizing
    the values into percentages and stacking them together. This can be achieved by
    removing the manual `stacking` setting in the US series and setting the global
    column `stacking` as `''percent''`:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们可以通过将值归一化为百分比并将它们堆叠在一起来查看每个国家在列中的比较情况。这可以通过移除美国系列中的手动`堆叠`设置并将全局列`堆叠`设置为`'percent'`来实现：
- en: '[PRE5]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'All the series are put into a single column and their values are normalized
    into percentages, as shown in the following screenshot:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 所有系列都被放入一个单独的列中，并且它们的值被归一化为百分比，如下面的截图所示：
- en: '![Comparing the columns in stacked percentages](img/7451OS_04_07.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![比较堆叠百分比中的列](img/7451OS_04_07.jpg)'
- en: Adjusting column colors and data labels
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 调整列颜色和数据标签
- en: 'Let''s make another chart; this time we will plot the top ten countries with
    patents granted. The following is the code to produce the chart:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再做一个图表；这次我们将绘制获得专利的前十位国家。以下生成图表的代码：
- en: '[PRE6]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The preceding code snippet generates the following graph:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段生成了以下图表：
- en: '![Adjusting column colors and data labels](img/7451OS_04_08.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![调整列颜色和数据标签](img/7451OS_04_08.jpg)'
- en: 'There are several areas that we would like to change in the preceding graph.
    First, there are word wraps in the country names. In order to avoid that, we can
    apply rotation to the x-axis labels, as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图表中，我们希望更改几个区域。首先，国家名称中存在换行。为了避免这种情况，我们可以将x轴标签旋转，如下所示：
- en: '[PRE7]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Secondly, the large value from `''United States''` has gone off the scale compared
    to values from other countries, so we cannot easily identify their values. To
    resolve this issue we can apply a logarithmic scale onto the y axis, as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，与来自其他国家的值相比，`'美国'`的大值已经超出了刻度，因此我们无法轻易识别它们的值。为了解决这个问题，我们可以在y轴上应用对数刻度，如下所示：
- en: '[PRE8]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Finally, we would like to print the value labels along the columns and decorate
    the chart with different colors for each column, as follows:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们希望沿着列打印值标签，并为每一列用不同的颜色装饰图表，如下所示：
- en: '[PRE9]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The following is the graph showing all the improvements:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图表显示了所有的改进：
- en: '![Adjusting column colors and data labels](img/7451OS_04_09.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![调整列颜色和数据标签](img/7451OS_04_09.jpg)'
- en: Introducing bar charts
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍条形图
- en: 'In Highcharts, there are two ways to specify bar charts—setting the series
    `type` to `''bar''` or setting the `chart.inverted` option to `true` with column
    series (also true for switching from bar to column). Switching between column
    and bar is simply a case of swapping the display orientation between the y and
    x axes; all the label rotations are still intact. Moreover, the actual configurations
    still remain in the x and y axes. To demonstrate this, we will use the previous
    example along with the `inverted` option set to `true`, as follows:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在Highcharts中，有两种指定条形图的方法——将系列`type`设置为`'bar'`或将`chart.inverted`选项设置为`true`与列系列（从条形切换到列也是如此）。在柱状图和条形图之间切换只是简单地交换y轴和x轴之间的显示方向；所有的标签旋转仍然保持不变。此外，实际的配置仍然保留在x轴和y轴上。为了演示这一点，我们将使用之前的示例，并将`inverted`选项设置为`true`，如下所示：
- en: '[PRE10]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The preceding code snippet produces a bar graph, as follows:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段生成了一个条形图，如下所示：
- en: '![Introducing bar charts](img/7451OS_04_10.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![介绍条形图](img/7451OS_04_10.jpg)'
- en: 'The rotation of the country name and the logarithmic axis labels still remains
    the same. In fact, now the value labels are muddled together and the category
    names are not aligned properly with the bars. The next step is to reset the label
    orientations to restore the graph to a readable form. We will simply swap the
    label setting from the y axis to the x axis:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 国家名称的旋转和对数轴标签的旋转仍然保持不变。事实上，现在值标签混乱在一起，类别名称与条形没有正确对齐。下一步是将标签方向重置以恢复图表的可读性。我们将简单地交换y轴的标签设置到x轴：
- en: '[PRE11]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Then we will reset the default column `dataLabel` settings by removing the
    rotation option and re-adjusting the x and y positioning to align inside the bars:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将通过移除旋转选项并重新调整x和y位置以对齐柱状图内部来重置默认的列`dataLabel`设置：
- en: '[PRE12]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The following is the graph with fixed data labels:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个具有固定数据标签的图表：
- en: '![Introducing bar charts](img/7451OS_04_11.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![介绍柱状图](img/7451OS_04_11.jpg)'
- en: Giving the bar chart a simpler look
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 给柱状图一个更简单的样子
- en: 'Here, we are going to strip the axes back to a minimal, bare presentation.
    We remove the whole y axis and adjust the category name above the bar. To strip
    off the y axis we will use the following code snippet:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将轴简化到最基本、最裸露的展示。我们移除整个y轴，并调整柱状图上方的类别名称。为了移除y轴，我们将使用以下代码片段：
- en: '[PRE13]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Then, we move the country labels above the bars. This is accompanied by removing
    the axis line and the interval tick line, then changing the label alignments and
    their x and y positioning as follows:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将国家标签移动到柱状图上方。这伴随着移除轴线线和间隔刻度线，然后更改标签对齐及其x和y位置，如下所示：
- en: '[PRE14]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Since we changed the label alignments to go above the bars, the horizontal
    position of the bars (plot area) has shifted to the left-hand side of the chart
    to take over the old label positions. Therefore, we need to increase the spacing
    on the left to avoid the chart looking too packed. Finally, we add a background
    image, `chartBg.png`, to the plot area just to fill up the empty space, as follows:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们将标签对齐改为在柱状图上方，柱状图的水平位置（绘图区域）已移至图表的左侧，以取代旧标签的位置。因此，我们需要增加左侧的间距，以避免图表看起来过于拥挤。最后，我们在绘图区域添加一个背景图像，`chartBg.png`，以填充空余空间，如下所示：
- en: '[PRE15]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The following screenshot shows the new simple look of our bar chart:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了我们的柱状图的新简单外观：
- en: '![Giving the bar chart a simpler look](img/7451OS_04_12.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![给柱状图一个更简单的样子](img/7451OS_04_12.jpg)'
- en: Constructing a mirror chart
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建镜像图
- en: Using a mirror chart is another way of comparing two column series. Instead
    of aligning the two series as columns adjacent to each other, mirror charts align
    them in bars opposite to each other. Sometimes, this is used as a preferred way
    for presenting the trend between the two series.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 使用镜像图是另一种比较两个柱状系列的方法。而不是将两个系列对齐为相邻的列，镜像图将它们对齐为相对的柱状。有时，这被用作展示两个系列之间趋势的首选方式。
- en: In Highcharts, we can make use of a stacked bar chart and change it slightly
    into a mirror chart for comparing two sets of data horizontally side by side.
    To do that, let's start with a new data series from **Patents Granted**, which
    shows the comparison between the United Kingdom and China with respect to the
    number of patents granted for the past decade.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在Highcharts中，我们可以利用堆积柱状图并将其稍作修改以形成一个镜像图，用于比较两组数据水平并排。为此，让我们从新的数据系列**专利授予**开始，该系列显示了过去十年英国和中国在专利授予数量上的比较。
- en: 'The way we configure the chart is really a stacked-column bar chart, with one
    set of data being positive and another set being manually converted to negative
    values, so that the zero value axis is in the middle of the chart. Then we invert
    the column chart into a bar chart and label the negative range as positive. To
    demonstrate this concept, let''s create a stacked column chart first, with both
    positive and self-made negative ranges, as follows:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我们配置图表的方式实际上是一个堆积柱状图，其中一组数据为正值，另一组数据则手动转换为负值，使得零值轴位于图表中间。然后，我们将柱状图反转成柱状图，并将负值范围标记为正值。为了演示这个概念，让我们首先创建一个堆积柱状图，其中包含正数和自制的负数范围，如下所示：
- en: '[PRE16]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The following screenshot shows the stacked-column chart with the zero value
    in the middle of the y axis:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了y轴中间的零值的堆积柱状图：
- en: '![Constructing a mirror chart](img/7451OS_04_13.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![构建镜像图](img/7451OS_04_13.jpg)'
- en: 'Then, we change the configuration into a bar chart with two x axes showing
    on each side with the same range. The last step is to define the y-axis label''s
    `formatter` function to turn the negative labels into positive ones, as follows:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将配置更改为一个柱状图，每个侧面都显示两个x轴，范围相同。最后一步是定义y轴标签的`formatter`函数，将负标签转换为正标签，如下所示：
- en: '[PRE17]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The following is the final bar chart for comparing the number of patents granted
    between the UK and China for the past decade:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是比较过去十年英国和中国授予的专利数量的最终柱状图：
- en: '![Constructing a mirror chart](img/7451OS_04_14.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![构建镜像图](img/7451OS_04_14.jpg)'
- en: Extending to a stacked mirror chart
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 扩展到堆积镜像图
- en: 'We can also apply the same principle from the column example to stacked and
    grouped series charts. Instead of having two groups of stacked columns displayed
    next to each other, we can have all the series stacked together with the zero
    value to divide both groups. The following screenshot demonstrates the comparison
    between the European and Asian stacked groups in a bar chart:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以将列示例中的相同原则应用于堆叠和分组系列图表。我们不是将两组堆叠的柱状图并排放置，而是可以将所有系列堆叠在一起，用零值来分隔两组。以下截图演示了在柱状图中比较欧洲和亚洲堆叠组的情况：
- en: '![Extending to a stacked mirror chart](img/7451OS_04_15.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![扩展到堆叠镜像图](img/7451OS_04_15.jpg)'
- en: The South Korean and Japanese series are stacked together on the left-hand side
    (the negative side), whereas the UK and Germany are grouped on the right-hand
    side (the positive side). The only tricky bit in producing the preceding graph
    is how to output the data label boxes.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 韩国和日本的系列数据堆叠在左侧（负侧），而英国和德国的数据则分组在右侧（正侧）。在生成前面的图表时，唯一棘手的部分是如何输出数据标签框。
- en: 'First of all, the South Korean and Japanese series data are manually set to
    negative values. Second, since South Korea and the UK are both the outer series
    of their own group, we enable the data label for these series. The following code
    snippet shows the series array configuration:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，韩国和日本的系列数据被手动设置为负值。其次，由于韩国和英国都是各自组的外部系列，我们为这些系列启用了数据标签。以下代码片段显示了系列数组的配置：
- en: '[PRE18]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Note that the definition for the `formatter` function is using `this.total`
    and not `this.y`, because we are using the position of the outer series to print
    the group's total value. The white background settings for the data labels are
    to avoid interfering with the y-axis interval lines.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，`formatter` 函数的定义使用的是 `this.total` 而不是 `this.y`，因为我们使用外部系列的位置来打印组的总价值。数据标签的白色背景设置是为了避免与y轴间隔线发生冲突。
- en: Converting a single bar chart into a horizontal gauge chart
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将单个柱状图转换为水平仪表图
- en: A gauge chart is generally used as an indicator for the current threshold level,
    meaning the extreme values in the y axis are fixed. Another characteristic is
    the single value (one dimension) in the x axis that is the current time.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 仪表图通常用作当前阈值水平的指示器，意味着y轴的极端值是固定的。另一个特点是x轴上的单值（一维）是当前时间。
- en: 'Next, we are going to learn how to turn a chart with a single bar into a gauge-level
    chart. The basic idea is to diminish the plot area to the same size as the bar.
    This means we have to fix the size of both the plot area and the bar, disregarding
    the dimensions of the container. To do that, we set `chart.width` and `chart.height`
    to some values. Then, we decorate the plot area with a border and background color
    to make it resemble a container for the gauge:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将学习如何将单柱图表转换为仪表级图表。基本思路是将绘图区域缩小到与柱状图相同的大小。这意味着我们必须固定绘图区域和柱状图的大小，不考虑容器尺寸。为此，我们将`chart.width`和`chart.height`设置为某些值。然后，我们用边框和背景色装饰绘图区域，使其类似于仪表的容器：
- en: '[PRE19]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'We then switch off the y-axis title and set up a regular interval within the
    percentage, as follows:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们关闭y轴标题，并在百分比内设置一个常规间隔，如下所示：
- en: '[PRE20]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The final part is to configure the bar series, so that the bar width fits perfectly
    within the plot area. The rest of the series configuration is to brush up the
    bar with an SVG gradient effect, as follows:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的部分是配置柱状图系列，使柱状图的宽度完美地适应绘图区域。其余的系列配置是对柱状图应用SVG渐变效果，如下所示：
- en: '[PRE21]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Note
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Multiple stop gradients are supported by SVG, but not by VML. For VML browsers,
    such as Internet Explorer 8, the number of stop gradients should be restricted
    to two.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: SVG支持多个停止渐变，但VML不支持。对于VML浏览器，如Internet Explorer 8，停止渐变的数量应限制为两个。
- en: 'The following is the final polished look of the gauge chart:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是仪表图的最终精炼外观：
- en: '![Converting a single bar chart into a horizontal gauge chart](img/7451OS_04_16.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![将单个柱状图转换为水平仪表图](img/7451OS_04_16.jpg)'
- en: Sticking the charts together
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将图表拼接在一起
- en: In this section, we are building a page with a mixture of charts. The main chart
    is displayed in the left-hand side panel and three mini charts are displayed in
    the right-hand side panel in top-down order. The layout is achieved by HTML `div`
    boxes and CSS styles.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们正在构建一个包含多种图表的页面。主图表显示在左侧面板中，三个迷你图表按从上到下的顺序显示在右侧面板中。布局是通过HTML `div` 框和CSS样式实现的。
- en: The left-hand side chart is from the multicolored column chart example that
    we discussed previously. All the axis lines and labels are disabled in the mini
    charts.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 左侧图表是从我们之前讨论的多色柱状图示例中提取的。在迷你图表中，所有坐标线和标签都被禁用了。
- en: 'The first mini chart from the top is a two-series line chart with `dataLabels`
    enabled for the last point in each series only: the last point in the data array
    is a data object instead. The label color is set to the same color as its series.
    Then, `plotLine` is inserted into the y axis at the 50 percent value mark. The
    following is a sample of one of the series configurations:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 最上面的第一个迷你图表是一个包含两个系列且只对每个系列的最后一个点启用了`dataLabels`的折线图：数据数组中的最后一个点是一个数据对象。标签颜色被设置为与系列相同的颜色。然后，在y轴的50%值标记处插入了`plotLine`。以下是一个系列配置的示例：
- en: '[PRE22]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: The second mini chart is a simple bar with data labels outside the categories.
    The style for the data label is set to a larger, bold font.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个迷你图表是一个简单的条形图，数据标签位于类别之外。数据标签的样式被设置为更大的粗体字体。
- en: 'The last mini chart is basically a scatter chart where each series has a single
    point, so that each series can appear in the right-hand side legend. Moreover,
    we set the x value for each series to zero, so that we can have different sizes
    of data points, and stacked on top of each other as well. The following is an
    example for one of the scatter series configurations:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个迷你图表基本上是一个散点图，其中每个系列只有一个点，这样每个系列都可以出现在右侧图例中。此外，我们将每个系列的x值设置为零，这样我们就可以有不同的数据点大小，并且可以堆叠在一起。以下是一个散点图配置的示例：
- en: '[PRE23]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The following is the screenshot of these multiple charts displayed next to
    each other:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是将这些多个图表并排显示的截图：
- en: '![Sticking the charts together](img/7451OS_04_17.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![将图表粘合在一起](img/7451OS_04_17.jpg)'
- en: Summary
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we have learned how to use both column and bar charts. We utilized
    their options to achieve various presentation configurations of columns and bars
    for ease of comparison between sets of data. We also learned advanced configurations
    for different chart appearances such as mirror and gauge charts.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了如何使用柱状图和条形图。我们利用它们的选项来实现列和条形的各种展示配置，以便于比较数据集。我们还学习了不同图表外观的高级配置，例如镜像和仪表图。
- en: In the next chapter, we will explore the pie chart series.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨饼图系列。
