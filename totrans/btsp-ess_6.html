<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Compiling and Building Bootstrap</h1></div></div></div><p>Until now, we have discussed the basics of Bootstrap, understood the architecture, and explored all the features and functionalities of Bootstrap.</p><p>We have also created a simple web application using various Bootstrap components. However, we have used the Bootstrap CSS and JS files as it is and haven't changed or updated anything in any of the files. Even though updating of JavaScript files is very rare and you won't find any normal reason to change anything in the JS files, overriding the CSS files are very common, and in most of the cases, very much essential when you are building a web application using Bootstrap as frontend framework for final production use. You of course, would need to change the colors, fonts, and much more to meet your client's brand guide.</p><p>Even though it seems to be very easy to update the <code class="literal">bootstrap.css</code> file and enter your own colors, font names, and so on, but you can imagine that it is not at all the suggested approach.</p><p>As we have briefly discussed earlier, Bootstrap <a id="id210" class="indexterm"/>uses <strong>LESS</strong> preprocessor quite extensively and the right approach for overriding the CSS class values of Bootstrap is to change those variables in LESS files. Compiling and building Bootstrap means actually compiling those LESS files, generating the distributable CSS files, and also generating the final JavaScript files.</p><p>In this chapter, we will look into how we can establish the compilation and build an environment for Bootstrap. In the next chapter, we will explore how to update the LESS variables in order to override the default look and feel of Bootstrap using this development environment. Here are the major points that we will cover here:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The list of tools required to build Bootstrap, how to install and configure those tools</li><li class="listitem" style="list-style-type: disc">How to install Bootstrap source code</li><li class="listitem" style="list-style-type: disc">How to compile and build Bootstrap using these tools<div><div><h3 class="title"><a id="note14"/>Note</h3><p>We will be using various tools for compiling and building Bootstrap here. However, we will not discuss those tools in depth, but will mainly focus on how to use those tools to build Bootstrap.</p></div></div></li></ul></div><div><div><div><div><h1 class="title"><a id="ch06lvl1sec46"/>Required tools</h1></div></div></div><p>You will need the <a id="id211" class="indexterm"/>following tools:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Node.js</li><li class="listitem" style="list-style-type: disc">Grunt</li></ul></div><p>Optionally, you may also use Bower; however, in our case, we will discuss about the steps involving and using node.js.</p><div><div><div><div><h2 class="title"><a id="ch06lvl2sec36"/>Node.js</h2></div></div></div><p>
<strong>Node.js</strong> is an open source runtime environment for server-side and networking applications. In simple<a id="id212" class="indexterm"/> terms, node.js is a server-side JavaScript runtime environment.</p><p>The whole framework is<a id="id213" class="indexterm"/> based on the JavaScript language—it is written in JavaScript, it is executed within a JavaScript runtime environment; the applications developed on node.js are also based on JavaScript. It uses Google V8 JavaScript engine to execute the end application code.</p><p>Along with node.js, an important component that comes<a id="id214" class="indexterm"/> in the bundle is the <strong>Node Package Manager</strong> (<strong>npm</strong>). This component finds, extracts, and installs all the dependencies of a JavaScript application. In other words, it manages the whole dependency installation processes so that you need not have to find out which other elements we need to run and execute a particular software package.</p><p>Thus, we will use the npm engine in order to get the source code and all other related software of Bootstrap. We will first install node.js, and the npm engine will come along with that.</p><div><div><h3 class="title"><a id="note15"/>Note</h3><p>The npm has a few advantages over Bower. For example, npm manages to avoid dependency conflicts by using nested dependencies. While, on the other hand, Bower is optimized only for frontends.</p></div></div><div><div><div><div><h3 class="title"><a id="ch06lvl3sec13"/>Installing node.js</h3></div></div></div><p>If you are using 64-bit Windows, you can get the latest node.js installer from <a class="ulink" href="http://nodejs.org/dist/v0.12.1/x64/node-v0.12.1-x64.msi">http://nodejs.org/dist/v0.12.1/x64/node-v0.12.1-x64.msi</a>.</p><p>However, for other<a id="id215" class="indexterm"/> distributions, visit <a class="ulink" href="https://nodejs.org/download/">https://nodejs.org/download/</a>. There you will find various Windows, Linux, and Mac installer packages. After <a id="id216" class="indexterm"/>downloading this, install node.js in your machine. When installation is finished, make sure that you have the node.js installation folder included in your windows executable path. This<a id="id217" class="indexterm"/> is because we will use the npm <strong>Command-line Interface</strong> (<strong>CLI</strong>) later on. Let's test our installation:</p><div><ol class="orderedlist arabic"><li class="listitem">Open windows command prompt.</li><li class="listitem">Write <code class="literal">npm</code>, and press <em>Enter</em>. If you get the following screen, everything is in order:<div><img src="img/B03987_06_01.jpg" alt="Installing node.js"/></div></li></ol></div></div></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec37"/>Grunt</h2></div></div></div><p>As their website suggests, Grunt is<a id="id218" class="indexterm"/> the JavaScript task runner. Almost like Apache Ant, where you put a long list of tasks to do, and the engine executes each task one by one. In case of JavaScript-based frameworks and <a id="id219" class="indexterm"/>applications, we use Grunt.</p><p>Like in case of Ant, we have a <code class="literal">build.xml</code> file; in case of Grunt, we have a <code class="literal">Gruntfile.js</code> file—where all the tasks that are to be executed are listed, which means this is the file where the Grunt project is configured.</p><p>In our current scope, we do not need to understand the full architecture of Grunt and Grunt file, we will just use this engine to compile and build Bootstrap.</p><p>However, first we have to install Grunt. For our purpose of compiling and building Bootstrap, we only need the <code class="literal">grunt-cli</code> module, not the full Grunt task runner. This is the CLI module of<a id="id220" class="indexterm"/> Grunt.</p><div><div><div><div><h3 class="title"><a id="ch06lvl3sec14"/>Installing Grunt-cli</h3></div></div></div><p>The good part is<a id="id221" class="indexterm"/> that nothing needs to be manually downloaded for this. We have downloaded and installed npm in <a id="id222" class="indexterm"/>an earlier section, and now the rest of the installations will be handled and managed by npm only. Open the windows command prompt with<a id="id223" class="indexterm"/> administrative privileges.</p><div><div><h3 class="title"><a id="tip19"/>Tip</h3><p>However, having the admin privilege is optional; if you can't manage that, go ahead with normal command prompt.</p></div></div><p>Type this command:</p><div><pre class="programlisting">
<strong>npm install -g grunt-cli</strong>
</pre></div><p>You should see an output similar to the following screenshot:</p><div><img src="img/B03987_06_02.jpg" alt="Installing Grunt-cli"/></div><p>As you can see, the <code class="literal">grunt-cli</code> module has been installed in my <code class="literal">C:\Users\Snig\AppData\Roaming\npm\node_modules</code> folder. The <code class="literal">grunt.cmd</code> command file is installed in <code class="literal">C:\Users\Snig\AppData\Roaming\npm</code> folder.</p><p>Check this output in your screen and mark the folder where <code class="literal">grunt-cli</code> has been installed. Check your windows <code class="literal">path</code> variable, if this folder has been added into the path or not. If not, you have to manually add this folder in your path.</p><div><div><h3 class="title"><a id="tip20"/>Tip</h3><p>Opening the windows command prompt with admin privileges (mentioned previously) is required only to update this system path.</p></div></div><p>Another way of course is to install the <code class="literal">grunt-cli</code> in the local folder where you are planning to install the Bootstrap source code, compile, and build them, which means your Bootstrap development folder.</p><p>Let's say, this folder<a id="id224" class="indexterm"/> in our case is <code class="literal">D:\Bootstrap</code>. This will be our development folder where we will download and install Bootstrap and will compile it and build it. Later on, in the next chapter, we will customize <a id="id225" class="indexterm"/>Bootstrap in this folder only.</p><p>In order to install <code class="literal">grunt-cli</code> in this local folder, we run the following command:</p><div><pre class="programlisting">
<strong>npm install --prefix D:\Bootstrap grunt-cli</strong>
</pre></div><p>However, we will go ahead with installing Grunt as in the first method—with the <code class="literal">–g</code> option. This option ensures that the package is installed in global mode.</p><div><div><h3 class="title"><a id="note16"/>Note</h3><p>For more options<a id="id226" class="indexterm"/> and information on installing packages using npm, please see <a class="ulink" href="https://docs.npmjs.com/cli/install">https://docs.npmjs.com/cli/install</a>.</p></div></div><p>Once everything is done, you can test the installation by executing command Grunt in the windows command prompt, as shown in the following screenshot:</p><div><img src="img/B03987_06_03.jpg" alt="Installing Grunt-cli"/></div><p>We are facing this error since we have executed grunt in a folder where no grunt project is configured, which means <a id="id227" class="indexterm"/>there is no <code class="literal">Gruntfile.js</code> file in this folder.</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec47"/>Installing Bootstrap</h1></div></div></div><p>We will now install Bootstrap, get the Bootstrap source code, and prepare to create our development<a id="id228" class="indexterm"/> environment for Bootstrap. Follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open windows <a id="id229" class="indexterm"/>command prompt and navigate to the <code class="literal">D:\Bootstrap</code> folder.</li><li class="listitem">Run the following command:<div><pre class="programlisting">
<strong>npm install bootstrap</strong>
</pre></div></li><li class="listitem">You will get the following output:<div><img src="img/B03987_06_04.jpg" alt="Installing Bootstrap"/></div></li></ol></div><p>As you might have guessed, Bootstrap 3.3.4 version has been downloaded and installed. Now, let's have a look at our installation folder:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You have got one new folder created named <code class="literal">node_modules</code></li><li class="listitem" style="list-style-type: disc">Inside the <code class="literal">node_modules</code> folder, another new folder has been created named <code class="literal">bootstrap</code></li><li class="listitem" style="list-style-type: disc">Inside this new folder, you have got the Bootstrap source code bundle</li></ul></div><p>Note that the previous command downloads and installs the latest available version of Bootstrap. If you need any older versions, you execute this command (we are installing Bootstrap version 3.3.1 <a id="id230" class="indexterm"/>here in this command):</p><div><pre class="programlisting">
<strong>npm install bootstrap@3.3.1</strong>
</pre></div><p>You should get this:</p><div><img src="img/B03987_06_05.jpg" alt="Installing Bootstrap"/></div><p>Now, if you check the<a id="id231" class="indexterm"/> contents of the newly created folders, you will see the downloaded source code bundle of Bootstrap:</p><div><img src="img/B03987_06_06.jpg" alt="Installing Bootstrap"/></div><div><div><h3 class="title"><a id="note17"/>Note</h3><p>Interestingly, you can compare these files and folders with the source code bundle we had downloaded in <a class="link" href="ch02.html" title="Chapter 2. Getting Started with Bootstrap">Chapter 2</a>, <em>Getting Started with Bootstrap</em>. There we had downloaded <a id="id232" class="indexterm"/>Bootstrap source code archive from GitHub using the URL <a class="ulink" href="https://github.com/twbs/bootstrap/archive/v3.3.1.zip">https://github.com/twbs/bootstrap/archive/v3.3.1.zip</a>.</p><p>You can see<a id="id233" class="indexterm"/> both the downloaded versions are exactly the same. However, here we are creating our development environment for Bootstrap, not just downloading the source code.</p></div></div><p>For understanding <a id="id234" class="indexterm"/>the background information on exactly what happened, npm is the repository and package manager for a number of JavaScript- and CSS-based tools and packages. Each of these packages are identified by a unique name.</p><p>In our case, earlier we have installed <code class="literal">grunt-cli</code> and now we have installed <code class="literal">bootstrap</code>—<code class="literal">grunt-cli</code> and here <code class="literal">bootstrap</code> is the name of the package which we are trying to install. For the list<a id="id235" class="indexterm"/> of packages available in npm, you can visit <a class="ulink" href="https://www.npmjs.com/">https://www.npmjs.com/</a>.</p><p>If you search for <a id="id236" class="indexterm"/>package <code class="literal">bootstrap</code> there, you will get more than 2,000 results—this means that there are more than 2,000 packages available in npm by this name. Here is a screenshot:</p><div><img src="img/B03987_06_07.jpg" alt="Installing Bootstrap"/></div><p>If we click on<a id="id237" class="indexterm"/> the first one in this list, we will land into the main Bootstrap package page in npm (<a class="ulink" href="https://www.npmjs.com/package/bootstrap">https://www.npmjs.com/package/bootstrap</a>):</p><div><img src="img/B03987_06_08.jpg" alt="Installing Bootstrap"/></div><p>As of now, we<a id="id238" class="indexterm"/> have got the Bootstrap source code bundle with us, we are now<a id="id239" class="indexterm"/> ready to compile, build, and generate the final distributable files.</p><div><div><h3 class="title"><a id="tip21"/>Tip</h3><p>Note that, at the right-hand side menu, the installation command <code class="literal">npm install bootstrap</code> is mentioned. This is how you install Bootstrap via npm.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec48"/>Compiling and building Bootstrap</h1></div></div></div><p>If you explore<a id="id240" class="indexterm"/> the <code class="literal">bootstrap</code> folder, you can see a <code class="literal">dist</code> folder as well, which contains the final distributable CSS, JavaScript, and Font files. The target of building a project is to generate this <code class="literal">dist</code> folder so that it can be used in the actual application.</p><p>First thing we would do<a id="id241" class="indexterm"/> is to delete this <code class="literal">dist</code> folder, since our processes would regenerate this. Deleting this is however not essential, since in any case, the build process will create or override the existing files and folders.</p><div><div><div><div><h2 class="title"><a id="ch06lvl2sec38"/>Installing dependencies</h2></div></div></div><p>To install the <a id="id242" class="indexterm"/>dependencies, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">First, we need to install the other dependencies of building and running Bootstrap.</li><li class="listitem">Go to the <code class="literal">D:\Bootstrap\node_modules\bootstrap</code> folder and run the command:<div><pre class="programlisting">
<strong>npm install</strong>
</pre></div></li></ol></div><p>This will get the list of dependencies from the <code class="literal">package.json</code> file located in the current <code class="literal">bootstrap</code> folder <a id="id243" class="indexterm"/>and will install all of these. Taking a segment of the file, here are the list of dependencies as of Bootstrap 3.3.1:</p><div><pre class="programlisting">  "devDependencies": {
    "btoa": "~1.1.2",
    "glob": "~4.0.6",
    "grunt": "~0.4.5",
    "grunt-autoprefixer": "~1.0.1",
    "grunt-banner": "~0.2.3",
    "grunt-contrib-clean": "~0.6.0",
    "grunt-contrib-concat": "~0.5.0",
    "grunt-contrib-connect": "~0.9.0",
    "grunt-contrib-copy": "~0.7.0",
    "grunt-contrib-csslint": "~0.3.1",
    "grunt-contrib-cssmin": "~0.10.0",
    "grunt-contrib-jade": "~0.13.0",
    "grunt-contrib-jshint": "~0.10.0",
    "grunt-contrib-less": "~0.12.0",
    "grunt-contrib-qunit": "~0.5.2",
    "grunt-contrib-uglify": "~0.6.0",
    "grunt-contrib-watch": "~0.6.1",
    "grunt-csscomb": "~3.0.0",
    "grunt-exec": "~0.4.6",
    "grunt-html-validation": "~0.1.18",
    "grunt-jekyll": "~0.4.2",
    "grunt-jscs": "~0.8.1",
    "grunt-saucelabs": "~8.3.2",
    "grunt-sed": "~0.1.1",
    "load-grunt-tasks": "~1.0.0",
    "npm-shrinkwrap": "~5.1.0",
    "remarkable": "~1.4.0",
    "time-grunt": "~1.0.0"
  },</pre></div><p>Thus, when the preceding command (<code class="literal">npm install</code>) is completed successfully (make sure that there are no errors in this step, otherwise the future steps may not work properly), you will get another <code class="literal">node_modules</code> folder beneath your <code class="literal">bootstrap</code> folder—this holds all the dependencies that are needed to build Bootstrap:</p><div><img src="img/B03987_06_09.jpg" alt="Installing dependencies"/></div><p>As you can see, all the<a id="id244" class="indexterm"/> dependencies have been installed as listed in the <code class="literal">package.json</code> file.</p></div><div><div><div><div><h2 class="title"><a id="ch06lvl2sec39"/>Building Bootstrap</h2></div></div></div><p>Finally, it is time to<a id="id245" class="indexterm"/> compile and build Bootstrap. We are essentially doing the following:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Compiling here means actually compiling the LESS files and generating the actual and final CSS files</li><li class="listitem" style="list-style-type: disc">Building means final packaging or bundling of all CSS, JavaScript, and Font files, which<a id="id246" class="indexterm"/> are ready to be consumed in the actual application.</li></ul></div><p>We again, go to the <code class="literal">D:\Bootstrap\node_modules\bootstrap</code> folder and run this command:</p><div><pre class="programlisting">
<strong>grunt dist</strong>
</pre></div><p>If everything works fine, you would get this output:</p><div><img src="img/B03987_06_10.jpg" alt="Building Bootstrap"/></div><p>Let's check the folder<a id="id247" class="indexterm"/> structure now. If you see the <code class="literal">bootstrap</code> folder, you will see the <code class="literal">dist</code> folder and files inside that has recreated. We will just have a brief look of what exactly happened behind the scenes. Grunt has executed at least 11 major tasks in this project:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Task</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">clean:dist</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Grunt has tried to delete the <code class="literal">dist</code> folder, which we had already removed earlier. Thus, you can see, you don't have to manually clean up the <code class="literal">dist</code> folder.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">less:compileCore</code>
</p>
</td><td style="text-align: left" valign="top">
<p>In this step, Grunt has compiled the LESS files and code to <a id="id248" class="indexterm"/>generate the Bootstrap main CSS file.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">less:compileTheme</code>
</p>
</td><td style="text-align: left" valign="top">
<p>In this step, Grunt has compiled the LESS files and code to generate the Bootstrap theme CSS file.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">autoprefixer:core</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Autoprefixer is a tool <a id="id249" class="indexterm"/>or method that parses CSS files and adds vendor-specific prefixes (for example, <code class="literal">-webkit-transition: -webkit-transform 1s;</code>). This task discovers all the places where you need this autoprefixer and adds the specific prefixes in the Bootstrap main CSS file.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">autoprefixer:theme</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This task discovers all the places where you need this autoprefixer and adds the specific prefixes in the Bootstrap theme CSS file.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">csscomb:dist</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Formatted and beautified the CSS files.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">cssmin:minifyCore</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Finally, when the CSS files has been generated, this task minifies the files. In other words in this task, the <code class="literal">bootstrap.min.css</code> file has been created.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">cssmin:minifyTheme</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Similar to the previous one, this task creates the <code class="literal">bootstrap-theme.min.css</code> file.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">copy:fonts</code>
</p>
</td><td style="text-align: left" valign="top">
<p>As the name suggests, this task creates and copies all the Fonts files in the <code class="literal">dist</code> folder.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">concat:bootstrap</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Having handled the CSS files until now, this task concatenates and merges all the individual JavaScript files into one final file—<code class="literal">bootstrap.js</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">uglify:core</code>
</p>
</td><td style="text-align: left" valign="top">
<p>As the earlier tasks had minified the CSS files, this task also minifies the JavaScript file. In this step, the <code class="literal">bootstrap.min.js</code> file is created.</p>
</td></tr></tbody></table></div><p>All these steps (along with some others) are mentioned and configured in the <code class="literal">Gruntfile.js</code> file, which you can find in the <code class="literal">bootstrap</code> source code folder. Thus finally, you have got the<a id="id250" class="indexterm"/> distributable version of your own Bootstrap CSS and JS files.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec49"/>Summary</h1></div></div></div><p>In this chapter, we learned a few new tools and systems that are quite useful and popular nowadays while creating CSS and JavaScript applications—node.js and Grunt.</p><p>We saw how to install and configure these tools. Finally, we saw how to use these tools in order to compile Bootstrap LESS files and generate consumable CSS files. We learned how to package and build the Bootstrap files and generate the whole distributable bundle.</p><p>In the next chapter, we will see how to customize Bootstrap to meet your design and look-and-feel requirements.</p></div></body></html>