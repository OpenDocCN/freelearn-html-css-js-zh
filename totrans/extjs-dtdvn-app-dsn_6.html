<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Data Management"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Data Management</h1></div></div></div><p>With the development we have done already, the application is really taking shape. We can input and see the data. <a id="id232" class="indexterm"/>Now if we customize the content according to the need, we'll have the finished application we were originally hoping for. In this final chapter, we will implement the data import/export to restore or backup the data. This time, the data we refer to is the <code class="literal">Quotation</code> and <code class="literal">Bill</code> data.</p><div class="section" title="Designing Import and Export"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec48"/>Designing Import and Export</h1></div></div></div><p>Let's start by <a id="id233" class="indexterm"/>thinking about the <code class="literal">Quotation</code> table. Because <code class="literal">Bill</code> is mostly the same as <code class="literal">Quotation</code>, we'll just implement <code class="literal">Quotation</code> here. Try this implementation with <code class="literal">Bill</code>, as well by yourself. First, we'll add an <code class="literal">Export</code> and <code class="literal">Import</code> button in the <code class="literal">Quotation</code> list, so that it begins to function. Next, we'll make the file start downloading when the <code class="literal">Export</code> button is pressed. We'll add a new panel so that we can visually check the selected data that we are about to import. So let's go ahead and create this type of data import and export functions.</p><div class="section" title="Data format"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec73"/>Data format</h2></div></div></div><p>At first, when exporting,<a id="id234" class="indexterm"/> let's consider the data format in which it will be downloaded. This time, we're thinking of outputting in the <span class="strong"><strong>TSV format</strong></span><a id="id235" class="indexterm"/> instead of CSV or XML. TSV is easier for the developers to read and it's very simple to generate with JavaScript. The following list shows the order of output.</p><p><code class="literal">Quotation</code> and <code class="literal">Quotations</code> are outputted in a single file. In the case of quotation, the order of output is as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">quotation</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">id</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">status</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">customer</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">note</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">modified</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">created</code></li></ul></div><p>In the case of quotations, the order of output is as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">quotations</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">id</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">status</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">parent</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">description</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">qty</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">price</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">sum</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">modified</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">created</code></li></ul></div><p>For the very first item, enter the table name, this will let you output multiple tables at the same time.</p></div><div class="section" title="Creating the Import and Export views in Quotation"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec74"/>Creating the Import and Export views in Quotation</h2></div></div></div><p>First, we'll <a id="id236" class="indexterm"/>add the <code class="literal">button</code> feature and modify the code for import and export (source file: <code class="literal">01_making_the_import_and_export_view_in_quotation/app/view/quotation/List.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.quotation.List', {
    ....
    initComponent: function() {
        ....
        Ext.apply(me, {
            tbar: [{
                ....
            }, '-', {
                text     : 'Import',
                action   : 'import'
            }, {
                text     : 'Export',
                action   : 'export'
            }, '-', {
            ....</pre></div><p>You should now see the following form:</p><div class="mediaobject"><img src="graphics/5446OS_06_01.jpg" alt="Creating the Import and Export views in Quotation"/></div><p>Next, implement <a id="id237" class="indexterm"/>the button's event handler (source file: <code class="literal">01_making_the_import_and_export_view_in_quotation/app/controller/quotation/List.js</code>):.</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.controller.quotation.List', {
    ....
    init: function() {
        var me = this;
        me.control({
            ....
            'myapp-quotation-list button[action=import]': {
                'click': me.onImport
            },
            'myapp-quotation-list button[action=export]': {
                'click': me.onExport
            }
        });
    },
    onImport: function() {
        // import
    },
    onExport: function() {
        // export
    },</pre></div><p>Detect the actions for <code class="literal">import</code> and <code class="literal">export</code> you set up in the <code class="literal">button</code> feature, and then assign <code class="literal">onImport</code> and <code class="literal">onExport</code> to the various click events. Of course, we will make <code class="literal">onImport</code> and <code class="literal">onExport</code> from scratch.</p></div><div class="section" title="Preparing the server side for export"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec75"/>Preparing the server side for export</h2></div></div></div><p>In order to <a id="id238" class="indexterm"/>download the file, we will make the <code class="literal">quotation-export.php</code> file. The file can be installed anywhere, but this time we have positioned it in the document route where the <code class="literal">index.php</code> file is located.</p><p>The process to export the <code class="literal">Quotation</code> data will be implemented by PHP. It's a long one, so please refer to the source file for the code (source file: <code class="literal">02_preparing_the_server_side_for_export/quotation-export.php</code>).</p><p>Execute SQL and output it to match the data format we thought up earlier.</p><p>In order to <a id="id239" class="indexterm"/>change the filename to the second one, the filename that comes after the quotation will have the year, month, date, hour, minute, and second recorded. Then, it is downloaded with the <code class="literal">.tsv</code> file extension. Please check if you can download the file by entering the <code class="literal">quotation-export.php</code> URL directly.</p><p>Next, let's make this URL move when you press down the button we just made. (source file: <code class="literal">02_preparing_the_server_side_for_export/app/controller/quotation/List.js</code>):.</p><div class="informalexample"><pre class="programlisting">onExport: function() {
    location.href='quotation-export.php';
},</pre></div></div><div class="section" title="Creating a temporary view for import"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec76"/>Creating a temporary view for import</h2></div></div></div><p>Next, we will<a id="id240" class="indexterm"/> continue by implementing the import process. Like it was explained earlier, upload the data you will import and then implement it, so that you can import after you have visually checked it.</p><p>Let's make the <code class="literal">myapp-import</code> event fire when we press the <code class="literal">import</code> button, and implement it so that the panel shows to confirm the import data.</p><p>First, let's implement the listener. When this event happens, the URL will change to <code class="literal">#!/quotation/import</code> (source file: <code class="literal">03_making_a_temporary_view_for_import/app/controller/quotation/Quotation.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.controller.quotation.Quotation', {
    ....
    init: function() {
        ....
        me.control({
            'myapp-quotation-list': {
                ....
                'myapp-import': function() {
                    location.href = '#!/quotation/import';
                }
            }
        });</pre></div><p>Next, implement so that the event fires (source file: <code class="literal">03_making_a_temporary_view_for_import/app/controller/quotation/List.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.controller.quotation.List', {
    ....
    init: function() {
        var me = this;
        me.control({
            ....
            'myapp-quotation-list button[action=import]': {
                'click': me.onImport
            },
            'myapp-quotation-list button[action=export]': {
                'click': me.onExport
            }
        });
    },
    onImport: function() {
        var me          = this,
            listView    = me.getListView();

        listView.fireEvent('myapp-import');
    },
    ....</pre></div><p>Implement the <a id="id241" class="indexterm"/>contents of the <code class="literal">onImport</code> method<a id="id242" class="indexterm"/> that we implemented earlier. From the <code class="literal">List</code> view object, fire the <code class="literal">myapp-import</code> event with <code class="literal">fireEvent</code>.</p><p>When this event happens, the URL will be changed. Next, modify <code class="literal">onShow</code> so that the panel for imports shows up (source file: <code class="literal">03_making_a_temporary_view_for_import/app/controller/quotation/Quotation.js</code>):</p><div class="informalexample"><pre class="programlisting">....
onShow: function(p) {
    var me = this,
        o = {},
        hash = location.hash,
        layout = p.getLayout(),
        listView = me.getListView(),
        editView = me.getEditView(),
        params;
    params = hash.substr(('#!/' + me.screenName + '/').length);
    if(params === 'new') {
        o.id = params;
    } else {
        if(!params || !Ext.isString(params)) {
            params = '';
        }
        params = params.split('/');
        Ext.iterate(params, function(text) {
            if(!text || !Ext.isString(text)) {
                text = '';
            }
            text = text.split('=');
            o[text[0]] = text[1];
        });
    }
    me.requestParams = params = o;

    if(params.hasOwnProperty('import')) {
        // Show Import
        layout.setActiveItem(2);
    } else if(params.id === 'new' || Number(params.id)) {
        // Show Edit
        layout.setActiveItem(1);
    } else {
        // Show List
        layout.setActiveItem(0);
    }
    // fire event 'myapp-show'
    layout.activeItem.fireEvent('myapp-show', layout.activeItem, p, 
    params);
},
....</pre></div><p>Parameter analysis<a id="id243" class="indexterm"/> is being performed by the process we made earlier. Using this process, if you have an <code class="literal">import</code> property, the <code class="literal">import</code> panel will be displayed.</p><p>We haven't made the main <code class="literal">import</code> panel. Here, we have just made a very simple panel so that it can be displayed for the time being (source file: <code class="literal">03_making_a_temporary_view_for_import/app/view/quotation/Import.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.quotation.Import', {
    extend: 'MyApp.form.Panel',
    alias : 'widget.myapp-quotation-import',
    itemId: 'screen-quotation-import',
    initComponent: function() {
        var me = this;

        // TopToolbar
        Ext.apply(me, {
           tbar: [{
               text: 'Cancel',
               action: 'cancel'
           }, '-', {
               text: 'Upload',
               action: 'upload'
           }]
        });

        me.callParent(arguments);
    }
});</pre></div><p>Add this <a id="id244" class="indexterm"/>panel (<code class="literal">app/view/quotation/Quotation.js</code>) to the <code class="literal">screen</code> panel item (source file: <code class="literal">03_making_a_temporary_view_for_import/app/view/quotation/Quotation.js</code>).</p><p>When you configure an item, you should specify the <code class="literal">xtype</code>. To do this, set up the class name it requires so that dynamic loading can take place.</p><p>In this state, execute the whole application. When you press the <code class="literal">import</code> button, the following panel will be displayed:</p><div class="mediaobject"><img src="graphics/5446OS_06_02.jpg" alt="Creating a temporary view for import"/></div><p>The <code class="literal">import</code> panel<a id="id245" class="indexterm"/> is still temporary, and the <code class="literal">grid</code> panel we implemented earlier is still not displayed; but we can check with the <code class="literal">onShow</code> event handler<a id="id246" class="indexterm"/> that it is changing properly.</p></div><div class="section" title="Creating the CT view for import"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec77"/>Creating the CT view for import</h2></div></div></div><p>We haven't <a id="id247" class="indexterm"/>created the CT that we usually would have made already. So, let's make the CT to display the temporary import panel we made earlier (source file: <code class="literal">04_making_the_ct_view_for_import/ct/quotation/view_import.html</code>).</p><p>For the HTML, there shouldn't be any problems if we duplicate a different HTML and amend the JavaScript file to be read in the same way (source file: <code class="literal">04_making_the_ct_view_for_import/ct/quotation/view_import.js</code>):</p><div class="informalexample"><pre class="programlisting">...
Ext.onReady(function() {
    Ext.create('MyApp.store.Customer');
    Ext.create('MyApp.store.QuotationItem');
    Ext.create('MyApp.view.quotation.Quotation', {
        activeItem: 2,
        width: 800,
        height: 600,
        renderTo: Ext.getBody()
    });
});</pre></div><p>Now, let's <a id="id248" class="indexterm"/>prepare a grid for this panel. After the upload is complete, it will receive the display data from JSON data. So, let's make a store with the <code class="literal">memory</code> proxy (source file: <code class="literal">04_making_the_ct_view_for_import/app/store/QuotationImport.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.store.QuotationImport',{
    extend: 'Ext.data.Store',
    storeId:'QuotationImport',
    fields:['id', 'status', 'customer', 'note', 'modified', 'created'],
    data:{'items':[
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});</pre></div><p>Also, use the following code to prepare a grid for this panel (source file: <code class="literal">04_making_the_ct_view_for_import/app/store/QuotationImportItems.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.store.QuotationImportItems',{
    extend: 'Ext.data.Store',
    storeId:'QuotationImportItems',
    fields:[
        'id',
        'status',
        'parent',
        'description',
        'qty',
        'price',
        'sum',
        'modified',
        'created'
    ],
    data:{'items':[
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});</pre></div><p>The reason <a id="id249" class="indexterm"/>we have created two <code class="literal">memory</code> proxies is because we will prepare one each for <code class="literal">Quotation</code> and <code class="literal">Quotations</code>, and then make two grids. Now, we are going to use this in <code class="literal">Grid</code>; but we will add the following code to make sure that it displays without any problems in CT (source file: <code class="literal">04_making_the_ct_view_for_import/ct/quotation/view_import.js</code>).</p><p>To make sure that the two stores we made previously can use the <code class="literal">view_import.js</code> script in the CT directory, let's change it so that it can instantiate when it's initially launched.</p><p>Now, we'll quickly make the view. We'll remodel the temporary <code class="literal">Import</code> panel we made earlier (source file: <code class="literal">04_making_the_ct_view_for_import/app/view/quotation/Import.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.quotation.Import', {
    extend: 'MyApp.form.Panel',
    alias : 'widget.myapp-quotation-import',
    itemId: 'screen-quotation-import',
    initComponent: function() {
        var me = this,
            store = Ext.getStore('QuotationImport'),
            itemstore = Ext.getStore('QuotationImportItems'); 

        // Items
        Ext.apply(me, {
            layout: {
                type: 'border',
                padding: 5
            },
            items: [{
                region: 'north',
                xtype: 'grid',
                itemId: 'quotationgrid',
                split: true,
                title: 'Quotation',
                store: store,
                columns: [{
                    text: 'id',
                    dataIndex: 'id',
                    width: 50
                }, {
                    text: 'status',
                    dataIndex: 'status',
                    width : 50
                }, {
                    text: 'customer',
                    dataIndex: 'customer'
                }, {
                    text: 'note',
                    dataIndex: 'note',
                    flex: 1
                }, {
                    text: 'modified',
                    dataIndex: 'modified'
                }, {
                    text: 'created',
                    dataIndex: 'created'
                }],
                flex:1
            }, {
                region: 'center',
                xtype: 'grid',
                title: 'Quotation Items',
                itemId: 'quotationitemsgrid',
                store: itemstore,
                columns: [{
                    text: 'id',
                    dataIndex: 'id',
                    width: 50
                }, {
                    text: 'status',
                    dataIndex: 'status',
                    width : 50
                }, {
                    text: 'parent',
                    dataIndex: 'parent',
                    width : 50
                }, {
                    text: 'description',
                    dataIndex: 'description',
                    flex: 1
                }, {
                    text: 'qty',
                    dataIndex: 'qty'
                }, {
                    text: 'price',
                    dataIndex: 'price'
                }, {
                    text: 'sum',
                    dataIndex: 'sum'
                }, {
                    text: 'modified',
                    dataIndex: 'modified'
                }, {
                    text: 'created',
                    dataIndex: 'created'
                }],
                flex:1
            }]
        });

        // TopToolbar
        Ext.apply(me, {
           tbar: [{
               text: 'Cancel',
               action: 'cancel'
           }, '-', {
               text: 'Upload',
               action: 'upload'
           }]
        });

        me.callParent(arguments);
    }
});</pre></div><p>As <a id="id250" class="indexterm"/>mentioned earlier, we will make two <code class="literal">grid</code> panels. This is for <code class="literal">Quotation</code> and <code class="literal">Quotations</code>. Again, the layout is a <span class="strong"><strong>border</strong></span> <span class="strong"><strong>layout</strong></span><a id="id251" class="indexterm"/> and it specifies flex.</p><p>Users who have been using Ext JS for a long time might think this is strange; but with the current Ext JS, you can specify flex even in a border layout.</p><p>So, if you set up <code class="literal">flex:1</code> for both <code class="literal">north</code> and <code class="literal">center</code>, it will equally arrange the top and bottom of the form; and with <code class="literal">north</code> set up as <code class="literal">split:true</code>, the splitter can be displayed.</p><p>If you check the display, it will look like the following:</p><div class="mediaobject"><img src="graphics/5446OS_06_03.jpg" alt="Creating the CT view for import"/></div></div><div class="section" title="Creating Upload and Show Data in the grid"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec78"/>Creating Upload and Show Data in the grid</h2></div></div></div><p>This time, upload the data <a id="id252" class="indexterm"/>you exported and let's display it in a grid. To do this, add a controller in <code class="literal">app.js</code>. You might have to jog your memory because it has been a while since the last time! (Source file: <code class="literal">05_making_upload_and_show_data_in_the_grid/app/Application.js</code>.):</p><div class="informalexample"><pre class="programlisting">....

Ext.application({
    ....
    controllers: [
        ....
        'quotation.Import',
        ....
    ],</pre></div><p>Now, we will make this controller (source file: <code class="literal">05_making_upload_and_show_data_in_the_grid/app/controller/quotation/Import.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.controller.quotation.Import', {
    extend: 'MyApp.controller.Abstract',
    refs: [{
        ref: 'importView', selector: 'myapp-quotation-import' 
    }],
    stores: [
        'QuotationImport',
        'QuotationImportItems'
    ],
    init: function() {
        var me = this;
        me.control({
            'myapp-quotation-import': {
                'myapp-show': me.onShow,
                'myapp-hide': me.onHide
            },
            'myapp-quotation-import [action=upload]': {
                'change': me.onUploaded
            }
        });
    },
    onShow: function(p, owner, params) {
    },
    onHide: function() {
    },
    onUploaded: function(fb, v) {
        var me = this,
            p = me.getImportView(),
            form = p.getForm(),
            importView = me.getImportView(),
            btnExecute = importView.down('button[action=execute]');

        p.setLoading();
        btnExecute.disable();
        form.submit({
            success: function(form, action) {
                Ext.getStore('QuotationImport').loadData(action.
                result.quotation.items);
                Ext.getStore('QuotationImportItems').loadData(action.
                result.quotations.items);
                p.setLoading(false);
                btnExecute.enable();
            }
        });
    }
});</pre></div><p>Then, temporarily<a id="id253" class="indexterm"/> change the <code class="literal">upload</code> button (that we created previously) to <code class="literal">filefield</code> (source file: <code class="literal">05_making_upload_and_show_data_in_the_grid/app/view/quotation/Import.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.quotation.Import', {
    extend: 'MyApp.form.Panel',
    alias : 'widget.myapp-quotation-import',
    itemId: 'screen-quotation-import',
    api: {
        submit  : 'MyAppQuotation.importData'
    },
    paramOrder: ['importfile'],
    initComponent: function() {
        ....

        // TopToolbar
        Ext.apply(me, {
           tbar: [{
               text: 'Cancel',
               action: 'cancel'
           }, '-', {
               xtype: 'filefield',
               name: 'importfile',
               buttonText: 'Upload',
               buttonOnly: true,
               hideLabel: true,
               action: 'upload'
           }]
        });

        me.callParent(arguments);
    }
});</pre></div><p>Furthermore, add the <code class="literal">API</code> key in the config options and specify the <code class="literal">Direct</code> function in <code class="literal">submit</code>. This panel is a form panel. Upload the file using the <code class="literal">submit</code> method. Next, make the <code class="literal">Direct</code> function that we specified in <code class="literal">submit</code> (source file: <code class="literal">05_making_upload_and_show_data_in_the_grid/p</code>
<code class="literal">hp/config.php</code>).</p><p>We'll add the following method to the <code class="literal">MyAppQuotation</code> class:</p><div class="informalexample"><pre class="programlisting">            'importData'=&gt;array(
                'len'=&gt;2,
                'formHandler'=&gt;true
            )</pre></div><p>We'll actually <a id="id254" class="indexterm"/>implement the method we added previously. It's too long to include in this text, so please refer to the source files for the code (source file: <code class="literal">05_making_upload_and_show_data_in_the_grid/php/classes/MyAppQuotation.php</code>).</p><p>Return the upload data again with JSON. If you are thinking of building an application, you should perform an input check because the user can input whatever information they like with a TSV file.</p><p>With the controller you implemented before, use the <code class="literal">loadData</code> method and read the data that was returned from the server side into the <code class="literal">MemoryStore</code> method.</p></div><div class="section" title="Executing the Import data"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec79"/>Executing the Import data</h2></div></div></div><p>Once <a id="id255" class="indexterm"/>you have displayed the read data in the grid and checked it, you can create a button to apply it to the database (source file: <code class="literal">06_execute_import_data /app/view/quotation/Import.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.view.quotation.Import', {
     ....
     initComponent: function() {
        ....

        // TopToolbar
        Ext.apply(me, {
           ....
           }, {
               text: 'Execute',
               disabled: true,
               action: 'execute'
           }]
        });

        me.callParent(arguments);
    }
});</pre></div><p>Let's make it so that it is impossible to press the button in the initial state. It will enable the button <a id="id256" class="indexterm"/>once the previous data upload has been complete (source file: <code class="literal">06_execute_import_data /app/controller/quotation/Import.js</code>):</p><div class="informalexample"><pre class="programlisting">Ext.define('MyApp.controller.quotation.Import', {
    ....
    init: function() {
        var me = this;
        me.control({
            ....
            'myapp-quotation-import [action=execute]': {
                'click': me.onExecute
            }
        });
    },
    ....
    onExecute: function() {
        var data = {
                quotation: [],
                quotations: [] 
            },
            store = Ext.getStore('QuotationImport'),
            items = Ext.getStore('QuotationImportItems');

        Ext.iterate(store.data.items, function(item) {
            data.quotation.push(Ext.clone(item.data));
        });

        Ext.iterate(items.data.items, function(item) {
            data.quotations.push(Ext.clone(item.data));
        });

        MyAppQuotation.executeImport(data, function() {
            location.href = '#!/quotation';
        });
    }
});</pre></div><p>Now, we are calling the <code class="literal">executeImport</code> and <code class="literal">Direct</code> functions. That's right, we haven't made it yet. Let's make this and make it possible to receive data from the client side (source file: <code class="literal">06_execute_import_data /php/config.php</code>):</p><div class="informalexample"><pre class="programlisting">    ....
    'MyAppQuotation'=&gt;array(
        'methods'=&gt;array(
            ....
            'executeImport'=&gt;array(
                'len'=&gt;1
            )
        )
    ),
    ....</pre></div><p>We'll implement<a id="id257" class="indexterm"/> the method we added to the <code class="literal">config.php</code> file. Again, this is too long to show here, so please refer to the source file (source file: <code class="literal">06_execute_import_data /php/classes/MyAppQuotation.php</code>).</p><p>When the data has been received, empty the inside of the database once with <code class="literal">Truncate</code> and insert the new data. Whether this is a good or bad way to do it will depend on the system you make.</p><p>Furthermore, if you look closely at the code, you'll know that error processing is not at a high level. If you are intending to make this at a commercial level, you will have to build up this area. Already, the implementation is complete. But finally, let's change the URL to <code class="literal">#!/quotation</code> to change it to a list display, and then finish.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec49"/>Summary</h1></div></div></div><p>We have motored through implementing the <code class="literal">Export</code> and <code class="literal">Import</code> data. There are still many points to cover, such as input checks and the error checks. But after learning this flow, I think you now have the base to customize this database in the way that you want.</p><p>Well done! You've made it to the end of the book!</p><p>Let's go over what you have achieved:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You made the data structure</li><li class="listitem" style="list-style-type: disc">You made the application architecture</li><li class="listitem" style="list-style-type: disc">You made the input and output by using grids and fields on the browser</li><li class="listitem" style="list-style-type: disc">You developed the application to obtain information using various charts</li><li class="listitem" style="list-style-type: disc">You made the data export and import management features</li></ul></div><p>Each feature is fundamental to an application of this kind. From now on, if you're thinking of creating something similar in your next project, please use this sample application as a base for your application. You only need to change a few points, and then you should be able to create a customized application very quickly.</p><p>Incorporating the architecture from this book into applications you have made, or are about to make, will simplify control and improve maintenance. It will also give you have high-level and versatile history management and let you add new screens with ease.</p><p>However, the sample application introduced in this book needed some extra features for actual real-world use. So we added some things here and there at the end of this chapter to brush up the application.</p><p>A list of the extra edited code files can be found in the sample code folder for this chapter. Please refer to this to see the final modifications we made to the application.</p><p>Also, we have included the comment <code class="literal">// update code</code> next to any modifications. Just search inside the code with that comment, and you should be able to see changes straight away.</p><p>Finally, remember that if you get lost, or if you hit a brick wall in one of your future projects, just take another look at this application and see if it can offer you some kind of solution.</p><p>I hope that you will be able to create some fantastic applications! Good luck and happy coding!</p></div></body></html>