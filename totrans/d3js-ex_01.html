<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Getting Started with D3.js"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Getting Started with D3.js</h1></div></div></div><p>
<span class="strong"><strong>D3.js</strong></span><a id="id0" class="indexterm"/> is an open source JavaScript library that provides the facility for manipulating HTML documents based upon data, using JavaScript as the language for implementing the mapping of data to the documents. Hence, the name <a id="id1" class="indexterm"/>
<span class="strong"><strong>D3</strong></span> (<span class="strong"><strong>D</strong></span>ata <span class="strong"><strong>D</strong></span>riven <span class="strong"><strong>D</strong></span>ocuments). Many consider D3.js as a data visualization library. This may be correct, but D3.JS provides much more to its user than just visualization, such as:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Efficient <a id="id2" class="indexterm"/>selection of items in the HTML DOM.</li><li class="listitem" style="list-style-type: disc">Binding of data to visual elements.</li><li class="listitem" style="list-style-type: disc">Specifications on handling the addition and removal of data items.</li><li class="listitem" style="list-style-type: disc">The ability to style DOM elements dynamically.</li><li class="listitem" style="list-style-type: disc">Definition of an interaction model for the user with the data.</li><li class="listitem" style="list-style-type: disc">The ability to specify transitions between data visualizations based upon dynamic changes in data.</li><li class="listitem" style="list-style-type: disc">D3.js helps you bring data to life using<a id="id3" class="indexterm"/> <span class="strong"><strong>HTML</strong></span>, <a id="id4" class="indexterm"/><span class="strong"><strong>SVG,</strong></span> and <a id="id5" class="indexterm"/><span class="strong"><strong>CSS</strong></span>. It focuses on the data, the way it is presented to the user, the changes in visualization with changes in data, and the way the user interacts with data through the visualization.</li></ul></div><p>We are about to start on a fabulous journey of discovery with creating rich data visualizations with D3.js, and focusing on project-based learning of D3.js through practical examples. We will start out with the basic concepts, and then move through various examples of creating living data visualizations with D3.js.</p><p>In this first chapter, we will start with a brief overview of several of the concepts in D3.js, create a minimal D3.js application, and examine several of the tools that you can use to build D3.js applications.</p><p>Specifically, in this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A brief overview of D3.js</li><li class="listitem" style="list-style-type: disc">The key design features of D3.js, including selection, data management, interaction, animation, and modules</li><li class="listitem" style="list-style-type: disc">An introduction to development tools to get you going quickly with D3.js</li><li class="listitem" style="list-style-type: disc">A simple Hello World program using D3.js</li><li class="listitem" style="list-style-type: disc">Examining the DOM generated by D3.js with the Google Chrome Developer tools</li></ul></div><div class="section" title="A brief overview of D3.js"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>A brief overview of D3.js</h1></div></div></div><p>D3.js<a id="id6" class="indexterm"/> is a JavaScript library for manipulating DOM objects based upon data. By using D3.js and modern browsers, specifically those which can display and manipulate SVG, you can create rich visualizations of data. These visualizations not only visualize the data, but can also include descriptions to change what is shown to the user based upon the changes in the data, and the way in which the user can interact with the visuals which represent the data.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>You can get<a id="id7" class="indexterm"/> D3.js at <a class="ulink" href="http://d3js.org">http://d3js.org</a>.</p></div></div><div class="mediaobject"><img src="graphics/B04230_01_01.jpg" alt="A brief overview of D3.js"/></div><p>D3.js differs from other data visualization frameworks such as <a id="id8" class="indexterm"/>
<span class="strong"><strong>Processing</strong></span> (<a class="ulink" href="https://processing.org/">https://processing.org/</a>) in that it provides a domain-specific language for transforming the DOM based upon data, whereas tools like Processing provide a lower level direct rendering model. D3.js lets you describe the means of visualizing the data instead of coding all of the specific details to draw the pixels of the visualizations. This facilitates easy creation of visualizations by allowing D3.js to worry about the details on rendering the data, based on the standards of SVG and CSS.</p><p>A fundamental concept in D3.js is the ability to easily manipulate the DOM in a web document. This is often a complicated problem, and many <a id="id9" class="indexterm"/>frameworks (such as <span class="strong"><strong>jQuery</strong></span>) have been created to perform this task. D3.js provides capabilities similar to jQuery, and for those familiar with jQuery, much of D3.js will feel familiar.</p><p>But D3.js takes what<a id="id10" class="indexterm"/> libraries like jQuery provide and extends them to provide a more declarative nature of modifying the DOM to create visuals based on the structure of the data instead of simply being a framework for low level DOM manipulation.</p><p>This is important, as data visualization requires more than an ability to simply modify the DOM; it should also describe how the DOM should be changed when data is modified, including the way it changes when the user interacts with the visual elements representing the data.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>We will not cover jQuery in this book. Our focus will purely be on how we can manipulate the DOM using the facilities provided by D3.js. We will use D3.js constructs to apply styles instead of depending on CSS. All of this is to exemplify how to use the facilities of D3.js instead of hiding any of it with other tools.</p></div></div><p>We will examine many concepts in D3.js in detail, but let's start with a few high-level ideas in D3.js that are worth mentioning first.</p><div class="section" title="Selections"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec07"/>Selections</h2></div></div></div><p>The core <a id="id11" class="indexterm"/>operation in D3.js is <span class="strong"><strong>selection</strong></span>, which is a filtered set of DOM elements queried from the <a id="id12" class="indexterm"/>document. As the data changes (that is, it is either loaded or modified), the result of the selection filter is changed by D3.js based on how the data was changed. Hence, the visual representation also changes.</p><p>D3.js uses the<a id="id13" class="indexterm"/> W3C selectors API (<a class="ulink" href="http://www.w3.org/TR/selectors-api/">http://www.w3.org/TR/selectors-api/</a>) for identifying the items in the DOM. This is a mini-language consisting of predicates that can filter the elements in the DOM by tag, class, id, attribute, containment, adjacency, and several other facets of the DOM. Predicates can also be intersected or unioned, resulting in a rich and concise selection of elements.</p><p>Selections are implemented by D3.js through the global namespace <code class="literal">d3</code>, which provides the <code class="literal">d3.select()</code> and <code class="literal">d3.selectAll()</code> functions. These functions utilize the mini-language and return, respectively, the first or all items matching the specification. Using the result of these selections, D3.js provides <a id="id14" class="indexterm"/>additional abilities for modifying those elements based <a id="id15" class="indexterm"/>upon your data using a process <a id="id16" class="indexterm"/>known as <span class="strong"><strong>data binding</strong></span>.</p></div><div class="section" title="Data and data binding"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>Data and data binding</h2></div></div></div><p>The data<a id="id17" class="indexterm"/> in D3.js is <a id="id18" class="indexterm"/>
<span class="strong"><strong>bound</strong></span> to the DOM elements. Through <a id="id19" class="indexterm"/>
<span class="strong"><strong>binding</strong></span>, D3.js tracks a collection <a id="id20" class="indexterm"/>of objects along with their properties, and based upon rules that you specify, it modifies the DOM of the document based upon that data. This binding is performed through various operators provided by D3.js, which can easily be used to describe the mapping of the visual representation of the data. At this point, we'll introduce the three stages of data binding, and dive into more details on the process in <a class="link" href="ch02.html" title="Chapter 2. Selections and Data Binding">Chapter 2</a>, <span class="emphasis"><em>Selections and Data Binding</em></span>.</p><p>The process of binding in D3.js consists of<a id="id21" class="indexterm"/> three stages: <span class="strong"><strong>Enter</strong></span>, <span class="strong"><strong>Update</strong></span>, and <span class="strong"><strong>Exit</strong></span>. When<a id="id22" class="indexterm"/> performing a selection for the first time with D3.js, you<a id="id23" class="indexterm"/> can specify the data that is to be bound and needs to be entered. You can also specify the code to be executed for each of these stages.</p><p>When data is first joined into a selection, new visuals will need to be created in the DOM for each data item. This is performed using the enter process which is started by calling the <code class="literal">.enter()</code> function. Code that you specify after the <code class="literal">.enter()</code> function will be used to specify each and every piece of data that is represented visually, and D3.js will use this code to automatically generate the DOM that is required instead of you needing to code it all in detail.</p><p>As the application modifies this bound data, we will execute the selection repeatedly. D3.js will make a note of the existing visuals and the data they are bound to, and allow us to make modifications to the visuals based upon the way the data changed.</p><p>If data items are removed, we can use the D3.js <code class="literal">.exit()</code> function in a selection to inform D3.js to remove the visuals from the display. Normally, this is done by telling D3.js to remove the associated DOM elements, but we can also execute animations to make the removal demonstrate to the user how the visual is changing instead of a jarring change of display.</p><p>If we create a selection without an explicit reference to <code class="literal">.enter()</code> or <code class="literal">.exit()</code>, we are informing D3.js that we want to potentially make modifications to the visuals that are already bound to the data. This gives us the chance to examine the properties of each data item and instruct D3.js on changing the bound visuals appropriately.</p><p>This separation of enter, update, and exit processes allows for very precise control of the visual element lifecycle. These states allow you to update visuals as the data changes either internally or through user interaction. It also gives you the ability to provide well-defined transitions or animations for each of the three states, which are essential for dynamic data <a id="id24" class="indexterm"/>visualizations<a id="id25" class="indexterm"/> that demonstrate data not simply statically but also how it changes through motion.</p></div><div class="section" title="Interaction and animation"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>Interaction and animation</h2></div></div></div><p>D3.js provides <a id="id26" class="indexterm"/>facilities for animating the visual elements based upon the <a id="id27" class="indexterm"/>changes in data or upon events created by the user such as mouse events. These are <a id="id28" class="indexterm"/>performed by integrating with the events in the DOM using the <code class="literal">.on()</code> function as part of a selection.</p><p>D3.js event handlers are <a id="id29" class="indexterm"/>similar to those provided by jQuery. However, instead of just calling a function, they also expose the bound data item to the function, and if you want, the index of the data item in a collection. This saves us from having to write code that looks up the data item based upon things like mouse positions, and therefore, greatly simplifies our code.</p><p>Additionally, through integration with the enter, update, and exit selection processes, we can declaratively code scene transitions in each of these scenarios. These transitions expose the <code class="literal">style</code> and <code class="literal">attr</code> operators of the selections. Any changes that we make to those properties are noticed by D3.js, which will then apply an <span class="strong"><strong>interpolator</strong></span><a id="id30" class="indexterm"/> to transition the property values from the previous to the new values over a given period of time.</p><p>By using interpolation, we can avoid coding the repeated changes in the values of the visual properties (such as location and color) at each step of the animation. D3.js does all this for us automatically!</p><p>Additionally, D3.js automatically manages the scheduling of animations and transitions. This removes the need for you to manage complicated concurrency issues and guarantees exclusive access to the resources for each element along with highly optimized animation through a shared timer managed by D3.js.</p></div><div class="section" title="Modules"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>Modules</h2></div></div></div><p>D3.js provides a number<a id="id31" class="indexterm"/> of <span class="strong"><strong>modules</strong></span> of prebuilt functionality for helping us code many of the things that<a id="id32" class="indexterm"/> we need to do for creating rich and interactive data visualizations. These modules in D3.js are grouped into a number of generated categories based upon the capabilities provided to the programmer.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Shapes</strong></span>: The <a id="id33" class="indexterm"/>shapes module<a id="id34" class="indexterm"/> gives us numerous prebuilt visuals including, and not limited to, lines, arcs, areas, and scatterplot symbols. By using D3.js shapes, we can simply add the geometric renderings to the visualization, and not worry about drawing each in detail, pixel by pixel.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Scales</strong></span>: This <a id="id35" class="indexterm"/>module <a id="id36" class="indexterm"/>gives us a means of converting data values into coordinates within the browser. These save us from coding repetitive, complex, and often error-prone translations by providing them out of the box. They also provide the basis for generating the visuals for axes, again saving us much effort in rendering visuals that would otherwise be complicated.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Layouts</strong></span>: The layouts module<a id="id37" class="indexterm"/> gives us the tools to easily (if not automatically) calculate<a id="id38" class="indexterm"/> the visual relationships between the elements in our visualizations. This is often the most complicated part of data visualizations, and D3.js provides us with many prebuilt hierarchical and physical layouts that make our lives as programmers much simpler.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Behaviors</strong></span>: This <a id="id39" class="indexterm"/>module provides implementations of the <a id="id40" class="indexterm"/>common user interaction patterns. An example would be a selection behavior that implements listening to the mouse events on visual elements, and<a id="id41" class="indexterm"/> changes the presentation of the item to represent that the user has selected it.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Data-processing modules</strong></span>: D3.js also <a id="id42" class="indexterm"/>includes various <a id="id43" class="indexterm"/>data-processing utilities such as nest and cross operators, and parsers for data in formats, such as CSV<a id="id44" class="indexterm"/>, JSON, TSV, and for data, in date and number formats.</li></ul></div><p>We will discuss these modules in detail in their dedicated chapters.</p></div></div></div>
<div class="section" title="Tools for creating and sharing D3.js visualizations"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Tools for creating and sharing D3.js visualizations</h1></div></div></div><p>D3.js applications can be built <a id="id45" class="indexterm"/>using many, if not any, web development <a id="id46" class="indexterm"/>tools. The choice of tool is often dependent upon the individual coder, as each platform (.Net, Node.JS, Ruby on Rails, and so on) provides their own (and many third-party) tools.</p><p>This book will not be prescriptive and specify editors. Instead, it will generally refer you to the online and functional examples of all the code, and leave it to the readers to reproduce them in their own development environment.</p><p>The examples in this book will be delivered using a combination of <a id="id47" class="indexterm"/>
<span class="strong"><strong>Js Bin</strong></span> (<a class="ulink" href="http://jsbin.com/">http://jsbin.com/</a>) and <a id="id48" class="indexterm"/>
<span class="strong"><strong>bl.ocks.org</strong></span> (<a class="ulink" href="http://bl.ocks.org/">http://bl.ocks.org/</a>), and we will use the Google Chrome Developer tools for examining the DOM in our examples. A brief introduction to each is therefore worthwhile, as each example in this book will be linked to an example on bl.ocks.org, which itself will contain a link to the code in Js Bin for you to play with dynamically.</p><div class="section" title="Js Bin"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>Js Bin</h2></div></div></div><p>Js Bin (<a class="ulink" href="http://jsbin.com/">http://jsbin.com/</a>) is a <a id="id49" class="indexterm"/>website that functions as a development <a id="id50" class="indexterm"/>tool for facilitating the quick creation and sharing of<a id="id51" class="indexterm"/> simple JavaScript applications that run within the browser. It provides many features, including saving and sharing of HTML and JavaScript, real-time update of the UI while you are editing, and a very cool ability to push your code and data to GitHub.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>GitHub<a id="id52" class="indexterm"/> is a free code sharing and source code management tool. If <a id="id53" class="indexterm"/>you are not familiar with it, check it out at <a class="ulink" href="http://www.github.com">http://www.github.com</a>.</p></div></div><p>I think that Js Bin provides one of the least-friction means of getting up and coding with D3.js. You can simply go to the website, start editing in HTML, CSS, or JavaScript, and see the results as you type in the browser pane. No need for installing any development tools or web servers!</p><p>As an example of Js Bin, the following link will take you to the first of our examples, the canonical Hello World application<a id="id54" class="indexterm"/> written purely in HTML. <a class="ulink" href="http://jsbin.com/zimeqe/edit?html,output">http://jsbin.com/zimeqe/edit?html,output</a>.</p><div class="mediaobject"><img src="graphics/B04230_01_02.jpg" alt="Js Bin"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>Don't worry right now about the code embedded in HTML in this demonstration. We will again look at this example along with more complicated ones later in this chapter.</p></div></div><p>The preceding<a id="id55" class="indexterm"/> screenshot displays a single bin, a combination of HTML, CSS, and<a id="id56" class="indexterm"/> JavaScript that is stored within Js Bin's servers. The Js Bin user interface provides multiple tabs/panes for the HTML, CSS, JavaScript, Console, and HTML output from the code in the bin. With <span class="strong"><strong>Auto-run JS</strong></span> selected, the output will be regenerated on every interactive change to any of the code.</p><p>This makes Js Bin excellent for interactively demonstrating and creating D3.js visualizations.</p></div><div class="section" title="bl.ocks.org"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>bl.ocks.org</h2></div></div></div><p>bl.ocks.org (<a class="ulink" href="http://bl.ocks.org">http://bl.ocks.org</a>) is a service <a id="id57" class="indexterm"/>for D3.js code examples that you place on GitHub, a <a id="id58" class="indexterm"/>free source code and sharing repository, in an<a id="id59" class="indexterm"/> entity known as a <a id="id60" class="indexterm"/>gist. A gist is simply one or more reusable and sharable piece of code that are managed by GitHub. They are an excellent means of remembering and sharing small code examples.</p><p>bl.ocks.org was created by Mike Bostock, the original creator of D3.js. It is able to create great D3.js visualizations using gists, provided that the gist itself is a piece of D3.js code. Many, if not most, D3.js examples on the Web are presented as examples on bl.ocks.org, and this book will follow this model.</p><p>For a <a id="id61" class="indexterm"/>demonstration, open <a class="ulink" href="http://bl.ocks.org/d3byex/ed79b9fee311091333d6">http://bl.ocks.org/d3byex/ed79b9fee311091333d6</a>, which takes you to a <a id="id62" class="indexterm"/>bl.ock.org <a id="id63" class="indexterm"/>version of the <span class="strong"><strong>Hello World</strong></span> example. Opening the link will present you with the following content.</p><div class="mediaobject"><img src="graphics/B04230_01_03.jpg" alt="bl.ocks.org"/></div><p>This bl.ock follows a pattern that will be used throughout the book. Each example will be in its own bl.ocks.org and consist of a title, the D3.js code in operation, a link to live code on Js Bin, and then the HTML and any data that is in use in the example.</p><p>At the very top of the page, there is a link that you can click which will also take you to the gist on GitHub.</p><div class="mediaobject"><img src="graphics/B04230_01_04.jpg" alt="bl.ocks.org"/></div><p>The link displayed in the preceding <a id="id64" class="indexterm"/>screenshot takes you to the following page at <a class="ulink" href="https://gist.github.com/d3byex/ed79b9fee311091333d6">https://gist.github.com/d3byex/ed79b9fee311091333d6</a>
</p><div class="mediaobject"><img src="graphics/B04230_01_05.jpg" alt="bl.ocks.org"/></div><p>This code is not dynamic like the one on Js Bin, but you can click on the <span class="strong"><strong>Download Zip</strong></span> button, and all the files in the gist get downloaded to your system as a ZIP file.</p></div></div>
<div class="section" title="Google Chrome and Developer tools"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Google Chrome and Developer tools</h1></div></div></div><p>D3.js applications can be<a id="id65" class="indexterm"/> developed in any number of tools. In this book, we will use<a id="id66" class="indexterm"/> Google Chrome as a browser, and use its embedded development tools. You can also use Firefox or Internet Explorer and their respective development plugins. Theoretically, all the examples will run identically in all three browsers, but have only been tested in Google Chrome.</p><p>You can access the developer tools from the Chrome settings button, or by using the key combination of <span class="emphasis"><em>option</em></span> + <span class="emphasis"><em>command</em></span> + <span class="emphasis"><em>I</em></span> (on Mac) or <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>I</em></span> (on Windows). Pressing the <span class="emphasis"><em>F12</em></span> button also takes you to the Chrome Developer tools on a Windows platform.</p><p>The following screenshot<a id="id67" class="indexterm"/> demonstrates the Google Chrome<a id="id68" class="indexterm"/> Developer tools open on the <span class="strong"><strong>Epicyclic Gearing</strong></span> bl.ock<a id="id69" class="indexterm"/> at <a class="ulink" href="http://bl.ocks.org/mbostock/1353700">http://bl.ocks.org/mbostock/1353700</a>
</p><div class="mediaobject"><img src="graphics/B04230_01_06.jpg" alt="Google Chrome and Developer tools"/></div><p>On opening the developer tools, you will be presented with a panel that opens in the browser which displays the details of the content on the page.</p><div class="mediaobject"><img src="graphics/B04230_01_07.jpg" alt="Google Chrome and Developer tools"/></div><p>In this case the pane <a id="id70" class="indexterm"/>opens on the right (you can configure the location where it opens), and displays the HTML for the page with the main SVG element of the page <a id="id71" class="indexterm"/>highlighted. While selecting nodes in HTML, the tools will highlight that element in the web page, and display the selected details for the element, in this case, the styles. We will use these tools in <a class="link" href="ch02.html" title="Chapter 2. Selections and Data Binding">Chapter 2</a>, <span class="emphasis"><em>Selections and Data Binding</em></span>, to demonstrate how D3.js binds data to the DOM elements, and in later chapters to understand how.</p></div>
<div class="section" title="Hello World &#x2013; D3.js style"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Hello World – D3.js style</h1></div></div></div><p>Now let's apply what <a id="id72" class="indexterm"/>we have learned in this chapter by stepping through an example, and see how we use D3.js to modify the DOM. The example will be the same as the one we just saw in the previous section; we'll walk through it to see how it functions.</p><p>The following is the entire entire HTML for the application:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta name="description" content="D3byEX 1.1&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src="http://d3js.org/d3.v3.min.js" 
            charset="utf-8"&gt;&lt;/script&gt;
    &lt;script&gt;
      d3.select('body')
        .append('h1')
        .text('Hello World!');
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>bl.ock (1.1): <a class="ulink" href="http://goo.gl/7KkIuC">http://goo.gl/7KkIuC</a>
</p></div></div><p>The code appends a level<a id="id73" class="indexterm"/> one header using an <code class="literal">h1</code> tag to the body tag of the document. The <code class="literal">h1</code> tag then has its content set to the text <code class="literal">Hello World</code>. And as we saw earlier, the output in the browser looks like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04230_01_08.jpg" alt="Hello World – D3.js style"/></div><p>There are two primary parts to this application, both of which we will see in almost every example. The first part includes a reference to the D3.js script, which is performed with the following code placed just inside the <code class="literal">&lt;body&gt;</code> tag:</p><div class="informalexample"><pre class="programlisting">&lt;script src="http://d3js.org/d3.v3.min.js" 
           charset="utf-8"&gt;&lt;/script&gt;</pre></div><p>This references the minified D3.js file directly from the<a id="id74" class="indexterm"/> D3.js (<a class="ulink" href="http://d3js.org/">http://d3js.org/</a>) website. You can also copy this file and place it locally on your web server or in a Web project. Since all the examples in this book are online, we will always use this URL.</p><p>Note that we also have to specify <code class="literal">charset="utf-8</code>". This is normally not required for most JavaScript libraries, but D3.js is UTF-8 encoded and not including this can cause issues. So, make sure you don't forget this attribute.</p><p>The actual D3.js code in this example consists of the following three functions placed within another <code class="literal">&lt;script&gt;</code> tag within the body of the document.</p><div class="informalexample"><pre class="programlisting">d3.select('body')
  .append('h1')
  .text('Hello World!');</pre></div><p>Let's examine how this puts the text in the web page.</p><div class="informalexample"><pre class="programlisting">d3.select('body')</pre></div><p>All D3.js statements will start with the use of the <code class="literal">d3</code> namespace. This is the root of where we start accessing all the D3.js functions. In this line, we call the <code class="literal">.select()</code> function, passing its <code class="literal">body</code>. This is telling D3.js to find the first body element in the document and return it to us for performing other operations upon it.</p><p>The <code class="literal">.select()</code> function returns a D3.js object representing the body DOM object. We can immediately call <code class="literal">.append('h1')</code> to add the header element inside the body of the document.</p><p>The <code class="literal">.append()</code> function returns another D3.js object, but this one represents the new <code class="literal">h1</code> DOM element. So all we need to do is to make a <span class="strong"><strong>chained</strong></span> call: <code class="literal">.text('Hello World!')</code>, and our code is complete.</p><p>This process of <a id="id75" class="indexterm"/>calling functions in this manner is referred to in D3.js parlance as <a id="id76" class="indexterm"/>
<span class="strong"><strong>chaining, </strong></span>and in general, it is referred to as a<a id="id77" class="indexterm"/> <span class="strong"><strong>fluent</strong></span> API in programming languages. This chaining is the aforementioned mini-language. Each chained D3.js function call further specifies the operation, allowing you to very easily describe how you want to modify the DOM through chained method calls.</p><p>This sometimes feels strange to those who have not had experience in using a fluent syntax, but once you get used to it, I guarantee that you will see the reason behind using this type of syntax. As we will see through the examples that we cover, this provides us with a very concise means of declaratively instructing D3.js on what we want in our visualization.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>For those familiar with jQuery, this syntax will look familiar. An equivalent piece of code could be written in JQuery as <code class="literal">$('body').append('h1').text('Hello World');</code>
</p><p>But as we will see in more complex examples, the features provided by D3.js will give us much more power to create data visualizations than can be done with jQuery.</p></div></div></div>
<div class="section" title="Examining the DOM generated by D3.js"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Examining the DOM generated by D3.js</h1></div></div></div><p>Now let's take a quick look <a id="id78" class="indexterm"/>at the DOM that was created by this code using the Chrome Developer Tools. Open the developer tools using the instructions given earlier in the chapter. I prefer mine to be displayed to the right of the page, and the book will follow this convention.</p><div class="mediaobject"><img src="graphics/B04230_01_09.jpg" alt="Examining the DOM generated by D3.js"/></div><p>Since this <a id="id79" class="indexterm"/>example (and all the examples in this book) is hosted within Js Bin, there is a bunch of HTML content generated automatically and injected into our page by the backend of Js Bin. To find the element corresponding to the text generated by our code, you can drill through the DOM in the explorer. Otherwise, you can right-click on the element in the output pane of the browser, and select <span class="strong"><strong>Inspect Element</strong></span> as seen in the following screenshot:</p><div class="mediaobject"><img src="graphics/B04230_01_10.jpg" alt="Examining the DOM generated by D3.js"/></div><p>Then you can move directly to the element in the developer tools.</p><div class="mediaobject"><img src="graphics/B04230_01_11.jpg" alt="Examining the DOM generated by D3.js"/></div><p>In the preceding <a id="id80" class="indexterm"/>screenshot, we can visually verify that the <code class="literal">&lt;body&gt;</code> tag had a new <code class="literal">&lt;h1&gt;</code> tag added with the text as we desired.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Summary</h1></div></div></div><p>In this chapter, we looked at several high level concepts in D3.js: selections, data, interactions and animation, and modules. Then we briefly covered several of the tools that can be used to build D3.js applications, and which will be used in examples that follow in the remainder the book: Js Bin, bl.ocks.org, Google Chrome, and Google Chrome Developer tools. We closed the chapter with a very simple example that demonstrates how to include D3.js in your application and performing a simple selection that inserts content into the web page.</p><p>In the next chapter, we will expand upon the concept of selection and use it to bind data to visual elements in the DOM. We will expand our use of D3.js to create and modify DIV elements. Further on in <a class="link" href="ch03.html" title="Chapter 3. Creating Visuals with SVG">Chapter 3</a>, <span class="emphasis"><em>Creating Visuals with SVG</em></span>, we will get into the real power of D3.js by using it to manipulate SVG.</p></div></body></html>