<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Working with Sets</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will cover the following recipes:</p>
<ul>
<li>Adding and deleting items from a Set</li>
<li>Creating a Set from existing data</li>
<li>Adding and deleting items from a WeakSet</li>
<li>Creating a WeakSet from existing data</li>
<li>Finding the union of two sets</li>
<li>Finding the intersection of two sets</li>
<li>Finding the difference between two sets</li>
<li>Creating a class that wraps a Set to work with more complex types</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p>For our final chapter, we'll be taking a look at two more new, related types. <kbd>Set</kbd> and <kbd>WeakSet</kbd>, like <kbd>Map</kbd> and <kbd>WeakMap</kbd>, are collections of other values. However, rather than creating relationships between pairs of values, <kbd>Set</kbd> and <kbd>WeakSet</kbd> create a relationship between all entries in the collection. These data structures ensure that there are no duplicated entries. If a new item evaluates as equal with another member, it won't be added to the <kbd>Set</kbd>.</p>
<p>The recipes in this chapter will illustrate how to implement different behaviors with the set classes.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding and deleting items from a Set</h1>
                </header>
            
            <article>
                
<p>We will start out with the simplest possible tasks involving a <kbd>Set</kbd>. In this recipe, we'll take a look at how to add and delete items from a <kbd>Set</kbd> using the respective instance methods.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-01-add-remove-from-set</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a <kbd>main</kbd> function. In that function, create a new <kbd>Set</kbd> instance, then add and remove a few items from it:</li>
</ol>
<pre style="padding-left: 90px">// main.js<br/>export function main() {<br/>    const rocketSet = new Set();<br/>    rocketSet.add('US: Saturn V');<br/>    rocketSet.add('US: Saturn V');<br/>    rocketSet.add('US: Falcon Heavy');<br/>    console.log(rocketSet);<br/>    rocketSet.delete('US: Falcon Heavy');<br/>    console.log(rocketSet);<br/>}</pre>
<ol start="5">
<li>Start your Python web server, and open the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
</ol>
<ol start="6">
<li>You will see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/224ef062-02a4-4f7d-94e1-205afe5216ae.png" style="width:42.08em;height:26.25em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>A set is a collection of data. But it behaves differently than the more familiar <kbd>Array</kbd> type. Like mathematical sets, a <kbd>Set</kbd> instance is meant to only have a single copy of an element. That is, if you had an <kbd>Array</kbd> of numbers and a <kbd>Set</kbd> of numbers, the <kbd>Array</kbd> could contain the number <kbd>138</kbd> several times, but the <kbd>Set</kbd> could only contain a single copy if it. </p>
<p>Membership to a Set is evaluated similarly to the <kbd>===</kbd> operator. In our case, you can see that <kbd>US: Saturn V</kbd> is only added to the set a single time, despite being provided as an argument to <kbd>add</kbd> twice. Next, you can see that <kbd>US: Falcon Heavy</kbd> is removed after being initially added. Subsequently, the set only has a single member.</p>
<div class="packt_infobox">To learn more about sets, visit the Mozilla developer documentation at the following link:<br/>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set</a>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a Set from existing data</h1>
                </header>
            
            <article>
                
<p>We just saw how to add values individually to sets. This can be tedious, however. For example, if we are working with a dataset that might be very large or unknown ahead of time, it would be nice to initialize a map with a function call, rather than hundreds or thousands.</p>
<p>In this recipe, we'll take a look at how to create a new Set with the preexisting data.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-02-create-set-from-data</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a <kbd>main</kbd> function with an array of string. Create a new set with that array as a constructor argument:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const rockets = [ 
    'US: Saturn V', 
    'US: Falcon Heavy', 
    'USSR: Soyuz', 
    'CN: Long March', 
    'US: Saturn V', 
    'US: Saturn V' 
  ];
 
  const rocketSet = new Set(rockets); 
  console.log(rockets); 
}  </pre>
<ol start="5">
<li>Start your Python web server, and the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
</ol>
<ol start="6">
<li>You should see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8d2f887e-24ee-42b7-b9f7-43de30197478.png" style="width:49.50em;height:31.00em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In the preceding recipe we see how to create a <kbd>Set</kbd> with existing data. The constructor for a <kbd>Set</kbd> takes an <kbd>iterable</kbd> as an argument. The most familiar <kbd>iterable</kbd> is an array. In the case of the <kbd>Set</kbd>, each element in the <kbd>iterable</kbd> (array) is added to the collection in order. As we mentioned in the preceding recipe, membership of a <kbd>Set</kbd> is determined using a similar comparison to the <kbd>===</kbd> operator. Sets don't allow duplicate values. Thus, we only see a single <kbd>US: Saturn V</kbd> in the <kbd>&lt;entries&gt;</kbd> section of the output.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding and deleting items from WeakSet</h1>
                </header>
            
            <article>
                
<p>Now, we'll take a look at the corresponding weak data structure, <kbd>WeakSet</kbd>. In this recipe, we'll look at how to add and delete items from a <kbd>WeakSet</kbd>, using the respective instance methods, and at some restrictions on membership.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-03-add-remove-from-weak-set</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a new class named <kbd>Rocket</kbd> that takes a constructor argument <kbd>name</kbd> and assigns it to an instance property:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
}    </pre>
<ol start="5">
<li>Create a <kbd>main</kbd> function with some <kbd>Rocket</kbd> instances and a <kbd>WeakMap</kbd> instance. Add and remove the instances from the set:</li>
</ol>
<pre style="padding-left: 90px">// main.js <br/>export function main() {<br/>const saturnV = new Rocket('US: Saturn V');<br/>const falconHeavy = new Rocket('US: Falcon Heavy');<br/>const rocketSet = new WeakSet();<br/>rocketSet.add(saturnV);<br/>rocketSet.add(saturnV);<br/>rocketSet.add(falconHeavy);<br/>console.log(rocketSet);<br/>rocketSet.delete(falconHeavy);<br/>console.log(rocketSet);<br/>// throw error<br/>rocketSet.add('Saturn V');<br/>}</pre>
<ol start="6">
<li>Start your Python web server, and open the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
<li>You will see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b01fec77-d825-4111-8468-349ee0678e81.png" style="width:53.67em;height:33.58em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Membership to a <kbd>WeakSet</kbd> is evaluated similarly to the <kbd>===</kbd> operator. Looking at the  preceding, we can see that two <kbd>Rocket</kbd> instances with the name <kbd>US: Saturn V</kbd> are added to the set. This is, of course, because the set isn't comparing name properties, but object instances. Thus, we'll see two rather than one (unique names) or three (number of times added) <kbd>US: Saturn V</kbd> entries.</p>
<p>Next, you can see that the <kbd>US: Falcon Heavy</kbd> is removed after being initially added. Subsequently, the set doesn't have that member.</p>
<p>An error is thrown when trying to add a string to the <kbd>WeakSet</kbd>. Like the keys of <kbd>WeakMap</kbd>, the elements of <kbd>WeakSet</kbd> must be objects. This is so that the <kbd>WeakSet</kbd> can only keep weak references to its entries. Thus, the memory allocated for the entries can be released when other references go out of scope.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a WeakSet from existing data</h1>
                </header>
            
            <article>
                
<p>We just saw how to create a Set from existing data. The related class <kbd>WeakSet</kbd> can be created in a similar way, but has restrictions on membership. In this recipe, we'll take a look at how to create a <kbd>WeakSet</kbd> from existing data and some restrictions on membership.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-04-create-weak-set-from-data</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a new class named <kbd>Rocket</kbd> that takes a constructor argument <kbd>name</kbd> and assigns it to an instance property:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
}    </pre>
<ol start="4">
<li>Create a <kbd>main</kbd> function with an array of rocket instances. Create a new <kbd>WeakSet</kbd> from the array. Try to add a string to <kbd>WeakSet</kbd>:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const rockets = [ 
    new Rocket('US: Saturn V'), 
    new Rocket('US: Saturn V'), 
    new Rocket('US: Saturn V'), 
    new Rocket('USSR: Soyuz') , 
    new Rocket('CN: Long March') 
  ] 
 
  const rocketSet = new WeakSet(rockets); 
  console.log(rockets);
}  </pre>
<ol start="5">
<li>Start your Python web server, and open the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
<li>You should see the following output:</li>
</ol>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/fd90e972-6cb5-43d9-9e0c-190cb807e89f.png" style="text-align: center;color: #333333;font-size: 1em;width:44.33em;height:27.75em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p class="mce-root">Just like the Set constructor, the <kbd>WeakSet</kbd> constructor takes an iterable. Each element of the array is added in turn. We'll note that multiple instances have the same <kbd>name</kbd> property. This is, of course, because they are separate <kbd>Rocket</kbd> instances, despite having the same name value.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Finding the union of two sets</h1>
                </header>
            
            <article>
                
<p>Now that we've got a good handle on sets, it's time to start performing some set operations. Sets are unordered groups of things; something you might want to do is to combine two groups into one. This operation is called a <kbd>union</kbd> of two sets. An element is in the union of two sets, if it exists in either of them.</p>
<p>In this recipe, we'll take a look at how to create a union of two <kbd>Set</kbd> instances.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-05-set-union</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a new class named <kbd>Rocket</kbd> that takes a constructor argument <kbd>name</kbd> and assigns it to an instance property:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
   }  </pre>
<ol start="4">
<li>Create a function called <kbd>union</kbd> that takes two set arguments:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
function union (set1, set2) {}  </pre>
<ol start="5">
<li>Create a <kbd>result</kbd> set. Loop through both set instances, and add each <kbd>entry</kbd> to the resultant set:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
function union (set1, set2) { 
  const result = new Set(); 
 
  set1.forEach((entry) =&gt; result.add(entry)); 
  set2.forEach((entry) =&gt; result.add(entry)); 
 
  return result; 
} </pre>
<ol start="6">
<li>Create a <kbd>main</kbd> function. Create a couple of sets with overlapping members. Log out from the union of the two sets:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const usRockets = [ 
    new Rocket('US: Saturn V'), 
    new Rocket('US: Falcon Heavy') 
  ]; 
  const americanSet = new Set(usRockets); 
  console.log('American Set', americanSet); 
 
  const allRockets = usRockets.concat([ 
    new Rocket('USSR: Soyuz'), 
    new Rocket('CN: Long March') 
  ]); 
 
  const fullSet = new Set(allRockets); 
  console.log('Full Set', fullSet); 
 
  console.log('Union', union(americanSet, fullSet)); 
}  </pre>
<ol start="7">
<li>Start your Python web server, and open the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
</ol>
<ol start="8">
<li>You should see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><span class="URLPACKT"><img src="assets/83a13115-9f0c-44e5-bf23-dc13e0bec3a5.png" style="width:38.33em;height:47.92em;"/><br/></span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p class="mce-root">In the preceding recipe, we rely on the properties of <kbd>Set</kbd> to implement the <kbd>union</kbd> operation. As stated before, sets do not store duplicate entries. So, when creating the union, we don't have to worry about adding duplicates to the resulting set, because that is taken care of for us by the class. Simply looping over all the members and adding them is sufficient to create the union set.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Finding the intersection of two sets</h1>
                </header>
            
            <article>
                
<p>Next, we'll take a look at how to find out the elements two Sets have in common. This operation is called an <kbd>intersection</kbd> of two sets. An element is in the intersection of two sets, if it exists in both of them.</p>
<p>In this recipe, we'll see how to create an intersection of two <kbd>Set</kbd> instances.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-06-set-intersection</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a new class named <kbd>Rocket</kbd> that takes a constructor argument name and assigns it to an instance property:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
   }  </pre>
<ol start="4">
<li>Create a function called <kbd>intersection</kbd> that takes two <kbd>set</kbd> arguments:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
function intersection (set1, set2) {}  </pre>
<ol start="5">
<li>Create a <kbd>result</kbd> set. Loop through the first <kbd>set</kbd> instance. Add each <kbd>entry</kbd> to the resultant <kbd>set</kbd>, if it appears in the second <kbd>set</kbd> as well:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
function intersection (set1, set2) { 
  const result = new Set(); 
 
  set1.forEach((entry) =&gt; { 
    if (set2.has(entry)) { 
      result.add(entry); 
    } 
  }); 
 
  return result; 
} </pre>
<ol start="6">
<li>Create a <kbd>main</kbd> function. Create a couple of sets with overlapping members. Log out the intersection of the two sets:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const usRockets = [ 
    new Rocket('US: Saturn V'), 
    new Rocket('US: Falcon Heavy') 
  ]; 
  const americanSet = new Set(usRockets); 
  console.log('American Set', americanSet); 
 
  const allRockets = usRockets.concat([ 
    new Rocket('USSR: Soyuz'), 
    new Rocket('CN: Long March') 
  ]); 
 
  const fullSet = new Set(allRockets); 
  console.log('Full Set', fullSet); 
 
  console.log('Intersetion', intersection(americanSet, fullSet)); 
  }  </pre>
<ol start="7">
<li>Start your Python web server, and open the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
<li>You should see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><span class="URLPACKT"><img src="assets/7f0d661d-8929-4767-89d6-9f2b0bcf3ac8.png" style="width:38.42em;height:48.00em;"/><br/></span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>An intersection of two sets is defined as all the elements that appear in both sets. In this recipe, we use the <kbd>has</kbd> method to implement an <kbd>intersection</kbd> operation. We loop over the elements of the first <kbd>Set</kbd> and check whether the second contains each element. If the second <kbd>Set</kbd> contains that element, then the <kbd>has</kbd> method will return true. If this method returns true, then we know that the element is in both <kbd>Set</kbd> instances, and we add it to the new intersection.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Finding the difference between two sets</h1>
                </header>
            
            <article>
                
<p><span>We've seen how to combine two sets with the union operation, and find their common elements with the intersection  operation</span>. The logical next step is to see how the sets differ. Next, we'll take a look at how to find out what elements one set has that another doesn't. This operation is called a <kbd>difference</kbd> of two sets. An element is in the difference of two sets, if it is in the first set, but not the second.</p>
<p>In this recipe, we'll take a look at how to find the difference between two <kbd>Set</kbd> instances.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-07-set-difference</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a new class named <kbd>Rocket</kbd> that takes a constructor argument <kbd>name</kbd> and assigns it to an instance property:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
   }  </pre>
<ol start="4">
<li>Create a function called <kbd>difference</kbd> that takes two <kbd>set</kbd> arguments:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
function intersection (set1, set2) {}  </pre>
<ol start="5">
<li>Create a <kbd>result</kbd> set. Loop through the first set instance. Add each entry to the resultant set, if it does not appear in the second <kbd>set</kbd>:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
function difference(set1, set2) { 
  const result = new Set(); 
 
  set1.forEach((entry) =&gt; { 
    if (!set2.has(entry)) { 
      result.add(entry) 
    } 
  }); 
 
  return result; 
} </pre>
<ol start="6">
<li>Create a <kbd>main</kbd> function. Create a couple of sets with overlapping members. Log out the differences of the two sets:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const usRockets = [ 
    new Rocket('US: Saturn V'), 
    new Rocket('US: Falcon Heavy') 
  ]; 
  const americanSet = new Set(usRockets); 
  console.log('American Set', americanSet); 
 
  const allRockets = usRockets.concat([ 
    new Rocket('USSR: Soyuz'), 
    new Rocket('CN: Long March') 
  ]); 
 
  const fullSet = new Set(allRockets); 
  console.log('Full Set', fullSet); 
 
  console.log('Difference 1', difference(americanSet, fullSet)); 
  console.log('Difference 2', difference(fullSet, americanSet)); 
}  </pre>
<ol start="7">
<li>Start your Python web server, and open the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
<li>You should see the following output:<span class="URLPACKT"><br/></span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7e6263e9-ae94-4c1f-b61b-4327ff90cf22.png" style="width:38.08em;height:47.67em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In the preceding recipe, we rely on the <kbd>has</kbd> method on the <kbd>Set</kbd> class that implements the <kbd>difference</kbd> operation. An element of a <kbd>difference</kbd> must appear in the first set but not the second. When looping over the first set, we know that the element is part of the first. Next, we simply have to check whether it is<span> in </span>the second using the <kbd>has</kbd> method. If this method returns false, then we know that the element is in the difference.</p>
<p>An important distinction between difference and the other two operations we've seen (union and intersection) is that it is not commutative, that is, the order of arguments matters. You can see in the preceding recipe that the result of the difference function changes depending on which set is being differentiated from the other.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a class that wraps a Set to work with more complex types</h1>
                </header>
            
            <article>
                
<p>Knowing what types we are working with is valuable. <kbd>WeakSet</kbd> has some restriction on membership, but as you may know, objects can vary quite a lot.</p>
<p>In this recipe, we'll take a look at how to create a wrapper class for <kbd>Map</kbd> in order to control what types are used in the <kbd>Map</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes that you already have a workspace that allows you to create and run ES modules in your browser. If you don't, refer to the first two chapters.</p>
<p>If you are unfamiliar with the <kbd>WeakMap</kbd> class, refer to the <em>Setting and deleting entries from a WeakMap</em> recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application, and navigate to your workspace.</li>
<li>Create a new folder named <kbd>12-08-create-class-to-wrap-set</kbd>.</li>
</ol>
<ol start="3">
<li>Create a <kbd>main.js</kbd> file that defines a new class named <kbd>Rocket</kbd> that takes a constructor argument <kbd>name</kbd> and assigns it to an instance property:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
   } </pre>
<ol start="4">
<li>Create a class <kbd>RocketSet</kbd> file that creates a new map and assigns it as an instance property in the constructor:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class RocketSet { 
  constructor () { 
    this.set = new WeakSet(); 
     }    
   } </pre>
<ol start="5">
<li>Add an <kbd>add</kbd> method that checks the type of the <kbd>key</kbd> and <kbd>value</kbd> arguments. This method should throw if the argument types are incorrect; otherwise, set the pair as an entry on the map:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class RocketSet { 
  add (rocket) { 
    if (!(rocket instanceof Rocket)) { 
      throw new Error('Members of `RocketSet` must be of type <br/>      `Rocket`'); 
    } 
 
    this.set.add(rocket); 
      } 
   } </pre>
<ol start="6">
<li>Add a <kbd>has</kbd> method that returns <kbd>true</kbd> in the contained set has that entry:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class RocketSiteMap { 
  has (rocket) { 
    return this.set.has(rocket); 
     } 
   }<br/>} </pre>
<ol start="7">
<li>Create a <kbd>main</kbd> function. Attempt to set various key and value pairs to an instance of <kbd>RocketSet</kbd>:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { <br/>  const rocketSet = new RocketSet(); 
  const saturnV = new Rocket('US: Saturn V');
  const falconHeavy = new Rocket('US: Falcon Heavy');
  const longMarch = new Rocket('Long March') ;
  rocketSet.add(saturnV); 
  rocketSet.add(falconHeavy); 
  rocketSet.add(longMarch); 
  console.log(rocketSet) ;
 
  console.log('Set has Saturn V ',rocketSet.has(saturnV));
  console.log('Set has Falcon Heavy <br/>  ',rocketSet.has(falconHeavy));
  console.log('Set has Long March ',rocketSet.has(longMarch));
 
  try { 
    rocketSet.add('Buzz Lightyear'); 
  } catch (e) { 
    console.error(e); 
  } 
} </pre>
<ol start="8">
<li>Start your Python web server and open the following URL in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
</ol>
<ol start="9">
<li>You should see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0a1ec30c-4187-4e15-87ab-dd2f878c96e2.png" style="width:43.33em;height:36.92em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>From the implementation of the <kbd>add</kbd> method, we can see where the types of the argument are being checked. The <kbd>Rocket</kbd> instances behave like other instances we've seen in other recipes, and can be checked like the others. When the incorrect type is passed as an argument to add, one of the conditionals will trigger and an error will be thrown.</p>
<p>We don't have to check the types for the <kbd>has</kbd> method; it doesn't mutate the collection, and it will return <kbd>false</kbd> anyway if the argument isn't a <kbd>Rocket</kbd>.</p>


            </article>

            
        </section>
    </body></html>