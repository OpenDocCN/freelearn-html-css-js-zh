- en: Chapter 4. Liferay Site Configuration
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Creating an organization and a standalone site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Site configuration
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating and customizing private and public pages for the site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using page templates and site templates for quick site and page creation
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Enabling local live staging
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Enabling remote live staging
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Enabling page versioning
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous chapter, we described how to model an organizational structure
    in the intranet using organizations and user groups. We also discussed their attributes,
    such as address, phone numbers, websites, services, and so on. There is one attribute
    that makes organizations and user groups a very important component of Liferay
    Portal CMS. This attribute is site. A site is set of pages that may contain applications
    and content. Users gathered within an organization or user group can have their
    site, which stores and presents information that is produced and published by
    its users (files, articles, calendar events, bookmarks, and so on). There are
    also sites that are not connected to any structured collection of users. In this
    chapter, we will discuss how to create, customize and manage sites.
  prefs: []
  type: TYPE_NORMAL
- en: Creating an organization and a standalone site
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Each organization and user group can have a site, which consists of a group
    of public and private pages organized into a tree-like structure. Public pages
    are pages accessible by anyone who has a link to the site. Private pages are pages
    that can only be accessed by logged-in users, who are members of the organization,
    user group, or standalone site. It is also possible to create a standalone site
    that is not assigned to any organization or user group. Standalone sites can additionally
    form a structure of sites, similar to the organization structure described in
    the previous chapter (for example, there can be a top-level site that has subsites).
    Organization sites are often created to store and present content and provide
    tools for users from a specific department or localization of the company. User
    group sites group information and tools used by people sharing common interests
    or people who are a part of the same project team. Standalone sites or site structures
    are used to provide a site or group of sites outside the organizational structure
    and are common for members of different user groups.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we will show you how to create an organization site and a standalone
    site. User group sites are created while setting up a user group. Unlike the organization,
    it is not possible to create a user group without the site.
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to create a site for an existing organization, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Control Panel** | **Users**|
    **Users and Organizations**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button located near the name of the organization you
    want to modify.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Edit** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Organization Site** link in the right menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the **Create Site** checkbox:![How to do it…](img/image00314.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In order to create a standalone site, perform the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Control Panel** | **Sites**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Blank Site** option.![How to do it…](img/image00315.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the **Name (Required)** and **Description** for the site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enable the **Active** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Membership Type**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enable the **Allow Manual Membership Management** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the parent site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the site has been created, it is possible to add pages, place and configure
    portlets on them, and present content. However, it is not possible to enter the
    site before the first page is added. For more information on adding pages to the
    site, refer to the *Creating and customizing private and public pages for the
    site* recipe. To enter the site after adding the first page, execute these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Go to **Admin** | **Control Panel** | **Sites**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button next to the particular site name.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Site Administration** action.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go to the **Pages** | **Site Pages** section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the set of pages you want to enter by clicking on the **Public Pages**
    or **Private Pages** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Public Pages** or **Private Pages** link (depending on the tab
    chosen in step 5).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **View pages** link.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You can also enter the site by typing the URL. The default URL addresses are
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '`http://localhost:8080/web/site-name` for public pages'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`http://localhost:8080/group/site-name` for private pages'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In the first part of the recipe, we created an organization site. The second
    part of the recipe describes how to add a standalone site. Both the organization
    and standalone sites we created are empty and require us to add and configure
    pages and portlets. All the organization and standalone sites can be accessed
    by going to **Admin** | **Control Panel** | **Sites**.
  prefs: []
  type: TYPE_NORMAL
- en: Active and inactive sites
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Each site can be set as active or inactive. The active site is accessible for
    users. An inactive site cannot be entered by users, but it is still available
    and can be activated any time. The activation option can be used when we want
    to switch the site off temporarily or when we need to turn it off permanently
    while keeping all the content as an archive.
  prefs: []
  type: TYPE_NORMAL
- en: Public and private pages and their membership type
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Each organization, user group, or standalone site consists of public and private
    pages, which are organized in two separate trees. Public pages are pages accessible
    by anyone who has a link to the site. In Liferay, these users are called guests.
    Private pages are pages that can only be accessed by logged-in users, who are
    members of the organization, user group, or standalone site. Users can become
    members of organizations, user groups, or standalone sites when they are assigned
    to them by an administrator or they join by themselves using the My Sites portlet.
    The My Sites portlet is one of the many applications available for administrators
    to place on a site's pages. Its main purpose is to show the sites of which the
    user is a member and list other sites that the user can join or request membership
    to.
  prefs: []
  type: TYPE_NORMAL
- en: The way a user becomes a member of the site is defined by the type of membership;
    the parameter can be specified while adding a new site.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are three types of membership:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Open**: This allows any user to join and leave the site. The open sites are
    shown in the My Sites portlet.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Restricted**: In this type of membership, the administrator or the owner
    manages the user''s membership of the site. Although users do not have the ability
    to join the site, they can request membership and leave it by themselves. What
    is important is whether their membership can be granted by the administrator.
    The restricted sites are also listed in the My Sites portlet.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'If users want to join to the site, they can request membership. When a user
    sends a request or when an administrator approves the request, the system sends
    an e-mail message. It is possible to define the templates of notification in `portal-ext.properties`:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '**Private**: Denies users the chance to join, request membership from, or leave
    the site. Users must be assigned to the site manually by its administrator. The
    private site does not appear in the My Sites portlet.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The membership type is strictly connected to the **Allow Manual Membership Management**
    option, which determines whether users can be manually added to and removed from
    the site by its administrators. If the option is enabled (except manual membership
    management), it also allows users to join open sites or request membership to
    restricted sites using the My Sites portlet. By default, the option is enabled
    for standalone sites and disabled for organization sites, where the users section
    of site administration is not available.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Creating an empty site versus creating a site using site templates
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: When a new site is created, the tree of pages is empty. It is worth noting that
    when an empty site is created (as described in this recipe), it is not possible
    to enter the site before adding its first page. What's more, newly created sites
    are by default set as active, which means that users can immediately access them.
    However, it is possible to create a preconfigured set of public and/or private
    pages using site templates, which consist of preconfigured sites that can consist
    of pages, portlets, and content. You can find more about templates in the *Using
    page templates and site templates for quick site and page creation* recipe.
  prefs: []
  type: TYPE_NORMAL
- en: Technical view
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: From the technical point of view, a site is a group of layouts. In the database,
    each site is stored in the `Group_` table. Understanding this concept may be difficult.
    However, it is one of the most important functionalities in Liferay.
  prefs: []
  type: TYPE_NORMAL
- en: Liferay allows the administrator to run many portal instances on the same server.
    In the basic installation, it is called Liferay.com. Remember that portal instances
    keep their data separately from every portal instance (in the same database or
    in a different database).
  prefs: []
  type: TYPE_NORMAL
- en: 'Each portal instance can aggregate many groups: organizations, user groups,
    teams, users, and sites. All of these settings have a different `groupId`, but
    all of them are stored in the same table called `Group_`. Moreover, layouts (pages)
    can be created from templates (page templates or/and sites templates). Furthermore,
    users can have their private and public pages. This information is stored in the
    `Group_` table too. To sum up, `Group_` contains the following settings:'
  prefs: []
  type: TYPE_NORMAL
- en: Group (site)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Organization
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: User group
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: User
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Layout prototype
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Layout set prototype
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To distinguish these records in the `Group_` table, there are two columns:'
  prefs: []
  type: TYPE_NORMAL
- en: '`classNameId` contains the ID of the `className` (names of classes are stored
    in the `ClassName_`) table'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`classPK` is the primary key of the specific class, for instance, user, team,
    or just group'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Every site can have only private pages or only public pages, or both. Public
    pages are accessible to anyone, especially users who aren't logged in. Private
    pages are only accessible to the users who belong to the organization where this
    site is. Each of them is a set of the pages (layouts) that define the default
    theme, language, logo, and so on. Liferay contains this information in the `LayoutSet`
    table. These settings are the default settings of each layout. For example, if
    a layout does not define a theme, this setting comes from `LayoutSet`.
  prefs: []
  type: TYPE_NORMAL
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It is also possible to manage the site using actions available in the site actions
    menu.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are several possible actions that can be performed on a site:'
  prefs: []
  type: TYPE_NORMAL
- en: The **Site Administration** action redirects the user to the site settings section
    in **Control Panel** and allows them to manage an organization's public and private
    sites
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Add Child Site** action allows us to create a subsite
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **View Child Sites** action allows us to browse the list of child sites
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Go to Public Pages** action opens the site's public pages in a new window
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Go to Private Pages** action opens the site's private pages in a new window
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Activate** action allows us to activate the site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Deactivate** action allows us to deactivate the site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Delete** action allows us to delete a site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Leave** action allows users to leave the site. This option is available
    only if the user is a member of the site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In order to perform one of the actions listed earlier, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Go to **Control Panel** | **Sites**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button, located near the name of the site you want
    to modify.![There's more…](img/image00316.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the name of the chosen action.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You may also refer to the following recipes:'
  prefs: []
  type: TYPE_NORMAL
- en: For information on creating organizations and user groups, refer to the *Managing
    an organization structure* and *Creating a new user group* recipes from [Chapter
    3](part0030.xhtml#aid-SJGS1 "Chapter 3. Working with a Liferay User / User Group
    / Organization"), *Working with a Liferay User / User Group / Organization*
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For information on customizing the site and adding pages to it, refer to the
    the *Site configuration* and *Creating and customizing private and public pages
    for the site* recipes
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For more information on creating sites, refer to the *Using page templates and
    site templates for quick site and page creation* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Site configuration
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: When a site is created, it is possible to configure each site parameter, but
    the range of possible options is determined by the origin of the site (whether
    it is an organization, users group, or a standalone site). After creating an organization
    site, the link to the **Site Settings** section will appear on the organization
    menu and its actions menu. All the new organizations and standalone sites are
    also visible on the list that you can see by going to **Admin** | **Control Panel**
    | **Sites**. The user group pages are not included in this list, but can be accessed
    from the actions menu of the particular user group by going to **Admin** | **Control
    Panel** | **User Group**.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To step through this recipe, you have to create a site first (for more information
    on how to create a site, refer to the *Creating an organization and a standalone
    site* recipe).
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we will show you how to set parameters of an organization site
    and a standalone site.
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to configure a site of an organization, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Control Panel** | **Users
    and Organizations**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button, located near the name of the organization,
    for which you want to configure the site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Manage Site** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Fill in the **Details**, **Search Engine Optimization**, **Advanced**, and **Miscellaneous**
    fields.![How to do it…](img/image00317.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In order to configure a standalone site, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Control Panel** | **Sites**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button, located near the name of the site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Site Administration** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go to the **Configuration** section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Fill in the **Details**, **Search Engine Optimization**, **Advanced** and **Miscellaneous**
    fields.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'All the available parameters are divided into the following groups:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The **Basic information** group, which contains the following sections:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Details** section contains a set of options that allow changing the Name,
    Description, Membership Options, create Public and Private pages, choose Parent
    Site or activate and deactivate the site
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Categorization** section, which provides tags and categories that can
    be assigned to a site
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Site URL** section, which allows the user to enter the friendly URL that
    will be used by both public and private pages
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Site Template** section, which shows the names of templates used to create
    public and private pages and their basic settings
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Search Engine Optimization**, which consists of the following sections:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Sitemap** section, which allows the user to send sitemap information to
    preview
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Robots** section, which allows us to set robot parameters for public and
    private pages
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Advanced**, which consists of the following sections:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Default User Associations** section, which allows us to define the default
    site roles and teams that should be assigned to the site's users
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Staging** section, which allows us to enable the staging functionality
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Analytics** section, which allows the user to define the Google Analytics
    ID or Piwik script that will be used for this set of pages
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Content Sharing** section, which allows us to decide whether subsites
    can display content from this site
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Recycle Bin** section, which allows the user to enable the recycle bin
    functionality and also move entries in trash; the trash automatically deletes
    the stored content after the indicated number of days
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Miscellaneous**, which contains the following sections:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Custom Fields** section, which provides a tool to manage values of custom
    attributes defined for the site.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Display Settings** section, which allows the user to set the language
    of the site. It is possible to use the default language option or define a custom
    default language and additional available languages for this site.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Each section can be customized in `portal-ext.properties` by setting the following
    properties:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Another interesting feature is sharing content between sites (from parent to
    children). It can be set by the `sites.content.sharing.with.children.enabled`
    property. Here are the possible values:'
  prefs: []
  type: TYPE_NORMAL
- en: '**0** disables the sharing of content with subsites for all sites'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**1** disables the sharing of content by default while allowing site administrators
    to enable it per site'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**2** enables the sharing of content by default while allowing site administrators
    to disable it per site'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The next setting corresponds to the earlier one. The administrator can be a
    member of many sites. It is possible to allow or deny content sharing across the
    sites that an administrator manages. To enable or disable this feature, set the
    following property:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'The last property settings correspond to the site map. Every site map can be
    refreshed by particular units of time (always, hourly, daily, weekly, monthly,
    yearly or newer). In the site map, pages can have a default priority (ranging
    between 0.0 to 1.0). Set the following properties to order these settings:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For more information on creating sites, refer to the *Creating an organization
    and a standalone site* and *Using page templates and site templates for quick
    site and page creation* recipes.
  prefs: []
  type: TYPE_NORMAL
- en: Creating and customizing private and public pages for the site
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As was mentioned earlier, there are two groups of pages within a site: public
    pages and private pages. Each page in a group is a part of a separate tree-like
    structure, reflecting levels in the website''s information architecture. Pages
    in a tree can differ, depending on their purpose and origin. The page could be
    just a place where the information arranged in portlets is shown. It can provide
    a range of tools for users who manage the content of the website. It is also possible
    to add a page that is the link to another page of the same or a separate site.
    In addition, pages can be created as empty pages, copies of already existing ones,
    or can be based on defined templates.'
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To step through this recipe, you have to create a site first (for more information
    how to create a site, refer to the *Creating an organization and a standalone
    site* recipe).
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The following recipe will illustrate how to create pages and arrange their structure.
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to create public pages, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Control Panel** | **Sites**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button, located near the name of the site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Site Administration** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Site Pages** link in the **Pages** section of the left menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Make sure you are in the **Public Pages** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add Page** button (indicated by **+** icon).![How to do it…](img/image00318.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the name of the page (in our example, it is **Home**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enable the **Hide from Navigation Menu** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Empty Page** type.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the page layout.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add Page** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the newly added page's name on the **Public Pages** tree.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add Child Page** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the name of the page (for instance, News).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Disable the **Hide from Navigation Menu** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Empty page** type.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the page layout.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add Page** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'As shown in the previous recipe, the creation of a page is a very simple action
    that requires us to provide some basic information, such as:'
  prefs: []
  type: TYPE_NORMAL
- en: The **Name**, which identifies the page. The name will be shown in all the portlets
    listing pages and (if the page title is not set) will be used as a page HTML title.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The layout of the page determines whether it should consist of one, two, or
    other combinations of columns.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Hide from Navigation Menu** option allows us to manage the visibility
    of the page. If the option is enabled, the page is not visible in the navigation
    menu, navigation portlet, site map portlet, and so on.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The **Type** option allows the user to choose the type of newly created page.
    There are the following types of pages:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Empty Page**: An empty page will be added'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Panel**: This allows us to create a page with predefined applications and
    navigation'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Embedded page**: This presents content from another website'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Link to URL**: This is a link to another website'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Link to a Page of This Site**: This is a link to another page within the
    current site'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Copy of a Page of This Site**: This is a copy an existing page from this
    site'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: There is also a list of page templates that can be used.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: It is worth noting that as was shown in a previous example, the level of the
    page is determined by the page that is chosen and marked before we click on the
    **Add Child Page** button. If we want to create a top-level page, the public pages
    or (private pages) branch must be selected. What's more, it is also possible to
    manage the localization of the page within a tree by simply dragging and dropping
    pages on different tree levels.
  prefs: []
  type: TYPE_NORMAL
- en: There are many others parameters that influence the page's appearance and behavior.
    These parameters can be managed by going to **Admin** | **Control Panel** | **Sites**
    | **Pages** | **Site Pages**.
  prefs: []
  type: TYPE_NORMAL
- en: Page parameters
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Page customization options (available after clicking on the page name link
    on the appropriate tab by going to **Admin** | **Control Panel** | **Sites** |
    **Pages** | **Site Pages**) are divided into the following sections:'
  prefs: []
  type: TYPE_NORMAL
- en: The **Details** sections, which allows us to change the parameters set while
    adding the page, such as **Name**, **Type**, **Friendly URL**, **Layout of the
    page**, for example **1 Column**, **2 Columns (50/50)**, **2 Columns (30/70)**
    and so on, and decide whether to hide the page from the navigation menu.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **SEO** section, which allows us to provide information that helps to optimize
    the page for search engines, such as HTML title, meta tags, and description, keywords,
    robot information, and sitemap options.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Look and Feel** section, which allows us to decide what look and feel
    should be used for the site. It is possible to use the same look and feel configuration
    as that of the whole tree (**Use the same look and feel of the public pages**
    option) or customize it by choosing the **Define a specific look and feel for
    this page** option.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **JavaScript** section, which allows us to define JavaScript code that will
    be executed at the bottom of the page.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Custom Fields** section, which provides a tool to manage the values of
    custom attributes defined for the page.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Advanced** section, which allows us to set the target and icon for the
    page that appears in the navigation menu.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Mobile Device Rules** section, which allows us to decide whether to use
    the mobile device rules of the public pages or define specific mobile device rules
    for this page.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Customization Settings** section, which allows us to decide which sections
    of the page will be customizable for users having required permissions.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Whole-tree parameters
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'There are also some parameters that can be set for the whole tree of pages
    (available after clicking on the public pages or private pages link on the corresponding
    tab by going to **Admin** | **Control Panel** | **Sites** | **Pages** | **Site
    Pages**). These parameters are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: The **Look and Feel** section, which allows us to choose the graphical theme,
    bullet styles, and color schemes for this group of pages; decide whether portlet
    borders should be visible by default; or insert custom CSS to be loaded after
    the theme
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Logo** section, which allows us to set the logo of this particular tree
    of pages and decide whether the name of the site should be shown
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **JavaScript** section, which allows us to define JavaScript code that will
    be executed at the bottom of the page
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Advanced** section, which allows us to merge the public pages of our portal's
    default site with the public pages of the current site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Mobile Device Rules** section, which allows the user to define groups
    of devices and corresponding rules
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical view
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Layouts are stored in the `Layout` table. This table has the following columns:'
  prefs: []
  type: TYPE_NORMAL
- en: '`plid`: Unique identified'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Audit fields (`groupId`, `companyId`, `userId`, `userName`, `createDate`, `modifiedDate`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`name`: Layout name'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`type_`: One of the values—`portlet`, `panel`, `embedded`, `url`, `link_to_layout`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`friendlyURL`: Friendly URL to the specific layout'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`typeSettings`: Aggregate layout settings'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Any other columns that are not important to understand this recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It is also possible to manage the page using available actions.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are several possible actions that can be performed on a site page:'
  prefs: []
  type: TYPE_NORMAL
- en: The **Permissions** action allows us to set permissions for the site page
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Copy Applications** action is used to copy all the portlets (and their
    configurations) from another page
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Go to Private Pages** action opens the site's private pages in a new window
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Delete** action allows us to delete a page
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In order to perform one of the actions listed earlier, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Control panel** | **Sites**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button, located near the name of the site whose page
    you want to modify.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Site Administration** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the page to modify.![There's more…](img/image00319.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the name of the chosen action.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Using page templates and site templates for quick site and page creation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In some cases, selected groups or even all sites within the intranet should
    contain the same set of pages, including the same set of portlets. This model
    can be employed, for example, when sites are used as department websites or project
    spaces. Liferay provides a very effective tool that allows us to create whole
    preconfigured sites or pages from templates prepared earlier. It is also possible
    to enable the connection between the template and the site, which will ensure
    live propagation of changes.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we will show you how to create a standalone site using site
    templates and how to create a single page from the page template.
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to create a standalone site using a site template, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Control Panel** | **Sites**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the template you want to use from the drop-down list (for example, **Community
    Site**).![How to do it…](img/image00320.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the **Name (Required)** and **Description** for the site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Make sure the **Active** option is enabled.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose **Membership Type**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enable or disable the **Allow Manual Membership Management** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Copy As** | **Public Pages** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the **Enable propagation of changes from the site template** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose **Parent Site**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In order to create a page using a page template, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Click on the **Actions** button, located near the name of the site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Site administration** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Site pages** section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Public Pages** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add Page** button:![How to do it…](img/image00321.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the **Name** of the page (for example, **Blog**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enable the **Hide from Navigation Menu** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Blog** page type of the page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add Page** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'There are two types of templates: **Page Templates** and **Site Templates**.'
  prefs: []
  type: TYPE_NORMAL
- en: The page template is a base for creating single pages and can be chosen when
    creating a new page. It can be configured by going to **Admin** | **Control Panel**
    | **Page Templates**. A page template stores not only page configurations, but
    also portlets with their configuration and, in some cases, content.
  prefs: []
  type: TYPE_NORMAL
- en: The site template is used for creating whole sites and can be managed by going
    to **Admin** | **Control Panel** | **Site Templates**. The list of templates is
    available when creating a standalone site, user group, or organization site. The
    site template may contain a group of pages with their configurations, portlets,
    and content.
  prefs: []
  type: TYPE_NORMAL
- en: Propagation of changes
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: When creating a site form template, it is important to decide whether the propagation
    of changes from the site template should be enabled or not. When the propagation
    is enabled, the changes made in the template are automatically applied to sites
    connected to it.
  prefs: []
  type: TYPE_NORMAL
- en: It is also worth noting that templates may allow site administrators to modify
    sites based on a template. When the template allows modifications (the **Enable
    propagation of changes from the site template** option is enabled) each modification
    of the pages of a site (site configuration and configuration of portlets) causes
    disconnection from the template. When template modifications are not allowed,
    administrators of sites cannot change the configuration of pages and their portlets.
  prefs: []
  type: TYPE_NORMAL
- en: Technical view
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Site templates and page templates are stored in the `LayoutSetPrototype` and
    `LayoutPrototype` tables. `LayoutSetPrototype` contains default information about
    layouts that belong to a specific Layout Set. As mentioned earlier, site templates
    define a set of pages that can be copied after creating the new site.
  prefs: []
  type: TYPE_NORMAL
- en: A page template is a page created to be copied in other pages. The `LayoutPrototype`
    table stores all the required information about the page prototype.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For information on creating new empty sites, refer to the *Creating an organization
    and a standalone site* recipe.
  prefs: []
  type: TYPE_NORMAL
- en: Enabling local live staging
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Staging is a powerful tool that allows users to change, deploy, and test a new
    site's configuration before it goes into production. In other words, it provides
    a testing environment that is visible only to administrators. Users can stage
    their work; this means they have the ability to work on the working copy of the
    website.
  prefs: []
  type: TYPE_NORMAL
- en: Liferay provides the site administrator with the possibility to use local live
    staging and remote live staging. When we are talking about local live staging,
    the staging site and live site are in the same Liferay instance and on the same
    server. Remote live staging provides the possibility to configure and test changes
    in a different host (which is invisible in the production environment) and deploy
    changes to the production environment.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To enable local live staging, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator and go to **Admin** | **Site Administration** | **Configuration**
    | **Site Settings**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Staging** tab in the **Advanced** section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: Staging cannot be used for sites where propagation of changes from the site
    template is enabled.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Select the **Local Live** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Decide if page versioning is necessary.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Select portlets that should be staged. Liferay defines the following rule:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: When a portlet is checked, its data will be copied to staging and it may not
    be possible to edit it directly in live. When unchecking a portlet, make sure
    that any changes done in staging are published first; otherwise, they might be
    lost.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'After saving this configuration, there should be two additional buttons on
    the site dockbar: **Staging** and **Live**.![How to do it…](img/image00322.jpeg)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Staging is a powerful functionality that gives users a tested area. After enabling
    staging, the portal gives users two areas:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Live**: Which gives a real-world view'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Staging**: Which gives an area to test and configure a specific layout or
    portlet'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Live view is a real view that is presented to all users who have access to the
    page. The staging view is a technical area where a user can change settings without
    life view influence. If an administrator is ready to submit and publish changes,
    they do it by clicking on the **Publish to Live** button.
  prefs: []
  type: TYPE_NORMAL
- en: Technically, it is a simple mechanism. Liferay creates a new group, which *friendlyURL*
    value has suffix *-staging* (for instance, */guest-staging*) This group contains
    its layouts, portlet preferences, content, and so on.
  prefs: []
  type: TYPE_NORMAL
- en: After enabling staging, Liferay invokes a background process, which copies layouts,
    portlet preferences, and specific content to the staging group (with a new `groupId`).
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'This process can be quite long, so Liferay gives the following information:'
  prefs: []
  type: TYPE_NORMAL
- en: '**An initial staging publication is in progress. The status of the publication
    can be checked on the publish screen.**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Additionally, Liferay stores information about staging in the `Group_.typeSettings`
    column:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: After enabling staging, Liferay duplicates a lot of data in the database. If
    you have a large amount of data, be careful and track database performance.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you want to configure remote live staging, refer to the next recipe. For
    information on how to enable page versioning, refer to the *Enabling page versioning*
    recipe
  prefs: []
  type: TYPE_NORMAL
- en: Enabling remote live staging
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Liferay provides remote live staging for separate testing areas and production
    environments. In the local server, we can configure and test a new layout or a
    whole site after publish event changes are propagated into the production environment.
    To achieve this, both servers have to know about themselves.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let's assume that the local server for the test environment is called `STAGING_SERVER`
    and the server machine for the production environment is `PRODUCTION_SERVER`.
  prefs: []
  type: TYPE_NORMAL
- en: 'To properly configure remote live staging, go through following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'On the local server (`STAGING_SERVER`) in `portal-ext.properties`, set the
    following properties:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'On the remote server (`PRODUCTION_SERVER`) in `portal-ext.properties`, set
    the following properties:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: Make sure that the `SHARED_SECRET` phrase has 16, 32, or 64 characters.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Restart both servers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the local (`STAGING_SERVER`) server, go to **Admin** | **Site Administration**
    | **Configuration** and open the **Staging** tab from the right menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Remote Live** radio button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Fill in the following inputs on the form:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Remote Host/IP**: IP address of `PRODUCTION_SERVER`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Remote Port**: Port number of `PRODUCTION_SERVER`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Remote Path Context**: Context name of Liferay instance (if it is the root
    (`/`) context, leave blank)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Remote Site ID**: A site identifier (`groupId`) of the site that our configuration
    will install. If the site doesn''t exist, create it.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: The `groupId` number can be found by going to **Site** | **Administration**
    | **Configuration** | **Site Settings** | **Site ID**.
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After successful configuration in the dockbar area, we should have the following
    view:![How to do it…](img/image00323.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Remote staging is a more difficult process than the local one. Liferay Portal
    uses two out-of-the-box mechanisms:'
  prefs: []
  type: TYPE_NORMAL
- en: Export layouts to the LAR file on a local server and import it on a remote server
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Transfer file by soap API using the `StagingServiceHttp` class
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Properties that we set in `portal-ext.properties` allow us to invoke the portal
    API by an external client. In order to allow it, we set `PRODUCTION_SERVER_IP`
    and `LOCAL_SERVER_IP`. There is another property called: `tunneling.servlet.shared.secret`,
    which is used to create an authorization context (permission checker) to help
    secure the remote publication process.'
  prefs: []
  type: TYPE_NORMAL
- en: After establishing a connection between servers, the system exports all the
    setting into the LAR file (a special file called Liferay Archive File) and transfers
    it by invoking `updateStagingRequest`. The entire process is implemented in the
    `com.liferay.portal.lar.backgroundtask.LayoutRemoteStagingBackgroundTaskExecutor`
    class.
  prefs: []
  type: TYPE_NORMAL
- en: 'Information about remote staging is kept in the `Group_.typeSettings` database
    column with the following properties:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Users in the local instance and remote instance must be the same, with the same
    credentials as well as roles and permissions.
  prefs: []
  type: TYPE_NORMAL
- en: Enabling page versioning
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Page versioning works only if staging is enabled. This functionality has two
    main advantages:'
  prefs: []
  type: TYPE_NORMAL
- en: Allows users to work in a parallel way on a different version of the page
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Keeps a history of the page and gives users a backup point
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Enabling page versioning is a simple process. Perform the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Login as an administrator, go to **Admin** | **Site Administration** | **Configuration**
    and open the **Staging** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Enabled On Public Pages** in the **Versioning** section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Confirm by clicking on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After enabling versioning, the dockbar should present the following information:![How
    to do it…](img/image00324.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Working with page versioning is similar to working with code repositories such
    as Git or Subversion. This mechanism is connected with all sites (`LayoutSet`)
    and with specific pages (`Layout`). This means that it is possible to version
    the entire site or a single page. Moreover, Liferay provides a feature to branch
    changes. This functionality will be useful if a user wants to reorganize the whole
    site. The next important button is the undo/redo arrow in the top-right corner
    of the dockbar.
  prefs: []
  type: TYPE_NORMAL
- en: 'From a technical point of view, Liferay defines another table that keeps branches
    and versions:'
  prefs: []
  type: TYPE_NORMAL
- en: '`LayoutSetBranch`: Stores site branches'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`LayoutBranch`: Stores layouts (pages) branches'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`LayoutRevision`: Stores layout (page) revision—undo/redo and versioning functionality'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you want to configure staging, refer to the *Enabling local live staging*
    and *Enabling remote live staging* recipes.
  prefs: []
  type: TYPE_NORMAL
