<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer114">&#13;
    <h1 class="chapterNumber">14</h1>&#13;
    <h1 id="_idParaDest-401" class="chapterTitle">HTML5, Canvas, and JavaScript</h1>&#13;
    <p class="normal">HTML5 was released in 2012 and became standardized in 2014, which caused browsers to support all sorts of new features. The introduction of HTML5 impacted the realm of possibilities that are available through JavaScript. The options for graphics, videos, interaction with graphics, and a lot more with JavaScript have increased tremendously since the introduction of HTML5, and have been so revolutionary that in fact, they led to the end of support of Flash by web browsers.</p>&#13;
    <p class="normal">HTML5 allows web page(s) to be better structured by adding new elements, such as <code class="Code-In-Text--PACKT-">&lt;header&gt;</code>. And also the DOM has improved quite a bit, which has led to increased performance. There are quite a few other additions and you'll see some of them in the chapter. Another fun (and useful) addition worth mentioning here is the <code class="Code-In-Text--PACKT-">&lt;canvas&gt;</code> element, which we'll cover in this chapter as well.</p>&#13;
    <p class="normal">JavaScript gives us a lot of amazing features already, but together with HTML5 there is a lot more possible when it comes to creating dynamic interactive web apps. This combination enables us to level up our content presentation game. We can work with files in the browser now, as well as drawing on the HTML5 canvas and adding images and text to it.</p>&#13;
    <p class="normal">In this chapter, we will be examining some of the amazing things HTML5 has brought us. The topics don't all relate to one another directly, but they have in common that they were made possible by the powerful team of HTML5 and JavaScript, and of course, that they are all fun and useful. They will allow you to create an even more dynamic and interactive experience for the users of your app.</p>&#13;
    <p class="normal">These are the topics that will be covered in this chapter:</p>&#13;
    <ul>&#13;
      <li class="bullet">Introducing HTML5 with JavaScript</li>&#13;
      <li class="bullet">Local file reader</li>&#13;
      <li class="bullet">GeoLocation</li>&#13;
      <li class="bullet">HTML5 canvas</li>&#13;
      <li class="bullet">Dynamic canvas</li>&#13;
      <li class="bullet">Drawing on the canvas with the mouse</li>&#13;
      <li class="bullet">Saving dynamic images</li>&#13;
      <li class="bullet">Media on the page</li>&#13;
      <li class="bullet">Digital accessibility</li>&#13;
    </ul>&#13;
    <div class="note">&#13;
      <p class="Information-Box--PACKT-">Note: exercise, project and self-check quiz answers can be found in the <em class="italic">Appendix</em>.</p>&#13;
    </div>&#13;
    <h1 id="_idParaDest-402" class="title">Introducing HTML5 with JavaScript</h1>&#13;
    <p class="normal">HTML5 is formally a version of HTML. It is a huge step up compared to its predecessor and enables us to make full applications in the web browser that are even accessible offline. When <a id="_idIndexMarker688"/>you read HTML5 in a job description, it often <a id="_idIndexMarker689"/>means more than just HTML. Usually, the combination of HTML5 with JavaScript, CSS, JSON, and others is included here as well.</p>&#13;
    <p class="normal">Since HTML5 the structure of our page has improved. We have new elements such as <code class="Code-In-Text--PACKT-">&lt;header&gt;</code>, <code class="Code-In-Text--PACKT-">&lt;nav&gt;</code>, and <code class="Code-In-Text--PACKT-">&lt;article&gt;</code>. And we can play videos with the <code class="Code-In-Text--PACKT-">&lt;video&gt;</code> element, which means we no longer need Flash since HTML5. And as we already mentioned we can work with the <code class="Code-In-Text--PACKT-">&lt;canvas&gt;</code> element to create visuals on the page or to represent visuals such as animation, graphs, and others. Some things that had to be done with JavaScript in the past can now be done solely with HTML, such as adding video and audio to a webpage.</p>&#13;
    <p class="normal">Changes to the DOM also improved the loading time of web page(s). We are going to dive into some of the HTML5-specific features in this chapter. Let's start with accessing files from the browser.</p>&#13;
    <h1 id="_idParaDest-403" class="title">Local file reader</h1>&#13;
    <p class="normal">Since HTML5 we <a id="_idIndexMarker690"/>can finally interact with local files using the JavaScript that runs in our browser, which is really an amazing feature. Using this feature, we can upload files from our device to our web app and read from them in our app. This means that we can attach files to forms for example, which is great in many cases whenever we need to upload some sort of file for whatever purpose, for example, adding a résumé to your online job application.</p>&#13;
    <p class="normal">Let's first make sure that the browser you are using supports this. We can run a simple script to check whether it does:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"message"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> message = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"message"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">if</span><span class="javascript"> (</span><span class="hljs-built_in">window</span><span class="javascript">.FileReader) {</span>&#13;
<span class="javascript">        message.innerText = </span><span class="hljs-string">"Good to go!"</span><span class="javascript">;</span>&#13;
<span class="javascript">      } </span><span class="hljs-keyword">else</span><span class="javascript"> {</span>&#13;
<span class="javascript">        message.innerText = </span><span class="hljs-string">"No FileReader :("</span><span class="javascript">;</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">If you open <a id="_idIndexMarker691"/>this file in your browser it should say <strong class="screenText">Good to go!</strong> when your browser supports file reading. Try updating your browser or using another one if it says <strong class="screenText">No FileReader :(</strong>. Browsers that will work are, for example, Chrome and Firefox.</p>&#13;
    <h2 id="_idParaDest-404" class="title">Uploading files</h2>&#13;
    <p class="normal">Uploading <a id="_idIndexMarker692"/>files is actually easier than you might think. We indicate we want to upload a file by adding an input of type <code class="Code-In-Text--PACKT-">file</code>. Here is a basic script that does just that:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"file"</span><span class="hljs-tag"> </span><span class="hljs-attr">onchange</span><span class="hljs-tag">=</span><span class="hljs-string">"uploadFile(this.files)"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"message"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> message = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"message"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">uploadFile</span><span class="hljs-function">(</span><span class="hljs-params">files</span><span class="hljs-function">) </span><span class="javascript">{</span>&#13;
<span class="javascript">        </span><span class="hljs-built_in">console</span><span class="javascript">.log(files[</span><span class="hljs-number">0</span><span class="javascript">]);</span>&#13;
<span class="javascript">        message.innerText = files[</span><span class="hljs-number">0</span><span class="javascript">].name;</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">It gives a blank HTML page with a <strong class="screenText">Choose file</strong> button and the <strong class="screenText">No file chosen</strong> comment behind it. Clicking on the button pops up the filesystem and you can select a file. After selecting the file, the JavaScript gets triggered. And as you can see, we are sending in the property files that are active in our body. This is a list of files. Therefore, we are grabbing the 0th index, the first element in the list. Files are represented as objects.</p>&#13;
    <p class="normal">The file <a id="_idIndexMarker693"/>object gets logged to the console here, which enables you to see all the properties and associated values. Some of the important properties are the <code class="Code-In-Text--PACKT-">name</code>, <code class="Code-In-Text--PACKT-">size</code>, <code class="Code-In-Text--PACKT-">type</code>, and <code class="Code-In-Text--PACKT-">lastModified</code>, but there are many more.</p>&#13;
    <p class="normal">We are putting the name of our file in the <code class="Code-In-Text--PACKT-">innerText</code> of our <code class="Code-In-Text--PACKT-">div</code> message. So, on the screen, you will see the name of the file appear in the <code class="Code-In-Text--PACKT-">div</code>. We can do something similar for multiple files. Here is how to upload multiple files at the same time:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"file"</span><span class="hljs-tag"> </span><span class="hljs-attr">multiple</span><span class="hljs-tag"> </span><span class="hljs-attr">onchange</span><span class="hljs-tag">=</span><span class="hljs-string">"uploadFile(this.files)"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"message"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> message = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"message"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">uploadFile</span><span class="hljs-function">(</span><span class="hljs-params">files</span><span class="hljs-function">) </span><span class="javascript">{</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">for</span><span class="javascript"> (</span><span class="hljs-keyword">let</span><span class="javascript"> i = </span><span class="hljs-number">0</span><span class="javascript">; i &lt; files.length; i++) {</span>&#13;
<span class="javascript">          message.innerHTML += files[i].name + </span><span class="hljs-string">"&lt;br&gt;"</span><span class="javascript">;</span>&#13;
<span class="javascript">        }</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">We have added the multiple attribute to our input element. This changes the text on the button; instead of <strong class="screenText">Choose file</strong> it now says <strong class="screenText">Choose files</strong>, and we can select more than one file as a result.</p>&#13;
    <p class="normal">We have changed our upload function a bit as well by adding a loop. And instead of <code class="Code-In-Text--PACKT-">innerText</code>, we are now using <code class="Code-In-Text--PACKT-">innerHTML</code>, because then we could insert a break using the HTML break. It will output the names of all the selected files below the input box on the screen.</p>&#13;
    <h2 id="_idParaDest-405" class="title">Reading files</h2>&#13;
    <p class="normal">There is a <a id="_idIndexMarker694"/>special JavaScript object for reading files. It has a very suitable name: <code class="Code-In-Text--PACKT-">FileReader</code>. Here is how we can use it to read a file.</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"file"</span><span class="hljs-tag"> </span><span class="hljs-attr">onchange</span><span class="hljs-tag">=</span><span class="hljs-string">"uploadAndReadFile(this.files)"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"message"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> message = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"message"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">uploadAndReadFile</span><span class="hljs-function">(</span><span class="hljs-params">files</span><span class="hljs-function">) </span><span class="javascript">{</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">let</span><span class="javascript"> fr = </span><span class="hljs-keyword">new</span><span class="javascript"> FileReader();</span>&#13;
<span class="javascript">        fr.onload = </span><span class="hljs-keyword">function</span><span class="hljs-function"> (</span><span class="hljs-params">e</span><span class="hljs-function">) </span><span class="javascript">{</span>&#13;
<span class="javascript">          message.innerHTML = e.target.result;</span>&#13;
<span class="javascript">        };</span>&#13;
<span class="javascript">        fr.readAsText(files[</span><span class="hljs-number">0</span><span class="javascript">]);</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">As you can see, we have to specify what needs to happen in order to connect our HTML and JavaScript to a file. We do this by adding the <code class="Code-In-Text--PACKT-">onload</code> event as an anonymous function that is sending on the event data.</p>&#13;
    <p class="normal">Reading the data can then be done using one of the <code class="Code-In-Text--PACKT-">readAs()</code> methods on the <code class="Code-In-Text--PACKT-">FileReader</code> object. We have used <code class="Code-In-Text--PACKT-">readAsText()</code> here, because we are dealing with a text file. This triggers the actual reading and the onload function that comes with it gets triggered when it's done, adding the result of the reading to our message. This accepts all file types, but not all file types will make sense. </p>&#13;
    <p class="normal">In order to see something sensible, we will have to upload something that contains plain text, such as <code class="Code-In-Text--PACKT-">.txt</code>, <code class="Code-In-Text--PACKT-">.json</code>, and <code class="Code-In-Text--PACKT-">.xml</code>. With this we can also send a file to the server or process the contents of a log file.</p>&#13;
    <h2 id="_idParaDest-406" class="title">Practice exercise 14.1</h2>&#13;
    <p class="normal">This <a id="_idIndexMarker695"/>exercise will demonstrate the process of uploading <a id="_idIndexMarker696"/>and displaying local image files in your webpage. Use the following HTML and CSS as a starting template:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!doctype </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">title</span><span class="hljs-tag">&gt;</span>Complete JavaScript Course<span class="hljs-tag">&lt;/</span><span class="hljs-name">title</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">        </span><span class="hljs-selector-class">.thumb</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">max-height</span><span class="css">: </span><span class="hljs-number">100px</span><span class="css">;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"file"</span><span class="hljs-tag"> </span><span class="hljs-attr">multiple</span><span class="hljs-tag"> </span><span class="hljs-attr">accept</span><span class="hljs-tag">=</span><span class="hljs-string">"image/*"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"output"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
        &#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">Take the following steps to complete the script element:</p>&#13;
    <ol>&#13;
      <li class="numbered">Select your page elements as values within variable objects in your JavaScript code.</li>&#13;
      <li class="numbered">Add an event listener to the <code class="Code-In-Text--PACKT-">input</code> field. The event trigger should be changed so that it immediately invokes a reader function.</li>&#13;
      <li class="numbered">Create a function to handle the reading of the selected files. </li>&#13;
      <li class="numbered">Using the event object, select the target element that triggered the event. Get the files selected within that input and assign them to the <code class="Code-In-Text--PACKT-">files</code> variable.</li>&#13;
      <li class="numbered">Loop through all the files that were selected. </li>&#13;
      <li class="numbered">Set the files by index within the loop to a variable named <code class="Code-In-Text--PACKT-">file</code>.</li>&#13;
      <li class="numbered">Set the image file as the file within the loop selected from the user input field files.</li>&#13;
      <li class="numbered">Add the newly created <code class="Code-In-Text--PACKT-">img</code> tag to the page, create an area on the page that you can output the content to, and append the new page element to it.</li>&#13;
      <li class="numbered">Create a new <code class="Code-In-Text--PACKT-">FileReader</code> object.</li>&#13;
      <li class="numbered">Add an <code class="Code-In-Text--PACKT-">onload</code> event listener to the <code class="Code-In-Text--PACKT-">fileReader</code> object to create and invoke an anonymous function that sets the source of the image as the result from the target element. Pass in the image object you just created as an argument into the function.</li>&#13;
      <li class="numbered">Using <code class="Code-In-Text--PACKT-">readAsDataURL()</code>, get the current file object and pass it into the file reader object <a id="_idIndexMarker697"/>so that it can be used once the onload <a id="_idIndexMarker698"/>completes and is added to the page.</li>&#13;
      <li class="numbered">You can now select multiple image files from your computer and have them show on your webpage.</li>&#13;
    </ol>&#13;
    <h1 id="_idParaDest-407" class="title">Getting position data with GeoLocation</h1>&#13;
    <p class="normal">We are going to look at the window object navigator now to see whether we can locate the user <a id="_idIndexMarker699"/>of the browser. This can be useful <a id="_idIndexMarker700"/>for many things, for example, suggesting restaurant locations nearby the user. We can have a look at the <code class="Code-In-Text--PACKT-">GeoLocation</code> by inspecting <code class="Code-In-Text--PACKT-">navigator.geolocation</code>. This is one way to do it:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-built_in">window</span><span class="javascript">.onload = init;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">init</span><span class="hljs-function">() </span><span class="javascript">{</span>&#13;
<span class="javascript">        </span><span class="hljs-built_in">console</span><span class="javascript">.dir(navigator.geolocation);</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">If you check out the log, you can see what the <code class="Code-In-Text--PACKT-">GeoLocation</code> object contains, and one of these methods is to get the current position of the user. Here is how to use it:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-built_in">window</span><span class="javascript">.onload = init;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">init</span><span class="hljs-function">() </span><span class="javascript">{</span>&#13;
<span class="javascript">        navigator.geolocation.getCurrentPosition(showGeoPosition);</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">showGeoPosition</span><span class="hljs-function">(</span><span class="hljs-params">data</span><span class="hljs-function">) </span><span class="javascript">{</span>&#13;
<span class="javascript">        </span><span class="hljs-built_in">console</span><span class="javascript">.dir(data);</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">This might look a bit more complicated than you'd expect, and this is because the <code class="Code-In-Text--PACKT-">getCurrentPosition()</code> method takes another method as an argument. The position data gets sent to this function and that function will use the data as input. Therefore, we will have to wrap <code class="Code-In-Text--PACKT-">console.dir()</code> in an external function (called <code class="Code-In-Text--PACKT-">showGeoPosition()</code>) that takes a parameter and outputs this data so that we can see the data in the console. We can then send this function to the <code class="Code-In-Text--PACKT-">getCurrentPosition()</code> function and see the data.</p>&#13;
    <p class="normal">If you <a id="_idIndexMarker701"/>run this, you should get a <code class="Code-In-Text--PACKT-">GeolocationPosition</code> object, with a <code class="Code-In-Text--PACKT-">coords</code> property containing your latitude and longitude. The browser might prompt whether you're okay with sharing your location. And if it <a id="_idIndexMarker702"/>doesn't show anything, make sure the preferences and settings of your computer allow the browser to use your location.</p>&#13;
    <p class="normal">Using this, you can get the location of the user and show personalized content based on it or gather data about their location for other purposes, such as analyzing where visitors are located or displaying suggestions for the user based on their location.</p>&#13;
    <h1 id="_idParaDest-408" class="title">HTML5 canvas</h1>&#13;
    <p class="normal">Did we <a id="_idIndexMarker703"/>already mention that the <code class="Code-In-Text--PACKT-">&lt;canvas&gt;</code> element is new in HTML5? This is an amazing tool that will help you create dynamic web apps. Here is how to set up the canvas:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"c1"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">And when you open this page, you will see nothing. Why? Well, the canvas element is, by default, a white rectangle that you cannot see against the white background. You could add some CSS to add a border to the canvas or a background color to the body and your canvas will be revealed.</p>&#13;
    <p class="normal">But, we probably <a id="_idIndexMarker704"/>want to put something on it and we need JavaScript to make that happen. Let's create a "drawing" on it using JavaScript:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"c1"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"c1"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      canvas.width = </span><span class="hljs-number">500</span><span class="javascript">; </span><span class="hljs-comment">//px</span>&#13;
<span class="javascript">      canvas.height = </span><span class="hljs-number">500</span><span class="javascript">; </span><span class="hljs-comment">//px</span>&#13;
<span class="javascript">      ctx.fillRect(</span><span class="hljs-number">20</span><span class="javascript">, </span><span class="hljs-number">40</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">);</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">The context of the canvas is read and stored in the <code class="Code-In-Text--PACKT-">ctx</code> variable (a common shortened version of context). We need this to be able to draw on the canvas. We change the dimensions of the canvas to <code class="Code-In-Text--PACKT-">500</code> by <code class="Code-In-Text--PACKT-">500</code> pixels. This is not the same as using CSS for width and height; this adds the HTML attributes' <code class="Code-In-Text--PACKT-">width</code> and <code class="Code-In-Text--PACKT-">height</code>.</p>&#13;
    <p class="normal">With the <code class="Code-In-Text--PACKT-">fillRect()</code> method on the context of the canvas, we can draw a rectangle on the canvas. It takes four parameters. The first two are the <em class="italic">x</em> and <em class="italic">y</em> coordinates of where the figure should be added to the canvas. The last two are the width and height of the rectangle. In our case, it's a square. Here is what the result looks like:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_01.png" alt="" width="826" height="315"/></figure>&#13;
    <p class="packt_figref">Figure 14.1: Result of the fillRect() method on our 500 px by 500 px canvas</p>&#13;
    <p class="normal">We can <a id="_idIndexMarker705"/>also change the color we are drawing with. You can get a pink square instead by replacing the JavaScript of the previous HTML document with the following:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">    &lt;<span class="hljs-name">script</span>&gt;&#13;
      <span class="hljs-keyword">let</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"c1"</span>);&#13;
      <span class="hljs-keyword">let</span> ctx = canvas.getContext(<span class="hljs-string">"2d"</span>);&#13;
      canvas.width = <span class="hljs-number">500</span>; <span class="hljs-comment">//px</span>&#13;
      canvas.height = <span class="hljs-number">500</span>; <span class="hljs-comment">//px</span>&#13;
      ctx.fillStyle = <span class="hljs-string">"pink"</span>;&#13;
      ctx.fillRect(<span class="hljs-number">20</span>, <span class="hljs-number">40</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>);&#13;
    &lt;/<span class="hljs-name">script</span>&gt;&#13;
</code></pre>&#13;
    <div class="note">&#13;
      <p class="Information-Box--PACKT-">We have now just used the word <em class="italic">pink</em>, but you can also work with hexadecimal color codes for the <code class="Code-In-Text--PACKT-">fillStyle</code> property, which could look like this for pink: <code class="Code-In-Text--PACKT-">#FFC0CB</code>. The first two characters specify the amount of red (<code class="Code-In-Text--PACKT-">FF</code> here), the third and fourth the amount of green (<code class="Code-In-Text--PACKT-">C0</code>), and the last two the amount of blue (<code class="Code-In-Text--PACKT-">CB</code>). The values differ from <code class="Code-In-Text--PACKT-">00</code> to <code class="Code-In-Text--PACKT-">FF</code> (0 to 255 in decimal numbers).</p>&#13;
    </div>&#13;
    <p class="normal">There <a id="_idIndexMarker706"/>are more things you can do with the canvas than just drawing. Let's have a look at adding text to our canvas.</p>&#13;
    <h2 id="_idParaDest-409" class="title">Practice exercise 14.2</h2>&#13;
    <p class="normal">We will be implementing shapes and using the HTML5 canvas element to draw on a webpage <a id="_idIndexMarker707"/>with JavaScript. Draw a rectangle using JavaScript. The output will resemble the following:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_02.png" alt="Shape, arrow&#13;&#10;&#13;&#10;Description automatically generated" width="826" height="263"/></figure>&#13;
    <p class="packt_figref">Figure 14.2: Exercise outcome</p>&#13;
    <p class="normal">Take the following steps:</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Add the canvas element to the page.</li>&#13;
      <li class="numbered">Set the width and height to 640 px and, using CSS, add a 1 pc border to the element.</li>&#13;
      <li class="numbered">Within the JavaScript, select the canvas element and set the <code class="Code-In-Text--PACKT-">Context</code> to <code class="Code-In-Text--PACKT-">2d</code>.</li>&#13;
      <li class="numbered">Set the fill style to red.</li>&#13;
      <li class="numbered">Create an output of the shape by using a rectangle.</li>&#13;
      <li class="numbered">Set the outline of the rectangle.</li>&#13;
      <li class="numbered">Clear <a id="_idIndexMarker708"/>the rectangle inside to make it transparent and the color of the background.</li>&#13;
    </ol>&#13;
    <h1 id="_idParaDest-410" class="title">Dynamic canvas</h1>&#13;
    <p class="normal">We can <a id="_idIndexMarker709"/>draw more advanced shapes, add images, and add text. This enables us to take our canvas skills to the next level.</p>&#13;
    <h2 id="_idParaDest-411" class="title">Adding lines and circles to the canvas</h2>&#13;
    <p class="normal">Here we <a id="_idIndexMarker710"/>will see how to draw a line and a circle. Here is <a id="_idIndexMarker711"/>a piece of sample code that draws a line:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-id">#canvas1</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas1"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas1"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      canvas.width = </span><span class="hljs-number">100</span><span class="javascript">;</span>&#13;
<span class="javascript">      canvas.height = </span><span class="hljs-number">100</span><span class="javascript">;</span>&#13;
<span class="javascript">      ctx.lineWidth = </span><span class="hljs-number">2</span><span class="javascript">;</span>&#13;
<span class="javascript">      ctx.moveTo(</span><span class="hljs-number">0</span><span class="javascript">, </span><span class="hljs-number">20</span><span class="javascript">);</span>&#13;
<span class="javascript">      ctx.lineTo(</span><span class="hljs-number">50</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">);</span>&#13;
<span class="javascript">      ctx.stroke();</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">The line width is set to <code class="Code-In-Text--PACKT-">2</code> pixels. This first puts the focus to <code class="Code-In-Text--PACKT-">0</code> (<em class="italic">x</em>) and <code class="Code-In-Text--PACKT-">20</code> (<em class="italic">y</em>). This means it is at the very left edge of the canvas, <code class="Code-In-Text--PACKT-">20</code> pixels from the top. This canvas is smaller; it is <code class="Code-In-Text--PACKT-">100</code> by <code class="Code-In-Text--PACKT-">100</code> pixels. The second point is at <code class="Code-In-Text--PACKT-">50</code> (<em class="italic">x</em>) and <code class="Code-In-Text--PACKT-">100</code> (<em class="italic">y</em>). This is what the line looks like:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_03.png" alt="Shape, square&#13;&#10;&#13;&#10;Description automatically generated" width="718" height="174"/></figure>&#13;
    <p class="packt_figref">Figure 14.3: Outcome of drawing a line to the canvas</p>&#13;
    <p class="normal">And <a id="_idIndexMarker712"/>before we move over to text, here is how to draw <a id="_idIndexMarker713"/>a circle.</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-id">#canvas1</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas1"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas1"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      canvas.width = </span><span class="hljs-number">150</span><span class="javascript">;</span>&#13;
<span class="javascript">      canvas.height = </span><span class="hljs-number">200</span><span class="javascript">;</span>&#13;
<span class="javascript">      ctx.beginPath();</span>&#13;
<span class="javascript">      ctx.arc(</span><span class="hljs-number">75</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">, </span><span class="hljs-number">50</span><span class="javascript">, </span><span class="hljs-number">0</span><span class="javascript">, </span><span class="hljs-built_in">Math</span><span class="javascript">.PI * </span><span class="hljs-number">2</span><span class="javascript">);</span>&#13;
<span class="javascript">      ctx.stroke();</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">We use the <code class="Code-In-Text--PACKT-">arc()</code> method to create a curve or a circle. It takes five parameters:</p>&#13;
    <ul>&#13;
      <li class="bullet">start position x on canvas</li>&#13;
      <li class="bullet">start position y on canvas</li>&#13;
      <li class="bullet">radius of the circle</li>&#13;
      <li class="bullet">starting angle in radians</li>&#13;
      <li class="bullet">ending angle in radians</li>&#13;
    </ul>&#13;
    <p class="normal">So, if we don't want a circle, but a semicircle, for example, we'll have to specify a different <a id="_idIndexMarker714"/>starting and end angle in radians. This time we <a id="_idIndexMarker715"/>used the <code class="Code-In-Text--PACKT-">stroke()</code> method to do the actual drawing instead of the <code class="Code-In-Text--PACKT-">fill()</code> method:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_04.png" alt="Shape, circle&#13;&#10;&#13;&#10;Description automatically generated" width="825" height="248"/></figure>&#13;
    <p class="packt_figref">Figure 14.4: Outcome of drawing a circle using the arc() method</p>&#13;
    <p class="normal"><code class="Code-In-Text--PACKT-">Stroke()</code> is only drawing the line, whereas <code class="Code-In-Text--PACKT-">fill()</code> colors the full shape.</p>&#13;
    <p class="normal">In the canvas, the shapes and lines will be added on top of each other, based on the order in which they're drawn. The first one you draw is underneath the latter ones. Exactly what happens when you paint on a real canvas. You will be seeing this in the next practice exercise.</p>&#13;
    <h3 id="_idParaDest-412" class="title">Practice exercise 14.3</h3>&#13;
    <p class="normal">In this <a id="_idIndexMarker716"/>exercise, you will be drawing a stick person using canvas:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_05.png" alt="Shape&#13;&#10;&#13;&#10;Description automatically generated" width="825" height="398"/></figure>&#13;
    <p class="packt_figref">Figure 14.5: Exercise result within the web browser canvas element</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Create the page elements and prepare to draw on the canvas.</li>&#13;
      <li class="numbered">Begin the path with an arc roughly at the top center of your canvas object.</li>&#13;
      <li class="numbered">Using <code class="Code-In-Text--PACKT-">arc()</code>, set a position for the left eye, roughly at the top left of the center of the arc you just drew, then add another arc for the right eye. Create a half arc for the mouth (the radian angle for a semicircle is pi) and fill all.</li>&#13;
      <li class="numbered">Move <a id="_idIndexMarker717"/>the draw position to the center and draw a line for the nose.</li>&#13;
      <li class="numbered">Draw the body with a line down from the center of the arc, create the left arm, and then move the draw position to do the right arm, which will be twice the width of the left arm. Move back to the center and continue down to draw the left leg, move back to the center, and draw the line for the right leg. </li>&#13;
      <li class="numbered">Move to the top, set the colour to blue, and draw a triangle for a hat.</li>&#13;
    </ol>&#13;
    <h2 id="_idParaDest-413" class="title">Adding text to the canvas</h2>&#13;
    <p class="normal">We can <a id="_idIndexMarker718"/>add text to the canvas in a similar fashion as well. In this example, we set a font and a font size, and then write our text to the canvas:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-id">#canvas1</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas1"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas1"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      canvas.width = </span><span class="hljs-number">200</span><span class="javascript">;</span>&#13;
<span class="javascript">      canvas.height = </span><span class="hljs-number">200</span><span class="javascript">;</span>&#13;
<span class="javascript">      ctx.font = </span><span class="hljs-string">"24px Arial"</span><span class="javascript">;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> txt = </span><span class="hljs-string">"Hi canvas!"</span><span class="javascript">;</span>&#13;
<span class="javascript">      ctx.fillText(txt, </span><span class="hljs-number">10</span><span class="javascript">, </span><span class="hljs-number">35</span><span class="javascript">);</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">The <code class="Code-In-Text--PACKT-">fillText()</code> method is <a id="_idIndexMarker719"/>used to add text. We have to specify three parameters: the text, the <em class="italic">x</em> position, and the <em class="italic">y</em> position. Here is the result:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_06.png" alt="Shape&#13;&#10;&#13;&#10;Description automatically generated with low confidence" width="826" height="228"/></figure>&#13;
    <p class="packt_figref">Figure 14.6: Result of using the fillText() method</p>&#13;
    <p class="normal">We have specified <code class="Code-In-Text--PACKT-">35</code> px from the top for the text to start. We can specify other aspects of the text, for example, like this:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">ctx.textAlign = "center";&#13;
</code></pre>&#13;
    <p class="normal">Here, we use the <code class="Code-In-Text--PACKT-">textAlign</code> property on the canvas to specify how the text should be aligned.</p>&#13;
    <h3 id="_idParaDest-414" class="title">Practice exercise 14.4</h3>&#13;
    <p class="normal">We will <a id="_idIndexMarker720"/>work with text and add text to your canvas element. The following exercise will demonstrate how to dynamically add text and position it within your canvas element. The result from the exercise code will look similar to this diagram:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_07.png" alt="A picture containing table&#13;&#10;&#13;&#10;Description automatically generated" width="825" height="532"/></figure>&#13;
    <p class="packt_figref">Figure 14.7: Exercise outcome</p>&#13;
    <p class="normal">Take the following steps:</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Create a simple HTML document, and add the canvas element to your page. Set the height and width to <code class="Code-In-Text--PACKT-">640</code>, and add a <code class="Code-In-Text--PACKT-">1</code> px border to the element so you can see it on the page.</li>&#13;
      <li class="numbered">Select the page elements as values within JavaScript variables.</li>&#13;
      <li class="numbered">Create a string variable with the message <code class="Code-In-Text--PACKT-">Hello World</code>.</li>&#13;
      <li class="numbered">Set a font style using the font property and a blue fill color using the <code class="Code-In-Text--PACKT-">fillStyle</code> property. You can also align the text to the left.</li>&#13;
      <li class="numbered">Add the text to the canvas with <code class="Code-In-Text--PACKT-">fillText</code> and set the <em class="italic">x</em> and <em class="italic">y</em> positions of the text.</li>&#13;
      <li class="numbered">Set a <a id="_idIndexMarker721"/>new font and color of red.</li>&#13;
      <li class="numbered">Create a loop and, using the value of the loop variable, add text to the page canvas element.</li>&#13;
    </ol>&#13;
    <h2 id="_idParaDest-415" class="title">Adding and uploading images to the canvas</h2>&#13;
    <p class="normal">We can <a id="_idIndexMarker722"/>add an image to the canvas. We can simply <a id="_idIndexMarker723"/>get an image from our page, and add it to our canvas:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"c1"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">img</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"flower"</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"flower.jpg"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-built_in">window</span><span class="javascript">.onload = </span><span class="hljs-keyword">function</span><span class="hljs-function"> () </span><span class="javascript">{</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">let</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"c1"</span><span class="javascript">);</span>&#13;
<span class="javascript">        canvas.height = </span><span class="hljs-number">300</span><span class="javascript">;</span>&#13;
<span class="javascript">        canvas.width = </span><span class="hljs-number">300</span><span class="javascript">;</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">let</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">let</span><span class="javascript"> myImage = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"flower"</span><span class="javascript">);</span>&#13;
<span class="javascript">        ctx.drawImage(myImage, </span><span class="hljs-number">10</span><span class="javascript">, </span><span class="hljs-number">10</span><span class="javascript">);</span>&#13;
<span class="javascript">      };</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">We wrap it all in an <code class="Code-In-Text--PACKT-">onload</code> event listener here because we want to be sure that the image is loaded before getting it from the DOM, else the canvas will remain empty. We use the <code class="Code-In-Text--PACKT-">drawImage()</code> method to add an image to the canvas. It takes three arguments: the <em class="italic">image</em>, the <em class="italic">x</em> position, and the <em class="italic">y</em> position.</p>&#13;
    <p class="normal">We can use one canvas inside another canvas as well. We do this exactly like we did when we <a id="_idIndexMarker724"/>were using the image. This is a very powerful <a id="_idIndexMarker725"/>feature, because it enables us to use a part of the drawing from the user input, for example. Let's look at an example of how to do this:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas1"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas2"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas3"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas1 = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas1"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx1 = canvas1.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      ctx1.strokeRect(</span><span class="hljs-number">5</span><span class="javascript">, </span><span class="hljs-number">5</span><span class="javascript">, </span><span class="hljs-number">150</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas2 = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas2"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx2 = canvas2.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      ctx2.beginPath();</span>&#13;
<span class="javascript">      ctx2.arc(</span><span class="hljs-number">60</span><span class="javascript">, </span><span class="hljs-number">60</span><span class="javascript">, </span><span class="hljs-number">20</span><span class="javascript">, </span><span class="hljs-number">0</span><span class="javascript">, </span><span class="hljs-number">2</span><span class="javascript"> * </span><span class="hljs-built_in">Math</span><span class="javascript">.PI);</span>&#13;
<span class="javascript">      ctx2.stroke();</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas3 = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas3"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx3 = canvas3.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      ctx3.drawImage(canvas1, </span><span class="hljs-number">10</span><span class="javascript">, </span><span class="hljs-number">10</span><span class="javascript">);</span>&#13;
<span class="javascript">      ctx3.drawImage(canvas2, </span><span class="hljs-number">10</span><span class="javascript">, </span><span class="hljs-number">10</span><span class="javascript">);</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">We create three canvases, to two we add shapes, and the third one is a combination of the first two. Here is what it looks like:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_08.png" alt="Graphical user interface, text, application&#13;&#10;&#13;&#10;Description automatically generated" width="826" height="173"/></figure>&#13;
    <p class="packt_figref">Figure 14.8: The result: three canvases with shapes</p>&#13;
    <p class="normal">We also can upload images to the canvas. This can be of great use when you want to show a <a id="_idIndexMarker726"/>preview to your user of something that <a id="_idIndexMarker727"/>was just uploaded, for example, a profile picture. This is very similar to grabbing the <code class="Code-In-Text--PACKT-">&lt;img&gt;</code> element from the webpage and using that element, but this time we need to read our data from the uploaded file, create a new image element, and then draw that image to the canvas. </p>&#13;
    <p class="normal">The below code does just that:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"file"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"imgLoader"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">br</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> imgLoader = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"imgLoader"</span><span class="javascript">);</span>&#13;
<span class="javascript">      imgLoader.addEventListener(</span><span class="hljs-string">"change"</span><span class="javascript">, upImage, </span><span class="hljs-literal">false</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">upImage</span><span class="hljs-function">() </span><span class="javascript">{</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">let</span><span class="javascript"> fr = </span><span class="hljs-keyword">new</span><span class="javascript"> FileReader();</span>&#13;
<span class="javascript">        fr.readAsDataURL(event.target.files[</span><span class="hljs-number">0</span><span class="javascript">]);</span>&#13;
<span class="javascript">        fr.onload = </span><span class="hljs-keyword">function</span><span class="hljs-function"> (</span><span class="hljs-params">e</span><span class="hljs-function">) </span><span class="javascript">{</span>&#13;
<span class="javascript">          </span><span class="hljs-keyword">let</span><span class="javascript"> img = </span><span class="hljs-keyword">new</span><span class="javascript"> Image();</span>&#13;
<span class="javascript">          img.src = event.target.result;</span>&#13;
<span class="javascript">          img.onload = </span><span class="hljs-keyword">function</span><span class="hljs-function"> () </span><span class="javascript">{</span>&#13;
<span class="javascript">            canvas.width = img.width;</span>&#13;
<span class="javascript">            canvas.height = img.height;</span>&#13;
<span class="javascript">            ctx.drawImage(img, </span><span class="hljs-number">0</span><span class="javascript">, </span><span class="hljs-number">0</span><span class="javascript">);</span>&#13;
<span class="javascript">          };</span>&#13;
<span class="javascript">          </span><span class="hljs-built_in">console</span><span class="javascript">.log(fr);</span>&#13;
<span class="javascript">        };</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">Every time the input of the input field changes, the <code class="Code-In-Text--PACKT-">upImage()</code> method gets executed. This method does a few things, so let's break them down. First of all, we create a new <code class="Code-In-Text--PACKT-">FileReader</code> and add the uploaded file. There is only one in this case, so we use index <code class="Code-In-Text--PACKT-">0</code>. Instead of <code class="Code-In-Text--PACKT-">readAsText()</code> that we have already seen, we are now using <code class="Code-In-Text--PACKT-">readAsDataURL()</code>, which we can use to read images.</p>&#13;
    <p class="normal">This will <a id="_idIndexMarker728"/>trigger the <code class="Code-In-Text--PACKT-">onload</code> event. And in our case, this creates <a id="_idIndexMarker729"/>a new image that can be added to the canvas later. As a source, we add the result of our read action and when the image is loaded, we change the size of our canvas to the size of our picture and then add the picture in there.</p>&#13;
    <p class="normal">These new skills will enable you to work with images on canvases, draw your own images, upload images from elsewhere, and even re-use the ones on the webpage. This can come in handy for many situations, for example, to create basic animation, or to create the functionality to upload a new profile picture to a user's profile.</p>&#13;
    <h3 id="_idParaDest-416" class="title">Practice exercise 14.5</h3>&#13;
    <p class="normal">We will practice uploading a local image to the canvas. The following exercise will demonstrate how to upload images from your local computer and have them displayed within the canvas element within your browser.</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Set up the page elements and add an input field to upload an image. Add the canvas element to the page.</li>&#13;
      <li class="numbered">In JavaScript, select the input field and the canvas elements as JavaScript objects.</li>&#13;
      <li class="numbered">Add an event listener to invoke an upload function once there is a change in the input field contents.</li>&#13;
      <li class="numbered">Create the aforementioned function to handle the upload of the image to the canvas. Using <code class="Code-In-Text--PACKT-">FileReader</code>, create a new <code class="Code-In-Text--PACKT-">FileReader</code> object. In the <code class="Code-In-Text--PACKT-">reader.onload</code> event, create a new image object.</li>&#13;
      <li class="numbered">Add an <code class="Code-In-Text--PACKT-">onload</code> listener to the image object so that when the image is loaded, set the <a id="_idIndexMarker730"/>canvas height and width to match half the image size height and width. Using <code class="Code-In-Text--PACKT-">ctx.drawImage()</code>, add the image to the canvas.</li>&#13;
      <li class="numbered">Set the img source to the result from the input value.</li>&#13;
      <li class="numbered">Use the reader object and invoke <code class="Code-In-Text--PACKT-">readAsDataURL()</code> to convert the file input value to a readable format of base64 image data that can be used within the canvas.</li>&#13;
    </ol>&#13;
    <h2 id="_idParaDest-417" class="title">Adding animations to the canvas</h2>&#13;
    <p class="normal">With the methods we have seen so far, we can already start creating animations. We do this by <a id="_idIndexMarker731"/>using loops and recursion, combined with <code class="Code-In-Text--PACKT-">timeout()</code>. These drawings with (short) time intervals result in an animation. Let's start with a basic animation:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-built_in">window</span><span class="javascript">.onload = init;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">var</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">var</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      canvas.height = </span><span class="hljs-number">500</span><span class="javascript">;</span>&#13;
<span class="javascript">      canvas.width = </span><span class="hljs-number">500</span><span class="javascript">;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">var</span><span class="javascript"> pos = {</span>&#13;
<span class="javascript">        </span><span class="hljs-attr">x</span><span class="javascript">: </span><span class="hljs-number">0</span><span class="javascript">,</span>&#13;
<span class="javascript">        </span><span class="hljs-attr">y</span><span class="javascript">: </span><span class="hljs-number">50</span><span class="javascript">,</span>&#13;
<span class="javascript">      };</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">init</span><span class="hljs-function">() </span><span class="javascript">{</span>&#13;
<span class="javascript">        draw();</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">draw</span><span class="hljs-function">() </span><span class="javascript">{</span>&#13;
<span class="javascript">        pos.x = pos.x + </span><span class="hljs-number">5</span><span class="javascript">;</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">if</span><span class="javascript"> (pos.x &gt; canvas.width) {</span>&#13;
<span class="javascript">          pos.x = </span><span class="hljs-number">0</span><span class="javascript">;</span>&#13;
<span class="javascript">        }</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">if</span><span class="javascript"> (pos.y &gt; canvas.height) {</span>&#13;
<span class="javascript">          pos.y = </span><span class="hljs-number">0</span><span class="javascript">;</span>&#13;
<span class="javascript">        }</span>&#13;
<span class="javascript">        ctx.fillRect(pos.x, pos.y, </span><span class="hljs-number">100</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">);</span>&#13;
<span class="javascript">        </span><span class="hljs-built_in">window</span><span class="javascript">.setTimeout(draw, </span><span class="hljs-number">50</span><span class="javascript">);</span>&#13;
<span class="javascript">      }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">This will <a id="_idIndexMarker732"/>start drawing a square at position <code class="Code-In-Text--PACKT-">5</code>, <code class="Code-In-Text--PACKT-">50</code>. And after <code class="Code-In-Text--PACKT-">50</code> ms, it will draw another square at position <code class="Code-In-Text--PACKT-">10</code>, <code class="Code-In-Text--PACKT-">50</code>, and after that at <code class="Code-In-Text--PACKT-">15</code>, <code class="Code-In-Text--PACKT-">50</code>. And it will keep on changing this <em class="italic">x</em> value by <code class="Code-In-Text--PACKT-">5</code> up to the point that <em class="italic">x</em> gets bigger than the width of the canvas, when it is then set to zero. This way, the last bit of white canvas on that line gets colored black too.</p>&#13;
    <p class="normal">Right now, it is more creating a line, and not a moving square. This is because we keep on adding the colored part to the canvas, but not resetting it to the previous color. We can do this with the <code class="Code-In-Text--PACKT-">clearRect()</code> method. This method takes four parameters. The first two are the starting point to draw the rectangle to be cleared (so <em class="italic">x</em>, <em class="italic">y</em>). The third one is the <code class="Code-In-Text--PACKT-">width</code> of the rectangle to be cleared and the last one is the <code class="Code-In-Text--PACKT-">height</code>. In order to clear the full canvas, we'll have to write:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">ctx.clearRect(0, 0, canvas.width, canvas.height);&#13;
</code></pre>&#13;
    <p class="normal">Adding this to the beginning of the draw function in our previous example results in a moving square instead of a fat line being drawn because the previous square is not kept, but the canvas resets every time and the square gets drawn from scratch.</p>&#13;
    <h3 id="_idParaDest-418" class="title">Practice exercise 14.6</h3>&#13;
    <p class="normal">We will practice animating shapes and moving objects on the page. This exercise will demonstrate <a id="_idIndexMarker733"/>how to move an object on the page using the HTML5 canvas element and JavaScript.</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_09.png" alt="Chart, bubble chart&#13;&#10;&#13;&#10;Description automatically generated" width="793" height="342"/></figure>&#13;
    <p class="packt_figref">Figure 14.9: Red circle moving within the boundaries of the canvas object</p>&#13;
    <p class="normal">Take the following steps to create a red circle that will then be moved within the canvas boundaries, appearing to be bouncing off the sides:</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Create the canvas and apply a border of 1 px to it.</li>&#13;
      <li class="numbered">Select the canvas page elements with JavaScript and prepare to draw on the canvas.</li>&#13;
      <li class="numbered">Create variables to track the <em class="italic">x</em> and <em class="italic">y</em> positions, as well as the <em class="italic">x</em>-direction speed and the <em class="italic">y</em>-direction speed. You can set these as a default of <code class="Code-In-Text--PACKT-">1</code> and the <em class="italic">x</em> and <em class="italic">y</em> starting positions can be half of the canvas dimensions.</li>&#13;
      <li class="numbered">Create a function to draw the ball. This will draw the ball as a red ball arc in the <em class="italic">x</em> and <em class="italic">y</em> positions. Also, the size for the ball should be set as a variable so that the boundaries can be calculated from it. Fill and close the path.</li>&#13;
      <li class="numbered">Create a function to move the ball and set the interval on that function to 10 milliseconds.</li>&#13;
      <li class="numbered">In the aforementioned movement function, clear the current rectangle and draw the ball using the draw ball function.</li>&#13;
      <li class="numbered">Check the position of the ball. If the ball is outside the canvas boundaries, you need to change direction. This can be done by multiplying the direction by -1. Update the <em class="italic">x</em> and <em class="italic">y</em> positions with the new values.</li>&#13;
    </ol>&#13;
    <h1 id="_idParaDest-419" class="title">Drawing on canvas with a mouse</h1>&#13;
    <p class="normal">We have <a id="_idIndexMarker734"/>all the ingredients already to create a canvas on which we can draw with our mouse. Let's walk you through it. We'll start by setting up the canvas:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">      </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">        </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">      }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"color"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"bgColor"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas"</span><span class="javascript">);</span>&#13;
<span class="javascript">      </span><span class="hljs-keyword">let</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">      canvas.width = </span><span class="hljs-number">700</span><span class="javascript">;</span>&#13;
<span class="javascript">      canvas.height = </span><span class="hljs-number">700</span><span class="javascript">;</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">In our script element, we are going to add a method for when the window has loaded. When the window has loaded, we need to add some event listeners:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-built_in">window</span>.onload = init; <span class="hljs-comment">// add this line to the start of the script</span>&#13;
<span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">init</span><span class="hljs-function">() </span>{&#13;
  canvas.addEventListener(<span class="hljs-string">"mousemove"</span>, draw);&#13;
  canvas.addEventListener(<span class="hljs-string">"mousemove"</span>, setPosition);&#13;
  canvas.addEventListener(<span class="hljs-string">"mouseenter"</span>, setPosition);&#13;
}&#13;
</code></pre>&#13;
    <p class="normal">We want to draw when the mouse is moving, and we want to change the current position on the canvas when the mouse is moving. This is also something we want to do on <code class="Code-In-Text--PACKT-">mouseenter</code>. Let's write the code for setting the position. This will be added to the script element as well. We will also have to add the position variable, which again should be declared at the start of the script:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">let</span> pos = {&#13;
  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,&#13;
  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,&#13;
};&#13;
</code></pre>&#13;
    <p class="normal">And the function for setting the position:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">setPosition</span><span class="hljs-function">(</span><span class="hljs-params">e</span><span class="hljs-function">) </span>{&#13;
  pos.x = e.pageX;&#13;
  pos.y = e.pageY;&#13;
}&#13;
</code></pre>&#13;
    <p class="normal">This function <a id="_idIndexMarker735"/>gets triggered on <code class="Code-In-Text--PACKT-">mousemove</code> and on <code class="Code-In-Text--PACKT-">mouseenter</code>. The event that triggers this has a <code class="Code-In-Text--PACKT-">pageX</code> and a <code class="Code-In-Text--PACKT-">pageY</code> property we can use to get the current position of the mouse.</p>&#13;
    <p class="normal">The last must-have ingredient for drawing on the canvas is the <code class="Code-In-Text--PACKT-">draw()</code> method. Here is what it could look like:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">draw</span><span class="hljs-function">(</span><span class="hljs-params">e</span><span class="hljs-function">) </span>{&#13;
   <span class="hljs-keyword">if</span> (e.buttons !== <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;&#13;
   ctx.beginPath();&#13;
   ctx.moveTo(pos.x, pos.y);&#13;
   setPosition(e);&#13;
   ctx.lineTo(pos.x, pos.y);&#13;
   ctx.lineWidth = <span class="hljs-number">10</span>;&#13;
   ctx.lineCap = <span class="hljs-string">"round"</span>;&#13;
   ctx.stroke();&#13;
}&#13;
</code></pre>&#13;
    <p class="normal">We start with something that might look strange, but it is a great trick to make sure that the mouse is actually being clicked. We don't want to be drawing when no button on the mouse is clicked. This method prevents that by returning from the method if it is not being clicked.</p>&#13;
    <p class="normal">Then we start to begin a path. We always have a current <em class="italic">x</em> and <em class="italic">y</em>, so they are set as coordinate one, and then we set them again and use these new coordinates for the line. We give it a round linecap to achieve smooth lines and a line width of <code class="Code-In-Text--PACKT-">10</code>. Then we draw the line, and as long as the mouse is moving, the <code class="Code-In-Text--PACKT-">draw()</code> function gets called again.</p>&#13;
    <p class="normal">The app can now be opened and used as a functioning drawing tool. We can also give the user <a id="_idIndexMarker736"/>more options here, for example, adding a color picker to change the color that the user is drawing with. In order to do that, we'll have to add a color picker to the HTML, like this:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"color"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"bgColor"</span><span class="hljs-tag"> /&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">And change the selected color in JavaScript by adding an event listener for when the value of that input box changes:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">let</span> bgColor = <span class="hljs-string">"pink"</span>;&#13;
<span class="hljs-keyword">let</span> bgC = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"bgColor"</span>);&#13;
bgC.addEventListener(<span class="hljs-string">"change"</span>, <span class="hljs-keyword">function</span><span class="hljs-function"> () </span>{&#13;
    bgColor = event.target.value;&#13;
});&#13;
</code></pre>&#13;
    <p class="normal">We start with the color pink, and overwrite it with whatever the user selects in the color picker.</p>&#13;
    <h2 id="_idParaDest-420" class="title">Practice exercise 14.7</h2>&#13;
    <p class="normal">We will create an online drawing board, and include a dynamic value for width, color, and ability to erase the current drawing. Use the following HTML as a template for this project to add JavaScript code to:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!doctype </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">        </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"controls"</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"clear"</span><span class="hljs-tag">&gt;</span>Clear<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>Color&#13;
            <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"color"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"#ffff00"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"penColor"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>Width&#13;
            <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"range"</span><span class="hljs-tag"> </span><span class="hljs-attr">min</span><span class="hljs-tag">=</span><span class="hljs-string">"1"</span><span class="hljs-tag"> </span><span class="hljs-attr">max</span><span class="hljs-tag">=</span><span class="hljs-string">"20"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"10"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"penWidth"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span> <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
       &#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">Take <a id="_idIndexMarker737"/>the following steps:</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Select the page elements as variable objects in JavaScript. Get the input field and select the button as an object.</li>&#13;
      <li class="numbered">Add an event listener to the button that will run a function to clear the current canvas. Within the clear function, use the <code class="Code-In-Text--PACKT-">confirm()</code> method to check if the user wants to erase the canvas drawing. If they then confirm using <code class="Code-In-Text--PACKT-">clearRect()</code>, delete the contents of the canvas element.</li>&#13;
      <li class="numbered">Set a global position object for <em class="italic">x</em> and <em class="italic">y</em> and by adding event listeners to the mouse events, update the position. If the mouse move is triggered, invoke a draw function. Set the position to update the mouse position, setting the global position values to that of the mouse <em class="italic">x</em> and <em class="italic">y</em>.</li>&#13;
      <li class="numbered">Within the draw function, check if the mouse button is pressed, and if not, then add <code class="Code-In-Text--PACKT-">return</code>. If it is pressed, we can then draw on the canvas. Set the new path and move to the positions <em class="italic">x</em> and <em class="italic">y</em>. Start a new line, get the <code class="Code-In-Text--PACKT-">strokestyle</code> value from the color input field, and set the <code class="Code-In-Text--PACKT-">linewidth</code> value from the input width value. Add the <code class="Code-In-Text--PACKT-">stroke()</code> method to add the new line to the page.</li>&#13;
    </ol>&#13;
    <h1 id="_idParaDest-421" class="title">Saving dynamic images</h1>&#13;
    <p class="normal">We can <a id="_idIndexMarker738"/>convert the canvas to an image, and this image can then be saved as a next step. In order to convert it to an image, we need to add the following to our script element:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">let</span> dataURL = canvas.toDataURL();&#13;
<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"imageId"</span>).src = dataURL;&#13;
</code></pre>&#13;
    <p class="normal">We are changing our canvas to a data URL, which then becomes the source of our image. We want this to happen whenever a save button gets clicked. Here is the button:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">&lt;input type=<span class="hljs-string">"button"</span> id=<span class="hljs-string">"save"</span> value=<span class="hljs-string">"save"</span> /&gt;&#13;
</code></pre>&#13;
    <p class="normal">And the event listener:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"save"</span>).addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">function</span><span class="hljs-function"> () </span>{&#13;
  <span class="hljs-keyword">let</span> dataURL = canvas.toDataURL();&#13;
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"holder"</span>).src = dataURL;&#13;
});&#13;
</code></pre>&#13;
    <p class="normal">Now whenever the save button gets clicked, it is going to update the image with the generated data URL from the canvas. Whatever content is within the canvas element will be turned into a base64 data image value and added to the page within an img tag.</p>&#13;
    <p class="normal">In the following example, there is a canvas of 200 by 200 pixels and an empty image of the same size. When a color gets selected, a square of 100 by 100 pixels in that color is drawn on <a id="_idIndexMarker739"/>the canvas. When the save button gets clicked, this canvas gets converted to an image. This image can then be saved. Here is the code for the example:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!doctype </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">        </span><span class="hljs-selector-tag">canvas</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"color"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"squareColor"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">br</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">img</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">""</span><span class="hljs-tag"> </span><span class="hljs-attr">width</span><span class="hljs-tag">=</span><span class="hljs-string">"200"</span><span class="hljs-tag"> </span><span class="hljs-attr">height</span><span class="hljs-tag">=</span><span class="hljs-string">"200"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"holder"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"button"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"save"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"save"</span><span class="hljs-tag"> /&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">const</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"canvas"</span><span class="javascript">);</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">const</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">        canvas.width = </span><span class="hljs-number">200</span><span class="javascript">;</span>&#13;
<span class="javascript">        canvas.height = </span><span class="hljs-number">200</span><span class="javascript">;</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">const</span><span class="javascript"> penColor = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"squareColor"</span><span class="javascript">);</span>&#13;
<span class="javascript">        penColor.addEventListener(</span><span class="hljs-string">"change"</span><span class="javascript">, </span><span class="hljs-keyword">function</span><span class="hljs-function"> () </span><span class="javascript">{</span>&#13;
<span class="javascript">            color = event.target.value;</span>&#13;
<span class="javascript">            draw(color);</span>&#13;
<span class="javascript">        });</span>&#13;
<span class="javascript">        </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"save"</span><span class="javascript">).addEventListener(</span><span class="hljs-string">"click"</span><span class="javascript">, </span><span class="hljs-keyword">function</span><span class="hljs-function"> () </span><span class="javascript">{</span>&#13;
<span class="javascript">            </span><span class="hljs-keyword">let</span><span class="javascript"> dataURL = canvas.toDataURL();</span>&#13;
<span class="javascript">            </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"holder"</span><span class="javascript">).src = dataURL;</span>&#13;
<span class="javascript">        });</span>&#13;
<span class="javascript">        </span><span class="hljs-keyword">function</span><span class="hljs-function"> </span><span class="hljs-title">draw</span><span class="hljs-function">(</span><span class="hljs-params">color</span><span class="hljs-function">) </span><span class="javascript">{</span>&#13;
<span class="javascript">            ctx.fillStyle = color;</span>&#13;
<span class="javascript">            ctx.fillRect(</span><span class="hljs-number">70</span><span class="javascript">, </span><span class="hljs-number">70</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">, </span><span class="hljs-number">100</span><span class="javascript">);</span>&#13;
<span class="javascript">        }</span>&#13;
<span class="javascript">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">Here is <a id="_idIndexMarker740"/>what it looks like after saving the image:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_10.png" alt="Shape, square&#13;&#10;&#13;&#10;Description automatically generated" width="826" height="596"/></figure>&#13;
    <p class="packt_figref">Figure 14.10: Result of saving the image</p>&#13;
    <h1 id="_idParaDest-422" class="title">Media on the page</h1>&#13;
    <p class="normal">There are special elements for media on the page. We are going to show you how to add audio <a id="_idIndexMarker741"/>and video and how to embed YouTube on a webpage.</p>&#13;
    <p class="normal">Adding an audio player to a page is very simple:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!DOCTYPE </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">audio</span><span class="hljs-tag"> </span><span class="hljs-attr">controls</span><span class="hljs-tag">&gt;</span>&#13;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">source</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"sound.ogg"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"audio/ogg"</span><span class="hljs-tag">&gt;</span>&#13;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">source</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"sound.mp3"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"audio/mpeg"</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">audio</span><span class="hljs-tag">&gt;</span>&#13;
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">You specify the <code class="Code-In-Text--PACKT-">controls</code> attribute if you want the user to be able to control pause and play and the volume. If you want it to start automatically, you'll have to add the attribute <code class="Code-In-Text--PACKT-">autoplay</code>. With the source element, you specify the audio files that can be played. The browser will choose only one and will choose the first one (from top to bottom) that it supports.</p>&#13;
    <p class="normal">Adding a video to a webpage is very similar to adding audio. Here's how to do it:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">video</span><span class="hljs-tag"> </span><span class="hljs-attr">width</span><span class="hljs-tag">=</span><span class="hljs-string">"1024"</span><span class="hljs-tag"> </span><span class="hljs-attr">height</span><span class="hljs-tag">=</span><span class="hljs-string">"576"</span><span class="hljs-tag"> </span><span class="hljs-attr">controls</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">    &lt;</span><span class="hljs-name">source</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"movie.mp4"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"video/mp4"</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">    &lt;</span><span class="hljs-name">source</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"movie.ogg"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"video/ogg"</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">video</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">Often you would want to link to YouTube instead. Here's how to do that:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">iframe</span>&#13;
<span class="hljs-attr">    width</span><span class="hljs-tag">=</span><span class="hljs-string">"1024"</span>&#13;
<span class="hljs-attr">    height</span><span class="hljs-tag">=</span><span class="hljs-string">"576"</span>&#13;
<span class="hljs-attr">    src</span><span class="hljs-tag">=</span><span class="hljs-string">"https://www.youtube.com/embed/v6VTv7czb1Y"</span>&#13;
<span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">iframe</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">You will have to use the <code class="Code-In-Text--PACKT-">iframe</code> element. This is a special element that allows another webpage inside the current webpage. And you can then add the YouTube embed link as a source. The last code after <code class="Code-In-Text--PACKT-">embed</code> comes from the video URL.</p>&#13;
    <p class="normal">The height and width attributes of the video can be changed to make the video bigger or smaller. If you want to show it fullscreen, you can change the width and height like this:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">iframe</span>&#13;
<span class="hljs-tag">  </span><span class="hljs-attr">width</span><span class="hljs-tag">=</span><span class="hljs-string">"100%"</span>&#13;
<span class="hljs-tag">  </span><span class="hljs-attr">height</span><span class="hljs-tag">=</span><span class="hljs-string">"100%"</span>&#13;
<span class="hljs-tag">  </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"https://www.youtube.com/embed/v6VTv7czb1Y"</span>&#13;
<span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">iframe</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">If you <a id="_idIndexMarker742"/>want it to be only a part of the screen, you can adjust the width and height attributes accordingly.</p>&#13;
    <p class="normal">You can autoplay these as well with the autoplay attribute. If you use autoplay on more than one, none of them will autoplay to protect the visitor from getting all that noise from the webpage. It is typically considered annoying if your video starts making noise in the browser. Adding the attribute muted will avoid this.</p>&#13;
    <h1 id="_idParaDest-423" class="title">Digital accessibility in HTML</h1>&#13;
    <p class="normal">Digital accessibility is of huge importance for visually impaired people or those unable to use a mouse. In order to use the internet with little or no vision, screen readers are in place. This is a <a id="_idIndexMarker743"/>special piece of software that reads what is on the screen or converts it to braille using special devices connected to the computer. People that cannot use a mouse will often rely on speech to give the computer instructions.</p>&#13;
    <p class="normal">Early web applications were terrible in terms of accessibility. Luckily, WAI-ARIA created a technical specification of how to make the internet digitally accessible. Dynamic parts can be recognized if implemented correctly, and by adding semantics and metadata to the HTML, it's better useable for external tooling.</p>&#13;
    <p class="normal">Semantics might be one of the most important parts here. This comes down to using the right HTML element for the right purpose. If something should be clicked, it is best to make it a <code class="Code-In-Text--PACKT-">&lt;button&gt;</code> element and not a <code class="Code-In-Text--PACKT-">&lt;span&gt;</code>, for example. If it is a button, it is possible to navigate to it with the <kbd class="keyStroke">Tab</kbd> key and click it using <kbd class="keyStroke">Enter</kbd>.</p>&#13;
    <p class="normal">The same goes for headers. You can create something that looks like a header using a special class and give it a layout, but the screen readers are looking for <code class="Code-In-Text--PACKT-">h1</code>, <code class="Code-In-Text--PACKT-">h2</code>, and <code class="Code-In-Text--PACKT-">h3</code>. You should always use the header elements for headers. This helps the screen readers and improves the accessibility of your website. And as a bonus, it helps you rank higher in Google as well because bots also check out the headers to see what is important on your site.</p>&#13;
    <p class="normal">It is also important to use labels and link text that is descriptive. If the link part is only <strong class="screenText">Click here</strong>, that is not helpful. Something like <strong class="screenText">Click here to sign up for the summer event</strong> is much better.</p>&#13;
    <p class="normal">Throughout this book, we have also done something wrong with our input boxes. In order to make input fields accessible, you'll have to add a label element. This will make it easier for screen readers to pick up on what the input box is about. So this is generally bad practice:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">&lt;input type=<span class="hljs-string">"text"</span> id=<span class="hljs-string">"address"</span> /&gt;&#13;
</code></pre>&#13;
    <p class="normal">And this <a id="_idIndexMarker744"/>is much better, because now screen readers can read it too (and therefore visually impaired people can understand it):</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">&lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"address"</span>&gt;Address:&lt;<span class="hljs-regexp">/label&gt;</span>&#13;
<span class="hljs-regexp">&lt;input type="text" id="address" /</span>&gt;&#13;
</code></pre>&#13;
    <p class="normal">One last one that you may know already is the <code class="Code-In-Text--PACKT-">alt</code> attribute for images. If the screen reader encounters an image, it will read the <code class="Code-In-Text--PACKT-">alt</code> description. So make sure that these are descriptive, even if the image is not important. Since there is clearly no way to know it's not important if you cannot see the image, all you'll know is that you cannot see some picture. Here is how to add <code class="Code-In-Text--PACKT-">alt</code> text:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">img</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"umbrella.jpg"</span><span class="hljs-tag"> </span><span class="hljs-attr">width</span><span class="hljs-tag">=</span><span class="hljs-string">"200"</span><span class="hljs-tag"> </span><span class="hljs-attr">height</span><span class="hljs-tag">=</span><span class="hljs-string">"200"</span><span class="hljs-tag"> </span><span class="hljs-attr">alt</span><span class="hljs-tag">=</span><span class="hljs-string">"rainbow colored umbrella"</span><span class="hljs-tag"> /&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">These tips are not that important for practicing and testing purposes, but they are of great use when you are going to create professional apps. Taking accessibility into account will make your app more accessible for everyone. And as I said, Google will (currently) reward this good behavior by ranking you more highly and your app will be more profitable since more people can use it!</p>&#13;
    <h1 id="_idParaDest-424" class="title">Chapter projects</h1>&#13;
    <h2 id="_idParaDest-425" class="title">Create a Matrix effect</h2>&#13;
    <p class="normal">This exercise will create a continuous animation of text moving from top to bottom. The final effect <a id="_idIndexMarker745"/>produced will show characters moving down the screen within the canvas element and appearing to disappear and fade as they approach the bottom of the screen as more new characters will be added to the canvas in their place. The random character can be either a 0 or 1, and will be in place in the position according to the number, which will represent the vertical position of where the character is drawn. </p>&#13;
    <p class="normal">The canvas will be filled with a black background, which is going to use opacity to create the fading effect once it's redrawn:</p>&#13;
    <figure class="mediaobject"><img src="Images/B16682_14_11.png" alt="Text&#13;&#10;&#13;&#10;Description automatically generated with low confidence" width="653" height="393"/></figure>&#13;
    <p class="packt_figref">Figure 14.11: Matrix effect desired outcome</p>&#13;
    <p class="normal">Take the following steps:</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Create a simple HTML document, and in JavaScript create a canvas element and add the <code class="Code-In-Text--PACKT-">getContent</code> element as <code class="Code-In-Text--PACKT-">2d</code>.</li>&#13;
      <li class="numbered">Select that canvas element and set the attribute height and width to 500x400. Prepend it to the body of your document.</li>&#13;
      <li class="numbered">Create an empty array named <code class="Code-In-Text--PACKT-">colVal</code> and create a loop to add a number of items into the array that will have a value of 0. The number of items you need to add to the array can be determined by dividing the width by ten, which should be the width between each column. The values in the array will be the starting vertical position of the content for the <code class="Code-In-Text--PACKT-">fillText()</code> method that you will set up.</li>&#13;
      <li class="numbered">Create the main Matrix function to run at 50 millisecond intervals.</li>&#13;
      <li class="numbered">Set the <code class="Code-In-Text--PACKT-">fillStyle</code> to be black with .05 opacity, so that when it layers on top of the existing elements it will produce a fading effect.</li>&#13;
      <li class="numbered">Set the canvas font color to be green.</li>&#13;
      <li class="numbered">Using an array map, iterate all the current items in the <code class="Code-In-Text--PACKT-">colVal</code> array, which holds the vertical position for the output text. </li>&#13;
      <li class="numbered">Within the map, set the characters to display. We want it to alternate between 0 and 1 so, using <code class="Code-In-Text--PACKT-">Math.random()</code>, generate a value of either 0 or 1 for the text output. You can use a ternary operator to do this.</li>&#13;
      <li class="numbered">Set the <a id="_idIndexMarker746"/>position of x using the index value multiplied by 10, which is the start of each new letter. Using the index from the <code class="Code-In-Text--PACKT-">colVal</code> array, this will create separate columns of moving characters.</li>&#13;
      <li class="numbered">Create the character within the canvas using the ctx <code class="Code-In-Text--PACKT-">fillText()</code> method, setting the output character to the random 0 or 1 value, using <code class="Code-In-Text--PACKT-">posX</code> for the column <em class="italic">x</em> position, and <code class="Code-In-Text--PACKT-">posY</code>, which is the value in the <code class="Code-In-Text--PACKT-">colVal</code> array for the item, as the position of the <em class="italic">y</em> axis for the output.</li>&#13;
      <li class="numbered">Add a condition that checks if the position of <em class="italic">y</em> is greater than 100 plus a random value of 0-300. The larger the number, the longer the number will fall on the <em class="italic">y</em> position. This is random so not all numbers end at the same spot. This will create a staggered effect after the initial drop. </li>&#13;
      <li class="numbered">If the position of <em class="italic">y</em> is not past the random value and 100, increment the value of the index item by 10. Assign this value of <em class="italic">y</em> back to the item in the <code class="Code-In-Text--PACKT-">colVal</code> array, which can then be used in the next iteration. This will move the letter down 10 pixels on the canvas within the next draw round.</li>&#13;
    </ol>&#13;
    <h2 id="_idParaDest-426" class="title">Countdown clock</h2>&#13;
    <p class="normal">This exercise <a id="_idIndexMarker747"/>will produce a real-time countdown clock that will display the amount of time in days, hours, minutes, and seconds left until the date value within the input date field. Adjusting the input date field will update the countdown clock. It will also use local storage to capture and save the value in the input field, so if the page is refreshed, the input field will still retain the date value and the countdown clock can continue to count down to that date value from the input field. You can use the following HTML template:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!doctype </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">title</span><span class="hljs-tag">&gt;</span>JavaScript<span class="hljs-tag">&lt;/</span><span class="hljs-name">title</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">        </span><span class="hljs-selector-class">.clock</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">background-color</span><span class="css">: blue;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">width</span><span class="css">: </span><span class="hljs-number">400px</span><span class="css">;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">text-align</span><span class="css">: center;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">color</span><span class="css">: white;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">font-size</span><span class="css">: </span><span class="hljs-number">1em</span><span class="css">;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">        </span><span class="hljs-selector-class">.clock</span><span class="css">&gt;</span><span class="hljs-selector-tag">span</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">padding</span><span class="css">: </span><span class="hljs-number">10px</span><span class="css">;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">border-radius</span><span class="css">: </span><span class="hljs-number">10px</span><span class="css">;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">background-color</span><span class="css">: black;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">        </span><span class="hljs-selector-class">.clock</span><span class="css">&gt;</span><span class="hljs-selector-tag">span</span><span class="css">&gt;</span><span class="hljs-selector-tag">span</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">padding</span><span class="css">: </span><span class="hljs-number">5px</span><span class="css">;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">border-radius</span><span class="css">: </span><span class="hljs-number">10px</span><span class="css">;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">background-color</span><span class="css">: red;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">        </span><span class="hljs-selector-tag">input</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">padding</span><span class="css">: </span><span class="hljs-number">15px</span><span class="css">;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">margin</span><span class="css">: </span><span class="hljs-number">20px</span><span class="css">;</span>&#13;
<span class="css">            </span><span class="hljs-attribute">font-size</span><span class="css">: </span><span class="hljs-number">1.5em</span><span class="css">;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"date"</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"endDate"</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"clock"</span><span class="hljs-tag">&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"days"</span><span class="hljs-tag">&gt;</span>0<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span> Days<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"hours"</span><span class="hljs-tag">&gt;</span>0<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>&#13;
                Hours<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"minutes"</span><span class="hljs-tag">&gt;</span>0<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span> Minutes<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"seconds"</span><span class="hljs-tag">&gt;</span>0<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>&#13;
                Seconds<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">We have <a id="_idIndexMarker748"/>created page elements including input with a type of date, a main <code class="Code-In-Text--PACKT-">clock</code> container, and added spans for <code class="Code-In-Text--PACKT-">days</code>, <code class="Code-In-Text--PACKT-">hours</code>, <code class="Code-In-Text--PACKT-">minutes</code>, and <code class="Code-In-Text--PACKT-">seconds</code>. They have been labeled and CSS applied as needed.</p>&#13;
    <p class="normal">You can take the following steps:</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Select the page elements as JavaScript objects, as well as selecting the main clock output area as the value of a JavaScript object.</li>&#13;
      <li class="numbered">Create variables for the <code class="Code-In-Text--PACKT-">timeInterval</code> and a global Boolean value that can be used to stop the clock timer.</li>&#13;
      <li class="numbered">Check the local storage if there is an item for countdown already set. If there is, use that value.</li>&#13;
      <li class="numbered">Create a condition and function to start the clock as the saved value and set the input field date value to the local storage saved value.</li>&#13;
      <li class="numbered">Add an event listener to invoke a function if the value of the input field is changed. Clear the interval if it has changed and set the new <code class="Code-In-Text--PACKT-">endDate</code> value in the local storage.</li>&#13;
      <li class="numbered">Start the clock with the start clock function from that new <code class="Code-In-Text--PACKT-">endDate</code> input value.</li>&#13;
      <li class="numbered">Create a function to start the clock that is used to start the counter. Within that function, you can create a function that updates the counter and outputs the new clock time values into the page clock container area.</li>&#13;
      <li class="numbered">Within this function, check if <code class="Code-In-Text--PACKT-">timeLeft</code> is less than the counter time. Create a separate function to handle this. If it's less, stop the timer.</li>&#13;
      <li class="numbered">If the time left is more and has a value within the object, then output the object by property names and match the property names you use in the time left function object to the class names you use in your webpage elements so they match and you can save time rewriting them. Loop through all the object values and assign the values within the <code class="Code-In-Text--PACKT-">innerHTML</code> page element.</li>&#13;
      <li class="numbered">In the time left function, get the current date. Using <code class="Code-In-Text--PACKT-">Date.parse()</code>, parse the date and calculate the total milliseconds left until the counter ends. Return the values of the total days, hours, minutes, and seconds as a response object to use in the update function.</li>&#13;
      <li class="numbered">If the counter is false and has passed the end time, then clear the interval. If the counter is still valid, set the interval to run the update function every 1,000 milliseconds.</li>&#13;
    </ol>&#13;
    <h2 id="_idParaDest-427" class="title">Online paint app</h2>&#13;
    <p class="normal">Create a drawing application where the user can draw using their mouse in the canvas element. When <a id="_idIndexMarker749"/>the user is within the canvas element and clicks down on the mouse button, holding the button down will add lines, producing a drawing effect within the canvas element. The color and width of the drawing pencil can be changed dynamically for more functionality. In addition, this app will include a button to save and download the image from the canvas element, as well as clearing the current canvas content.</p>&#13;
    <p class="normal">You can use the following template and add the JavaScript code:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">&lt;!doctype </span><span class="hljs-meta-keyword">html</span><span class="hljs-meta">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">title</span><span class="hljs-tag">&gt;</span>Canvas HTML5<span class="hljs-tag">&lt;/</span><span class="hljs-name">title</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="css">        </span><span class="hljs-selector-id">#canvas</span><span class="css"> {</span>&#13;
<span class="css">            </span><span class="hljs-attribute">border</span><span class="css">: </span><span class="hljs-number">1px</span><span class="css"> solid black;</span>&#13;
<span class="css">        }</span>&#13;
<span class="css">    </span><span class="hljs-tag">&lt;/</span><span class="hljs-name">style</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas"</span><span class="hljs-tag"> </span><span class="hljs-attr">width</span><span class="hljs-tag">=</span><span class="hljs-string">"600"</span><span class="hljs-tag"> </span><span class="hljs-attr">height</span><span class="hljs-tag">=</span><span class="hljs-string">"400"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"save"</span><span class="hljs-tag">&gt;</span>Save<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"clear"</span><span class="hljs-tag">&gt;</span>clear<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>Color: <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"color"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"#ffff00"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"penColor"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>&#13;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>Width: <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"range"</span><span class="hljs-tag"> </span><span class="hljs-attr">min</span><span class="hljs-tag">=</span><span class="hljs-string">"1"</span><span class="hljs-tag"> </span><span class="hljs-attr">max</span><span class="hljs-tag">=</span><span class="hljs-string">"20"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"10"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"penWidth"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"output"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">body</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">html</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
    <p class="normal">We have created a button to save and a button to clear, an input for color using the HTML5 color type, and the range type to get a numeric value for the pen width. We have also added page elements for the canvas and an output area.</p>&#13;
    <p class="normal">Take the following steps:</p>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Using JavaScript, select all the page elements as JavaScript objects and set up the canvas element to draw into.</li>&#13;
      <li class="numbered">Set a variable to track the location of the pen.</li>&#13;
      <li class="numbered">On the canvas, add an event listener to track mouse movement. Update the pen position to the <code class="Code-In-Text--PACKT-">lastX</code> and <code class="Code-In-Text--PACKT-">lastY</code> positions, and then set the location position to <code class="Code-In-Text--PACKT-">clientX</code> and <code class="Code-In-Text--PACKT-">clientY</code>. Create a function to draw at the pen position and invoke the draw function.</li>&#13;
      <li class="numbered">For <code class="Code-In-Text--PACKT-">mousedown</code>, set <code class="Code-In-Text--PACKT-">draw</code> to <code class="Code-In-Text--PACKT-">true</code>, and for <code class="Code-In-Text--PACKT-">mouseup</code> and <code class="Code-In-Text--PACKT-">mouseout</code>, set <code class="Code-In-Text--PACKT-">draw</code> to <code class="Code-In-Text--PACKT-">false</code>.</li>&#13;
      <li class="numbered">Within the <a id="_idIndexMarker750"/>draw function, begin the move path at the pen location values and set the stroke style to the pen color and stroke width to the pen width. These can be changed by clicking the inputs and updating their HTML values. Add the stroke and close the drawing path.</li>&#13;
      <li class="numbered">Add an event listener to the clear button. If clicked, create a function that confirms that the user wants to remove and clear the drawing, and then if true, invoke <code class="Code-In-Text--PACKT-">clearRect()</code> to clear the canvas contents.</li>&#13;
      <li class="numbered">Add another event listener to save the image. When clicked, it should invoke a function that gets the canvas object using <code class="Code-In-Text--PACKT-">toDataURL</code> as base64 image data. You can log it into the console to see what it looks like. </li>&#13;
      <li class="numbered">Create an img element and prepend it to the output area element. Set the <code class="Code-In-Text--PACKT-">src</code> path to the <code class="Code-In-Text--PACKT-">dataURL</code> value.</li>&#13;
      <li class="numbered">To set a download of the image, create an anchor tag, append it to anywhere within the HTML page elements, and create a filename. You can generate a unique filename with <code class="Code-In-Text--PACKT-">Math.random()</code>. Set the hyperlink to the download attribute and the <code class="Code-In-Text--PACKT-">href</code> path to the <code class="Code-In-Text--PACKT-">dataURL</code> path, and trigger a click with the <code class="Code-In-Text--PACKT-">click()</code> method. Once clicked, remove the link element.</li>&#13;
    </ol>&#13;
    <h1 id="_idParaDest-428" class="title">Self-check quiz</h1>&#13;
    <ol>&#13;
      <li class="numbered" value="1">Which statements below are the correct way to prepare to draw?&#13;
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"canvas"</span>);&#13;
<span class="hljs-keyword">const</span> ctx = canvas.getContext(<span class="hljs-string">"2d"</span>);&#13;
<span class="hljs-keyword">var</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"canvas"</span>);&#13;
<span class="hljs-keyword">var</span> ctx = getContext(<span class="hljs-string">"canvas"</span>);&#13;
<span class="hljs-keyword">var</span> ctx = canvas.getContext(<span class="hljs-string">"canvas"</span>);&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numbered">What will the following code do?&#13;
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">canvas</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"canvas"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">canvas</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
<span class="hljs-keyword">    var</span><span class="javascript"> canvas = </span><span class="hljs-built_in">document</span><span class="javascript">.getElementById(</span><span class="hljs-string">"</span><span class="hljs-string">canvas"</span><span class="javascript">);</span>&#13;
<span class="hljs-keyword">    var</span><span class="javascript"> ctx = canvas.getContext(</span><span class="hljs-string">"2d"</span><span class="javascript">);</span>&#13;
<span class="javascript">    canvas.height = </span><span class="hljs-number">600</span><span class="javascript">;</span>&#13;
<span class="javascript">    canvas.width = </span><span class="hljs-number">500</span><span class="javascript">;</span>&#13;
<span class="javascript">    ctx.beginPath();</span>&#13;
<span class="javascript">    ctx.fillStyle = </span><span class="hljs-string">"red"</span><span class="javascript">;</span>&#13;
<span class="javascript">    ctx.arc(</span><span class="hljs-number">50</span><span class="javascript">, </span><span class="hljs-number">50</span><span class="javascript">, </span><span class="hljs-number">50</span><span class="javascript">, </span><span class="hljs-number">0</span><span class="javascript">, </span><span class="hljs-built_in">Math</span><span class="javascript">.PI * </span><span class="hljs-number">2</span><span class="javascript">);</span>&#13;
<span class="javascript">    ctx.fill();</span>&#13;
<span class="javascript">    ctx.closePath();</span>&#13;
<span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>&#13;
</code></pre>&#13;
        <ul>&#13;
          <li class="bullet-l2">Nothing, the code has errors</li>&#13;
          <li class="bullet-l2">Draws a red square</li>&#13;
          <li class="bullet-l2">Draws a red circle</li>&#13;
          <li class="bullet-l2">Draws half a circle</li>&#13;
        </ul>&#13;
      </li>&#13;
      <li class="numbered">What are all three methods required to draw a line within the canvas element, and in what order?</li>&#13;
    </ol>&#13;
    <h1 id="_idParaDest-429" class="title">Summary</h1>&#13;
    <p class="normal">We have discussed a lot of great additions to our JavaScript toolbox using HTML5 in this chapter. These new skills will really enhance our capabilities to build interactive web apps. We started off with the local file reader, which enabled us to upload and read files using several methods, such as the <code class="Code-In-Text--PACKT-">readAsText()</code> method. Then we saw how to get the <code class="Code-In-Text--PACKT-">GeoLocation</code> of a user. This can be great to personalize suggestions, for example, for restaurants or parking spots.</p>&#13;
    <p class="normal">The canvas was yet another amazing addition to what we can do with web page(s). Canvases allow us to draw, write text, add images (by drawing and uploading), and create complete animations. This all can be done using the methods on the canvas.</p>&#13;
    <p class="normal">We then had a look at media on the page and how to add audio and video. Finally, we discussed the topic of digital accessibility and how to make sure your website is accessible for everybody, with and without a screen reader.</p>&#13;
    <p class="normal">And at this point, we can say, you did it! You've worked your way through so many basic and advanced web development topics. In the final chapter, we are going to be exploring the next steps for you to take your skills to the next level beyond pure JavaScript, which is what this book has focused on.</p>&#13;
  </div>&#13;
</div></body></html>