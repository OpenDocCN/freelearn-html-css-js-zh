<html><head></head><body>
		<div><h1 id="_idParaDest-45"><em class="italic"><a id="_idTextAnchor044"/>Chapter 2</em>: Exploring the Advanced Concepts of JavaScript</h1>
			<p>In this chapter, we will explore the advanced features of JavaScript, such as object-oriented programming. We will also study two types of objects that are widely used in JavaScript: arrays and strings. Finally, we will see how JavaScript allows you to trigger deferred processing, using so-called callback functions.</p>
			<p>In this chapter, we’ll be covering the following topics:</p>
			<ul>
				<li>Classes and objects</li>
				<li>Arrays</li>
				<li>Character strings</li>
				<li>Multitasking</li>
				<li>Using promises</li>
			</ul>
			<p>All these topics are fundamental to building JavaScript applications. Let’s start now!</p>
			<h1 id="_idParaDest-46"><a id="_idTextAnchor045"/>Technical requirements</h1>
			<p>You can find the code files for this chapter on GitHub at: <a href="https://github.com/PacktPublishing/JavaScript-from-Frontend-to-Backend/blob/main/Chapter%202.zip">https://github.com/PacktPublishing/JavaScript-from-Frontend-to-Backend/blob/main/Chapter%202.zip</a>.</p>
			<h1 id="_idParaDest-47"><a id="_idTextAnchor046"/>Classes and objects</h1>
			<p>The notion<a id="_idIndexMarker086"/> of classes and objects is fundamental to programming languages. JavaScript allows them<a id="_idIndexMarker087"/> to be used as well.</p>
			<p>A class is used to represent any type of data. For example, people, customers, cars, and so on. We can define a class to represent each of these types of elements, for example, a <code>Person</code> class to represent people, a <code>Client</code> class to represent customers, and a <code>Car</code> class to represent cars.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Note that the class name traditionally begins with an uppercase letter.</p>
			<p>An object, on the other hand, will be a <a id="_idIndexMarker088"/>particular element of a class (this element will be also called an<a id="_idIndexMarker089"/> instance). For example, among all the people of the class <code>Person</code>, the person<a id="_idIndexMarker090"/> identified by his name “Clinton” and his first name “Bill” represents a particular object of the class <code>Person</code>. This object can be associated, for example, with the variable <code>p</code> in the program. We can thus create variables to identify each object associated with the class.</p>
			<h2 id="_idParaDest-48"><a id="_idTextAnchor047"/>Defining a class</h2>
			<p>The question to ask yourself<a id="_idIndexMarker091"/> when creating a class is what actions you want to perform on the type of data it represents.</p>
			<p>For example, if we create the <code>Person</code> class, we should ask what characterizes a person and what action can we perform on this class. We could, for example, say that the <code>Person</code> class is characterized by the last name, first name, and age of the person. You can also add an address, phone number, email, and so on.</p>
			<p>As for the possible actions on people, we can imagine, for example, the action of getting married to another person, the action of moving to another city, the action of changing employers, and so on.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Characteristics such as last name, first name, age, and <a id="_idIndexMarker092"/>so on are called properties of the class, while actions such as getting <a id="_idIndexMarker093"/>married, moving, and so on are called methods of the class. A class will therefore group together a set of properties and a set of methods.</p>
			<p>A JavaScript class is created using the keyword <code>class</code> followed by the name of the class, followed by braces describing the content. For example, the <code>Person</code> class will be created as follows:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Person class</p>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code">}</pre>
			<p>This definition of the <code>Person</code> class <a id="_idIndexMarker094"/>will not be very useful for now, because <a id="_idIndexMarker095"/>no properties or methods are defined inside it. We will see later how to improve it.</p>
			<h2 id="_idParaDest-49"><a id="_idTextAnchor048"/>Creating an object by using a class</h2>
			<p>Once the <a id="_idIndexMarker096"/>class is defined, we can create objects associated with this class. For<a id="_idIndexMarker097"/> this, we use the keyword <code>new</code> followed by the name of the class. This creates a variable that represents an object of that class:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating an object p of class Person</p>
			<pre class="source-code">// define the Person class</pre>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code"><strong class="bold">// create an object of class Person</strong></pre>
			<pre class="source-code"><strong class="bold">var p = new Person;  // object p of class Person</strong></pre>
			<pre class="source-code"><strong class="bold">console.log(p);</strong></pre>
			<p>This is what you will see:</p>
			<div><div><img src="img/Figure_2.1_B17416.jpg" alt="Figure 2.1 – Creating a Person class object&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.1 – Creating a Person class object</p>
			<p>The <code>p</code> object is displayed<a id="_idIndexMarker098"/> in the console. We are told that it is a <code>Person</code> class object and that it is empty <code>{}</code>. The representation of an object in the form of braces is traditional in JavaScript, as we saw in the <em class="italic">Type of variables used in JavaScript</em> section of the previous chapter.</p>
			<p>We can verify that it also<a id="_idIndexMarker099"/> works on the client side, in a browser. The HTML file is as follows:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">index.html file</p>
			<pre class="source-code">&lt;html&gt;</pre>
			<pre class="source-code">  &lt;head&gt;</pre>
			<pre class="source-code">    &lt;meta charset="utf-8" /&gt;</pre>
			<pre class="source-code">    &lt;script&gt;</pre>
			<pre class="source-code">      <strong class="bold">class Person {</strong></pre>
			<pre class="source-code"><strong class="bold">      }</strong></pre>
			<pre class="source-code"><strong class="bold">      var p = new Person;</strong></pre>
			<pre class="source-code"><strong class="bold">      console.log(p);</strong></pre>
			<pre class="source-code">    &lt;/script&gt;</pre>
			<pre class="source-code">  &lt;/head&gt;</pre>
			<pre class="source-code">  &lt;body&gt;</pre>
			<pre class="source-code">  &lt;/body&gt;</pre>
			<pre class="source-code">&lt;/html&gt;</pre>
			<div><div><img src="img/Figure_2.2_B17416.jpg" alt="Figure 2.2 – Creating an object in the browser&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.2 – Creating an object in the browser</p>
			<p>We find the display<a id="_idIndexMarker100"/> of braces, which symbolizes the display of a JavaScript <a id="_idIndexMarker101"/>object.</p>
			<h2 id="_idParaDest-50"><a id="_idTextAnchor049"/>Creating an object without using a class</h2>
			<p>It is possible to <a id="_idIndexMarker102"/>create an object without having created a class first. All you have to do is use the notation with the braces { and }.</p>
			<p>For example, we can write the following:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating an object using the braces notation</p>
			<pre class="source-code">var p = { lastname : "Clinton", firstname : "Bill" };</pre>
			<pre class="source-code">console.log("The person is", p);</pre>
			<p>This will create the object <code>p</code> with the <code>lastname</code> and <code>firstname</code> properties. Note that you can indicate the names of the properties by enclosing them in quotation marks, or not. So <code>{ lastname: "Clinton" }</code> can also be written <code>{ "lastname": "Clinton" }</code> by surrounding the <code>lastname</code> property with single or double quotes.</p>
			<p>Now let’s see how to<a id="_idIndexMarker103"/> improve the <code>Person</code> class previously created by adding properties and methods to it.</p>
			<h2 id="_idParaDest-51"><a id="_idTextAnchor050"/>Adding properties to a class</h2>
			<p>A person has, in our <a id="_idIndexMarker104"/>example, a last name, a first name, and an age. We will create these three properties for people of the <code>Person</code> class.</p>
			<p>All you have to do is indicate each of these properties, by name, in the body of the <code>Person</code> class. Above all, do not use the <code>var</code> or <code>let</code> keywords to define them:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Adding firstname, lastname, and age properties in Person class</p>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code"><strong class="bold">  firstname;</strong></pre>
			<pre class="source-code"><strong class="bold">  lastname;</strong></pre>
			<pre class="source-code"><strong class="bold">  age;</strong></pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">var p = new Person;</pre>
			<pre class="source-code">console.log(p);</pre>
			<div><div><img src="img/Figure_2.3_B17416.jpg" alt="Figure 2.3 – Creation of lastname, firstname, and age properties in the Person class&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.3 – Creation of lastname, firstname, and age properties in the Person class</p>
			<p>The <code>Person</code> class object <code>p</code> now has the properties added in the class. Any other object of this class will also have them.</p>
			<p>Note that the values <a id="_idIndexMarker105"/>of the added properties are <code>undefined</code>. This is normal because no values have been specified for these properties in the <code>p</code> object or the <code>Person</code> class.</p>
			<p>Let’s modify the <code>Person</code> class so that the properties have default values, rather than <code>undefined</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Properties with default values</p>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code"><strong class="bold">  firstname = "";</strong></pre>
			<pre class="source-code"><strong class="bold">  lastname = "";</strong></pre>
			<pre class="source-code"><strong class="bold">  age = 0;</strong></pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">var p = new Person;</pre>
			<pre class="source-code">console.log(p);</pre>
			<p>Each property is initialized with its default value. The <code>lastname</code> and <code>firstname</code> properties are initialized with an empty string <code>""</code>, while <code>age</code> is initialized by default to <code>0</code>.</p>
			<div><div><img src="img/Figure_2.4_B17416.jpg" alt="Figure 2.4 – Properties with default values&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.4 – Properties with default values</p>
			<p>A class has properties, but<a id="_idIndexMarker106"/> also methods. Now let’s see how to add methods to a class.</p>
			<h2 id="_idParaDest-52"><a id="_idTextAnchor051"/>Adding methods to a class</h2>
			<p>You can add <a id="_idIndexMarker107"/>methods to a class. Objects created from the class (with <code>new</code>) will be able to use these methods directly.</p>
			<p>For example, let’s create the <code>display()</code> method, which displays a line of text containing the person’s first and last name. The instruction <code>p.display()</code> (assuming that <code>p</code> is a <code>Person</code> class object) is used to display the last name and first name of the person related to the object <code>p</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating the display() method in the Person class</p>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code">  // class properties</pre>
			<pre class="source-code">  firstname = "";</pre>
			<pre class="source-code">  lastname = "";</pre>
			<pre class="source-code">  age = 0;</pre>
			<pre class="source-code">  </pre>
			<pre class="source-code">  // class methods</pre>
			<pre class="source-code"><strong class="bold">  display() {</strong></pre>
			<pre class="source-code"><strong class="bold">    console.log("The person's lastname is = " + </strong></pre>
			<pre class="source-code"><strong class="bold">                this.lastname +</strong></pre>
			<pre class="source-code"><strong class="bold">                ", firstname = " + this.firstname);</strong></pre>
			<pre class="source-code"><strong class="bold">  }</strong></pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">var p = new Person;</pre>
			<pre class="source-code">console.log("Variable p = ", p);</pre>
			<pre class="source-code"><strong class="bold">p.display();</strong>  // use of the display() method on the p object</pre>
			<p>The properties of the class are <a id="_idIndexMarker108"/>accessible in the methods of the class by prefixing them with the keyword <code>this</code>. For example, <code>this.lastname</code> provides access to the <code>lastname</code> property of the class.</p>
			<p>The <code>this</code> keyword refers to the object itself that uses the <code>display()</code> method, so here, the <code>p</code> object.</p>
			<p>If you omit the <code>this</code> keyword and use the <code>lastname</code> property directly, you will get a syntax error because the property is only accessible with the <code>this</code> keyword.</p>
			<p>The output of the preceding code snippet is displayed here:</p>
			<div><div><img src="img/Figure_2.5_B17416.jpg" alt="Figure 2.5 – Using the display() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.5 – Using the display() method</p>
			<p>The <code>display()</code> method displays <code>firstname</code> and <code>lastname</code> of the person associated with the variable <code>p</code>, but since <code>lastname</code> and <code>firstname</code> have been initialized to an empty string, no last name or first name is displayed. Let’s look at how to modify the value <a id="_idIndexMarker109"/>of a property.</p>
			<h2 id="_idParaDest-53"><a id="_idTextAnchor052"/>Changing an object’s property values</h2>
			<p>You can modify the value of the<a id="_idIndexMarker110"/> properties of an object by using these properties directly, for example, <code>p.lastname</code> allows you to read or modify the value of the <code>lastname</code> property for the object <code>p</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Initialization of the lastname and firstname of the person</p>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code">  // class properties</pre>
			<pre class="source-code">  lastname = "";</pre>
			<pre class="source-code">  firstname = "";</pre>
			<pre class="source-code">  age = 0;</pre>
			<pre class="source-code">  </pre>
			<pre class="source-code">  // class methods</pre>
			<pre class="source-code">  display() {</pre>
			<pre class="source-code">    console.log(" The person's lastname = " + this.lastname +</pre>
			<pre class="source-code">                ", firstname = " + this.firstname);</pre>
			<pre class="source-code">  }</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">var p = new Person;</pre>
			<pre class="source-code"><strong class="bold">p.lastname = "Clinton";  // initialization of the lastname </strong></pre>
			<pre class="source-code"><strong class="bold">                         // property of the object p</strong></pre>
			<pre class="source-code"><strong class="bold">p.firstname = "Bill";    // initialization of the firstname </strong></pre>
			<pre class="source-code"><strong class="bold">                         // property of the object p</strong></pre>
			<pre class="source-code">console.log("Variable p = ", p);</pre>
			<pre class="source-code">p.display();</pre>
			<p>This is what you will see:</p>
			<div><div><img src="img/Figure_2.6_B17416.jpg" alt="Figure 2.6 – The lastname and firstname properties are initialized&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.6 – The lastname and firstname properties are initialized</p>
			<p>Once the object <code>p</code> has been<a id="_idIndexMarker111"/> created by the <code>new</code> operator, we initialize its <code>lastname</code> and <code>firstname</code> properties to the values indicated. The <code>age</code> property is not modified here, and will therefore remain equal to the value 0.</p>
			<p>We modified the value of the <code>lastname</code> and <code>firstname</code> properties of the object <code>p</code> created using <code>p.lastname</code> and <code>p.firstname</code>.</p>
			<p>This modification of property values is done after the object <code>p</code> is created. It is possible to do this modification during the very creation of the object, in the <code>new</code> instruction. This requires defining a method called <code>constructor()</code>, which allows this initialization.</p>
			<h2 id="_idParaDest-54"><a id="_idTextAnchor053"/>Using the class constructor</h2>
			<p>The <code>constructor()</code> method is<a id="_idIndexMarker112"/> called the constructor of the class. It is automatically called during each <code>new</code> statement if the <code>constructor()</code> method exists in the class. We define it in a<a id="_idIndexMarker113"/> class if we want to perform a specific process each time an object is created in this class.</p>
			<p>The <code>constructor()</code> method can have any number of parameters or none at all. The parameters indicated here will be used to initialize the <code>lastname</code> and <code>firstname</code> properties of the person:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using a constructor for the Person class</p>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code">  // class properties</pre>
			<pre class="source-code">  lastname = "";</pre>
			<pre class="source-code">  firstname = "";</pre>
			<pre class="source-code">  age = 0;</pre>
			<pre class="source-code">  </pre>
			<pre class="source-code">  // class methods</pre>
			<pre class="source-code"><strong class="bold">  constructor(lastname, firstname, age) {</strong></pre>
			<pre class="source-code"><strong class="bold">    this.lastname = lastname;</strong></pre>
			<pre class="source-code"><strong class="bold">    this.firstname = firstname;</strong></pre>
			<pre class="source-code"><strong class="bold">    this.age = age;</strong></pre>
			<pre class="source-code"><strong class="bold">  }</strong></pre>
			<pre class="source-code">  display() {</pre>
			<pre class="source-code">    console.log(" The person's lastname = " + this.lastname +</pre>
			<pre class="source-code">                ", firstname = " + this.firstname);</pre>
			<pre class="source-code">  }</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">var p = new Person("Clinton", "Bill");</pre>
			<pre class="source-code">console.log("Variable p = ", p);</pre>
			<pre class="source-code">p.display();</pre>
			<p>The <code>constructor()</code> method is defined by giving it the three parameters <code>lastname</code>, <code>firstname</code>, and <code>age</code>. They are transferred into the properties of the object by means of <code>this.lastname</code>, <code>this.firstname</code>, and <code>this.age</code>.</p>
			<p>Finally, the object <code>p</code> is now created by passing as parameters the values of <code>lastname</code>, <code>firstname</code>, and <code>age</code> of the<a id="_idIndexMarker114"/> person created with <code>new</code>. Here, <code>age</code> is not specified in parameters in the <code>new</code> instruction; it will therefore be an <code>undefined</code> value that will <a id="_idIndexMarker115"/>be transmitted to the constructor.</p>
			<div><div><img src="img/Figure_2.7_B17416.jpg" alt="Figure 2.7 – Using a constructor&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.7 – Using a constructor</p>
			<p>We find the <code>lastname</code> and <code>firstname</code> properties initialized, but the <code>age</code> property is now initialized to the value <code>undefined</code> instead of <code>0</code>. To assign it another value, simply pass an additional value when creating the object with <code>new</code>. This additional value will represent the person’s age, for example:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using age when creating Person class object</p>
			<pre class="source-code">class Person {</pre>
			<pre class="source-code">  // class properties</pre>
			<pre class="source-code">  lastname = "";</pre>
			<pre class="source-code">  firstname = "";</pre>
			<pre class="source-code">  age = 0;</pre>
			<pre class="source-code">  </pre>
			<pre class="source-code">  // class methods</pre>
			<pre class="source-code">  constructor(lastname, firstname, age) {</pre>
			<pre class="source-code">    this.lastname = lastname;</pre>
			<pre class="source-code">    this.firstname = firstname;</pre>
			<pre class="source-code">    this.age = age;</pre>
			<pre class="source-code">  }</pre>
			<pre class="source-code">  display() {</pre>
			<pre class="source-code">    // the age of the person is also displayed</pre>
			<pre class="source-code"><strong class="bold">    console.log("The person's lastname = " + this.lastname +</strong></pre>
			<pre class="source-code"><strong class="bold">                ", firstname = " + this.firstname + </strong></pre>
			<pre class="source-code"><strong class="bold">                ", age = " + this.age);     </strong>    </pre>
			<pre class="source-code">  }</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code"><strong class="bold">var p = new Person("Clinton", "Bill", 33);</strong>    // age is now </pre>
			<pre class="source-code">                                              // transmitted</pre>
			<pre class="source-code">console.log("Variable p = ", p);</pre>
			<pre class="source-code">p.display();</pre>
			<div><div><img src="img/Figure_2.8_B17416.jpg" alt="Figure 2.8 – The person's age is now transmitted&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.8 – The person’s age is now transmitted</p>
			<p>We have seen how to create an object, by directly defining its properties and methods using a class. However, we <a id="_idIndexMarker116"/>can also create an object from another <a id="_idIndexMarker117"/>object. Let’s see how to do it.</p>
			<h2 id="_idParaDest-55"><a id="_idTextAnchor054"/>Merging one object with another</h2>
			<p>There may be cases <a id="_idIndexMarker118"/>when you want to create a new object from an old object. Let’s see how to do this.</p>
			<p>If the object <code>p</code> contains a value, the statement <code>var p2 = p</code> does not create a new object <code>p2</code> distinct from the object <code>p</code>, but only a reference <code>p2</code> that points to the same value as the reference <code>p</code>. So any modification of the properties of the object <code>p</code> will also be visible in the object <code>p2</code> because both point to the same memory location.</p>
			<p>This can be verified using the following example:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Modifying an object in memory</p>
			<pre class="source-code">var p = { lastname : "Clinton", firstname : "Bill" };</pre>
			<pre class="source-code">console.log("p (before modification of p2) =", p);  </pre>
			<pre class="source-code">       // p = { lastname : "Clinton", firstname : "Bill" }</pre>
			<pre class="source-code"><strong class="bold">var p2 = p;</strong></pre>
			<pre class="source-code"><strong class="bold">p2.city = "Washington";</strong></pre>
			<pre class="source-code">console.log("p (after modification of p2) =", p);  </pre>
			<pre class="source-code">       // p = { lastname : "Clinton", firstname : "Bill", </pre>
			<pre class="source-code">       // city : "Washington"}</pre>
			<pre class="source-code">console.log("p2 =", p2);  </pre>
			<pre class="source-code">       // p2 = { lastname : "Clinton", firstname : "Bill", </pre>
			<pre class="source-code">       // city : "Washington"}</pre>
			<p>Even if only the <code>p2</code> object is modified, the <code>p</code> object is also modified because they are memory references that point to the same location. If the contents of the memory location are changed, both references see the same change.</p>
			<p>To avoid this situation, it<a id="_idIndexMarker119"/> would not be necessary to write <code>p2 = p</code>, but rather to copy the properties of the object <code>p</code> into those of the object <code>p2</code>, thus creating a new memory location. For this, JavaScript offers the spread operator, used in the form <code>…</code>, which allows it:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using the spread operator ...</p>
			<pre class="source-code">var p = { lastname : "Clinton", firstname : "Bill" }</pre>
			<pre class="source-code">console.log("p (before modification of p2) =", p);</pre>
			<pre class="source-code"><strong class="bold">var p2 = { ...p};   // copy the properties of object p into </strong></pre>
			<pre class="source-code"><strong class="bold">                    // object p2</strong></pre>
			<pre class="source-code"><strong class="bold">p2.city = "Washington";</strong></pre>
			<pre class="source-code">console.log("p (after modification of p2) =", p);</pre>
			<pre class="source-code">console.log("p2 =", p2);</pre>
			<p>The spread operator is used by surrounding the original object with braces <code>{ and }</code>, and preceding the object with the spread operator (for example, <code>{...p}</code>).</p>
			<div><div><img src="img/Figure_2.9_B17416.jpg" alt="Figure 2.9 – Using the spread operator...&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.9 – Using the spread operator...</p>
			<p>Object <code>p</code> is no longer modified when object <code>p2</code> is modified.</p>
			<p>It is also possible to write it in shortened form:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating object p2 from object p, adding the city</p>
			<pre class="source-code">// to avoid writing p2.city = "Washington"</pre>
			<pre class="source-code">var p2 = { ...p, city : "Washington" };  </pre>
			<p>Now that we have looked <a id="_idIndexMarker120"/>at classes and objects and how to work with them, let’s take a look at an important class object: the <code>Array</code> class.</p>
			<h1 id="_idParaDest-56"><a id="_idTextAnchor055"/>Arrays</h1>
			<p>Arrays store a <a id="_idIndexMarker121"/>collection of data, ordered according to their index. The index is also called the index of the array. It starts at 0 and scales up to the total number of elements in the array, minus 1 (0 to n-1).</p>
			<p>Let’s learn how to create an array first.</p>
			<h2 id="_idParaDest-57"><a id="_idTextAnchor056"/>Creating an array</h2>
			<p>An array <a id="_idIndexMarker122"/>corresponds in JavaScript to an <code>Array</code> class object. We therefore create an array using the <code>new Array</code> instruction.</p>
			<p>However, since arrays are widely used in JavaScript programs, it is also possible to create them using a bracket notation <code>[ and ]</code>. This is an easier way to use them without going through the <code>Array</code> class.</p>
			<p>Let’s take a detailed look at these two ways to create an array (with brackets and with the <code>Array</code> class).</p>
			<h3>Creating an array using square brackets [ and ]</h3>
			<p>The easiest and<a id="_idIndexMarker123"/> fastest way to create an <a id="_idIndexMarker124"/>array is to use the bracket notation:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating an array using square brackets</p>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">console.log(tab);</pre>
			<p>The array begins with an opening square bracket <code>[</code> and ends with a closing square bracket <code>]</code>. The elements of the array are separated by a comma. We have inserted elements here as strings, but in fact, any type of element can be inserted into an array. </p>
			<div><div><img src="img/Figure_2.10_B17416.jpg" alt="Figure 2.10 – Elements inserted into an array&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.10 – Elements inserted into an array</p>
			<p>Note that it is possible to <a id="_idIndexMarker125"/>create an empty array (without any<a id="_idIndexMarker126"/> elements). We write this as <code>[]</code>, without indicating any element inside the square brackets. It will then be possible to add elements to this array.</p>
			<h3>Creating an array using the Array class</h3>
			<p>You can also use the <code>Array</code> class to <a id="_idIndexMarker127"/>create an array. The <code>Array</code> class includes a constructor in which we indicate the list of array elements, each separated from<a id="_idIndexMarker128"/> the next by a comma.</p>
			<p>The same array as before can be created by the <code>new Array</code> statement by writing the following:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating an array using new Array</p>
			<pre class="source-code">var tab = new Array("Element 1", "Element 2", "Element 3", "Element 4", "Element 5");</pre>
			<pre class="source-code">console.log(tab);</pre>
			<div><div><img src="img/Figure_2.11_B17416.jpg" alt="Figure 2.11 – Creation of the array using new Array&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.11 – Creation of the array using new Array</p>
			<p>The array created is the<a id="_idIndexMarker129"/> same as before.</p>
			<p>To create an empty array, simply <a id="_idIndexMarker130"/>pass no parameters to the constructor by writing the following:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating an empty array using new Array()</p>
			<pre class="source-code">var tab = new Array();    // or new Array;</pre>
			<pre class="source-code">console.log(tab);</pre>
			<div><div><img src="img/Figure_2.12_B17416.jpg" alt="Figure 2.12 – Creating an empty array [ ]&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.12 – Creating an empty array [ ]</p>
			<p>Now that we’ve seen how to create an array, let’s see how to access each of its elements.</p>
			<h2 id="_idParaDest-58"><a id="_idTextAnchor057"/>Accessing array elements</h2>
			<p>In previous programs, we<a id="_idIndexMarker131"/> displayed the entire array, using the <code>console.log(tab)</code> statement. It is possible to access each element of the array separately. Each element can be accessed as follows:</p>
			<ul>
				<li>By its index</li>
				<li>With a <code>for()</code> loop</li>
				<li>With the <code>forEach()</code> method</li>
			</ul>
			<p>Let’s take a look at each of these three ways.</p>
			<h3>Accessing an element by index</h3>
			<p>Let’s take the previous<a id="_idIndexMarker132"/> array of five elements, that is, <code>tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"]</code>:</p>
			<ul>
				<li>The first element can be accessed by its index 0, that is, <code>tab[0]</code>.</li>
				<li>The next one, with index 1, will be accessed by <code>tab[1]</code>.</li>
				<li>The last one, with index 4, will be accessed by <code>tab[4]</code>.</li>
			</ul>
			<p>This is how you will display each element:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Displaying each element of the array by its index</p>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">console.log("tab[0] =", tab[0]);</pre>
			<pre class="source-code">console.log("tab[1] =", tab[1]);</pre>
			<pre class="source-code">console.log("tab[2] =", tab[2]);</pre>
			<pre class="source-code">console.log("tab[3] =", tab[3]);</pre>
			<pre class="source-code">console.log("tab[4] =", tab[4]);</pre>
			<pre class="source-code">console.log("tab[5] =", tab[5]);</pre>
			<p>The result is displayed in the following figure:</p>
			<div><div><img src="img/Figure_2.13_B17416.jpg" alt="Figure 2.13 – Displaying each element by its index&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.13 – Displaying each element by its index</p>
			<p>The array contains<a id="_idIndexMarker133"/> five elements, which means the indices go from 0 to 4. However, to do a test, we also access the element with index 5. It is possible to access an index of an element that does not exist in the array. The result in this case is the JavaScript value <code>undefined</code>, which means that the value of this element has not yet been assigned.</p>
			<p>Note that it is possible with this access method to modify the value of an array element – just give it a new value:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Modifying the value of the elements in indexes 2 and 3 of the array</p>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">console.log("Array before modification");</pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">// modification of elements, index 2 and 3</pre>
			<pre class="source-code"><strong class="bold">tab[2] = "New element 3";</strong></pre>
			<pre class="source-code"><strong class="bold">tab[3] = "New element 4";</strong></pre>
			<pre class="source-code">console.log("Array after modification");</pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<p>This is the result:</p>
			<div><div><img src="img/Figure_2.14_B17416.jpg" alt="Figure 2.14 – Modifying array elements&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.14 – Modifying array elements</p>
			<p>Next, we will look at <a id="_idIndexMarker134"/>accessing an element with a <code>for()</code> or <code>while()</code> loop.</p>
			<h3>Accessing an element with a for() or while() loop</h3>
			<p>The <code>for()</code> and <code>while()</code> loops already<a id="_idIndexMarker135"/> studied in the previous chapter allow you to browse all the elements of an array. The index<a id="_idIndexMarker136"/> of the loop <a id="_idIndexMarker137"/>starts at 0 (to access the first element of the array, the one with index 0) and ends at the last index of the array.</p>
			<p>To know this last index, JavaScript provides the <code>length</code> property in the <code>Array</code> class, which allows us to know the total number of elements of an array. The last index will be the one with the value <code>length – 1</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Accessing array elements with a for() loop</p>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">console.log("Access to each element by a for() loop");</pre>
			<pre class="source-code"><strong class="bold">for (var i = 0; i &lt; tab.length; i++) console.log("tab[" + i + "]=", tab[i]);</strong></pre>
			<p>Note that the end of the <a id="_idIndexMarker138"/>loop is written<a id="_idIndexMarker139"/> by testing the<a id="_idIndexMarker140"/> value <code>i &lt; tab.length</code>. This is equivalent to writing <code>i &lt;= tab.length – 1</code>.</p>
			<div><div><img src="img/Figure_2.15_B17416.jpg" alt="Figure 2.15 – Accessing array elements with a for() loop&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.15 – Accessing array elements with a for() loop</p>
			<p>Next, we will look at accessing an element with the <code>forEach(callback)</code> method. </p>
			<h3>Accessing an element with the forEach(callback) method</h3>
			<p>The <code>forEach(callback)</code> method is a <a id="_idIndexMarker141"/>method defined by JavaScript on the <code>Array</code> class. It is used to browse the elements of an array by transmitting each of the elements of the array to a function passed as a parameter. The function<a id="_idIndexMarker142"/> indicated as a parameter therefore has access to each element of the array (and to its index if necessary).</p>
			<p class="callout-heading">Callback Function</p>
			<p class="callout">The principle of indicating a function in the parameters of a method is very common in JavaScript. The function in the parameters is known as a <a id="_idIndexMarker143"/>callback function, which means that the actual processing to be executed is that indicated in the callback function.</p>
			<p>We show here how to use a callback function<a id="_idIndexMarker144"/> indicated in parameters of the <code>forEach(callback)</code> method.</p>
			<p>We use the <code>tab</code> array of five elements seen previously, to which we apply the <code>forEach()</code> method:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Accessing array elements using the forEach() method</p>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">console.log("Access to each element by the forEach() method");</pre>
			<pre class="source-code"><strong class="bold">tab.forEach(function(elem, i) {</strong></pre>
			<pre class="source-code"><strong class="bold">  console.log("tab[" + i + "]=", elem);</strong></pre>
			<pre class="source-code"><strong class="bold">});</strong></pre>
			<p>We indicate a function as a parameter of the <code>forEach()</code> method. This so-called callback function will be called automatically by JavaScript for each element of the <code>tab</code> array (which uses the <code>forEach()</code> method).</p>
			<p>The callback function takes as its first parameter the element of the array for which the function is called (parameter <code>elem</code>), and its index (parameter <code>i</code>). </p>
			<div><div><img src="img/Figure_2.16_B17416.jpg" alt="Figure 2.16 – Accessing array elements using the forEach() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.16 – Accessing array elements using the forEach() method</p>
			<p>The result is the same as that <a id="_idIndexMarker145"/>obtained by the <code>for()</code> loop. However, there is a (small) difference that we <a id="_idIndexMarker146"/>discover right away.</p>
			<h3>The difference between the for() loop and the forEach() method</h3>
			<p>The previous program did <a id="_idIndexMarker147"/>not show any difference between the <code>for()</code> loop and <code>forEach()</code> method results to access array elements.</p>
			<p>To show the difference between<a id="_idIndexMarker148"/> these two approaches, let’s introduce a new element in the array, at index 10, knowing that the last index used during the creation of the array was 4. We thus create a new element that is much further away than the current last element of the array. How will the array react to this enlargement?</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Addition of an element at index 10</p>
			<pre class="source-code">// original array</pre>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">// adding a new element in the array, at index 10</pre>
			<pre class="source-code"><strong class="bold">tab[10] = "Element 9";</strong></pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">// display the array with a for() loop</pre>
			<pre class="source-code">console.log("Access to each element by a for() loop");</pre>
			<pre class="source-code">for (var i = 0; i &lt; tab.length; i++) console.log("tab[" + i + "]=", tab[i]);</pre>
			<pre class="source-code">// display the array by the forEach() method</pre>
			<pre class="source-code">console.log("Access to each element by the forEach() method");</pre>
			<pre class="source-code">tab.forEach(function(elem, i) {</pre>
			<pre class="source-code">  console.log("tab[" + i + "]=", elem);</pre>
			<pre class="source-code">});</pre>
			<p>We add an<a id="_idIndexMarker149"/> element to the array using <code>tab[10] = "Element 9"</code>, then display the contents of the array <a id="_idIndexMarker150"/>using the <code>for()</code> loop and then the <code>forEach()</code> method.</p>
			<p>The result is displayed in the following figure:</p>
			<div><div><img src="img/Figure_2.17_B17416.jpg" alt="Figure 2.17 – Adding an element at index 10 of the array&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.17 – Adding an element at index 10 of the array</p>
			<p>The display of the <code>for()</code> loop<a id="_idIndexMarker151"/> shows that the elements with indices 5 to 9 exist but <a id="_idIndexMarker152"/>are of value <code>undefined</code>, because effectively, no values have been inserted for these indices of the array. However, the indices 5 to 9 with their <code>undefined</code> values are displayed by the <code>for()</code> loop.</p>
			<p>Conversely, the <code>forEach()</code> method provides the callback function indicated in parameters with only the array elements that have actually been affected in the array. This therefore avoids the <a id="_idIndexMarker153"/>elements at indices 5 to 9, which have not been assigned in the program.</p>
			<p>We have seen how to create <a id="_idIndexMarker154"/>an array, then how to access each of its elements. Let’s look at how to add new elements to the array.</p>
			<h2 id="_idParaDest-59"><a id="_idTextAnchor058"/>Adding items to the array</h2>
			<p>Once the array has <a id="_idIndexMarker155"/>been created (empty or not), it is possible to add elements to it. We will mainly use one of the two following techniques:</p>
			<ul>
				<li>Adding an element by its index in the array</li>
				<li>Adding an item using the <code>push()</code> method</li>
			</ul>
			<p>Now let’s take a look at these two techniques.</p>
			<h3>Adding an element by index</h3>
			<p>This corresponds to the assignment <code>tab[i] = value</code>. We used it in the previous section by writing <code>tab[10] = "Element 9"</code>.</p>
			<p>Note simply that<a id="_idIndexMarker156"/> if the index used is greater than the current number of elements in the array, this enlarges the array by creating elements initialized to the value <code>undefined</code>. And if the index used is less than the number of elements in the array, it modifies the current value of the targeted element.</p>
			<h3>Adding an element using the push() method</h3>
			<p>The <code>push()</code> method is <a id="_idIndexMarker157"/>defined in the <code>Array</code> class. It allows you to <a id="_idIndexMarker158"/>add a new element to an array without worrying about the insertion index because it automatically inserts the element at the end of the array:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Inserting an element using the push() method</p>
			<pre class="source-code">// original array</pre>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">// insert an element using the push() method</pre>
			<pre class="source-code"><strong class="bold">tab.push("Element 6");</strong></pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">// display the array with a for() loop</pre>
			<pre class="source-code">console.log("Access to each element by a for() loop");</pre>
			<pre class="source-code">for (var i = 0; i &lt; tab.length; i++) console.log("tab[" + i + "]=", tab[i]);</pre>
			<pre class="source-code">// display the array by the forEach() method</pre>
			<pre class="source-code">console.log("Access to each element by the forEach() method");</pre>
			<pre class="source-code">tab.forEach(function(elem, i) {</pre>
			<pre class="source-code">  console.log("tab[" + i + "]=", elem);</pre>
			<pre class="source-code">});</pre>
			<p>The <a id="_idIndexMarker159"/>instruction <code>tab.push("Element 6")</code> inserts this <a id="_idIndexMarker160"/>element at the end of the array. The array is then displayed using the various methods seen previously.</p>
			<div><div><img src="img/Figure_2.18_B17416.jpg" alt="Figure 2.18 – Adding an element using the push() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.18 – Adding an element using the push() method</p>
			<p>We know how to add <a id="_idIndexMarker161"/>and modify elements in an<a id="_idIndexMarker162"/> array. All that remains is to know how to delete elements from an array. </p>
			<h2 id="_idParaDest-60"><a id="_idTextAnchor059"/>Deleting array elements</h2>
			<p>JavaScript allows us to<a id="_idIndexMarker163"/> delete array elements in two ways:</p>
			<ul>
				<li>Deleting the value of the element in the array, while retaining the element in the array with an <code>undefined</code> value</li>
				<li>Removing the element itself from the array</li>
			</ul>
			<p>Let’s examine these two<a id="_idIndexMarker164"/> possibilities now.</p>
			<h3>Deleting an element value (without deleting the element from the array)</h3>
			<p>We use the <code>delete</code> keyword to<a id="_idIndexMarker165"/> delete the value of an element in an array. For example, <code>delete tab[0]</code> deletes the value of the element with index 0 in the array <code>tab</code>, by assigning it the value <code>undefined</code>. The element is not<a id="_idIndexMarker166"/> removed from the array, which still has the same number of elements as before:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Deleting the value of the element with index 0</p>
			<pre class="source-code">// original array</pre>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">// delete the value of the element with index 0</pre>
			<pre class="source-code"><strong class="bold">delete tab[0];</strong></pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">// display the array with a for() loop</pre>
			<pre class="source-code">console.log("Access to each element by a for() loop");</pre>
			<pre class="source-code">for (var i = 0; i &lt; tab.length; i++) console.log("tab[" + i + "]=", tab[i]);</pre>
			<pre class="source-code">// display the array by the forEach() method</pre>
			<pre class="source-code">console.log("Access to each element by the forEach() method");</pre>
			<pre class="source-code">tab.forEach(function(elem, i) {</pre>
			<pre class="source-code">  console.log("tab[" + i + "]=", elem);</pre>
			<pre class="source-code">});</pre>
			<div><div><img src="img/Figure_2.19_B17416.jpg" alt="Figure 2.19 – Deleting the value of the element with index 0&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.19 – Deleting the value of the element with index 0</p>
			<p>We see that the <code>for()</code> loop displays the <code>undefined</code> value of the element, while the <code>forEach()</code> method no longer <a id="_idIndexMarker167"/>displays the element because its value<a id="_idIndexMarker168"/> has been deleted.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Note that if instead of using <code>delete tab[0]</code>, we use <code>tab[0] = undefined</code>, the <code>forEach()</code> method displays the element at index 0 as the first element of the array, because the value of the element has not actually been deleted but rather assigned to a new value, which here is <code>undefined</code>.</p>
			<p>Now let’s look at the <a id="_idIndexMarker169"/>second method for removing the element from the array.</p>
			<h3>Deleting an element from an array</h3>
			<p>Using the <code>delete</code> keyword does not <a id="_idIndexMarker170"/>delete the element from the array, which retains<a id="_idIndexMarker171"/> the same number of elements.</p>
			<p>The <code>splice(begin, count)</code> method defined in the <code>Array</code> class allows you to physically remove the element from the array, which will therefore have at least one element less after its use.</p>
			<p>The <code>splice(begin, count)</code> method includes the <code>begin</code> and <code>count</code> parameters, which allow you to indicate from which index you want to delete (<code>begin</code> parameter) the elements and the number of consecutive elements you want to delete (<code>count</code> parameter).</p>
			<p>So, to remove the element with index 0 from the array <code>tab</code>, just write <code>tab.splice (0, 1)</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Removing element with index 0 in array with splice() method</p>
			<pre class="source-code">// original array</pre>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">// remove 1 element from index 0</pre>
			<pre class="source-code"><strong class="bold">tab.splice(0, 1);</strong></pre>
			<pre class="source-code">console.log("tab =", tab);</pre>
			<pre class="source-code">// display the array with a for() loop</pre>
			<pre class="source-code">console.log("Access to each element by a for() loop");</pre>
			<pre class="source-code">for (var i = 0; i &lt; tab.length; i++) console.log("tab[" + i + "]=", tab[i]);</pre>
			<pre class="source-code">// display the array by the forEach() method</pre>
			<pre class="source-code">console.log("Access to each element by the forEach() method");</pre>
			<pre class="source-code">tab.forEach(function(elem, i) {</pre>
			<pre class="source-code">  console.log("tab[" + i + "]=", elem);</pre>
			<pre class="source-code">});</pre>
			<p>This is what you will see:</p>
			<div><div><img src="img/Figure_2.20_B17416.jpg" alt="Figure 2.20 – Deletion of element with index 0&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption"> </p>
			<p class="figure-caption">Figure 2.20 – Deletion of element with index 0</p>
			<p>We have <a id="_idIndexMarker172"/>seen how to <a id="_idIndexMarker173"/>add and delete elements in an array. Now let’s see how to extract a new array from the elements present in the current array.</p>
			<h2 id="_idParaDest-61"><a id="_idTextAnchor060"/>Filtering elements in an array</h2>
			<p>It is common to filter the <a id="_idIndexMarker174"/>elements of an array, for example, to keep only certain elements or to return new ones. The <code>Array</code> class has two methods—<code>filter(callback)</code> and <code>map(callback)</code>—that allow us to return a new array according to<a id="_idIndexMarker175"/> our conditions.</p>
			<h3>Using the filter(callback) method</h3>
			<p>The <code>tab.filter(callback)</code> method <a id="_idIndexMarker176"/>returns a new array while keeping only the desired elements of the <code>tab</code> array.</p>
			<p>The callback function of the form <code>callback(element, index)</code> is called for each of the elements of the array <code>tab</code>. It must return <code>true</code> if we decide to keep the element; otherwise, the element is excluded. A new array is returned as a result by the <code>tab.filter()</code> method, but the original <code>tab</code> array is not modified (unless it is assigned in return from the <a id="_idIndexMarker177"/>method, as in the following example).</p>
			<p>Let’s use the <code>filter()</code> method to keep only the elements of the array whose index is greater than or equal to 2:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using the filter() method</p>
			<pre class="source-code">// original array</pre>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">console.log("initial tab =", tab);</pre>
			<pre class="source-code">// keep only items with index &gt;= 2</pre>
			<pre class="source-code"><strong class="bold">tab = tab.filter(function(element, index) {</strong></pre>
			<pre class="source-code"><strong class="bold">  if (index &gt;= 2) return true;   // keep this element</strong></pre>
			<pre class="source-code"><strong class="bold">});</strong></pre>
			<pre class="source-code">console.log("\nfinal tab =", tab);</pre>
			<p>If the callback function returns <code>true</code>, the element is kept; otherwise, it is excluded. The callback function can also return <code>false</code>, or even return nothing, like here, and in this case, the element is <a id="_idIndexMarker178"/>excluded:</p>
			<div><div><img src="img/Figure_2.21_B17416.jpg" alt="Figure 2.21 – Using the filter() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.21 – Using the filter() method</p>
			<p>This brings us to the end<a id="_idIndexMarker179"/> of the filter() method.</p>
			<h3>Using the map(callback) method</h3>
			<p>The <code>tab.map(callback)</code> method is<a id="_idIndexMarker180"/> used to return a new array from the elements of the initial <code>tab</code> array. Each element of the initial array is <a id="_idIndexMarker181"/>passed to the callback function of the form <code>callback(element, index)</code>, which must return for each element a new element that will replace the original element.</p>
			<p>Let’s use the <code>map(callback)</code> method to return a new array in which all elements have been capitalized:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using the map() method</p>
			<pre class="source-code">// original array</pre>
			<pre class="source-code">var tab = ["Element 1", "Element 2", "Element 3", "Element 4", "Element 5"];</pre>
			<pre class="source-code">console.log("initial tab =", tab);</pre>
			<pre class="source-code">// capitalize all elements</pre>
			<pre class="source-code"><strong class="bold">tab = tab.map(function(element, index) {</strong></pre>
			<pre class="source-code"><strong class="bold">  return element.toUpperCase();</strong></pre>
			<pre class="source-code"><strong class="bold">});</strong></pre>
			<pre class="source-code">console.log("\nfinal tab =", tab);</pre>
			<p>The <code>toUpperCase()</code> method is a method defined on the <code>String</code> class (following screenshot), allowing you to capitalize the <a id="_idIndexMarker182"/>character string that uses the method.</p>
			<p>The result is displayed in<a id="_idIndexMarker183"/> the following figure:</p>
			<div><div><img src="img/Figure_2.22_B17416.jpg" alt="Figure 2.22 – Using the map() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.22 – Using the map() method</p>
			<p>We have studied in this section the use of objects of the <code>Array</code> class. Another class of objects is also widely used with JavaScript: character strings, which are represented by the <code>String</code> class. Now let’s see how to use objects of the <code>String</code> class.</p>
			<h1 id="_idParaDest-62"><a id="_idTextAnchor061"/>Character strings</h1>
			<p>Strings are widely used in <a id="_idIndexMarker184"/>programming languages. They are used to represent text entered by a user or text that will be displayed to a user.</p>
			<h2 id="_idParaDest-63"><a id="_idTextAnchor062"/>Creating a character string</h2>
			<p>A character string<a id="_idIndexMarker185"/> is represented by an object of class <code>String</code>. But since character strings are widely used in JavaScript, the language allows them to be used by surrounding them with double quotes <code>" and "</code> or single quotes <code>' and '</code>. It is also possible, for certain uses, to use backticks (reverse quotation marks <code>' and ')</code>.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The string literal must in this case begin and end with the same type of quotes.</p>
			<p>Now let’s see how to create a string using these various methods.</p>
			<h3>Creating a string literal using double or single quotes</h3>
			<p>The easiest way to create a string<a id="_idIndexMarker186"/> literal is to use<a id="_idIndexMarker187"/> the single or double quote notation:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating a string literal with double quotes</p>
			<pre class="source-code"><strong class="bold">var s = "String 1";</strong></pre>
			<pre class="source-code">console.log("s =", s);</pre>
			<p>Or, with single quotes:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating a string literal with single quotes</p>
			<pre class="source-code"><strong class="bold">var s = 'String 1';</strong></pre>
			<pre class="source-code">console.log("s =", s);</pre>
			<p>In both cases, the character string displayed is the same.</p>
			<div><div><img src="img/Figure_2.23_B17416.jpg" alt="Figure 2.23 – Creating a character string&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.23 – Creating a character string</p>
			<p class="callout-heading">Advantage of Having the Option to Use Single/Double Quotation Marks</p>
			<p class="callout">The advantage of having the possibility of using single or double quotes is visible if the string itself contains quotes. For example, if the string is <code>"I'll love JavaScript"</code>, using single quotes to create the string will produce an error because the string will be assumed to end with the apostrophe in the word <code>I'll</code>. In this case, you must use double quotes to <a id="_idIndexMarker188"/>avoid the<a id="_idIndexMarker189"/> error.</p>
			<h3>Creating a string literal using backticks</h3>
			<p>You can also use backticks. This is<a id="_idIndexMarker190"/> useful in special cases where you <a id="_idIndexMarker191"/>want to use the value of variables in character strings in a simpler way.</p>
			<p>For example, suppose you want to display a string that uses a person’s first and last name. The last name and first name are in variables named <code>lastname</code> and <code>firstname</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Concatenating strings and variables</p>
			<pre class="source-code">var lastname = "Clinton";</pre>
			<pre class="source-code">var firstname = "Bill";</pre>
			<pre class="source-code">// old way of concatenating strings and variables</pre>
			<pre class="source-code">var s1 = "lastname is " + lastname + ", firstname is " + firstname;</pre>
			<pre class="source-code">// new way of concatenating strings and variables</pre>
			<pre class="source-code"><strong class="bold">var s2 = `lastname is ${lastname}, firstname is ${firstname}`;</strong></pre>
			<pre class="source-code">console.log("s1 =", s1);</pre>
			<pre class="source-code">console.log("s2 =", s2);</pre>
			<p>When using reverse quotes, the <code>+</code> symbol is no longer used to concatenate strings and variables. Everything is written in a single string, and the variables are identified by the “symbols” <code>${variable}</code>.</p>
			<p>What is written between <a id="_idIndexMarker192"/>the braces <code>{ and }</code> can be a simple variable (like here), but also a more complex JavaScript expression that can be calculated (for example, <code>{a+b}</code>).</p>
			<p>We can see that the two result <a id="_idIndexMarker193"/>strings are identical.</p>
			<div><div><img src="img/Figure_2.24_B17416.jpg" alt="Figure 2.24 – Sequence of character strings and variables creating a string using the String class&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.24 – Sequence of character strings and variables creating a string using the String class</p>
			<p>Finally, it is possible to use the <code>String</code> class to create the character string. The <code>String</code> class has a constructor in which the string to be constructed is indicated as a parameter:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using the String class</p>
			<pre class="source-code">var s = new String("I'll love JavaScript");</pre>
			<pre class="source-code">console.log("s =", s);</pre>
			<p>The following figure displays the result:</p>
			<div><div><img src="img/Figure_2.25_B17416.jpg" alt="Figure 2.25 – Using the String class&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.25 – Using the String class</p>
			<p>The <code>String</code> class has properties and methods. For example, the <code>length</code> property lets <a id="_idIndexMarker194"/>you know the number of characters in the string, and thus lets you compare, for example, the length of two character strings.</p>
			<p>Let’s use the <code>length</code> property to<a id="_idIndexMarker195"/> display the length of the two strings created using quotes and the <code>String</code> class:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using the length property of the String class</p>
			<pre class="source-code">var s1 = new String("I'll love JavaScript");</pre>
			<pre class="source-code">var s2 = "I'll love JavaScript";</pre>
			<pre class="source-code">console.log("s1 =", s1);</pre>
			<pre class="source-code">console.log("s2 =", s2);</pre>
			<pre class="source-code">console.log("s1.length =", s1.length);</pre>
			<pre class="source-code">console.log("s2.length =", s2.length);</pre>
			<p>This is the result:</p>
			<div><div><img src="img/Figure_2.26_B17416.jpg" alt="Figure 2.26 – Using the length property of the String class&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.26 – Using the length property of the String class</p>
			<p>Regardless of how the string<a id="_idIndexMarker196"/> is created, its length is the same (here, 20 characters). We have seen how to create a character string, now let’s see how to access the characters that compose it.</p>
			<h2 id="_idParaDest-64"><a id="_idTextAnchor063"/>Accessing characters in a string</h2>
			<p>The <code>String</code> class defines methods <a id="_idIndexMarker197"/>for accessing characters in the string. These are, in particular, the <code>charAt(index)</code> and <code>slice(start, end)</code> methods. <code>charAt(index)</code> is used to retrieve the character located at the index indicated in the string, starting from index 0. The maximum index is that associated with the value<a id="_idIndexMarker198"/> of the <code>length</code> property, reduced by 1. <code>slice(start, end)</code> breaks the string into a substring, by extracting the characters that go from the <code>start</code> index (included) to the <code>end</code> index (excluded). </p>
			<h3>Using the charAt(index) method</h3>
			<p>Let’s use the <code>charAt(index)</code> method to display<a id="_idIndexMarker199"/> the characters of a <a id="_idIndexMarker200"/>string, one by one:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Displaying characters from a string</p>
			<pre class="source-code">var s = "Hello";</pre>
			<pre class="source-code">console.log("s =", s);</pre>
			<pre class="source-code">for (var i = 0; i &lt;s.length; i++) console.log(`s.charAt(${i}) = ${s.charAt(i)}`);</pre>
			<p>Notice the use of reverse <a id="_idIndexMarker201"/>quotes to display the result string.</p>
			<p>The result is displayed in the following figure:</p>
			<div><div><img src="img/Figure_2.27_B17416.jpg" alt="Figure 2.27 – Using the charAt() method &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.27 – Using the charAt() method </p>
			<p>Now, let’s look at<a id="_idIndexMarker202"/> the <code>slice(start, end)</code> method. </p>
			<h3>Using the slice(start, end) method</h3>
			<p>The preceding <code>charAt(index)</code> method <a id="_idIndexMarker203"/>retrieves a single character from the string, while the <code>slice(start, end)</code> method can <a id="_idIndexMarker204"/>retrieve several consecutive ones:</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Note that the <code>slice(start, end)</code> method does not modify the string on which the method applies, but rather returns a new string. The original string is not modified, allowing it to remain intact.</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using slice() on the “Hello” string</p>
			<pre class="source-code">var s = "Hello";</pre>
			<pre class="source-code">console.log("s =", s);</pre>
			<pre class="source-code">console.log(`s.slice(0,2) = ${s.slice(0,2)}`);</pre>
			<pre class="source-code">console.log(`s.slice(0,3) = ${s.slice(0,3)}`);</pre>
			<pre class="source-code">console.log(`s.slice(1,3) = ${s.slice(1,3)}`);</pre>
			<pre class="source-code">console.log(`s.slice(0,-1) = ${s.slice(0,-1)}`);</pre>
			<pre class="source-code">console.log(`s.slice(0,-2) = ${s.slice(0,-2)}`);</pre>
			<pre class="source-code">console.log(`s.slice(1,-2) = ${s.slice(1,-2)}`);</pre>
			<p>If the <code>end</code> index (second parameter) of the <code>slice(start, end)</code> method is negative, it means <a id="_idIndexMarker205"/>counting starts from the end of the string (instead of the beginning if it is positive).</p>
			<p>We then obtain the<a id="_idIndexMarker206"/> following result:</p>
			<div><div><img src="img/Figure_2.28_B17416.jpg" alt="Figure 2.28 – Using the slice() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.28 – Using the slice() method</p>
			<p>Now that we have seen how to get the characters that make up the string, let’s look at how to modify the string.</p>
			<h2 id="_idParaDest-65"><a id="_idTextAnchor064"/>Modifying a character string</h2>
			<p>To modify a string, there is only one possibility: you have to construct a new one from it. The original string cannot be changed directly.</p>
			<p>For this, we will<a id="_idIndexMarker207"/> use the previous <code>slice()</code> and <code>charAt()</code> methods, which will make it possible to extract parts of the original string, in order to build the resulting string.</p>
			<p>But to search or modify parts of character strings, it is better to use regular expressions. We study them below.</p>
			<h2 id="_idParaDest-66"><a id="_idTextAnchor065"/>Using regular expressions</h2>
			<p>Regular<a id="_idIndexMarker208"/> expressions are related to strings. They are used to check whether a string has a certain format (for example, the format of an email, of a telephone number, and so on), or to replace the characters that are in this format with others.</p>
			<p>For this, the <code>String</code> class has the <code>match(regexp)</code> method to check whether a character string has a given format and the <code>replace(regexp, str)</code> method to replace the part of the string in this format with the new string <code>str</code>.</p>
			<p>In both methods, the <code>regexp</code> parameter corresponds to a regular expression, the meaning of which we will study next.</p>
			<h3>Checking whether a string has a given format</h3>
			<p>The <code>match(regexp)</code> method is used to <a id="_idIndexMarker209"/>check whether the character string on which the method is used is in the format indicated in <code>regexp</code>. The <code>regexp</code> parameter is called a regular expression.</p>
			<p class="callout-heading">Regular Expressions</p>
			<p class="callout">A regular expression is a sequence of characters surrounded by <code>/</code> and <code>/</code>, for example, <code>/abc/</code>. The regular expression <code>/abc/</code> means that we are looking for the sequence of characters <code>abc</code> in the character string. If the string contains the sequence <code>abc</code>, the <code>match(/abc/)</code> method returns this sequence of characters as a result, otherwise it returns the value <code>null</code>.</p>
			<p class="callout">A full description <a id="_idIndexMarker210"/>of regular expressions can be found at <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/RegExp">https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/RegExp</a>.</p>
			<p>Here are some examples<a id="_idIndexMarker211"/> of regular expressions with the values returned when using the <code>match()</code> method on the string <code>"Hello"</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using match(regexp)</p>
			<pre class="source-code">var s = "Hello";</pre>
			<pre class="source-code">console.log("s =", s);</pre>
			<pre class="source-code">// search for "Hel"</pre>
			<pre class="source-code">console.log(`s.match(/Hel/) = ${s.match(/Hel/)}`);</pre>
			<pre class="source-code">// search for "hel"</pre>
			<pre class="source-code">console.log(`s.match(/hel/) = ${s.match(/hel/)}`);  </pre>
			<pre class="source-code">// search for "hel" ignoring upper/lower case</pre>
			<pre class="source-code">console.log(`s.match(/hel/i) = ${s.match(/hel/i)}`);</pre>
			<pre class="source-code">// search for H followed by a or b or e followed by l</pre>
			<pre class="source-code">console.log(`s.match(/H[abe]l/) = ${s.match(/H[abe]l/)}`);</pre>
			<pre class="source-code">// search for He followed by 0 or 1 a followed by l</pre>
			<pre class="source-code">console.log(`s.match(/Hea?l/) = ${s.match(/Hea?l/)}`);</pre>
			<pre class="source-code">// search for He followed by 0 (min) to 1 (max) followed by l</pre>
			<pre class="source-code">console.log(`s.match(/Hea{0,1}l/) = ${s.match(/Hea{0,1}l/)}`);</pre>
			<pre class="source-code">// search for He followed 1 (min) to 2 (max) followed by l</pre>
			<pre class="source-code">console.log(`s.match(/Hea{1,2}l/) = ${s.match(/Hea{1,2}l/)}`);</pre>
			<p>When the regular expression is found in the <code>"Hello"</code> string, the part of the string found is returned by the <code>match()</code> method, otherwise it returns <code>null</code>.</p>
			<p>The <code>i</code> sign at the end of the<a id="_idIndexMarker212"/> regular expression indicates that uppercase or lowercase letters must be ignored.</p>
			<p>The square brackets <code>[</code> and <code>]</code> around a series of letters mean that only one of these letters is required.</p>
			<p>The question mark <code>?</code> means that the preceding character is optional (it can be present or not).</p>
			<p>The braces <code>{min,max}</code> mean that the preceding character must be present at least <code>min</code> times and at most <code>max</code> times.</p>
			<p>The result of the previous program is as follows:</p>
			<div><div><img src="img/Figure_2.29_B17416.jpg" alt="Figure 2.29 – Using regular expressions&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.29 – Using regular expressions</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Writing a regular expression can sometimes be complex to formulate. The site <a href="https://regex101.com/">https://regex101.com/</a> allows you to test the regular expressions you want.</p>
			<p>A regular expression can <a id="_idIndexMarker213"/>also modify parts of character strings, using the <code>replace()</code> method.</p>
			<h3>Replacing a part of a string with a given format</h3>
			<p>The <code>replace(regexp, str)</code> method is used to replace the part of the string having the format of the<a id="_idIndexMarker214"/> regular expression <code>regexp</code> with the string <code>str</code>. It returns a new string, and the original one is not modified. If the format indicated by the regular expression is not found, the original string is returned with no modifications.</p>
			<p>Let’s take the regular expressions from the previous example and replace the string found with the string “abc”, thanks to the regular expressions:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using the replace() method</p>
			<pre class="source-code">var s = "Hello";</pre>
			<pre class="source-code">console.log("s =", s);</pre>
			<pre class="source-code">// search for "Hel" and replace with "abc"</pre>
			<pre class="source-code">console.log(`s.replace(/Hel/, "abc") =&gt; ${s.replace(/Hel/, "abc")}`);</pre>
			<pre class="source-code">// search for "hel" and replace with "abc"</pre>
			<pre class="source-code">console.log(`s.replace(/hel/, "abc") =&gt; ${s.replace(/hel/, "abc")}`);  </pre>
			<pre class="source-code">// search for hel ignoring upper/lower case and replacing with </pre>
			<pre class="source-code">// "abc"</pre>
			<pre class="source-code">console.log(`s.replace(/hel/i, "abc") =&gt; ${s.replace(/hel/i, "abc")}`);</pre>
			<pre class="source-code">// search for H followed by a or b or e followed by l and </pre>
			<pre class="source-code">// replace with "abc"</pre>
			<pre class="source-code">console.log(`s.replace(/H[abe]l/, "abc") =&gt; ${s.replace(/H[abe]l/, "abc")}`);</pre>
			<pre class="source-code">// search for He followed by 0 or 1 a followed by l and </pre>
			<pre class="source-code">// replaced by "abc"</pre>
			<pre class="source-code">console.log(`s.replace(/Hea?l/, "abc") =&gt; ${s.replace(/Hea?l/, </pre>
			<pre class="source-code">"abc")}`);</pre>
			<pre class="source-code">// search for He followed by 0 (min) to 1 (max) followed by l </pre>
			<pre class="source-code">// and replaced by "abc"</pre>
			<pre class="source-code">console.log(`s.replace(/Hea{0,1}l/, "abc") =&gt; ${s.replace(/Hea{0,1}l/, "abc")}`);</pre>
			<pre class="source-code">// search for He followed by 1 (min) to 2 (max) followed by l </pre>
			<pre class="source-code">// and replaced by "abc"</pre>
			<pre class="source-code">console.log(`s.replace(/Hea{1,2}l/, "abc") =&gt; ${s.replace(/Hea{1,2}l/, "abc")}`);</pre>
			<p>The output is shown here:</p>
			<div><div><img src="img/Figure_2.30_B17416.jpg" alt="Figure 2.30 – Using the replace() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.30 – Using the replace() method</p>
			<p>All executions of <a id="_idIndexMarker215"/>previous programs were executed immediately. We are now going to study how to perform deferred processing over time.</p>
			<h1 id="_idParaDest-67"><a id="_idTextAnchor066"/>Multitasking in JavaScript</h1>
			<p>When you start coding in<a id="_idIndexMarker216"/> JavaScript, a question often comes up: is it possible to perform<a id="_idIndexMarker217"/> several processes simultaneously (what is called multitasking in computing)? This would be useful if a process to be executed will take a long time, so as not to block other equally urgent processes.</p>
			<p>JavaScript does not allow several processing operations to be carried out simultaneously. On the other hand, it is possible not to block the program (both on the client side in the browser, and on the server side with Node.js) by using the callback function (which we have already talked about when studying the <code>forEach()</code>method in the <em class="italic">Accessing an element with the forEach(callback) method</em> section).</p>
			<p class="callout-heading">Callback Function</p>
			<p class="callout">A callback function corresponds to a processing function used as parameters of a JavaScript method or function. The callback function will be executed at the desired time by the method or function that uses it.</p>
			<p>Node.js makes extensive use <a id="_idIndexMarker218"/>of this feature. For example, when reading a file, the <code>readFile(callback)</code> method calls the callback function as a parameter when the file has been read, which allows the program not to block the pending processing <a id="_idIndexMarker219"/>of the file to be read.</p>
			<p>JavaScript defines as standard two main functions that use this callback function concept: the <code>setTimeout()</code> and <code>setInterval()</code> functions. Both these use a callback function as a parameter. We’ll describe these two functions next.</p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor067"/>Using the setTimeout() function</h2>
			<p>The <code>setTimeout(callback, timeout)</code> function is used to position a processing function (the <code>callback</code> function) that will be<a id="_idIndexMarker220"/> executed when the time period expressed by <code>timeout</code> (in milliseconds) has elapsed.</p>
			<p>This allows you, for example, to <a id="_idIndexMarker221"/>perform processing after 5 seconds (that is, 5,000 milliseconds). You can execute other instructions while waiting for this delay, so the program is not blocked during this time:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Processing instructions after a delay of 5 seconds</p>
			<pre class="source-code">console.log("Before setTimeout()");</pre>
			<pre class="source-code"><strong class="bold">setTimeout(function() {</strong></pre>
			<pre class="source-code"><strong class="bold">  console.log("In the callback function");</strong></pre>
			<pre class="source-code"><strong class="bold">}, 5000);  // 5000 milliseconds, or 5 seconds</strong></pre>
			<pre class="source-code">console.log("After setTimeout()");</pre>
			<p>We display a message (<code>"Before setTimeout()"</code>) in the console at the start of the program. We program a delay of 5 seconds, after which a callback function is triggered, which displays another message in the console (<code>"In the callback function"</code>). Finally, we end the program <a id="_idIndexMarker222"/>by displaying a new message (<code>"After setTimeout()"</code>).</p>
			<p>Let’s run this program <a id="_idIndexMarker223"/>with the <code>node testnode.js</code> command, for example. To test this program in a browser, simply place the preceding JavaScript code between the <code>&lt;script&gt;</code> and <code>&lt;/script&gt;</code> tags of the <code>index.html</code> file.</p>
			<p>The following screenshot shows the display after 1 second:</p>
			<div><div><img src="img/Figure_2.31_B17416.jpg" alt="Figure 2.31 – Using setTimeout()&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.31 – Using setTimeout()</p>
			<p>Note that the display message of the start and that of the end follow each other, even though the 5-second time limit has not elapsed. This shows that the program is not blocked, waiting for the timeout to expire.</p>
			<p>The following screenshot shows the display after at least 5 seconds (when the delay used in the <code>setTimeout()</code> method has elapsed).</p>
			<div><div><img src="img/Figure_2.32_B17416.jpg" alt="Figure 2.32 – Display when the 5-second delay has elapsed&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.32 – Display when the 5-second delay has elapsed</p>
			<p>We see that when the 5-second<a id="_idIndexMarker224"/> delay has elapsed, the callback function registered in the <code>setTimeout()</code> function is called automatically by the <code>setTimeout()</code> function.</p>
			<p>Let’s improve the program<a id="_idIndexMarker225"/> by displaying the time when the messages are displayed. This makes it possible to verify that the 5-second time limit is respected:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Displaying the time when messages are posted</p>
			<pre class="source-code"><strong class="bold">console.log(time(), "Before setTimeout()");</strong></pre>
			<pre class="source-code"><strong class="bold">setTimeout(function() {</strong></pre>
			<pre class="source-code"><strong class="bold">  console.log(time(), "In the callback function");</strong></pre>
			<pre class="source-code"><strong class="bold">}, 5000);   // 5000 = 5 seconds</strong></pre>
			<pre class="source-code"><strong class="bold">console.log(time(), "After setTimeout()");</strong></pre>
			<pre class="source-code">function time() {</pre>
			<pre class="source-code"> // return time as HH:MM:SS</pre>
			<pre class="source-code"> var date = new Date();</pre>
			<pre class="source-code"> var hour = date.getHours();</pre>
			<pre class="source-code"> var min = date.getMinutes();</pre>
			<pre class="source-code"> var sec = date.getSeconds();</pre>
			<pre class="source-code"> if (hour &lt; 10) hour = "0" + hour;</pre>
			<pre class="source-code"> if (min &lt; 10) min = "0" + min;</pre>
			<pre class="source-code"> if (sec &lt; 10) sec = "0" + sec;</pre>
			<pre class="source-code"> return "" + hour + ":" + min + ":" + sec + " ";</pre>
			<pre class="source-code">}</pre>
			<p>The <code>time()</code> function is used to<a id="_idIndexMarker226"/> generate a character string that contains the time in the form HH:MM:SS. This time is displayed at the beginning of each message displayed in the console.</p>
			<p>The <code>Date</code> class used here is a<a id="_idIndexMarker227"/> JavaScript class that allows you to manage dates and to extract hours, minutes, and seconds.</p>
			<p>We now get the following:</p>
			<div><div><img src="img/Figure_2.33_B17416.jpg" alt="Figure 2.33 – Displaying the time when messages are displayed in the console&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.33 – Displaying the time when messages are displayed in the console</p>
			<p>We can clearly see that the callback function is executed at the end of the 5-second period indicated in the parameter of the <code>setTimeout()</code> function.</p>
			<h2 id="_idParaDest-69"><a id="_idTextAnchor068"/>Using the setInterval() function</h2>
			<p>The <code>setInterval(callback, timeout)</code> function is similar to the <code>setTimeout()</code> function seen <a id="_idIndexMarker228"/>previously. But instead of executing the<a id="_idIndexMarker229"/> callback function only once at the end of the delay (as the <code>setTimeout()</code> function does), the <code>setInterval()</code> function executes the callback function repeatedly by setting a new delay at the end of it. The callback function is therefore executed at regular intervals. The only way to stop this cycle is to use the <code>clearInterval()</code> function.</p>
			<p>The <code>setInterval()</code> function is very useful for running processes at regular intervals.</p>
			<p>Let’s use the <code>setInterval()</code> function<a id="_idIndexMarker230"/> to display, every second, the value of a counter initialized to <code>1</code>. The counter is incremented <a id="_idIndexMarker231"/>every second:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Incrementing a counter every second</p>
			<pre class="source-code">console.log(time(), "Start of timer");</pre>
			<pre class="source-code">var count = 1;</pre>
			<pre class="source-code"><strong class="bold">setInterval(function() {</strong></pre>
			<pre class="source-code"><strong class="bold">  console.log(time(), `count = ${count}`);</strong></pre>
			<pre class="source-code"><strong class="bold">  count++;</strong></pre>
			<pre class="source-code"><strong class="bold">}, 1000);    // 1000 = 1 second</strong></pre>
			<pre class="source-code">function time() {</pre>
			<pre class="source-code"> // return time as HH:MM:SS</pre>
			<pre class="source-code"> var date = new Date();</pre>
			<pre class="source-code"> var hour = date.getHours();</pre>
			<pre class="source-code"> var min = date.getMinutes();</pre>
			<pre class="source-code"> var sec = date.getSeconds();</pre>
			<pre class="source-code"> if (hour &lt; 10) hour = "0" + hour;</pre>
			<pre class="source-code"> if (min &lt; 10) min = "0" + min;</pre>
			<pre class="source-code"> if (sec &lt; 10) sec = "0" + sec;</pre>
			<pre class="source-code"> return "" + hour + ":" + min + ":" + sec + " ";</pre>
			<pre class="source-code">}</pre>
			<p>This is what you will see:</p>
			<div><div><img src="img/Figure_2.34_B17416.jpg" alt="Figure 2.34 – Incrementing a counter every second&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.34 – Incrementing a counter every second</p>
			<p>The counter<a id="_idIndexMarker232"/> increments every second, indefinitely. To stop<a id="_idIndexMarker233"/> this endless cycle, you have to use a new JavaScript function, which is <code>clearInterval()</code>.</p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor069"/>Using the clearInterval() function</h2>
			<p>The <code>clearInterval(timer)</code> function is <a id="_idIndexMarker234"/>used to stop the <a id="_idIndexMarker235"/>cycle started during the <code>setInterval()</code> instruction.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Note that multiple timers can be started by multiple calls to the <code>setInterval()</code> function. So the <code>clearInterval(timer)</code> function must specify which timer it wants to stop: the <code>timer</code> parameter is used to tell it.</p>
			<p class="callout">To do this, the <code>setInterval()</code> function returns the <code>timer</code> parameter that will be used when calling the <code>clearInterval(timer)</code> function.</p>
			<p>Let’s use the <code>clearInterval()</code> function to<a id="_idIndexMarker236"/> stop the timer when the <code>count</code> counter has reached the value <code>5</code>:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Using the clearInterval() function to stop the timer</p>
			<pre class="source-code">console.log(time(), "Start of timer");</pre>
			<pre class="source-code">var count = 1;</pre>
			<pre class="source-code">var timer = setInterval(function() {</pre>
			<pre class="source-code">  console.log(time(), `count = ${count}`);</pre>
			<pre class="source-code">  <strong class="bold">if (count == 5) {</strong></pre>
			<pre class="source-code"><strong class="bold">    clearInterval(timer);  // timer stop</strong></pre>
			<pre class="source-code"><strong class="bold">    console.log(time(), "End of timer");</strong></pre>
			<pre class="source-code"><strong class="bold">  } else count++;</strong></pre>
			<pre class="source-code">}, 1000);</pre>
			<pre class="source-code">function time() {</pre>
			<pre class="source-code"> // return time as HH:MM:SS</pre>
			<pre class="source-code"> var date = new Date();</pre>
			<pre class="source-code"> var hour = date.getHours();</pre>
			<pre class="source-code"> var min = date.getMinutes();</pre>
			<pre class="source-code"> var sec = date.getSeconds();</pre>
			<pre class="source-code"> if (hour &lt; 10) hour = "0" + hour;</pre>
			<pre class="source-code"> if (min &lt; 10) min = "0" + min;</pre>
			<pre class="source-code"> if (sec &lt; 10) sec = "0" + sec;</pre>
			<pre class="source-code"> return "" + hour + ":" + min + ":" + sec + " ";</pre>
			<pre class="source-code">}</pre>
			<p>The program of the callback function is modified: as soon as the counter reaches <code>5</code>, the timer is stopped. Otherwise, the counter is incremented by 1.</p>
			<p>Check that the count stops after<a id="_idIndexMarker237"/> 5 times:</p>
			<div><div><img src="img/Figure_2.35_B17416.jpg" alt="Figure 2.35 – Timer stops after 5 counts&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.35 – Timer stops after 5 counts</p>
			<p>The callback function<a id="_idIndexMarker238"/> that is used in the <code>setTimeout()</code> or <code>setInterval()</code> functions is included directly in the parameters of each function. JavaScript makes it easier to write callback functions by using a new type of object called a promise.</p>
			<h1 id="_idParaDest-71"><a id="_idTextAnchor070"/>Using promises</h1>
			<p>Promises are another way to use<a id="_idIndexMarker239"/> callback functions. Rather than integrating the callback function into the method call (as a parameter), we use it as a parameter of the new <code>then(callback)</code> method. This simplifies the reading of JavaScript code in case it uses callback functions.</p>
			<p>For an object to use the <code>then(callback)</code> method, it must be a <code>Promise</code> class object. The <code>Promise</code> class is a class defined in JavaScript language.</p>
			<p class="callout-heading">The Promise Class</p>
			<p class="callout">A <code>Promise</code> class object uses a callback function of the form <code>callback(resolve, reject)</code> as a parameter of its constructor.</p>
			<p>The <code>resolve</code> and <code>reject</code> parameters are functions, which will be called from the promise’s callback:</p>
			<ul>
				<li>When the <code>resolve()</code> function is called, it triggers the <code>then(callback)</code> method.</li>
				<li>When the <code>reject()</code> function is called, it triggers the <code>catch(callback)</code> method.</li>
			</ul>
			<p>The <code>resolve()</code> function must <a id="_idIndexMarker240"/>be called, otherwise the <code>then(callback)</code> method cannot be executed. On the other hand, calling the <code>reject()</code> function is optional, and if it is not used, the <code>catch(callback)</code> method will not be called (and therefore does not have to be present in the program).</p>
			<p>Thanks to the <code>resolve</code> and <code>reject</code> parameters, we therefore have the possibility of executing the cases of success (with the <code>then(callback)</code> method) and the cases of failure (with the <code>catch(callback)</code> method). This way of writing ensures more readability of the JavaScript code.</p>
			<p>To illustrate this, let’s take the example of the <code>setTimeout(callback, timeout)</code> function seen previously. The callback function is included in the method call here, which we want to avoid with promises. Let’s write the new <code>wait(timeout)</code> method that can be used in the form <code>wait(timeout).then(callback)</code>. The callback function is now externalized from the <code>wait()</code> method.</p>
			<p>The callback function registered in the <code>then(callback)</code> method will be called when the timeout expires.</p>
			<p>This form of writing is more readable than the previous one with <code>setTimeout()</code>, because it thus shows the delay before a process is executed.</p>
			<p>To achieve this, the <code>wait(timeout)</code> method must return a <code>Promise</code> object:</p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">Creating the Promise object, then using the then() method</p>
			<pre class="source-code">function time() {</pre>
			<pre class="source-code"> // return time as HH:MM:SS</pre>
			<pre class="source-code"> var date = new Date();</pre>
			<pre class="source-code"> var hour = date.getHours();</pre>
			<pre class="source-code"> var min = date.getMinutes();</pre>
			<pre class="source-code"> var sec = date.getSeconds();</pre>
			<pre class="source-code"> if (hour &lt; 10) hour = "0" + hour;</pre>
			<pre class="source-code"> if (min &lt; 10) min = "0" + min;</pre>
			<pre class="source-code"> if (sec &lt; 10) sec = "0" + sec;</pre>
			<pre class="source-code"> return "" + hour + ":" + min + ":" + sec + " ";</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code"><strong class="bold">function wait(sec) {</strong></pre>
			<pre class="source-code"><strong class="bold">  return new Promise(function(resolve, reject) {</strong></pre>
			<pre class="source-code"><strong class="bold">    setTimeout(function() {</strong></pre>
			<pre class="source-code"><strong class="bold">      resolve(sec);  // triggers the then() method</strong></pre>
			<pre class="source-code"><strong class="bold">    }, sec*1000);</strong></pre>
			<pre class="source-code"><strong class="bold">  });</strong></pre>
			<pre class="source-code"><strong class="bold">}</strong></pre>
			<pre class="source-code">console.log(time(), "Start of timer");</pre>
			<pre class="source-code"><strong class="bold">wait(2).then(function(sec) {</strong></pre>
			<pre class="source-code"><strong class="bold">  console.log(time(), `End of timer of ${sec} seconds`);</strong></pre>
			<pre class="source-code"><strong class="bold">});</strong></pre>
			<p>The <code>wait()</code> method returns a <code>Promise</code> object thanks to the <code>return new Promise()</code> statement. In <a id="_idIndexMarker241"/>the <code>callback(resolve, reject)</code> function, we call the <code>resolve()</code> function when we consider that the <code>then()</code> method can execute, here at the end of the timeout.</p>
			<p>It is possible to specify arguments for the <code>resolve()</code> and <code>reject()</code> methods. These arguments will be used in the callback functions used in the <code>then(callback)</code> or <code>catch(callback)</code> methods. For example, here, we call the <code>resolve(sec)</code> method, which allows us to use the <code>sec</code> parameter in the callback function of the <code>then()</code> method.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Notice that the <code>reject()</code> function is not used in our example because no error cases can occur here. The <code>resolve()</code> function must, however, be called; otherwise, the <code>then()</code> method will never be executed.</p>
			<p>The <code>time()</code> function is used<a id="_idIndexMarker242"/> to display the times of each process to check that the execution is correct.</p>
			<div><div><img src="img/Figure_2.36_B17416.jpg" alt="Figure 2.36 – Using the then() method&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.36 – Using the then() method</p>
			<p>This brings us to the end of the chapter. </p>
			<p>Summary</p>
			<p>In this chapter, we went through advanced concepts related to JavaScript. </p>
			<p>We learned how to use classes and objects, particularly the <code>Array</code> and <code>String</code> classes. We also saw how to delay the execution of instructions.</p>
			<p>In the rest of the book, we will discover the use of the Vue.js JavaScript library associated with the client side of application development.</p>
			<p>We will see how the knowledge obtained here will allow us to use this language in aspects of client-side and then server-side programming.</p>
		</div>
	</body></html>