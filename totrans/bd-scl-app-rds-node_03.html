<html><head></head><body>
<article epub:type="bodymatter">
<header>
<h1 class="chap2"><a id="page103" class="calibre6"/><a href="toc.xhtml#c04" class="calibre6">C<small class="calibre8">HAPTER</small> 4</a></h1>
<h1 class="subchap"><a href="toc.xhtml#c04" class="calibre6">Planning the App</a></h1>
</header>
<h1 class="sec" id="s103"><a href="toc.xhtml#s103a" class="calibre6">Introduction</a></h1>
<p class="nonindent">Node.Js has become the preferred choice when it comes to writing an application. There are more than 30 million websites powered by Node.js. These applications or websites or projects in general have a fair share of complexity. Netflix, LinkedIn, Uber, Paypal, and even NASA-like organizations use Node.js for their applications.</p>
<p class="nonindent">For developing an application, planning is the crucial part. It helps to establish a clear goal and a path to follow to achieve the defined goal efficiently.</p>
<p class="nonindent">For the rest of the book, we are going to follow one common example to learn the important aspects of an application. We will see how to write, optimize, and test the app with standard techniques. We will be writing a project management software.</p>
<h1 class="sec" id="s104"><a href="toc.xhtml#s104a" class="calibre6">Structure</a></h1>
<p class="nonindent">In this chapter, we will discuss the following topics:</p>
<ul class="bull">
<li class="calibre9">Overview of Project Management Application</li>
<li class="calibre9">Database Design</li>
<li class="calibre9">Setting up the Project Structure
<ul class="bull1">
<li class="calibre9">Installation of Project Dependency</li>
<li class="calibre9">Project Directory Structure</li></ul></li>
<li class="calibre9">Database Models (entities)</li>
<li class="calibre9">Routing</li>
</ul>
<h1 class="sec" id="s105"><a href="toc.xhtml#s105a" class="calibre6">Overview of the Application</a></h1>
<p class="nonindent">Any project management software has a simple goal defined. Let the individuals and teams plan, organize, and execute the tasks to effectively take the project to its completion. A PMS should allow the respective users to create and manage projects. For each project, there can be many tasks to perform. Users should be able to communicate with each other. We will soon find out about these tasks and much more.</p>
<p class="nonindent"><a id="page104"/>Our objective or scope of the Project Management System (PMS) project is to develop a small web application that serves as a basic project management tool. The application will have various features including secure user login, the ability to create projects and tasks, task assignment based on user roles, and the implementation of email notifications when tasks are assigned or completed.</p>
<p class="nonindent">Additionally, the project will explore the implementation of a caching mechanism for APIs to enhance response times for requests. Moreover, it covers information for developers to do unit testing, along with how to build the application for the production environment and finally the deployment.</p>
<p class="nonindent">In order to get familiar with what we are going to build, we need to define the purpose, tasks we are going to perform, architecture, project structure, database design, and much more.</p>
<h1 class="sec" id="s106"><a href="toc.xhtml#s106a" class="calibre6">Roadmap</a></h1>
<p class="nonindent">A typical roadmap for a project involves several key stages and activities. Here is a high-level overview of what the roadmap covers.</p>
<ul class="bull">
<li class="calibre9">Planning the application</li>
<li class="calibre9">Defining the modules</li>
<li class="calibre9">Database design</li>
<li class="calibre9">Setting up the project structure</li>
<li class="calibre9">Init the project</li>
<li class="calibre9">Connecting the database</li>
<li class="calibre9">API development</li>
<li class="calibre9">API Caching</li>
<li class="calibre9">Unit Testing</li>
<li class="calibre9">Deployment</li>
</ul>
<p class="nonindent">In this chapter, we will cover the first six of the preceding list. The last four topics have their dedicated chapters.</p>
<h1 class="sec" id="s107"><a href="toc.xhtml#s107a" class="calibre6">Scope</a></h1>
<p class="nonindent">The purpose aforementioned has already given a good idea that we are going to develop a project management system. At times, we will refer to this as PMS also. Our first goal is to identify what our PMS should be capable of.</p>
<p class="nonindent">We should be able to:</p>
<ul class="bull">
<li class="calibre9">Manage users and login into the application.</li>
<li class="calibre9"><a id="page105"/>Create and manage projects.</li>
<li class="calibre9">Create and manage tasks for the created projects.</li>
<li class="calibre9">Should be able to access and update the task details.</li>
<li class="calibre9">Should be able to communicate with other members on a task.</li>
<li class="calibre9">Some basic project reports on a Dashboard.</li>
</ul>
<h1 class="sec" id="s108"><a href="toc.xhtml#s108a" class="calibre6">Defining the Modules</a></h1>
<p class="nonindent">Based on the tasks we should be able to perform, we can see that the PMS should have these must-have modules in the system.</p>
<h1 class="sec1" id="s109"><a href="toc.xhtml#s109a" class="calibre6">User Module</a></h1>
<p class="nonindent">This module will allow us to manage users. We should be able to perform the following:</p>
<ul class="bull">
<li class="calibre9">Add new users.</li>
<li class="calibre9">Edit users.</li>
<li class="calibre9">Delete users.</li>
<li class="calibre9">User Login.</li>
<li class="calibre9">Get a user profile.</li>
<li class="calibre9">Reset user password.</li>
</ul>
<h1 class="sec1" id="s110"><a href="toc.xhtml#s110a" class="calibre6">Project Module</a></h1>
<p class="nonindent">The project module will allow us to manage the projects. The following key tasks should be performed with the help of this module:</p>
<ul class="bull">
<li class="calibre9">Create new projects.</li>
<li class="calibre9">Update project details.</li>
<li class="calibre9">Delete projects.</li>
<li class="calibre9">Get project detail.</li>
<li class="calibre9">Get project statistics.</li>
<li class="calibre9">Manage project memberships.</li>
</ul>
<h1 class="sec1" id="s111"><a href="toc.xhtml#s111a" class="calibre6">Task Module</a></h1>
<p class="nonindent">This module will allow us to manage tasks within a project. This is a key module which will enable us to:</p>
<ul class="bull">
<li class="calibre9">Create new tasks.</li>
<li class="calibre9">Update task details.</li>
<li class="calibre9"><a id="page106"/>Delete tasks.</li>
<li class="calibre9">Get task details.</li>
<li class="calibre9">Attach supporting files.</li>
</ul>
<h1 class="sec1" id="s112"><a href="toc.xhtml#s112a" class="calibre6">Comment Module</a></h1>
<p class="nonindent">A task will always need a way to enable communication among team members. A comment module along with the tasks will facilitate this feature. The following tasks we should be able to perform:</p>
<ul class="bull">
<li class="calibre9">Add comments on tasks.</li>
<li class="calibre9">Allow users to update their own comments.</li>
<li class="calibre9">Allow users and admins to delete the comments.</li>
</ul>
<h1 class="sec" id="s113"><a href="toc.xhtml#s113a" class="calibre6">Database Design</a></h1>
<p class="nonindent">Designing the database for big projects is a tricky, on-going activity that is improvised with project timelines. Although it must be defined at the earliest. It involves defining the schema, tables, relationships, constraints, and data types to meet the specific requirements of the application.</p>
<p class="nonindent">Normalization helps optimize storage that includes data integrity by applying normalization rules to eliminate data redundancy. The goal of normalization is to avoid data duplication and maintain data integrity. Each piece of data is stored in only one place, reducing the risk of inconsistencies. The relationship between tables is maintained using primary and foreign keys.</p>
<p class="nonindent">Normalization has its benefits in terms of storage, non-redundancy, and cleanliness. However, as the database grows with the number of tables along with complex features added to the application, the number of joins and complexity in the queries increase. This impacts readability, and results in slower performance if there are heavy read operations.</p>
<p class="nonindent">In this section, let us design the tables needed for our entities. We will try to keep the relationships to the minimum while maintaining a balance between redundancy and normalization wherever possible.</p>
<p class="nonindent"><strong class="calibre3">Note:</strong> <em class="calibre4">For this book, we are going to use the PostgreSQL database. Hence the data type in the following tables is specific to PostgreSQL. For each table, we will also specify if the column is a primary key or a unique key and if it can contain null values. If we are going to reference a column from another table, then we will mention the reference table and column.</em></p>
<p class="nonindent"><a id="page107"/>For all of the modules defined above, we need the following tables for our database:</p>
<ul class="bull">
<li class="calibre9"><code class="calibre7"><strong class="calibre3">User</strong></code>: Represents all of the users who can access the system</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Role</strong></code>: Each user will have a role assigned, for example, Project Manager, Admin, and others.</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Project</strong></code>: Represents the project entity.</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Task</strong></code>: Tasks associated with each project.</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Comment</strong></code>: Comments added to each task.</li>
</ul>
<p class="nonindent"><em class="calibre4"><a href="#fig4_1">Figure 4.1</a></em> shows a basic entity relationship diagram. This figure uses only primary keys and foreign keys used for each table.</p>
<figure class="img">
<img alt="" src="images/4.1.jpg" class="calibre1"/>
</figure>
<p class="figcap" id="fig4_1"><strong class="calibre3">Figure 4.1:</strong> High-Level Entity Relationship Diagram</p>
<p class="nonindent"><a id="page108"/>The figure shows that each user has a role assigned. Each project is owned by a user. Each project has tasks assigned and each task can have comments. This diagram is a high-level ER Diagram. Now when we understand the relationship among the tables, we can explore each entity in detail followed by a detailed ER Diagram.</p>
<h1 class="sec" id="s114"><a href="toc.xhtml#s114a" class="calibre6">User Schema Table</a></h1>
<p class="nonindent">Let us begin with the User table which is vital for user authentication, authorization, and maintaining user-related data. It plays a crucial role in ensuring that each user’s information is accurately captured and secured while enabling the PMS to identify and manage individual users effectively.</p>
<p class="nonindent">For the sake of simplicity, we are adding only the user id, name, password, and some relevant details needed.</p>
<table border="1" class="table">
<tr class="calibre12">
<td class="calibre13">
<p class="tab"><strong class="calibre3">Column Name</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Data Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Description</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Primary?</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Is Null</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Unique</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Reference</strong></p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">user_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">User’s unique identifier id</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">email</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">email</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(60)</p>
</td>
<td class="calibre13">
<p class="tab1">User’s Email-id</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">full_name</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(30)</p>
</td>
<td class="calibre13">
<p class="tab1">User’s Full Name</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1">username</p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(30)</p>
</td>
<td class="calibre13">
<p class="tab1">User’s Unique Name</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">password</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(100)</p>
</td>
<td class="calibre13">
<p class="tab1">User’s hashed Password</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">role_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">User’s role id</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">Role Table (role_id)</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">created_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">User’s Creation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">updated_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">User’s Data Updation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
</table>
<p class="figcap" id="tab4_1"><strong class="calibre3">Table 4.1:</strong> User Table</p>
<h1 class="sec" id="s115"><a href="toc.xhtml#s115a" class="calibre6">Role Schema Table</a></h1>
<p class="nonindent">User access to the application is determined by the assigned role and the permissions granted to that role. Users are allowed to perform specific actions within the application based on the rights associated with their assigned role. We have defined the role schema table for applications with constraints as follows.</p>
<table border="1" class="table">
<tr class="calibre12">
<td class="calibre13">
<p class="tab"><strong class="calibre3">Column Name</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Data Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Description</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Primary?</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Is Null</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Unique</strong></p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">role_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">Role’s unique identifier id</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">name</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">email</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(60)</p>
</td>
<td class="calibre13">
<p class="tab1">Role’s name</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">description</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(30)</p>
</td>
<td class="calibre13">
<p class="tab1">Role’s description</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">rights</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">text</p>
</td>
<td class="calibre13">
<p class="tab1">Rights as permission of diff modules</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">created_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Role Creation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">updated_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Role’s Data Updation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
</tr>
</table>
<p class="figcap" id="tab4_2"><strong class="calibre3">Table 4.2:</strong> Role Table</p>
<h1 class="sec" id="s116"><a id="page109" class="calibre6"/><a href="toc.xhtml#s116a" class="calibre6">Project Schema Table</a></h1>
<p class="nonindent">In a Project Management System (PMS), the project table serves as a central repository for storing information about different projects managed within the system. Each row in the project table represents a specific project, while each column stores various attributes or details related to those projects. We defined the schema for that as follows:</p>
<table border="1" class="table">
<tr class="calibre12">
<td class="calibre13">
<p class="tab"><strong class="calibre3">Column Name</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Data Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Description</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Primary?</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Is Null</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Unique</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Reference</strong></p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">project_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">integer</p>
</td>
<td class="calibre13">
<p class="tab1">Project’s unique identifier id</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">name</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(60)</p>
</td>
<td class="calibre13">
<p class="tab1">Project’s Name</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">description</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(200)</p>
</td>
<td class="calibre13">
<p class="tab1">Project’s Description</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">user_ids</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">text</p>
</td>
<td class="calibre13">
<p class="tab1">Project’s assigned users_ids</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">User Table (user_id)</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">start_time</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Project’s Start Date</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">end_time</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Project’s End Date</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">status</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">enum</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(30)</p>
</td>
<td class="calibre13">
<p class="tab1">Current Project Status</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">created_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">User Creation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">updated_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">User Data Updation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13"/>
</tr>
</table>
<p class="figcap" id="tab4_3"><strong class="calibre3">Table 4.3:</strong> Project Table</p>
<h1 class="sec" id="s117"><a href="toc.xhtml#s117a" class="calibre6">Task Schema Table</a></h1>
<p class="nonindent">The task table is designed to store information about various tasks or activities associated with a specific project. Each row in the task table represents a specific <a id="page110"/>task, while each column holds different attributes or details related to those tasks as follows:</p>
<table border="1" class="table">
<tr class="calibre12">
<td class="calibre13">
<p class="tab"><strong class="calibre3">Column Name</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Data Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Description</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Primary?</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Is Null</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Unique</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Reference</strong></p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">task_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s unique identifier id</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">name</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(60)</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Name</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">description</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(300)</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Description</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">project_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(35)</p>
</td>
<td class="calibre13">
<p class="tab1">Associated Project Id</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">Project Table (project_id)</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">user_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">Assigned User Id</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">User Table (user_id)</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">estimated_start_time</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Estimated Start Date</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">estimated_end_time</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Estimated End Date</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">actual_start_time</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Actual Start Date</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">actual_end_time</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Actual End Date</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">priority</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">enum</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(20)</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s priority e.g., High, Low, Medium</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">status</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">enum</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(30)</p>
</td>
<td class="calibre13">
<p class="tab1">Current Task Status</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">supported_files</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">text</p>
</td>
<td class="calibre13">
<p class="tab1">Supported Files url</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">created_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Creation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">updated_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Data Updation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
</table>
<p class="figcap" id="tab4_4"><strong class="calibre3">Table 4.4:</strong> Task Table</p>
<h1 class="sec" id="s118"><a href="toc.xhtml#s118a" class="calibre6">Comment Schema Table</a></h1>
<p class="nonindent">The comment table is designed to store comments or notes associated with various tasks. Each row in the comment table represents a specific comment related to a particular task, while each column holds different attributes or details related to those comments as follows.</p>
<table border="1" class="table">
<tr class="calibre12">
<td class="calibre13">
<p class="tab"><strong class="calibre3">Column Name</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Data Type</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Description</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Primary?</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Is Null</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Unique</strong></p>
</td>
<td class="calibre13">
<p class="tab"><strong class="calibre3">Reference</strong></p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">comment_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">Comment’s unique identifier id</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">comment</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">varchar(300)</p>
</td>
<td class="calibre13">
<p class="tab1">Comment</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">task_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">Task’s Id of given comment</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">Task Table (task_id)</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">user_id</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">uuid</code></p>
</td>
<td class="calibre13">
<p class="tab1">uuid</p>
</td>
<td class="calibre13">
<p class="tab1">User’s Id on given comment</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">User Table (user_id)</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">supported_files</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">string</code></p>
</td>
<td class="calibre13">
<p class="tab1">text</p>
</td>
<td class="calibre13">
<p class="tab1">attached file’s url</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">created_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Comment’s Creation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
<tr class="calibre14">
<td class="calibre13">
<p class="tab1"><code class="calibre7">updated_at</code></p>
</td>
<td class="calibre13">
<p class="tab1"><code class="calibre7">date</code></p>
</td>
<td class="calibre13">
<p class="tab1">timestamp</p>
</td>
<td class="calibre13">
<p class="tab1">Comment’s Data Updation Time</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">true</p>
</td>
<td class="calibre13">
<p class="tab1">false</p>
</td>
<td class="calibre13">
<p class="tab1">-</p>
</td>
</tr>
</table>
<p class="figcap" id="tab4_5"><strong class="calibre3">Table 4.5:</strong> Comment Table</p>
<p class="nonindent"><a id="page111"/>This is the overview of PMS database design with raw schema tables. Now that we have the schema ready, we can head to start writing our project. We will first start by defining the project file structure.</p>
<a id="page112"/>
<figure class="img">
<img alt="" src="images/4.2.jpg" class="calibre1"/>
</figure>
<p class="figcap" id="fig4_2"><strong class="calibre3">Figure 4.2:</strong> Entity Relationship Diagram</p>
<h1 class="sec" id="s119"><a href="toc.xhtml#s119a" class="calibre6">Setting Up the Project Structure</a></h1>
<p class="nonindent">The project structure is flexible and can be customized to suit the specific needs of your Node.js application, and we aim to minimize developers’ efforts by adhering to established standards throughout the development process.</p>
<p class="nonindent">Let us start developing a PMS application in Node.js through the initialization project.</p>
<h1 class="sec" id="s120"><a id="page113" class="calibre6"/><a href="toc.xhtml#s120a" class="calibre6">Init the project</a></h1>
<p class="nonindent">Before you begin, ensure that you have installed the LTS (Long Term Support) version of Node.js and PostgreSQL on your system.</p>
<p class="nonindent"><strong class="calibre3">PostgreSQL can be downloaded from <a href="https://www.postgresql.org/download/">https://www.postgresql.org/download/</a>. There are installers available for Linux, MacOs, Windows, BSD and Solaris. Since there are many flavors of Linux, the official website mentioned above also has separate instructions for each flavor.</strong></p>
<p class="nonindent">The directory name for the project can be kept as <code class="calibre7"><strong class="calibre3">pms-be</strong></code><strong class="calibre3">.</strong> <code class="calibre7"><strong class="calibre3">pms</strong></code> stands for Project Management System and <code class="calibre7"><strong class="calibre3">-be</strong></code> can be appended because we are creating an API backend of the app. Let us create a new directory <code class="calibre7"><strong class="calibre3">`pms-be`</strong></code> and navigate to it using the command prompt (<code class="calibre7"><strong class="calibre3">cmd</strong></code>). Inside the directory, initiate a new Node.js project by running the command <code class="calibre7"><strong class="calibre3">"npm init</strong></code>.<code class="calibre7"><strong class="calibre3">"</strong></code></p>
<p class="nonindent">Once <code class="calibre7"><strong class="calibre3">"npm init"</strong></code> is executed, the setup process will prompt you to provide various details step by step. You can add the appropriate information and press <code class="calibre7"><strong class="calibre3">"Enter"</strong></code> for each prompt:</p>
<ul class="bull">
<li class="calibre9"><code class="calibre7">Package Name: (Default is <strong class="calibre3">"</strong>pms-be<strong class="calibre3">"</strong>)</code></li>
<li class="calibre9"><code class="calibre7">Version: (Default is <strong class="calibre3">"</strong>1.0.0<strong class="calibre3">"</strong>)</code></li>
<li class="calibre9"><code class="calibre7">Description: <strong class="calibre3">"</strong>Project Management System<strong class="calibre3">"</strong></code></li>
<li class="calibre9"><code class="calibre7">Entry Point: (Default is <strong class="calibre3">"</strong>index.js<strong class="calibre3">"</strong>) You can change it to <strong class="calibre3">"</strong>main.js<strong class="calibre3">"</strong> if needed.</code></li>
<li class="calibre9"><code class="calibre7">Test Command: If you don't have a specific test command, you can leave this field blank.</code></li>
<li class="calibre9"><code class="calibre7">Git Repository: If your project is not using Git, leave this field blank.</code></li>
<li class="calibre9"><code class="calibre7">Keywords: Add relevant keywords separated by commas.</code></li>
<li class="calibre9"><code class="calibre7">Author: Add the name of the project's author.</code></li>
<li class="calibre9"><code class="calibre7">License: (Default is <strong class="calibre3">"</strong>ISC<strong class="calibre3">"</strong>) You can choose a different license or keep it as <strong class="calibre3">"</strong>ISC.<strong class="calibre3">"</strong></code></li>
<li class="calibre9"><code class="calibre7">Press <strong class="calibre3">"</strong>Enter<strong class="calibre3">"</strong> once more to complete the initialization process.</code></li>
</ul>
<p class="nonindent">With this, your project’s initialization process will be successfully completed and the <code class="calibre7"><strong class="calibre3">package.json</strong></code> file will be created.</p>
<a id="page114"/>
<figure class="img">
<img alt="" src="images/4.3.jpg" class="calibre1"/>
</figure>
<p class="figcap" id="fig4_3"><strong class="calibre3">Figure 4.3:</strong> Init Project</p>
<h1 class="sec1" id="s121"><a href="toc.xhtml#s121a" class="calibre6">Installation of Project Dependency</a></h1>
<p class="nonindent">Once the project is initialized, the next step involves installing the necessary packages and tools as dependencies. We highly recommend using Visual Studio Code as the development tool because it offers various extensions, such as intellisense for programming languages, code prettier, and git packages, which significantly streamline the development process. These extensions help save a considerable amount of effort for developers, making the development experience more efficient and enjoyable.</p>
<p class="nonindent">Now let us start to install the most required packages for project management system development such as <code class="calibre7"><strong class="calibre3">express.js</strong></code>, <code class="calibre7"><strong class="calibre3">postgresql(pg)</strong></code>, <code class="calibre7"><strong class="calibre3">typescript</strong></code>, <code class="calibre7"><strong class="calibre3">typeorm</strong></code>, <code class="calibre7"><strong class="calibre3">ts-node</strong></code>, <code class="calibre7"><strong class="calibre3">ts-lint</strong></code>, and so on, and later on we will install other packages as required while development.</p>
<p class="code"><code class="calibre7">npm install express  --save</code></p>
<p class="code1"><code class="calibre7">npm install typescript -D</code></p>
<p class="code1"><code class="calibre7">npm install pg --save</code></p>
<p class="code1"><code class="calibre7">npm install typeorm --save</code></p>
<p class="code1"><code class="calibre7">npm install @types/express -D</code></p>
<p class="code1"><code class="calibre7">npm install @types/node -D</code></p>
<p class="code1"><code class="calibre7">npm install @types/pg -D</code></p>
<p class="code1"><code class="calibre7">npm install reflect-metadata --save</code></p>
<p class="code1"><code class="calibre7">npm install uuid --save</code></p>
<p class="code1"><code class="calibre7">npm install @types/uuid -D</code></p>
<p class="code1"><code class="calibre7">npm install ts-node prettier eslint eslint-config-prettier eslint-plugin</code></p>
<p class="code1"><code class="calibre7">-prettier -D</code></p>
<p class="code1"><code class="calibre7">npm install @typescript-eslint/eslint-plugin @typescript-eslint/parser -D</code></p>
<p class="nonindent"><a id="page115"/>Here, we share the <code class="calibre7"><strong class="calibre3">package.json</strong></code> file for reference to install all packages and it will also change day by day through development.</p>
<p class="code"><code class="calibre7">// package.json</code></p>
<p class="code1"><code class="calibre7">{</code></p>
<p class="code2"><code class="calibre7">"name": "pms-be",</code></p>
<p class="code2"><code class="calibre7">"version": "1.0.0",</code></p>
<p class="code2"><code class="calibre7">"description": "Project Management System",</code></p>
<p class="code2"><code class="calibre7">"main": "main.js",</code></p>
<p class="code2"><code class="calibre7">"scripts": {</code></p>
<p class="code3"><code class="calibre7">"test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</code></p>
<p class="code3"><code class="calibre7">"start": "nodemon dist/src/main.js"</code></p>
<p class="code2"><code class="calibre7">},</code></p>
<p class="code2"><code class="calibre7">"author": "Ravi Kumar Gupta, Yamini Panchal",</code></p>
<p class="code2"><code class="calibre7">"license": "Proprietary",</code></p>
<p class="code2"><code class="calibre7">"devDependencies": {</code></p>
<p class="code3"><code class="calibre7">"@types/express": "4.17.17",</code></p>
<p class="code3"><code class="calibre7">"@types/node": "20.4.2",</code></p>
<p class="code3"><code class="calibre7">"@types/pg": "8.10.2",</code></p>
<p class="code3"><code class="calibre7">"@types/uuid": "9.0.2",</code></p>
<p class="code3"><code class="calibre7">"@typescript-eslint/eslint-plugin": "5.59.8",</code></p>
<p class="code3"><code class="calibre7">"@typescript-eslint/parser": "5.59.8",</code></p>
<p class="code3"><code class="calibre7">"eslint": "8.41.0",</code></p>
<p class="code3"><code class="calibre7">"eslint-config-prettier": "8.8.0",</code></p>
<p class="code3"><code class="calibre7">"eslint-plugin-prettier": "4.2.1",</code></p>
<p class="code3"><code class="calibre7">"nodemon": "2.0.22",</code></p>
<p class="code3"><code class="calibre7">"prettier": "2.8.8",</code></p>
<p class="code3"><code class="calibre7">"ts-node": "10.9.1",</code></p>
<p class="code3"><code class="calibre7">"typescript": "5.0.4"</code></p>
<p class="code2"><code class="calibre7">},</code></p>
<p class="code2"><code class="calibre7">"dependencies": {</code></p>
<p class="code3"><code class="calibre7">"express": "4.18.2",</code></p>
<p class="code3"><code class="calibre7">"pg": "8.11.1",</code></p>
<p class="code3"><code class="calibre7">"reflect-metadata": "0.1.13",</code></p>
<p class="code3"><code class="calibre7">"typeorm": "0.3.17",</code></p>
<p class="code3"><code class="calibre7">"uuid": "9.0.0"</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page116"/>Next, create a <code class="calibre7"><strong class="calibre3">tsconfig.json</strong></code> file in the main directory of the project with the following code to ensure TypeScript compiles the code:</p>
<p class="code"><code class="calibre7">// tsconfig.json</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">{</code></p>
<p class="code2"><code class="calibre7">"compilerOptions": {</code></p>
<p class="code3"><code class="calibre7">"module": "commonjs",</code></p>
<p class="code3"><code class="calibre7">"moduleResolution": "node",</code></p>
<p class="code3"><code class="calibre7">"pretty": true,</code></p>
<p class="code3"><code class="calibre7">"sourceMap": false,</code></p>
<p class="code3"><code class="calibre7">"target": "ESNext",</code></p>
<p class="code3"><code class="calibre7">"outDir": "./dist",</code></p>
<p class="code3"><code class="calibre7">"baseUrl": "./src",</code></p>
<p class="code3"><code class="calibre7">"noImplicitAny": false,</code></p>
<p class="code3"><code class="calibre7">"esModuleInterop": true,</code></p>
<p class="code3"><code class="calibre7">"removeComments": true,</code></p>
<p class="code3"><code class="calibre7">"preserveConstEnums": true,</code></p>
<p class="code3"><code class="calibre7">"experimentalDecorators": true,</code></p>
<p class="code3"><code class="calibre7">"alwaysStrict": true,</code></p>
<p class="code3"><code class="calibre7">"forceConsistentCasingInFileNames": true,</code></p>
<p class="code3"><code class="calibre7">"emitDecoratorMetadata": true,</code></p>
<p class="code3"><code class="calibre7">"resolveJsonModule": true,</code></p>
<p class="code3"><code class="calibre7">"skipLibCheck": true</code></p>
<p class="code2"><code class="calibre7">},</code></p>
<p class="code2"><code class="calibre7">"include": ["src/**/*.ts", "src/**/*.json"],</code></p>
<p class="code2"><code class="calibre7">"exclude": ["node_modules"],</code></p>
<p class="code2"><code class="calibre7">"files": ["node_modules/@types/node/index.d.ts"]</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page117"/>Thereafter, create <code class="calibre7"><strong class="calibre3">server_config.json</strong></code> which will be used for all configurations, such as, <code class="calibre7"><strong class="calibre3">port</strong></code>, <code class="calibre7"><strong class="calibre3">database config</strong></code>, and so on.</p>
<p class="code"><code class="calibre7">// server_config.json</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">{</code></p>
<p class="code2"><code class="calibre7">"port": 3000,</code></p>
<p class="code2"><code class="calibre7">"db_config": {</code></p>
<p class="code3"><code class="calibre7">"db": "postgres",</code></p>
<p class="code3"><code class="calibre7">"username": "root",</code></p>
<p class="code3"><code class="calibre7">"password": "123456",</code></p>
<p class="code3"><code class="calibre7">"host": "localhost",</code></p>
<p class="code3"><code class="calibre7">"port": 5432,</code></p>
<p class="code3"><code class="calibre7">"dbname": "pms"</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><strong class="calibre3">Note</strong>: <em class="calibre4">Please always keep stronger passwords for any account</em>.</p>
<p class="nonindent">As part of the configuration process, we will integrate <code class="calibre7"><strong class="calibre3">ESLint</strong></code> to enhance development practices. We will include a <code class="calibre7"><strong class="calibre3">.eslintrc.json</strong></code> file in the project’s root directory, as demonstrated in the code snippet as follows:</p>
<p class="code"><code class="calibre7">.eslintrc.json</code></p>
<p class="code1"><code class="calibre7">{</code></p>
<p class="code2"><code class="calibre7">"env": {</code></p>
<p class="code3"><code class="calibre7">"browser": true,</code></p>
<p class="code3"><code class="calibre7">"es2021": true</code></p>
<p class="code2"><code class="calibre7">},</code></p>
<p class="code2"><code class="calibre7">"extends": ["eslint:recommended", "plugin:@typescript-eslint/recommended"],</code></p>
<p class="code2"><code class="calibre7">"overrides": [],</code></p>
<p class="code2"><code class="calibre7">"parser": "@typescript-eslint/parser",</code></p>
<p class="code2"><code class="calibre7">"parserOptions": {</code></p>
<p class="code3"><code class="calibre7">"ecmaVersion": "latest",</code></p>
<p class="code3"><code class="calibre7">"sourceType": "module"</code></p>
<p class="code2"><code class="calibre7">},</code></p>
<p class="code2"><code class="calibre7">"plugins": ["@typescript-eslint"],</code></p>
<p class="code2"><code class="calibre7">"rules": {</code></p>
<p class="code3"><code class="calibre7">"linebreak-style": ["error", "unix"],</code></p>
<p class="code3"><code class="calibre7">"quotes": ["error", "single"],</code></p>
<p class="code3"><code class="calibre7">"semi": ["error", "always"]</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page118"/>Nodemon is beneficial for Node.js developers as it enhances development workflow, improves productivity, and provides real-time feedback during the development process.</p>
<p class="nonindent">With Nodemon, developers receive immediate feedback on code changes as the server restarts instantly. This allows for quick validation of code modifications and helps catch errors early in the development process. This eliminates the need to manually stop and restart the server after every code modification, saving time and streamlining the development process.</p>
<p class="nonindent">Let us install <code class="calibre7"><strong class="calibre3">nodemon</strong></code> open root directory of project on terminal and paste following command:</p>
<p class="code"><code class="calibre7">$ npm install nodemon -D</code></p>
<h1 class="sec" id="s122"><a href="toc.xhtml#s122a" class="calibre6">Project Directory Structure</a></h1>
<p class="nonindent">When structuring a <code class="calibre7"><strong class="calibre3">Node.js</strong></code> project with <code class="calibre7"><strong class="calibre3">Express</strong></code> and <code class="calibre7"><strong class="calibre3">TypeScript</strong></code>, a common directory structure can be as follows:</p>
<p class="code"><code class="calibre7">pms-be/</code></p>
<p class="code1"><code class="calibre7">|-- src/</code></p>
<p class="code1"><code class="calibre7">|   |-- components/</code></p>
<p class="code1"><code class="calibre7">|   |   |-- users/</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- users_controller.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- users_entity.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- users_routes.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- users_service.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |-- projects/</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- projects_controller.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- projects_entity.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- projects_routes.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- projects_service.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |-- tasks/</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- tasks_controller.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- tasks_entity.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- tasks_routes.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |   |-- tasks_service.ts</code></p>
<p class="code1"><code class="calibre7">|   |-- utils/</code></p>
<p class="code1"><code class="calibre7">|   |   |-- db_utils.ts</code></p>
<p class="code1"><code class="calibre7">|   |   |-- common.ts</code></p>
<p class="code1"><code class="calibre7">|   |-- routes/</code></p>
<p class="code1"><code class="calibre7">|   |   |-- index.ts</code></p>
<p class="code1"><code class="calibre7">|   |--express_server.ts</code></p>
<p class="code1"><code class="calibre7">|   |-- main.ts</code></p>
<p class="code1"><code class="calibre7">|-- tests/</code></p>
<p class="code1"><code class="calibre7">|   |-- users_spec.tjs</code></p>
<p class="code1"><code class="calibre7">|-- package-lock.json</code></p>
<p class="code1"><code class="calibre7">|-- package.json</code></p>
<p class="code1"><code class="calibre7">|-- node_modules</code></p>
<p class="code1"><code class="calibre7">|-- tsconfig.json</code></p>
<p class="code1"><code class="calibre7">|-- server_config.json</code></p>
<p class="code1"><code class="calibre7">|-- .gitignore</code></p>
<p class="code1"><code class="calibre7">|-- README.md</code></p>
<p class="nonindent"><a id="page119"/>As shown in the project directory structure, we have already set up <code class="calibre7"><strong class="calibre3">server_config.json</strong></code> and <code class="calibre7"><strong class="calibre3">tsconfig.json</strong></code> files. As we proceed with the development, we will create various folders and files to organize the code and manage different aspects of the project.</p>
<h1 class="sec" id="s123"><a href="toc.xhtml#s123a" class="calibre6">Create Express Server</a></h1>
<p class="nonindent">Before creating an express server, add one <code class="calibre7"><strong class="calibre3">README.md</strong></code> file that includes how this project will run and the required configuration so anyone can easily work on that.</p>
<p class="nonindent"><strong class="calibre3">README.md</strong></p>
<p class="code"><code class="calibre7"># Project Management System API</code></p>
<p class="code"><code class="calibre7">## Prerequisites</code></p>
<p class="code"><code class="calibre7">-   Node.js: Ensure that Node.js is installed on your machine. You can download it from [here](https://nodejs.org).</code></p>
<p class="code"><code class="calibre7">## Install Project Dependency Packages</code></p>
<p class="code"><code class="calibre7">```</code></p>
<p class="code1"><code class="calibre7">npm install</code></p>
<p class="code1"><code class="calibre7">```</code></p>
<p class="code"><a id="page120"/><code class="calibre7">## Configuration</code></p>
<p class="code"><code class="calibre7">create server_config.json file in the root directory and save it. Inside that file, add the desired configuration values in the format KEY:VALUE.</code></p>
<p class="code"><code class="calibre7">-   Configuration Options</code></p>
<p class="code2"><code class="calibre7">| Configuration Key | Description                           |</code></p>
<p class="code2"><code class="calibre7">| ----------------- | ------------------------------------ |</code></p>
<p class="code2"><code class="calibre7">| PORT              | The port number on which project run |</code></p>
<p class="code"><code class="calibre7">## Compile Project</code></p>
<p class="code"><code class="calibre7">Once you are in the project's root directory, you can use the tsc command with the --watch flag to enable automatic recompilation when changes are detected. Run the following command</code></p>
<p class="code"><code class="calibre7">```</code></p>
<p class="code1"><code class="calibre7">tsc --watch</code></p>
<p class="code1"><code class="calibre7">```</code></p>
<p class="code"><code class="calibre7">## Run Project</code></p>
<p class="code"><code class="calibre7">-   on local machine run during development</code></p>
<p class="code2a"><code class="calibre7">```</code></p>
<p class="code2"><code class="calibre7">nodemon dist/src/main.js</code></p>
<p class="code2"><code class="calibre7">```</code></p>
<p class="code"><code class="calibre7">-   on server after development</code></p>
<p class="code2a"><code class="calibre7">```</code></p>
<p class="code2"><code class="calibre7">node src/main.js</code></p>
<p class="code2"><code class="calibre7">```</code></p>
<p class="nonindent">Let us create a new directory called <code class="calibre7"><strong class="calibre3">"src"</strong></code> and inside it, create two files named <code class="calibre7"><strong class="calibre3">"main.ts"</strong></code> and <code class="calibre7"><strong class="calibre3">"express_server.ts"</strong></code> to set up an Express <code class="calibre7">HTTP</code> server with the following code. As our project is currently small-scale, we will not be using <code class="calibre7"><strong class="calibre3">cluster</strong></code> and <code class="calibre7"><strong class="calibre3">forks</strong></code> at the OS level, but we will implement reconnection to the server in case of any exceptions. <a id="page121"/>Depending on your project’s specific requirements, you can choose to use the <code class="calibre7"><strong class="calibre3">"main.ts"</strong></code> file with or without <code class="calibre7"><strong class="calibre3">cluster</strong></code> functionality.</p>
<p class="code"><code class="calibre7">// main.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">import cluster from 'cluster';</code></p>
<p class="code1"><code class="calibre7">import { ExpressServer } from './express_server';</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">// connect the express server</code></p>
<p class="code1"><code class="calibre7">const server = new ExpressServer();</code></p>
<p class="code"><code class="calibre7">process.on('uncaughtException', (error: Error) =&gt; {</code></p>
<p class="code2"><code class="calibre7">console.error(`Uncaught exception in worker process ${process.pid}:`, error);</code></p>
<p class="code2a"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code2"><code class="calibre7">server.closeServer();</code></p>
<p class="code2a"><code class="calibre7">setTimeout(() =&gt; {</code></p>
<p class="code3"><code class="calibre7">cluster.fork();</code></p>
<p class="code3"><code class="calibre7">cluster.worker?.disconnect();</code></p>
<p class="code2"><code class="calibre7">}, 1000);</code></p>
<p class="code1"><code class="calibre7">});</code></p>
<p class="code"><code class="calibre7">// Gracefully handle termination signals</code></p>
<p class="code1"><code class="calibre7">process.on('SIGINT', () =&gt; {</code></p>
<p class="code2"><code class="calibre7">console.log('Received SIGINT signal');</code></p>
<p class="code2"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code2"><code class="calibre7">server.closeServer();</code></p>
<p class="code1"><code class="calibre7">});</code></p>
<p class="code"><code class="calibre7">process.on('SIGTERM', () =&gt; {</code></p>
<p class="code2"><code class="calibre7">console.log('Received SIGTERM signal');</code></p>
<p class="code2"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code2"><code class="calibre7">server.closeServer();</code></p>
<p class="code1"><code class="calibre7">});</code></p>
<h1 class="sec1" id="s124"><a id="page122" class="calibre6"/><a href="toc.xhtml#s124a" class="calibre6">With Cluster for a Large Project</a></h1>
<p class="nonindent">With the presence of the <code class="calibre7">cluster</code> module, if the server crashes due to any reason, we can catch the event when the process exits and spawn another child. This way, we ensure that the server does not crash and it remains available for serving upcoming requests.</p>
<p class="code"><code class="calibre7">// main.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">import cluster from 'cluster';</code></p>
<p class="code1"><code class="calibre7">import os from 'os';</code></p>
<p class="code1"><code class="calibre7">const numCPUs = os.cpus().length;</code></p>
<p class="code1"><code class="calibre7">import { ExpressServer } from './express_server';</code></p>
<p class="code"><code class="calibre7">if (cluster.isPrimary) {</code></p>
<p class="code2"><code class="calibre7">console.log(`Master process PID: ${process.pid}`);</code></p>
<p class="code2a"><code class="calibre7">for (let i = 0; i &lt; numCPUs; i++) {</code></p>
<p class="code3"><code class="calibre7">cluster.fork();</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2a"><code class="calibre7">cluster.on('exit', (worker, code, signal) =&gt; {</code></p>
<p class="code3"><code class="calibre7">console.log(`Worker process ${worker.process.pid} exited with code ${code} and signal ${signal}`);</code></p>
<p class="code3"><code class="calibre7">setTimeout(() =&gt; {</code></p>
<p class="code4"><code class="calibre7">cluster.fork();</code></p>
<p class="code3"><code class="calibre7">}, 1000);</code></p>
<p class="code2"><code class="calibre7">});</code></p>
<p class="code"><code class="calibre7">} else {</code></p>
<p class="code2"><code class="calibre7">// connect the express server</code></p>
<p class="code2"><code class="calibre7">const server = new ExpressServer();</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code2"><code class="calibre7">process.on('uncaughtException', (error: Error) =&gt; {</code></p>
<p class="code3"><code class="calibre7">console.error(`Uncaught exception in worker process</code></p>
<p class="code1"><code class="calibre7">${process.pid}:`, error);</code></p>
<p class="code3"><code class="calibre7"><a id="page123"/>// Close any open connections or resources</code></p>
<p class="code3"><code class="calibre7">server.closeServer();</code></p>
<p class="code3a"><code class="calibre7">setTimeout(() =&gt; {</code></p>
<p class="code4"><code class="calibre7">cluster.fork();</code></p>
<p class="code4"><code class="calibre7">cluster.worker?.disconnect();</code></p>
<p class="code3"><code class="calibre7">}, 1000);</code></p>
<p class="code2"><code class="calibre7">});</code></p>
<p class="code2a"><code class="calibre7">// Gracefully handle termination signals</code></p>
<p class="code2"><code class="calibre7">process.on('SIGINT', () =&gt; {</code></p>
<p class="code3"><code class="calibre7">console.log('Received SIGINT signal');</code></p>
<p class="code3"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code3"><code class="calibre7">server.closeServer();</code></p>
<p class="code2"><code class="calibre7">});</code></p>
<p class="code2a"><code class="calibre7">process.on('SIGTERM', () =&gt; {</code></p>
<p class="code3"><code class="calibre7">console.log('Received SIGTERM signal');</code></p>
<p class="code3"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code3"><code class="calibre7">server.closeServer();</code></p>
<p class="code2"><code class="calibre7">});</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">As per the preceding code, we need to create <code class="calibre7"><strong class="calibre3">express_server.ts</strong></code> as it is imported. So let us make it.</p>
<p class="code"><code class="calibre7">// express_server.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">import express, { Application } from 'express';</code></p>
<p class="code1"><code class="calibre7">import { IServerConfig } from './utils/config';</code></p>
<p class="code1"><code class="calibre7">import * as config from '../server_config.json';</code></p>
<p class="code"><code class="calibre7">export class ExpressServer {</code></p>
<p class="code2a"><code class="calibre7">private static server = null;</code></p>
<p class="code2"><code class="calibre7"><a id="page124"/>public server_config: IServerConfig = config;</code></p>
<p class="code2"><code class="calibre7">constructor() {</code></p>
<p class="code3"><code class="calibre7">const port = this.server_config.port ?? 3000;</code></p>
<p class="code3a"><code class="calibre7">// initialize express app</code></p>
<p class="code3"><code class="calibre7">const app = express();</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code3"><code class="calibre7">app.get('/ping', (req, res) =&gt; {</code></p>
<p class="code5"><code class="calibre7">res.send('pong');</code></p>
<p class="code3"><code class="calibre7">});</code></p>
<p class="code3a"><code class="calibre7">ExpressServer.server = app.listen(port, () =&gt; {</code></p>
<p class="code5"><code class="calibre7">console.log(`Server is running on port ${port} with pid = ${process.pid}`);</code></p>
<p class="code3"><code class="calibre7">});</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2a"><code class="calibre7">//close the express server for safe on uncaughtException</code></p>
<p class="code2"><code class="calibre7">public closeServer(): void {</code></p>
<p class="code3"><code class="calibre7">ExpressServer.server.close(() =&gt; {</code></p>
<p class="code5"><code class="calibre7">console.log('Server closed');</code></p>
<p class="code5"><code class="calibre7">process.exit(0);</code></p>
<p class="code3"><code class="calibre7">});</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">Afterwards, create a directory with <code class="calibre7"><strong class="calibre3">utils</strong></code> and inside add <code class="calibre7"><strong class="calibre3">config.ts</strong></code> file for define config interface as follows:</p>
<p class="code"><code class="calibre7">// config.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">export interface IServerConfig {</code></p>
<p class="code2"><code class="calibre7">port: number;</code></p>
<p class="code2"><code class="calibre7">db_config: {</code></p>
<p class="code5"><code class="calibre7">'db': string;</code></p>
<p class="code5"><code class="calibre7">'username': string;</code></p>
<p class="code5"><code class="calibre7">'password': string;</code></p>
<p class="code5"><code class="calibre7">'host': string;</code></p>
<p class="code5"><code class="calibre7">'port': number;</code></p>
<p class="code5"><code class="calibre7">'dbname': string;</code></p>
<p class="code2"><code class="calibre7">};</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page125"/>Now to run the app, first compile the code with <code class="calibre7"><strong class="calibre3">tsc --watch</strong></code>. After that, a <code class="calibre7"><strong class="calibre3">dist</strong></code> folder will be created, and then run with <code class="calibre7"><strong class="calibre3">nodemon</strong></code> <code class="calibre7"><strong class="calibre3">dist/src/main.js</strong></code> while developing the app, the following output will be displayed.</p>
<p class="nonindent">Output :</p>
<figure class="img">
<img alt="" src="images/4.4.jpg" class="calibre1"/>
</figure>
<p class="figcap" id="fig4_4"><strong class="calibre3">Figure 4.4:</strong> Output Run Application</p>
<p class="nonindent"><strong class="calibre3">Note</strong>: <em class="calibre4">If you are using Visual Studio Code, you can configure and run the TypeScript watch task easily. To do this, press</em> <code class="calibre7"><strong class="calibre3">"<em class="calibre4">Ctrl + P</em>"</strong></code><em class="calibre4">, then select</em> <code class="calibre7"><strong class="calibre3">"<em class="calibre4">Tasks: Run Task</em>"</strong></code> <em class="calibre4">and configure a task with</em> <code class="calibre7"><strong class="calibre3"><em class="calibre4">TypeScript</em></strong></code><em class="calibre4">. Choose</em> <code class="calibre7"><strong class="calibre3">"<em class="calibre4">tsc:watch -tsconfig.json</em>"</strong></code> <em class="calibre4">to enable watch mode for TypeScript compilation based on your</em> <code class="calibre7"><strong class="calibre3"><em class="calibre4">tsconfig.json</em></strong></code> <em class="calibre4">file.</em></p>
<h1 class="sec" id="s125"><a href="toc.xhtml#s125a" class="calibre6">Connecting the Database</a></h1>
<p class="nonindent">TypeORM is widely used in modern TypeScript and JavaScript applications for its ease of use, flexibility, and abstraction of database operations. It simplifies the development process and improves maintainability when working with databases in Node.js. We already installed packages for <code class="calibre7"><strong class="calibre3">postgreSQL</strong></code> and <code class="calibre7"><strong class="calibre3">typeorm</strong></code>, respectively, using the following commands: <code class="calibre7"><strong class="calibre3">npm i pg --save</strong></code><strong class="calibre3">,</strong><code class="calibre7"> <strong class="calibre3">npm i @types/pg -D</strong></code> and <code class="calibre7"><strong class="calibre3">npm i typeorm -- save</strong></code>.</p>
<p class="nonindent">Now creates <code class="calibre7"><strong class="calibre3">db.ts</strong></code> file in utils directory with the following code:</p>
<p class="code"><code class="calibre7">// db.ts</code></p>
<p class="code"><code class="calibre7">import { DataSource } from 'typeorm';</code></p>
<p class="code1"><code class="calibre7">import { IServerConfig } from './config';</code></p>
<p class="code1"><code class="calibre7">import * as config from '../../server_config.json';</code></p>
<p class="code1"><code class="calibre7"><a id="page126"/>export class DatabaseUtil {</code></p>
<p class="code2"><code class="calibre7">public server_config: IServerConfig = config;</code></p>
<p class="code2a"><code class="calibre7">constructor() {</code></p>
<p class="code3"><code class="calibre7">this.connectDatabase();</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2a"><code class="calibre7">private connectDatabase() {</code></p>
<p class="code3"><code class="calibre7">try {</code></p>
<p class="code5"><code class="calibre7">const db_config = this.server_config.db_config;</code></p>
<p class="code5"><code class="calibre7">const AppDataSource = new DataSource({</code></p>
<p class="code6"><code class="calibre7">type: 'postgres',</code></p>
<p class="code6"><code class="calibre7">host: db_config.host,</code></p>
<p class="code6"><code class="calibre7">port: db_config.port,</code></p>
<p class="code6"><code class="calibre7">username: db_config.username,</code></p>
<p class="code6"><code class="calibre7">password: db_config.password,</code></p>
<p class="code6"><code class="calibre7">database: db_config.dbname,</code></p>
<p class="code6"><code class="calibre7">entities: [],</code></p>
<p class="code6"><code class="calibre7">synchronize: true,</code></p>
<p class="code6"><code class="calibre7">logging: false,</code></p>
<p class="code5"><code class="calibre7">});</code></p>
<p class="code5"><code class="calibre7">AppDataSource.initialize()</code></p>
<p class="code6"><code class="calibre7">.then(() =&gt; {</code></p>
<p class="code7"><code class="calibre7">console.log('Connected to the database');</code></p>
<p class="code6"><code class="calibre7">})</code></p>
<p class="code6"><code class="calibre7">.catch((error) =&gt; console.log(error));</code></p>
<p class="code3"><code class="calibre7">} catch (error) {</code></p>
<p class="code5"><code class="calibre7">console.error('Error connecting to the database:', error);</code></p>
<p class="code3"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">For now, we have entities as blank arrays since we do not have any entities defined. Then import the database connection in <code class="calibre7"><strong class="calibre3">main.ts</strong></code> with the updated following code:</p>
<p class="code"><code class="calibre7">// main.ts</code></p>
<p class="code1"><code class="calibre7"><a id="page127"/>import cluster from 'cluster';</code></p>
<p class="code1"><code class="calibre7">import { ExpressServer } from './express_server';</code></p>
<p class="code1"><code class="calibre7">import { DatabaseUtil } from './utils/db';</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">// connect the express server</code></p>
<p class="code1"><code class="calibre7">const server = new ExpressServer();</code></p>
<p class="code"><code class="calibre7">// connect the database</code></p>
<p class="code1"><code class="calibre7">new DatabaseUtil();</code></p>
<p class="code"><code class="calibre7">process.on('uncaughtException', (error: Error) =&gt; {</code></p>
<p class="code2"><code class="calibre7">console.error(`Uncaught exception in worker process ${process.pid}:`, error);</code></p>
<p class="code2a"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code2"><code class="calibre7">server.closeServer();</code></p>
<p class="code2a"><code class="calibre7">setTimeout(() =&gt; {</code></p>
<p class="code3"><code class="calibre7">cluster.fork();</code></p>
<p class="code3"><code class="calibre7">cluster.worker?.disconnect();</code></p>
<p class="code2"><code class="calibre7">}, 1000);</code></p>
<p class="code"><code class="calibre7">});</code></p>
<p class="code"><code class="calibre7">// Gracefully handle termination signals</code></p>
<p class="code1"><code class="calibre7">process.on('SIGINT', () =&gt; {</code></p>
<p class="code2"><code class="calibre7">console.log('Received SIGINT signal');</code></p>
<p class="code2"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code2"><code class="calibre7">server.closeServer();</code></p>
<p class="code"><code class="calibre7">});</code></p>
<p class="code"><code class="calibre7">process.on('SIGTERM', () =&gt; {</code></p>
<p class="code2"><code class="calibre7">console.log('Received SIGTERM signal');</code></p>
<p class="code2"><code class="calibre7">// Close any open connections or resources</code></p>
<p class="code2"><code class="calibre7">server.closeServer();</code></p>
<p class="code1"><code class="calibre7">});</code></p>
<p class="nonindent"><a id="page128"/>After running, the following output will be displayed on a successfully connected database.</p>
<p class="nonindent">Output:</p>
<figure class="img">
<img alt="" src="images/4.5.jpg" class="calibre1"/>
</figure>
<p class="figcap" id="fig4_5"><strong class="calibre3">Figure 4.5:</strong> Database Connected Output</p>
<p class="nonindent">This way using typeorm postgreSQL database connected based on the database config defined in <code class="calibre7"><strong class="calibre3">server_config.json</strong></code>.</p>
<h1 class="sec" id="s126"><a href="toc.xhtml#s126a" class="calibre6">Database Models (Entities)</a></h1>
<p class="nonindent">We have already seen database schema tables . To integrate the database schema into the code, we will create a components directory and subdirectories for roles, users, projects, tasks, and comments. In each of these directories, we will create a corresponding entity file.</p>
<p class="code"><code class="calibre7">components</code></p>
<p class="code2"><code class="calibre7">├── roles</code></p>
<p class="code2"><code class="calibre7">│   └── roles_entity.ts</code></p>
<p class="code2"><code class="calibre7">├── users</code></p>
<p class="code2"><code class="calibre7">│   └── users_entity.ts</code></p>
<p class="code2"><code class="calibre7">├── projects</code></p>
<p class="code2"><code class="calibre7">│   └── projects_entity.ts</code></p>
<p class="code2"><code class="calibre7">├── tasks</code></p>
<p class="code2"><code class="calibre7">│   └── tasks_entity.ts</code></p>
<p class="code2"><code class="calibre7">└── comments</code></p>
<p class="code3"><code class="calibre7">└── comments_entity.ts</code></p>
<p class="nonindent">We will start by defining the Roles entity:</p>
<h1 class="sec" id="s127"><a href="toc.xhtml#s127a" class="calibre6">Role Entity</a></h1>
<p class="nonindent">Create file <code class="calibre7"><strong class="calibre3">role_entity.ts</strong></code> in role directory with the following code.</p>
<p class="code"><a id="page129"/><code class="calibre7">// role_entity.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code"><code class="calibre7">import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn,</code></p>
<p class="code1"><code class="calibre7">UpdateDateColumn } from 'typeorm';</code></p>
<p class="code"><code class="calibre7">@Entity()</code></p>
<p class="code1"><code class="calibre7">export class Roles {</code></p>
<p class="code2"><code class="calibre7">@PrimaryGeneratedColumn('uuid')</code></p>
<p class="code2"><code class="calibre7">role_id: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 60, nullable: false, unique: true })</code></p>
<p class="code2"><code class="calibre7">name: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 200 })</code></p>
<p class="code2"><code class="calibre7">description: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ type: 'text' })</code></p>
<p class="code2"><code class="calibre7">rights: string;</code></p>
<p class="code2a"><code class="calibre7">@CreateDateColumn()</code></p>
<p class="code2"><code class="calibre7">created_at: Date;</code></p>
<p class="code2a"><code class="calibre7">@UpdateDateColumn()</code></p>
<p class="code2"><code class="calibre7">updated_at: Date;</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">The code imports necessary decorators from TypeORM. These decorators are used to define the entity and its properties.</p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">@Entity()</strong></code> decorator marks the class <code class="calibre7">Roles</code> as a TypeORM entity, indicating that it represents a database table. It has the <code class="calibre7"><strong class="calibre3">role_id</strong></code> as the primary key decorated with <code class="calibre7"><strong class="calibre3">PrimaryGeneratedColumn</strong></code> with an auto-generated <code class="calibre7">UUID</code>, and the <code class="calibre7">name</code> field is defined as <code class="calibre7">unique</code> and <code class="calibre7">not</code> <code class="calibre7">nullable</code>.</p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">description</strong></code> field has a maximum length of 200 characters. The <code class="calibre7"><strong class="calibre3">rights</strong></code> field uses the <code class="calibre7"><strong class="calibre3">text</strong></code> data type to store larger textual data. The <code class="calibre7"><strong class="calibre3">@CreateDateColumn()</strong></code> and <code class="calibre7"><strong class="calibre3">@UpdateDateColumn()</strong></code> decorators handle the automatic insertion of data for respective insertion and updation time.</p>
<h1 class="sec" id="s128"><a id="page130" class="calibre6"/><a href="toc.xhtml#s128a" class="calibre6">User Entity</a></h1>
<p class="nonindent">The Users entity represents the user information in the application’s database. Create <code class="calibre7">users_entity.ts</code> with the following code:</p>
<p class="code"><code class="calibre7">// user_entity.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn,</code></p>
<p class="code1"><code class="calibre7">UpdateDateColumn, OneToOne, JoinColumn } from 'typeorm';</code></p>
<p class="code1"><code class="calibre7">import { Roles } from '../roles/roles_entity';</code></p>
<p class="code"><code class="calibre7">@Entity()</code></p>
<p class="code1"><code class="calibre7">export class Users {</code></p>
<p class="code2"><code class="calibre7">@PrimaryGeneratedColumn('uuid')</code></p>
<p class="code2"><code class="calibre7">user_id: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 50, nullable: true })</code></p>
<p class="code2"><code class="calibre7">fullname: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 30, nullable: false, unique: true })</code></p>
<p class="code2"><code class="calibre7">username: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 60, nullable: false, unique: true })</code></p>
<p class="code2"><code class="calibre7">email: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ nullable: false })</code></p>
<p class="code2"><code class="calibre7">password: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ nullable: false })</code></p>
<p class="code2"><code class="calibre7">@ManyToOne(() =&gt; Roles)</code></p>
<p class="code2"><code class="calibre7">@JoinColumn({ name: 'role_id' })</code></p>
<p class="code2"><code class="calibre7">role_id: Roles['role_id'];</code></p>
<p class="code2a"><code class="calibre7">@CreateDateColumn()</code></p>
<p class="code2"><code class="calibre7">created_at: Date;</code></p>
<p class="code2a"><code class="calibre7">@UpdateDateColumn()</code></p>
<p class="code2"><code class="calibre7">updated_at: Date;</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page131"/>As per user-defined entity, <code class="calibre7"><strong class="calibre3">user_id</strong></code> serves as the primary key with auto-generated <code class="calibre7"><strong class="calibre3">uuid</strong></code>, <code class="calibre7"><strong class="calibre3">username</strong></code> and <code class="calibre7"><strong class="calibre3">email</strong></code> will be unique with not-null constraints, <code class="calibre7"><strong class="calibre3">fullname</strong></code> allows maximum 50 characters, and <code class="calibre7"><strong class="calibre3">password</strong></code> also has a not-null constraints.</p>
<p class="nonindent">In this context, each user is linked with one role, establishing a many-to-one relationship between them, so there is many-to-one join established between two tables users and roles.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">@ManyToOne(() =&gt; Roles)</strong></code>: This decorator specifies a many-to-one relationship between entities. It indicates that the current entity (likely representing a user or some other entity) has a many-to-one relationship with the Roles entity. The Roles entity is specified using a function that returns the target entity class.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">@JoinColumn({ name: 'role_id</strong>' <strong class="calibre3">})</strong></code>: This decorator specifies the column in the current entity that serves as the foreign key to establish the relationship. In this case, the <code class="calibre7"><strong class="calibre3">role_id</strong></code> column is used as the foreign key.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">role_id: Roles['role_id</strong>'<strong class="calibre3">]</strong></code>: This line defines a TypeScript property <code class="calibre7"><strong class="calibre3">role_id</strong></code> of type <code class="calibre7"><strong class="calibre3">Roles['role_id</strong>'<strong class="calibre3">]</strong></code>. It’s likely that Roles is an entity class representing roles in your application, and <code class="calibre7"><strong class="calibre3">role_id</strong></code> is a property of that class representing the primary key or unique identifier of a role.</p>
<p class="nonindent">This is a basic overview of a many-to-one relationship.</p>
<h1 class="sec" id="s129"><a href="toc.xhtml#s129a" class="calibre6">Project Entity</a></h1>
<p class="nonindent">Now create a file <code class="calibre7"><strong class="calibre3">projects_entity.ts</strong></code> with the following code:</p>
<p class="code"><code class="calibre7">// projects_entity.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code"><code class="calibre7">import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn,</code></p>
<p class="code1"><code class="calibre7">UpdateDateColumn } from 'typeorm';</code></p>
<p class="code"><code class="calibre7">@Entity()</code></p>
<p class="code1"><code class="calibre7">export class Projects {</code></p>
<p class="code2"><code class="calibre7">@PrimaryGeneratedColumn('uuid')</code></p>
<p class="code2"><code class="calibre7">project_id: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 30, nullable: false, unique: true })</code></p>
<p class="code2"><code class="calibre7">name: string;</code></p>
<p class="code2a"><code class="calibre7"><a id="page132"/>@Column({ length: 500 })</code></p>
<p class="code2"><code class="calibre7">description: string;</code></p>
<p class="code2a"><code class="calibre7">@Column('uuid', { array: true, default: [] })</code></p>
<p class="code2"><code class="calibre7">user_ids: string[];</code></p>
<p class="code2a"><code class="calibre7">@Column()</code></p>
<p class="code2"><code class="calibre7">start_time: Date;</code></p>
<p class="code2a"><code class="calibre7">@Column()</code></p>
<p class="code2"><code class="calibre7">end_time: Date;</code></p>
<p class="code2a"><code class="calibre7">@CreateDateColumn()</code></p>
<p class="code2"><code class="calibre7">created_at: Date;</code></p>
<p class="code2a"><code class="calibre7">@UpdateDateColumn()</code></p>
<p class="code2"><code class="calibre7">updated_at: Date;</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">@PrimaryGeneratedColumn('uuid</strong>'<strong class="calibre3">)</strong></code> decorator specifies that the <code class="calibre7"><strong class="calibre3">project_id</strong></code> property is the primary key of the <code class="calibre7"><strong class="calibre3">projects</strong></code> table and will be automatically generated as a <code class="calibre7"><strong class="calibre3">UUID</strong></code> when a new project is inserted.</p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">@Column({ length: 30, nullable: false, unique: true })</strong></code> decorator is applied to the <code class="calibre7"><strong class="calibre3">name</strong></code> property, indicating that it is a string with a maximum length of 30 characters. It is also marked as <code class="calibre7"><strong class="calibre3">nullable: false</strong></code> (required) and <code class="calibre7"><strong class="calibre3">unique: true</strong></code> (must be unique among projects).</p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">@Column({ length: 500 })</strong></code> decorator is used for the description property, representing a string with a maximum length of 500 characters.</p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">@Column('uuid</strong>'<strong class="calibre3">, { array: true, default: [] })</strong></code> decorator is applied to the <code class="calibre7"><strong class="calibre3">user_ids</strong></code> property, indicating that it is an array of strings (<code class="calibre7"><strong class="calibre3">string[]</strong></code>) that will store user IDs associated with the project. The default value for the array is set to an empty array (<code class="calibre7"><strong class="calibre3">[]</strong></code>).</p>
<p class="nonindent">The<code class="calibre7"> @Column()</code> decorator is used for both the <code class="calibre7">start_time</code> and <code class="calibre7">end_time</code> properties, which represent Date objects.</p>
<p class="nonindent">In the context of the application, every project comprises multiple tasks, and each task is linked to a single project. Consequently, within the tasks entity, there exists a one-to-one relationship with the project entity. Similarly user and role joins here project and task join will be established with join columns as <code class="calibre7"><strong class="calibre3">project_id</strong></code> for both tables in the following task entity that we will explore in detail.</p>
<h1 class="sec" id="s130"><a id="page133" class="calibre6"/><a href="toc.xhtml#s130a" class="calibre6">Task Entity</a></h1>
<p class="nonindent">Create a new file named <code class="calibre7"><strong class="calibre3">tasks_entity.ts</strong></code> and include the following code in it:</p>
<p class="code"><code class="calibre7">// tasks_entity.ts</code></p>
<p class="code"><code class="calibre7">import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn,</code></p>
<p class="code1"><code class="calibre7">UpdateDateColumn, ManyToOne, JoinColumn } from 'typeorm';</code></p>
<p class="code1"><code class="calibre7">import { Users } from '../users/users_entity';</code></p>
<p class="code1"><code class="calibre7">import { Projects } from '../projects/projects_entity';</code></p>
<p class="code"><code class="calibre7">export enum Status {</code></p>
<p class="code2"><code class="calibre7">NotStarted = 'Not-Started',</code></p>
<p class="code2"><code class="calibre7">InProgress = 'In-Progress',</code></p>
<p class="code2"><code class="calibre7">Completed = 'Completed',</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="code"><code class="calibre7">export enum Priority {</code></p>
<p class="code2"><code class="calibre7">Low = 'Low',</code></p>
<p class="code2"><code class="calibre7">Medium = 'Medium',</code></p>
<p class="code2"><code class="calibre7">High = 'High',</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="code"><code class="calibre7">@Entity()</code></p>
<p class="code1"><code class="calibre7">export class Tasks {</code></p>
<p class="code2"><code class="calibre7">@PrimaryGeneratedColumn('uuid')</code></p>
<p class="code2"><code class="calibre7">task_id: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 30, nullable: false, unique: true })</code></p>
<p class="code2"><code class="calibre7">name: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ length: 500 })</code></p>
<p class="code2"><code class="calibre7">description: string;</code></p>
<p class="code2a"><code class="calibre7">@Column()</code></p>
<p class="code2"><code class="calibre7">@ManyToOne(() =&gt; Projects, (projectData) =&gt; projectData.project_id)</code></p>
<p class="code2"><code class="calibre7">@JoinColumn({ name: 'project_id' })</code></p>
<p class="code2"><code class="calibre7">project_id: string;</code></p>
<p class="code2a"><code class="calibre7"><a id="page134"/>@Column()</code></p>
<p class="code2"><code class="calibre7">@ManyToOne (() =&gt; Users, (userData) =&gt; userData.user_id)</code></p>
<p class="code2"><code class="calibre7">@JoinColumn({ name: 'user_id' })</code></p>
<p class="code2"><code class="calibre7">user_id: string;</code></p>
<p class="code2a"><code class="calibre7">@Column()</code></p>
<p class="code2"><code class="calibre7">estimated_start_time: Date;</code></p>
<p class="code2a"><code class="calibre7">@Column()</code></p>
<p class="code2"><code class="calibre7">estimated_end_time: Date;</code></p>
<p class="code2a"><code class="calibre7">@Column()</code></p>
<p class="code2"><code class="calibre7">actual_start_time: Date;</code></p>
<p class="code2a"><code class="calibre7">@Column()</code></p>
<p class="code2"><code class="calibre7">actual_end_time: Date;</code></p>
<p class="code2a"><code class="calibre7">@Column({</code></p>
<p class="code3"><code class="calibre7">type: 'enum',</code></p>
<p class="code3"><code class="calibre7">enum: Priority, // Use the enum type here</code></p>
<p class="code3"><code class="calibre7">default: Priority.Low, // Set a default value as Low</code></p>
<p class="code2"><code class="calibre7">})</code></p>
<p class="code2"><code class="calibre7">priority: Priority;</code></p>
<p class="code2a"><code class="calibre7">@Column({</code></p>
<p class="code3"><code class="calibre7">type: 'enum',</code></p>
<p class="code3"><code class="calibre7">enum: Status, // Use the enum type here</code></p>
<p class="code3"><code class="calibre7">default: Status.NotStarted, // Set a default value as Not-Started</code></p>
<p class="code2"><code class="calibre7">})</code></p>
<p class="code2"><code class="calibre7">status: Status;</code></p>
<p class="code2a"><code class="calibre7">@Column('text', { array: true, default: [] })</code></p>
<p class="code2"><code class="calibre7">supported_files: string[];</code></p>
<p class="code2a"><code class="calibre7">@CreateDateColumn()</code></p>
<p class="code2"><code class="calibre7">created_at: Date;</code></p>
<p class="code2a"><code class="calibre7">@UpdateDateColumn()</code></p>
<p class="code2"><code class="calibre7">updated_at: Date;</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page135"/>The code imports necessary decorators from TypeORM, including <code class="calibre7">Entity</code>, <code class="calibre7"><strong class="calibre3">PrimaryGeneratedColumn</strong></code>, <code class="calibre7"><strong class="calibre3">Column</strong></code>, <code class="calibre7"><strong class="calibre3">CreateDateColumn</strong></code>, and <code class="calibre7"><strong class="calibre3">UpdateDateColumn</strong></code>. It also imports the <code class="calibre7"><strong class="calibre3">Users</strong></code> and <code class="calibre7"><strong class="calibre3">Projects</strong></code> entities, as they will be used to establish one-to-one relationships with the <code class="calibre7">Tasks</code> entity.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">Priority</strong></code> and <code class="calibre7"><strong class="calibre3">Status</strong></code> <code class="calibre7"><strong class="calibre3">enums</strong></code> define possible values for the status and priority columns of the <code class="calibre7"><strong class="calibre3">Tasks</strong></code> entity. By using <code class="calibre7"><strong class="calibre3">enums</strong></code>, we ensure that only specific predefined values can be assigned to these columns.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">@ManyToOne</strong></code> decorators establish many-to-one relationships with the <code class="calibre7"><strong class="calibre3">Projects</strong></code> and Users entities. The first argument of <code class="calibre7"><strong class="calibre3">@ManyToOne</strong></code> is a function that returns the related <code class="calibre7"><strong class="calibre3">entity</strong></code> class. This signifies that many tasks can be associated with one project or user. This second argument denotes the inverse side of the relationship, indicating the properties <code class="calibre7"><strong class="calibre3">project_id</strong></code> and <code class="calibre7"><strong class="calibre3">user_id</strong></code> in the <code class="calibre7"><strong class="calibre3">Projects</strong></code> and <code class="calibre7"><strong class="calibre3">Users</strong></code> entities, respectively, which reference the tasks entity. The <code class="calibre7"><strong class="calibre3">@JoinColumn</strong></code> decorator specifies the name of the foreign key column in the <code class="calibre7"><strong class="calibre3">tasks</strong></code> table that links to the related <code class="calibre7"><strong class="calibre3">Projects</strong></code> and <code class="calibre7"><strong class="calibre3">Users</strong></code> entities.</p>
<h1 class="sec" id="s131"><a href="toc.xhtml#s131a" class="calibre6">Comment Entity</a></h1>
<p class="nonindent">Let us define the comment entity in <code class="calibre7"><strong class="calibre3">comments_entity.ts</strong></code> with the following code:</p>
<p class="code"><code class="calibre7">// comments_entity.ts</code></p>
<p class="code"><code class="calibre7">import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn,</code></p>
<p class="code1"><code class="calibre7">UpdateDateColumn, JoinColumn, OneToOne } from 'typeorm';</code></p>
<p class="code1"><code class="calibre7">import { Users } from '../users/users_entity';</code></p>
<p class="code1"><code class="calibre7">import { Tasks } from '../tasks/tasks_entity';</code></p>
<p class="code"><code class="calibre7">@Entity()</code></p>
<p class="code1"><code class="calibre7">export class Comments {</code></p>
<p class="code2"><code class="calibre7">@PrimaryGeneratedColumn('uuid')</code></p>
<p class="code2"><code class="calibre7">comment_id: string;</code></p>
<p class="code2a"><code class="calibre7">@Column({ type: 'text' })</code></p>
<p class="code2"><code class="calibre7">comment: string;</code></p>
<p class="code2a"><code class="calibre7">@OneToOne(() =&gt; Users, (userData) =&gt; userData.user_id)</code></p>
<p class="code2"><code class="calibre7">@JoinColumn({ name: 'user_id' })</code></p>
<p class="code2"><code class="calibre7">user_id: string;</code></p>
<p class="code2a"><code class="calibre7">@OneToOne(() =&gt; Tasks, (taskData) =&gt; taskData.task_id)</code></p>
<p class="code2a"><code class="calibre7">@JoinColumn({ name: 'task_id' })</code></p>
<p class="code2"><code class="calibre7">task_id: string;</code></p>
<p class="code2a"><code class="calibre7">@Column('text', { array: true, default: [] })</code></p>
<p class="code2"><code class="calibre7">supported_files: string[];</code></p>
<p class="code2a"><code class="calibre7">@CreateDateColumn()</code></p>
<p class="code2"><code class="calibre7">created_at: Date;</code></p>
<p class="code2a"><code class="calibre7">@UpdateDateColumn()</code></p>
<p class="code2"><code class="calibre7">updated_at: Date;</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page136"/>The provided code includes essential TypeORM decorators like <code class="calibre7">Entity</code>, <code class="calibre7"><strong class="calibre3">PrimaryGeneratedColumn</strong></code>, <code class="calibre7"><strong class="calibre3">Column</strong></code>, <code class="calibre7"><strong class="calibre3">CreateDateColumn</strong></code>, and <code class="calibre7"><strong class="calibre3">UpdateDateColumn</strong></code>. Additionally, it imports the <code class="calibre7">Users</code> and <code class="calibre7">Tasks</code> entities, which play a crucial role in setting up one-to-one relationships with the <code class="calibre7"><strong class="calibre3">Comments</strong></code> entity.</p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">@PrimaryGeneratedColumn('uuid</strong>'<strong class="calibre3">)</strong></code> decorator specifies that the <code class="calibre7"><strong class="calibre3">comment_id</strong></code> property is the primary key of the comments table and will be automatically generated as a <code class="calibre7">UUID</code> when a new comment is inserted. The comment property is of type text, allowing it to store larger textual data.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">@OneToOne</strong></code> decorators establish one-to-one relationships with the <code class="calibre7">Users</code> and <code class="calibre7">Tasks</code> entities. The first argument of <code class="calibre7"><strong class="calibre3">@OneToOne</strong></code> is a function that returns the related <code class="calibre7"><strong class="calibre3">entity</strong></code> class. Meanwhile, the second argument defines the inverse side of the relationship, referring to the properties <code class="calibre7"><strong class="calibre3">user_id</strong></code> and <code class="calibre7"><strong class="calibre3">task_id</strong></code> in the <code class="calibre7">Users</code> and <code class="calibre7">Tasks</code> entities, respectively. The <code class="calibre7"><strong class="calibre3">@JoinColumn</strong></code> decorator then specifies the name of the foreign key column in the <code class="calibre7"><strong class="calibre3">comments</strong></code> table, which references the related <code class="calibre7">Users</code> and <code class="calibre7">Tasks</code> entities.</p>
<p class="nonindent">The <code class="calibre7"><strong class="calibre3">supported_files</strong></code> property is an array of strings (<code class="calibre7"><strong class="calibre3">string[]</strong></code>) which will store the urls of different files in the array.</p>
<p class="nonindent">After defining all the entities, their purpose remains incomplete without synchronization to the database. So, let us synchronize them with the database and automatically create the corresponding tables. To achieve this, we can update the <code class="calibre7"><strong class="calibre3">db.ts</strong></code> file with the following code:</p>
<p class="code"><code class="calibre7">// db.ts</code></p>
<p class="code"><code class="calibre7">import { DataSource } from 'typeorm';</code></p>
<p class="code1"><code class="calibre7">import { IServerConfig } from './config';</code></p>
<p class="code1"><code class="calibre7">import * as config from '../../server_config.json';</code></p>
<p class="code1"><code class="calibre7">import { Roles } from '../components/roles/roles_entity';</code></p>
<p class="code1"><code class="calibre7"><a id="page137"/>import { Users } from '../components/users/users_entity';</code></p>
<p class="code1"><code class="calibre7">import { Projects } from '../components/projects/projects_entity';</code></p>
<p class="code1"><code class="calibre7">import { Tasks } from '../components/tasks/tasks_entity';</code></p>
<p class="code1"><code class="calibre7">import { Comments } from '../components/comments/comments_entity';</code></p>
<p class="code"><code class="calibre7">export class DatabaseUtil {</code></p>
<p class="code2"><code class="calibre7">public server_config: IServerConfig = config;</code></p>
<p class="code2a"><code class="calibre7">constructor() {</code></p>
<p class="code5"><code class="calibre7">this.connectDatabase();</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2a"><code class="calibre7">private connectDatabase() {</code></p>
<p class="code5"><code class="calibre7">try {</code></p>
<p class="code6"><code class="calibre7">const db_config = this.server_config.db_config;</code></p>
<p class="code6"><code class="calibre7">const AppDataSource = new DataSource({</code></p>
<p class="code7"><code class="calibre7">type: 'postgres',</code></p>
<p class="code7"><code class="calibre7">host: db_config.host,</code></p>
<p class="code7"><code class="calibre7">port: db_config.port,</code></p>
<p class="code7"><code class="calibre7">username: db_config.username,</code></p>
<p class="code7"><code class="calibre7">password: db_config.password,</code></p>
<p class="code7"><code class="calibre7">database: db_config.dbname,</code></p>
<p class="code7"><code class="calibre7">entities: [Roles, Users, Projects, Tasks, Comments],</code></p>
<p class="code7"><code class="calibre7">synchronize: true,</code></p>
<p class="code7"><code class="calibre7">logging: false,</code></p>
<p class="code6"><code class="calibre7">});</code></p>
<p class="code6"><code class="calibre7">AppDataSource.initialize()</code></p>
<p class="code7"><code class="calibre7">.then(() =&gt; {</code></p>
<p class="code8"><code class="calibre7">console.log('Connected to the database');</code></p>
<p class="code7"><code class="calibre7">})</code></p>
<p class="code7"><code class="calibre7">.catch((error) =&gt; console.log(error));</code></p>
<p class="code5"><code class="calibre7">} catch (error) {</code></p>
<p class="code6"><code class="calibre7">console.error('Error connecting to the database:', error);</code></p>
<p class="code5"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">The entities array should include all the entity classes you have defined (<code class="calibre7"><strong class="calibre3">Users</strong></code>, <code class="calibre7"><strong class="calibre3">Projects</strong></code>, <code class="calibre7"><strong class="calibre3">Tasks</strong></code>, and <code class="calibre7"><strong class="calibre3">Comments</strong></code>) to be synchronized with the database.</p>
<p class="nonindent"><a id="page138"/>Setting <code class="calibre7"><strong class="calibre3">synchronize:</strong></code> <code class="calibre7"><strong class="calibre3">true</strong></code> ensures that the database tables are automatically created or updated to match the defined entities.</p>
<p class="nonindent">Once you run this code, the defined entities will be synchronized with the database, and the corresponding tables will be created or updated accordingly.</p>
<h1 class="sec" id="s132"><a href="toc.xhtml#s132a" class="calibre6">Routes</a></h1>
<p class="nonindent">Routing plays a crucial role in modern application development. Routing provides a structured way to navigate through an application. By establishing routes, users can seamlessly interact with distinct sections of the application through designated URLs.</p>
<p class="nonindent">Routing is basically a way to respond to any request coming to a specific endpoint based on method and parameters.</p>
<p class="nonindent">Route Definition follows this pattern:</p>
<p class="code"><code class="calibre7">app.METHOD(PATH, HANDLER)</code></p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">"app"</strong></code> refers to an instance of <code class="calibre7">Express</code>.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">"METHOD"</strong></code> pertains to an <code class="calibre7">HTTP</code> request method, written in lowercase.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">"PATH"</strong></code> designates a specific server path.</p>
<p class="nonindent"><code class="calibre7"><strong class="calibre3">"HANDLER"</strong></code> represents the function executed upon matching the route.</p>
<p class="nonindent">Routes consist of basically four parts:</p>
<ul class="bull">
<li class="calibre9"><strong class="calibre3">URL Paths</strong>: 
<p class="nonindent">Each route definition includes a URL path or pattern that users can enter in the browser’s address bar or click as links.</p>
<p class="nonindent">For example, <code class="calibre7"><strong class="calibre3">"/api/login"</strong></code></p></li>
<li class="calibre9"><strong class="calibre3">HTTP Method</strong>:
<p class="nonindent">Routes specify the HTTP methods (<code class="calibre7"><strong class="calibre3">GET</strong></code>, <code class="calibre7"><strong class="calibre3">POST</strong></code>, <code class="calibre7"><strong class="calibre3">PUT</strong></code>, <code class="calibre7"><strong class="calibre3">DELETE</strong></code>, and so on) that are allowed for each path. Different HTTP methods trigger different actions in the application. For example, a <code class="calibre7">GET</code> request might retrieve data, while a <code class="calibre7">POST</code> request might submit data. You can explore it in detail through this link <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods</a></p></li>
<li class="calibre9"><strong class="calibre3">Route Handlers</strong>: 
<p class="nonindent">For each URL path, there is a corresponding handler function or controller that defines the actual logic for functionality to be executed. This can include rendering a specific view, fetching data from a database, processing user input, and more.</p></li>
<li class="calibre9"><strong class="calibre3"><a id="page139"/>Route Parameters</strong>: Some paths might include dynamics that act as placeholders for specific values. These are often indicated with a colon, like <code class="calibre7"><strong class="calibre3">":id"</strong></code>. 
<p class="nonindent">For example, <code class="calibre7"><strong class="calibre3">"/users/:id"</strong></code> could represent a user’s profile page, where <code class="calibre7"><strong class="calibre3">":id"</strong></code> is replaced with the actual user’s ID.</p></li>
</ul>
<p class="nonindent">Let us construct routes following the outlined structure:</p>
<p class="code"><code class="calibre7">├── routes</code></p>
<p class="code1"><code class="calibre7">│   └── index.ts  </code></p>
<p class="code1"><code class="calibre7">├── components</code></p>
<p class="code3"><code class="calibre7">├── roles</code></p>
<p class="code3"><code class="calibre7">│   └── roles_entity.ts</code></p>
<p class="code3"><code class="calibre7">│   └── roles_routes.ts</code></p>
<p class="code3"><code class="calibre7">│   └── roles_controller.ts</code></p>
<p class="code3"><code class="calibre7">├── users</code></p>
<p class="code3"><code class="calibre7">│   └── users_entity.ts</code></p>
<p class="code3"><code class="calibre7">│   └── users_routes.ts</code></p>
<p class="code3"><code class="calibre7">│   └── users_controller.ts</code></p>
<p class="code3"><code class="calibre7">├── projects</code></p>
<p class="code3"><code class="calibre7">│   └── projects_entity.ts</code></p>
<p class="code3"><code class="calibre7">│   └── projects_routes.ts</code></p>
<p class="code3"><code class="calibre7">│   └── projects_controller.ts</code></p>
<p class="code3"><code class="calibre7">├── tasks</code></p>
<p class="code3"><code class="calibre7">│   └── tasks_entity.ts</code></p>
<p class="code3"><code class="calibre7">│   └── tasks_routes.ts</code></p>
<p class="code3"><code class="calibre7">│   └── tasks_controller.ts</code></p>
<p class="code4"><code class="calibre7">|── comments</code></p>
<p class="code4"><code class="calibre7">|    └── comments_entity.ts</code></p>
<p class="code4"><code class="calibre7">|    └── comments_routes.ts</code></p>
<p class="code4"><code class="calibre7">|    └── comments_controller.ts</code></p>
<p class="nonindent">By the preceding structure, we will establish a <code class="calibre7"><strong class="calibre3">"routes"</strong></code> directory, containing an <code class="calibre7"><strong class="calibre3">"index.ts"</strong></code> file, within the <code class="calibre7"><strong class="calibre3">"src"</strong></code> directory. This <code class="calibre7"><strong class="calibre3">"index.ts"</strong></code> file will function as the root for the individual routes of each module. We will also create all individual routes and controller files for each component and update them as we develop APIs step by step.</p>
<p class="nonindent">Each module encompasses functionalities for adding, updating, retrieving, and deleting, along with obtaining specific details about a particular data. Each route can cover CRUD (<code class="calibre7"><strong class="calibre3">Create</strong></code>, <code class="calibre7"><strong class="calibre3">Read</strong></code>, <code class="calibre7"><strong class="calibre3">Update</strong></code>, <code class="calibre7"><strong class="calibre3">Delete</strong></code>) operations having a basepoint as <code class="calibre7"><strong class="calibre3">"/api/componentname"</strong></code> where <code class="calibre7"><strong class="calibre3">componentname</strong></code> can be <code class="calibre7"><strong class="calibre3">roles</strong></code>, <code class="calibre7"><strong class="calibre3">users</strong></code>, <code class="calibre7"><strong class="calibre3">projects</strong></code>, <code class="calibre7"><strong class="calibre3">task</strong></code> and <code class="calibre7"><strong class="calibre3">comments</strong></code>:</p>
<ul class="bull">
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Create</strong></code>: This route allows the addition of new data. It is typically associated with an HTTP <a id="page140"/><code class="calibre7"><strong class="calibre3">POST</strong></code> request to a path ex. <code class="calibre7"><strong class="calibre3">"/api/componentname"</strong></code>.</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Update</strong></code>: The update route lets you modify existing data. It is triggered by an HTTP <code class="calibre7"><strong class="calibre3">PUT</strong></code> request to a path like <code class="calibre7"><strong class="calibre3">"/api/componentname/:id"</strong></code>, where <code class="calibre7"><strong class="calibre3">":id"</strong></code> represents the specific entries identifier.</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Retrieve All</strong></code>: This route enables the retrieval of a list of all roles. It is often invoked via an HTTP <code class="calibre7"><strong class="calibre3">GET</strong></code> request to the <code class="calibre7"><strong class="calibre3">"/api/componentname"</strong></code> path.</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Retrieve Specific</strong></code>: This route is used to fetch details about a specific role. It is initiated by an HTTP <code class="calibre7">GET</code> request to a path like <code class="calibre7"><strong class="calibre3">"/api/componentname/:id"</strong></code>.</li>
<li class="calibre9"><code class="calibre7"><strong class="calibre3">Delete</strong></code>: The delete route allows the removal of roles. It is typically triggered by an HTTP <code class="calibre7">DELETE</code> request to a path like <code class="calibre7"><strong class="calibre3">"/api/componentname/:id"</strong></code>.</li>
</ul>
<h1 class="sec" id="s133"><a href="toc.xhtml#s133a" class="calibre6">Role Routes</a></h1>
<p class="nonindent">Now, update <code class="calibre7"><strong class="calibre3">role_controller.ts</strong></code> file with empty skeleton functions.</p>
<p class="code"><code class="calibre7">// role_controller.ts</code></p>
<p class="code"><code class="calibre7"><a id="page141"/>export class RoleController {</code></p>
<p class="code2a"><code class="calibre7">public addHandler() {</code></p>
<p class="code5"><code class="calibre7">// addHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getAllHandler() {</code></p>
<p class="code5"><a id="page142"/><code class="calibre7">// getAllHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getDetailsHandler() {</code></p>
<p class="code5"><code class="calibre7">// getDetailsHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async updateHandler() {</code></p>
<p class="code5"><code class="calibre7">// updateHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async deleteHandler() {</code></p>
<p class="code5"><code class="calibre7">// deleteHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">Afterwards, modified <code class="calibre7"><strong class="calibre3">role_routes.ts</strong></code> with the following code:</p>
<p class="code"><code class="calibre7">// role_routes.ts</code></p>
<p class="code"><code class="calibre7">import { Express } from 'express';</code></p>
<p class="code1"><code class="calibre7">import { RoleController } from './roles_controller';</code></p>
<p class="code1"><code class="calibre7">export class RoleRoutes {</code></p>
<p class="code2a"><code class="calibre7">private baseEndPoint = '/api/roles';</code></p>
<p class="code2a"><code class="calibre7">constructor(app: Express) {</code></p>
<p class="code3a"><code class="calibre7">const controller = new RoleController();</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint)</code></p>
<p class="code5"><code class="calibre7">.get(controller.getAllHandler)</code></p>
<p class="code5"><code class="calibre7">.post(controller.addHandler);</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint + '/:id')</code></p>
<p class="code5"><code class="calibre7">.get(controller.getDetailsHandler)</code></p>
<p class="code5"><code class="calibre7">.put(controller.updateHandler)</code></p>
<p class="code5"><code class="calibre7">.delete(controller.deleteHandler);</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent">Similarly, we will update all controller files by changing class names, such as <code class="calibre7"><strong class="calibre3">UserController</strong></code>, <code class="calibre7"><strong class="calibre3">ProjectController</strong></code>, <code class="calibre7"><strong class="calibre3">TaskController</strong></code>, and <code class="calibre7"><strong class="calibre3">CommentController</strong></code>, and import them in respective route files with modifying basepoint.</p>
<h1 class="sec" id="s134"><a href="toc.xhtml#s134a" class="calibre6">User Routes</a></h1>
<p class="nonindent">Let us modify <code class="calibre7"><strong class="calibre3">users_controller.ts</strong></code> and <code class="calibre7"><strong class="calibre3">users_routes.ts</strong></code> files, respectively, as follows:</p>
<p class="code"><code class="calibre7">// users_controller.ts</code></p>
<p class="code"><code class="calibre7">export class UserController {</code></p>
<p class="code2a"><code class="calibre7">public addHandler() {</code></p>
<p class="code3"><code class="calibre7">// addHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getAllHandler() {</code></p>
<p class="code3"><code class="calibre7">// getAllHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getDetailsHandler() {</code></p>
<p class="code3"><code class="calibre7">// getDetailsHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async updateHandler() {</code></p>
<p class="code3"><code class="calibre7">// updateHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async deleteHandler() {</code></p>
<p class="code3"><code class="calibre7">// deleteHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="code"><code class="calibre7">// users_routes.ts</code></p>
<p class="code"><code class="calibre7">import { Express } from 'express';</code></p>
<p class="code1"><code class="calibre7">import { UserController } from './users_controller';</code></p>
<p class="code"><code class="calibre7">export class UserRoutes {</code></p>
<p class="code2a"><code class="calibre7">private baseEndPoint = '/api/users';</code></p>
<p class="code2a"><code class="calibre7">constructor(app: Express) {</code></p>
<p class="code3a"><code class="calibre7">const controller = new UserController();</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint)</code></p>
<p class="code5"><code class="calibre7">.get(controller.getAllHandler)</code></p>
<p class="code5"><code class="calibre7">.post(controller.addHandler);</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint + '/:id')</code></p>
<p class="code5"><code class="calibre7">.get(controller.getDetailsHandler)</code></p>
<p class="code5"><code class="calibre7">.put(controller.updateHandler)</code></p>
<p class="code5"><code class="calibre7">.delete(controller.deleteHandler);</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<h1 class="sec" id="s135"><a id="page143" class="calibre6"/><a href="toc.xhtml#s135a" class="calibre6">Project Routes</a></h1>
<p class="nonindent">Let us modify <code class="calibre7"><strong class="calibre3">projects_controller.ts</strong></code> and <code class="calibre7"><strong class="calibre3">projects_routes.ts</strong></code> files, respectively, as follows:</p>
<p class="code"><code class="calibre7">// project_controller.ts</code></p>
<p class="code"><code class="calibre7">export class ProjectController {</code></p>
<p class="code2a"><code class="calibre7">public addHandler() {</code></p>
<p class="code3"><code class="calibre7">// addHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getAllHandler() {</code></p>
<p class="code3"><code class="calibre7">// getAllHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getDetailsHandler() {</code></p>
<p class="code3"><code class="calibre7">// getDetailsHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async updateHandler() {</code></p>
<p class="code3"><code class="calibre7">// updateHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async deleteHandler() {</code></p>
<p class="code3"><code class="calibre7">// deleteHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="code"><code class="calibre7">// projects_routes.ts</code></p>
<p class="code"><code class="calibre7">import { Express } from 'express';</code></p>
<p class="code1"><code class="calibre7">import { ProjectController } from './projects_controller';</code></p>
<p class="code"><code class="calibre7">export class ProjectRoutes {</code></p>
<p class="code2a"><code class="calibre7">private baseEndPoint = '/api/projects';</code></p>
<p class="code2a"><code class="calibre7"><a id="page144"/>constructor(app: Express) {</code></p>
<p class="code3a"><code class="calibre7">const controller = new ProjectController();</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint)</code></p>
<p class="code5"><code class="calibre7">.get(controller.getAllHandler)</code></p>
<p class="code5"><code class="calibre7">.post(controller.addHandler);</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint + '/:id')</code></p>
<p class="code5"><code class="calibre7">.get(controller.getDetailsHandler)</code></p>
<p class="code5"><code class="calibre7">.put(controller.updateHandler)</code></p>
<p class="code5"><code class="calibre7">.delete(controller.deleteHandler);</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<h1 class="sec" id="s136"><a href="toc.xhtml#s136a" class="calibre6">Task Routes</a></h1>
<p class="nonindent">Let us modify <code class="calibre7"><strong class="calibre3">tasks_controller.ts</strong></code> and <code class="calibre7"><strong class="calibre3">tasks_routes.ts</strong></code> files, respectively, as follows:</p>
<p class="code"><a id="page145"/><code class="calibre7">// tasks_controller.ts</code></p>
<p class="code"><code class="calibre7">export class TaskController {</code></p>
<p class="code2a"><code class="calibre7">public addHandler() {</code></p>
<p class="code3"><code class="calibre7">// addHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getAllHandler() {</code></p>
<p class="code3"><code class="calibre7">// getAllHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getDetailsHandler() {</code></p>
<p class="code3"><code class="calibre7">// getDetailsHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async updateHandler() {</code></p>
<p class="code3"><code class="calibre7">// updateHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async deleteHandler() {</code></p>
<p class="code3"><code class="calibre7">// deleteHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="code"><code class="calibre7">// tasks_routes.ts</code></p>
<p class="code"><code class="calibre7">import { Express } from 'express';</code></p>
<p class="code1"><code class="calibre7">import { TaskController } from './tasks_controller';</code></p>
<p class="code"><code class="calibre7">export class TaskRoutes {</code></p>
<p class="code2a"><code class="calibre7">private baseEndPoint = '/api/tasks';</code></p>
<p class="code2a"><code class="calibre7">constructor(app: Express) {</code></p>
<p class="code3a"><code class="calibre7">const controller = new TaskController();</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint)</code></p>
<p class="code5"><code class="calibre7">.get(controller.getAllHandler)</code></p>
<p class="code5"><code class="calibre7">.post(controller.addHandler);</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint + '/:id')</code></p>
<p class="code5"><code class="calibre7">.get(controller.getDetailsHandler)</code></p>
<p class="code5"><code class="calibre7">.put(controller.updateHandler)</code></p>
<p class="code5"><code class="calibre7">.delete(controller.deleteHandler);</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<h1 class="sec" id="s137"><a href="toc.xhtml#s137a" class="calibre6">Comment Routes</a></h1>
<p class="nonindent">Let us modify <code class="calibre7"><strong class="calibre3">comments_controller.ts</strong></code> and <code class="calibre7"><strong class="calibre3">comments_routes.ts</strong></code> files, respectively, as follows:</p>
<p class="code"><code class="calibre7">// comments_controller.ts</code></p>
<p class="code"><code class="calibre7">export class CommentController {</code></p>
<p class="code2a"><code class="calibre7">public addHandler() {</code></p>
<p class="code3"><a id="page146"/><code class="calibre7">// addHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getAllHandler() {</code></p>
<p class="code3"><code class="calibre7">// getAllHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public getDetailsHandler() {</code></p>
<p class="code3"><code class="calibre7">// getDetailsHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async updateHandler() {</code></p>
<p class="code3"><code class="calibre7">// updateHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">public async deleteHandler() {</code></p>
<p class="code3"><code class="calibre7">// deleteHandler</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="code"><code class="calibre7">// comments_routes.ts</code></p>
<p class="code"><code class="calibre7">import { Express } from 'express';</code></p>
<p class="code1"><code class="calibre7">import { CommentController } from './comments_controller';</code></p>
<p class="code"><code class="calibre7">export class CommentRoutes {</code></p>
<p class="code2a"><code class="calibre7">private baseEndPoint = '/api/comments';</code></p>
<p class="code2a"><code class="calibre7">constructor(app: Express) {</code></p>
<p class="code3a"><code class="calibre7">const controller = new CommentController();</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint)</code></p>
<p class="code5"><code class="calibre7">.get(controller.getAllHandler)</code></p>
<p class="code5"><code class="calibre7">.post(controller.addHandler);</code></p>
<p class="code3a"><code class="calibre7">app.route(this.baseEndPoint + '/:id')</code></p>
<p class="code5"><code class="calibre7">.get(controller.getDetailsHandler)</code></p>
<p class="code5"><code class="calibre7">.put(controller.updateHandler)</code></p>
<p class="code5"><code class="calibre7">.delete(controller.deleteHandler);</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page147"/>We define all routes based on components individually. However, these routes need to be initialized from the Express server, so import all routes in one file and call it from the Express server.</p>
<p class="nonindent">Create <code class="calibre7"><strong class="calibre3">routes</strong></code> directory and<code class="calibre7"> <strong class="calibre3">index.ts</strong></code> with the following code:</p>
<p class="code"><code class="calibre7">// index.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">import { Express, Router } from 'express';</code></p>
<p class="code1"><code class="calibre7">import { RoleRoutes } from '../components/roles/roles_routes';</code></p>
<p class="code1"><code class="calibre7">import { UserRoutes } from '../components/users/users_routes';</code></p>
<p class="code1"><code class="calibre7">import { ProjectRoutes } from '../components/projects/projects_routes';</code></p>
<p class="code1"><code class="calibre7">import { TaskRoutes } from '../components/tasks/tasks_routes';</code></p>
<p class="code1"><code class="calibre7">import { CommentRoutes } from '../components/comments/comments_routes';</code></p>
<p class="code"><code class="calibre7">export class Routes {</code></p>
<p class="code2"><code class="calibre7">public router: Router;</code></p>
<p class="code2a"><code class="calibre7">constructor(app: Express) {</code></p>
<p class="code5a"><code class="calibre7">const routeClasses = [</code></p>
<p class="code6"><code class="calibre7">RoleRoutes,</code></p>
<p class="code6"><code class="calibre7">UserRoutes,</code></p>
<p class="code6"><code class="calibre7">ProjectRoutes,</code></p>
<p class="code6"><code class="calibre7">TaskRoutes,</code></p>
<p class="code6"><code class="calibre7">CommentRoutes</code></p>
<p class="code5"><code class="calibre7">];</code></p>
<p class="code5a"><code class="calibre7">for (const routeClass of routeClasses) {</code></p>
<p class="code6"><code class="calibre7">try {</code></p>
<p class="code7"><code class="calibre7">new routeClass(app);</code></p>
<p class="code7"><code class="calibre7">console.log(`Router : ${routeClass.name} - Connected`);</code></p>
<p class="code5"><code class="calibre7">} catch (error) {</code></p>
<p class="code6"><code class="calibre7">console.log(`Router : ${routeClass.name} - Failed`);</code></p>
<p class="code5"><code class="calibre7">}</code></p>
<p class="code3"><code class="calibre7">}</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page148"/>Afterward, modify <code class="calibre7"><strong class="calibre3">express_server.ts</strong></code> with import <code class="calibre7"><strong class="calibre3">routes</strong></code> in the <code class="calibre7">app</code>:</p>
<p class="code"><code class="calibre7">// express_server.ts</code></p>
<p class="code1"><code class="calibre7"/></p>
<p class="code1"><code class="calibre7">import expressfrom 'express';</code></p>
<p class="code1"><code class="calibre7">import { IServerConfig } from './utils/config';</code></p>
<p class="code1"><code class="calibre7">import * as config from '../server_config.json';</code></p>
<p class="code1"><code class="calibre7">import { Routes } from './routes';</code></p>
<p class="code"><code class="calibre7">export class ExpressServer {</code></p>
<p class="code2a"><code class="calibre7">private static server = null;</code></p>
<p class="code2"><code class="calibre7">public server_config: IServerConfig = config;</code></p>
<p class="code2"><code class="calibre7">constructor() {</code></p>
<p class="code3"><code class="calibre7">const port = this.server_config.port ?? 3000;</code></p>
<p class="code3a"><code class="calibre7">// initialize express app</code></p>
<p class="code3"><code class="calibre7">const app = express();</code></p>
<p class="code3a"><code class="calibre7">app.use(bodyParser.urlencoded({ extended: false }));</code></p>
<p class="code3"><code class="calibre7">app.use(bodyParser.json());</code></p>
<p class="code3a"><code class="calibre7">app.get('/ping', (req, res) =&gt; {</code></p>
<p class="code5"><code class="calibre7">res.send('pong');</code></p>
<p class="code3"><code class="calibre7">});</code></p>
<p class="code3a"><code class="calibre7">const routes = new Routes(app);</code></p>
<p class="code3"><code class="calibre7">if (routes) {</code></p>
<p class="code5"><code class="calibre7">console.log('Server Routes started for server');</code></p>
<p class="code3"><code class="calibre7"> }</code></p>
<p class="code3a"><code class="calibre7">ExpressServer.server = app.listen(port, () =&gt; {</code></p>
<p class="code5"><code class="calibre7">console.log(`Server is running on port ${port} with pid =</code></p>
<p class="code5"><code class="calibre7">${process.pid}`);</code></p>
<p class="code3"><code class="calibre7">});</code></p>
<p class="code2a"><code class="calibre7">}</code></p>
<p class="code2a"><code class="calibre7">//close the express server for safe on uncaughtException</code></p>
<p class="code2"><code class="calibre7">public closeServer(): void {</code></p>
<p class="code3"><code class="calibre7">ExpressServer.server.close(() =&gt; {</code></p>
<p class="code5"><code class="calibre7">console.log('Server closed');</code></p>
<p class="code5"><code class="calibre7">process.exit(0);</code></p>
<p class="code3"><code class="calibre7">});</code></p>
<p class="code2"><code class="calibre7">}</code></p>
<p class="code1"><code class="calibre7">}</code></p>
<p class="nonindent"><a id="page149"/>While running the application, the following output will display in the terminal:</p>
<p class="nonindent">Output:</p>
<p class="code"><code class="calibre7">Router : RoleRoutes - Connected</code></p>
<p class="code1"><code class="calibre7">Router : UserRoutes - Connected</code></p>
<p class="code1"><code class="calibre7">Router : ProjectRoutes - Connected</code></p>
<p class="code1"><code class="calibre7">Router : TaskRoutes - Connected</code></p>
<p class="code1"><code class="calibre7">Router : CommentRoutes - Connected</code></p>
<p class="code1"><code class="calibre7">Server Routes started for server</code></p>
<p class="code1"><code class="calibre7">Server is running on port 5000 with pid = 251784</code></p>
<p class="code1"><code class="calibre7">Connected to the database</code></p>
<h1 class="sec" id="s138"><a href="toc.xhtml#s138a" class="calibre6">Conclusion</a></h1>
<p class="nonindent">At this moment, now our server is running with a database utility, all entities along with their routes.</p>
<p class="nonindent">We learned about the use of the cluster module, using TypeORM for our database connection and query needs. We have our entities with all required columns.</p>
<p class="nonindent">As of now, we have empty and un-implemented route functions. In the next chapters, we will take each entity and implement the API.</p>
<h1 class="sec" id="s139"><a id="page150" class="calibre6"/><a href="toc.xhtml#s139a" class="calibre6">Multiple Choice Questions</a></h1>
<ol class="num">
<li class="calibre9">What is the primary goal of any project management software, including the PMS (Project Management System) discussed here?
<ol class="alfa">
<li class="calibre9">To develop web applications</li>
<li class="calibre9">To allow individuals and teams to plan and execute tasks</li>
<li class="calibre9">To organize data effectively</li>
<li class="calibre9">To provide secure user login</li></ol></li>
<li class="calibre9">Which modules are considered must-have in the PMS system based on the defined tasks?
<ol class="alfa">
<li class="calibre9">User Module, Project Module, Task Module, and Comment Module</li>
<li class="calibre9">Planning Module, API Development Module, and Unit Testing Module</li>
<li class="calibre9">Communication Module, Deployment Module, and Database Design Module</li>
<li class="calibre9">API Caching Module, Project Reports Module, and User Profile Module</li></ol></li>
<li class="calibre9">What is the primary objective of normalization in database design?
<ol class="alfa">
<li class="calibre9">To increase data redundancy</li>
<li class="calibre9">To maintain data integrity and avoid data duplication</li>
<li class="calibre9">To slow down query performance</li>
<li class="calibre9">To increase the complexity of queries</li></ol></li>
<li class="calibre9">What role does the Role Table play in the PMS database?
<ol class="alfa">
<li class="calibre9">It defines the rights and permissions of users</li>
<li class="calibre9">It stores project-related data</li>
<li class="calibre9">It manages user profiles</li>
<li class="calibre9">It records project creation and modification times</li></ol></li>
<li class="calibre9">Which file is typically generated as a result of running <code class="calibre7"><strong class="calibre3">"</strong>npm init<strong class="calibre3">"</strong></code> for a Node.js project?
<ol class="alfa">
<li class="calibre9"><code class="calibre7">package-lock.json</code></li>
<li class="calibre9"><code class="calibre7">tsconfig.json</code></li>
<li class="calibre9"><code class="calibre7">server_config.json</code></li>
<li class="calibre9"><code class="calibre7">package.json</code></li></ol></li>
<li class="calibre9"><a id="page151"/>What does the <code class="calibre7"><strong class="calibre3">"</strong>tsconfig.json<strong class="calibre3">"</strong></code> file specify in a TypeScript project?
<ol class="alfa">
<li class="calibre9">The project’s description</li>
<li class="calibre9">The project’s dependencies</li>
<li class="calibre9">TypeScript compiler options and settings</li>
<li class="calibre9">The project’s test commands</li></ol></li>
<li class="calibre9">Which of the following decorators from TypeORM is used to mark a class as a TypeORM entity representing a database table?
<ol class="alfa">
<li class="calibre9"><code class="calibre7">@Entity()</code></li>
<li class="calibre9"><code class="calibre7">@Table()</code></li>
<li class="calibre9"><code class="calibre7">@Database()</code></li>
<li class="calibre9"><code class="calibre7">@Model()</code></li></ol></li>
<li class="calibre9">Which TypeScript feature is used to define and enforce specific predefined values for the <code class="calibre7"><strong class="calibre3">"</strong>status<strong class="calibre3">"</strong></code> and <code class="calibre7"><strong class="calibre3">"</strong>priority<strong class="calibre3">"</strong></code> columns in the <code class="calibre7"><strong class="calibre3">"</strong>Tasks<strong class="calibre3">"</strong></code> entity?
<ol class="alfa">
<li class="calibre9">Type assertions</li>
<li class="calibre9">Type inference</li>
<li class="calibre9">Enums</li>
<li class="calibre9">Generics</li></ol></li>
<li class="calibre9">What is the purpose of the <code class="calibre7">@JoinColumn</code> decorator in the <code class="calibre7"><strong class="calibre3">"</strong>Tasks<strong class="calibre3">"</strong></code> entity class?
<ol class="alfa">
<li class="calibre9">To specify the name of the entity class</li>
<li class="calibre9">To define a foreign key constraint</li>
<li class="calibre9">To specify the name of the foreign key column</li>
<li class="calibre9">To create a new table in the database</li></ol></li>
<li class="calibre9">How would you trigger the update route for modifying existing data in Express.js?
<ol class="alfa">
<li class="calibre9">Send an HTTP POST request to a path like <code class="calibre7"><strong class="calibre3">"</strong>/api/componentname<strong class="calibre3">"</strong></code></li>
<li class="calibre9">Send an HTTP PUT request to a path like <code class="calibre7"><strong class="calibre3">"</strong>/api/componentname/:id<strong class="calibre3">"</strong></code></li>
<li class="calibre9"><a id="page152"/>Send an HTTP GET request to a path like <code class="calibre7"><strong class="calibre3">"</strong>/api/componentname<strong class="calibre3">"</strong></code></li>
<li class="calibre9">Send an HTTP DELETE request to a path like <code class="calibre7"><strong class="calibre3">"</strong>/api/componentname/:id<strong class="calibre3">"</strong></code></li></ol></li>
</ol>
<h1 class="sec1" id="s140"><a href="toc.xhtml#s140a" class="calibre6">Answers</a></h1>
<ol class="num">
<li class="calibre9">b</li>
<li class="calibre9">a</li>
<li class="calibre9">b</li>
<li class="calibre9">a</li>
<li class="calibre9">d</li>
<li class="calibre9">c</li>
<li class="calibre9">a</li>
<li class="calibre9">c</li>
<li class="calibre9">c</li>
<li class="calibre9">b</li>
</ol>
<h1 class="sec" id="s141"><a href="toc.xhtml#s141a" class="calibre6">Further Reading</a></h1>
<p class="nonindent"><a href="https://www.postgresqltutorial.com">https://www.postgresqltutorial.com</a></p>
<p class="nonindent"><a href="https://typeorm.io">https://typeorm.io</a></p>
<p class="nonindent"><a href="https://www.npmjs.com/package/pg">https://www.npmjs.com/package/pg</a></p>
</article>
</body></html>