<html><head></head><body><div><h1 class="header-title">Extending Ionic with Angular Building Blocks</h1>
                
            
            
                
<p>In this chapter, we will cover the following tasks related to creating custom components, directives, and filters with Angular:</p>
<ul>
<li>Creating a custom pizza ordering component</li>
<li>Creating a custom username input directive</li>
<li>Creating a custom pipe</li>
<li>Creating a shared service to provide data to multiple pages</li>
<li>Reusing an existing page as an HTML element</li>
</ul>


            

            
        
    </div>



  
<div><h1 class="header-title">Introduction</h1>
                
            
            
                
<p>Most of Ionic's out-of-the-box features are actually prebuilt components. In this section, you will learn how to create your own custom component using the HTML template, which contains Ionic components as well.</p>
<p>Components actually define Angular. A component is no more than just a class with self-describing features. For example, <kbd>&lt;ul&gt;</kbd> is a component that you are already familiar with. Previously, you used various Ionic components, such as <kbd>&lt;ion-list&gt;</kbd> and <kbd>&lt;ion-item&gt;</kbd>. A component is a decorator (that is, <kbd>@Component</kbd>) to add metadata to a class to describe the following:</p>
<ul>
<li><strong>selector</strong>: This is the name that is to be used in the DOM (for example,<br/>
<kbd>&lt;my-component&gt;</kbd>)</li>
<li><strong>template or templateUrl</strong>: This refers to the way the component is rendered</li>
<li><strong>directives</strong>: This refers to a list of directive dependencies you plan to use inside<br/>
the component</li>
<li><strong>providers</strong>: This is a list of providers (that is, services) you plan to use inside<br/>
the component</li>
</ul>
<p>Of course, there are many other options, but the preceding four options are the most common ones.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Creating a custom pizza ordering component</h1>
                
            
            
                
<p>In this section, you will build an app to demonstrate a custom component with its private variables and template. Observe the following screenshot of a pizza ordering component:</p>
<div><img class="image-border" src="img/75111aef-b788-40a9-b6c3-b46b086ab9ee.png" style="width:18.67em;height:23.83em;" width="314" height="402"/></div>
<p>The user will not notice which area is part of the page, as opposed to being a self-contained component. Your custom component here is the only area where the list is <em>listening</em> to the Vegetarian check box:</p>
<div><img class="image-border" src="img/04de2bf0-8597-40cb-9e71-f79f091c1646.png" style="width:20.00em;height:15.83em;" width="301" height="241"/></div>


            

            
        
    </div>



  
<div><h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This app example could work either in a browser or on a physical device.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Perform the following instructions:</p>
<ol>
<li>Create a new <kbd>MyComponent</kbd> app using the <kbd>blank</kbd> template, as shown, and go into the <kbd>MyComponent</kbd> folder:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic start MyComponent blank 
$ cd MyComponent </strong></pre>
<ol start="2">
<li>Open the <kbd>./src/pages/home/home.html</kbd> file and replace the content with the following code:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-header&gt;<br/>  &lt;ion-navbar&gt;<br/>    &lt;ion-title&gt;<br/>      Pizza App<br/>    &lt;/ion-title&gt;<br/>  &lt;/ion-navbar&gt;<br/>&lt;/ion-header&gt;<br/><br/>&lt;ion-content padding&gt;<br/>  &lt;ion-card&gt;<br/>    &lt;ion-card-header&gt;<br/>      App Homepage<br/>    &lt;/ion-card-header&gt;<br/>    &lt;ion-card-content&gt;<br/>      Please start to order your pizza now!<br/>    &lt;/ion-card-content&gt;<br/>  &lt;/ion-card&gt;<br/>  &lt;my-component&gt;&lt;/my-component&gt;<br/>&lt;/ion-content&gt;</pre>
<p style="padding-left: 60px">This is your root page containing <kbd>&lt;my-component&gt;</kbd>, which will be defined later.</p>
<ol start="3">
<li>Open <kbd>./app/pages/home/home.ts</kbd> for editing globally with the following code:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/>import { NavController } from 'ionic-angular';<br/><br/>@Component({<br/>  selector: 'page-home',<br/>  templateUrl: 'home.html'<br/>})<br/>export class HomePage {<br/><br/>  constructor(public navCtrl: NavController) {<br/><br/>  }<br/><br/>}</pre>
<p style="padding-left: 60px">You simply have to declare <kbd>MyComponent</kbd> as a dependency. A component is basically just a directive with a template, (assuming you are familiar with the directive concept of Angular 1).</p>
<ol start="4">
<li>Now, let's create the component by first creating a directive, as illustrated in the following code:</li>
</ol>
<pre>    <strong>$ mkdir ./src/components</strong></pre>
<ol start="5">
<li>Create a <kbd>foo.ts</kbd> file in the <kbd>components</kbd> directory that you just created, as shown in the following code:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/><br/>@Component({<br/>  selector: 'my-component',<br/>  templateUrl: 'foo.html'<br/>})<br/>export class MyComponent {<br/>  public data: any = {myToggle: true};<br/><br/>  constructor() {}<br/>  isClicked(val) {<br/>    console.log('Vegetarian: ' + val);<br/>  }<br/><br/>}</pre>
<ol start="6">
<li>Create <kbd>foo.html</kbd> in the <kbd>./src/components</kbd> folder, as follows:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-list&gt;<br/>  &lt;ion-item&gt;<br/>    &lt;ion-label&gt;Vegetarian&lt;/ion-label&gt;<br/>    &lt;ion-toggle (click)="isClicked(data.myToggle)" [(ngModel)]="data.myToggle"&gt;&lt;/ion-toggle&gt;<br/>  &lt;/ion-item&gt;<br/>  &lt;ion-card *ngIf="data.myToggle"&gt;<br/>    &lt;ion-card-header&gt;<br/>      I only eat vegetarian foods<br/>    &lt;/ion-card-header&gt;<br/>    <br/>    &lt;ion-list&gt;<br/>      &lt;button ion-item&gt;<br/>        Mushroom<br/>      &lt;/button&gt;<br/>      &lt;button ion-item&gt;<br/>        Spinach<br/>      &lt;/button&gt;<br/>      &lt;button ion-item&gt;<br/>        Red Peppers<br/>      &lt;/button&gt;<br/>    &lt;/ion-list&gt;<br/><br/>  &lt;/ion-card&gt;<br/><br/>  &lt;ion-card *ngIf="!data.myToggle"&gt;<br/>    &lt;ion-card-header&gt;<br/>      I love meat<br/>    &lt;/ion-card-header&gt;<br/>    &lt;ion-list&gt;<br/>      &lt;button ion-item&gt;<br/>        Beef<br/>      &lt;/button&gt;<br/>      &lt;button ion-item&gt;<br/>        Chicken<br/>      &lt;/button&gt;<br/>      &lt;button ion-item&gt;<br/>        Sausage<br/>      &lt;/button&gt;<br/><br/>    &lt;/ion-list&gt;<br/>  &lt;/ion-card&gt;<br/><br/>&lt;/ion-list&gt;</pre>
<ol start="7">
<li>Modify <kbd>./src/app/app.module.ts</kbd>, as illustrated, so that you can declare <kbd>MyComponent</kbd>. Observe the following code:</li>
</ol>
<pre style="padding-left: 60px">import { BrowserModule } from '@angular/platform-browser';<br/>import { ErrorHandler, NgModule } from '@angular/core';<br/>import { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';<br/>import { SplashScreen } from '@ionic-native/splash-screen';<br/>import { StatusBar } from '@ionic-native/status-bar';<br/><br/>import { MyApp } from './app.component';<br/>import { HomePage } from '../pages/home/home';<br/>import { MyComponent } from '../components/foo/foo';<br/><br/>@NgModule({<br/>  declarations: [<br/>    MyApp,<br/>    HomePage,<br/>    MyComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    IonicModule.forRoot(MyApp)<br/>  ],<br/>  bootstrap: [IonicApp],<br/>  entryComponents: [<br/>    MyApp,<br/>    HomePage,<br/>    MyComponent<br/>  ],<br/>  providers: [<br/>    StatusBar,<br/>    SplashScreen,<br/>    {provide: ErrorHandler, useClass: IonicErrorHandler}<br/>  ]<br/>})<br/>export class AppModule {}</pre>
<ol start="8">
<li>Go to your Terminal and run the app using the following command:</li>
</ol>
<pre>    <strong>$ ionic serve</strong></pre>


            

            
        
    </div>



  
<div><h1 class="header-title">How it works...</h1>
                
            
            
                
<p>You may wonder why it's necessary to create a component just to toggle a list of pizza topping options. The answer is that this is just a demonstration of how you can compartmentalize your app using a component. The key things that you have done are as follows:</p>
<ul>
<li>You created a custom component, called <kbd>&lt;my-component&gt;</kbd>, which can be used anywhere, including outside your app.</li>
<li>The data within your component is completely private. This means that nobody else can access it without calling a method within your component's class.</li>
<li>You can add or change behaviors within your component without impacting on other areas outside the component.</li>
</ul>
<p>To create a component, you need to ensure that you import the <kbd>@Component</kbd> decorator, as shown, from Angular itself (and not from Ionic):</p>
<pre>import { Component } from '@angular/core'; 
 
@Component({ 
  selector: 'my-component', 
  templateUrl: 'foo.html' 
})</pre>
<p>In your <kbd>component</kbd> template, everything is local to what is inside the <kbd>component</kbd> class. So, you can bind the click event using <kbd>click</kbd>, as shown in the following code:</p>
<pre>  &lt;ion-item&gt; 
    &lt;ion-label&gt;Vegetarian&lt;/ion-label&gt; 
    &lt;ion-toggle (click)="isClicked(data.myToggle)" <br/>     [(ngModel)]="data.myToggle"&gt;&lt;/ion-toggle&gt; 
  &lt;/ion-item&gt; </pre>
<p>Just as in Angular 1, you need to use <kbd>[(ngModel)]</kbd> to declare that you want <kbd>data.myToggle</kbd> to be your model. The <kbd>[(..)]</kbd> part is to tell Angular 2 that this is a two-way binding.</p>
<p>There are two lists of pizza toppings. The first one is as follows:</p>
<pre>  &lt;ion-card *ngIf="data.myToggle"&gt; 
    &lt;ion-card-header&gt; 
      I only eat vegetarian foods 
    &lt;/ion-card-header&gt; 
 
    &lt;ion-list&gt; 
      &lt;button ion-item&gt; 
        Mushroom 
      &lt;/button&gt; 
      &lt;button ion-item&gt; 
        Spinach 
      &lt;/button&gt; 
      &lt;button ion-item&gt; 
        Red Peppers 
      &lt;/button&gt; 
    &lt;/ion-list&gt; 
  &lt;/ion-card&gt; </pre>
<p>The second list of pizza toppings is as shown:</p>
<pre>  &lt;ion-card *ngIf="!data.myToggle"&gt; 
    &lt;ion-card-header&gt; 
      I love meat 
    &lt;/ion-card-header&gt; 
 
    &lt;ion-list&gt; 
      &lt;button ion-item&gt; 
        Beef 
      &lt;/button&gt; 
      &lt;button ion-item&gt; 
        Chicken 
      &lt;/button&gt; 
      &lt;button ion-item&gt; 
        Sausage 
      &lt;/button&gt; 
    &lt;/ion-list&gt; 
  &lt;/ion-card&gt; </pre>
<p>To toggle the visibility of each list based on the <kbd>data.myToggle</kbd> model, you can use <kbd>*ngIf</kbd>, which is very similar to <kbd>ng-if</kbd> from Angular 1.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">See also</h1>
                
            
            
                
<p>To see more information about components in the Angular documentation, you can visit <a href="https://angular.io/docs/ts/latest/guide/architecture">https://angular.io/docs/ts/latest/guide/architecture.html#!#component</a>.<a href="https://angular.io/docs/ts/latest/guide/architecture"/></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Creating a custom username input directive</h1>
                
            
            
                
<p>Since you have gone through the process of creating a component in the preceding section, you may wonder what the difference is between a component and a directive. If you have some experience with Angular 1, you may notice that it had no definition of a component. Starting in Angular 2, there are the following three kinds of directive:</p>
<table class="table">
<tbody>
<tr>
<td>
<p><strong>Kind</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p>Components</p>
</td>
<td>
<p>They have a template and a class associated with the component (that is, <kbd>ion-input</kbd>)</p>
</td>
</tr>
<tr>
<td>
<p>Structural directives</p>
</td>
<td>
<p>They change the DOM structure within the scope of where it is (that is, <kbd>*ngIf</kbd> or <kbd>*ngFor</kbd>)</p>
</td>
</tr>
<tr>
<td>
<p>Attribute directives</p>
</td>
<td>
<p>They change the appearance of the current DOM by intercepting its display or events</p>
</td>
</tr>
</tbody>
</table>
<p>You may have a mix of both structural and attribute characteristics in the same directive. In this section, you will learn how to create an attribute directive that can prevent certain characters from being input in the Username, as well as showing another DOM node (where it says You are typing username) by toggling its visibility. Observe the following screenshot of the app:</p>
<div><img class="image-border" src="img/d07ca37a-84fa-43ec-adaf-ca62673defe4.png" style="width:20.83em;height:37.17em;" width="313" height="558"/></div>
<p>The GO button is there just for cosmetic purposes, and you will not need to write any code for it.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This app example could work either in a browser or on a physical device.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Observe the following instructions:</p>
<ol>
<li>Create a new <kbd>MyIonicInputDirective</kbd> app using the <kbd>blank</kbd> template, as shown, and go into the <kbd>MyIonicInputDirective</kbd> folder:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic start MyIonicInputDirective blank</strong>
<strong>$ cd MyIonicInputDirective</strong></pre>
<ol start="2">
<li>Open the <kbd>./src/app/pages/home/home.html</kbd> file and replace the content with the following code:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-header&gt;<br/>  &lt;ion-navbar color="danger"&gt;<br/>    &lt;ion-title&gt;<br/>      Login<br/>    &lt;/ion-title&gt;<br/>  &lt;/ion-navbar&gt;<br/>&lt;/ion-header&gt;<br/><br/>&lt;ion-content padding&gt;<br/>  &lt;ion-list&gt;<br/>    &lt;ion-item&gt;<br/>      &lt;ion-input type="text" placeholder="Username" [(ngModel)]="username" [myIonicInput]="myStyles"&gt;&lt;/ion-input&gt;<br/>    &lt;/ion-item&gt;<br/>    &lt;ion-item&gt;<br/>      &lt;ion-input type="password" placeholder="Password"&gt;&lt;/ion-input&gt;<br/>    &lt;/ion-item&gt;<br/>  &lt;/ion-list&gt;<br/>  &lt;p *ngIf="myStyles.showUsername" class="hint"&gt;<br/>    You are typing username<br/>  &lt;/p&gt;<br/>  &lt;ion-fab bottom center&gt;<br/>    &lt;button ion-fab&gt;GO&lt;/button&gt;<br/>  &lt;/ion-fab&gt;<br/>&lt;/ion-content&gt;</pre>
<p style="padding-left: 60px">As mentioned earlier, the GO button is just an example of the new floating button feature from Ionic. All you need to do is include <kbd>bottom</kbd> and <kbd>center</kbd> in order to position it. These are actually good examples of attribute directives.</p>
<ol start="3">
<li>Open <kbd>home.ts</kbd>, in the same folder as in the preceding step, to edit and insert the following code:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/>import { NavController } from 'ionic-angular';<br/><br/>@Component({<br/>  selector: 'page-home',<br/>  templateUrl: 'home.html'<br/>})<br/>export class HomePage {<br/>  private myStyles = { showUsername: false };<br/>  constructor(public navCtrl: NavController) {<br/><br/>  }<br/>}</pre>
<ol start="4">
<li>Create the <kbd>./src/directives</kbd> folder, as shown in the following command:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ mkdir ./src/directives</strong></pre>
<ol start="5">
<li>Create the <kbd>my-ionic-input.ts</kbd> file in the <kbd>directives</kbd> folder and copy in the following code:</li>
</ol>
<pre style="padding-left: 60px">import { Directive, Input, ElementRef, OnInit } from '@angular/core';<br/>@Directive({<br/>  selector: '[myIonicInput]', // Attribute selector<br/>  host: {<br/>    '(mouseenter)': 'onMouseEnter()',<br/>    '(mouseleave)': 'onMouseLeave()'<br/>    // '(keypress)': 'onKeyPress'<br/>  }<br/>})<br/>export class MyIonicInputDirective {<br/>  @Input('myIonicInput') myStyles: any;<br/>  constructor(private el: ElementRef) {<br/>    el.nativeElement.onkeypress = function(e) {<br/>      console.log(e);<br/>      if ('~!@#$%^&amp;*()-='.includes(String.fromCharCode(e.keyCode))) {<br/>        e.preventDefault();<br/>        return;<br/>      }<br/>    }<br/>  }<br/><br/>  ngOnInit() {<br/>    console.log(this.myStyles);<br/>  }<br/><br/>  onMouseEnter() {<br/>    this.myStyles.showUsername = true;<br/>  }<br/>  onMouseLeave(e) {<br/>    this.myStyles.showUsername = false;<br/>  }<br/><br/>  // onKeyPress will not work with ion-input directly<br/>  // because the actual input element is a child of ion-input<br/>  // onKeyPress() {<br/>  // console.log("onKeyPress");<br/>  // }<br/>}</pre>
<ol start="6">
<li>Open and edit <kbd>./src/app/app.module.ts</kbd> to declare your new directive, as follows:</li>
</ol>
<pre style="padding-left: 60px">import { BrowserModule } from '@angular/platform-browser';<br/>import { ErrorHandler, NgModule } from '@angular/core';<br/>import { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';<br/>import { SplashScreen } from '@ionic-native/splash-screen';<br/>import { StatusBar } from '@ionic-native/status-bar';<br/><br/>import { MyApp } from './app.component';<br/>import { HomePage } from '../pages/home/home';<br/>import { MyIonicInputDirective } from '../directives/my-ionic-input';<br/><br/>@NgModule({<br/>  declarations: [<br/>    MyApp,<br/>    HomePage,<br/>    MyIonicInputDirective<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    IonicModule.forRoot(MyApp)<br/>  ],<br/>  bootstrap: [IonicApp],<br/>  entryComponents: [<br/>    MyApp,<br/>    HomePage<br/>  ],<br/>  providers: [<br/>    StatusBar,<br/>    SplashScreen,<br/>    {provide: ErrorHandler, useClass: IonicErrorHandler}<br/>  ]<br/>})<br/>export class AppModule {}</pre>
<ol start="7">
<li>Go to your Terminal and run the app, as shown:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic serve</strong></pre>


            

            
        
    </div>



  
<div><h1 class="header-title">How it works...</h1>
                
            
            
                
<p>The <kbd>homepage</kbd> template (<kbd>home.html</kbd>) is very typical with <kbd>ion-list</kbd> and <kbd>ion-item</kbd>, which contain your input elements. However, there are two important things to take note of. Firstly, there is an attribute, called <kbd>myIonicInput</kbd>, in the <kbd>ion-input</kbd> component. Observe the following code:</p>
<pre>&lt;ion-item &gt; 
  &lt;ion-input type="text" placeholder="Username" <br/>   [(ngModel)]="username" [myIonicInput]="myStyles"&gt;&lt;/ion-input&gt; 
&lt;/ion-item&gt; </pre>
<p>Secondly, the <kbd>myStyles</kbd> object is now used to toggle the visibility of the <kbd>&lt;p&gt;</kbd> element,<br/>
as shown:</p>
<pre>&lt;p *ngIf="myStyles.showUsername" class="hint"&gt; 
  You are typing username 
&lt;/p&gt; </pre>
<p>This <kbd>myStyles</kbd> object is actually a <kbd>private</kbd> variable in your <kbd>HomePage</kbd> class in the <kbd>home.ts</kbd> file, as follows:</p>
<pre>export class HomePage { 
  private myStyles: Object = {showUsername: false}; 
}</pre>
<p>With TypeScript, you could assign a type (that is, an object) to a variable with a default value. You may also note that <kbd>MyIonicInputDirective</kbd> should be declared for a dependency to be injected into the template directives.</p>
<p>To create a basic directive, you must import at least <kbd>Directive</kbd> and <kbd>ElementRef</kbd> in order to manipulate the DOM. However, since this <kbd>Directive</kbd> has input (that is, <kbd>myStyles</kbd>), you should also import <kbd>Input</kbd> in your <kbd>my-ionic-input.ts</kbd>, as illustrated in the following code:</p>
<pre>import {Directive, ElementRef, Input} from '@angular/core'; </pre>
<p>You have <kbd>selector</kbd> and <kbd>host</kbd> metadata in your directive, as shown:</p>
<pre>@Directive({ 
  selector: '[myIonicInput]', 
  host: { 
    '(mouseenter)': 'onMouseEnter()', 
    '(mouseleave)': 'onMouseLeave()' 
    // '(keypress)': 'onKeyPress' 
  } 
}) </pre>
<p>The <kbd>myIonicInput</kbd> selector will be queried from the DOM and will trigger <em>actions</em> on that DOM node. For event detection on the DOM, you have to map the event name to the <kbd>class</kbd> method. For example, the <kbd>mouseenter</kbd> event will trigger a call to the <kbd>onMouseEnter()</kbd> method in the directive's class, which is <kbd>MyIonicInputDirective</kbd>.</p>
<p>Now, let's look more closely at the directive's class:</p>
<pre>export class MyIonicInputDirective { 
  @Input('myIonicInput') myStyles: any; 
   
  constructor(private el: ElementRef) {  
    el.nativeElement.onkeypress = function(e) { 
      console.log(e); 
        
      if ('~!@#$%^&amp;*()-<br/>       ='.includes(String.fromCharCode(e.keyCode))) { 
        e.preventDefault(); 
        return; 
      } 
    } 
  } 
  onMouseEnter() {  
    this.myStyles.showUsername = true; 
  } 
   
  onMouseLeave(e) { 
    this.myStyles.showUsername = false;  
  } 
 
  // onKeyPress will not work with ion-input directly because the <br/>   actual input element is a child of ion-input   
  // onKeyPress() {
  //   console.log("onKeyPress"); 
  // } 
} </pre>
<p>The <kbd>@Input</kbd> decorator is used to declare that you will bring in a variable from the template. This is the reason why you must have the square brackets <kbd>[myIonicInput]="myStyles"</kbd>. Otherwise, <kbd>myStyles</kbd> would just be a string instead of an expression referring to the <kbd>myStyles</kbd> object from the <kbd>HomePage</kbd> class.</p>
<p>Another interesting thing to note here is the code inside <kbd>constructor</kbd>. <kbd>ElementRef</kbd> is pointing to the same DOM at which you placed your attribute directive. You want to modify the behavior of the keyboard using <kbd>el.nativeElement.onkeypress</kbd> so that special characters won't be allowed. If the user enters a special character, it will trigger <kbd>e.preventDefault()</kbd> and nothing will happen. The keyboard event is basically discarded. You may wonder why we cannot just use the <kbd>keypress</kbd> event and map it to <kbd>onKeyPress</kbd>, which was intentionally commented out. The reason is that you are placing the <kbd>myIonicInput</kbd> directive on top of <kbd>ion-input</kbd>. But the actual <kbd>&lt;input&gt;</kbd> DOM is just a child of <kbd>ion-input</kbd>. Therefore, if you listen to the <kbd>keypress</kbd> event on the parent <kbd>ion-input</kbd>, you won't be able to bind it.</p>
<p>The <kbd>onMouseEnter</kbd> and <kbd>onMouseLeave</kbd> methods are self-explanatory because they just toggle the <kbd>myStyles.showUsername</kbd> variable. Again, this <kbd>myStyles</kbd> object is just a reference back to the <kbd>myStyles</kbd> of <kbd>HomePage</kbd>. So, if you change the variable here, it will change at the home page's level as well.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">See also</h1>
                
            
            
                
<ul>
<li>For more information about Angular 2 directives, you can refer to the official documentation at <a href="https://angular.io/docs/ts/latest/guide/attribute-directives.html">https://angular.io/docs/ts/latest/guide/attribute-directives.html</a></li>
<li>Since this is the first section in which TypeScript appears, it might be helpful to go through the handbook for more details: <a href="http://www.typescriptlang.org/docs/tutorial.html">http://www.typescriptlang.org/docs/tutorial.html</a></li>
</ul>


            

            
        
    </div>



  
<div><h1 class="header-title">Creating a custom pipe</h1>
                
            
            
                
<p>Pipes are also a feature of Angular and are not specific to Ionic. If you are familiar with Angular 1, a <em>pipe</em> is exactly the same thing as a <em>filter</em>. The main reason you might want to use pipes is to display data in a different format in the view. You don't want to change the actual value in the component. This makes things very convenient because you don't have to decide on the specific format within the code while leaving flexibility in the view layer. Here is a list of some useful built-in pipes (from <a href="https://angular.io/docs/ts/latest/api/#!?apiFilter=pipe">https://angular.io/docs/ts/latest/api/#!?apiFilter=pipe</a>):</p>
<ul>
<li><kbd>AsyncPipe</kbd></li>
<li><kbd>DatePipe</kbd></li>
<li><kbd>NumberPipe</kbd></li>
<li><kbd>SlicePipe</kbd></li>
<li><kbd>DecimalPipe</kbd></li>
<li><kbd>JsonPipe</kbd></li>
<li><kbd>PercentPipe</kbd></li>
<li><kbd>UpperCasePipe</kbd></li>
<li><kbd>LowerCasePipe</kbd></li>
<li><kbd>CurrencyPipe</kbd></li>
<li><kbd>ReplacePipe</kbd></li>
</ul>
<p>In this section, you will learn how to create a custom pipe using the <kbd>@Pipe</kbd> decorator. The following is a screenshot of the app:</p>
<div><img class="image-border" src="img/1f483db6-c39e-43eb-a644-964fd124a5e7.png" style="width:13.50em;height:16.75em;" width="316" height="393"/></div>
<p>While the app interface is very simple, the purpose of this example is to show you how to create a pipe to extract object data.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>There is no need to test on a physical device because the Angular pipe will work just fine in the web browser.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Observe the following instructions:</p>
<ol>
<li>Create a new <kbd>CustomPipe</kbd> app using the <kbd>blank</kbd> template, as shown, and go to the <kbd>CustomPipe</kbd> folder:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic start CustomPipe blank</strong>
<strong>$ cd CustomPipe</strong> </pre>
<ol start="2">
<li>Open the <kbd>./src/pages/home/home.html</kbd> file and modify the content with the following code:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-header&gt;<br/>  &lt;ion-navbar&gt;<br/>    &lt;ion-title&gt;<br/>      User<br/>    &lt;/ion-title&gt;<br/>  &lt;/ion-navbar&gt;<br/>&lt;/ion-header&gt;<br/>&lt;ion-content padding&gt;<br/>  &lt;h4&gt;Unformatted Value&lt;/h4&gt;<br/>  &lt;ion-card&gt;<br/>    &lt;ion-card-header&gt;<br/>      &lt;code&gt;user&lt;/code&gt;<br/>    &lt;/ion-card-header&gt;<br/>    &lt;ion-card-content&gt;<br/>      {{ user | json }}<br/>    &lt;/ion-card-content&gt;<br/>  &lt;/ion-card&gt;<br/>  &lt;h4&gt;Formatted Value&lt;/h4&gt;<br/>  &lt;ion-list&gt;<br/>    &lt;ion-item&gt;<br/>      &lt;ion-label fixed&gt;First Name&lt;/ion-label&gt;<br/>      &lt;ion-note item-right&gt;{{ user | userExtract : "firstname" }}&lt;/ion-note&gt;<br/>    &lt;/ion-item&gt;<br/>    &lt;ion-item&gt;<br/>      &lt;ion-label fixed&gt;Last Name&lt;/ion-label&gt;<br/>      &lt;ion-note item-right&gt;{{ user | userExtract : "lastname" }}&lt;/ion-note&gt;<br/>    &lt;/ion-item&gt;<br/>    &lt;ion-item&gt;<br/>      &lt;ion-label fixed&gt;Age&lt;/ion-label&gt;<br/>      &lt;ion-note item-right&gt;{{ user | userExtract : "age" }}<br/>      &lt;/ion-note&gt;<br/>    &lt;/ion-item&gt;<br/>  &lt;/ion-list&gt;<br/>&lt;/ion-content&gt;</pre>
<p style="padding-left: 60px">You can quickly see that the template uses the <kbd>userExtract</kbd> pipe to render the correct information.</p>
<ol start="3">
<li>Then, replace the content of <kbd>./src/pages/home/home.ts</kbd> with the following code:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/>import { NavController } from 'ionic-angular';<br/><br/>@Component({<br/>  selector: 'page-home',<br/>  templateUrl: 'home.html'<br/>})<br/>export class HomePage {<br/><br/>  private user: any;<br/>  constructor(public navCtrl: NavController) {<br/>    this.user = {<br/>      name: 'John Connor',<br/>      birthyear: 1985<br/>    };<br/><br/>    console.log(this.user);<br/>  }<br/><br/>}</pre>
<p style="padding-left: 60px">You don't have the <kbd>custom-pipe.ts</kbd> file yet, so you need to create it next.</p>
<ol start="4">
<li>Create the <kbd>./src/utils</kbd> folder by using the following command:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ mkdir ./utils/utils</strong>  </pre>
<p style="padding-left: 60px">You can call this folder anything. However, since pipes are sometimes considered <em>utility</em> functions, let's call it <kbd>utils</kbd>.</p>
<ol start="5">
<li>Create the <kbd>custom-pipe.ts</kbd> file in the <kbd>utils</kbd> folder and copy the following code:</li>
</ol>
<pre style="padding-left: 60px">import { Pipe, PipeTransform } from '@angular/core';<br/><br/>@Pipe({ name: 'userExtract' })<br/>export class UserExtractPipe implements PipeTransform {<br/>    transform(value: any, arg): any {<br/>        let newVal: any;<br/>        if (arg == "firstname") {<br/>            newVal = value.name ? value.name.split(' ')[0] : '';<br/>        } else if (arg == "lastname") {<br/>            newVal = value.name ? value.name.split(' ').splice(-<br/>                1) : '';<br/>        } else if (arg == "age") {<br/>            var currentTime = new Date();<br/>            newVal = value.birthyear ? currentTime.getFullYear()<br/>                - value.birthyear : 0;<br/>        }<br/>        return newVal;<br/>    }<br/>}</pre>
<ol start="6">
<li>Add <kbd>UserExtractPipe</kbd> to <kbd>./src/app/app.module.ts</kbd> by replacing it with the following code:</li>
</ol>
<pre style="padding-left: 60px">import { BrowserModule } from '@angular/platform-browser';<br/>import { ErrorHandler, NgModule } from '@angular/core';<br/>import { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';<br/>import { SplashScreen } from '@ionic-native/splash-screen';<br/>import { StatusBar } from '@ionic-native/status-bar';<br/><br/>import { MyApp } from './app.component';<br/>import { HomePage } from '../pages/home/home';<br/>import { UserExtractPipe } from '../utils/custom-pipe';<br/><br/>@NgModule({<br/>  declarations: [<br/>    MyApp,<br/>    HomePage,<br/>    UserExtractPipe<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    IonicModule.forRoot(MyApp)<br/>  ],<br/>  bootstrap: [IonicApp],<br/>  entryComponents: [<br/>    MyApp,<br/>    HomePage<br/>  ],<br/>  providers: [<br/>    StatusBar,<br/>    SplashScreen,<br/>    {provide: ErrorHandler, useClass: IonicErrorHandler}<br/>  ]<br/>})<br/>export class AppModule {}</pre>
<ol start="7">
<li>Go to your Terminal and run the app, as follows:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic serve</strong></pre>


            

            
        
    </div>



  
<div><h1 class="header-title">How it works...</h1>
                
            
            
                
<p>You can use an Angular pipe in the view to simply convert or transform any value to a desired value. There are no limitations to how you structure the pipe. Angular automatically detects the <kbd>|</kbd> sign in the template and turns the value in front of it to an input. To create a pipe, you must import the decorator and provide a name (see <kbd>custom-pipe.ts</kbd>), as shown:</p>
<pre>import { Pipe, PipeTransform } from '@angular/core'; 
 
@Pipe({name: 'userExtract'}) </pre>
<p>The input from the template is the following <kbd>value</kbd> parameter:</p>
<pre>transform(value: any, arg) : any { </pre>
<p>The value returned by the <kbd>transform</kbd> method will be the output to the view, as shown in the following code:</p>
<pre>return newVal; </pre>
<p>In this example, you are taking a parameter for the pipe to process, as illustrated in the following code:</p>
<pre>    if (arg == "firstname") { 
       
      newVal = value.name ? value.name.split(' ')[0] : ''; 
 
    } else if (arg == "lastname") { 
       
      newVal = value.name ? value.name.split(' ').splice(-1) : ''; 
       
    } else if (arg == "age") { 
      var currentTime = new Date(); 
       
      newVal = value.birthyear ? currentTime.getFullYear() - <br/>       value.birthyear : 0; 
    } </pre>
<p>For example, this is what you had in the <kbd>home.html</kbd> template:</p>
<pre>    &lt;ion-item&gt; 
      &lt;ion-label fixed&gt;First Name&lt;/ion-label&gt; 
      &lt;ion-note item-right&gt;{{ user | userExtract : "firstname" <br/>       }}&lt;/ion-note&gt; 
    &lt;/ion-item&gt; </pre>
<p>Each parameter is placed after a colon (<kbd>:</kbd>). Then, within your <kbd>@Pipe</kbd> class, you can refer to it using <kbd>arg</kbd>. The rest of the code is very simple, as already shown in the preceding section. Observe the following:</p>
<ul>
<li>If it's <kbd>firstname</kbd>, take the first word</li>
<li>If it's <kbd>lastname</kbd>, take the last word</li>
<li>If it's <kbd>age</kbd>, subtract the current year from the birth year</li>
</ul>
<p>Of course, you could have more complicated scenarios with pipes. However, the overall recommendation is to keep things simple in the view to ensure rendering performance. If you need to do heavy processing, it's best to handle it as a separate variable.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">See also</h1>
                
            
            
                
<p>To understand more about Angular pipes, you can check out the official documentation at <a href="https://angular.io/docs/ts/latest/guide/pipes.html">https://angular.io/docs/ts/latest/guide/pipes.html</a><a href="https://angular.io/docs/ts/latest/guide/pipes.html"/></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Creating a shared service to provide data to multiple pages</h1>
                
            
            
                
<p>When you develop an app that involves a lot of pages and communication to the backend, you will need to have a way to communicate across pages and components. For example, you may have a service to request user data from the backend and store it in a common local service. Then, you will need to provide a way for the user to update their user data and see the update in real time. When the user navigates to different pages, the same information will be pulled and rendered too, without making multiple trips to the backend. This is a very common scenario that requires the use of the <kbd>@Injectable</kbd> decorator in Angular.</p>
<p>Observe the following screenshot of the app you will build:</p>
<div><img class="image-border" src="img/b95ec01e-4ca2-4557-9efb-41d738d9f986.png" style="width:19.83em;height:24.25em;" width="314" height="385"/></div>
<p>The user can fill out the form and see updates on it in real time. Then, they can move to the next page (Go to Page 2) and see the following screenshot:</p>
<div><img class="image-border" src="img/41b98302-4932-4fb6-8351-4027cd93f30f.png" style="width:20.83em;height:14.33em;" width="314" height="217"/></div>
<p>This page uses the same service as the preceding page and references the same date with the name and age. You will learn the following topics in this section:</p>
<ul>
<li>Creating a service using <kbd>@Injectable</kbd></li>
<li>Sharing a service across multiple pages</li>
<li>Detecting changes using getters and setters inside the service</li>
</ul>


            

            
        
    </div>



  
<div><h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This app example could work either in a browser or on a physical device.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Observe the following instructions:</p>
<ol>
<li>Create a new <kbd>SharedService</kbd> app using the <kbd>blank</kbd> template as shown and go to the <kbd>SharedService</kbd> folder:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ ionic start SharedService blank</strong>
<strong>$ cd SharedService</strong></pre>
<ol start="2">
<li>You will need to make several changes in the directory because you have two pages and a common service for both. Let's start by modifying the <kbd>./src/app/app.component.ts</kbd> file so that the <kbd>rootPage</kbd> is pointing to <kbd>Page1</kbd>:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/>import { Platform } from 'ionic-angular';<br/>import { StatusBar } from '@ionic-native/status-bar';<br/>import { SplashScreen } from '@ionic-native/splash-screen';<br/><br/>import { Page1 } from '../pages/page1/page1';<br/><br/>@Component({<br/>  templateUrl: 'app.html'<br/>})<br/>export class MyApp {<br/>  rootPage:any = Page1;<br/><br/>  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {<br/>    platform.ready().then(() =&gt; {<br/>      // Okay, so the platform is ready and our plugins are available.<br/>      // Here you can do any higher level native things you might need.<br/>      statusBar.styleDefault();<br/>      splashScreen.hide();<br/>    });<br/>  }<br/>}</pre>
<ol start="3">
<li>Create <kbd>./src/pages/page1</kbd>, as shown in the following code:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ mkdir ./src/pages/page1</strong></pre>
<ol start="4">
<li>Create your first template, <kbd>page1.html</kbd>, in the <kbd>page1</kbd> folder with the following code:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-header&gt;<br/>    &lt;ion-navbar&gt;<br/>        &lt;ion-title&gt;<br/>            Profile<br/>        &lt;/ion-title&gt;<br/>    &lt;/ion-navbar&gt;<br/>&lt;/ion-header&gt;<br/><br/>&lt;ion-content&gt;<br/>    &lt;ion-card&gt;<br/>        &lt;ion-card-header&gt;<br/>            What you are entering<br/>        &lt;/ion-card-header&gt;<br/>        &lt;ion-card-content&gt;<br/>            &lt;ion-badge item-right&gt;Name&lt;/ion-badge&gt; {{ user.name }}<br/>            &lt;br&gt;&lt;br&gt;<br/>            &lt;ion-badge item-right&gt;Age&lt;/ion-badge&gt; {{ user.age }}<br/>        &lt;/ion-card-content&gt;<br/>    &lt;/ion-card&gt;<br/>    &lt;ion-list&gt;<br/>        &lt;ion-item&gt;<br/>            &lt;ion-label fixed&gt;Name&lt;/ion-label&gt;<br/>            &lt;ion-input type="text" [(ngModel)]="user.name"&gt;<br/>        &lt;/ion-input&gt;<br/>        &lt;/ion-item&gt;<br/>        &lt;ion-item&gt;<br/>            &lt;ion-label fixed&gt;Password&lt;/ion-label&gt;<br/>            &lt;ion-input type="number" [(ngModel)]="user.age"&gt;<br/>        &lt;/ion-input&gt;<br/>        &lt;/ion-item&gt;<br/>    &lt;/ion-list&gt;<br/>    &lt;button ion-button full block (click)="goToPage2()"&gt;Go to Page 2&lt;/button&gt;<br/>&lt;/ion-content&gt;</pre>
<ol start="5">
<li>Create <kbd>page1.ts</kbd> in the <kbd>page1</kbd> folder, as follows:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/>import { NavController } from 'ionic-angular';<br/>import { UserService } from '../../services/user';<br/>import { Page2 } from '../page2/page2';<br/>@Component({<br/>    selector: 'page-one',<br/>    templateUrl: 'page1.html'<br/>})<br/>export class Page1 {<br/>    private user: any;<br/>    private nav: any;<br/>    constructor(public navCtrl: NavController, user:<br/>        UserService, nav: NavController) {<br/>        console.log(user.name);<br/>        this.user = user;<br/>        this.nav = nav;<br/>    }<br/>    goToPage2() {<br/>        this.nav.push(Page2);<br/>    }<br/>}</pre>
<p>The file extension is <kbd>.ts</kbd>, and not <kbd>.js</kbd>, because you are going to use some TypeScript-specific features, such as getters and setters.</p>
<ol start="6">
<li>Similarly, create the <kbd>page2</kbd> folder using the following command:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ mkdir ./src/pages/page1</strong> </pre>
<ol start="7">
<li>Add the <kbd>page2.html</kbd> template in the <kbd>page2</kbd> folder as well, as follows:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-header&gt;<br/>  &lt;ion-navbar&gt;<br/>    &lt;ion-title&gt;<br/>      Confirmation<br/>    &lt;/ion-title&gt;<br/>  &lt;/ion-navbar&gt;<br/>&lt;/ion-header&gt;<br/><br/>&lt;ion-content class="home"&gt;<br/>  &lt;ion-card&gt;<br/>    &lt;ion-card-header&gt;<br/>      Please confirm your profile<br/>    &lt;/ion-card-header&gt;<br/>    &lt;ion-card-content&gt;<br/>      {{ user.name }} is {{ user.age }} years old<br/>    &lt;/ion-card-content&gt;<br/>  &lt;/ion-card&gt;<br/>  &lt;button ion-button full block (click)="goToPage1()"&gt;Back to Page 1&lt;/button&gt;<br/>&lt;/ion-content&gt;</pre>
<p style="padding-left: 60px">This is your second page with the same <kbd>name</kbd> and <kbd>age</kbd> information.</p>
<ol start="8">
<li>Create <kbd>page2.ts</kbd> in the <kbd>page2</kbd> folder with the following code:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/>import { NavController } from 'ionic-angular';<br/>import { UserService } from '../../services/user';<br/>import { Page1 } from '../page1/page1';<br/>@Component({<br/>  selector: 'page-two',<br/>  templateUrl: 'page2.html'<br/>})<br/>export class Page2 {<br/>  private user: any;<br/>  private nav: any;<br/>  constructor(public navCtrl: NavController, user:<br/>    UserService, nav: NavController) {<br/>    console.log(user.name);<br/>    this.user = user;<br/>    this.nav = nav;<br/>  }<br/>  goToPage1() {<br/>    this.nav.push(Page1);<br/>  }<br/>}</pre>
<ol start="9">
<li>Create the <kbd>services</kbd> folder with the following command:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ mkdir ./src/services</strong></pre>
<ol start="10">
<li>Put <kbd>UserService</kbd> in the <kbd>user.ts</kbd> file, in the <kbd>services</kbd> folder, as shown:</li>
</ol>
<pre style="padding-left: 60px">import { Injectable } from '@angular/core';<br/>@Injectable()<br/>export class UserService {<br/>    private _name: string;<br/>    private _age: number;<br/>    constructor() {<br/>        this._name = 'John Connor';<br/>        this._age = 31;<br/>    }<br/>    get name() {<br/>        return this._name;<br/>    }<br/>    set name(newVal) {<br/>        console.log('Set name = ' + newVal);<br/>        this._name = newVal;<br/>    }<br/>    get age() {<br/>        return this._age;<br/>    }<br/>    set age(newVal) {<br/>        console.log('Set age = ' + newVal);<br/>        this._age = newVal;<br/>    }<br/>}</pre>
<ol start="11">
<li>Open and edit <kbd>./src/app/app.module.ts</kbd> so that you can inject <kbd>UserService</kbd> as a global provider and declare <kbd>Page1</kbd> and <kbd>Page2</kbd> :</li>
</ol>
<pre style="padding-left: 60px">import { BrowserModule } from '@angular/platform-browser';<br/>import { ErrorHandler, NgModule } from '@angular/core';<br/>import { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';<br/>import { SplashScreen } from '@ionic-native/splash-screen';<br/>import { StatusBar } from '@ionic-native/status-bar';<br/><br/>import { MyApp } from './app.component';<br/>;<br/>import { Page1 } from '../pages/page1/page1';<br/>import { Page2 } from '../pages/page2/page2';<br/>import { UserService } from '../services/user';<br/><br/>@NgModule({<br/>  declarations: [<br/>    MyApp,<br/>    Page1,<br/>    Page2<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    IonicModule.forRoot(MyApp)<br/>  ],<br/>  bootstrap: [IonicApp],<br/>  entryComponents: [<br/>    MyApp,<br/>    Page1,<br/>    Page2<br/>  ],<br/>  providers: [<br/>    StatusBar,<br/>    SplashScreen,<br/>    UserService,<br/>    {provide: ErrorHandler, useClass: IonicErrorHandler}<br/>  ]<br/>})<br/>export class AppModule {}</pre>
<ol start="12">
<li>Verify that your folder structure looks like the following screenshot:</li>
</ol>
<div><img class="image-border" src="img/1f8aceb7-1d72-4fbd-8414-e2e9eeee4085.png" style="width:12.50em;height:22.33em;" width="171" height="306"/></div>
<ol start="13">
<li>Go to your Terminal and run the app with the following command:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic serve</strong></pre>
<p>You can move from <kbd>page 1</kbd> to <kbd>page 2</kbd> and then back, and the data will persist across the pages.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">How it works...</h1>
                
            
            
                
<p>In general, if you want to use a common service across multiple pages, you must inject it at the highest level. In this example, you put <kbd>UserService</kbd> as a dependency at the start of <kbd>app.module.ts</kbd>, as follows:</p>
<pre>providers: [UserService] </pre>
<p>After that, other pages within the app can start using this common service without having to reinject it. The main reason is that, whenever you inject a service or class, it will instantiate a new object, which ends up erasing all of the existing data in the memory. If you want the data to persist across the pages, it should be in the parent app to avoid reinjection.</p>
<p>To use the <kbd>UserService</kbd> on each page, you just need to import it, as illustrated in the following code:</p>
<pre>import { UserService } from '../../services/user'; </pre>
<p>The way to bring in the service is to put the referencing in the constructor (<kbd>page1.ts</kbd>),<br/>
as shown:</p>
<pre>  constructor(user: UserService, nav: NavController) { 
    console.log(user.name); 
    this.user = user; 
    this.nav = nav; 
  } </pre>
<p>This will pass down <kbd>UserService</kbd> reference to a local private variable of the page (in this case, <kbd>this.user</kbd>).</p>
<p>From a template standpoint, there is no difference between using <kbd>{{ user.name }}</kbd> and <kbd>{{ user.age }}</kbd> to inject data.</p>
<p>Now, let's take a look at <kbd>UserService</kbd>:</p>
<pre>import {Injectable} from '@angular/core'; 
 
@Injectable() 
export class UserService { 
  private _name: string; 
  private _age: number; 
   
  constructor() { 
    this._name = 'John Connor'; 
    this._age = 31; 
  } 
   
  get name() { 
    return this._name; 
  } 
   
  set name(newVal) { 
    console.log('Set name = ' + newVal); 
    this._name = newVal; 
  } 
   
  get age() { 
    return this._age; 
  } 
   
  set age(newVal) { 
    console.log('Set age = ' + newVal); 
    this._age = newVal; 
  } 
}</pre>
<p>Actually, there are several things going on here. Firstly, you need to import <kbd>Injectable</kbd> from<br/>
<kbd>@angular/core</kbd>.</p>
<p>Don't forget the parentheses in <kbd>@Injectable()</kbd>.</p>
<p>Secondly, if you want to use getters and setters, you need to make separate variables, called <kbd>_name</kbd> and <kbd>_age</kbd>, to store the data. Then, you can use the get/set method to do additional processing when other pages access or set the variables in this common class. If you change the <kbd>name</kbd> or <kbd>age</kbd> from <kbd>Page 1</kbd>, you can see the following logs in the console:</p>
<div><img class="image-border" src="img/df096e79-51e9-48ce-8e06-88e438b0a834.png" width="180" height="106"/></div>
<p>This feature is very beneficial since you can use this as a replacement for <kbd>watch</kbd> or <kbd>observable</kbd>. If you recall from Angular 1, you have to use <kbd>$scope.$watch</kbd> for a similar approach.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">See also</h1>
                
            
            
                
<ul>
<li>For more information about Angular 2 services, visit the official documentation at <a href="https://angular.io/docs/ts/latest/tutorial/toh-pt4.html">https://angular.io/docs/ts/latest/tutorial/toh-pt4.html</a><a href="https://angular.io/docs/ts/latest/tutorial/toh-pt4.html"/></li>
<li>You can get great instructions on many techniques for component communication at <a href="https://angular.io/docs/ts/latest/cookbook/component-communication.html">https://angular.io/docs/ts/latest/cookbook/component-communication.html</a><a href="https://angular.io/docs/ts/latest/cookbook/component-communication.html"/></li>
</ul>


            

            
        
    </div>



  
<div><h1 class="header-title">Reusing an existing page as an HTML element</h1>
                
            
            
                
<p>So far, we have used Ionic pages using Ionic's navigation system. In this recipe, we're going to extend the existing page so that we can use it as an HTML element/component in the application. The following is the first page of the application:</p>
<div><img src="img/1f6e4ee7-b5d9-4dcc-bcf8-9162bf3bfc13.png" style="width:18.08em;height:31.83em;" width="414" height="731"/></div>
<p>When you click on SHOW CONTACT PAGE, it shows the contact page with the information from the previous page as shown in the following screenshot:</p>
<div><img src="img/81a446c6-f7b5-4400-a18d-0957a86b242d.png" style="width:19.83em;height:35.17em;" width="412" height="732"/></div>
<p>We will reutilize this contact page as an HTML element in the application.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>In this recipe, we are using web functionalities, so we only need a web browser to run the application.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Follow these instructions:</p>
<ol>
<li>Create a new app named <kbd>PageComponent</kbd> using the <kbd>blank</kbd> template, as shown in the following code block and go to the <kbd>PageComponent</kbd> folder:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic start PageComponent blank<br/></strong><strong>$ cd PageComponent</strong></pre>
<ol start="2">
<li>Open the <kbd>./src/app/pages/home/home.html</kbd> file and replace the content with the following code:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-header&gt;<br/>  &lt;ion-navbar&gt;<br/>    &lt;ion-title&gt;<br/>      Ionic Blank<br/>    &lt;/ion-title&gt;<br/>  &lt;/ion-navbar&gt;<br/>&lt;/ion-header&gt;<br/><br/>&lt;ion-content padding&gt;<br/>  &lt;ion-list&gt;<br/>        &lt;ion-item&gt;<br/>          &lt;ion-label fixed&gt;Name&lt;/ion-label&gt;<br/>          &lt;ion-input type="text" value="" [(ngModel)]="user.name"&gt;<br/>        &lt;/ion-input&gt;<br/>        &lt;/ion-item&gt;<br/>      <br/>        &lt;ion-item&gt;<br/>          &lt;ion-label fixed&gt;Email&lt;/ion-label&gt;<br/>          &lt;ion-input type="text" [(ngModel)]="user.email"&gt;<br/>        &lt;/ion-input&gt;<br/>        &lt;/ion-item&gt;<br/><br/>        &lt;ion-item&gt;<br/>          &lt;ion-label fixed&gt;Phone&lt;/ion-label&gt;<br/>          &lt;ion-input type="text" [(ngModel)]="user.phone"&gt;<br/>        &lt;/ion-input&gt;<br/>        &lt;/ion-item&gt;<br/><br/>        &lt;ion-item&gt;<br/>          &lt;ion-label fixed&gt;Website&lt;/ion-label&gt;<br/>          &lt;ion-input type="text" [(ngModel)]="user.website"&gt;<br/>        &lt;/ion-input&gt;<br/>        &lt;/ion-item&gt;<br/>      <br/>      &lt;/ion-list&gt;<br/><br/>      &lt;button full ion-button (click)="toggleContact()"&gt;<br/>      TOGGLE CONTACT COMPONENT&lt;/button&gt;<br/>      &lt;button full ion-button (click)="openContact()"&gt;SHOW CONTACT PAGE&lt;/button&gt;<br/>      <br/>      &lt;page-contact [userInput]="user" *ngIf="showContact"&gt;<br/>      &lt;/page-contact&gt;<br/><br/>&lt;/ion-content&gt;</pre>
<ol start="3">
<li>Open the <kbd>./src/pages/home/home.ts</kbd> file and replace the content with the following:</li>
</ol>
<pre style="padding-left: 60px">import { Component } from '@angular/core';<br/>import { NavController } from 'ionic-angular';<br/>import { ContactPage } from "../contact/contact";<br/>@Component({<br/> selector: 'page-home',<br/> templateUrl: 'home.html'<br/>})<br/>export class HomePage {<br/> user:any = {};<br/> showContact:Boolean = false;<br/> constructor(public navCtrl: NavController) {}<br/> <br/> openContact() {<br/>   this.navCtrl.push(ContactPage, { user: this.user });<br/> }<br/> toggleContact() {<br/>   this.showContact = !this.showContact;<br/> }<br/>}</pre>
<ol start="4">
<li>Now create a folder, <kbd>./src/pages/contact</kbd>, and in the folder, create <kbd>contact.html</kbd> and add the following content:</li>
</ol>
<pre style="padding-left: 60px">&lt;ion-header *ngIf="!userInput"&gt;<br/>    &lt;ion-navbar&gt;<br/>        &lt;ion-title&gt;<br/>            Contact Page<br/>        &lt;/ion-title&gt;<br/>    &lt;/ion-navbar&gt;<br/>&lt;/ion-header&gt;<br/><br/>&lt;ion-content&gt;<br/>    &lt;ion-card&gt;<br/>        &lt;ion-card-header&gt;<br/>            User Contact<br/>        &lt;/ion-card-header&gt;<br/>        &lt;ion-card-content&gt;<br/>            &lt;ion-grid&gt;<br/>                &lt;ion-row&gt;<br/>                    &lt;ion-col&gt;Name&lt;/ion-col&gt;<br/>                    &lt;ion-col&gt;{{user.name}}&lt;/ion-col&gt;<br/>                &lt;/ion-row&gt;<br/><br/>                &lt;ion-row&gt;<br/>                    &lt;ion-col&gt;Email&lt;/ion-col&gt;<br/>                    &lt;ion-col&gt;{{user.email}}&lt;/ion-col&gt;<br/>                &lt;/ion-row&gt;<br/><br/>                &lt;ion-row&gt;<br/>                    &lt;ion-col&gt;Phone&lt;/ion-col&gt;<br/>                    &lt;ion-col&gt;{{user.phone}}&lt;/ion-col&gt;<br/>                &lt;/ion-row&gt;<br/><br/>                &lt;ion-row&gt;<br/>                    &lt;ion-col&gt;Website&lt;/ion-col&gt;<br/>                    &lt;ion-col&gt;{{user.website}}&lt;/ion-col&gt;<br/>                &lt;/ion-row&gt;<br/>            &lt;/ion-grid&gt;<br/>        &lt;/ion-card-content&gt;<br/>    &lt;/ion-card&gt;<br/><br/>&lt;/ion-content&gt;</pre>
<ol start="5">
<li>In the same folder, create a file named <kbd>contact.ts</kbd> and add the following content to it:</li>
</ol>
<pre style="padding-left: 60px">import { Component, Input, OnChanges } from '@angular/core';<br/>import { NavController, NavParams } from 'ionic-angular';<br/><br/>@Component({<br/>  selector: 'page-contact',<br/>  templateUrl: 'contact.html'<br/>})<br/>export class ContactPage {<br/>  user:any = {};<br/>  @Input() userInput;<br/>  constructor(public navCtrl: NavController, private params:NavParams) {<br/>      this.user = params.get('user');<br/>  }<br/><br/>  ngOnChanges() {<br/>    if(this.userInput) {<br/>        this.user = this.userInput;<br/>    }<br/>  }<br/>}</pre>
<ol start="6">
<li>Now open<kbd>./src/app/app.modules.ts</kbd> and add <kbd>ContactPage</kbd> in <kbd>NgModule</kbd>'s <kbd>declarations</kbd> and the <kbd>entryComponents</kbd> list, as shown in the following code:</li>
</ol>
<pre style="padding-left: 60px">import { BrowserModule } from '@angular/platform-browser';<br/>import { ErrorHandler, NgModule } from '@angular/core';<br/>import { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';<br/>import { SplashScreen } from '@ionic-native/splash-screen';<br/>import { StatusBar } from '@ionic-native/status-bar';<br/><br/>import { MyApp } from './app.component';<br/>import { HomePage } from '../pages/home/home';<br/>import { ContactPage } from '../pages/contact/contact';<br/><br/>@NgModule({<br/>  declarations: [<br/>    MyApp,<br/>    HomePage,<br/>    ContactPage<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    IonicModule.forRoot(MyApp)<br/>  ],<br/>  bootstrap: [IonicApp],<br/>  entryComponents: [<br/>    MyApp,<br/>    HomePage,<br/>    ContactPage<br/>  ],<br/>  providers: [<br/>    StatusBar,<br/>    SplashScreen,<br/>    {provide: ErrorHandler, useClass: IonicErrorHandler}<br/>  ]<br/>})<br/>export class AppModule {}</pre>
<ol start="7">
<li>Now go to the Terminal and run the app using the following command:</li>
</ol>
<pre style="padding-left: 30px"><strong>$ ionic serve</strong></pre>


            

            
        
    </div>



  
<div><h1 class="header-title">How it works...</h1>
                
            
            
                
<p>We already used multiple Ionic pages in the navigation, so we know that push/pop navigation works. Let's take a closer look at how we define an Ionic Page as follows:</p>
<pre>@Component({<br/> selector: 'page-contact',<br/> templateUrl: 'contact.html'<br/>})<br/>export class ContactPage {}</pre>
<p>You can see that an Ionic page is actually an Angular component, and we already know that we can use components as an HTML element using their <kbd>selector.</kbd> In the preceding example, selector of the page is <kbd>page-contact</kbd>. So technically we can use the selector in HTML. But it becomes a problem if our page is getting data from the previous page using <kbd>NavParams</kbd>. Let's take a look at the constructor of <kbd>ContactPage</kbd>, shown in the following code block:</p>
<pre> constructor(public navCtrl: NavController, private params:NavParams) {<br/>     this.user = params.get('user');<br/> }</pre>
<p>In the code, we are getting the user's information from the previous page using Ionic's navigation. So, if we want to use this component as an HTML element, we need to pass this data to the component somehow.</p>
<p>This is where <kbd>@Input</kbd> decorator is particularly useful. The <kbd>@Input</kbd> decorator allows us to pass data to the <kbd>component</kbd> as an input. So, we have <kbd>@Input() userInput</kbd> as an input to the component. This <kbd>userInput</kbd> has the same value as the user from <kbd>NavParams</kbd> shown in the preceding code. The only difference is <kbd>userInput</kbd> will have a value when we use the page component as an HTML element and <kbd>params.get('user')</kbd> will have a value when we use this component via Navigation Controlller.</p>
<p>The following is the first page of the app:</p>
<div><img src="img/422c70e6-e631-4490-9a2f-91e495fbea7f.png" style="width:20.58em;height:36.33em;" width="414" height="731"/></div>
<p>When the user enters information in the input fields and then clicks on SHOW CONTACT PAGE, it opens the <kbd>ContactPage</kbd>, as shown in the following screenshot:</p>
<div><img src="img/c738cbb1-65c9-4f42-8c28-4a9b490cb2aa.png" style="width:21.17em;height:37.50em;" width="412" height="732"/></div>
<p>It is important to note that we might not want to show the header bar of the Ionic page when we are using it as an HTML component in other pages. If you take a look at <kbd>contact.html</kbd><strong>,</strong> you will see that we hide the page's header when we use it as an HTML component, as follows:</p>
<pre>&lt;ion-header *ngIf="!userInput"&gt;<br/>    &lt;ion-navbar&gt;<br/>        &lt;ion-title&gt;<br/>            Contact Page<br/>        &lt;/ion-title&gt;<br/>    &lt;/ion-navbar&gt;;<br/>&lt;/ion-header&gt;</pre>
<p class="mce-root">So, what we are saying is, only show the header when <kbd>userInput</kbd> is empty. This <kbd>userInput</kbd> is given as input via <kbd>@Input</kbd>, as described in the chapter. So, if you take a look at the <kbd>home.html</kbd> file, you will add the following code to show <kbd>ContactPage</kbd> inside <kbd>HomePage</kbd>:</p>
<pre>&lt;page-contact [userInput]="user" *ngIf="showContact"&gt;<br/>&lt;/page-contact&gt;</pre>
<p>When we click on the TOGGLE CONTACT COMPONENT, it shows the same <kbd>Contact Page</kbd> inside <kbd>HomePage</kbd>, as shown in the following screenshot:</p>
<div><img src="img/ed03fb62-cf6b-4ff8-9ba8-18e5ea2013b1.png" style="width:19.08em;height:33.83em;" width="417" height="745"/></div>


            

            
        
    </div>



  
<div><h1 class="header-title">See also</h1>
                
            
            
                
<ul>
<li>Read more about Angular components at <a href="https://angular.io/api/core/Component">https://angular.io/api/core/Component</a>.<a href="https://angular.io/api/core/Component"/></li>
<li>Angular components have a life cycle and events related to it. We can hook up to any life cycle events such as destroy or initialize. Read more about life cycle hooks at <a href="https://angular.io/guide/lifecycle-hooks">https://angular.io/guide/lifecycle-hooks</a>.<a href="https://angular.io/guide/lifecycle-hooks"/></li>
</ul>
<p class="mce-root"/>


            

            
        
    </div>



  </body></html>