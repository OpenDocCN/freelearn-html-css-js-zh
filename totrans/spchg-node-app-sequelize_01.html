<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer030">
<h1 class="chapter-number" id="_idParaDest-16"><a id="_idTextAnchor018"/>1</h1>
<h1 id="_idParaDest-17"><a id="_idTextAnchor019"/>Introduction to Sequelize and ORM in Node.js</h1>
<p>Managing database drivers, managing schematics, maintaining a business’ workflow, and validating data can be daunting for any programmer. Along with perpetually changing business requirements, organizing the business logic into database models can be cumbersome. This usually entails the programmer finding all applicable references and updating queries manually. This could be an expensive operation for both the project and the programmer; without proper testing, the modifications could result in errors within the application or erroneous logic, leaving the programmer, the business, and the customer in a state of confusion.</p>
<p>This book will help guide you through the process of installing, building, maintaining, upgrading, extending, querying, and applying database schematics using an <strong class="bold">object-relational mapping</strong> (<strong class="bold">ORM</strong>) framework in a Node.js application using the Node.js runtime environment. The book can be read from start to finish in a sequential manner, or if you are more experienced, you can read the chapters that interest you directly. Each chapter complements the previous chapter since we will be creating an entire application from scratch. However, more experienced programmers can skip between chapters with the understanding that there may be “gaps” within their data model and what is shown within the chapter. The concepts and methodologies taught in each chapter, regardless of your data’s structure, will still be applicable.</p>
<p>The goal of this chapter is to help you become familiar with what Sequelize is and which capabilities are offered to you from using Sequelize. We will go over the necessary prerequisite steps for installing applicable libraries, frameworks, runtime engines, and <strong class="bold">database management systems</strong> (<strong class="bold">DBMS</strong>). By the end of this chapter, you will have acquired the knowledge and skillset of installing, configuring, and running an application, under the Node.js runtime with Sequelize, from scratch.</p>
<p>The first chapter of this book will cover the following topics:</p>
<ul>
<li>Introducing Sequelize</li>
<li>Advantages of using Sequelize over other alternatives</li>
<li>Installing the necessary applications, frameworks, and tools to help get you started</li>
<li>Configuring Sequelize within an Express application </li>
</ul>
<h1 id="_idParaDest-18"><a id="_idTextAnchor020"/>Technical requirements</h1>
<p>Before we embark on our journey of developing an application with Sequelize, there are a few prerequisites. We will need to install the following:</p>
<ul>
<li>A DBMS such as MySQL</li>
<li>The Node.js runtime library</li>
<li>A few Node.js packages: Sequelize, Express, and a MySQL driver</li>
</ul>
<h1 id="_idParaDest-19"><a id="_idTextAnchor021"/>Introducing Sequelize</h1>
<p><strong class="bold">Sequelize</strong> (also known as <strong class="bold">SequelizeJS</strong>) is an ORM framework that helps connect and correspond your Node.js application <a id="_idIndexMarker000"/>to a database. Sequelize has been in development since 2010 by Sascha Depold and is used extensively within <em class="italic">Fortune 100</em> companies. Throughout the years, the<a id="_idIndexMarker001"/> framework has grown to nearly 25,000 <em class="italic">stargazers</em> on GitHub, with over 900 contributors, and is used by over 300,000 open sourced projects. Sequelize has been <em class="italic">battle-tested</em> for performance and security for over a decade and has performed without issues for major retail stores and web agencies (such as Walmart and Bitnami) even during their highest traffic times of the year.</p>
<p>What started out as a master’s thesis turned into a major integral building block of Node.js’ ecosystem. </p>
<p class="callout-heading">Note</p>
<p class="callout">An ORM is a methodology of associating database structures and information using <strong class="bold">object-oriented</strong> (<strong class="bold">OO</strong>) decorations<a id="_idIndexMarker002"/> and patterns. An ORM’s purpose is to help alleviate the differences between DBMSs and to offer some form of abstraction for querying and manipulating data more ergonomically. Typically, an ORM will also come with helper functions to help manage the state of connections, pre-validation of data, and workflows. </p>
<p>The framework <a id="_idIndexMarker003"/>follows a <strong class="bold">promise-based</strong> approach, which allows programmers to invoke data <a id="_idIndexMarker004"/>asynchronously. The promise-based approach offers a more convenient way of managing returned values, or errors, within your application without waiting for the result(s) to return immediately. To learn more about promises and how to program with them, refer to the following link: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</a>.</p>
<p class="callout-heading">What is asynchronous?</p>
<p class="callout">Think of asynchronous as a way to <a id="_idIndexMarker005"/>perform tasks without having to wait for a response before continuing on with another task. When you text message someone, you do not have to wait for their response in order to continue with your day. After you send a message, you usually would not warrant any attention to the correspondence until you receive a signal that there was a response or that the message had failed to send.</p>
<p>Currently, Sequelize supports the<a id="_idIndexMarker006"/> following DBMSs: MySQL, MariaDB, Postgres, <strong class="bold">Microsoft SQL Server</strong> (<strong class="bold">MSSQL</strong>), Snowflake, <strong class="bold">Database 2</strong> (<strong class="bold">DB2</strong>), and SQLite. An ORM offers more than just a connector to your database. ORMs often offer features<a id="_idIndexMarker007"/> such as the following:</p>
<ul>
<li>Tooling for migrating schemas and data </li>
<li>Adapter/plugin support </li>
<li>Connection pooling </li>
<li>Eager loading of data </li>
<li>Managed transactions</li>
</ul>
<p>Now that we understand <em class="italic">what</em> Sequelize is and its basic capabilities, we will go over <em class="italic">why</em> we should use an ORM such as Sequelize over <a id="_idIndexMarker008"/>alternative methods such as <strong class="bold">data access objects</strong> (<strong class="bold">DAOs</strong>) or querying the database directly. Some of the advantageous capabilities include being able to handle and organize queries within transactions or migrating schematic changes to a database.</p>
<h1 id="_idParaDest-20"><a id="_idTextAnchor022"/>Advantages of using Sequelize over other alternatives</h1>
<p>There are many <a id="_idIndexMarker009"/>alternative ways of querying the database from your application. There are ORMs, DAOs, raw database drivers, and so on. Each methodology has its pros and cons and caters to different programming styles and conventions. Typically, those who favor <em class="italic">convention over configuration</em> tend to gravitate toward ORMs, while those who favor configuration tend to use DAO frameworks or raw database drivers. </p>
<p>An ORM can handle data validation, similar to DAOs, with additional features such as reading and writing from a database using a driver. With ORMs, you would not need to manage query statements manually, which could save you time over the DAO or raw connection methods.</p>
<p class="callout-heading">Note</p>
<p class="callout">An ORM is not mutually exclusive to DAOs. You can think of DAOs as being explicit as opposed to being implicit and presumptuous. A DAO only provides an <em class="italic">interface</em> for your data. It does not involve how/where you read or write the data (the database driver), nor will it concern itself with the data’s integrity unless the application manually invokes some form of data validation outside of the DAO’s scope.</p>
<p>When using an ORM such as Sequelize, you will have the following features without any additional code:</p>
<ul>
<li>Transaction handling</li>
<li>Connection pooling</li>
<li>Model/data validation</li>
<li>Data integrity (outside <a id="_idIndexMarker010"/>of DBMS’ scope of <strong class="bold">foreign keys</strong> (<strong class="bold">FKs</strong>), unique constraints, and so on)</li>
<li>Eager loading</li>
<li>Schematic migration and cascading</li>
<li>Optimistic locking</li>
</ul>
<p>Using a DAO or a raw database driver will forfeit these features, and you will have to build these solutions <a id="_idIndexMarker011"/>yourself. Using an ORM such as Sequelize will help you build your project with more efficiency and efficacy. </p>
<p>So far, we have covered the <em class="italic">what</em> and <em class="italic">why</em> for Sequelize; now, we will be going over the <em class="italic">how</em> for installing the necessary prerequisites for our application.</p>
<h1 id="_idParaDest-21"><a id="_idTextAnchor023"/>Installing the necessary applications, frameworks, and tools to help get you started</h1>
<p>Our application will require customers to view information from a centralized source, and we will need to capture information that they have entered into our database. Usually, customers can either view your product/services via an application that they install on their machine or they can use a browser to visit our website. Node.js is a good choice for building web applications, which is what we’ll be building throughout this book, due to its <strong class="bold">central processing unit</strong> (<strong class="bold">CPU</strong>)-bound <a id="_idIndexMarker012"/>limitations and ease of context switching between <em class="italic">frontend development</em> (what is displayed to the end user) and <em class="italic">backend development</em> (what the end user does not see but still invokes) owing to Node.js being JavaScript. We will need to install the following applications/programs in order to get started:</p>
<ul>
<li>A DBMS (we will be installing MySQL)</li>
<li>Node.js runtime</li>
<li>Sequelize and Express</li>
</ul>
<h2 id="_idParaDest-22"><a id="_idTextAnchor024"/>Installing MySQL</h2>
<p>This next section will go <a id="_idIndexMarker013"/>over the installation process for MySQL on three different operating system distributions: Microsoft Windows, macOS, and Linux. MySQL was chosen due to the ease of<a id="_idIndexMarker014"/> installation (no need to mess with configurations or <strong class="bold">access-control lists</strong> (<strong class="bold">ACLs</strong>)). Do not let those points discourage you from using a different database. For the most part, Sequelize will be able to gracefully translate from one DBMS to another, and the <a id="_idIndexMarker015"/>majority of this book<a id="_idIndexMarker016"/> will use common/standard <strong class="bold">Structured Query Language</strong> (<strong class="bold">SQL</strong>) methods.</p>
<h3>Windows</h3>
<p>The MySQL installer for<a id="_idIndexMarker017"/> Microsoft Windows can be found <a id="_idIndexMarker018"/>here: </p>
<p><a href="https://dev.mysql.com/downloads/mysql/5.7.xhtml">https://dev.mysql.com/downloads/mysql/5.7.xhtml</a></p>
<p class="callout-heading">Note</p>
<p class="callout">The default <strong class="bold">Uniform Resource Locator</strong> (<strong class="bold">URL</strong>) for downloading Windows’ MySQL installer is currently at version <strong class="source-inline">8.0.26</strong>. This book<a id="_idIndexMarker019"/> uses version <strong class="source-inline">5.7</strong>, but other versions of MySQL should still work appropriately as long as the Node.js MySQL driver is compatible with that version.</p>
<p>Once we are finished downloading and opening the installer application, you will be greeted with the <strong class="bold">Choosing a Setup Type</strong> screen. We will want to select the <strong class="bold">Developer Default</strong> and <strong class="bold">Install all products</strong> options, as illustrated in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer007">
<img alt=" Figure 1.1 – Windows MySQL Installer: Choosing a Setup Type " height="587" src="image/Figure_1.1_B17841.jpg" width="813"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> Figure 1.1 – Windows MySQL Installer: Choosing a Setup Type</p>
<p>If you have Python or Visual Studio installed on your computer, you may be greeted with a <strong class="bold">Check Requirements</strong> step (see <em class="italic">Figure 1.2</em>). If you are using Visual Studio as your <strong class="bold">integrated development environment</strong> (<strong class="bold">IDE</strong>), then you may install the necessary products, but it is not a<a id="_idIndexMarker020"/> requirement. Throughout your projects, you may come across a utility that is<a id="_idIndexMarker021"/> written in Python that interacts with your database (for <a id="_idIndexMarker022"/>example, most data science-related libraries/frameworks). By selecting the <strong class="bold">Connector/Python</strong> option shown in the following screenshot, we can avoid potential headaches in the future:</p>
<div>
<div class="IMG---Figure" id="_idContainer008">
<img alt="Figure 1.2 – Windows MySQL Installer: Check Requirements " height="406" src="image/Figure_1.2_B17841.jpg" width="781"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Windows MySQL Installer: Check Requirements</p>
<p>The next section should<a id="_idIndexMarker023"/> be the <strong class="bold">Download</strong> step. The main products that we will be required for the contents of this book are listed here:</p>
<ul>
<li><strong class="bold">MySQL Server</strong></li>
<li><strong class="bold">MySQL Workbench</strong> (for a <strong class="bold">graphical user interface</strong> (<strong class="bold">GUI</strong>) to our <a id="_idTextAnchor025"/>database)</li>
<li><strong class="bold">MySQL Shell</strong></li>
</ul>
<p>You can see the aforementioned products in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer009">
<img alt="Figure 1.3 – Windows MySQL Installer: Download " height="524" src="image/Figure_1.3_B17841.jpg" width="779"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – Windows MySQL Inst<a id="_idTextAnchor026"/>aller: Download</p>
<p class="callout-heading">Note</p>
<p class="callout">If you are new to MySQL, it may be a good idea to download the <strong class="bold">MySQL Documentation</strong> and <strong class="bold">Samples and Examples</strong> packages.</p>
<p>After we have finished <a id="_idIndexMarker024"/>downloading our packages, we will be entering our <a id="_idIndexMarker025"/>configuration details for each applicable selected product (for example, <strong class="bold">MySQL Server</strong> and <strong class="bold">Samples and Examples</strong>). For the majority of the configuration settings, we will be using the default values; however, there will be some steps that will require your intervention. You can see an overview of this in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer010">
<img alt="Figure 1.4 – Windows MySQL Installer: Type and Networking " height="488" src="image/Figure_1.4_B17841.jpg" width="795"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – Windows MySQL Installer: Type and Networking</p>
<p>From the <strong class="bold">MySQL Server</strong> configuration <a id="_idIndexMarker026"/>wizard, we will want the following<a id="_idIndexMarker027"/> settings (as shown in <em class="italic">Figure 1.4</em>):</p>
<ul>
<li><strong class="bold">Config Type</strong>: <strong class="bold">Development Computer</strong></li>
<li><strong class="bold">TCP/IP</strong>: Checked</li>
<li><strong class="bold">Port</strong>: <strong class="source-inline">3306</strong></li>
<li><strong class="bold">Open Windows Firewall port for network access</strong>: Optional</li>
</ul>
<p>The next part of the MySQL Server configuration step is to declare your MySQL root password and user accounts. Make sure to keep this information in a safe place in case you run into administration issues throughout your projects. If you forget the MySQL root password, there are several methods for resetting the password, as explained here: <a href="https://dev.mysql.com/doc/mysql-windows-excerpt/5.7/en/resetting-permissions-windows.xhtml">https://dev.mysql.com/doc/mysql-windows-excerpt/5.7/en/resetting-permissions-windows.xhtml</a>.</p>
<p>For setting up a MySQL user account with a role, you will be greeted with the following <strong class="bold">Accounts and Roles</strong> screen:</p>
<div>
<div class="IMG---Figure" id="_idContainer011">
<img alt="Figure 1.5 – Windows MySQL Installer: Accounts and Roles " height="448" src="image/Figure_1.5_B17841.jpg" width="782"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – Windows MySQL Installer: Accounts and Roles</p>
<p>Within the <strong class="bold">MySQL User Accounts</strong> section, you will need to click on the <strong class="bold">Add User</strong> button (near the right side of the window, as shown in <em class="italic">Figure 1.5</em>) and type in a username and password <a id="_idIndexMarker028"/>that you will memorize for when we initialize our Node.js application. When you are finished adding the appropriate root password and <a id="_idIndexMarker029"/>MySQL user account(s), we can proceed to the next step.</p>
<p>Next, the installation process will offer a <strong class="bold">Configure MySQL Server as a Windows Service</strong> option, as illustrated in the following screenshot. <strong class="bold">Windows Service</strong> is a <strong class="bold">process control system</strong> (<strong class="bold">PCS</strong>) that will <a id="_idIndexMarker030"/>also orchestrate background <a id="_idIndexMarker031"/>processes (in the Unix/Linux world, these are referred to as <em class="italic">daemons</em>): </p>
<div>
<div class="IMG---Figure" id="_idContainer012">
<img alt="Figure 1.6 – Windows MySQL Installer: Windows Service " height="497" src="image/Figure_1.6_B17841.jpg" width="780"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.6 – Windows MySQL Installer: Windows Service</p>
<p>We will want to ensure<a id="_idIndexMarker032"/> the following parameters are configured (as shown in <em class="italic">Figure 1.6</em>):</p>
<ul>
<li><strong class="bold">Configure MySQL Server as a Windows Service</strong>: Checked</li>
<li><strong class="bold">Start the MySQL Server at System Startup</strong>: Checked</li>
<li><strong class="bold">Standard System Account</strong> selected under the <strong class="bold">Run Windows Service as...</strong> section</li>
</ul>
<p>Click on <strong class="bold">Next &gt;</strong> to apply our<a id="_idIndexMarker033"/> configurations for the MySQL server. If you selected additional packages to install earlier, you may be prompted with additional screens asking for more configuration settings and parameters.</p>
<p class="callout-heading">Note</p>
<p class="callout">If you selected the <strong class="bold">MySQL Router</strong> package from the previous section, the installation process will ask you for information on how you would like to set up a cluster environment. It is not recommended to install this package unless you are a database administrator or you are setting up a production environment. Simply uncheck the <strong class="bold">Bootstrap MySQL Router for use with InnoDB cluster</strong> option and click <strong class="bold">Finish </strong>to proceed without installing MySQL under a cluster environment.</p>
<p>If the <strong class="bold">Samples and Examples</strong> package was selected for installation, we will be prompted with a screen that will allow <a id="_idIndexMarker034"/>us to enter our MySQL username and password. You may use your <em class="italic">root credentials</em> for the username and password input<a id="_idIndexMarker035"/> fields and click on the <strong class="bold">Next &gt;</strong> button to continue. An overview of the screen is provided in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer013">
<img alt="Figure 1.7 – Windows MySQL Installer: Connect To Server " height="426" src="image/Figure_1.7_B17841.jpg" width="777"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.7 – Windows MySQL Installer: Connect To Server</p>
<h3>macOS</h3>
<p>There are a couple<a id="_idIndexMarker036"/> of ways to install MySQL on a macOS machine. The first<a id="_idIndexMarker037"/> way is to download and install MySQL<a id="_idIndexMarker038"/> from a <strong class="bold">Disk iMaGe</strong> (<strong class="bold">DMG</strong>) file, while another method is by using a package manager such as Homebrew. We will explore both options.</p>
<h4>Installing from disk image</h4>
<p>You can find the <a id="_idIndexMarker039"/>appropriate disk image from the<a id="_idIndexMarker040"/> following URL: <a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a> (x86 for Intel CPUs and <strong class="bold">Advanced RISC Machine</strong> (<strong class="bold">ARM</strong>) for M1 CPUs).</p>
<p class="callout-heading">Note</p>
<p class="callout">If you cannot find version 5.7 for MySQL, you will find the appropriate DMG file from MySQL’s archive link: <a href="https://downloads.mysql.com/archives/community">https://downloads.mysql.com/archives/community</a>.</p>
<p class="callout">However, the macOS installation packages may not be available to download for the most recent 5.7 versions. At the time of writing this book, versions 5.7.34, 5.7.33, and 5.7.32 are not available as a DMG package (5.7.31 is available to download). Any applicable 5.7 version should be compatible with this book’s instructions and installation procedures. </p>
<p>If you are asked about installing a preference panel throughout the installation process, we recommend you do so. Otherwise, we will need to consult the <strong class="bold">Installing a MySQL Launch Daemon</strong> page, located at <a href="https://dev.mysql.com/doc/refman/5.7/en/macos-installation-launchd.xhtml">https://dev.mysql.com/doc/refman/5.7/en/macos-installation-launchd.xhtml</a>.</p>
<p>After downloading and opening the DMG file, we will want to open the <strong class="bold">package</strong> (<strong class="bold">pkg</strong>) file, which will start our<a id="_idIndexMarker041"/> installation process. Depending on your macOS version, you may be prompted with a <strong class="bold">“[package name]” can’t be opened because Apple cannot check it for malicious software</strong> screen, as shown here: </p>
<div>
<div class="IMG---Figure" id="_idContainer014">
<img alt="Figure 1.8 – Apple cannot identify the package for maliciousness " height="349" src="image/Figure_1.8_B17841.jpg" width="597"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.8 – Apple cannot identify the package for maliciousness</p>
<p>If this is the case<a id="_idIndexMarker042"/> for you, go to <strong class="bold">Apple</strong> | <strong class="bold">Security &amp; Privacy</strong>, and the window should have an <strong class="bold">Open Anyway</strong> button next to <strong class="bold">“mysql….pkg” was blocked from use because it is not from an identified developer.</strong>, as shown in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer015">
<img alt="Figure 1.9 – Bypassing unidentified package installations " height="421" src="image/Figure_1.9_B17841.jpg" width="654"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.9 – Bypassing unidentified package installations</p>
<p>Once the installation package opens again, you may be prompted with another alert from Apple. Click on <strong class="bold">Open</strong> to <a id="_idIndexMarker043"/>continue with the installation process. After continuing and reading the <strong class="bold">software license agreement</strong> (<strong class="bold">SLA</strong>), you may select the default installation location. Clicking on <strong class="bold">Install</strong> may prompt for your administrative password, as illustrate<a id="_idTextAnchor027"/>d in the following screenshot:</p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
<div>
<div class="IMG---Figure" id="_idContainer016">
<img alt="Figure 1.10 – MySQL installation asking for administrative permission " height="185" src="image/Figure_1.10_B17841.jpg" width="636"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.10 – MySQL installation aski<a id="_idTextAnchor028"/>ng for administrative permission</p>
<p>Once the MySQL<a id="_idIndexMarker044"/> installer finishes, an alert dialog will appear with a temporary password. An example is shown in the following screenshot. Make sure to take note of the temporary password for when we log in to the MySQL server:</p>
<div>
<div class="IMG---Figure" id="_idContainer017">
<img alt="Figure 1.11 – MySQL installation providing a temporary root password " height="207" src="image/Figure_1.11_B17841.jpg" width="707"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.11 – MySQL installation providing a temporary root password</p>
<h4>Installing from Homebrew</h4>
<p>Using Homebrew over<a id="_idIndexMarker045"/> traditional package installers can help keep your packages up to date without manual intervention, along with validating package installations and binaries. To install MySQL through Homebrew, we will need to install Homebrew on our local machine. Within the terminal (located in <strong class="bold">Applications</strong> &gt; <strong class="bold">Utilities</strong>), simply type in the following:</p>
<p class="source-code">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</p>
<p class="callout-heading">Note</p>
<p class="callout">It is always a good idea to double-check an external script’s contents before running commands from it. A web page can redirect to anywhere, including malicious scripts that could lead to data breaches or something more nefarious.</p>
<p>When installing Homebrew, you may come across the following message: </p>
<pre class="source-code">
==&gt; Checking for `sudo` access (which may request your password)</pre>
<p>You can see an<a id="_idIndexMarker046"/> illustration of th<a id="_idTextAnchor029"/>is in the following screenshot:</p>
<div>
<div class="IMG---Figure" id="_idContainer018">
<img alt="Figure 1.12 – Installing Homebrew on macOS " height="731" src="image/Figure_1.12_B17841.jpg" width="923"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.12 – Installing Homebrew on macOS</p>
<p>You can either enter in your password here or before installing Homebrew, run <strong class="source-inline">sudo &lt;anything&gt;</strong> (for example, <strong class="source-inline">sudo ls</strong>), enter in your password, and then run the installation command. The user must have admin<a id="_idTextAnchor030"/>istrator access before continuing.</p>
<p>For this book, we will install MySQL version 5.7. Other versions of MySQL should be compatible with the book’s code base, as previously noted. To install version 5.7 explicitly, run the following command:</p>
<p class="source-code">brew install mysql@5.7</p>
<p>There may be additional steps and commands to run in order to set up your instance properly, as illustrated in the following screenshot. The book’s contents will not require library/header<a id="_idIndexMarker047"/> files for compilation, nor for <strong class="source-inline">pkg-config</strong> to be configured. As a general rule, it is recommended to run <strong class="source-inline">mysql_secure_installation</strong> and go through the prompts for adding a root password, but it is not a requirement:</p>
<div>
<div class="IMG---Figure" id="_idContainer019">
<img alt="Figure 1.13 – Installing MySQL with Homebrew on macOS " height="712" src="image/Figure_1.13_B17841.jpg" width="936"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.13 – Installing MySQL with Homebrew on macOS</p>
<p>Next, we will need a way to manage our MySQL service. There are two options available to us, as outlined here:</p>
<ul>
<li>Manually create launch daemon configuration files. More information on how this can be achieved is available here: <a href="https://dev.mysql.com/doc/refman/5.7/en/macos-installation-launchd.xhtml">https://dev.mysql.com/doc/refman/5.7/en/macos-installation-launchd.xhtml</a>.</li>
<li>We can use a Homebrew extension known as <strong class="source-inline">services</strong> to manage launch configurations automatically by executing the following command:<p class="source-code"><strong class="bold">brew tap homebrew/services</strong></p></li>
</ul>
<p>In order to start the MySQL service, we need to run the following command:</p>
<p class="source-code"><strong class="bold">brew services start mysql@5.7</strong></p>
<p>If you prefer a GUI version of managing your services, there is an application called <strong class="source-inline">brew-services-menubar</strong> that <a id="_idIndexMarker048"/>can be installed via Homebrew’s Cask extension, as shown in the following code snippet:</p>
<p class="source-code">brew install --cask brewservicesmenubar</p>
<p class="callout-heading">Note</p>
<p class="callout">If you prefer to use a GUI when interfacing/querying databases, there is a free application called Sequel Pro that is <a id="_idIndexMarker049"/>available for downloading here:</p>
<p class="callout"><a href="http://www.sequelpro.com/">http://www.sequelpro.com/</a> </p>
<h3>Linux</h3>
<p>There are numerous<a id="_idIndexMarker050"/> distributions of Linux; for this book, we will be using <a id="_idIndexMarker051"/>Ubuntu (any Debian distribution should be applicable with the same commands). If you are using a different distribution, please refer to this page for instructions on how to install MySQL for your operating system: <a href="https://dev.mysql.com/doc/refman/5.7/en/linux-installation.xhtml">https://dev.mysql.com/doc/refman/5.7/en/linux-installation.xhtml</a>.</p>
<p>Within the terminal, run the following commands (these are also shown in the screenshot that follows):</p>
<p class="source-code">sudo apt-get update</p>
<p class="source-code">sudo apt install mysql-server</p>
<div>
<div class="IMG---Figure" id="_idContainer020">
<img alt="Figure 1.14 – Installing MySQL Server on Ubuntu " height="625" src="image/Figure_1.14_B17841.jpg" width="955"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.14 – Installing MySQL Server on Ubuntu</p>
<p>After MySQL has finished its installation, we will need to initialize a database to store all of our model’s schemas <a id="_idIndexMarker052"/>and information. Some ORMs and DBMSs will refer to <a id="_idIndexMarker053"/>databases as “schemas” (not to be confused with a <a id="_idIndexMarker054"/>model’s schema, which is referred to as “attributes” in Sequelize specifically).</p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor031"/>Creating a database</h2>
<p>Now that we have finished installing the MySQL DBMS engine on our local machine, we can start creating a database with some tables. Before creating tables, we will need to go over the <a id="_idIndexMarker055"/>various types of MySQL engines. Luckily for us, the following is applicable to all operating systems in the same way.</p>
<p>By default, MySQL will create an InnoDB database type (or, in MySQL terms, engine). Database engines are associated with the database’s table on MySQL (and not the entire database itself). This is useful when you know the trade-offs between a read-heavy table with no constraints (for example, news articles) and a write-heavy table (for example, a chatroom). For the sake of brevity, we will go over the main three database engines, as follows:</p>
<ul>
<li><strong class="bold">InnoDB</strong>: A database<a id="_idIndexMarker056"/> engine with transactional queries and FK support. Transactional queries are useful for executing a query, or several queries, with atomicity. We will go into further details about transactions and FKs in a later chapter.</li>
<li><strong class="bold">MyISAM</strong>: If the majority of your database’s operations are read-related and you do not require any data <a id="_idIndexMarker057"/>constraints, this would be a preferred database engine to use.</li>
<li><strong class="bold">HEAP</strong>: The data stored<a id="_idIndexMarker058"/> within these tables is contained within the machine’s memory. This database engine is useful if you had to query against temporary data quickly. MySQL will not manage memory allocations for you, so it is important to remember to delete tables when they are no longer in use (and that the data fits into the machine’s available memory).</li>
</ul>
<p class="callout-heading">Note</p>
<p class="callout">You can always check your local MySQL server’s default engine type by entering the following command within a MySQL client: <strong class="source-inline">SELECT @@default_storage_engine;</strong>.</p>
<p>You may skip this<a id="_idIndexMarker059"/> section and use the Sequelize <strong class="bold">command-line interface</strong>’s (<strong class="bold">CLI</strong>’s) (installation instructions are given later within this chapter) <strong class="source-inline">db:create</strong> command, as long as the <a id="_idIndexMarker060"/>applicable MySQL user has the appropriate permissions. For the intent of becoming familiar with the terminal, we will create the database using command lines, as shown in the next screenshot.</p>
<p>Log in to the MySQL server with the following command (you may be prompted to enter in a password, or the additional <strong class="source-inline">-p</strong> parameter is required to enter in a password):</p>
<p class="source-code">mysql --user=root</p>
<p>We can create our database by executing the following SQL command within the MySQL client Command Prompt:</p>
<p class="source-code">CREATE DATABASE airline;</p>
<p class="callout-heading">For Windows users</p>
<p class="callout">Most of these commands are executable via the Command Prompt or PowerShell applications. These applications can be accessed from the <strong class="bold">Start</strong> menu (for example, <strong class="bold">Start</strong> &gt; <strong class="bold">All Programs</strong> &gt; <strong class="bold">Accessories</strong> &gt; <strong class="bold">Windows PowerShell</strong>).</p>
<div>
<div class="IMG---Figure" id="_idContainer021">
<img alt="Figure 1.15 – Creating a database " height="306" src="image/Figure_1.15_B17841.jpg" width="614"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.15 – Creating a database</p>
<p>If you are using a<a id="_idIndexMarker061"/> Windows machine, you may use any terminal application of your choice (Command Prompt, PowerShell, and so on), or you can use MySQL Workbench, as shown in the following screenshot, which we installed in the previous section:</p>
<div>
<div class="IMG---Figure" id="_idContainer022">
<img alt="Figure 1.16 – MySQL Workbench: Creating a database " height="681" src="image/Figure_1.16_B17841.jpg" width="1182"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.16 – MySQL Workbench: Creating a database</p>
<p class="callout-heading">Note</p>
<p class="callout">To execute a query using MySQL Workbench, there is a <em class="italic">thunderbolt</em> icon within the query’s toolbar (the icon is usually next to the <em class="italic">save</em> icon). Your query’s results will appear at the bottom of your screen in the <strong class="bold">Output</strong> section.</p>
<h2 id="_idParaDest-24"><a id="_idTextAnchor032"/>Installing Node.js</h2>
<p>At the<a id="_idIndexMarker062"/> time of writing this book, the <strong class="bold">long-term support</strong> (<strong class="bold">LTS</strong>) version of Node.js is 16. Throughout this book, we will be using this version of Node.js, but the code base should still execute <a id="_idIndexMarker063"/>without issues using other releases. All of the corresponding operating<a id="_idIndexMarker064"/> system installations of Node.js can be found here: <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>.</p>
<p class="callout-heading">Note</p>
<p class="callout">If the LTS version of<a id="_idIndexMarker065"/> Node.js is no longer version 16 and you want to use the same version as this book, you can download previous Node.js versions here: <a href="https://nodejs.org/en/download/releases/">https://nodejs.org/en/download/releases/</a>.</p>
<p class="callout">For managing multiple Node.js versions on one machine, there is an application called <strong class="bold">Node Version Manager</strong> (<strong class="bold">NVM</strong>) that can <a id="_idIndexMarker066"/>handle and maintain several versions of Node.js on the same machine. For more information, you can visit their repository at <a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a>.</p>
<h3>Windows</h3>
<p>After we are done <a id="_idIndexMarker067"/>downloading and opening the Node.js <a id="_idIndexMarker068"/>Windows installer, we will be prompted with the following screen: </p>
<div>
<div class="IMG---Figure" id="_idContainer023">
<img alt="Figure 1.17 – Windows Node.js installer: Destination Folder " height="246" src="image/Figure_1.17_B17841.jpg" width="544"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.17 – Windows Node.js installer: Destination Folder</p>
<p>Clicking on <strong class="bold">Next</strong> will bring us to the <strong class="bold">Custom Setup</strong> step of the installation. Ensure that you are <a id="_idIndexMarker069"/>installing/configuring the following:</p>
<ul>
<li><strong class="bold">Node.js runtime</strong></li>
<li><strong class="bold">npm package manager</strong></li>
<li><strong class="bold">Add to PATH</strong></li>
</ul>
<p>You can see an<a id="_idIndexMarker070"/> overview of this screen here:</p>
<div>
<div class="IMG---Figure" id="_idContainer024">
<img alt="Figure 1.18 – Windows Node.js installer: Custom Setup " height="382" src="image/Figure_1.18_B17841.jpg" width="670"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.18 – Windows Node.js installer: Custom Setup</p>
<p>After the <strong class="bold">Custom Setup</strong> step, we will be brought to a <strong class="bold">Tools for Native Modules</strong> section. By default, the checkbox for installing the necessary tools is unchecked. For development purposes, we will want to make sure that the automatic installation option is checked, as depicted in the following screenshot: </p>
<div>
<div class="IMG---Figure" id="_idContainer025">
<img alt="Figure 1.19 – Windows Node.js installer: Tools for Native Modules " height="303" src="image/Figure_1.19_B17841.jpg" width="659"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.19 – Windows Node.js installer: Tools for Native Modules</p>
<p>Selecting the <a id="_idIndexMarker071"/>automatic tool installation will prompt a <a id="_idIndexMarker072"/>PowerShell window to appear, as illustrated in the next screenshot, showing you the status of installation progress for Chocolatey, .NET packages, Python dependencies, and so on. </p>
<div>
<div class="IMG---Figure" id="_idContainer026">
<img alt="Figure 1.20 – Windows Node.js installation: additional tools " height="827" src="image/Figure_1.20_B17841.jpg" width="1215"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.20 – Windows Node.js installation: additional tools</p>
<p class="callout-heading">Note</p>
<p class="callout">Chocolatey is a package manager for Microsoft’s Windows operating system. If you are familiar with the macOS environment, this would be similar to Homebrew or Apt on a Debian Linux distribution. For <a id="_idIndexMarker073"/>more information on Chocolatey, please<a id="_idIndexMarker074"/> refer to the following link: <a href="https://chocolatey.org/">https://chocolatey.org/</a>.</p>
<h3>macOS</h3>
<p>You can install <a id="_idIndexMarker075"/>Node.js for macOS via its<a id="_idIndexMarker076"/> package image, which is located at <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>, or you can install it <a id="_idIndexMarker077"/>with Homebrew by running the following command:</p>
<p class="source-code">brew install node@16</p>
<p>To confirm that your machine is using the correct “node” binary, we can always check the version by running the following command:</p>
<p class="source-code">node -v</p>
<h3>Linux</h3>
<p>For Ubuntu/Debian<a id="_idIndexMarker078"/> Linux distributions, we can use a specific repository<a id="_idIndexMarker079"/> to install Node.js 14, as illustrated in the following code snippet:</p>
<p class="source-code">sudo apt update</p>
<p class="source-code">curl -sL https://deb.nodesource.com/setup_14.x | sudo bash -</p>
<p>After the repository has been added, we can install Node.js and check the version, like so:</p>
<p class="source-code">sudo apt -y install nodejs</p>
<p class="source-code">node -v</p>
<p>So far, we have finished installing MySQL as our DBMS, applicable package managers, and the Node.js runtime library; we can now begin to scaffold our project and install the necessary Node.js packages for Sequelize and Express.</p>
<h1 id="_idParaDest-25"><a id="_idTextAnchor033"/>Configuring Sequelize within an Express application</h1>
<p>After we have installed<a id="_idIndexMarker080"/> our development tools and database, we can begin installing and configuring our application with Sequelize and <strong class="bold">Express</strong>. Express is a minimal web framework for Node.js runtime applications. Our Node.js application will use<a id="_idIndexMarker081"/> Sequelize to correspond with the database, and Express will relay those query results to the browser. More<a id="_idIndexMarker082"/> information on Express, along with a complete reference, can be found here: <a href="https://expressjs.com">https://expressjs.com</a>.</p>
<p>Within Command Prompt, PowerShell, or the terminal, enter the following commands for initializing our project:</p>
<p class="source-code">mkdir airline</p>
<p class="source-code">cd airline</p>
<p class="source-code">npm init -y</p>
<p>This will create a directory called <strong class="source-inline">airline</strong>; then, we will change our working directory to the <strong class="source-inline">airline</strong> folder, and we will run an initialization<a id="_idIndexMarker083"/> script from the <strong class="bold">node package manager</strong> (<strong class="bold">npm</strong>). The <strong class="source-inline">npm</strong> command will create a <strong class="source-inline">package.json</strong> file that contains a bare configuration for npm to use on this project. After that, we will need to install the minimum required Node.js modules for our application, as follows:</p>
<p class="source-code">npm install express sequelize mysql2</p>
<p>Here is an online resource that you may refer to for a complete list of options for npm: </p>
<p><a href="https://docs.npmjs.com/cli/v7/commands">https://docs.npmjs.com/cli/v7/commands</a> </p>
<p>Sequelize has a companion executable to help us initialize our project, manage updates to our schema, and handle database migrations. We can install it as a global (<strong class="source-inline">--location=global</strong>) binary within our userspace by entering the following command in our terminal:</p>
<p class="source-code">npm install --location=global sequelize</p>
<p>For a full list of commands available to you, the CLI has documentation built in that can be exposed using the <strong class="source-inline">-h</strong> or <strong class="source-inline">--help</strong> flags, as illustrated in the following screenshot: </p>
<div>
<div class="IMG---Figure" id="_idContainer027">
<img alt="Figure 1.21 – Sequelize CLI installation and help guide " height="709" src="image/Figure_1.21_B17841.jpg" width="836"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.21 – Sequelize CLI installation and help guide</p>
<p>The next step is to<a id="_idIndexMarker084"/> initialize a generic template that Sequelize provides<a id="_idIndexMarker085"/> for us from the CLI. This will generate several directories for configuration, migration, seed, and model files. Here’s the code to do this:</p>
<p class="source-code">sequelize init</p>
<p>The following list offers a brief explanation of the directories created by the CLI in our project’s directory:</p>
<ul>
<li><strong class="source-inline">config</strong>: A directory that contains a database connection configuration file in <strong class="bold">JavaScript Object Notation</strong> (<strong class="bold">JSON</strong>) format. The <strong class="source-inline">sequelize-cli</strong> tool uses this configuration<a id="_idIndexMarker086"/> file to migrate schema and data files, but these configuration settings could also be used for our Node.js application as well.</li>
<li><strong class="source-inline">migrations</strong>: A directory containing Node.js files with instructions for Sequelize on how to scaffold your database’s schema and structure.</li>
<li><strong class="source-inline">models</strong>: A collection of Node.js files with Sequelize schema definitions.</li>
<li><strong class="source-inline">seeders</strong>: Similar to the <strong class="source-inline">migrations</strong> directory but instead of defining our database’s schema, we will define our database’s data.</li>
</ul>
<p>Now that we have the initial foundation of our application, we can edit our Sequelize configuration file located in <strong class="source-inline">config/config.json</strong>. Depending on which installation instructions you followed, the username and password values may be different than the book’s code base. The <a id="_idIndexMarker087"/>code is illustrated in the<a id="_idIndexMarker088"/> following snippet:</p>
<pre class="source-code">
{
  "development": {
    "username": "root",
    "password": null,
    "database": "airline",
    "host": "127.0.0.1",
    "dialect": "mysql"
  },
  "test": {
    "username": "root",
    "password": null,
    "database": "airline",
    "host": "127.0.0.1",
    "dialect": "mysql"
  },
  "production": {
    "username": "root",
    "password": null,
    "database": "airline",
    "host": "127.0.0.1",
    "dialect": "mysql"
  }
} </pre>
<p>If you do not wish to keep usernames and passwords in a file (which is a good idea for production environments or version control repositories), there is an alternative form for the configuration file that can <a id="_idIndexMarker089"/>accept an environment<a id="_idIndexMarker090"/> key with a connection <strong class="bold">Uniform Resource Identifier</strong> (<strong class="bold">URI</strong>) resource<a id="_idIndexMarker091"/> as the input (for example, <strong class="source-inline">mysql://root:password@127.0.0.1:3306/airline</strong>), as illustrated in the following code snippet:</p>
<pre class="source-code">
{
  "development": {
    "use_env_variable": "DB_DEV_ENV"
  },
  "test": {
    "use_env_variable": "DB_TEST_ENV"
  },
  "production": {
    "use_env_variable": "DB_PRODUCTION_ENV"
  }
}</pre>
<p>If we wanted to use the <strong class="source-inline">development</strong> configuration, our Node.js application would know to look for the connection parameters/URI from an environment variable called <strong class="source-inline">DB_DEV_ENV</strong> (you may use the same environment variable for any stage). For more options and configuration settings for the Sequelize CLI, refer to this resource: <a href="https://github.com/sequelize/cli/blob/master/docs/README.md">https://github.com/sequelize/cli/blob/master/docs/README.md</a>.</p>
<p class="callout-heading">Note</p>
<p class="callout">You can toggle between which environment you would like your application to be in by setting a <strong class="source-inline">NODE_ENV</strong> environment variable. The default value is <strong class="source-inline">development</strong> but if we wanted to use our <strong class="source-inline">production</strong> environment, we would set the environment like so: <strong class="source-inline">NODE_ENV=production</strong>.</p>
<h2 id="_idParaDest-26"><a id="_idTextAnchor034"/>Connecting Sequelize with Express</h2>
<p>We can now begin<a id="_idIndexMarker092"/> building our Node.js application by<a id="_idIndexMarker093"/> creating an <strong class="source-inline">index.js</strong> file within the project’s directory and opening the file in our IDE of choice. Let us begin by typing in the following code:</p>
<pre class="source-code">
const express = require("express");
const app = express();
const models = require("./models");
models.sequelize.sync().then(function () {
    console.log("&gt; database has been synced");
    }).catch(function (err) {
    console.log(" &gt; there was an issue synchronizing the
                    database", err);
});
app.get('/', function (req, res) {
    res.send("Welcome to Avalon Airlines!");
});
app.listen(3000, function () {
    console.log("&gt; express server has started");
});</pre>
<p>We begin by declaring our Express/web application variables (<strong class="source-inline">express</strong> and <strong class="source-inline">app</strong>) with the first two lines of the code. The next line is shorthand for invoking the <strong class="source-inline">./models/index.js</strong> file that was created by the Sequelize CLI from earlier (we will go into details of that file in the next chapter). The following line runs the Sequelize <strong class="source-inline">sync()</strong> command, which will synchronize your model definitions with a database by creating the necessary tables, indices, and so on. It will also establish associations/relations, execute sync-related hooks/events, and so on.</p>
<p>The <strong class="source-inline">sync()</strong> command offers <a id="_idIndexMarker094"/>several options that are encapsulated within an object as the first parameter, as outlined here:</p>
<ul>
<li><strong class="source-inline">force</strong>: A Boolean value that will drop your database’s tables before re-creating them.</li>
<li><strong class="source-inline">match</strong>: A <strong class="bold">regular expression</strong> (<strong class="bold">regex</strong>) value to match against table names to sync. Useful for testing or to ensure only <a id="_idIndexMarker095"/>certain tables are affected by the <strong class="source-inline">force</strong> option within a production environment. </li>
<li><strong class="source-inline">logging</strong>: A Boolean or function value. <strong class="source-inline">true</strong> (the default) will use <strong class="source-inline">console.log</strong> when executing queries for logging. <strong class="source-inline">false</strong> will disable entirely, and a function can be used to send logs and context to another adapter. This book will go into detail about this option in a later chapter.</li>
<li><strong class="source-inline">schema</strong>: A string value for defining which database to operate in. Useful for when you are using a DBMS such as Postgres, which allows you to separate tables by not only a database (which MySQL calls a “schema”) but also by a namespace (which Postgres calls “schema”).</li>
<li><strong class="source-inline">searchPath</strong>: A string value to define the default <strong class="source-inline">search_path</strong> for Postgres databases only. This option will not pertain to this book’s code base or content.</li>
<li><strong class="source-inline">hooks</strong>: A Boolean value (defaults to <strong class="source-inline">true</strong>) to execute several hooks/events that are related to sync events (<strong class="source-inline">beforeSync</strong>, <strong class="source-inline">afterSync</strong>, <strong class="source-inline">beforeBulkSync</strong>, and <strong class="source-inline">afterBulkSync</strong>). <strong class="source-inline">false</strong> will disable events from executing.</li>
<li><strong class="source-inline">alter</strong>: An object with the following parameter:<ul><li><strong class="source-inline">drop</strong>: A Boolean value that prevents any <strong class="source-inline">drop</strong> statements from being executed when Sequelize needs to run <strong class="source-inline">ALTER</strong> commands within the database.</li></ul></li>
</ul>
<p>You can define these options like so:</p>
<pre class="source-code">
models.sequelize.sync({
  force: true,
  logging: false
})</pre>
<p class="callout-heading">Note</p>
<p class="callout">It is <em class="italic">not</em> recommended by the Sequelize community to run the <strong class="source-inline">force</strong> option as <strong class="source-inline">true</strong> within a production environment. This could have unintentional consequences such as deleting vital customer/user information. The <strong class="source-inline">force</strong> option is for when you are still prototyping your application and want to start your application on a clean slate per iteration.</p>
<p>The next command, <strong class="source-inline">app.get(...)</strong>, instructs the<a id="_idIndexMarker096"/> Express framework to route the <strong class="source-inline">"/"</strong> (root) path of our web application to the scoped function (in this case, we are sending text back to the browser, as shown in <em class="italic">Figure 1.22</em>). After that, we start the Express server by calling <strong class="source-inline">app.listen(...)</strong>, which will tell our <a id="_idIndexMarker097"/>application to listen for <strong class="bold">Hypertext Transfer Protocol</strong> (<strong class="bold">HTTP</strong>) events on port <strong class="source-inline">3000</strong>, which can be accessed in our browser via <strong class="source-inline">http://localhost:3000</strong> or <strong class="source-inline">http://127.0.0.1:3000</strong>, depending on your network interface settings. For starting our application, we can run the following command within our terminal/PowerShell:</p>
<p class="source-code">node index.js</p>
<p>You should see text displayed on your screen indicating the following:</p>
<ul>
<li>Express has started</li>
<li>A SQL query was executed</li>
<li>The database has been synced</li>
</ul>
<p class="callout-heading">Note</p>
<p class="callout">Sequelize will automatically execute a <strong class="source-inline">SELECT 1+1 AS result</strong> query as a method for checking on the database connection’s health. Not all DBMSs offer a way of sending a <strong class="source-inline">ping</strong> packet to check whether a connection is successful or not. </p>
<p>Now, when you open<a id="_idIndexMarker098"/> your browser and visit the previously mentioned URL, you should see a page similar to what is shown here: </p>
<div>
<div class="IMG---Figure" id="_idContainer028">
<img alt="Figure 1.22 – Welcome page " height="104" src="image/Figure_1.22_B17841.jpg" width="714"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.22 – Welcome page</p>
<p>Every time we make a change to our application, we will need to terminate our current process (<em class="italic">Ctrl</em> + <em class="italic">C</em>) within the terminal. This will send a <strong class="source-inline">SIGINT</strong> signal to the process, which will send an interrupt signal to the process in order to begin cleaning up and then exit/stop. To avoid having to restart our process manually after every change, we can install a separate<a id="_idIndexMarker099"/> process to help facilitate this for us called Nodemon (more information can be found here: <a href="https://nodemon.io/">https://nodemon.io/</a>).</p>
<p>Nodemon may be installed as a global binary by running the following command:</p>
<p class="source-code">npm install -g nodemon</p>
<p>You can confirm if the installation was successful by typing in the following:</p>
<p class="source-code">nodemon index.js</p>
<p>This should start our Node.js application while simultaneously watching for changed files within our project’s directory. Once we have made a modification to the project, we should see Nodemon automatically restarting our process, as illustrated in the following screenshot: </p>
<div>
<div class="IMG---Figure" id="_idContainer029">
<img alt="Figure 1.23 – Nodemon automatically restarting the application " height="318" src="image/Figure_1.23_B17841.jpg" width="690"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.23 – Nodemon automatically restarting the application</p>
<p>The last step for this chapter is to make a few adjustments to our <strong class="source-inline">package.json</strong> file, as follows:</p>
<ul>
<li>Add <strong class="source-inline">"private": true</strong> under the <strong class="source-inline">"name": "airline,"</strong> line. This adjustment will <a id="_idIndexMarker100"/>prevent us (or anyone else on the team) from publishing our project to the public npm registry.</li>
<li>Look for the <strong class="source-inline">scripts</strong> object and replace whatever content is there with <strong class="source-inline">"start": "nodemon index.js"</strong>. This will allow us to start our application by running the following command:<p class="source-code"><strong class="bold">npm run start</strong></p></li>
</ul>
<p>The final <strong class="source-inline">package.json</strong> file should look similar to this:</p>
<pre class="source-code">
{
  "name": "airline",
  "private": true,
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "start": "nodemon index.js"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.17.1",
    "mysql2": "^2.3.0",
    "sequelize": "^6.6.5"
  }
}</pre>
<h1 id="_idParaDest-27"><a id="_idTextAnchor035"/>Summary</h1>
<p>In this chapter, we introduced the benefits of using an ORM and what Sequelize has to offer. We learned how to set up our development/local environment to run a DBMS (MySQL) and the Node.js runtime. We then scaffolded a project using npm and the Sequelize CLI and integrated the Sequelize library with the Express web framework.</p>
<p>In the next chapter, we will begin inserting data into our database and define Sequelize models.</p>
</div>
</div></body></html>