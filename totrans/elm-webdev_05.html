<html><head></head><body>
        

                            
                    <h1 class="header-title">Completing the Unit Conversion Website in Elm</h1>
                
            
            
                
<p>Welcome to <a href="d141e3a8-3fa0-4e32-8804-6b1824eeff3f.xhtml">Chapter 5</a>, <em>Completing the Unit Conversion Website in Elm</em>. The goal of this chapter is to complete the unit conversion website while discussing the following concepts:</p>
<ul>
<li>Using <kbd>Html.map</kbd></li>
<li>Working with complex relationships between different views</li>
<li>Working with multiple models</li>
<li>Combining everything we learned in a relatively complex app</li>
</ul>
<p>After completing this chapter, you will be able to:</p>
<ul>
<li>Build Elm applications that have multiple models separated into modules, while following best practices</li>
</ul>
<p>We'll begin this chapter by looking at the completed functionality for our unit converter app. The reason for this is to be able to see the bigger picture and understand what is going on in the two modules of our updated app before continuing to improve the app itself.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Improving the Unit Converter app</h1>
                
            
            
                
<p>In this iteration of our app, we have two separate files that work together to produce our unit conversion app. At this point, there are no styles in our app at all, since the focus is on functionality. Now, let's rebuild our unit converter app from scratch. </p>
<p>We'll start with the barebones Elm app:</p>
<pre>module Main exposing (..)<br/><br/>import Html exposing (..)<br/>import Html.Attributes exposing (..)<br/>import Html.Events exposing (..)<br/><br/>-- Model<br/>initModel =<br/>    {}<br/><br/>-- Update<br/>type Msg<br/>    = Nothing<br/><br/>update msg model =<br/>    model<br/><br/>-- View<br/>view model =<br/>    div [] [ text "Everything will go here" ]<br/><br/>-- Main<br/>main =<br/>    beginnerProgram<br/>        { model = initModel<br/>        , view = view<br/>        , update = update<br/>        }</pre>
<p>Now, we will improve it so that it can take multiple input fields. The first improvement has to do with separating the current unit converter into a different module.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Separating UnitConverter into a different module</h1>
                
            
            
                
<p>Create a new file, call it <kbd>UnitConverter.elm</kbd>, and save it inside the <kbd>src</kbd> folder. Next, copy and paste the barebones app there as well.</p>
<p>Back in <kbd>Main.elm</kbd>, change its imports section so that it looks like this:</p>
<pre>module Main exposing (..)<br/><br/>import Html exposing (beginnerProgram, div, button, input, text, label, span)<br/>import UnitConverter exposing (..)</pre>
<p>Inside <kbd>UnitConverter.elm</kbd>, change the imports section so that it looks like this:</p>
<pre>module UnitConverter exposing (..)<br/><br/>import Html exposing (beginnerProgram, div, button, input, text, label, span)<br/>import Html.Attributes exposing (for, id, value)<br/>import Html.Events exposing (onClick, onInput)</pre>
<p>Still in <kbd>UnitConverter.elm</kbd>, add the following code:</p>
<pre>type alias Model =<br/>    { unit1 : String<br/>    , unit2 : String<br/>    , ratio : Float<br/>    , convertedValue : Float<br/>    }<br/><br/><br/>init : String -&gt; String -&gt; Float -&gt; Model<br/>init unit1 unit2 ratio =<br/>    Model unit1 unit2 ratio ratio<br/><br/><br/>view model =<br/>    div []<br/>        [ div []<br/>            [ label [ for "unit1Input" ] [ text model.unit1 ]<br/>            , input [ id "unit1Input", onInput Convert ] []<br/>            , button [ onClick Swap ] [ text "Switch" ]<br/>            , label [ for "unit2" ] [ text model.unit2 ]<br/>            , div [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>            ]<br/>        ]<br/><br/><br/>type Msg<br/>    = Swap<br/>    | Convert String<br/><br/><br/>update msg model =<br/>    case msg of<br/>        Swap -&gt;<br/>            { model | unit1 = model.unit2, unit2 = model.unit1, ratio = 1 / model.ratio }<br/><br/>        Convert newValue -&gt;<br/>            let<br/>                floatValue =<br/>                    Result.withDefault 1 (String.toFloat newValue)<br/>            in<br/>                { model | convertedValue = floatValue * model.ratio }</pre>
<p>Notice that the preceding code looks almost identical to what we had at the end of <a href="5c3a6b83-d672-49a1-9da9-355bb415b8c4.xhtml">Chapter 4</a>, <em>Preparing a Unit Conversion Website in Elm</em>, except that there is no call to <kbd>main</kbd> anymore, and the <kbd>init</kbd> function has changed.</p>
<p>Now, we can update the <kbd>Main.elm</kbd> file so that it works with multiple input fields.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding type alias Model, initModel, and Main</h1>
                
            
            
                
<p>We'll start updating <kbd>Main.elm</kbd> by adding a new type alias <kbd>Model</kbd>. Place the type alias <kbd>Model</kbd> just above the <kbd>initModel</kbd>. The code should be as follows:</p>
<pre>type alias Model =<br/>    { lengthConverter : UnitConverter.Model<br/>    , weightConverter : UnitConverter.Model<br/>    }</pre>
<p>Next, let's update the <kbd>initModel</kbd> itself:</p>
<pre>initModel : Model<br/>initModel =<br/>    { lengthConverter = UnitConverter.init "Miles" "Kilometers" 1.608<br/>    , weightConverter = UnitConverter.init "Kilograms" "Pounds" 2.2046<br/>    }</pre>
<p>Let's discuss the preceding code. </p>
<p>Our type alias <kbd>Model</kbd> consists of a <kbd>lengthConverter</kbd> and a <kbd>weightConverter</kbd>, both of which take the value of <kbd>UnitConverter.Model</kbd>. Looking at type alias <kbd>UnitConverter.Model</kbd>, we see the following:</p>
<pre>type alias Model =<br/>    { unit1 : String<br/>    , unit2 : String<br/>    , ratio : Float<br/>    , convertedValue : Float<br/>    }</pre>
<p>In the <kbd>initModel</kbd> function, we have the <kbd>lengthConverter</kbd> take the value from <kbd>UnitConverter.init</kbd>, with three arguments passed to it: "Miles", "Kilometers", and 1.608, which is in accordance with the type annotation of the <kbd>init</kbd> function in the <kbd>UnitConverter</kbd> module: </p>
<pre>init : String -&gt; String -&gt; Float -&gt; Model</pre>
<p>Similarly, we set up the values of <kbd>initialModel</kbd> for the <kbd>weightConverter</kbd>, populating it with the following expression:</p>
<pre>UnitConverter.init "Kilograms" "Pounds" 2.2046</pre>
<p>Continuing with code in <kbd>Main.elm</kbd>, we can add it to the <kbd>main</kbd> function, which has not changed:</p>
<pre>main =<br/>    beginnerProgram { model = initModel, view = view, update = update }</pre>
<p>If we run our app now, we'll get the <kbd>Everything will go here</kbd> text in the browser. This means that everything is working and ready for us to improve it.</p>
<p>In the next section, we'll update the <kbd>view</kbd> function.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Updating the Main.view function</h1>
                
            
            
                
<p>To update the <kbd>view</kbd> function, we'll use the following code:</p>
<pre>view model =<br/>    div []<br/>        [ UnitConverter.view model.lengthConverter |&gt; Html.map LengthConverterMsg<br/>        , UnitConverter.view model.weightConverter |&gt; Html.map WeightConverterMsg<br/>        ]</pre>
<p>Let's look at a compiler-suggested type annotation for the <kbd>Main.view</kbd> function:</p>
<pre>view :<br/>    { c<br/>        | lengthConverter : { b | convertedValue : a, unit1 : String, unit2 : String }<br/>        , weightConverter : { b1 | convertedValue : a1, unit1 : String, unit2 : String }<br/>    }<br/>    -&gt; Html.Html Msg</pre>
<p>The <kbd>view</kbd> function takes a record. The values of the record will be that of the current model, plus the update made to <kbd>lengthConverter</kbd> or <kbd>weightConverter</kbd>. The <kbd>lengthConverter</kbd> function will return <em>either</em> its current value, signified by type variable <kbd>b</kbd>, <em>or</em> the updated value which sets the <kbd>convertedValue</kbd>, <kbd>unit1</kbd>, and <kbd>unit2</kbd> to their respective values. The same goes for <kbd>weightConverter</kbd>—it will return <em>either</em> as is, <em>or</em> its updated values for <kbd>convertedValue</kbd>, <kbd>unit1</kbd>, and <kbd>unit2</kbd>. </p>
<p>So, the <kbd>view</kbd> function takes a record and returns an <kbd>Html.Html Msg</kbd>. Why is the <kbd>Html</kbd> module listed here? Because we have not exposed it explicitly when importing the <kbd>Html</kbd> module. This way of referencing it is known as the fully qualified style. Had we exposed the <kbd>Html</kbd> function explicitly in the <kbd>Html</kbd> import expression at the top of our <kbd>Main.elm</kbd>, we could have just used <kbd>-&gt; Html Msg</kbd>, which is referred to as an unqualified style.</p>
<p>If we run our app now, the compiler will throw these two errors:</p>
<pre><strong>Cannot find variable LengthConverterMsg</strong><br/><strong>Cannot find variable WeightConverterMsg</strong></pre>
<p>Of course it cannot. We have not set it anywhere.  Let's start doing that. We'll begin by adding the union <kbd>type Msg</kbd>:</p>
<pre>type Msg <br/>    = LengthConverterMsg UnitConverter.Msg<br/>    | WeightConverterMsg UnitConverter.Msg</pre>
<p>The <kbd>type Msg</kbd> in <kbd>Main.elm</kbd> can be either a <kbd>LengthConverterMsg</kbd> type constructor function, taking the <kbd>UnitConverter.Msg</kbd> as its argument, or it can be a <kbd>WeightConverterMsg</kbd> type constructor function, also taking the <kbd>UnitConverter.Msg</kbd>. Both of these type constructor functions take in the same value as its single argument. Why is that? </p>
<p>The answer is easy: if you look at the <kbd>UnitConverter.update</kbd> function, you'll see that if its Swap pattern gets matched, the expression that evaluates will do exactly that, swap the values, just as it did in <a href="5c3a6b83-d672-49a1-9da9-355bb415b8c4.xhtml">Chapter 4</a>, <em>Preparing a Unit Conversion Website in Elm</em>. </p>
<p>If the <kbd>UnitConverter.update</kbd> function's <kbd>Convert</kbd> pattern gets matched, it will return the <kbd>model</kbd> as it received it, <em>plus</em> the updated <kbd>convertedValue</kbd>. Again, this is the same as what we had in <a href="http://prepat">Chapter 4</a>, <em>Preparing a Unit Conversion Website in Elm</em>, which means that the logic is the same.</p>
<p>What changed then? What changed is the <kbd>view</kbd> function in <kbd>Main.elm</kbd>. Let's pick it apart.</p>
<p>Our <kbd>Main.view</kbd> is just a <kbd>div</kbd> function. The first <kbd>List</kbd> we pass to it is empty. The second <kbd>List</kbd> has two parameters. The first one looks like this:</p>
<pre>UnitConverter.view model.lengthConverter |&gt; Html.map LengthConverterMsg</pre>
<p>This is the piping syntax that we already discussed. Another way to write it is to use parentheses, like this:</p>
<pre>Html.map LengthConverterMsg (UnitConverter.view model.lengthConverter)</pre>
<p>Let's start with the expression inside parentheses:</p>
<pre>UnitConverter.view model.lengthConverter</pre>
<p>Remember that on line 22 of <kbd>UnitConverter.elm</kbd>, we can see that its <kbd>view</kbd> function takes a single parameter:</p>
<pre>view model =<br/>    div []<br/>        [ div []<br/>...</pre>
<p>Thus, the parameter <kbd>model.lengthConverter</kbd> we pass to <kbd>UnitConverter.view</kbd> inside <kbd>Main.elm</kbd> is, in fact, the model, more specifically, the <kbd>lengthConverter</kbd> flavor of the model.</p>
<p>Where does <kbd>lengthConverter</kbd> come from? We can find the answer if we look at the flow of data in <kbd>Main.elm</kbd>.</p>
<p>First, the <kbd>Main.elm</kbd> entry point, the <kbd>main</kbd> function, receives the value that's computed by evaluating the following expression:</p>
<pre>beginnerProgram <br/>    { model = initModel<br/>    , view = view<br/>    , update = update<br/>    }</pre>
<p>We need to focus on the first line of the preceding Record: <kbd>model = initModel</kbd>. It means that <kbd>model</kbd> will get populated with the <kbd>initModel</kbd> value:</p>
<pre>{ lengthConverter = UnitConverter.init "Miles" "Kilometers" 1.608<br/>, weightConverter = UnitConverter.init "Kilograms" "Pounds" 2.2046<br/>}</pre>
<p>This record will get stored in our <kbd>Main.model</kbd>. Next, the <kbd>Main.view</kbd> function takes the values from the model and gives them to the <kbd>div</kbd> function:</p>
<pre>    div []<br/>        [ UnitConverter.view model.lengthConverter |&gt; Html.map LengthConverterMsg<br/>        , UnitConverter.view model.weightConverter |&gt; Html.map WeightConverterMsg<br/>        ]</pre>
<p>We ended up where we began, but now we know that on the first run, our app will give our <kbd>UnitConverter.view</kbd> the <kbd>model.lengthConverter</kbd> parameter that has the following initial values: "Miles", "Kilometers", and 1.608. </p>
<p>Similarly, our app will give our <kbd>UnitConverter.view</kbd> the <kbd>model.weightConverter</kbd> parameter that has the following initial values: "Kilograms", "Pounds", and 2.2046.</p>
<p>But that's only the first part of the rendering process. What happens next is this bit of code: <kbd>Html.map LenghtConverterMsg</kbd>, and <kbd>Html.map WeightConverterMsg</kbd>, respectively.</p>
<p>Let's look at the <kbd>Html.map</kbd> function now.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Understanding Html.map</h1>
                
            
            
                
<p>Understanding <kbd>Html.map</kbd> is simple. Let's start with the official documentation, available at <a href="http://package.elm-lang.org/packages/elm-lang/html/latest/Html#map">http://package.elm-lang.org/packages/elm-lang/html/latest/Html#map</a>. The documentation says that <kbd>Html.map</kbd> is used to:</p>
<p>"Transform the messages produced by some Html."</p>
<p>That's all it does!</p>
<p>Now, why do we need to transform messages produced by <kbd>UnitConverter.view model.lengthConverter</kbd> in our <kbd>Main.elm</kbd> file? Because in order to use the Html Msg that gets returned from the <kbd>UnitConverter.view model.lengthConverter</kbd> expression, we need to match it to the <kbd>LengthConverterMsg</kbd> type that the <kbd>Main.update</kbd> function will be using.</p>
<p>In the next section, we'll add the <kbd>update</kbd> function to our app and then remove the <kbd>Html.map</kbd> from the <kbd>Main.view</kbd> function to see what kind of error will be thrown by the compiler.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Updating the Main.update function</h1>
                
            
            
                
<p>To start off, let's add the following code to our <kbd>Main.update</kbd> function:</p>
<pre>update msg model =<br/>    case msg of<br/>        LengthConverterMsg msg_ -&gt;<br/>            let<br/>                newLengthConverter =<br/>                    UnitConverter.update msg_ model.lengthConverter<br/>            in<br/>                { model | lengthConverter = newLengthConverter }<br/><br/>        WeightConverterMsg msg_ -&gt;<br/>            let<br/>                newWeightConverter =<br/>                    UnitConverter.update msg_ model.weightConverter<br/>            in<br/>                { model | weightConverter = newWeightConverter }</pre>
<p>Contrary to what you might think the first time you look at the preceding code, there is not a lot going on there. As usual, our update function takes a message and a model. The message comes from the <kbd>Model.view</kbd> function, and it can either be <kbd>LengthConverterMsg</kbd> or <kbd>WeightConverterMsg</kbd>, as determined in the <kbd>Msg</kbd> union type above the update function. </p>
<p>As mentioned in <a href="5c3a6b83-d672-49a1-9da9-355bb415b8c4.xhtml">Chapter 4</a>, <em>Preparing a Unit Conversion Website in Elm</em>, for the <kbd>case</kbd> expression to compile successfully, it needs to cover all possible options, and <kbd>LengthConverterMsg</kbd> and <kbd>WeightConverterMsg</kbd> patterns do just that.</p>
<p>Going into a <kbd>LenghtConverterMsg</kbd> pattern, we can see that it takes a parameter we called <kbd>msg_</kbd>. This name was given in order to distinguish between the first argument passed to the <kbd>update</kbd> function, which is just called <kbd>msg</kbd> (without the underscore).</p>
<p>Inside the <kbd>LenghtConverterMsg</kbd> pattern, we have a <kbd>let</kbd> expression, and inside of its <kbd>let</kbd> part, we specify a locally-scoped <kbd>newLengthConverter</kbd>, which gets the value evaluated from the following expression:</p>
<pre>UnitConverter.update msg_ model.lenghtConverter</pre>
<p>Then, in the let-expression's <kbd>in</kbd> part, we return this:</p>
<pre>{ model | lengthConverter = newLengthConverter }</pre>
<p>The preceding code is straightforward: the <kbd>lenghtConverter</kbd> gets updated with the value returned from the computation of the expression saved in <kbd>newLengthConverter</kbd>.</p>
<p>In case our <kbd>Main.update</kbd> function's case statement pattern matches the <kbd>WeightConverterMsg</kbd> pattern, the operations performed are almost identical—the only difference is that <kbd>model.weightConverter</kbd> is being passed as the second argument to the <kbd>UnitConverter.update</kbd> function.</p>
<p>To conclude this section, let's look at the <kbd>Main.update</kbd> function's type annotation, as suggested by the compiler:</p>
<pre>update :<br/>    Msg<br/>    -&gt;<br/>        { c<br/>            | lengthConverter :<br/>                { b1<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a1<br/>                    , unit2 : a1<br/>                }<br/>            , weightConverter :<br/>                { b<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a<br/>                    , unit2 : a<br/>                }<br/>        }<br/>    -&gt;<br/>        { c<br/>            | lengthConverter :<br/>                { b1<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a1<br/>                    , unit2 : a1<br/>                }<br/>            , weightConverter :<br/>                { b<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a<br/>                    , unit2 : a<br/>                }<br/>        }</pre>
<p>The update function takes a <kbd>Msg</kbd> and a <kbd>Record</kbd> and returns a <kbd>Record</kbd>. </p>
<p>If we save all the files and run the app at this point, we'd get a fully functional unit converter. However, we still need to remove the <kbd>Html.map</kbd> from the <kbd>Main.view</kbd> function, as announced a few pages back, since we want to see what kind of error the compiler will throw. </p>
<p>Playing with error messages in Elm is a great way to learn more advanced concepts, or reinforce concepts that are somewhat familiar.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Learning from compiler error messages</h1>
                
            
            
                
<p>Let's start by removing a single <kbd>Html.map</kbd> function from <kbd>Main.view</kbd>, so that its updated code looks like this:</p>
<pre>view model =<br/>    div []<br/>        [ UnitConverter.view model.lengthConverter <br/>        , UnitConverter.view model.weightConverter |&gt; Html.map WeightConverterMsg<br/>        ]</pre>
<p>Make sure to remove the type annotation as well, to avoid additional error messages. Saving and running the app after these changes will produce the following error message:</p>
<pre><strong>The 1st and 2nd entries in this list are different types of values.</strong><br/><br/><strong>The 1st entry has this type:</strong><br/><br/><strong>Html.Html UnitConverter.Msg</strong><br/><br/><strong>But the 2nd is:</strong><br/><br/><strong>Html.Html Main.Msg</strong><br/><br/><strong>Hint: Every entry in a list needs to be the same type of value. This way you</strong><br/><strong>never run into unexpected values partway through. To mix different types in a</strong><br/><strong>single list, create a "union type" as described in:</strong><br/><strong>&lt;http://guide.elm-lang.org/types/union_types.html&gt;</strong></pre>
<p>As we discussed previously, the first entry, since it's not being converted to <kbd>lengthConverterMsg</kbd> via <kbd>Html.map</kbd>, has the type of <kbd>Html UnitConverter.Msg</kbd>. Looking at the <kbd>Msg</kbd> union type of the <kbd>UnitConverter</kbd> type, we can see that it can be either <kbd>Swap</kbd> or <kbd>Convert String</kbd>.</p>
<p>However, looking at Main's <kbd>Msg</kbd> union type, we can see that it can be either <kbd>LengthConverterMsg UnitConverter.Msg</kbd>, or <kbd>WeightConverterMsg UnitConverter.Msg</kbd>. In other words, it can be either of these two function constructors, taking <kbd>UnitConverter.Msg</kbd> as its parameter.</p>
<p>To drive the point home, let's erase the other piped function from <kbd>Main.view</kbd> as well. Doing that will produce the following error message:</p>
<pre><strong>The argument to function `beginnerProgram` is causing a mismatch.</strong><br/><br/><strong>Function `beginnerProgram` is expecting the argument to be:</strong><br/><br/><strong>{ ..., view : Main.Model -&gt; Html.Html Main.Msg }</strong><br/><br/><strong>But it is:</strong><br/><br/><strong>{ ...</strong><br/><strong>, view :</strong><br/><strong>{ lengthConverter : UnitConverter.Model</strong><br/><strong>, weightConverter : UnitConverter.Model</strong><br/><strong>}</strong><br/><strong>-&gt; Html.Html UnitConverter.Msg</strong><br/><strong>}</strong></pre>
<p>This concludes the changes made to our code's logic. However, there is still quite a lot of work to be done. We will make our app look a lot nicer by using a free Bootstrap 4 template as our starting point and then adjusting it to our needs.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">A Bootstrap-based HTML layout for our app</h1>
                
            
            
                
<p>Let's look at the completed layout for our app. The layout is based on the Cover template provided by the official Bootstrap docs, and has several sections. We'll cover them in the order in which they appear in the code, top to bottom.</p>
<p>To begin with, we have the <kbd>DOCTYPE</kbd> and the <kbd>head</kbd> tag. This code sets the Bootstrap 4 template as an HTML5 page, provides some meta information, gives our page a title, and calls the Bootstrap 4 CSS from a CDN (content delivery network):</p>
<pre>&lt;!doctype html&gt;<br/>&lt;html lang="en"&gt;<br/> &lt;head&gt;<br/> &lt;meta charset="utf-8"&gt;<br/> &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"&gt;<br/> &lt;meta name="description" content=""&gt;<br/> &lt;meta name="author" content=""&gt;<br/><br/> &lt;title&gt;Cover Template for Bootstrap&lt;/title&gt;<br/><br/> &lt;!-- Bootstrap core CSS --&gt;<br/> &lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous"&gt;<br/><br/> <br/><br/> </pre>
<p>Just above the closing <kbd>head</kbd> tag, we have a relatively lengthy <kbd>style</kbd> tag. This tag provides custom CSS styles on top of the regular Bootstrap 4 styles we imported from a CDN, as explained in the preceding code. The custom styles have the following code:</p>
<pre>&lt;!-- Custom styles for this template --&gt;<br/> &lt;style&gt;<br/> a,<br/> a:focus,<br/> a:hover {<br/> color: #fff;<br/> }<br/> html,<br/> body {<br/> height: 100%;<br/> background-color: powderblue;<br/> }<br/> body {<br/> /*color: #3a7f3d;*/<br/> text-align: center;<br/> }<br/><br/> /* Extra markup and styles for table-esque vertical and horizontal centering */<br/> .site-wrapper {<br/> display: table;<br/> width: 100%;<br/> height: 100%; /* For at least Firefox */<br/> min-height: 100%;<br/> }<br/> .site-wrapper-inner {<br/> display: table-cell;<br/> vertical-align: top;<br/> }<br/> .cover-container {<br/> margin-right: auto;<br/> margin-left: auto;<br/> }<br/><br/> /* Padding for spacing */<br/> .inner {<br/> padding: 2rem;<br/> }<br/><br/> /*<br/> * Header<br/> */<br/> .masthead {<br/> margin-bottom: 2rem;<br/> }<br/><br/> .masthead-brand {<br/> margin-bottom: 0;<br/> }<br/><br/> .nav-masthead .nav-link {<br/> padding: .25rem 0;<br/> font-weight: 700;<br/> background-color: transparent;<br/> border-bottom: .25rem solid transparent;<br/> }<br/><br/> .nav-masthead .nav-link:hover,<br/> .nav-masthead .nav-link:focus {<br/> border-bottom-color: rgba(255, 255, 255, .25);<br/> }<br/><br/> .nav-masthead .nav-link + .nav-link {<br/> margin-left: 1rem;<br/> }<br/><br/> .nav-masthead .active {<br/> color: #111;<br/> border-bottom-color: #fff;<br/> }<br/><br/> @media (min-width: 48em) {<br/> .masthead-brand {<br/> float: left;<br/> }<br/> .nav-masthead {<br/> float: right;<br/> }<br/> }<br/><br/><br/> /*<br/> * Cover<br/> */<br/> .cover {<br/> padding: 0 1.5rem;<br/> }<br/> .cover .btn-lg {<br/> padding: .75rem 1.25rem;<br/> font-weight: 700;<br/> }<br/><br/><br/> /*<br/> * Footer<br/> */<br/> .mastfoot {<br/> color: rgba(255, 255, 255, .5);<br/> }<br/><br/><br/> /*<br/> * Affix and center<br/> */<br/> @media (min-width: 40em) {<br/> /* Pull out the header and footer */<br/> .masthead {<br/> position: fixed;<br/> top: 0;<br/> }<br/> .mastfoot {<br/> position: fixed;<br/> bottom: 0;<br/> }<br/><br/> /* Start the vertical centering */<br/> .site-wrapper-inner {<br/> vertical-align: middle;<br/> }<br/><br/> /* Handle the widths */<br/> .masthead,<br/> .mastfoot,<br/> .cover-container {<br/> width: 100%; /* Must be percentage or pixels for horizontal alignment */<br/> }<br/> }<br/><br/> @media (min-width: 62em) {<br/> .masthead,<br/> .mastfoot,<br/> .cover-container {<br/> width: 42rem;<br/> }<br/> }<br/> &lt;/style&gt;<br/> <br/> &lt;/head&gt;</pre>
<p>Next, we have the <kbd>body</kbd> tag, which holds the page title and the input fields for our app:</p>
<pre>&lt;body&gt;<br/><br/> &lt;div class="site-wrapper"&gt;<br/><br/> &lt;div class="site-wrapper-inner"&gt;<br/><br/> &lt;div class="cover-container"&gt;<br/><br/> &lt;header class="masthead clearfix"&gt;<br/> &lt;div class="inner"&gt;<br/> &lt;h3 class="masthead-brand"&gt;Unit Converter&lt;/h3&gt;<br/> &lt;nav class="nav nav-masthead"&gt;<br/> &lt;a class="nav-link text-secondary" href="#"&gt;Home&lt;/a&gt;<br/> &lt;a class="nav-link text-secondary" href="#"&gt;Features&lt;/a&gt;<br/> &lt;a class="nav-link text-secondary" href="#"&gt;Contact&lt;/a&gt;<br/> &lt;/nav&gt;<br/> &lt;/div&gt;<br/> &lt;/header&gt;<br/><br/> &lt;div class="inner cover"&gt;<br/> &lt;h1 class="cover-heading"&gt;Distance converter&lt;/h1&gt;<br/> &lt;div class="col-lg-12 mb-5"&gt;<br/> &lt;div class="input-group mb-3"&gt;<br/> &lt;div class="input-group-prepend"&gt;<br/> &lt;button class="btn btn-secondary" type="button"&gt;Kilometers:&lt;/button&gt;<br/> &lt;/div&gt;<br/> &lt;input type="text" class="form-control" placeholder="" aria-label="" aria-describedby="basic-addon1"&gt;<br/> &lt;div class="input-group-append"&gt;<br/> &lt;button class="btn btn-secondary" type="button"&gt;Miles:&lt;/button&gt;<br/> &lt;button class="btn btn-secondary" type="button"&gt;0.0&lt;/button&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt; <br/> <br/> &lt;div class="inner cover"&gt;<br/> &lt;h1 class="cover-heading"&gt;Weight converter&lt;/h1&gt;<br/> &lt;div class="col-lg-offset-12"&gt;<br/> &lt;div class="input-group mb-3"&gt;<br/> &lt;div class="input-group-prepend"&gt;<br/> &lt;button class="btn btn-secondary" type="button"&gt;Kilograms:&lt;/button&gt;<br/> &lt;/div&gt;<br/> &lt;input type="text" class="form-control" placeholder="" aria-label="" aria-describedby="basic-addon1"&gt;<br/> &lt;div class="input-group-append"&gt;<br/> &lt;button class="btn btn-secondary" type="button"&gt;Pounds:&lt;/button&gt;<br/> &lt;button class="btn btn-secondary" type="button"&gt;0.0&lt;/button&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/><br/> &lt;footer class="mastfoot"&gt;<br/> &lt;div class="inner text-secondary"&gt;<br/> &lt;p&gt;Cover template for &lt;a href="https://getbootstrap.com/"&gt;Bootstrap&lt;/a&gt;, by &lt;a href="https://twitter.com/mdo"&gt;@mdo&lt;/a&gt;.&lt;/p&gt;<br/> &lt;/div&gt;<br/> &lt;/footer&gt;<br/><br/> &lt;/div&gt;<br/><br/> &lt;/div&gt;<br/><br/> &lt;/div&gt;<br/><br/> &lt;!-- Bootstrap core JavaScript<br/> ================================================== --&gt;<br/> &lt;!-- Placed at the end of the document so the pages load faster --&gt;<br/> &lt;script src="img/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"&gt;&lt;/script&gt;<br/> &lt;script src="img/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"&gt;&lt;/script&gt;<br/> &lt;script src="img/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"&gt;&lt;/script&gt;<br/> &lt;/body&gt;<br/>&lt;/html&gt;</pre>
<p>When we put all of the preceding sections together and save them as an HTML file, then run that file in a browser, the browser will render a page that looks like this:</p>
<div><img src="img/83a220b7-9874-48b2-9dbd-4c02374a0f66.png" style="width:36.00em;height:27.83em;"/></div>
<p>Now that we have a nice layout to work with, let's convert it into an Elm <kbd>view</kbd> function.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Converting an HTML layout into an Elm view</h1>
                
            
            
                
<p>Now that we've completed the previous section of this chapter, it's time to take a break from Unit Converter App's functionality, and look at our app from an entirely different angle: design.</p>
<p>In order to fully understand the process of creating a design for our app, we'll take a drastic approach: we'll build a new app from scratch, this time focusing on design only. After we've finished our design, we'll add the changes to our Unit Converter's functionality.</p>
<p>To be able to follow along, you should create a completely new app. Let's call it design-focused. Point your console to a folder in which you want to save your design-focused app, and run the following commands:</p>
<pre>create-elm-app design-focused;<br/><br/>cd design-focused;<br/><br/>elm-app start</pre>
<p>As we have seen so many times before, this will run a brand new Elm app, displaying only a navy blue-colored Elm logo at the upper-center section of our browser window. </p>
<p>Now, we can start building our app's design. To begin, we'll remind ourselves of the bare-bones template we used in the previous chapter:</p>
<pre>module Main exposing (..)<br/><br/>import Html exposing (..)<br/>import Html.Attributes exposing (..)<br/>import Html.Events exposing (..)<br/><br/>-- Model<br/>initModel =<br/>    {}<br/><br/>-- Update<br/>type Msg<br/>    = Nothing<br/><br/>update msg model =<br/>    model<br/><br/>-- View<br/>view model =<br/>    div [] [ text "Everything will go here" ]<br/><br/>-- Main<br/>main =<br/>    beginnerProgram<br/>        { model = initModel<br/>        , view = view<br/>        , update = update<br/>        }</pre>
<p>Now that we have our bare-bones app, it's time to add custom styles to it. In our HTML template, we served them from the head of the HTML document. This time, we'll do something different. Just under the imports in the bare-bones app, add the following function:</p>
<pre>bootstrapCss =<br/>    let<br/>        tag =<br/>            "link"<br/><br/>        attrs =<br/>            [ attribute "rel" "stylesheet"<br/>            , attribute "property" "stylesheet"<br/>            , attribute "href" "//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css"<br/>            ]<br/><br/>        children =<br/>            []<br/>    in<br/>        node tag attrs children</pre>
<p>What this does is create a style tag that calls the minified Bootstrap CSS file from a CDN.</p>
<p>Next, we'll update our app's <kbd>view</kbd> function so that its code is the same as the one we have in our HTML layout. Once converted from HTML to Elm (using the online converter at <a href="https://mbylstra.github.io/html-to-elm/">https://mbylstra.github.io/html-to-elm/</a>), we'll just add the <kbd>stylesheet</kbd> function, as follows. The layout's HTML, in the form of an Elm <kbd>view</kbd> function, will look like this:</p>
<div><pre class="elm hljs">view model = <br/>div [ class "site-wrapper" ]
    [ bootstrapCss<br/>    , div [ class "site-wrapper-inner" ]
        [ div [ class "cover-container" ]
            [ header [ class "masthead clearfix" ]
                [ div [ class "inner" ]
                    [ h3 [ class "masthead-brand" ]
                        [ text "Unit Converter" ]
                    , nav [ class "nav nav-masthead" ]
                        [ a [ class "nav-link text-secondary", href "#" ]
                            [ text "Home" ]
                        , a [ class "nav-link text-secondary", href "#" ]
                            [ text "Features" ]
                        , a [ class "nav-link text-secondary", href "#" ]
                            [ text "Contact" ]
                        ]
                    ]
                ]
            , div [ class "inner cover" ]
                [ h1 [ class "cover-heading" ]
                    [ text "Distance converter" ]
                , div [ class "col-lg-12 mb-5" ]
                    [ div [ class "input-group mb-3" ]
                        [ div [ class "input-group-prepend" ]
                            [ button [ class "btn btn-secondary", type_ "button" ]
                                [ text "Kilometers:" ]
                            ]
                        , input [ attribute "aria-describedby" "basic-addon1", attribute "aria-label" "", class "form-control", placeholder "", type_ "text" ]
                            []
                        , div [ class "input-group-append" ]
                            [ button [ class "btn btn-secondary", type_ "button" ]
                                [ text "Miles:" ]
                            , button [ class "btn btn-secondary", type_ "button" ]
                                [ text "0.0" ]
                            ]
                        ]
                    ]
                ]
            , div [ class "inner cover" ]
                [ h1 [ class "cover-heading" ]
                    [ text "Weight converter" ]
                , div [ class "col-lg-offset-12" ]
                    [ div [ class "input-group mb-3" ]
                        [ div [ class "input-group-prepend" ]
                            [ button [ class "btn btn-secondary", type_ "button" ]
                                [ text "Kilograms:" ]
                            ]
                        , input [ attribute "aria-describedby" "basic-addon1", attribute "aria-label" "", class "form-control", placeholder "", type_ "text" ]
                            []
                        , div [ class "input-group-append" ]
                            [ button [ class "btn btn-secondary", type_ "button" ]
                                [ text "Pounds:" ]
                            , button [ class "btn btn-secondary", type_ "button" ]
                                [ text "0.0" ]
                            ]
                        ]
                    ]
                ]
            , footer [ class "mastfoot" ]
                [ div [ class "inner text-secondary" ]
                    [ p []
                        [ text "Cover template for "
                        , a [ href "https://getbootstrap.com/" ]
                            [ text "Bootstrap" ]
                        , text ", by "
                        , a [ href "https://twitter.com/mdo" ]
                            [ text "@mdo" ]
                        , text "."
                        ]
                    ]
                ]
            ]
        ]
    ]</pre></div>
<p>Now, we have given our app a static view that gets rendered to our web page. However, we are serving no custom styles from the Cover template we got from the official Bootstrap site.</p>
<p>There is a great CDN that can help us with that, called RawGit, available at <a href="https://rawgit.com/">https://rawgit.com/</a>. What RawGit does is let you use any raw file from GitHub, paste in its address, and get back a CDN link that you can use in your apps. </p>
<p>So, for our custom Cover template's CSS to be included in our app, we can just locate its raw address on GitHub, which is as follows: <a href="https://raw.githubusercontent.com/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css">https://raw.githubusercontent.com/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css</a>. Now that we have the raw link, we can just paste it into RawGit, and use the following link that it gives us: <a href="https://rawgit.com/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css">https://rawgit.com/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css</a>.<a href="https://rawgit.com/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css"/></p>
<p>Now, we can add the Cover template styles too, just under the <kbd>bootstrapCss</kbd> function:</p>
<pre>coverTemplateCss =<br/>    let<br/>        tag =<br/>            "link"<br/><br/>        attrs =<br/>            [ attribute "rel" "stylesheet"<br/>            , attribute "property" "stylesheet"<br/>            , attribute "href" "//rawgit.com/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css"<br/>            ]<br/><br/>        children =<br/>            []<br/>    in<br/>    node tag attrs children</pre>
<p>We also need to call these styles in our <kbd>view</kbd> function. The update will occur at the beginning of the <kbd>view</kbd> function so that its first few lines look like this:</p>
<pre>view model =<br/>    div [ class "site-wrapper" ]<br/>        [ bootstrapCss<br/>        , coverTemplateCss<br/>        , div [ class "site-wrapper-inner" ]<br/>...</pre>
<p>Now that we have saved everything and run our app, we'll see the static view with all the styles served. There is just a slight improvement that needs to be made, and that is that the <kbd>div</kbd> with the class of <kbd>site-wrapper-inner needs</kbd> to be set to the width of 100vh. Let's do that now in our view function. </p>
<p>Locate the following line of code in the <kbd>view</kbd> function:</p>
<pre>, div [ class "site-wrapper-inner" ]</pre>
<p>Now, replace that line of code with the improved code that adds the inline style using the <kbd>style</kbd> function:</p>
<pre>, div [ style [( "height", "100vh" )], class "site-wrapper-inner" ]</pre>
<p>Finally, let's change the buttons on our app by giving them a different class. In Main.elm's <kbd>view</kbd> function, find all the instances of <kbd>btn-secondary</kbd> and replace them with <kbd>btn-warning</kbd>.</p>
<p>You also might want to change that dark background color to something more pleasing. Unfortunately, we cannot just replace one class with another, since the background color is specified in the custom cover.css file that we are serving from the CDN.</p>
<p>To make things more interesting, we'll use an online CSS gradient generator, available at <a href="https://uigradients.com/#VeryBlue">https://uigradients.com/#VeryBlue</a>. This link points to their #VeryBlue gradient, but feel free to use another that suits you.</p>
<p>The CSS we generated from the gradient website is as follows:</p>
<pre>background: #0575e6; /* fallback for old browsers */<br/>background: -webkit-linear-gradient(to right, #0575e6, #021b79); /* Chrome 10-25, Safari 5.1-6 */<br/>background: linear-gradient(to right, #0575e6, #021b79); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */</pre>
<p>Now, we can convert it to inline Elm styles and update the outermost <kbd>div</kbd> of our <kbd>view</kbd> function so that the first dozen lines of our <kbd>view</kbd> function look like this:</p>
<pre>view model =<br/>    div<br/>        [ style<br/>            [ ( "background", "#0575e6" )<br/>            , ( "background", "-webkit-linear-gradient(to right, #0575e6, #021b79)" )<br/>            , ( "background", "linear-gradient(to right, #0575e6, #021b79)" )<br/>            ]<br/>        , class "site-wrapper"<br/>        ]<br/>        [ bootstrapCss<br/>        , coverTemplateCss<br/>        , div [ style [ ( "height", "100vh" ) ], class "site-wrapper-inner" ]</pre>
<p>Let's update the input fields now:</p>
<pre> , div []<br/>     [ div [ class "input-group-prepend" ] []<br/>     , button [ class "btn btn-warning", type_ "button" ] [ text model.unit1 ]<br/>     , input<br/>         [ attribute "aria-describedby" "basic-addon1"<br/>         , attribute "aria-label" ""<br/>         , class "form-control"<br/>         , placeholder "Enter a numerical value"<br/>         , type_ "text"<br/>         , onInput Convert<br/>         ]<br/>         []<br/>     , button [ onClick Swap ] [ text model.unit2 ]<br/>     , button [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>     ]</pre>
<p>Now, let's introduce the append <kbd>div</kbd>:</p>
<pre>, div []<br/>    [ div [ class "input-group-prepend" ]<br/>        [ button [ class "btn btn-warning", type_ "button" ] [ text model.unit1 ]<br/>        , input<br/>            [ attribute "aria-describedby" "basic-addon1"<br/>            , attribute "aria-label" ""<br/>            , class "form-control"<br/>            , placeholder "Enter a numerical value"<br/>            , type_ "text"<br/>            , onInput Convert<br/>            ]<br/>            []<br/>        , div [ class "input-group-append" ] []<br/>        , button [ onClick Swap ] [ text model.unit2 ]<br/>        , button [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>        ]<br/>    ]<br/>]</pre>
<p>The preceding code produces a nice-looking site. However, we still need to add the preceding <kbd>view</kbd> information to our functioning app. We'll do that next.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding the improved view to our functioning app</h1>
                
            
            
                
<p>At the beginning of this chapter, we built our app's functionality. After that, we built a design from scratch, based on a free Bootstrap 4 template. Now, it's time to get the best of both worlds. </p>
<p>To begin, switch back to the app we called <strong>unit-converter-complex</strong>. Next, simply copy and paste the slightly-improved code into the updated <kbd>UnitConverter.elm</kbd> file:</p>
<pre>module UnitConverter exposing (..)<br/><br/>import Html exposing (beginnerProgram, button, div, input, label, node, span, text)<br/>import Html.Attributes exposing (attribute, class, for, id, style, value)<br/>import Html.Events exposing (onClick, onInput)<br/><br/><br/>bootstrapCss : Html.Html msg<br/>bootstrapCss =<br/>    let<br/>        tag =<br/>            "link"<br/><br/>        attrs =<br/>            [ attribute "rel" "stylesheet"<br/>            , attribute "property" "stylesheet"<br/>            , attribute "href" "//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css"<br/>            ]<br/><br/>        children =<br/>            []<br/>    in<br/>    node tag attrs children<br/><br/><br/>coverTemplateCss : Html.Html msg<br/>coverTemplateCss =<br/>    let<br/>        tag =<br/>            "link"<br/><br/>        attrs =<br/>            [ attribute "rel" "stylesheet"<br/>            , attribute "property" "stylesheet"<br/>            , attribute "href" "//gitcdn.xyz/repo/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css"<br/>            ]<br/><br/>        children =<br/>            []<br/>    in<br/>    node tag attrs children<br/><br/><br/>type alias Model =<br/>    { unit1 : String<br/>    , unit2 : String<br/>    , ratio : Float<br/>    , convertedValue : Float<br/>    }<br/><br/><br/>init : String -&gt; String -&gt; Float -&gt; Model<br/>init unit1 unit2 ratio =<br/>    Model unit1 unit2 ratio ratio<br/><br/><br/>view : { b | convertedValue : a, unit1 : String, unit2 : String } -&gt; Html.Html Msg<br/>view model =<br/>    div<br/>        [ style<br/>            [ ( "background", "#0575e6" )<br/>            , ( "background", "-webkit-linear-gradient(to right, #0575e6, #021b79)" )<br/>            , ( "background", "linear-gradient(to right, #0575e6, #021b79)" )<br/>            , ( "height", "100vh" )<br/>            ]<br/>        , class "site-wrapper"<br/>        ]<br/>        [ bootstrapCss<br/>        , coverTemplateCss<br/>        , div []<br/>            [ label [ for "unit1Input" ] [ text model.unit1 ]<br/>            , input [ id "unit1Input", onInput Convert ] []<br/>            , button [ onClick Swap ] [ text "Switch" ]<br/>            , label [ for "unit2" ] [ text model.unit2 ]<br/>            , div [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>            ]<br/>        ]<br/><br/><br/>type Msg<br/>    = Swap<br/>    | Convert String<br/><br/><br/>update :<br/>    Msg<br/>    -&gt; { b | convertedValue : Float, unit1 : a, unit2 : a, ratio : Float }<br/>    -&gt; { b | convertedValue : Float, unit1 : a, unit2 : a, ratio : Float }<br/>update msg model =<br/>    case msg of<br/>        Swap -&gt;<br/>            { model | unit1 = model.unit2, unit2 = model.unit1, ratio = 1 / model.ratio }<br/><br/>        Convert newValue -&gt;<br/>            let<br/>                floatValue =<br/>                    Result.withDefault 1 (String.toFloat newValue)<br/>            in<br/>            { model | convertedValue = floatValue * model.ratio }</pre>
<p>Next, we'll focus on changing the following section:</p>
<pre>        , div []<br/>            [ label [ for "unit1Input" ] [ text model.unit1 ]<br/>            , input [ id "unit1Input", onInput Convert ] []<br/>            , button [ onClick Swap ] [ text "Switch" ]<br/>            , label [ for "unit2" ] [ text model.unit2 ]<br/>            , div [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>            ]</pre>
<p>The first improvement we will make will be a simple replacement of other function calls with button functions where needed:</p>
<pre>, div []<br/>  [ button [ for "unit1Input" ] [ text model.unit1 ]<br/>  , input [ id "unit1Input", onInput Convert ] []<br/>  , button [ onClick Swap ] [ text model.unit2 ]<br/>  , button [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>  ]</pre>
<p>Next, we'll slowly start building our more Bootstrap-like look:</p>
<pre>, div []<br/>   [ div [ class "input-group-prepend" ] []<br/>   , button [ class "btn btn-warning" ] [ text model.unit1 ]<br/>   , input [ id "unit1Input", onInput Convert ] []<br/>   , button [ onClick Swap ] [ text model.unit2 ]<br/>   , button [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>   ]</pre>
<p>Next, we'll pull in everything inside the wrapping <kbd>div</kbd>:</p>
<pre>, div []<br/>    [ div [ class "input-group-prepend" ]<br/>        [ button [ class "btn btn-warning", type_ "button" ] [ text model.unit1 ]<br/>        , input<br/>            [ attribute "aria-describedby" "basic-addon1"<br/>            , attribute "aria-label" ""<br/>            , class "form-control"<br/>            , placeholder "Enter a numerical value"<br/>            , type_ "text"<br/>            , onInput Convert<br/>            ]<br/>            []<br/>        , button [ onClick Swap ] [ text model.unit2 ]<br/>        , button [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>        ]<br/>    ]<br/>]</pre>
<p>Now, let's pull in the append buttons:</p>
<pre>, div [ class "input-group-append" ]<br/>    [ button [ onClick Swap ] [ text model.unit2 ]<br/>    , button [ id "unit2Value" ] [ text (toString model.convertedValue) ]<br/>    ]<br/>]</pre>
<p>After building up the site slowly from the inside out, the final code will be as follows. The <kbd>Main.elm</kbd> file will look like this:</p>
<pre>module Main exposing (..)<br/><br/>import Html exposing (..)<br/>import Html.Attributes exposing (..)<br/>import UnitConverter exposing (..)<br/><br/><br/>bootstrapCss : Html.Html msg<br/>bootstrapCss =<br/>    let<br/>        tag =<br/>            "link"<br/><br/>        attrs =<br/>            [ attribute "rel" "stylesheet"<br/>            , attribute "property" "stylesheet"<br/>            , attribute "href" "//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css"<br/>            ]<br/><br/>        children =<br/>            []<br/>    in<br/>    node tag attrs children<br/><br/><br/>coverTemplateCss : Html.Html msg<br/>coverTemplateCss =<br/>    let<br/>        tag =<br/>            "link"<br/><br/>        attrs =<br/>            [ attribute "rel" "stylesheet"<br/>            , attribute "property" "stylesheet"<br/>            , attribute "href" "//gitcdn.xyz/repo/twbs/bootstrap/v4-dev/docs/4.0/examples/cover/cover.css"<br/>            ]<br/><br/>        children =<br/>            []<br/>    in<br/>    node tag attrs children<br/><br/><br/><br/>-- Model<br/><br/><br/>type alias Model =<br/>    { lengthConverter : UnitConverter.Model<br/>    , weightConverter : UnitConverter.Model<br/>    }<br/><br/><br/>initModel : Model<br/>initModel =<br/>    { lengthConverter = UnitConverter.init "Miles" "Kilometers" 1.608<br/>    , weightConverter = UnitConverter.init "Kilograms" "Pounds" 2.2046<br/>    }<br/><br/><br/><br/>-- Update<br/><br/><br/>type Msg<br/>    = LengthConverterMsg UnitConverter.Msg<br/>    | WeightConverterMsg UnitConverter.Msg<br/><br/><br/>update :<br/>    Msg<br/>    -&gt;<br/>        { c<br/>            | lengthConverter :<br/>                { b1<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a1<br/>                    , unit2 : a1<br/>                }<br/>            , weightConverter :<br/>                { b<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a<br/>                    , unit2 : a<br/>                }<br/>        }<br/>    -&gt;<br/>        { c<br/>            | lengthConverter :<br/>                { b1<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a1<br/>                    , unit2 : a1<br/>                }<br/>            , weightConverter :<br/>                { b<br/>                    | convertedValue : Float<br/>                    , ratio : Float<br/>                    , unit1 : a<br/>                    , unit2 : a<br/>                }<br/>        }<br/>update msg model =<br/>    case msg of<br/>        LengthConverterMsg msg_ -&gt;<br/>            let<br/>                newLengthConverter =<br/>                    UnitConverter.update msg_ model.lengthConverter<br/>            in<br/>            { model | lengthConverter = newLengthConverter }<br/><br/>        WeightConverterMsg msg_ -&gt;<br/>            let<br/>                newWeightConverter =<br/>                    UnitConverter.update msg_ model.weightConverter<br/>            in<br/>            { model | weightConverter = newWeightConverter }<br/><br/><br/><br/>-- View<br/><br/><br/>view :<br/>    { c<br/>        | lengthConverter :<br/>            { b | convertedValue : a, unit1 : String, unit2 : String }<br/>        , weightConverter :<br/>            { b1 | convertedValue : a1, unit1 : String, unit2 : String }<br/>    }<br/>    -&gt; Html Msg<br/>view model =<br/>    div<br/>        [ style<br/>            [ ( "background", "#0575e6" )<br/>            , ( "background", "-webkit-linear-gradient(to right, #0575e6, #021b79)" )<br/>            , ( "background", "linear-gradient(to right, #0575e6, #021b79)" )<br/>            ]<br/>        ]<br/>        [ bootstrapCss<br/>        , coverTemplateCss<br/>        , div [ class "site-wrapper-inner" ]<br/>            [ div [ class "cover-container" ]<br/>                [ header [ class "masthead clearfix" ]<br/>                    [ div [ class "inner" ]<br/>                        [ h3 [ class "masthead-brand" ]<br/>                            [ text "Unit Converter Site" ]<br/>                        , nav [ class "nav nav-masthead" ]<br/>                            [ a [ class "nav-link text-secondary", href "#" ]<br/>                                [ text "Home" ]<br/>                            , a [ class "nav-link text-secondary", href "#" ]<br/>                                [ text "Features" ]<br/>                            , a [ class "nav-link text-secondary", href "#" ]<br/>                                [ text "Contact" ]<br/>                            ]<br/>                        ]<br/>                    ]<br/>                , h1 [ class "cover-heading" ]<br/>                    [ text "Distance and Weight converter" ]<br/>                , UnitConverter.view model.lengthConverter |&gt; Html.map LengthConverterMsg<br/>                , UnitConverter.view model.weightConverter |&gt; Html.map WeightConverterMsg<br/>                ]<br/>            ]<br/>        ]<br/><br/><br/><br/>-- Main<br/><br/><br/>main : Program Never Model Msg<br/>main =<br/>    beginnerProgram<br/>        { model = initModel<br/>        , view = view<br/>        , update = update<br/>        }</pre>
<p>The <kbd>UnitConverter.elm</kbd> file will look like this:</p>
<pre>module UnitConverter exposing (..)<br/><br/>import Html exposing (..)<br/>import Html.Attributes exposing (..)<br/>import Html.Events exposing (onClick, onInput)<br/><br/><br/>type alias Model =<br/>    { unit1 : String<br/>    , unit2 : String<br/>    , ratio : Float<br/>    , convertedValue : Float<br/>    }<br/><br/><br/>init : String -&gt; String -&gt; Float -&gt; Model<br/>init unit1 unit2 ratio =<br/>    Model unit1 unit2 ratio ratio<br/><br/><br/>view : { b | convertedValue : a, unit1 : String, unit2 : String } -&gt; Html.Html Msg<br/>view model =<br/>    div [ class "site-wrapper" ]<br/>        [ div [ class "inner cover" ]<br/>            [ div [ class "col-lg-12 mb-5" ]<br/>                [ div [ class "input-group mb-3" ]<br/>                    [ div [ class "input-group-prepend" ]<br/>                        [ button [ class "btn btn-warning", type_ "button" ] [ text model.unit1 ]<br/>                        ]<br/>                    , input<br/>                        [ attribute "aria-describedby" "basic-addon1"<br/>                        , attribute "aria-label" ""<br/>                        , class "form-control"<br/>                        , placeholder "Enter a numerical value"<br/>                        , type_ "text"<br/>                        , onInput Convert<br/>                        ]<br/>                        []<br/>                    , div [ class "input-group-append" ]<br/>                        [ button [ onClick Swap, class "btn btn-warning", type_ "button" ] [ text model.unit2 ]<br/>                        , button [ id "unit2Value", class "btn btn-warning", type_ "button" ] [ text (toString model.convertedValue) ]<br/>                        ]<br/>                    ]<br/>                ]<br/>            ]<br/>        ]<br/><br/><br/>type Msg<br/>    = Swap<br/>    | Convert String<br/><br/><br/>update :<br/>    Msg<br/>    -&gt; { b | convertedValue : Float, unit1 : a, unit2 : a, ratio : Float }<br/>    -&gt; { b | convertedValue : Float, unit1 : a, unit2 : a, ratio : Float }<br/>update msg model =<br/>    case msg of<br/>        Swap -&gt;<br/>            { model | unit1 = model.unit2, unit2 = model.unit1, ratio = 1 / model.ratio }<br/><br/>        Convert newValue -&gt;<br/>            let<br/>                floatValue =<br/>                    Result.withDefault 1 (String.toFloat newValue)<br/>            in<br/>            { model | convertedValue = floatValue * model.ratio }</pre>
<p>There is a lot of code, but we have discussed all of it already. Even though there are some changes from what we had in the original design-focused file, the important thing is that we have finally built a fully functional, beautiful Unit Conversion website in Elm.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>In <a href="d141e3a8-3fa0-4e32-8804-6b1824eeff3f.xhtml">Chapter 5</a>, <em>Completing the Unit Conversion Website in Elm</em>, we improved our Unit Converter app so that it works with multiple inputs, that is, it can convert more than a single unit of measurement. Along the way, we learned a number of important concepts:</p>
<ul>
<li>Using <kbd>Html.map</kbd></li>
<li>Working with complex relationships between different views</li>
<li>Working with multiple messages in views</li>
<li>Working with multiple models</li>
<li>Combining everything we learned in a relatively complex app</li>
</ul>
<p>In the first five chapters of this book, we have followed a hands-on approach which has involved a lot of coding and app building. For the most part, we have briefly touched on theory only where it was absolutely necessary. In the next chapter, we'll fill in the gaps in our knowledge by exploring the Elm language in more detail.</p>


            

            
        
    </body></html>