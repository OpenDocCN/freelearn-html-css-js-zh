<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;Debugging JavaScript"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Debugging JavaScript</h1></div></div></div><p>
<span class="emphasis"><em>Now, when we have created our own workspaces and projects, we can begin to work with Aptana Studio. Surely you have already created your own project with some files for your web application or website.</em></span>
</p><p>So, in this chapter we will take a look at the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Installing the Aptana Studio Debugger Extension</li><li class="listitem" style="list-style-type: disc">Working with the debug console</li><li class="listitem" style="list-style-type: disc">Working with breakpoints</li><li class="listitem" style="list-style-type: disc">Monitoring AJAX requests</li><li class="listitem" style="list-style-type: disc">Uninstalling the Debugger Extension</li></ul></div><div class="section" title="The Debug perspective"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec54"/>The Debug perspective</h1></div></div></div><p>Before we can start to debug our application, the first thing we have to do is to switch to the <span class="strong"><strong>Debug</strong></span> perspective under <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Open Perspective</strong></span> | <span class="strong"><strong>Debug</strong></span>. The <a id="id257" class="indexterm"/>
<span class="strong"><strong>Debug</strong></span> perspective contains several useful views such as the <span class="strong"><strong>Console</strong></span> view, the <span class="strong"><strong>Debug</strong></span> view, the <span class="strong"><strong>Breakpoints</strong></span> view, and so on, which are perfect for JavaScript debugging.</p><p>But first, let's start with installing the Debugger Extension, which is absolutely necessary for debugging.</p><div class="section" title="Installing the JavaScript debugger"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec78"/>Installing the JavaScript debugger</h2></div></div></div><p>In order to debug some JavaScript code with Aptana Studio, we need to install the required extensions for our browser. The Debugger <a id="id258" class="indexterm"/>Extension is currently only available for Firefox and Internet Explorer.</p><p>We want to install the Debugger Extension <span class="strong"><strong>for</strong></span> the Firefox browser.</p></div></div></div>
<div class="section" title="Time for action &#x2013; installing Aptana Debugger for Firefox"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec55"/>Time for action – installing Aptana Debugger for Firefox</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Start up your Firefox browser. If you don't have Firefox <a id="id259" class="indexterm"/><a id="id260" class="indexterm"/>already installed, do it now.</li><li class="listitem">Install the Aptana Debugger Extension for Firefox. You will find it at <a class="ulink" href="http://firefox.aptana.com/update/aptanadebugger.xpi">http://firefox.aptana.com/update/aptanadebugger.xpi</a>. By clicking on this link, Firefox automatically starts the installation. Only your confirmation and a Firefox restart is necessary.<div class="mediaobject"><img src="graphics/8246_04_15.jpg" alt="Time for action – installing Aptana Debugger for Firefox"/></div></li><li class="listitem">After installing the extension, navigate to <span class="strong"><strong>Firefox</strong></span> | <span class="strong"><strong>Add-ons</strong></span> and take a look at the requirements of your version of <span class="strong"><strong>Aptana Debugger</strong></span>.<div class="mediaobject"><img src="graphics/8246_04_1.jpg" alt="Time for action – installing Aptana Debugger for Firefox"/></div></li><li class="listitem">In our case the Aptana Debugger 1.7.2 requires Firebug 1.2 to 1.8. Now navigate to <a class="ulink" href="http://www.getfirebug.com">www.getfirebug.com</a> and install the required Firebug extension dependent on your currently installed Firefox version. <a id="id261" class="indexterm"/><a id="id262" class="indexterm"/>We navigate to the website at <a class="ulink" href="https://getfirebug.com/releases/firebug/1.8/">https://getfirebug.com/releases/firebug/1.8/</a> and install the highest required Firebug version 1.8.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip33"/>Tip</h3><p>
<span class="strong"><strong>Already a newer version of Firebug installed?</strong></span>
</p><p>If you already have a newer version of Firebug installed, you need to uninstall it and install one of the required versions. This might be unintended, because the newer versions of Firebug provide many nice features. In this case, you might install a second (older) version of Firefox that you're only using for Aptana Studio debugging.</p></div></div></li><li class="listitem">After you have both the extensions installed, restart Firefox to complete the installation.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec79"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>You have just prepared your Firefox browser for debugging your Aptana Studio projects with it. In detail, this means you have integrated the Aptana Debugger Extension and the required Firebug extension.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>It is absolutely recommended that the Firebug extension is compatible with the Aptana Debugger Extension.</p></div></div></div></div>
<div class="section" title="Configuring the debugger"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec56"/>Configuring the debugger</h1></div></div></div><p>Aptana Studio provides you with the option to configure many different <a id="id263" class="indexterm"/>debug configurations. For example, if you have a local installation of different Firefox or Internet Explorer versions, you could create a debug configuration for each of these browsers, so that you can start to debug your code in any of these browsers just by a single-click on the toolbar.</p></div>
<div class="section" title="Time for action &#x2013; creating a debug configuration"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec57"/>Time for action – creating a debug configuration</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In order to create a debugging configuration, we click on the small triangle on the right-hand side of the <span class="strong"><strong>Debug</strong></span> toolbar button to <a id="id264" class="indexterm"/>drop-down the <span class="strong"><strong>Debug</strong></span> menu and select the entry <span class="strong"><strong>Debug Configurations…</strong></span>.</li><li class="listitem">Click on the <a id="id265" class="indexterm"/><span class="strong"><strong>New launch configuration</strong></span> button (a white paper symbol) at the top-left of the configuration window.</li><li class="listitem">After Studio has inserted a configuration entry below the <span class="strong"><strong>Web Browser</strong></span> node within the left-hand side tree, enter the name for the debug configuration into the <span class="strong"><strong>Name</strong></span> field at the top-right. We enter, for example, the name <code class="literal">Firefox - Internal Server</code>.<div class="mediaobject"><img src="graphics/8246_04_2.jpg" alt="Time for action – creating a debug configuration"/></div></li><li class="listitem">Choose a browser within the <span class="strong"><strong>Main</strong></span> tab in which our debugging function should run. We enter the path to our Firefox, for example, <code class="literal">/usr/bin/firefox</code>.</li><li class="listitem">Further, we want to start the debugger on the current page; therefore we select the <a id="id266" class="indexterm"/><span class="strong"><strong>Use current page</strong></span> option in the <span class="strong"><strong>Start Action</strong></span> section.</li><li class="listitem">We select the <span class="strong"><strong>Use built-in Web server</strong></span> entry because our first simple debug configuration should use the internal web server.</li><li class="listitem">Afterwards, just click on <span class="strong"><strong>Apply</strong></span> in order to save the first settings of the configuration.</li><li class="listitem">Further we want that our debug configuration should appear <a id="id267" class="indexterm"/>under the <span class="strong"><strong>Debug</strong></span> menu within the toolbar. Therefore, we select the <span class="strong"><strong>Common</strong></span> tab and the <span class="strong"><strong>Debug</strong></span> entry within the <span class="strong"><strong>Display in favorites menu</strong></span> list.<div class="mediaobject"><img src="graphics/8246_04_3.jpg" alt="Time for action – creating a debug configuration"/></div></li><li class="listitem">Finally, click on <span class="strong"><strong>Apply</strong></span> to save the changes, and afterwards click on <span class="strong"><strong>Close</strong></span> to finish the creation.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec80"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We have created a debug configuration, which furthermore can be directly selected over the toolbar. When you select this configuration, Aptana Studio opens the related browser and starts the debugging.</p><div class="mediaobject"><img src="graphics/8246_04_4.jpg" alt="What just happened?"/></div></div></div>
<div class="section" title="Debugging JavaScript"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec58"/>Debugging JavaScript</h1></div></div></div><p>After we have created the required configuration for JavaScript debugging, let's go forward and take a look at how we can debug a JavaScript file.</p></div>
<div class="section" title="Time for action &#x2013; debugging JavaScript"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec59"/>Time for action – debugging JavaScript</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">At first, click on the <span class="strong"><strong>Debug</strong></span> toolbar button in order to <a id="id268" class="indexterm"/>debug the file that is currently open.</li><li class="listitem">If you haven't already installed the Debugger Extension, you get the following message:<div class="mediaobject"><img src="graphics/8246_04_5.jpg" alt="Time for action – debugging JavaScript"/></div></li><li class="listitem">In this case, just click on <span class="strong"><strong>Yes</strong></span> and Aptana Studio will install it directly in the background. After the quick and successful installation <a id="id269" class="indexterm"/>you receive a corresponding message where you click on <span class="strong"><strong>OK</strong></span> and you can continue.<div class="mediaobject"><img src="graphics/8246_04_6.jpg" alt="Time for action – debugging JavaScript"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>Maybe you have to restart Firefox after the Debugger Extension installation, if Firefox was running during the installation. When Firefox was running during the installation, and you continue without a restart, you get a <span class="strong"><strong>Socket connection error</strong></span> error message. Please try shutting down and restarting your web browser, and then run <span class="strong"><strong>Debug</strong></span> again.</p></div></div></li><li class="listitem">Now, the next time when Firefox starts, you get the <span class="strong"><strong>Another program on your computer would like to modify Firefox with the following add-on:</strong></span> message. Here we have to select <span class="strong"><strong>Allow this installation</strong></span> <a id="id270" class="indexterm"/>and click on <span class="strong"><strong>Continue</strong></span>.<div class="mediaobject"><img src="graphics/8246_04_7.jpg" alt="Time for action – debugging JavaScript"/></div></li><li class="listitem">In order to complete the installation of the Aptana <a id="id271" class="indexterm"/>Debugger Extension of Firefox, you have to restart Firefox again.</li><li class="listitem">Finally the debug process should run your script in a simple browser.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec81"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We have debugged our first JavaScript code. But we currently see nothing spectacular during this process—everything behaves as usual.</p><p>This happens because we haven't set a breakpoint or any other debugging action. But because this is what we really want to do, let's take a look at the options which the debugger provides us with to debug our code.</p><p>Before we go forward, we have to stop the current debugging process. Therefore we click the <a id="id272" class="indexterm"/>
<span class="strong"><strong>Terminate</strong></span> view button, which is displayed as a red square and you will find it in the <span class="strong"><strong>Debug</strong></span> view and the <span class="strong"><strong>Console</strong></span> view. Alternatively, you can also just close the browser window in which the debugging process runs.</p></div></div>
<div class="section" title="Console view"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec60"/>Console view</h1></div></div></div><p>The <span class="strong"><strong>Console</strong></span> view allows you to print some log <a id="id273" class="indexterm"/>entries while your program processes. You can print values, types, and many more directly while processing occurs.</p><p>For example, the following action prints just a simple message in the <span class="strong"><strong>Console</strong></span> view:</p><div class="informalexample"><pre class="programlisting">// Just print a string
aptana.log('something to print');

// Print a string with some variable
aptana.log('this is the value: ' + variable);</pre></div><p>The output of both these actions looks like the following:</p><div class="informalexample"><pre class="programlisting">something to print
this is the value: helloWorld</pre></div><p>An additional method of the <span class="strong"><strong>Console</strong></span> view is the <code class="literal">trace</code> method. The <code class="literal">trace</code> method will print a complete backtrace in the <span class="strong"><strong>Console</strong></span> view, so that you can quickly locate the position of a problem.</p><div class="informalexample"><pre class="programlisting">aptana.trace(someVariable);</pre></div></div>
<div class="section" title="Time for action &#x2013; working with the Console view"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec61"/>Time for action – working with the Console view</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Prepare an HTML file with the following <a id="id274" class="indexterm"/>JavaScript code:<div class="informalexample"><pre class="programlisting">&lt;script type="text/javascript"&gt;
    function someLoopWithinAFunction(loopEnd) {
        try {
            var someResult = 0;
            for(var i=1 ; i&lt;=loopEnd ; i++) {
                
                // Logging some variable value 
                aptana.log(someResult + "+" + i);
                someResult += i;
            }
            
            // Logging a simple variable by using backtrace
            aptana.trace("Backtrace a variable: " + someResult);
            
            // Logging an exception by using backtrace
            throw new Error("Some error happens");
            
        } catch(exception) {
            
            // Execute some backtrace
            aptana.trace(exception);
        }
        return someResult;
    }
    var result = someLoopWithinAFunction(5);
    
    // The finishing result
    aptana.log("The result is: " + result);
&lt;/script&gt;</pre></div></li><li class="listitem">Switch to the <span class="strong"><strong>Debug</strong></span> perspective.</li><li class="listitem">Start the debug process by clicking on the <a id="id275" class="indexterm"/><span class="strong"><strong>Debug</strong></span> toolbar button.</li><li class="listitem">A Firefox window automatically opens and executes our JavaScript code.</li><li class="listitem">Now the <span class="strong"><strong>Console</strong></span> view contains all logging <a id="id276" class="indexterm"/>values and backtraces.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec82"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We have just executed some JavaScript code that contains one <code class="literal">aptana.log</code> and two different <code class="literal">aptana.trace</code>. The <span class="strong"><strong>Console</strong></span> view displays all logged values now.</p><div class="mediaobject"><img src="graphics/8246_04_8.jpg" alt="What just happened?"/></div><p>In the first five rows, we see the result of the <code class="literal">aptana.log</code>, which was called within the loop. These five entries log only the calculation.</p><p>Next is the first backtrace with a simple variable. This is a very useful feature. As you can see, the value of the variable is printed followed by the complete backtrace of the program process. You can see all the functions that were successively called and listed in the <span class="strong"><strong>Console</strong></span> view. In this case each function call is displayed with the filename and the related line number, so that you can find their positions quickly. In addition, you're also able to perform a double-click on this filename, and the editor automatically jumps to the function.</p><p>The second backtrace shows you how to combine the backtrace with an exception, so that you always get enough information if a problem occurs.</p><p>Finally, just a warning if you're working often with <code class="literal">aptana.log</code> and <code class="literal">aptana.trace</code>. One of the most often occurring errors is, a forgotten <code class="literal">aptana.log()</code> or <code class="literal">aptana.trace()</code> call within your JavaScript code. Within the normal debugging process, it isn't always noticeable—but if you execute your JavaScript code directly within a browser (without a debug console), you will get a <span class="strong"><strong>Aptana is </strong></span>
<a id="id277" class="indexterm"/>
<span class="strong"><strong>not defined</strong></span> error message.</p><p>That is correct, because the libraries by Aptana Studio are no <a id="id278" class="indexterm"/>longer included. So in order to optimize your code and prevent this error, you can wrap the Aptana functions into a separate function that checks if Aptana's libraries are available. This could look something like the following code:</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/javascript"&gt;
    function myLog(value) {
        if(typeof aptana != "undefined") {
            aptana.log(value);
        }
    }
    function myTrace(value) {
        if(typeof aptana != "undefined") {
            aptana.trace(value);
        }
    }
    var logValue = new Date();
    myLog(logValue);
    myTrace(logValue);
&lt;/script&gt;</pre></div></div></div>
<div class="section" title="Using breakpoints"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec62"/>Using breakpoints</h1></div></div></div><p>The <span class="strong"><strong>Breakpoints</strong></span> view gives <a id="id279" class="indexterm"/>you an overview about all breakpoints you have set within your current workspace. In the following screenshot, you can see the <span class="strong"><strong>Breakpoints</strong></span> view, with a breakpoint on line 11 of the code:</p><div class="mediaobject"><img src="graphics/8246_04_9.jpg" alt="Using breakpoints"/></div><p>But, what is a breakpoint and why should you set it?</p><p>A breakpoint is an exact position within your <a id="id280" class="indexterm"/>source code where the debugger should stop the execution. For example, if you have a loop of actions in your code, but something goes wrong somewhere within the code (maybe with your variables; they get bad values or invalid types). In this case you are able to set a breakpoint within your loop, and take a precise look at all variable values and see how they change in each cycle.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>If you're setting a breakpoint on a line, the execution always stops before the line itself is executed.</p></div></div><p>For the <span class="emphasis"><em>Time for action – adding a breakpoint</em></span> section, we need the following JavaScript code:</p><div class="informalexample"><pre class="programlisting">function someLoopWithinAFunction(loopEnd) {
    var someResult = 0;
    for(var i=0 ; i&lt;loopEnd ; i++) {
        someResult += i;
        aptana.log("i: " +i); // Add a breakpoint here
    }
    return someResult;
}
var result = someLoopWithinAFunction(5);
aptana.log("result: " +result);</pre></div></div>
<div class="section" title="Time for action &#x2013; adding a breakpoint"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec63"/>Time for action – adding a breakpoint</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open a JavaScript file or an HTML file with a <a id="id281" class="indexterm"/>JavaScript tag, and copy the JavaScript code in it.</li><li class="listitem">Search the <span class="strong"><strong>Add a breakpoint here</strong></span> line and perform a right-click on the left-hand side of the line number.<div class="mediaobject"><img src="graphics/8246_04_10.jpg" alt="Time for action – adding a breakpoint"/></div></li><li class="listitem">Select <span class="strong"><strong>Toggle Breakpoint</strong></span> in order to set a breakpoint.</li><li class="listitem">Alternatively, you can also double-click on the <a id="id282" class="indexterm"/>position where you right-clicked.</li><li class="listitem">Execute the file within the debugger.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec83"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We have just manually set a breakpoint on a line within a loop on which the debugger should stop in each cycle, so you're able to inspect the current state of your script environment.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip34"/>Tip</h3><p>
<span class="strong"><strong>Resume a breakpoint</strong></span>
</p><p>If you want to resume a breakpoint, you can do this <a id="id283" class="indexterm"/>simply by pressing <span class="emphasis"><em>F8</em></span>.</p></div></div><p>If you take a look into the <span class="strong"><strong>Console</strong></span> view, you see the following output:</p><div class="informalexample"><pre class="programlisting">i: 0
i: 1
i: 2
i: 3
i: 4
result: 10</pre></div><p>As you can see, the debugger prints the current value of the <code class="literal">i</code> variable in each cycle of the loop, and also the result of the calculation at the end.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>The debugger stops only at breakpoints that are placed on lines that have executable source code. If you set a breakpoint on an empty line, the debugger will ignore it.</p></div></div><p>If you have placed several breakpoints in your script, and you don't need some of them in the actual execution of the script, you have the option to disable your breakpoints.</p></div></div>
<div class="section" title="Time for action &#x2013; disabling a breakpoint"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec64"/>Time for action – disabling a breakpoint</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <span class="strong"><strong>Breakpoints</strong></span> view and search the <a id="id284" class="indexterm"/>unnecessary breakpoints.</li><li class="listitem">Deselect the checkbox on the left-hand side of the breakpoint entry.</li><li class="listitem">Alternatively, you can search the breakpoint line within the editor.</li><li class="listitem">Right-click on the blue breakpoint beside the line number.</li><li class="listitem"> Select <span class="strong"><strong>Breakpoints properties…</strong></span> and deselect the <span class="strong"><strong>Enabled</strong></span> checkbox.</li><li class="listitem">Finally, click on <span class="strong"><strong>OK</strong></span>.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec84"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>You have deactivated a breakpoint by using the <span class="strong"><strong>Breakpoints</strong></span> view and selecting the <span class="strong"><strong>Breakpoints properties...</strong></span> beside the editor's line numbers.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip35"/>Tip</h3><p>
<span class="strong"><strong>Identify disabled breakpoints</strong></span>
</p><p>To identify disabled and enabled breakpoints in the whole <a id="id285" class="indexterm"/>IDE is very easy. Disabled breakpoints are always displayed with a white point, and enabled breakpoints always with a blue point.</p></div></div></div></div>
<div class="section" title="Time for action &#x2013; setting a hit count on a breakpoint"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec65"/>Time for action – setting a hit count on a breakpoint</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Search the line of our currently <a id="id286" class="indexterm"/>placed <a id="id287" class="indexterm"/>breakpoint.</li><li class="listitem">Right-click on the blue breakpoint on the left-hand side of the related line number.</li><li class="listitem">Select the <span class="strong"><strong>Breakpoints properties…</strong></span> entry.</li><li class="listitem">Select the <span class="strong"><strong>Hit Count</strong></span> checkbox and enter the number <code class="literal">3</code>.</li><li class="listitem">Execute the file within the debugger.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec85"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>Now we adjusted our breakpoint, so that it's not stopped just at the third time it's reached.</p><p>This is very useful, if you already know that the problem within your loop happens for the first time in the third cycle. Now the debugger also <a id="id288" class="indexterm"/>stops just within the cycle where you want to search for the problem.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip36"/>Tip</h3><p>
<span class="strong"><strong>Identify breakpoints with a hit count or a condition</strong></span>
</p><p>By working with the <span class="strong"><strong>Breakpoints</strong></span> view and within the <a id="id289" class="indexterm"/>
<a id="id290" class="indexterm"/>editor, you can always identify a breakpoint with a hit count or a <a id="id291" class="indexterm"/>
<a id="id292" class="indexterm"/>condition through the small question mark on the left-hand side of the point.</p></div></div><p>If you want to search for errors, the <span class="strong"><strong>Variables</strong></span> view is very useful. The <span class="strong"><strong>Variables</strong></span> view displays all variables with their values, and the type in which the variable was defined and the actual type which the variable has within the current <a id="id293" class="indexterm"/>scope of the breakpoint. In order to select the columns that are displayed, you can navigate to <span class="strong"><strong>View Menu</strong></span> to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Show columns</strong></span>.</p><div class="mediaobject"><img src="graphics/8246_04_11.jpg" alt="What just happened?"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>The <span class="strong"><strong>Variables</strong></span> view only displays information when a breakpoint stops your JavaScript.</p></div></div></div></div>
<div class="section" title="Time for action &#x2013; inspecting variables at a breakpoint and changing their values"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec66"/>Time for action – inspecting variables at a breakpoint and changing their values</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Execute the last debugged JavaScript code, <a id="id294" class="indexterm"/><a id="id295" class="indexterm"/><a id="id296" class="indexterm"/><a id="id297" class="indexterm"/>with the placed Hit Count breakpoint.</li><li class="listitem">When the script stops at the breakpoint, open the <a id="id298" class="indexterm"/><a id="id299" class="indexterm"/><span class="strong"><strong>Variables</strong></span> view in Aptana Studio.</li><li class="listitem">Take a look at the list of variables and check if they are correct.<div class="mediaobject"><img src="graphics/8246_04_12.jpg" alt="Time for action – inspecting variables at a breakpoint and changing their values"/></div></li><li class="listitem">Perform a double-click on the value of the <code class="literal">loopEnd</code> variable and <a id="id300" class="indexterm"/><a id="id301" class="indexterm"/>change the value from <code class="literal">5</code> to <code class="literal">7</code>.</li><li class="listitem">Press <span class="emphasis"><em>Enter</em></span> to take the new value.</li><li class="listitem">After that press <span class="emphasis"><em>F8</em></span> to resume the debug process.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec86"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>Now you have inspected the current variables on a breakpoint and changed the <code class="literal">loopEnd</code> variable to a new value. By finishing the script the <span class="strong"><strong>Console</strong></span> view should have the following output:</p><div class="informalexample"><pre class="programlisting">i: 0
i: 1
i: 2
i: 3
i: 4
i: 5
i: 6
result: 21</pre></div><p>As you can see, the script assumes the new variable value directly and now executes seven cycles.</p></div></div>
<div class="section" title="Studio AJAX monitor"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec67"/>Studio AJAX monitor</h1></div></div></div><p>If you're developing an application, which sends a lot of AJAX <a id="id302" class="indexterm"/>requests during the whole execution time, it's often necessary to know what kind of data is returned. For this, Aptana Studio provides the <span class="strong"><strong>Studio AJAX Monitor</strong></span>, in which you're able to track all AJAX requests and their responses.</p><p>The <span class="strong"><strong>Studio AJAX Monitor</strong></span> consists of three parts. First, there is the overview about all requests. Here you can see which URL is requested by which method, and at what time.</p><p>The other two parts are each a part of the request information and the response information. Both are separated in a <span class="strong"><strong>Headers</strong></span> area and a <span class="strong"><strong>Body</strong></span> area where you can inspect the AJAX request in detail.</p><div class="mediaobject"><img src="graphics/8246_04_13.jpg" alt="Studio AJAX monitor"/></div><p>For the <span class="emphasis"><em>Time for action – installing the Debugger Extension</em></span> section, we need a small script like the following one:</p><div class="informalexample"><pre class="programlisting">function testXHR() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "debug_ajax.html", true);
    xmlhttp.setRequestHeader("variable", "value");
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4) {
            aptana.log("responseText: "+xmlhttp.responseText);
        }
    }
    try {
        xmlhttp.send("Debug AJAX");
    } catch(exc) {
        dump("XMLHttpRequest exception: " + exc);
    }
}
testXHR();</pre></div></div>
<div class="section" title="Time for action &#x2013; uninstalling the Aptana Debugger Extension"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec68"/>Time for action – uninstalling the Aptana Debugger Extension</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open a JavaScript file or an HTML file with a <a id="id303" class="indexterm"/>JavaScript tag and place the JavaScript code within it.</li><li class="listitem">Execute the debugging and open the <span class="strong"><strong>Studio AJAX Monitor</strong></span> view.</li><li class="listitem">Now the browser executes an AJAX request, and we are able to inspect them within the <span class="strong"><strong>Studio AJAX Monitor</strong></span> view.</li><li class="listitem">Take a look at the listed AJAX request within the view.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec87"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>You have fired a simple AJAX request and the request is directly listed in the <span class="strong"><strong>Studio AJAX Monitor</strong></span> view. Here you are able to inspect the request, <a id="id304" class="indexterm"/>at what moment it starts, what kind of headers are sent, and which data is in the response.</p><div class="mediaobject"><img src="graphics/8246_04_14.jpg" alt="What just happened?"/></div></div></div>
<div class="section" title="Uninstalling the debugger"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec69"/>Uninstalling the debugger</h1></div></div></div><p>Maybe you want to uninstall Aptana Studio or whatever, and you want to uninstall the Aptana Debugger too.</p><p>Let's take a look at how to uninstall the <a id="id305" class="indexterm"/>Aptana Firefox Extension.</p></div>
<div class="section" title="Time for action &#x2013; uninstalling the Aptana Debugger Extension"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec70"/>Time for action – uninstalling the Aptana Debugger Extension</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open Firefox and <a id="id306" class="indexterm"/>navigate to <span class="strong"><strong>Tools</strong></span> | <span class="strong"><strong>Add-Ons</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Extensions</strong></span> section.</li><li class="listitem">Select the <span class="strong"><strong>Aptana Debugger</strong></span> Extension and click on <span class="strong"><strong>Remove</strong></span>.</li><li class="listitem">Finally restart Firefox.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec88"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We have just removed the Aptana Debugger Extension from your Firefox. Now the extension is no longer available.</p></div><div class="section" title="Have a go hero – selecting a JavaScript file which you didn't code yourself and inspect the functionality by using the debugger"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec89"/>Have a go hero – selecting a JavaScript file which you didn't code yourself and inspect the functionality by using the debugger</h2></div></div></div><p>Now your task is to go forward and select a JavaScript file, which is coded by another developer. Integrate it to a simple HTML wrapper file and try to inspect the functionality. Use the <span class="strong"><strong>Breakpoints</strong></span> and the <span class="strong"><strong>Log</strong></span> functions in order to learn how the script works.</p></div><div class="section" title="Pop quiz"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec90"/>Pop quiz</h2></div></div></div><p>Q1. Which function you have to call, if you want to print a backtrace within your <span class="strong"><strong>Console</strong></span> view?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The <code class="literal">aptana.log()</code> function.</li><li class="listitem">The <code class="literal">aptana.print()</code> function.</li><li class="listitem">The <code class="literal">aptana.trace()</code> function.</li></ol></div><p>Q2. Why is it necessary to remove all Aptana functions when your application goes into public use?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Because all users of your application received your debug messages.</li><li class="listitem">Because all users of your application received error messages, as the Aptana object isn't available in a non-debugger use case.</li><li class="listitem">It's not necessary to remove the Aptana functions. The script works fine with or without it.</li></ol></div><p>Q3. Why don't you place a breakpoint within an empty line?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Because the debugger stops the debugging in this line.</li><li class="listitem">Because the debugger ignores the breakpoint and the script will continue.</li><li class="listitem">There's no reason. Placing a breakpoint on an empty line works fine.</li></ol></div><p>Q4. Which color has a disabled breakpoint?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Disabled breakpoints are red.</li><li class="listitem">Disabled breakpoints are blue.</li><li class="listitem">Disabled breakpoints are white.</li></ol></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec71"/>Summary</h1></div></div></div><p>By the end of this chapter, you should be able to debug your JavaScript code. This means, you should know how to set and remove breakpoints, and also how to find available breakpoints.</p><p>If a breakpoint stops the execution within your code, you should know how you are able to inspect the variables in the current state of your application.</p><p>Now we're ready to start up with the next chapter, where we'll take a look at how we can document our JavaScript files and projects.</p></div></body></html>