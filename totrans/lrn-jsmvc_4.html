<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch04"/>Chapter 4. jQueryMX</h1></div></div></div><p>jQueryMX is a collection of jQuery libraries that provides functionality necessary to implement and organize large JavaScript applications.</p><p>It provides classical inheritance <a id="id189" class="indexterm"/>simulation, model-view-controller layers to provide logically separated codebase. It also provides useful DOM helpers, custom events, and language helpers.</p><p>In this chapter we will go through the most common or most interesting ones.</p><div><div><h3 class="title"><a id="note09"/>Note</h3><p>For the full plugins list go to <a class="ulink" href="http://javascriptmvc.com/docs.html#!jquerymx">http://javascriptmvc.com/docs.html#!jquerymx</a>.</p></div></div><p>We use the existing <code class="literal">Todo</code> application folder structure to play around with jQueryMX plugins.</p><p>In the <code class="literal">Todo</code> folder create a <code class="literal">jquerymx_playground</code> folder with two files using the following code snippet:</p><div><pre class="programlisting">&lt;!doctype html&gt;

&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;jQueryMX playground&lt;/title&gt;
    &lt;meta charset="UTF-8"/&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;script src="img/jquerymx_playground_0.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>When a code snippet is indicated as run in the console it means paste and execute the example in Google Chrome Console on the opened index.html page. We can use any web browser console such as Firebug, however, Google Chrome (and Safari) seem to be among the best at the moment and have a very handy code complementation. </p><div><div><div><div><h1 class="title"><a id="ch04lvl1sec25"/>$.Class</h1></div></div></div><p>$.Class provides classical inheritance <a id="id190" class="indexterm"/>simulation based on John Resig's <em>Simple JavaScript Inheritance</em> <a id="id191" class="indexterm"/>found at <a class="ulink" href="http://ejohn.org/blog/ simple-javascript-inheritance/">http://ejohn.org/blog/simple-javascript-inheritance/</a>.</p><div><div><h3 class="title"><a id="tip03"/>Tip</h3><p>The class signature is <code class="literal">$.Class( [NAME , STATIC,] PROTOTYPE ) -&gt; Class</code>.</p></div></div><p>The <code class="literal">class</code> <a id="id192" class="indexterm"/>method is available to all class instances whereas the <code class="literal">instance</code> method is <a id="id193" class="indexterm"/>available only to a particular instance.</p><p>Let's write some examples in the file <code class="literal">jquerymx_playground_0.js</code>:</p><div><pre class="programlisting">steal(
    'jquery/class',
    function ($) {
        $.Class('Bank.Account', {
                setup: function () {
                    console.log('Bank.Account class: setup');
                },

                init: function () {
                    console.log('Bank.Account class: init');
                },

                getType: function () {
                    return 'Bank.Account class method';
                }
            },
            {
                setup: function () {
                    console.log('Bank.Account instance: setup');
                },

                init:  function () {
                    console.log('Bank.Account instance: init');
                },

                getType: function () {
                    return 'Bank.Account instance method';
                }
            }
        );

        Bank.Account('Bank.Account.SavingsAccount', {
                setup: function () {
                    console.log('Bank.Account.SavingsAccountclass: setup');
                },

                init: function () {
                    console.log('Bank.Account.SavingsAccountclass: init');
                }
            },
            {
                setup: function () {
                    console.log('Bank.Account.SavingsAccountinstance: setup');
                },

                init: function () {
                    console.log('Bank.Account.SavingsAccountinstance: init');
                },

//                getExtendedType: function () {
//                    return 'Hello ' + this.getType();
//                },

                getType: function () {
                    return 'Hello ' + this._super();
                }
            }
        );


//        console.log('instantiate: acc, savingAcc');
//        window.acc = new Bank.Account();
//        window.savingAcc = new Bank.Account.SavingsAccount();
    }
);</pre></div><p>In the console we can see that classes are created. Lets create some instances as follows:</p><div><pre class="programlisting">var acc = new Bank.Account();
var savingAcc = new Bank.Account.SavingAccount();</pre></div><p>We can execute instance methods as follows:</p><div><pre class="programlisting">acc.getType();
savingAcc.getType();</pre></div><p>In the following sections, let's <a id="id194" class="indexterm"/>break down the code and see what happened here.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec24"/>The first parameter</h2></div></div></div><p>Using <code class="literal">$.Class</code> we created a new <a id="id195" class="indexterm"/>class with the name <code class="literal">Account</code> passing the string <code class="literal">Bank.Account</code> as a first parameter. By using the dot notation we created a namespace <code class="literal">Bank</code>. This is why we created a new instance of the class <code class="literal">Account</code> we called <code class="literal">Bank.Account</code>. In this case <code class="literal">Bank</code> is just an empty object to help us create nice and tidy application object structure.</p><p>An alternative namespace, for example, could <em>CompanyName.Product.SomeClass</em>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec25"/>The second parameter</h2></div></div></div><p>As the second <a id="id196" class="indexterm"/>parameter we passed object with properties, which are class properties shared with all classes instances.</p><p>In our case class method <code class="literal">getType</code> from the <code class="literal">Account</code> class is available in the <code class="literal">SavingAccount</code> class. We can thus type the following in the console:</p><div><pre class="programlisting">Bank.Account.SavingsAccount.getType();</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec26"/>The third parameter</h2></div></div></div><p>As the third parameter <a id="id197" class="indexterm"/>we passed an object with properties, which are instance properties shared with all instances. We thus type the following command in the console:</p><div><pre class="programlisting">savingAcc.getType();</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec27"/>Method override</h2></div></div></div><p>In the <code class="literal">getType</code> instance <a id="id198" class="indexterm"/>method <a id="id199" class="indexterm"/>example, we can see how to override methods in the children objects.</p><p>In <code class="literal">SavingAccount</code> we override the <code class="literal">getType</code> <a id="id200" class="indexterm"/>method by adding an additional <code class="literal">Hello</code> string to the ancestor method of the same name, and call ancestor method using the following:</p><div><pre class="programlisting">this._super();</pre></div><p>In case we don't want to use the <a id="id201" class="indexterm"/>same name, we can use the following:</p><div><pre class="programlisting">getExtendedType: function () {
    return 'Hello ' + this.getType();
}</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec28"/>Life cycle</h2></div></div></div><p>In both class and instance we <a id="id202" class="indexterm"/>can use the predefined method <code class="literal">setup</code> and <code class="literal">init</code>.</p><p>If it exists it is always called, so there is no need to call it manually.</p><p>The <code class="literal">setup</code> method is called first, then the <code class="literal">init</code> method. In most cases there is no need to use the <code class="literal">setup</code> method.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec26"/>$.Model</h1></div></div></div><p>$.Model is the <a id="id203" class="indexterm"/>application data layer. It provides an easy way to connect to the services that provide RESTful APIs, listen to data changes, and bind HTML elements to models, deferrers, and validations.</p><p>$.Model is very handy; we don't need to manually write XHR calls using jQuery's Ajax method for instance. We can map our backend API using $.Model and then use its methods to pull/push data to the server.</p><p>We can organize $.Models with a list using <code class="literal">$.Model.List</code>, which is similar to Backbone.js's collections (<a class="ulink" href="http://backbonejs.org/#Collection">http://backbonejs.org/#Collection</a>).</p><p>Let's write some code in the file <code class="literal">jquerymx_playground_1.js</code>:</p><div><pre class="programlisting">steal(
    'jquery/model',
    'jquery/dom/fixture',
    function ($) {
        $.Model('AccountModel', {
                findAll: 'GET /accounts',
                findOne: 'GET /accounts/{id}',
                create:  'POST /accounts',
                update:  'PUT /accounts/{id}',
                destroy: 'DELETE /accounts/{id}'
            },
            {

            }
        );

        // Fixtures
        (function () {
            var accounts = [
                {
                    id: 1,
                    type: 'USD'
                },
                {
                    id: 2,
                    type: 'EUR'
                }
                ];

            // findAll
            $.fixture('GET /accounts', function () {
                return [accounts];
            });

            // findOne
            $.fixture('GET /accounts/{id}', function () {
                return accounts;
            });

            // create
            $.fixture('POST /accounts', function () {
                return {};
            });

            // update
            $.fixture('PUT /accounts/{id}', function (id, acc) {
                return acc;
            });

            // destroy
            $.fixture('DELETE /accounts/{id}', function () {
                return {};
            });
        }());

        AccountModel.findAll({}, function (accounts) {
            $.each(accounts, function (i, acc) {
                $('&lt;p&gt;').model(acc).text(acc.type).appendTo('body');
            });
        });

        AccountModel.bind('updated', function (e, acc) {
acc.elements($('body')).remove();
        });

        AccountModel.bind('created', function (e, acc) {
            console.log('AccountModel.bind: event: ', e,'Account: ', acc);
        });
    }
);</pre></div><p>Lets break down this code and <a id="id204" class="indexterm"/>see what happened here:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The code starting from <code class="literal">$.Model</code> is responsible for mapping API to our model.</li><li class="listitem" style="list-style-type: disc">The lines starting with <code class="literal">$.fixtures</code> are responsible for imitating server responses. Fixtures are very helpful when we need to start development without the web server API being ready or available.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">bind</code> method in the <code class="literal">model</code> class is responsible for binding model methods <code class="literal">update</code> and <code class="literal">create</code>. We can try using them to see how they work from the web browser console by executing these methods on the instance of <code class="literal">AccountModel</code>.</li></ul></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec27"/>$.View</h1></div></div></div><p>$.View is a client-side <a id="id205" class="indexterm"/>template solution. It populates HTML templates with data.</p><p>It comes with four pre-packaged template engines, which can be downloaded from the following websites:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>EJS</strong>: <a class="ulink" href="http://embeddedjs.com">http://embeddedjs.com</a> (<a id="id206" class="indexterm"/>default one created by JMVC team)</li><li class="listitem" style="list-style-type: disc"><strong>Jaml</strong>: <a id="id207" class="indexterm"/><a class="ulink" href="http://javascriptmvc.com/docs.html#!Jaml">http://javascriptmvc.com/docs.html#!Jaml</a></li><li class="listitem" style="list-style-type: disc"><strong>Micro</strong>: <a id="id208" class="indexterm"/><a class="ulink" href="http://javascriptmvc.com/docs.html#!Micro">http://javascriptmvc.com/docs.html#!Micro</a></li><li class="listitem" style="list-style-type: disc"><strong>jQuery </strong><a id="id209" class="indexterm"/><strong>templates</strong>: <a class="ulink" href="http://api.jquery.com/category/plugins/templates">http://api.jquery.com/category/plugins/templates</a></li></ul></div><p>It's easy to extend it by using <code class="literal">$.View.register</code>.</p><p>Templates can be embedded in the HTML documents or loaded synchronously or asynchronously from external files. $.View supports template caching and bundling in the production builds.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec29"/>Embedded</h2></div></div></div><p>Templates are embedded in the <a id="id210" class="indexterm"/>HTML documents as follows:</p><p>Let's copy the following code into <code class="literal">index.html</code> file:</p><div><pre class="programlisting">&lt;script type='text/ejs' id="accounts"&gt;
    &lt;p&gt;JavaScriptMVC is &lt;%= message %&gt;&lt;/p&gt;
&lt;/script&gt;</pre></div><p>Also, copy the following code into file <code class="literal">jquerymx_playground_2.js</code>:</p><div><pre class="programlisting">steal(
    'jquery/view',
    'jquery/view/ejs',
    function ($) {
        
    }
);</pre></div><p>In the console, type the following:</p><div><pre class="programlisting">$('body').html('accounts', {message: 'Awesome'});</pre></div><p>As a result, the following DOM node should be created: </p><div><pre class="programlisting">&lt;p&gt;JavaScriptMVC is Awesome&lt;/p&gt;</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec30"/>External</h2></div></div></div><p>This method of using <a id="id211" class="indexterm"/>templates is the most common one, since it allows for better organization of the project file's structure:</p><p>Create a file <code class="literal">message.ejs</code> and copy the previous template into it. The file content should look as follows:</p><div><pre class="programlisting">&lt;p&gt;JavaScriptMVC is &lt;%= message %&gt;&lt;/p&gt;</pre></div><p>Type the following in the console:</p><div><pre class="programlisting">$('body').html('message.ejs', {message: 'Awesome'});</pre></div><p>The object with the property message is passed into the HTML method which uses <code class="literal">message.ejs</code> file to render the text "Awesome" in place of <code class="literal">&lt;%= message %&gt;</code> and then append it into the body DOM node.</p><p>The result should be the same as in the embedded one.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec31"/>Sub-templates</h2></div></div></div><p>Inside a template we can <a id="id212" class="indexterm"/>embed another template, as follows:</p><div><pre class="programlisting">&lt;%= $.View('sub-message.ejs', message); %&gt;</pre></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec28"/>$.Controller</h1></div></div></div><p>The <code class="literal">$.Controller</code> plugin <a id="id213" class="indexterm"/>helps to create an organized, memory leak-free JavaScript code.</p><p>A great example of how to use <code class="literal">$.Controller</code> is the <code class="literal">Todos</code> controller from <a class="link" href="ch01.html" title="Chapter 1. Getting Started with JavaScriptMVC">Chapter 1</a>, <em>Getting Started with JavaScriptMVC</em>, is as follows:</p><div><pre class="programlisting">$.Controller('Todos', {
            // init method is called when new instance is created
            'init': function (element, options) {
                this.element.html('todos.ejs', Todo.findAll());
            },

            // add event listener to strong element on click
            'li strong click': function (el, e) {
                // trigger custom event
                el.trigger('selected', el.closest('li').model());

                // log current model to the console
                console.log('li strong click', el.closest('.todo').model());
            },

            // add event listener to em element on click
            'li .destroy click': function (el, e) {
                // call destroy on the model to prevent memoryleaking
                el.closest('.todo').model().destroy();
            },

            // add event listener to Todo model on destroyed
            '{Todo} destroyed': function (Todo, e, destroyedTodo) {
                // remove element from the DOM tree
                destroyedTodo.elements(this.element).remove();

                console.log('destroyed: ', destroyedTodo);
            }
        });</pre></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec29"/>DOM helpers</h1></div></div></div><p>DOM helpers extensions <a id="id214" class="indexterm"/>add a set of useful plugins for the DOM. They are described in the following sections.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec32"/>$.cookie</h2></div></div></div><p>The<code class="literal"> $.cookie</code> <a id="id215" class="indexterm"/>
<a id="id216" class="indexterm"/>plugin contains useful methods to manage cookies.</p><p>Let's paste the following code into the <code class="literal">jquerymx_cookie.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/dom/cookie',
    function ($) {

    }
);</pre></div><p>We can create a cookie in the console using the following command:</p><div><pre class="programlisting">
<strong>$.cookie('CookieName', 'CookieValue');</strong>
</pre></div><p>In the resources tab we can see that cookie has been created.</p><p>We can get a cookie using it's cookie name, as follows:</p><div><pre class="programlisting">
<strong>$.cookie('CookieName');</strong>
</pre></div><p>We can also delete a cookie using the following command:</p><div><pre class="programlisting">
<strong>$.cookie('CookieName', null);</strong>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec33"/>$.fn.compare</h2></div></div></div><p>The <code class="literal">$.fn.compare</code> plugin <a id="id217" class="indexterm"/>
<a id="id218" class="indexterm"/>compares two nodes and returns a number describing how they are positioned each together.</p><p>Let's paste following code into the <code class="literal">jquerymx_compare.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/dom/compare',
    function ($) {
        $('body').append('&lt;p&gt;paragraph&lt;/p&gt;&lt;strong&gt;strong&lt;/strong&gt;');
    }
);</pre></div><p>In the console,  run the following command:</p><div><pre class="programlisting">
<strong>$('p').compare($('strong'));</strong>
</pre></div><p>Next, run the following command:</p><div><pre class="programlisting">
<strong>$('strong').compare($('p'));</strong>
</pre></div><p>In the first case we should get <code class="literal">4</code> and in the second case <code class="literal">2</code>.</p><p>Here is what the <a id="id219" class="indexterm"/>
<a id="id220" class="indexterm"/>numbers mean:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">0</code>: The elements are identical</li><li class="listitem" style="list-style-type: disc"><code class="literal">1</code>: The nodes are in different documents (or one is outside of a document)</li><li class="listitem" style="list-style-type: disc"><code class="literal">2</code>: <code class="literal">strong</code> precedes <code class="literal">p</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">4</code>: <code class="literal">p</code> precedes <code class="literal">strong</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">8</code>: <code class="literal">strong</code> contains <code class="literal">p</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">16</code>: <code class="literal">p</code> contains <code class="literal">strong</code></li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec34"/>$.fn.selection</h2></div></div></div><p>The <code class="literal">$.fn.selection</code> <a id="id221" class="indexterm"/>
<a id="id222" class="indexterm"/>plugin sets or gets current text selection on any element.</p><p>Let's paste the following code into the <code class="literal">jquerymx_selection.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/dom/selection',
    function ($) {
        $('body').append('&lt;p&gt;Hello from paragraph!&lt;/p&gt;');
    }
);</pre></div><p>In the console, run the following command:</p><div><pre class="programlisting">
<strong>$('p').selection();</strong>
</pre></div><p>It should return <code class="literal">null</code>.</p><p>Now, select some part of the text and run the command again, it should return an object as follows:</p><div><pre class="programlisting">
<strong>{</strong>
<strong>    end: 15,</strong>
<strong>    start: 4</strong>
<strong>}</strong>
</pre></div><p>To set the selection, use the following command:</p><div><pre class="programlisting">
<strong>$('p').selection(6, 10);</strong>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec35"/>$.fn.within</h2></div></div></div><p>The <code class="literal">$.fn.within</code> plugin <a id="id223" class="indexterm"/>
<a id="id224" class="indexterm"/>returns the elements that are within the given position.</p><p>Let's paste the following code into the <code class="literal">jquerymx_within.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/dom/within',
    function ($) {
        $('body').append('&lt;p&gt;Hello from paragraph!&lt;/p&gt;');
    }
);</pre></div><p>In the console, run the following command:</p><div><pre class="programlisting">
<strong>$('p').within(30, 20);</strong>
</pre></div><p>It should return an array containing all <code class="literal">p</code> elements with a position left 30 px and top 20 px.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec36"/>$.Range</h2></div></div></div><p>The <code class="literal">$.Range</code> plugin <a id="id225" class="indexterm"/>
<a id="id226" class="indexterm"/>contains useful methods that operate on text selections to support creating, moving, and comparing selections.</p><p>Let's paste the following code into the <code class="literal">jquerymx_range.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/dom/range',
    function ($) {
        $('body').append('&lt;p&gt;Hello from paragraph!&lt;/p&gt;');
    }
);</pre></div><p>In the console, run the following command:</p><div><pre class="programlisting">
<strong>$.Range.current();</strong>
</pre></div><p>To get the current range, select some portion of the text and execute the code again and compare the returned objects.</p><p>To get the current selection text, run the following command in the console:</p><div><pre class="programlisting">
<strong>$.Range.current().toString();</strong>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec37"/>$.route</h2></div></div></div><p>The <code class="literal">$.route</code> plugin <a id="id227" class="indexterm"/>
<a id="id228" class="indexterm"/>contains useful methods to manage the application state.</p><p>Let's paste the following code into the <code class="literal">jquerymx_route.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/dom/route',
    function ($) {
        $.route.bind('change', function (e, attr, how, newVal, oldVal) {
            console.log('event: ', e, '| attribute changes: ',attr, '| how changes: ', how, '| new value: ',newVal, '| old value: ', oldVal);
        });
    }
);</pre></div><p>At the end of the URL, type the following:</p><div><pre class="programlisting">#!&amp;type=UTC</pre></div><p>Then, type the following <a id="id229" class="indexterm"/>
<a id="id230" class="indexterm"/>command and observe the console output:</p><div><pre class="programlisting">#!&amp;type=GTM</pre></div><p>Another example of routing can be found in <a class="link" href="ch01.html" title="Chapter 1. Getting Started with JavaScriptMVC">Chapter 1</a>, <em>Getting Started with JavaScriptMVC</em>, in the <code class="literal">Todo</code> application.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec30"/>Special events</h1></div></div></div><p>Special events extensions add a set of special events plugins.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec38"/>$.Drag and $.Drop</h2></div></div></div><p>The <code class="literal">$.Drag</code> and <code class="literal">$.Drop</code> <a id="id231" class="indexterm"/>
<a id="id232" class="indexterm"/>plugins contain the drag and drop events.</p><p>Let's paste the following code into the <code class="literal">jquerymx_draganddrop.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/event/drag',
    'jquery/event/drag/limit',
    'jquery/event/drag/scroll',
    'jquery/event/drag/step',
    'jquery/event/drop',
    function ($) {

        $('body').append('&lt;p&gt;Drag me, but not too far...&lt;/p&gt;');

        $('p').bind('dragmove', function (e, drag) {
            if (drag.location.top() &gt; 150 || drag.location.left() &gt; 450) {
                console.log('limiter');
                e.preventDefault();
            }
        });
    }
);</pre></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec31"/>Language helpers</h1></div></div></div><p>Language helpers are a set of <a id="id233" class="indexterm"/>jQuery plugins. They are described in the following sections.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec39"/>$.Object</h2></div></div></div><p>The <code class="literal">$.Object</code> plugin <a id="id234" class="indexterm"/>
<a id="id235" class="indexterm"/>contains the following three useful methods:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">same</code>: It compares two objects</li><li class="listitem" style="list-style-type: disc"><code class="literal">subset</code>: It checks if an object is a set of another object</li><li class="listitem" style="list-style-type: disc"><code class="literal">subsets</code>: It returns the subsets of an object</li></ul></div><div><div><div><div><h3 class="title"><a id="ch04lvl3sec23"/>same</h3></div></div></div><p>The <code class="literal">same</code> method can <a id="id236" class="indexterm"/>
<a id="id237" class="indexterm"/>compare two objects. It supports nested objects. We can also specify if the comparison is case sensitive or if we can skip a particular property comparison.</p><p>Let's paste the following code into the <code class="literal">jquerymx_object.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/lang/object',
    function ($) {
        window.object_1 = {
            property_1: 'foo',
            property_2: {
                property_1: 'bar',
                property_2: {
                    property_1: 'Hello JMVC!'
                }
            }
        };

        window.object_2 = {
            property_1: 'foo',
            property_2: {
                property_1: 'bar',
                property_2: {
                    property_1: 'HELLO JMVC!'
                }
            }
        };
    }
);</pre></div><p>In the console, run the following command:</p><div><pre class="programlisting">
<strong>$.Object.same(object_1, object_2);</strong>
</pre></div><p>It should return <code class="literal">false</code>.</p><p>Now try to ignore the case:</p><div><pre class="programlisting">
<strong>$.Object.same(object_1, object_2, {property_2: 'i'});</strong>
</pre></div><p>It should return <code class="literal">true</code>, since <code class="literal">property_2</code> and all its children are compared with the ignore case flag.</p><p>To ignore the case <a id="id238" class="indexterm"/> in a particular property we can specify it as follows:</p><div><pre class="programlisting">
<strong>$.Object.same(object_1, object_2, {property_2: {property_2: { property_1: 'i'}}});</strong>
</pre></div><p>The result should be <code class="literal">true</code> as well.</p></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec40"/>$.Observe</h2></div></div></div><p>The <code class="literal">$.Observe</code> plugin <a id="id239" class="indexterm"/>provides an observer pattern for the JavaScript <a id="id240" class="indexterm"/>objects and arrays.</p><p>Let's paste the following code into the <code class="literal">jquerymx_observe.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/lang/observe',
    'jquery/lang/observe/delegate',
    function ($) {
        window.data = {
            accNumber: {
                iban: 'SWISSQX',
                number: 6987687
            },
            owner: {
                fName: 'Nicolaus',
                lName: 'Copernicus'
            }
        };

        window.oData = new $.Observe(data);

        oData.bind('change', function (e, attr, how, newVal, oldVal) {
            console.log('event: ', e, '| attribute changes: ', attr, '| how changes: ', how, '| new value: ', newVal, '| old value: ', oldVal);
        });
    }
);</pre></div><p>In the console, run the following command:</p><div><pre class="programlisting">
<strong>oData.attr('accNumber.number');</strong>
</pre></div><p>Next, run the following <a id="id241" class="indexterm"/>command:</p><div><pre class="programlisting">
<strong>data.accNumber.number;</strong>
</pre></div><p>The same number should be displayed.</p><p>Change the value of the <code class="literal">number</code> property using the following command:</p><div><pre class="programlisting">
<strong>oData.attr('accNumber.number', 123456);</strong>
</pre></div><p>Since we bound the anonymous function to the <code class="literal">change</code> event, which is emitted when any of the observable object <a id="id242" class="indexterm"/>property has changed, <code class="literal">console.log</code> with all passed information, should be displayed.</p><p>Please note that <code class="literal">oData</code> is a copy of data, so the command:</p><div><pre class="programlisting">
<strong>oData.attr('accNumber.number');</strong>
</pre></div><p>Is different from:</p><div><pre class="programlisting">
<strong>data.accNumber.number;</strong>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec41"/>$.String</h2></div></div></div><p>The <code class="literal">$.String</code> <a id="id243" class="indexterm"/>
<a id="id244" class="indexterm"/>plugin contains useful string methods.</p><p>Let's paste following code into the <code class="literal">jquerymx_string.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/lang/string',
    'jquery/lang/string/deparam',
    'jquery/lang/string/rsplit',
    function ($) {

    }
);</pre></div><div><div><div><div><h3 class="title"><a id="ch04lvl3sec24"/>deparam</h3></div></div></div><p>This method converts <a id="id245" class="indexterm"/>
<a id="id246" class="indexterm"/>URL parameters into an object literal.</p><p>In the console run the following command:</p><div><pre class="programlisting">$.String.deparam('en=1&amp;home=a3373dsf6wfd&amp;page[main]=uy7887d');</pre></div><p>It should convert string into the following object:</p><div><pre class="programlisting">{
    en: '1',
    home: 'a3373dsf6wfd',
    page: {
        main: 'uy7887d'
    }
}</pre></div></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec42"/>$.toJSON</h2></div></div></div><p>The <code class="literal">$.toJSON</code> <a id="id247" class="indexterm"/>
<a id="id248" class="indexterm"/>plugin contains useful object methods.</p><p>Let's paste the following code into the <code class="literal">jquerymx_tojson.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/lang/json',
    function ($) {
        window.object_1 = {
            property_1: 'foo',
            property_2: {
                property_1: 'bar',
                property_2: {
                    property_1: 'Hello JMVC!'
                }
            }
        };
    }
);</pre></div><p>In the console, run the following command:</p><div><pre class="programlisting">
<strong>$.toJSON(object_1);</strong>
</pre></div><p>It should return a JSON representation of a given object.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec43"/>$.Vector</h2></div></div></div><p>The <code class="literal">$.Vector</code> <a id="id249" class="indexterm"/>
<a id="id250" class="indexterm"/>plugin contains useful methods to create and operate on vectors.</p><p>Let's paste the following code into the <code class="literal">jquerymx_vector.js</code> file:</p><div><pre class="programlisting">steal(
    'jquery/lang/vector',
    function ($) {

    }
);</pre></div><p>In the console, run the <a id="id251" class="indexterm"/>following command:</p><div><pre class="programlisting">
<strong>new jQuery.Vector(1,2);</strong>
</pre></div><p>It should return a new <code class="literal">Vector</code> instance.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec32"/>Summary</h1></div></div></div><p>In this chapter we learned what jQueryMX plugins have to offer and how we can use them to make our day-to-day coding more efficient.</p><p>In the next chapter we will learn about dependency management tool, StealJS.</p></div></body></html>