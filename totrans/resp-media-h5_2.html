<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Adding Responsive Video Content"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Adding Responsive Video Content</h1></div></div></div><p>Throughout the history of the Internet, since its early days, designers and developers have been able to add images to websites—these are great to illustrate points or concepts, but are a static record at a point in time. More and more developers are turning to the power of video to help illustrate something: the themes are varied, from news right through to cooking, or even a step-by-step coding tutorial! With the advent of mobile media comes an increasing need for responsive content—we need to ensure our content can be viewed without issue on more and more devices.</p><p>In this chapter, we'll go on a journey through some of the concepts required to make our content responsive, as well as cover some of the tips and tricks to make our content available on multiple platforms. In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Determining support for the <code class="literal">&lt;video&gt;</code> formats and choosing the right format</li><li class="listitem" style="list-style-type: disc">Embedding HTML5 video content</li><li class="listitem" style="list-style-type: disc">Determining an available viewport for use</li><li class="listitem" style="list-style-type: disc">Catering to fallback support and applying vendor fixes</li><li class="listitem" style="list-style-type: disc">Using JavaScript libraries to provide support</li><li class="listitem" style="list-style-type: disc">Catering to different platforms and displaying full size videos</li></ul></div><p>Curious? Let's get started!</p><p>We will begin with the basics of choosing the right format for HTML5 video, but first, we need to cover some simple administrative tasks that will help us throughout the chapter.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec24"/>Getting ready</h1></div></div></div><p>For the purpose <a id="id106" class="indexterm"/>of our exercises in this chapter, we'll be using similar markup throughout; it is worth saving the following code as a template file to help you complete each exercise:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"/&gt;
  &lt;title&gt;XXXXXXXXXX&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" /&gt;
  &lt;link href="css/XXXXXXXX.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>Now that we have our groundwork prepared, let's begin our journey into working with responsive video, with a look first at the formats available for use.</p><p>We will also be using <a id="id107" class="indexterm"/>various videos from the Big Buck Bunny Project by the Blender Foundation, namely the 852 x 480 and 1280 x 720 formats; you can download these from <a class="ulink" href="http://www.bigbuckbunny.org/index.php/download/">http://www.bigbuckbunny.org/index.php/download/</a>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note14"/>Note</h3><p>The videos used throughout this project are copyright © 2008, Blender Foundation, available at <a class="ulink" href="http://www.bigbuckbunny.org">www.bigbuckbunny.org</a>.</p></div></div><p>It is also recommended that you create a project folder for the purposes of this chapter; I called mine <code class="literal">code</code>. Inside it, you will need to create two folders: <code class="literal">css</code> and <code class="literal">js</code>. We will refer to these two folders throughout the chapter.</p></div></div>
<div class="section" title="Determining support for &lt;video&gt; formats"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec25"/>Determining support for &lt;video&gt; formats</h1></div></div></div><p>The <a id="id108" class="indexterm"/>first step on our journey in <a id="id109" class="indexterm"/>creating responsive video content is to determine which video format we're going to use. There are several video formats available for use in the browser, but the two worth noting are WebM and MP4. The former is still supported within Firefox, Chrome, and Opera only; the latter is supported by all of the main desktop browsers, except IE8 and Opera. For the purposes of creating responsive content, we still need to work with both though, as the mobile platform has yet to decide on a common standard:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Browser</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Firefox</p>
</td><td style="text-align: left" valign="top">
<p>Chrome</p>
</td><td style="text-align: left" valign="top">
<p>Safari</p>
</td><td style="text-align: left" valign="top">
<p>IE (9+)</p>
</td><td style="text-align: left" valign="top">
<p>Opera</p>
</td><td style="text-align: left" valign="top">
<p>iOS</p>
</td><td style="text-align: left" valign="top">
<p>Android</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Format supported</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>MP4</p>
</td><td style="text-align: left" valign="top">
<p>MP4</p>
</td><td style="text-align: left" valign="top">
<p>MP4</p>
</td><td style="text-align: left" valign="top">
<p>MP4</p>
</td><td style="text-align: left" valign="top">
<p>WebM</p>
</td><td style="text-align: left" valign="top">
<p>MP4, WebM</p>
</td><td style="text-align: left" valign="top">
<p>MP4, WebM</p>
</td></tr></tbody></table></div><p>This table can also be referred to at <a class="ulink" href="http://www.jwplayer.com/html5/">http://www.jwplayer.com/html5/</a> (in the article "The State of HTML5 Video", by Jeroen Wijering).</p><p>As the <a id="id110" class="indexterm"/>HTML5 video standard is still in something of a state of flux, it is worth checking the CanIUse.com site, to keep abreast of progress at <a class="ulink" href="http://caniuse.com/#search=video">http://caniuse.com/#search=video</a>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note15"/>Note</h3><p>You may come across references to the OGG format as an HTML5 <code class="literal">&lt;video&gt;</code> standard; while this will work perfectly well, the format was removed from the HTML5 standard in 2007, due to issues with patents. It is not as widely supported as the other formats.</p></div></div><p>Now that we're up to <a id="id111" class="indexterm"/>speed on video formats, let's take a look at getting our video content converted to the right format, ready for use.</p></div>
<div class="section" title="Choosing the right format"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec26"/>Choosing the right format</h1></div></div></div><p>So far, we've <a id="id112" class="indexterm"/>learnt that to work with the HTML5 <code class="literal">&lt;video&gt;</code> tags, we need to use either the WebM or MP4 formats (or ideally both, to ensure coverage). It's possible that you may have existing content that isn't in this format; if this is the case, let's look at how we can get it converted.</p><p>There are dozens of applications available for download, to convert from one format to another—my personal favorite is XMedia Recode for Windows, which is available at <a class="ulink" href="http://www.xmedia-recode.de">http://www.xmedia-recode.de</a>. This allows conversion to and from a host of different formats, including both WebM and MP4. Let's take a look at how it works using the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll start by downloading a copy of XMedia Recode from <a class="ulink" href="http://www.xmedia-recode.de/en/download.html">http://www.xmedia-recode.de/en/download.html</a>; the latest version is 3.1.9.4 at the time of this writing.</li><li class="listitem">Double-click on the <a id="id113" class="indexterm"/>setup executable to launch installation and accept all defaults throughout the wizard.<p>At this point, XMedia Recode will be installed; we now need to run through the conversion process. It's possible to really go to town on configuring the conversion process—for now, we'll stick to the basic conversion, which is sufficient for our needs.</p></li><li class="listitem">In the XMedia Recode application, click on <span class="strong"><strong>Open File</strong></span>, then select your video and click on <span class="strong"><strong>Open</strong></span>.</li><li class="listitem">Wait for XMedia Recode to analyze the video, and then select the desired format from the <span class="strong"><strong>Output Format</strong></span> box.</li><li class="listitem">At the foot of the window, we need to select our destination folder, so go ahead and select the same folder where you store your video content.</li></ol></div><p>We're about ready to begin the conversion; to do so, we need to click on <span class="strong"><strong>Add to queue</strong></span> and then on <a id="id114" class="indexterm"/>
<span class="strong"><strong>Encode</strong></span> to start the process, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/6968OS_02_01.jpg" alt="Choosing the right format"/></div><p>XMedia Recode will prompt when the conversion process is completed. We can either elect to convert another video or close the application at this point. For those of us who use Apple Macs or Linux, there are several alternatives available; they perform a similar process to XMedia Recode. A couple of options that are worth looking at are the cross-platform application <a id="id115" class="indexterm"/>Handbrake (<a class="ulink" href="http://www.handbrake.fr">http://www.handbrake.fr</a>— for MP4 conversion), and the browser-based Firefogg applet <a id="id116" class="indexterm"/>available at <a class="ulink" href="http://www.firefogg.org">http://www.firefogg.org</a>. Although the latter is meant to convert to OGG format, it will also convert videos to WebM format as well.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note16"/>Note</h3><p>For more information on the WebM format, or if you have any difficulty in configuring it for use on your PC, then take a look at the documentation for the project at <a class="ulink" href="http://www.webmproject.org/tools">http://www.webmproject.org/tools</a>.</p></div></div><p>We now have our <a id="id117" class="indexterm"/>videos ready, so what's next? Ah yes—let's take a look at embedding them into a page, so we can see how to make them responsive. We'll use some converted videos from the Big Buck Bunny Project as our source media; if you would like to try something smaller, there are sample videos available at <a class="ulink" href="http://techslides.com/sample-webm-ogg-and-mp4-video-files-for-html5/">http://techslides.com/sample-webm-ogg-and-mp4-video-files-for-html5/</a>, which will work equally well.</p></div>
<div class="section" title="Embedding HTML5 video content"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec27"/>Embedding HTML5 video content</h1></div></div></div><p>As with all <a id="id118" class="indexterm"/>projects, we need to start somewhere—we could simply double-click on a video and let it play in any application we have installed, that supports the format. However, this isn't what we're here to do; we want to view the content in a browser and set it to resize automatically!</p><p>The following steps will show you how to achieve this using videos I've converted from the open source Big Bunny Project at <a class="ulink" href="http://www.bigbuckbunny.org">http://www.bigbuckbunny.org</a>:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Let's start by opening a copy of the template file we created earlier in the book, then alter the <code class="literal">&lt;title&gt;</code> tag of our demo, as shown in the following code snippet:<div class="informalexample"><pre class="programlisting">&lt;title&gt;Demo: Controlling Video sizes using media queries&lt;/title&gt;</pre></div></li><li class="listitem">In the <code class="literal">&lt;body&gt;</code> tag of our code, go ahead and add the following lines; these reference the different video formats we can use, depending on which browser we're working with:<div class="informalexample"><pre class="programlisting">  &lt;video controls&gt;
    &lt;source src="video/bigbuckbunny.mp4" type="video/mp4"&gt;
    &lt;source src="video/bigbuckbunny.webm" type="video/webm"&gt;
  &lt;/video&gt;</pre></div><p>Save the results as <code class="literal">basic.html</code>. At this point, if we were to preview the results in a browser, we can clearly see that we have a problem! The video hasn't resized, resulting in only part of it being displayed:</p><div class="mediaobject"><img src="graphics/6968OS_02_02.jpg" alt="Embedding HTML5 video content"/></div></li><li class="listitem">Fortunately, it's easy to fix; if you were expecting a lot of complicated CSS code, then <a id="id119" class="indexterm"/>fear not; the solution is easier than you think! Add the following to a new file, saving it as <code class="literal">basic.css</code>:<div class="informalexample"><pre class="programlisting">video {
    max-width: 100%;
    width: 100% !important;
    /* just in case, to force correct aspect ratio */
    height: auto !important;
}</pre></div></li><li class="listitem">In <code class="literal">basic.html</code>, go ahead and amend the CSS style sheet link as shown here:<div class="informalexample"><pre class="programlisting">&lt;link href="css/basic.css" rel="stylesheet"&gt;&lt;/head&gt;</pre></div><p>If we refresh our browser, we can now see that the content is responsive, resizing automatically when we reduce the browser window in size:</p><div class="mediaobject"><img src="graphics/6968OS_02_03.jpg" alt="Embedding HTML5 video content"/></div></li></ol></div><p>Now that our initial content is set up and working, we need to consider one important point—what if we're designing for a small viewport? Should we still display the video or hide it on smaller devices such as mobile phones? All these questions are good ones. Let's take a look <a id="id120" class="indexterm"/>at how we can determine our available viewport size so we can decide what will or will not be included in our design.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip08"/>Tip</h3><p>If you find that videos don't play correctly, then you may need to create a <code class="literal">.htaccess</code> file at the root of your project folder, then add the following lines of code in that file:</p><div class="informalexample"><pre class="programlisting">AddType video/mp4 mp4
AddType video/ogg ogv
AddType video/webm webm</pre></div></div></div></div>
<div class="section" title="Determining an available viewport for use"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec28"/>Determining an available viewport for use</h1></div></div></div><p>If you <a id="id121" class="indexterm"/>have spent any time developing <a id="id122" class="indexterm"/>content for responsive layouts, you will have no doubt come across media queries. The same applied to videos; you could typically see something akin to the following (simplified) example:</p><div class="informalexample"><pre class="programlisting">&lt;video controls&gt;
  &lt;source src="the-sky-is-calling-large.mp4" media="screen and (min-width:800px)"&gt;
  &lt;source src="the-sky-is-calling-small.mp4" media="screen and (max-width:799px)"&gt;
&lt;/video&gt;</pre></div><p>Unfortunately, most browsers have since removed support for media queries. This is largely due to the poor user experience we get if the video is suddenly interrupted when resizing the screen. Fortunately, we can produce similar effects, although we need to resort to JavaScript or jQuery to achieve this. In this next example, we're going to show a small video if the screen is resized to a small window, or hide it when displayed in full screen. Let's take a look at how we can achieve this:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll begin with extracting a copy of <code class="literal">viewport.html</code>, along with the <code class="literal">video</code>, <code class="literal">js</code>, and <code class="literal">css</code> folders from the code download that accompanies this book.</li><li class="listitem">Next comes the real magic behind this demo. In the <code class="literal">js</code> folder is a copy of <code class="literal">detect.js</code>; this controls the display of our video according to the size of the available viewport. Let's go through it in sections, starting with the creation of the <code class="literal">wi</code> variable, to store the current window size:<div class="informalexample"><pre class="programlisting">$(window).ready(function() {
  var wi = $(window).width();  </pre></div></li><li class="listitem">Next comes the rendering of the initial size of our window using the following line of code:<div class="informalexample"><pre class="programlisting">  $("p.notification").text('Initial screen width is currently: ' + wi + 'px.');</pre></div></li><li class="listitem">The <a id="id123" class="indexterm"/>real magic <a id="id124" class="indexterm"/>happens next. In the resize function, we get the new width, then work out if we're below <code class="literal">480px</code> and set the video to display if <code class="literal">true</code>:<div class="informalexample"><pre class="programlisting">  $(window).resize(function() {
    var wi = $(window).width();

    var video = $("#video").html();
 
    if (wi &lt;= 480){
      $("p.notification").text('Screen width is less than or equal to 480px. Width is currently: ' + wi + 'px.');
      if (video == "") {
        $("#video").append('&lt;video controls&gt;&lt;source src="video/bigbuckbunny-320px.mp4" type="video/mp4"&gt;&lt;/video&gt;');
      }
    } </pre></div></li><li class="listitem">If the size is larger, then the video is hidden:<div class="informalexample"><pre class="programlisting">      else {
      $("p.notification").text('Screen width is greater than 480px. Width is currently: ' + wi + 'px.');
      $("#video").html("");
    }
  });
});</pre></div></li><li class="listitem">Now, let's run the demo in a browser to see the results. If we try resizing the browser <a id="id125" class="indexterm"/>window to <a id="id126" class="indexterm"/>below <code class="literal">480px</code>, we should see a notification appear, along with the video, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/6968OS_02_04.jpg" alt="Determining an available viewport for use"/></div></li><li class="listitem">Try resizing the window to a larger size. Notice how the video is no longer displayed.</li></ol></div><p>Although this demo is somewhat simplistic in nature, it shows that we can mimic the effects of media queries. So, we can work out what space is available to us and either display a larger, high-quality video, or one of a smaller size. After all, we don't want to download a huge video on a mobile when a smaller version is available!</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip09"/>Tip</h3><p>
<span class="strong"><strong>How can I see the effects of resizing my browser window?</strong></span>
</p><p>We could always resize it manually, but a better solution is to use a resizer tool such as the one created by Malte Wasserman, which simulates a range of sizes and is available at <a class="ulink" href="http://lab.maltewassermann.com/viewport-resizer/">http://lab.maltewassermann.com/viewport-resizer/</a>.</p></div></div><p>The example does open up some possibilities, although it should be handled with care, and any <a id="id127" class="indexterm"/>solution <a id="id128" class="indexterm"/>you develop needs to be fully tested before being implemented in production.</p></div>
<div class="section" title="Catering to fallback support"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec29"/>Catering to fallback support</h1></div></div></div><p>So far, we've <a id="id129" class="indexterm"/>produced HTML5-formatted video content and seen how to embed it in our pages. There may be occasions, though, when we are working on a device that doesn't support a certain type of video format.</p><p>While <a id="id130" class="indexterm"/>support for HTML5 video is improving all the time, we're still at a stage where not every platform supports the same formats. This leaves us with two choices. We can either try to incorporate a different format, or we can simply set the content to degrade gracefully. We've looked at providing different formats, so let's switch track and see how we can gracefully degrade our content using Modernizr as the basis for our test. The following steps will guide us through the process of content degrading:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Let's begin by adding the following code to a new file and save it as <code class="literal">modernizr.html</code>:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html class="no-js"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"/&gt;
  &lt;title&gt; Demo: Detecting support with Modernizr&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" /&gt;
  &lt;link rel="stylesheet" href="css/modernizr.css"&gt;
  &lt;script src="js/jquery.js"&gt;&lt;/script&gt;
  &lt;script src="js/modernizr.min.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    $(document).ready(function() {
      if(Modernizr.video) {
        $("#html5video").html("");
        var videoHTML = '&lt;video controls&gt;&lt;source src="video/bigbuckbunny.mp4" type="video/mp4"&gt;&lt;source src="video/bigbuckbunny.webm" type="video/webm"&gt;&lt;/video&gt;';
        $("#html5video").html(videoHTML);
      }
    });
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="html5video"&gt;Sorry, HTML5 video is not enabled on this client&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></li><li class="listitem">Next, add <a id="id131" class="indexterm"/>the following code to a new file and save it as <code class="literal">modernizr.css</code>. This will provide some basic styling in the event that the video test proves negative:<div class="informalexample"><pre class="programlisting">video { width: 50%; }
.no-js #html5video { background-color: #c00; color: #fff; font-weight: bold; font-family: arial, helvetica; font-size: 14px; border: 2px solid black; border-radius: 4px; width: 35%; padding: 10px; }</pre></div></li><li class="listitem">We need to provide some additional files. From the code download that accompanies <a id="id132" class="indexterm"/>this book, extract the <code class="literal">js</code> and <code class="literal">video</code> folders; save these in the project folder.</li><li class="listitem">To test this, we'll use Firefox; in the browser address bar, enter <code class="literal">about:config</code> to bring up the configuration settings.</li><li class="listitem">Click on <span class="strong"><strong>I'll be careful, I promise!</strong></span> in the security warning message that pops up. Then look for <span class="strong"><strong>javascript.enabled</strong></span> and double-click on it to set it to <span class="strong"><strong>false</strong></span>:<div class="mediaobject"><img src="graphics/6968OS_02_05.jpg" alt="Catering to fallback support"/></div><p>At this point, let's preview the results of our effort in the browser. If all is well, we should not see our video, but the following warning instead:</p><div class="mediaobject"><img src="graphics/6968OS_02_06.jpg" alt="Catering to fallback support"/></div></li><li class="listitem">Return to step 5, but this time double-click on the entry to enable JavaScript support. Once done, refresh the preview, where we should see our all too familiar Buck Bunny video.</li></ol></div><p>Now, what happens if our video content can't be converted to HTML5 format for some reason? A good <a id="id133" class="indexterm"/>example might be that the content is only available in YouTube or Vimeo format; copyright restrictions may <a id="id134" class="indexterm"/>prevent us from converting it. It's not a problem though; we can still use it. While it is strictly speaking not going to be in HTML5 format, we can still make it responsive with a little additional effort.</p></div>
<div class="section" title="Using JS libraries to provide support"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec30"/>Using JS libraries to provide support</h1></div></div></div><p>One of the <a id="id135" class="indexterm"/>key benefits of using the HTML5 <code class="literal">&lt;video&gt;</code> element is that resizing is a breeze; it only takes a couple of lines of CSS to make videos responsive when using this tag. However, the same cannot be said for <a id="id136" class="indexterm"/>videos of other formats; we may come across occasions when we are forced to use formats such as YouTube or Vimeo, which rely on embedding through the use of <code class="literal">&lt;iframes&gt;</code>.</p><p>Thankfully, we can make these responsive although the route to doing so is a little more involved. It requires <a id="id137" class="indexterm"/>the use of a library such as <code class="literal">FitVids.js</code>, available at <a class="ulink" href="http://www.fitvidsjs.com">http://www.fitvidsjs.com</a>, which works with jQuery. The following steps will help us use JS libraries to make the videos responsive:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll start by first downloading the FitVids library. Browse to <a class="ulink" href="https://github.com/davatron5000/FitVids.js">https://github.com/davatron5000/FitVids.js</a>, then click on <span class="strong"><strong>Download ZIP</strong></span> on the right. From the archive, extract and save <code class="literal">jquery.fitvids.js</code> into your project folder.</li><li class="listitem">Next, in a copy of the template file we created earlier, alter the <code class="literal">&lt;head&gt;</code> section as shown in the following code snippet:<div class="informalexample"><pre class="programlisting">&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
<span class="strong"><strong>  &lt;title&gt;Demo - Using FitVids.js&lt;/title&gt;</strong></span>
<span class="strong"><strong>  &lt;script src="js/jquery.js"&gt;&lt;/script&gt;</strong></span>
<span class="strong"><strong>  &lt;script src="js/jquery.fitvids.js"&gt;&lt;/script&gt;</strong></span>
&lt;/head&gt;</pre></div></li><li class="listitem">We need to add some more markup in the <code class="literal">&lt;body&gt;</code> tag. So, go ahead and add the following lines in the <code class="literal">&lt;head&gt;</code> section:<div class="informalexample"><pre class="programlisting">  &lt;div id="main-container"&gt;
    &lt;iframe width="560" height="315" frameborder="0" src="http://www.youtube.com/embed/XSGBVzeBUbk" allowfullscreen&gt; &lt;/iframe&gt;
  &lt;/div&gt;
  &lt;script&gt;
    $(document).ready(function(){
      $("#main-container").fitVids();
    });
  &lt;/script&gt;</pre></div></li><li class="listitem">If we <a id="id138" class="indexterm"/>preview the results <a id="id139" class="indexterm"/>in a browser and begin to resize the browser window, the video will resize automatically:<div class="mediaobject"><img src="graphics/6968OS_02_07.jpg" alt="Using JS libraries to provide support"/></div></li></ol></div><p>We're not forced to have to use FitVids, although it is a popular choice; there are others available that will work in a similar manner, such as the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">FluidVids, <a id="id140" class="indexterm"/>from <a class="ulink" href="http://toddmotto.com/fluid-and-responsive-youtube-and-vimeo-videos-with-fluidvids-js/">http://toddmotto.com/fluid-and-responsive-youtube-and-vimeo-videos-with-fluidvids-js/</a></li><li class="listitem" style="list-style-type: disc">SimpleVid, <a id="id141" class="indexterm"/>available at <a class="ulink" href="http://johnpolacek.github.io/SimpleVid/">http://johnpolacek.github.io/SimpleVid/</a></li><li class="listitem" style="list-style-type: disc">ResponsiveVideo, <a id="id142" class="indexterm"/>available at <a class="ulink" href="http://cbavota.bitbucket.org/responsive-video/">http://cbavota.bitbucket.org/responsive-video/</a></li></ul></div><p>As an alternative, and ideal if you're only working with a small number of videos on your site, you can use the online service at <a class="ulink" href="http://EmbedResponsively.com">EmbedResponsively.com</a> to manually make your embedded videos responsive. This works by adding a container in HTML and then styling this to allow its resizing responsively, much in the same way as we do when using the FitVids library.</p><p>By now, we've <a id="id143" class="indexterm"/>produced video content using the <code class="literal">&lt;video&gt;</code> tags and seen how we can implement it responsively in our site. We do need <a id="id144" class="indexterm"/>to bear in mind the need to make content available on the mobile platform though, so let's take a look at how we can do this now.</p></div>
<div class="section" title="Catering to different platforms"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec31"/>Catering to different platforms</h1></div></div></div><p>It goes <a id="id145" class="indexterm"/>without saying that part of responsive design is the need to produce content that will work on mobile devices; otherwise it wouldn't be responsive! We could spend lots of time trying to develop something from the ground up, but there is little point in doing so. Others have already produced players that work on a desktop.</p><p>With a little extra effort, we can make the players responsive. Thankfully, Neil Gee of the Coolest Guides on the Planet site has already done the hard work for us. Let's take a look at one example player to see how he has made it responsive; we'll use VideoJS for the purposes of our demo. Perform the following steps for this demo:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll start by extracting the <code class="literal">player</code> folder from the code download that accompanies this book and save it to our project folder. It contains a working example of the video player, already configured for use. We'll add the necessary changes to make it responsive.</li><li class="listitem">In <code class="literal">player.html</code>, modify the links to the CSS style sheets, shown as follows:<div class="informalexample"><pre class="programlisting">&lt;link rel="stylesheet" href="css/video-js.css"&gt;
<span class="strong"><strong>&lt;link rel="stylesheet" href="css/video-js-overrides.css"&gt;</strong></span>
&lt;script src="js/video.js"&gt;&lt;/script&gt;</pre></div></li><li class="listitem">Next, in a new file, add the following CSS style rules and save it as <code class="literal">video-js-overrides.css</code>:<div class="informalexample"><pre class="programlisting">.video-js { padding-top: 56.25% }
.vjs-fullscreen { padding-top: 0px }
.vjs-default-skin .vjs-big-play-button { left: 40%; top: 45%; width: 10%; }

// These two media queries resize and reposition the big play button to the center of the screen
@media only screen and (max-width:599px) {
  .vjs-default-skin .vjs-big-play-button {top: 45%; width: 25%;}
}

@media only screen and (min-width:600px) and (max-width:768px) {
  .vjs-default-skin .vjs-big-play-button { top: 40%;
  width: 25%;font-size:5em;}
    }</pre></div></li><li class="listitem">If we preview <a id="id146" class="indexterm"/>the results in a browser, we will see the video play normally. For better results, it is recommended to use Google Chrome. We can emulate different devices using the Developer Toolbar, as indicated in the following screenshot:<div class="mediaobject"><img src="graphics/6968OS_02_08.jpg" alt="Catering to different platforms"/></div></li><li class="listitem">Selecting the <span class="strong"><strong>Sony Xperia S, Ion</strong></span> option produces the following result in Chrome. In the following screenshot, the screen has been flipped into landscape mode by changing the <span class="strong"><strong>Resolution</strong></span> options in the <span class="strong"><strong>Screen</strong></span> tab of Developer Toolbar:<div class="mediaobject"><img src="graphics/6968OS_02_09.jpg" alt="Catering to different platforms"/></div></li></ol></div><p>Try changing the <a id="id147" class="indexterm"/>options to emulate different devices; you will begin to see that no matter what size is set, the player is still able to play properly.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip10"/>Tip</h3><p>There is a completed example available in the code download, as <code class="literal">player-finished.html</code> and <code class="literal">player-finished.css</code>. Rename both files to <code class="literal">player.html</code> and <code class="literal">player.css</code> to see the finished article. Other video players have had similar treatment by Neil—you can see articles for them at <a class="ulink" href="http://coolestguidesontheplanet.com/videodrome/videojs/">http://coolestguidesontheplanet.com/videodrome/videojs/</a>.</p></div></div></div>
<div class="section" title="Allowing for vendor prefixes"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec32"/>Allowing for vendor prefixes</h1></div></div></div><p>While <a id="id148" class="indexterm"/>working on our code, have <a id="id149" class="indexterm"/>you noticed anything in particular, such as the apparent lack of need for vendor prefixes? That's right, to produce a basic responsive solution for a video doesn't require any, so it would be right to ask why we're now talking about needing to allow for them in our code!</p><p>The answer lies not in providing the basic styling needed to handle the <code class="literal">&lt;video&gt;</code> or <code class="literal">&lt;iframe&gt;</code> tags, but when we move into the realms of setting our video to display full screen or in the background. The former still needs vendor prefixes. While we could provide them manually, it is considered better practice to automatically add them at compilation.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note17"/>Note</h3><p>Before we <a id="id150" class="indexterm"/>go any further, this demo requires Node to be installed; this is available at <a class="ulink" href="http://nodejs.org/">http://nodejs.org/</a>. Go ahead and install it for your platform before continuing.</p></div></div><p>Let's look at <a id="id151" class="indexterm"/>using the Autoprefixer plugin for Grunt, which ties in with the <a id="id152" class="indexterm"/>service from <a class="ulink" href="http://www.caniuse.com">http://www.caniuse.com</a>; the Grunt plugin is available at <a class="ulink" href="https://github.com/postcss/autoprefixer">https://github.com/postcss/autoprefixer</a>. The following steps will help you understand the process of adding prefixes:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We'll start by creating a new folder for our compilation. In our example, I will use <code class="literal">g:\grunt</code>; if you use something else, then adjust accordingly.</li><li class="listitem">Within <a id="id153" class="indexterm"/>the folder, add a <a id="id154" class="indexterm"/>new folder called <code class="literal">build</code> and add three new files under it, namely <code class="literal">gruntfile.js</code>, <code class="literal">package,json</code>, and <code class="literal">style.css</code>, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/6968OS_02_10.jpg" alt="Allowing for vendor prefixes"/></div></li><li class="listitem">In the <code class="literal">gruntfile.js</code> file, add the following code:<div class="informalexample"><pre class="programlisting">module.exports = function (grunt) {
  grunt.initConfig({
    autoprefixer: {
      dist: {
        files: {'build/style.css': 'style.css'}
      }
    },
    watch: {
      styles: { 
        files: ['style.css'],
        tasks: ['autoprefixer']
      }
    }
  });
  grunt.loadNpmTasks('grunt-autoprefixer');
  grunt.loadNpmTasks('grunt-contrib-watch');
};</pre></div></li><li class="listitem">In <code class="literal">package.json</code>, add the following code:<div class="informalexample"><pre class="programlisting">{
  "name":"yourprojectname",
  "version":"0.0.1",
  "devDependencies":{
    "grunt":"*",
    "grunt-contrib-watch":"*",
    "grunt-autoprefixer":"*"
  }
}</pre></div></li><li class="listitem">From the Node command prompt, enter and run the following command to install Autoprefixer and a watch facility:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>npm install grunt-cli grunt-contrib-watch grunt-autoprefixer</strong></span>
</pre></div></li><li class="listitem">Node <a id="id155" class="indexterm"/>will run through installing all of the dependencies automatically. When completed, we <a id="id156" class="indexterm"/>can then run the following line at the prompt to start Grunt watching for any changes:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>Grunt watch</strong></span>
</pre></div></li><li class="listitem">We can then make a change to the <code class="literal">style.css</code> file, such as adding the following line of code:<div class="informalexample"><pre class="programlisting">a { width: calc(50% - 2em); transition: width 2s; }</pre></div><p>We will see Grunt kick in and recompile our code automatically:</p><div class="mediaobject"><img src="graphics/6968OS_02_11.jpg" alt="Allowing for vendor prefixes"/></div></li></ol></div><p>We can verify that Autoprefixer has done its magic by looking at the <code class="literal">style.css</code> file that will have appeared in the build folder. While our example was a little simplistic, the functionality will become very useful in our next demo, which uses a number of CSS3 vendor-prefixed <a id="id157" class="indexterm"/>properties and where Autoprefixer could cater to this as part of the compilation process.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note18"/>Note</h3><p>If you prefer to <a id="id158" class="indexterm"/>use a non-command line alternative, then Autoprefixer for SublimeText is worth a look; it's available at <a class="ulink" href="http://www.hongkiat.com/blog/css-automatic-vendor-prefix/">http://www.hongkiat.com/blog/css-automatic-vendor-prefix/</a>.</p></div></div><p>Let's <a id="id159" class="indexterm"/>move on and take a look something different. How often have you come across sites that play videos full size when launched? It's a really cool effect, although it must be done with care. Let's take a look at how we can implement this in practice.</p></div>
<div class="section" title="Displaying full-size videos"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec33"/>Displaying full-size videos</h1></div></div></div><p>So far, we've <a id="id160" class="indexterm"/>covered a lot of theory about creating responsive videos. Now it's time to have a little fun! If we look on the Internet, we will see plenty of examples where designers have created sites that display videos full-size in the background when viewing content.</p><p>There are plenty of examples online of how to achieve this. We're going to use the jQuery Cover plugin created by Swedish developer Anton Trollbäck, which is available for download from <a class="ulink" href="https://github.com/antontrollback/cover">https://github.com/antontrollback/cover</a>. Let's make our video appear in its full size using the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Firstly, from the code download that accompanies this book, extract a copy of <code class="literal">fullsize.html</code>. It contains some basic markup, which uses the HTML5 video tags to include two videos in MP4 and WebM format along with some text in an overlay.</li><li class="listitem">In <code class="literal">fullsize.html</code>, add the following lines immediately below the <code class="literal">&lt;title&gt;</code> statement:<div class="informalexample"><pre class="programlisting">    &lt;link rel="stylesheet" href="css/fullsize.css"&gt;
    &lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;
    &lt;script src="js/jquery.cover.js"&gt;&lt;/script&gt;
    &lt;script&gt;
      $(document).ready(function() {
        $('video').cover({
          ratio: 1080 / 1920
        });

        $(window).resize(function() {
          $('video').cover('set');
        });
      });
    &lt;/script&gt;</pre></div></li><li class="listitem">Next, add the following lines to the foot of the <code class="literal">fullsize.css</code> file and save it to the <code class="literal">css</code> <a id="id161" class="indexterm"/>subfolder in your project folder:<div class="informalexample"><pre class="programlisting">#overlay { border: 1px solid #000; padding: 10px; width: 30%;
opacity: 0.8; background-color: #000; margin-left: auto;  margin-right: auto; color: #fff; font-weight: bold; font-family: arial, helvetica; border-radius: 4px; margin-top: 5%; }
video { margin-top: -5%; }</pre></div></li><li class="listitem">From the code download, copy across the <code class="literal">bigbuckbunny.mp4</code> and <code class="literal">bigbuckbunny.webm</code> videos and store these in the <code class="literal">video</code> subfolder within your project folder. We will also need the <code class="literal">jquery.js</code> and <code class="literal">jquery.cover.js</code> files as well, so copy these into the <code class="literal">js</code> subfolder.</li></ol></div><p>At this stage, we should have a working demo. So go ahead and preview the results in a browser; if all is well, you should see the video play without sound, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/6968OS_02_12.jpg" alt="Displaying full-size videos"/></div><p>Now we can simply play the video in full view when it's opened.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note19"/>Note</h3><p>There is a working example within the code bundle for this demo. Rename the <code class="literal">fullsize-finished.html</code> file to <code class="literal">fullsize.html</code> and the <code class="literal">fullsize-finished.css</code> file to <code class="literal">fullsize.css</code> before viewing the finished article.</p></div></div><p>Creating full size <a id="id162" class="indexterm"/>videos produces an intriguing effect, which needs to be managed with care. There are a few points to consider:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Use Modernizr (or similar tool) to detect if a mobile device is in use. If so, then display a background image instead.</li><li class="listitem" style="list-style-type: disc">This feature is useful for big announcements, where content needs to be displayed for a finite period of time—it will lose its appeal quickly though!</li><li class="listitem" style="list-style-type: disc">Don't set the video to display sound; this will only put people off from visiting your site.</li><li class="listitem" style="list-style-type: disc">If you use a poster image, try to keep the file size to a minimum, without reducing the quality too much.</li><li class="listitem" style="list-style-type: disc">Try to provide some mechanism whereby the video can be turned off if needed. Not everyone will want to see it running.</li><li class="listitem" style="list-style-type: disc">You may want to consider using something like the Network API to gauge the user's Internet connection. If they don't have a fast connection, then a smaller video should be played instead or the facility will be bypassed entirely for that user.</li></ul></div><p>Ultimately, it is worth giving this some careful consideration before implementing such a facility. If done well, it can produce a superb effect; there is a fine line that is all too easily crossed! This kind <a id="id163" class="indexterm"/>of effect would work well on music artists' websites. For some intriguing examples, take a look at <a class="ulink" href="http://www.creativebloq.com/web-design/video-backgrounds-2131982">http://www.creativebloq.com/web-design/video-backgrounds-2131982</a>. Hopefully, this will give you some inspiration for your next project!</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec34"/>Summary</h1></div></div></div><p>We've come to the end of our journey through responsive video, where we've covered a variety of useful effects. Let's take a moment to consider what we've covered in this chapter. We began with a brief look at video formats that work well with responsive video design; as part of this, we covered how easy it is to convert other formats into one of the recognized HTML5 video formats.</p><p>We then looked at embedding content into a page, using standard HTML5 tags, and noted some of the issues that appear. We then moved on and took a look at determining how we can get the available viewport size, as a replacement for media queries when working with videos. We then took a look at catering to support for other formats, followed by a look at using JavaScript libraries to provide fall back support for videos.</p><p>We then covered how you can provide support for different mobile platforms, using popular video players such as VideoJS. We then finished with a look at providing support for full size videos in a website, using the Big Buck Bunny videos created by the Blender Foundation.</p><p>So far throughout this book, we've worked with either images or videos. It is unlikely that your site will just require one or the other. In the next chapter, we'll see how to include both and look at the pitfalls of doing so in order to avoid heavy pages and long download times.</p></div></body></html>