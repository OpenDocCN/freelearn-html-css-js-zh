<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06" class="calibre1"/>Chapter 6. Migrating Your Site to Less</h1></div></div></div><p class="calibre7">So, by now, you've hopefully spent some time using Less and are thinking that this could be really useful for your projects going forward, right?</p><p class="calibre7">The trouble is you'll also probably be thinking of existing projects that could easily benefit by using Less, but you're not sure how to go about converting them to use Less. No problem; in this chapter, I will take you through some of the tips and tricks of how to make this transition to use Less, without risking everything.</p><p class="calibre7">We'll start by taking a look at the kind of questions we need to ask ourselves and then move on to creating the basic framework that we'll use when beginning the conversion, going through a detailed example of converting a mini website to use Less.</p><p class="calibre7">The key to conversion is to remember that Less is, after all, just a superset of CSS—most of the work is about identifying those parts that can be changed easily and those that might require more work. In this chapter, we'll cover the following topics:</p><div><ul class="itemizedlist"><li class="listitem">Low-hanging fruit—obvious candidates for Less conversion</li><li class="listitem">Identifying patterns in your CSS</li><li class="listitem">Building a library of mixins</li><li class="listitem">Using prebuilt libraries as part of the conversion process</li><li class="listitem">Mixing Less with plain CSS</li><li class="listitem">Working through a practical example</li></ul></div><p class="calibre7">Are you ready to start converting your CSS? Good, let's get started...</p></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch06lvl1sec51" class="calibre1"/>Preparing for the initial jump</h1></div></div></div><p class="calibre7">So, you've<a id="id412" class="calibre1"/> read all about using Less and are keen to start using it in some of your older projects. You've started working with it on your newer sites and love how it makes writing CSS so much more manageable...but, you're probably thinking: how can I incorporate it into an older site?</p><p class="calibre7">Well, you're in the right place—making the change in older sites doesn't need to be difficult, as long as you keep these tips in mind:</p><div><ul class="itemizedlist"><li class="listitem">Make sure you have installed Firebug with Less support, as outlined in <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <em class="calibre9">Building a Less Development Toolkit</em>. Trust me on this; it will make debugging your efforts so much easier!</li><li class="listitem">Run your<a id="id413" class="calibre1"/> existing CSS through a site, such as W3C CSS Validator (<a class="calibre1" href="http://jigsaw.w3.org/css-validator/validator">http://jigsaw.w3.org/css-validator/validator</a>). If you haven't already done so, this will help spot any errors and ensure that your code validates properly, before beginning to convert it to Less.</li><li class="listitem">Try to <a id="id414" class="calibre1"/>get into the mentality that converting Less should be done in blocks at a time and should be an iterative process—this reduces the risk of missing opportunities or making mistakes in your code; this is particularly important when converting large files, such as a WordPress style sheet!</li><li class="listitem">Don't forget that Less is a superset of CSS—provided we work through the conversion process in a logical manner. Less will still compile plain CSS code that has yet to be converted to its Less equivalent. This means that we can mix code during the conversion process until all of the styles have been suitably converted.</li><li class="listitem">Get into the habit of using sites such as <a class="calibre1" href="http://less2css.org">http://less2css.org</a> or <a class="calibre1" href="http://lesstester.com">http://lesstester.com</a>. These are great for experimenting with the Less code in order to see how it will compile into valid CSS.</li></ul></div><p class="calibre7">Let's put some of these tips into practice and take a look at the initial steps that should form the basis for any initial conversion process.</p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec52" class="calibre1"/>Creating the initial framework</h1></div></div></div><p class="calibre7">Once you've <a id="id415" class="calibre1"/>made the decision to convert in order to use Less, there are a few steps that we can take, which help with the initial conversion process, before we start writing Less code.</p><p class="calibre7">Let's take a look at how we can make this process easier. For the purpose of this example, I'll assume that you have just one style sheet, called <code class="email">styles.css</code>, and that you're working in a development environment on a simple HTML-based site in order to get accustomed to the conversion process.</p><div><ol class="orderedlist"><li class="listitem" value="1">Start by renaming the <code class="email">sitestyles.css</code> file with a <code class="email">.less</code> extension to <code class="email">sitestyles.less</code>.</li><li class="listitem" value="2">In a new file in your text editor, add the following:<div><pre class="programlisting">@import "sitestyles.less";</pre></div></li><li class="listitem" value="3">Save this as <code class="email">styles.less</code>. In your HTML code, change the existing link to <code class="email">sitestyles.css</code> in order to point to <code class="email">sitestyles.less</code>, using the following link:<div><pre class="programlisting">  &lt;link rel="stylesheet/less" href="css/styles.less"&gt;
  &lt;script src="img/less.min.js"&gt;&lt;/script&gt;</pre></div></li></ol><div></div><p class="calibre7">Use Crunch! or Sublime Text (depending on what you have set up in <a class="calibre1" title="Chapter 3. Getting Started with Less" href="part0031_split_000.html#page">Chapter 3</a>, <em class="calibre9">Getting Started with Less</em>) to compile the new <code class="email">styles.less</code> file in order to confirm whether it is producing a valid <code class="email">styles.css</code> file.</p><div><h3 class="title2"><a id="note29" class="calibre1"/>Note</h3><p class="calibre7">We've referenced the Less file directly in our code—this is for development purposes only and not recommended for production use.</p></div><p class="calibre7">At this <a id="id416" class="calibre1"/>point, you might think that having a single statement in the <code class="email">styles.less</code> file might sound like an overkill; there is a reason for this: the key to working with Less is to build up the initial framework of the Less file so that we can prove that it compiles to valid CSS first. Once this has been proven, it is simply a matter of adding more <code class="email">@import</code> statements for each partial file you want to include. Less will combine all of these into one file when we next recompile <code class="email">styles.less</code>, as we will see in the next section.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch06lvl2sec48" class="calibre1"/>Mixing Less with plain CSS</h2></div></div></div><p class="calibre7">If we<a id="id417" class="calibre1"/> mix Less with CSS to create a <a id="id418" class="calibre1"/>framework for importing individual partials, we <a id="id419" class="calibre1"/>will get an additional benefit: we are not obliged to convert all of the Less files in one go! Instead, we can simply break the existing CSS files into smaller <strong class="calibre8">partials</strong> and then import them into the master CSS file (here, <code class="email">styles.less</code>)—this makes it easier to manage the conversion process.</p><div><h3 class="title2"><a id="note30" class="calibre1"/>Note</h3><p class="calibre7">Partials are separate files that contain Less code—they are a means to help make managing Less code easier, as multiple files can be imported in one style sheet as part of the compilation process.</p></div><p class="calibre7">We then simply add an <code class="email">@import</code> statement for each Less file we need to import, such as the examples shown:</p><div><pre class="programlisting">@import "sitestyles.less";
@import "fonts.css";
@import "css3.less";
@import "menu.less";</pre></div><p class="calibre7">Remember that no matter how big the Less file is or how many partials are being imported, Less will only ever import a style in the final compiled CSS file if it is being referenced in the code. While we are still developing the Less file, we can easily compile this dynamically in the browser; once the final version is ready, this can be precompiled, and the<a id="id420" class="calibre1"/> resulting CSS file can be imported<a id="id421" class="calibre1"/> in our <a id="id422" class="calibre1"/>production environment.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec53" class="calibre1"/>Spotting low-hanging fruit</h1></div></div></div><p class="calibre7">Now that <a id="id423" class="calibre1"/>we have our basic framework in place, it's time to go fruit picking—no, I'm not referring to fruit picking in the literal sense, but finding CSS statements that can be easily converted with little effort.</p><p class="calibre7">Each project will vary in size and scope, but there will be some easy conversions that we can make, which will apply to any project:</p><div><ol class="orderedlist"><li class="listitem" value="1">An easy change that can be made is to incorporate variables for colors—once converted, we can use operators to calculate new values, such as lightening a specific color by 25 percent. As a start, we can create some variables, such as the following:<div><pre class="programlisting">@color-light-orange: #ffa500;
@color-gray-cyan: #6a7172;
@color-gray-dark: #313131;
@color-grayish-orange: #d7cec3;</pre></div><p class="calibre24">We can then use variables in our styles, instead of the hex codes; they will appear as follows:</p><div><pre class="programlisting">body {background: @color-gray-cyan; color: @color-gray-dark; }
a { color: @color-light-orange; }
h1, h2, h3, h4, h5, h6 { color: @color-gray-dark; }</pre></div><div><h3 class="title2"><a id="note31" class="calibre1"/>Note</h3><p class="calibre7">Ideally, the names used here should reflect the context that they are used for, such as <code class="email">body-textcolor</code> or <code class="email">heading-textcolor</code>; we've used names here to illustrate how they can replace existing colors, and at least make the color names readable!</p></div></li><li class="listitem" value="2">During the conversion process, you may want to consider moving converted code into a separate Less partial and importing it using the process we covered earlier. Although this will allow you to maintain a distinction between Less and CSS styles, it does mean that we may miss opportunities if the converted Less code is not displayed on the screen while we work on converting the existing CSS styles.</li><li class="listitem" value="3">If we're using CSS3 styles that contain vendor prefixes, we can convert our code to import mixins from external prebuilt libraries, such as LESS Hat or LESS Elements. This will reduce the code we need to write—after all, why reinvent the wheel if someone has already built a suitable mixin that we can use?</li><li class="listitem" value="4">A more <a id="id424" class="calibre1"/>evolved change that we can make is related to the use of nesting—this will make our code easier to read, as it is clearer how child styles will affect their parent elements. A perfect example of this is a menu system built into the header <code class="email">DIV</code> of a page:<div><pre class="programlisting">header .nav { margin-top: 100px; }  
header .nav li { margin-left: 10px; }  
header .nav li a { height: 30px; line-height: 10px; }</pre></div></li></ol><div></div><p class="calibre7">We can then convert it manually or using a site, such as <a class="calibre1" href="http://css2less.cc">http://css2less.cc</a>; while this site isn't perfect, it will give you a head start in the conversion process:</p><div><img src="img/00060.jpeg" alt="Spotting low-hanging fruit" class="calibre10"/></div><p class="calibre11"> </p><div><h3 class="title2"><a id="tip09" class="calibre1"/>Tip</h3><p class="calibre7">Online CSS to Less convertors are not perfect—for example, they may struggle to produce good quality code if your CSS file contains a lot of random selectors; Less will also regroup CSS statements during compilation, which may break your code. These sites should be treated as a start point for development; the assumption time is spent in finessing the code manually after the initial conversion.</p></div><p class="calibre7">There will no doubt be other easy changes we can make—it will all depend on the size and scope of the site being converted to use Less. Again, the key point to remember here is that conversion should be an iterative process and that you will do yourself no favors if you try to convert your site in one go!</p><p class="calibre7">Let's change<a id="id425" class="calibre1"/> our focus slightly and move on to the next stage in the process—once you've dealt with the easy conversions, it's time to ask yourself a series of questions, all of which fall under the banner of identifying patterns in your CSS.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec54" class="calibre1"/>Identifying patterns in your CSS</h1></div></div></div><p class="calibre7">Identifying<a id="id426" class="calibre1"/> patterns in your CSS is all about asking yourself one <a id="id427" class="calibre1"/>question: how can I reduce code?</p><p class="calibre7">There are a number of ways of doing this; the exact process will depend on the nature of the site being converted. There are some general questions that you can ask yourself though, to help with the conversion process:</p><div><ul class="itemizedlist"><li class="listitem">Does your site use any CSS3 styles? If it does, consider using a prebuilt Less library, which we can import in our Less style sheet.</li><li class="listitem">Does your CSS code contain any statements, such as links to image elements? If it does, you might want to consider using string variables and interpolation to better manage the links, particularly if they need to be updated in the future.</li><li class="listitem">How many variables does your site use? If any of these variables will be used to define colors, then consider using some of Less' in-built functions or operators to dynamically generate colors, such as making a color lighter by 20 percent or adding a value to an existing color to create a new one.</li><li class="listitem">How often do you see the same (or very similar) block of code shown throughout your code? With a little care, can it be altered to be the same as others? If so, this would be a prime candidate for conversion into a mixin. The more instances of code we can alter while still maintaining the same effect, the more value we will get from using a mixin.</li></ul></div><p class="calibre7">While there are likely to be more questions that you might ask, since each site is different, not every question will apply. One of the key questions will be related to creating mixins and whether we can separate them in our own library for future use.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec55" class="calibre1"/>Using prebuilt mixin libraries</h1></div></div></div><p class="calibre7">If we've <a id="id428" class="calibre1"/>created a number of mixins, we could turn these into a library. However, this may not always be necessary; instead, we can always look for ways to reuse mixins from libraries that are available for download from the Internet.</p><p class="calibre7">Why should we use them? There are two good reasons for doing so:</p><div><ul class="itemizedlist"><li class="listitem">We can avoid the need to reinvent the wheel</li><li class="listitem">We don't need to worry about the support for, or the updating of, the library—this will be handled by the author, frequently with the help of the open source community at large</li></ul></div><p class="calibre7">There are lots of libraries that are available—they can all be imported using the same <code class="email">@import</code> statement we've already seen in use. We will cover how to use such a library in more detail <a id="id429" class="calibre1"/>in the practical example at the end of the <a id="id430" class="calibre1"/>chapter, but<a id="id431" class="calibre1"/> in<a id="id432" class="calibre1"/> the meantime, here<a id="id433" class="calibre1"/> are <a id="id434" class="calibre1"/>some examples of libraries that <a id="id435" class="calibre1"/>are available for use:</p><div><ul class="itemizedlist"><li class="listitem">3L (<a class="calibre1" href="http://mateuszkocz.github.io/3l/">http://mateuszkocz.github.io/3l/</a>)</li><li class="listitem">Animate.css (<a class="calibre1" href="https://github.com/daneden/animate.cs">https://github.com/daneden/animate.cs</a>)</li><li class="listitem">ClearLess (<a class="calibre1" href="https://github.com/clearleft/clearless">https://github.com/clearleft/clearless</a>)</li><li class="listitem">CSS <a id="id436" class="calibre1"/>Effects (<a class="calibre1" href="http://adodson.com/css-effects/">http://adodson.com/css-effects/</a>)</li><li class="listitem">Cssowl (<a class="calibre1" href="http://cssowl.owl-stars.com/">http://cssowl.owl-stars.com/</a>)</li><li class="listitem">LESS<a id="id437" class="calibre1"/> Elements (<a class="calibre1" href="http://lesselements.com/">http://lesselements.com/</a>)</li><li class="listitem">LESS<a id="id438" class="calibre1"/> Hat (<a class="calibre1" href="http://lesshat.com/">http://lesshat.com/</a>)</li><li class="listitem">Oban (<a class="calibre1" href="http://oban.io/">http://oban.io/</a>)</li><li class="listitem">Preboot (<a class="calibre1" href="http://getpreboot.com/">http://getpreboot.com/</a>)</li></ul></div><p class="calibre7">There will be plenty more available online; you can search over the Internet to see what is available, as you may find others that are more suited to your needs. We will be using the LESS Hat library in a practical demo later in this chapter.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec56" class="calibre1"/>Building a library of mixins</h1></div></div></div><p class="calibre7">As <a id="id439" class="calibre1"/>part of identifying patterns in our CSS, where we can identify code that can be turned into mixins, we might find that using a prebuilt library, such as LESS Elements or LESS Hat, doesn't always meet our requirements.</p><p class="calibre7">This is not necessarily an issue; it may be that the author of the library hasn't created the mixin the way we want it, as he was trying to satisfy another requirement. If existing mixins aren't available, we can always consider creating our own library of mixins as partials that can be included in future projects. We could even consider hosting mixins on GitHub (<a class="calibre1" href="http://www.github.com">http://www.github.com</a>), as <a id="id440" class="calibre1"/>has been done by others:</p><div><img src="img/00061.jpeg" alt="Building a library of mixins" class="calibre10"/></div><p class="calibre11"> </p><div><h3 class="title2"><a id="tip10" class="calibre1"/>Tip</h3><p class="calibre7">There are several popular code-sharing platforms available, which you can try—two good<a id="id441" class="calibre1"/> examples are Google Code (<a class="calibre1" href="https://code.google.com/">https://code.google.com/</a>) and <a id="id442" class="calibre1"/>Bitbucket (<a class="calibre1" href="https://bitbucket.org/">https://bitbucket.org/</a>).</p></div><p class="calibre7">The<a id="id443" class="calibre1"/> trick in creating mixins for libraries here is to stay several steps ahead of yourself and work out how you can convert similar blocks of code so that they can be replaced with one or more mixins.</p><p class="calibre7">If you find that the code can be converted into mixins, it is worth giving a thought to how these mixins should be written. A key precept of Less is the DRY principle (Don't Repeat Yourself)—you may find yourself writing a number of mixins that can be reused. The usefulness of these mixins will increase if careful consideration is given to any tweaks that can be made, so that other blocks of CSS code can be replaced by Less calls to the mixins you create.</p><p class="calibre7">Once your library has been created, you can host it on GitHub—there are several good reasons for doing so:</p><div><ul class="itemizedlist"><li class="listitem">There is a ready-made community at large, who can help with issues or support the library</li><li class="listitem">It is a good way to say thank you to others, as you may have used their work</li><li class="listitem">Anyone who uses your mixin library can help suggest improvements to your mixins</li></ul></div><p class="calibre7">Creating <a id="id444" class="calibre1"/>your own library and making it available online will give you an enormous sense of satisfaction, from having been able to contribute back to the open source movement—after all, we've only reached where we are today, thanks to the efforts of those who have spent hours creating libraries such as Less!</p><p class="calibre7">Now, let's turn our focus to using one of these prebuilt libraries that we've just covered—we're going to take a look at using LESS Hat as part of our practical example.</p></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec57" class="calibre1"/>Working through a practical example</h1></div></div></div><p class="calibre7">So far, we've<a id="id445" class="calibre1"/> looked at a range of tips and tricks that you can use to convert a site in order to use Less—while there are some useful tips, I think you will agree that it is far better to see the conversion process in action! With this in mind, let's take a look at a simple example, in the form of the CSS styling we created in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <em class="calibre9">Working with Variables, Mixins, and Functions</em>, for the one-page website.</p><p class="calibre7">Before we start making changes, let's take a look at the compiled CSS that was created for the page, along with a screenshot of the page:</p><div><img src="img/00062.jpeg" alt="Working through a practical example" class="calibre10"/></div><p class="calibre11"> </p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch06lvl2sec49" class="calibre1"/>Introducing the CSS</h2></div></div></div><p class="calibre7">Now<a id="id446" class="calibre1"/> that we've seen a screenshot of the page that we're going to retrofit to use Less, let's take a look at the CSS code we need to convert. The compiled CSS that was generated using Crunch! is as follows—a copy of this is in the code download that accompanies this book, as <code class="email">conversion.css</code>. We'll also include a slightly modified version of the styles from <code class="email">social.css</code>, within <code class="email">conversion.css</code>. This will still produce the same results, but the reason for modifying it here will become apparent in the next section:</p><div><pre class="programlisting">#social { width: 175px; height: 60px; background-image: url('../img/sprites.png'); float: right;}</pre></div><p class="calibre7">At first glance, this should look like an ordinary style sheet, which hopefully uses some fairly common style attributes that could be used in any website project:</p><div><img src="img/00063.jpeg" alt="Introducing the CSS" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">You're probably thinking that with such a simple example, there's little we can do here, right?</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch06lvl2sec50" class="calibre1"/>Identifying the changes to be made</h2></div></div></div><p class="calibre7">Wrong! Making the conversion to use Less should not always be about the size of your style sheet <a id="id447" class="calibre1"/>but about getting into the mindset that using Less will make it easier to manage your code, no matter what its size. Converting to use Less should be an iterative process that stops only when all of the original CSS has been converted and when Less is being used in your site.</p><p class="calibre7">To prove this, let's take a look at the code and highlight some of the areas that can be converted. The style sheet is a simple example, but it is enough to illustrate the processes that you can use to convert a CSS file to its Less equivalent.</p><div><ul class="itemizedlist"><li class="listitem">Did you notice the three style rules that use <code class="email">#leftmargin</code>? Here is the perfect opportunity to use nesting—we can avoid having to duplicate the rule name, and we can group the styles in a more logical manner.</li><li class="listitem">We used the box-sizing attribute used for <code class="email">#content</code> but didn't include all the vendor prefixes for it. It's a good excuse to look at one of the many mixin libraries available online and see if one of them contains a suitable mixin that we can use. This avoids the need to reinvent the wheel—we can simply link to the mixin and pass values to it, if appropriate. Importing a prebuilt mixin will also handle any vendor prefixes that are required for operation.</li><li class="listitem">Instead of using hex values for colors, which aren't easy to translate into something meaningful, we can create variables and assign values to them. The names can be set to describe the color value being set. If they need to be updated, then it only requires one update, as Less will handle changing all the other instances automatically.</li><li class="listitem">In <code class="email">div</code> and <code class="email">#title</code>, we've included a <code class="email">font-family</code> attribute—while this will work perfectly well in normal CSS, we can use the same variable process and create meaningful names for each <code class="email">font-family</code> attribute. This makes them much easier to update, should they need to be changed in the future.</li><li class="listitem">In <code class="email">#leftmargin</code> and <code class="email">#content</code>, you may or may not have noticed an opportunity here—we're repeating the same code (albeit, with slightly different values) to create our column. Instead, we could use a mixin to control these styles. However, there is a catch: notice that <code class="email">#content</code> has additional <code class="email">padding: 10px</code> in the style rule? In this instance, it's not an issue—we can add this in <code class="email">#leftmargin</code> with no noticeable adverse effect. Remember, it's all about making the initial change and then taking a look to see what we can alter, which will then allow us to add more to the mixin and make it more useful.</li><li class="listitem">A more advanced change that we can make is to switch to using <code class="email">data-uri</code> for importing the social networking image in our CSS in order to save on server requests and bandwidth usage. We used it in the original example in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <em class="calibre9">Working with Variables, Mixins, and Functions</em>—it will work perfectly well for small images (such as ours) but is less useful for larger ones, or those that are not reused in the site.</li></ul></div><div><h3 class="title2"><a id="note32" class="calibre1"/>Note</h3><p class="calibre7">There is no hard and fast rule regarding what can be defined as a "small" image—the image I've used in this example weighs in at 9 KB. This will depend a little on any <code class="email">data-uri</code> limit within a browser; for example, IE8 is limited to 32 KB. It is all about choosing carefully—small images such as credit card logos would be perfect, but a large picture clearly isn't!</p></div><p class="calibre7">These <a id="id448" class="calibre1"/>are just a few of the concepts that we can use to convert this style sheet to use Less. The key to the conversion process is not about size, but about re-engineering the code to make it easier to maintain and removing duplication if others have already created code that you can import in your own projects. Once you've started converting code, you will see other opportunities for conversion—it is very much a case of practice makes perfect!</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_3"><a id="ch06lvl2sec51" class="calibre1"/>Making the changes</h2></div></div></div><p class="calibre7">Now that we've <a id="id449" class="calibre1"/>seen the changes we can make, let's begin to implement some of these changes, beginning with the creation of our Less framework files. Start by renaming the <code class="email">conversion.css</code> file to <code class="email">conversion.less</code>. Next, add the following line to a new file in your text editor:</p><div><pre class="programlisting">@import "conversion.less";</pre></div><p class="calibre7">Save the file as <code class="email">styles.less</code>—this sets up our framework, ready for us to convert our code. If you've used Sublime Text or Crunch!, then you will find that a <code class="email">styles.css</code> file has been created—this contains a compiled copy of the code from <code class="email">conversion.less</code>. Setting up the framework in this manner means that we can add more <code class="email">@import</code> statements in the future; the contents of these imported files will automatically be included in the final article, when the <code class="email">styles.less</code> file is recompiled.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_4"><a id="ch06lvl2sec52" class="calibre1"/>Using the CSS3 mixins</h2></div></div></div><p class="calibre7">Next, let's<a id="id450" class="calibre1"/> take a look at the CSS3 styles we've used—we can convert to use a prebuilt mixin library. For the purpose of this exercise, we're going to use the <a id="id451" class="calibre1"/>LESS Hat library, available at <a class="calibre1" href="http://lesshat.madebysource.com/">http://lesshat.madebysource.com/</a>. Click on the <strong class="calibre8">Download LESS Hat</strong> button—at the time of writing this book, the latest Version is 2.0.15.</p><p class="calibre7">We need to extract the <code class="email">lesshat.less</code> file, which is in the <code class="email">build</code> subfolder—copy this to the <code class="email">css</code> subfolder in your project folder. Switch back to the <code class="email">conversion.less</code> file in your text editor<a id="id452" class="calibre1"/> and then add this line at the start:</p><div><pre class="programlisting">@import "lesshat.less";</pre></div><p class="calibre7">This will now import any of the mixins that we need to use from the LESS Hat library.</p><div><h3 class="title2"><a id="note33" class="calibre1"/>Note</h3><p class="calibre7">We can't include the <code class="email">@import</code> statement for LESS Hat in the <code class="email">styles.less</code> file—this will cause a compilation error in <code class="email">conversion.less</code>, as it can't find the source mixins it needs to use when compiling the code.</p></div><p class="calibre7">Now that we've added the LESS Hat library, we can start adapting our code to use the mixins from this library; there are several places where we alter the code to use mixins, as highlighted:</p><div><pre class="programlisting">#leftmargin { <strong class="calibre8">.box-sizing(padding-box);</strong> border-right: 1px solid #CCCCCC; float: left; height: 575px; width: 306px; }
#content { <strong class="calibre8">.box-sizing(padding-box);</strong> float: left; height: 575px; padding: 10px; width: 494px; }
#container { border: 1px solid #000000; .border-radius(4px);
.box-shadow(4px 4px 0 rgba(0, 0, 0, 0.5)); margin: 5% auto; width: 800px; }</pre></div><p class="calibre7">In this example, there are only three places where we can use LESS Hat. Even though this is only a limited number, we should not forget that it is not so much about the number <a id="id453" class="calibre1"/>of instances where we can use external mixin libraries, but more about not reinventing the wheel and that the use of an external library means less work for us to do, provided a suitable library is available for use.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_5"><a id="ch06lvl2sec53" class="calibre1"/>Creating variables for fonts</h2></div></div></div><p class="calibre7">Let's change <a id="id454" class="calibre1"/>our focus and take a look at another concept<a id="id455" class="calibre1"/> that we can use when converting to use Less: the use of variables to help maintain values, such as fonts.</p><p class="calibre7">In our code, we have a few instances where we're using fonts. These can be a pain to update in normal CSS, so let's create some variables that we can use to automatically update our Less code. Creating variables means that only one value needs to be updated at the start of our code. Less will handle the update of any other instance of these variables automatically.</p><p class="calibre7">In a copy of <code class="email">conversion.less</code>, add the following line immediately below the <code class="email">@import</code> statement:</p><div><pre class="programlisting">@import "lesshat.less";
@KiteOne: ~"'Kite One', arial, sans-serif";</pre></div><p class="calibre7">The observant among you will see that we've added a variable—the only difference from the ones we looked at earlier in the book is that this is an encapsulated variable. We're using the tilde symbol to tell Less to reproduce this exactly as shown when compiling our code. This means that instead of using a long sentence, we can now simply use <code class="email">@KiteOne</code> as a value:</p><div><pre class="programlisting">div { font-family: @KiteOne; margin-bottom: 5px; margin-top: 5px; padding: 5px; }</pre></div><p class="calibre7">In this instance, we only need to change one rule. In a larger style sheet, the benefits of this will become more apparent, as it removes the need to alter each instance manually when updating styles.</p><div><h3 class="title2"><a id="note34" class="calibre1"/>Note</h3><p class="calibre7">We will cover more on how to use Less to manipulate fonts in <a class="calibre1" title="Chapter 7. Manipulating Fonts with Less" href="part0066_split_000.html#page">Chapter 7</a>, <em class="calibre9">Manipulating Fonts with Less</em>.</p></div></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_6"><a id="ch06lvl2sec54" class="calibre1"/>Creating variables for colors</h2></div></div></div><p class="calibre7">We've also used <a id="id456" class="calibre1"/>several colors in our code—one should be <a id="id457" class="calibre1"/>recognizable as white (<code class="email">#fff</code>), but the other is less recognizable as light gray. Let's fix this using the same process to create two new variables for these colors and one variable for black:</p><div><pre class="programlisting">@KiteOne: "'Kite One', arial, sans-serif";
<strong class="calibre8">@lightgray: #ccc;</strong>
<strong class="calibre8">@white: #fff;</strong>
<strong class="calibre8">@black: #000;</strong>
</pre></div><p class="calibre7">We can now alter our Less code to use these variables, as shown—this will make the code more readable:</p><div><pre class="programlisting">#container { border: 1px solid <strong class="calibre8">@black</strong>; .border-radius(4px); }
#title { color: <strong class="calibre8">@white</strong>; font-family: @KiteOne; font-size: 32px; font-weight: 400; padding-left: 100px; padding-top: 30px; position: absolute; }
#leftmargin { .box-sizing(padding-box); border-right: 1px solid <strong class="calibre8">@lightgray</strong>; float: left; height: 575px; width: 306px; }
#footer { border-top: 1px solid <strong class="calibre8">@lightgray</strong>; clear: both; font-size: 12px; height: 65px; }</pre></div><p class="calibre7">This will make the code easier to read, but it also means that if we ever need to change the values, we only need to do it once at the start—Less will take care of updating all other instances automatically.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_7"><a id="ch06lvl2sec55" class="calibre1"/>Switching to using nesting</h2></div></div></div><p class="calibre7">Our next <a id="id458" class="calibre1"/>change is a little more dramatic; it concerns the four instances of the <code class="email">#leftmargin</code> style rules in our code. Instead of having to write each rule manually, we can group them together by using Less' nesting functionality; this makes them easier to read, as they follow a more logical structure.</p><p class="calibre7">In a copy of <code class="email">conversion.less</code>, remove the four <code class="email">#leftmargin</code> lines and replace them with this:</p><div><pre class="programlisting">#leftmargin {
  .box-sizing(padding-box);
  border-right: 1px solid @lightgray;
  float: left; height: 575px; width: 306px;
  li { list-style: none outside none; }
  a {
    text-decoration: none;
    &amp;:hover { text-decoration: underline; }
  }
}</pre></div><p class="calibre7">This will make our code easier to read and will avoid the need to have to repeat the element name when writing the rules. Notice also how we've used the ampersand symbol for <code class="email">:hover</code>—the ampersand symbol tells Less that <code class="email">:hover</code> should be treated as a pseudo selector, which <a id="id459" class="calibre1"/>will be compiled as <code class="email">#leftmargin a:hover</code> by Less.</p><div><h3 class="title2"><a id="tip11" class="calibre1"/>Tip</h3><p class="calibre7">The use of ampersands (as shown in our example) isn't limited to pseudo selectors; it can be used to represent a parent selector or class used in the code—see <a class="calibre1" href="http://lesscss.org/features/#parent-selectors-feature">http://lesscss.org/features/#parent-selectors-feature</a> for more details.</p></div></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_8"><a id="ch06lvl2sec56" class="calibre1"/>Incorporating our own mixins</h2></div></div></div><p class="calibre7">Our final <a id="id460" class="calibre1"/>change is related to column sizes—if you read the code carefully, you will notice that in at least two places, we have almost identical code: <code class="email">#leftmargin</code> and <code class="email">#content</code>. We can move four style attributes into a separate parametric mixin, as shown—add this immediately below the variables we created earlier in this chapter:</p><div><pre class="programlisting">.columnsize( @height, @width) { float: left; height: @height;
width: @width; padding: 10px; }</pre></div><p class="calibre7">Once done, we can alter our style rules accordingly:</p><div><pre class="programlisting">#leftmargin { .box-sizing(padding-box); border-right: 1px solid @lightgray; <strong class="calibre8">.columnsize(575px, 306px);</strong> ...}

#content { .box-sizing(padding-box); .<strong class="calibre8">columnsize(575px, 494px);</strong> }</pre></div><p class="calibre7">It's a simple example of how, with a little care, we can create our own mixin to remove some of the duplication in the code. While it may not reduce the number of lines in our code, it will help make the code more readable and easier to alter if we need to change the values passed through the mixin.</p><p class="calibre7">At this point, we've worked through our original code to convert it to use Less. If all is well, we should end up with something that will compile in valid CSS; if you take a look at the code download that accompanies this book, you can see a copy of <code class="email">conversion.less</code> and compare it with your own version.</p><p class="calibre7">We can test the success of the conversion process by altering a copy of the HTML code we produced in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <em class="calibre9">Working with Variables, Mixins, and Functions</em>. Open a copy of <code class="email">functions2.html</code> and then look for the lines highlighted below:</p><div><pre class="programlisting">  &lt;title&gt;Demo: Functions&lt;/title&gt;
  &lt;link href='http://fonts.googleapis.com/css?family=Kite+One' rel='stylesheet' type='text/css'&gt;
<strong class="calibre8">  &lt;link rel="stylesheet/less"  href="css/functions.less"&gt;</strong>
<strong class="calibre8">  &lt;link rel="stylesheet" type="text/less" href="css/social.less"&gt;</strong>
  &lt;script src="img/less.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;</pre></div><p class="calibre7">Change these as shown; then, save the file as <code class="email">conversion.html</code>:</p><div><pre class="programlisting">  &lt;link href='http://fonts.googleapis.com/css?family=Kite+One' rel='stylesheet' type='text/css'&gt;
<strong class="calibre8">  &lt;link rel="stylesheet/less" href="css/styles.less"&gt;</strong>
  &lt;script src="img/less.min.js"&gt;&lt;/script&gt;</pre></div><p class="calibre7">If you<a id="id461" class="calibre1"/> preview the results in a browser, don't expect to see any real changes to the overall page, with the exception of the small amount of extra padding that was added, which has pushed the left-hand navigation down by a small measure. Hopefully, this goes to show that with some care and thought, we can produce the same results while better managing our code!</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_9"><a id="ch06lvl2sec57" class="calibre1"/>Importing images into style sheets – a bonus</h2></div></div></div><p class="calibre7">Before <a id="id462" class="calibre1"/>we complete our changes, I thought I would throw<a id="id463" class="calibre1"/> in a little bonus; if we look back at the list of changes that we could make, we noted one small change that could be made, which is related to the social media image that is used in the footer of our page.</p><p class="calibre7">The CSS for this is controlled by the following line in our Less file:</p><div><pre class="programlisting">#social { width: 175px; height: 60px; background-image: url('../img/sprites.png'); float: right; }</pre></div><p class="calibre7">This will pull in the image as a separate file, which means an additional request to the server. On a small site, this won't be an issue, but on a larger site, this could make the site bandwidth hungry, which will be an issue.</p><p class="calibre7">Instead, we can use one of Less' functions, <code class="email">data-uri</code>, which we covered in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <em class="calibre9">Working with Variables, Mixins, and Functions</em>, when we created the original version of our page. This is ideal for small images, particularly those that are repeated throughout the site; this will convert them to a base64 statement that can be included in our CSS, thereby removing the need to shell out to the server to request the image.</p><p class="calibre7">In <code class="email">conversion.less</code>, look for this line:</p><div><pre class="programlisting">#social { width: 175px; height: 60px; background-image: url('../img/sprites.png'); float: right; }</pre></div><p class="calibre7">If we wanted to use <code class="email">data-uri</code>, we would change the <code class="email">background-image</code> property as shown:</p><div><pre class="programlisting">#social { width: 175px; height: 60px;  <strong class="calibre8">background-image: data-uri('../img/sprites.png')</strong>; float: right; }</pre></div><p class="calibre7">The net effect of this means that while we may have a few hundred lines in our CSS, we've cut down the need to request for the image from the server. This process should be used with care though—it should only be used for small images, which may be repeated throughout<a id="id464" class="calibre1"/> the site. It's a useful little trick for saving<a id="id465" class="calibre1"/> requests to the server, provided it is used with care!</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec58" class="calibre1"/>Viewing the finished article</h1></div></div></div><p class="calibre7">Now that<a id="id466" class="calibre1"/> we've made the changes to our converted CSS file, let's take a look at the end result. To compare, open a copy of <code class="email">conversion.less</code> from the code download that accompanies the book and see how you got on with making the changes:</p><div><img src="img/00064.jpeg" alt="Viewing the finished article" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Hopefully, you can see some of the changes we've made—Note that we've not necessarily saved on the number of lines we've written, but we've made it easier to update the code in the future, if changes need to be made. Granted that in a small Less file such as this one, we <a id="id467" class="calibre1"/>may not see the full benefits of using Less; in a larger file, the benefits will become apparent when converting from CSS to use Less.</p></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec59" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">One of the hardest concepts to understand in Less is how we can convert an existing site to use Less. While there are some easy (or perhaps more complex, depending on your take) questions that we can answer, converting a site can require a certain degree of skill, to ensure that we take full advantage of Less during the conversion process.</p><p class="calibre7">Throughout this chapter, we saw some of the questions and tricks that we can use to start the conversion process. We began by taking a look at how to prepare for the initial jump into the conversion process, which was followed by the initial steps anyone should take before considering how to convert their CSS code. We saw how easy it is to split code into separate partials, which can be imported into one master file that Less will compile to valid CSS.</p><p class="calibre7">Our initial steps into converting Less code began with a look at spotting the low-hanging fruits, or quick and easy changes that we can make. We saw how, with the use of sites such as <a class="calibre1" href="http://css2less.cc">http://css2less.cc</a>, we can easily start converting code; it was noted that these sites are not perfect but can serve as a good basis for converting code. Next came a look at how to identify patterns in our CSS code—we examined some of the questions that should be asked as part of the process. It was noted that every site will be different; hence, different questions will need to be asked. Nonetheless, there are some basic questions that will apply to any site.</p><p class="calibre7">We then saw how to use prebuilt mixin libraries as part of the conversion process and covered some examples that can be used in our projects—this is a good way to incorporate mixins created by others, which will help reduce the effort required for creating our style sheet. We then covered how it might be necessary to create our own mixin library, if an existing one available online does not meets our needs.</p><p class="calibre7">We finished the chapter with a detailed look at a practical example of how to convert an existing website to use Less—we used the single web page that was created in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <em class="calibre9">Working with Variables, Mixins, and Functions</em>, as a way to prove that it doesn't matter how large the site is, most sites will benefit from the conversion to use Less. We examined how easy it was to apply some simple conversions, using the basic principle of examining the code carefully, in a block at a time, and using the techniques outlined earlier in the chapter. One of the conversions we included was a simple change to the fonts used—we'll explore this further in the next chapter.</p></div></body></html>