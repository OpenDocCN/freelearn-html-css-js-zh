<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Commencing with CreateJS"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Commencing with CreateJS</h1></div></div></div><p>In this chapter, we are going to talk about working with basic objects and events in CreateJS and EaselJS. After learning about these topics, you can work with basic methods and functions in CreateJS to create your shapes, and control them using events.</p><p>We are going to discuss the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Exploring CreateJS</li><li class="listitem" style="list-style-type: disc">Working with APIs</li><li class="listitem" style="list-style-type: disc">Methods and events</li></ul></div><div class="section" title="Exploring CreateJS"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec11"/>Exploring CreateJS</h1></div></div></div><p>EaselJS is<a id="id28" class="indexterm"/> one of the <a id="id29" class="indexterm"/>main CreateJS modules, which enable developers to work with Canvas elements. To work with EaselJS, we need to have a<a id="id30" class="indexterm"/> <code class="literal">canvas</code> element, so all shapes can be rendered into this area. After creating an instance of <code class="literal">Stage</code> class, we need to add <code class="literal">displayObject</code> to the <code class="literal">Stage</code> class. EaselJS supports the following <a id="id31" class="indexterm"/>features:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Bitmap</strong></span>: This is <a id="id32" class="indexterm"/>used for the images.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Shape</strong></span> and <span class="strong"><strong>Graphics</strong></span>: These<a id="id33" class="indexterm"/> are<a id="id34" class="indexterm"/> used for the vector graphics.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>SpriteSheet</strong></span> and <span class="strong"><strong>Sprite</strong></span>: These <a id="id35" class="indexterm"/>are<a id="id36" class="indexterm"/> used for the animated Bitmaps.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text</strong></span>: This<a id="id37" class="indexterm"/> is used for the simple text instances.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Container</strong></span>: These <a id="id38" class="indexterm"/>hold other DisplayObjects.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>DOMElement</strong></span>: This<a id="id39" class="indexterm"/> is used to control the HTML DOM elements.</li></ul></div><p>When the <code class="literal">Stage</code> object wraps the <code class="literal">canvas</code> element, all shapes and text appear in the <code class="literal">Canvas</code> element.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>For more details, check the EaselJS documentation at <a class="ulink" href="http://www.createjs.com/Docs/EaselJS/modules/EaselJS.html">http://www.createjs.com/Docs/EaselJS/modules/EaselJS.html</a>.</p></div></div><p>Let's go<a id="id40" class="indexterm"/> through an example of creating a basic shape in EaselJS. Here, we have a <code class="literal">canvas</code> element with a specific height and width:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&lt;canvas id="demoCanvas" width="500" height="200"&gt;&lt;/canvas&gt;</strong></span>
</pre></div><p>CreateJS has a <code class="literal">Stage</code> method, which accepts a <code class="literal">canvas</code> element in the first parameter, and we should pass the ID of our canvas element to it:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>var stage = new createjs.Stage("demoCanvas");</strong></span>
</pre></div><p>We now have a stage for our canvas element. In the next step, we need to create a shape:</p><div class="informalexample"><pre class="programlisting">var circle = new createjs.Shape();
circle.graphics.beginFill("red").drawCircle(0, 0, 50);
circle.x = 100; 
circle.y = 100; </pre></div><div class="tip" title="Tip" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div><p>In the first line, a <code class="literal">circle</code> variable is created. It contains the <code class="literal">Shape</code> object from EaselJS. All <code class="literal">Shape</code> objects have a <code class="literal">graphics</code> property.</p><p>In the next line, we fill it with the color red using the <code class="literal">beginFill</code> method<a id="id41" class="indexterm"/>, and then in the line after that, we create a circle with the <code class="literal">drawCircle</code> method<a id="id42" class="indexterm"/>. The <code class="literal">drawCircle</code> method has three parameters; the first two parameters are used for positioning the circle (x and y axis values) and the last parameter is the radius in pixels. Thus, we have created a circle with position <code class="literal">0</code> (relative to the shape's position) and radius <code class="literal">50</code>.</p><p>EaselJS supports method chaining, we can call all functions one after another, just as we have seen in our previous example of creating the circle and filling in the background color.</p><p>After creating the <code class="literal">Shape</code> object, we need to add it to our <code class="literal">stage</code> object and also update the stage as follows:</p><div class="informalexample"><pre class="programlisting">stage.addChild(circle);
stage.update();</pre></div><p>Keep in mind that after adding <code class="literal">child</code> (<code class="literal">shape</code>, <code class="literal">circle</code>, and so on), we have to call the <code class="literal">update</code> method from the <code class="literal">stage</code> object to update the stage; otherwise, the code will not run properly and we will not get the desired result. You can see the result of our simple code in the following screenshot:</p><div class="mediaobject"><img src="graphics/0260OS_02_01.jpg" alt="Exploring CreateJS"/></div></div></div>
<div class="section" title="Working with events"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec12"/>Working with events</h1></div></div></div><p>
<code class="literal">DisplayObject</code> has a <a id="id43" class="indexterm"/>method to add events to shapes or objects.<a id="id44" class="indexterm"/> Using <code class="literal">addEventListener</code>, we can add an event to <code class="literal">DisplayObject</code> (for example, <code class="literal">shape</code>). This function has two mandatory arguments:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The name of the event</li><li class="listitem" style="list-style-type: disc">The callback function for the event</li></ul></div><p>We will understand this method of working with events with the following code:</p><div class="informalexample"><pre class="programlisting">displayObject.addEventListener("click", handleClick); 
function handleClick(event) {
  // Click happened.
}</pre></div><p>In the first line, a click event is added to <code class="literal">displayObject</code> so that the <code class="literal">handleClick</code> function<a id="id45" class="indexterm"/> is called when the user clicks on the object. The <code class="literal">handleClick</code> function is empty in this example.</p><p>Let's consider our earlier example of the circle and add a click event to our circle. Inside the callback function of the click event, we move the circle 10 pixels to right. Here is the code for that:</p><div class="informalexample"><pre class="programlisting">circle.addEventListener("click", handleClick); 
function handleClick(event) { 
event.target.x += 10; 
stage.update(); 
}</pre></div><p>In the <a id="id46" class="indexterm"/>first line, we have our DisplayObject. Using <code class="literal">addEventListener</code>, the click event is added to the<a id="id47" class="indexterm"/> circle. Our callback handler is <code class="literal">handleClick</code>. Inside this function, we can get target objects (the circle shape, in this example) and change properties of the shape (for example, width, height, or position) via the <code class="literal">event</code> variable.</p><p>
<code class="literal">event.target</code> is the target shape object. In every callback function call, we add the x property with 10 and then call the <code class="literal">update</code> function from the <code class="literal">stage</code> object. We have to call the update function after changing properties in order to apply changes.</p><p>Remember that to add events to <code class="literal">DisplayObject</code>, we need to add an event listener first and then add displayObject to the stage. Here is the complete source code for our example:</p><div class="informalexample"><pre class="programlisting">var stage = new createjs.Stage("demoCanvas");

var circle = new createjs.Shape();
circle.graphics.beginFill("red").drawCircle(0, 0, 50);
circle.x = 100; 
circle.y = 100; 

circle.addEventListener("click", handleClick); 
function handleClick(event) { 
  event.target.x += 10; 
  stage.update(); 
}
stage.addChild(circle);
stage.update();</pre></div><p>EaselJS has many more events, and you can use all of them in the same example explained previously.</p><p>Currently DisplayObjects supports the following events:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">click</code>: The <a id="id48" class="indexterm"/>user clicks and releases the mouse</li><li class="listitem" style="list-style-type: disc"><code class="literal">dblclick</code>: The <a id="id49" class="indexterm"/>user double-clicks the mouse</li><li class="listitem" style="list-style-type: disc"><code class="literal">mousedown</code>: The <a id="id50" class="indexterm"/>user clicks the mouse</li><li class="listitem" style="list-style-type: disc"><code class="literal">mouseout</code>: The <a id="id51" class="indexterm"/>user moves the mouse pointer away from an object</li><li class="listitem" style="list-style-type: disc"><code class="literal">mouseover</code>: The <a id="id52" class="indexterm"/>user moves the mouse pointer over an object</li><li class="listitem" style="list-style-type: disc"><code class="literal">pressmove</code>: The user <a id="id53" class="indexterm"/>clicks the mouse and then moves it</li><li class="listitem" style="list-style-type: disc"><code class="literal">pressup</code>: The <a id="id54" class="indexterm"/>user releases the mouse either over or outside the object</li><li class="listitem" style="list-style-type: disc"><code class="literal">rollout</code>: The <a id="id55" class="indexterm"/>user rolls away from a child element</li><li class="listitem" style="list-style-type: disc"><code class="literal">rollover</code>: The user <a id="id56" class="indexterm"/>rolls over a child element</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>For more details, refer to <a class="ulink" href="http://www.createjs.com/Docs/EaselJS/classes/DisplayObject.html#events">http://www.createjs.com/Docs/EaselJS/classes/DisplayObject.html#events</a>.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Summary</h1></div></div></div><p>In this chapter, we have learned how to work with the basic functions and events of CreateJS and EaselJS. We have learned how to create a stage object in EaselJS, what <code class="literal">DisplayObject</code> is, and how to append them to the <code class="literal">stage</code> object.</p><p>We also created the first simple shape in EaselJS, a circle. In the last part of the chapter, we discussed how to add an event listener to an object in EaselJS.</p><p>In the next chapter, we are going to go through complex examples to create a drag-and-drop interaction and use mouse events in EaselJS.</p></div></body></html>