<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Ext JS-provided Plugins and Extensions</h1></div></div></div><p>This chapter <a id="id37" class="indexterm"/>introduces some of the very useful and popular plugins <a id="id38" class="indexterm"/>and extensions available in the Ext JS library.</p><p>In this chapter we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">MultiSelect</li><li class="listitem" style="list-style-type: disc">ItemSelector</li><li class="listitem" style="list-style-type: disc">TreeViewDragDrop</li><li class="listitem" style="list-style-type: disc">CheckColumn</li><li class="listitem" style="list-style-type: disc">CellEditing</li><li class="listitem" style="list-style-type: disc">RowEditing</li><li class="listitem" style="list-style-type: disc">LiveSearchGridPanel</li></ul></div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec15"/>The MultiSelect extension</h1></div></div></div><p>
<code class="literal">Ext.ux.form.MultiSelect</code> is a form field type which allows the selection of one or more items<a id="id39" class="indexterm"/> from a list. A list is populated using a <a id="id40" class="indexterm"/>data store. Items can be reordered via the drag-and-drop method, if the <code class="literal">ddReorder</code> property<a id="id41" class="indexterm"/> of this class is set to <code class="literal">true</code>.</p><p>Here, in the following code, a form panel class has been defined, in which the <code class="literal">MultiSelect</code> extension has been used as an item of this form:</p><div><pre class="programlisting">Ext.define('Examples.view.multiselect.MultiSelectFormPanel', {
  extend : 'Ext.form.Panel',
  alias : 'widget.multiselectformpanel',
  requires : ['Ext.ux.form.MultiSelect'],

  constructor : function(config) {

    Ext.apply(this, {
      bodyPadding : 10,
      items : [{
        anchor : '100%',
        xtype : 'multiselect',
        fieldLabel : 'Multi Select',
        name : 'multiselect',
        store : Ext.create('Examples.store.DummyStore'),
        valueField : 'name',
        displayField : 'name',
        ddReorder : true,
        listeners : {
          change : {
            fn : this.getMultiSelectValue
          },
          scope : this
        }
      }]
    });
    this.callParent(arguments);

  },

  getMultiSelectValue : function() {
    var title = "Multiselect values",
    value = this.getForm().findField('multiselect').getValue();
    Ext.Msg.alert(title, value);
  }
});</pre></div><p>You can see<a id="id42" class="indexterm"/> in the preceding code that the <code class="literal">ddReorder</code> option is set to <code class="literal">true</code> in order to reorder the items by the drag-and-drop method. And also, by using the <a id="id43" class="indexterm"/>
<code class="literal">getMultiSelectValue</code> function as the <code class="literal">change</code> event handler of the <code class="literal">multiselect</code> field, a message, with<a id="id44" class="indexterm"/> the selected value of the <code class="literal">multiselect</code> field, can be displayed.</p><p>In the following screenshot, you<a id="id45" class="indexterm"/> can see the result of the <code class="literal">MultiSelectFormPanel</code> class that we have defined, which is used within a window:</p><div><img src="img/3725OS_2_5.jpg" alt="The MultiSelect extension"/></div><p>You can see that we can select multiple values, and as soon as we select the items in the list, the selected values of the multiselect field is shown as the message, the selected<a id="id46" class="indexterm"/> value of the <code class="literal">multiselect</code> field is shown <a id="id47" class="indexterm"/>as the message. </p><p>The available <a id="id48" class="indexterm"/>configuration options, properties, methods, and events for this extension is documented at <a class="ulink" href="http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.form.MultiSelect">http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.form.MultiSelect</a>.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec16"/>The ItemSelector extension</h1></div></div></div><p>
<code class="literal">ItemSelector</code> is a specialized <code class="literal">MultiSelect</code> field that renders as a pair with the <code class="literal">MultiSelect</code> field; one <a id="id49" class="indexterm"/>with the available options and the other with the selected options. A set of buttons in between, allows the items to be <a id="id50" class="indexterm"/>moved between the fields and reordered within the selection. Also, they can be moved via drag-and–drop method.</p><p>Here, in the following code, a form panel class is defined, in which we are using the <code class="literal">ItemSelector</code> extension as an item of this form:</p><div><pre class="programlisting">Ext.define('Examples.view.itemselector.ItemSelectorFormPanel', {
  extend : 'Ext.form.Panel',
  alias : 'widget.itemselectorformpanel',
  requires : ['Ext.ux.form.ItemSelector'],

  constructor : function(config) {

    Ext.apply(this, {
      bodyPadding : 10,
      items : [{
        anchor : '100%',
        xtype: 'itemselector',
        name: 'itemselector',
        store : Ext.create('Examples.store.DummyStore'),
        valueField : 'name',
        displayField : 'name',
        fromTitle: 'Available',
        toTitle: 'Selected'

      }]
    });
  this.callParent(arguments);

  }
});</pre></div><p>You can see in the <a id="id51" class="indexterm"/>following screenshot that the <code class="literal">ItemSelector</code> extension <a id="id52" class="indexterm"/>is a pair of <code class="literal">MultiSelect</code> field where one is loaded with data store:</p><div><img src="img/3725OS_2_6.jpg" alt="The ItemSelector extension"/></div><p>We can select the values from this available field and can move those values to the <strong>Selected</strong> field. We can use the arrow buttons or drag-and-drop, to move the values within those fields or reorder between those. If we use the <a id="id53" class="indexterm"/>
<code class="literal">getValue</code> function of this <code class="literal">ItemSelector</code> extension, it will return the collection of values available at the <strong>Selected</strong> field.</p><p>The documentation<a id="id54" class="indexterm"/> for this extension is available at <a class="ulink" href="http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.form.ItemSelector">http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.form.ItemSelector</a>, where you will get all the available configuration options, properties, methods, and events for <a id="id55" class="indexterm"/>this <a id="id56" class="indexterm"/>extension.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec17"/>The TreeViewDragDrop plugin</h1></div></div></div><p>This plugin provides<a id="id57" class="indexterm"/> a drag and/or drop functionality for a <code class="literal">TreeView</code> class<a id="id58" class="indexterm"/>. It creates a specialized instance of <code class="literal">DragZone</code>, which <a id="id59" class="indexterm"/>knows how to drag out of a <code class="literal">TreeView</code> class<a id="id60" class="indexterm"/>, and loads the data object which is passed on to the cooperating <a id="id61" class="indexterm"/>methods of <code class="literal">DragZone</code> with the following properties:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>copy</strong>: <code class="literal">Boolean</code><p>It is the value<a id="id62" class="indexterm"/> of the <code class="literal">copy</code> property of <code class="literal">TreeView</code> or <code class="literal">true</code> if the <code class="literal">TreeView</code> class was configured with <code class="literal">allowCopy</code> set to <code class="literal">true</code> and the <em>Ctrl</em> key was pressed when the drag operation was begun.</p></li><li class="listitem" style="list-style-type: disc"><strong>view</strong>: <code class="literal">TreeView</code><p>It is the<a id="id63" class="indexterm"/> source <code class="literal">TreeView</code> from which the drag originated.</p></li><li class="listitem" style="list-style-type: disc"><strong>ddel</strong>: <code class="literal">HtmlElement</code><p>It is the drag<a id="id64" class="indexterm"/> proxy element which moves with the mouse.</p></li><li class="listitem" style="list-style-type: disc"><strong>item</strong>: <code class="literal">HtmlElement</code><p>It is<a id="id65" class="indexterm"/> the <code class="literal">TreeView</code> node upon which the <code class="literal">mousedown</code> event was registered.</p></li><li class="listitem" style="list-style-type: disc"><strong>records</strong>: <code class="literal">Array</code><p>It is an <a id="id66" class="indexterm"/>array of models representing the selected data being dragged from the source <code class="literal">TreeView</code>.</p></li></ul></div><p>It also creates a specialized instance of <code class="literal">Ext.dd.DropZone</code>, which cooperates with other <code class="literal">DropZone</code> classes. These <code class="literal">DropZone</code> classes are members of the same <code class="literal">ddGroup</code>, which processes such data objects. Adding this plugin to a view means that two new events may be fired from the client <code class="literal">TreeView</code>, before the drag-and-drop.</p><div><div><h3 class="title"><a id="note02"/>Note</h3><p>Note that the plugin must be added to the tree view, and not to the tree panel. For example, by <a id="id67" class="indexterm"/>using <code class="literal">viewConfig</code>:</p><div><pre class="programlisting">viewConfig: {
    plugins: { ptype: 'treeviewdragdrop' }
}</pre></div></div></div><p>Here, in the following code snippet, a tree class has been defined, in which the <code class="literal">TreeViewDragDrop</code> plugin is<a id="id68" class="indexterm"/> used to drag-and-drop the<a id="id69" class="indexterm"/> nodes:</p><div><pre class="programlisting">Ext.define('Examples.view.treeviewdragdrop.TreeViewDragDropTree', {
    extend : 'Ext.tree.Panel',
    alias : 'widget.treeviewdragdroptree',
    requires : ['Examples.store.SampleTreeStore',
                'Ext.tree.plugin.TreeViewDragDrop'],

    constructor : function(config) {

        Ext.apply(this, {
            border : false,
            store : Ext.create('Examples.store.SampleTreeStore'),
            viewConfig : {
                plugins : [
                    'treeviewdragdrop'
                ]
            },            
            useArrows : true
        });

        this.callParent(arguments);

    }
});</pre></div><p>In the following screenshot you can see the result of the <code class="literal">TreeViewDragDropTree</code> class that we have defined, which is used within a window:</p><div><img src="img/3725OS_2_3.jpg" alt="The TreeViewDragDrop plugin"/></div><p>You can see that when we are dragging the <strong>09/29/2006</strong> node, a visible floating message stating that one <a id="id70" class="indexterm"/>node is selected, is shown, and then <a id="id71" class="indexterm"/>we can easily drop that node within other nodes.</p><p>This plugin is<a id="id72" class="indexterm"/> well documented at <a class="ulink" href="http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.tree.plugin.TreeViewDragDrop">http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.tree.plugin.TreeViewDragDrop</a>, where you will get all the available configuration options, properties, methods, and events for this plugin.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec18"/>The CheckColumn extension</h1></div></div></div><p>
<code class="literal">Ext.ux.CheckColumn</code> is an extension of <code class="literal">Ext.grid.column.Column</code> that renders a checkbox in each column cell. This checkbox toggles the truthiness of the associated data field on a click. In<a id="id73" class="indexterm"/> addition to toggling a Boolean value <a id="id74" class="indexterm"/>within the record data, this class adds or removes a CSS class <code class="literal">x-grid-checked</code>, on the <code class="literal">&lt;td&gt;</code> element based on whether or not it is checked to alter the background image used for a column.</p><p>Here in the following code we are defining a grid class in which we are using the <code class="literal">CheckColumn</code> extension to provide a checkbox within each cell of a column:</p><div><pre class="programlisting">Ext.define('Examples.view.checkcolumn.CheckColumnGrid', {
  extend : 'Ext.grid.Panel',
  alias : 'widget.checkcolumngrid',
  requires : ['Examples.store.DummyStore',
              'Ext.ux.CheckColumn'],

  constructor : function(config) {

    Ext.apply(this, {
      border : false,
      store : Ext.create('Examples.store.DummyStore'),
      columns : [{
        header : 'Name',
        dataIndex : 'name',
        flex : 1
      },{
        header : 'Birth date',
        dataIndex : 'birthdate',
        renderer : Ext.util.Format.dateRenderer('m/d/Y')
      },{
        xtype : 'checkcolumn',
        header : 'Attending?',
        dataIndex : 'attending'
      }]

    });

    this.callParent(arguments); 

  }
});</pre></div><p>Here, in the following <a id="id75" class="indexterm"/>screenshot, you can see the result <a id="id76" class="indexterm"/>of the <code class="literal">CheckColumnGrid</code> class that we have defined which is used within a window:</p><div><img src="img/3725OS_2_4.jpg" alt="The CheckColumn extension"/></div><p>You can see the <strong>Attending?</strong> column, where the <code class="literal">CheckColumn</code> extension has generated the checkboxes that <a id="id77" class="indexterm"/>use the store values to determine<a id="id78" class="indexterm"/> whether the checkbox should be checked or not.</p><p>The available<a id="id79" class="indexterm"/> configuration options, properties, methods, and events for this extension is documented at <a class="ulink" href="http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.CheckColumn">http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.CheckColumn</a>.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec19"/>The CellEditing plugin</h1></div></div></div><p>The <code class="literal">Ext.grid.plugin.CellEditing</code> plugin injects editing at the cell level for a Grid. The <code class="literal">editor</code> field<a id="id80" class="indexterm"/> can be a field instance or a field configuration <a id="id81" class="indexterm"/>which needs to be provided within the <code class="literal">editor</code> configuration option within the <code class="literal">columns</code> definition. With the <code class="literal">CellEditing</code> plugin we can edit a cell at any time. If an editor is not specified for a particular column, that cell cannot be edited and it will be skipped when activated via the mouse or the keyboard.</p><p>When we configure a column to use an editor for cell editing, we should choose an appropriate field type to match the data type that this editor field will be editing. For example, to edit a date value in the cell, it would be useful to specify <code class="literal">Ext.form.field.Date</code> as the editor.</p><p>Here, in the following code we are defining a grid class in which we are using the <code class="literal">CellEditing</code> plugin to edit the cells:</p><div><pre class="programlisting">Ext.define('Examples.view.cellediting.CellEditingGrid', {
  extend : 'Ext.grid.Panel',
  alias : 'widget.celleditingGrid',
  requires : ['Examples.store.DummyStore',
              'Ext.grid.plugin.CellEditing', 
              'Ext.form.field.Date'],

  constructor : function(config) {

    Ext.apply(this, {
      store : Ext.create('Examples.store.DummyStore'),
      columns : [{
        header : 'Name',
        dataIndex : 'name',
        flex : 1,
        editor : 'textfield'
      },
      {
        header : 'Birth date',
        dataIndex : 'birthdate',
        renderer : Ext.util.Format.dateRenderer('m/d/Y'),
        flex : 1,
        editor : {
          xtype : 'datefield',
          allowBlank : false
        }
      }],
      selType : 'cellmodel',
      plugins : [Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit : 1
      })]
    });

    this.callParent(arguments); 

  }
});</pre></div><p>You can see in <a id="id82" class="indexterm"/>the code that in the <code class="literal">columns</code> definition, the <code class="literal">editor</code> configuration has been provided with the <code class="literal">textfield</code> option to edit the <strong>Name</strong> cells<a id="id83" class="indexterm"/> and the <code class="literal">datefield</code> option to edit the <strong>Birth date</strong> cells. To support cell editing, it's specified that the grid should use the <code class="literal">cellmodel</code> option for <code class="literal">selType</code>, and create an instance of the <code class="literal">CellEditing</code> plugin. The plugin has been configured to activate each editor after a single click, by setting the <code class="literal">clicksToEdit</code> configuration option to <code class="literal">1</code>. The value can be set to 2 too, for the <code class="literal">clicksToEdit</code> option to activate the editor by double-click. There is another configuration option called <code class="literal">triggerEvent</code>, which also triggers the editing, and supercedes the <code class="literal">clicksToEdit</code> configuration option. The value for <code class="literal">triggerEvent</code> option can be set to <code class="literal">cellclick</code>, <code class="literal">celldblclick</code>, <code class="literal">cellfocus</code>, and <code class="literal">rowfocus.</code>
</p><p>Here, in the following screenshot you can<a id="id84" class="indexterm"/> see the result of the <code class="literal">CellEditingGrid</code> class that we have defined which is used within a window:</p><div><img src="img/3725OS_2_1.jpg" alt="The CellEditing plugin"/></div><p>You can see that a<a id="id85" class="indexterm"/> date field allows you to choose a date <a id="id86" class="indexterm"/>from a date picker as soon as the cell is clicked.</p><p>This plugin is well documented at <a class="ulink" href="http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.grid.plugin.CellEditing">http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.grid.plugin.CellEditing</a>, where you <a id="id87" class="indexterm"/>will get all the available configuration options, properties, methods, and events for this plugin.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec20"/>The RowEditing plugin</h1></div></div></div><p>The <code class="literal">Ext.grid.plugin.RowEditing</code> plugin<a id="id88" class="indexterm"/> injects editing at the row level for a Grid. When editing<a id="id89" class="indexterm"/> begins, a small floating dialog will be shown for the appropriate row. Each editable column will show a field for editing. There is a button to save or cancel all changes for the edit. The <code class="literal">editor</code> field can be a field instance or a field configuration and we need to provide this within the <code class="literal">editor</code> configuration option within the column definition. If an editor is not specified for a particular column, the cell of that column will not be editable and the value of the cell will be displayed.</p><p>When we configure a column to use an editor for row editing, we should choose an appropriate field type to match the data type that this editor field will be editing. For example, to edit a date value in the cell, it would be useful to specify <code class="literal">Ext.form.field.Date</code> as the editor.</p><p>Here, in the following <a id="id90" class="indexterm"/>code we are defining a grid class in which <a id="id91" class="indexterm"/>we are using the <code class="literal">RowEditing</code> plugin to edit the row:</p><div><pre class="programlisting">Ext.define('Examples.view.rowediting.RowEditingGrid',{
  extend : 'Ext.grid.Panel',
  alias : 'widget.roweditingGrid',
  requires : ['Examples.store.DummyStore',
              'Ext.grid.plugin.RowEditing', 
              'Ext.form.field.Date'],

  constructor : function(config) {

    Ext.apply(this, {
      store : Ext.create('Examples.store.DummyStore'),
      columns : [{
        header : 'Name',
        dataIndex : 'name',
        flex : 1,
        editor : 'textfield'
      },{
        header : 'Birth date',
        dataIndex : 'birthdate',
        renderer : Ext.util.Format.dateRenderer('m/d/Y'),
        flex : 1,
        editor : {
          xtype : 'datefield',
          allowBlank : false
        }
      }],
      selType : 'rowmodel',
      plugins : [Ext.create('Ext.grid.plugin.RowEditing',{
        clicksToEdit : 1
      })]
    });

    this.callParent(arguments);

  }
});</pre></div><p>You can see in the code that in the <code class="literal">columns</code> definition, the <code class="literal">editor</code> configuration has been provided with the <code class="literal">textfield</code> option to edit the <strong>Name</strong> cells and the <code class="literal">datefield</code> option to edit the <strong>Birth date</strong> cells. To support row editing, it's specified that the grid should use <code class="literal">rowmodel</code> as the value for the <code class="literal">selType</code> configuration. An instance of the <code class="literal">RowEditing</code> plugin has <a id="id92" class="indexterm"/>been created, which has been configured <a id="id93" class="indexterm"/>to activate each editor after a single click.</p><p>In the following screenshot you can see the result of the <code class="literal">RowEditing</code> grid class that we have defined which is used within a window:</p><div><img src="img/3725OS_2_2.jpg" alt="The RowEditing plugin"/></div><p>You can see that a floating dialog is showing just on top of the editing row with the provided editors including the <strong>Update</strong> and <strong>Cancel</strong> buttons.</p><p>The available <a id="id94" class="indexterm"/>configuration options, properties, methods, and events for this plug-in is documented at <a class="ulink" href="http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.grid.plugin.RowEditing">http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.grid.plugin.RowEditing</a>.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec21"/>The LiveSearchGridPanel extension</h1></div></div></div><p>
<code class="literal">Ext.ux.LiveSearchGridPanel</code> is a <code class="literal">GridPanel</code> class that supports live search.</p><p>Here, in the <a id="id95" class="indexterm"/>following code, a grid panel class is <a id="id96" class="indexterm"/>defined by extending the <code class="literal">LiveSearchGridPanel</code> extension:</p><div><pre class="programlisting">Ext.define('Examples.view.livesearch.LiveSearchGrid', {
  extend : 'Ext.ux.LiveSearchGridPanel',
  alias : 'widget.livesearchgrid',
  requires : ['Examples.store.DummyStore'],

  constructor : function(config) {

    Ext.apply(this, { 
      border : false,
      store : Ext.create('Examples.store.DummyStore'),
      columns : [{
        header : 'Name',
        dataIndex : 'name',
        flex : 1
      },{
        header : 'Birth date',
        dataIndex : 'birthdate',
        renderer : Ext.util.Format.dateRenderer('m/d/Y'),
        flex : 1
      }]
    });

    this.callParent(arguments);

  }
});</pre></div><p>In the following screenshot <a id="id97" class="indexterm"/>you can see the result of the <code class="literal">LiveSearchGrid</code> class that we have defined, which is used within a window:</p><div><img src="img/3725OS_2_7.jpg" alt="The LiveSearchGridPanel extension"/></div><p>You can see that a grid panel with a <strong>Search</strong> input box, previous and next buttons, <strong>Regular expression</strong>, and <strong>Case sensitive</strong> options, and a status bar for proper messaging is generated. This extension, <code class="literal">GridPanel</code>, highlights the matched text and selects the first row of the <a id="id98" class="indexterm"/>matched text rows. Then we can also<a id="id99" class="indexterm"/> use the previous and next buttons to move the selection between those rows.</p><p>The <a id="id100" class="indexterm"/>documentation for this extension is available at <a class="ulink" href="http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.LiveSearchGridPanel">http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.ux.LiveSearchGridPanel</a>, where all the available configuration options, properties, methods, and events for this extension is documented.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec22"/>Summary</h1></div></div></div><p>Ext JS is really a rich library that provides several ready-to-use, useful extensions and plugins. In this chapter we went through some of those popular extensions and plugins, and learned how to use them.</p><p>In the next chapter we will go through hands-on development of an extension called Labeled Spinner by extending the <code class="literal">Ext.form.field.Spinner</code> class.</p></div></body></html>