<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Tips and Tricks</h1></div></div></div><p>In this chapter we will learn how to use some features of Sencha Architect. In other words, we will learn short recipes of how to do a few tasks that can help us a lot when developing a Sencha Architect project, such as:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Using third-party plugins (non-native plugins)</li><li class="listitem" style="list-style-type: disc">Adding HTML code to index HTML pages</li><li class="listitem" style="list-style-type: disc">Importing an existing project</li><li class="listitem" style="list-style-type: disc">Creating custom components for reuse (team project)</li><li class="listitem" style="list-style-type: disc">Multilanguage apps</li><li class="listitem" style="list-style-type: disc">Sencha Architect + Eclipse</li></ul></div><p>Before we start, we will save the examples we are going to create for this chapter inside the <code class="literal">sencha-architect/chapter04</code> folder.</p><div><div><div><div><h1 class="title"><a id="ch04lvl1sec32"/>Exporting and importing an existing project</h1></div></div></div><p>Let's say you are working on this very cool project and want to share it with someone. You do not need to zip the entire<a id="id150" class="indexterm"/> project folder and send it. Sencha Architect has a better way of doing it.</p><p>For example, let's say <a id="id151" class="indexterm"/>we want to send the project we developed in the first chapter (<code class="literal">extBooks</code>) to a friend by email. So with the project opened with Sencha Architect, we will choose <strong>File</strong> | <strong>Archive Project</strong> (<em>Step 1</em>). Sencha Architect will ask where you want to save the project; let's choose the <code class="literal">chapter04</code> folder we created and we will save the file as <code class="literal">ExtBooksChp02</code> (<em>Step 2</em>). Sencha Architect will save the file with the extension <code class="literal">.xda</code> (<em>Step 3</em>). </p><p>This file contains all the files from the <code class="literal">extBooks</code> project, including the <code class="literal">php</code> files:</p><div><img src="img/9819OS_04_01.jpg" alt="Exporting and importing an existing project"/></div><p>Now, let's consider we emailed the file to a friend and this friend wants to open the project using Sencha <a id="id152" class="indexterm"/>Architect as well. So our friend needs to open Sencha Architect, go to <strong>File</strong> | <strong>Import Archive</strong> (<em>Step 4</em>) and choose the <code class="literal">.xda</code> file we sent (<em>Step 5</em>). The <a id="id153" class="indexterm"/>project will be opened, and if this friend wants to save this project to run it locally, he/she just needs to click on <strong>Save</strong>, and give it a name—for example: <strong>chap02</strong> (<em>Step 6</em>):</p><div><img src="img/9819OS_04_02.jpg" alt="Exporting and importing an existing project"/></div><p>And if we go to the project directory we will see the complete project as shown in the following screenshot:</p><div><img src="img/9819OS_04_03.jpg" alt="Exporting and importing an existing project"/></div><p>The <code class="literal">.xda</code> file is very<a id="id154" class="indexterm"/> compact. This is a great way of sharing Sencha Project files. For source code control, <a id="id155" class="indexterm"/>it is recommended to put all the project files under your source code control system (<code class="literal">.git</code>, <code class="literal">.svn</code>, and so on).</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec33"/>Using Sencha Architect with Eclipse</h1></div></div></div><p>Sencha Architect is a great IDE, and even if it is specific for Sencha frameworks, it does not mean that you cannot use it <a id="id156" class="indexterm"/>with your favorite IDE, such as Eclipse, Netbeans, Visual Studio, Aptana, and others. In this topic we will demonstrate<a id="id157" class="indexterm"/> how to use Sencha Architect with Eclipse, and you can use the same logic for any other IDE.</p><p>Let's say we are working on a Java project, and the frontend will be developed with Ext JS, and therefore, we will use Sencha Architect do to all the Ext JS code for us. If we take a look at the structure of a Java Web project created with Eclipse, we will have a structure as shown in the following screenshot:</p><div><img src="img/9819OS_04_04.jpg" alt="Using Sencha Architect with Eclipse"/></div><p>Inside <strong>WebContent</strong>, we will add our JSS, CSS, and HTML (or JSP) files, so the Ext JS code must be inside the <code class="literal">WebContent</code> folder. How can we save a Sencha Architect project so that we can have exactly <a id="id158" class="indexterm"/>what we need? When we save the Sencha Architect project, we need to select the Eclipse project as the root folder (<code class="literal">Save Path:</code>) <a id="id159" class="indexterm"/>and the <code class="literal">Project Name:</code> will be <code class="literal">WebContent</code> as shown in the following screenshot:</p><div><img src="img/9819OS_04_05.jpg" alt="Using Sencha Architect with Eclipse"/></div><p>This way all the Ext JS code will be located inside the <code class="literal">WebContent</code>, and we can use Eclipse as the code editor for the Java code and Sencha Architect for the Ext JS code. The project will look as shown in the following screenshot, which is exactly what is expected from a Java web project:</p><div><img src="img/9819OS_04_06.jpg" alt="Using Sencha Architect with Eclipse"/></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec34"/>Creating a custom component for reuse</h1></div></div></div><p>You created a really cool component using Sencha Architect, and now you want to share it with the world so other developers can also use this component in their projects. Is that possible? The answer is yes!</p><p>You can also use this<a id="id160" class="indexterm"/> to share components with your development team or even to reuse the same components in other Senha Architect projects. As Ext JS and Sencha Touch share part of the API, especially the data package, you can also use this feature to import models and stores from an Ext JS project to a Sencha Touch project and vice versa!</p><p>To do so, you need to select <strong>Models</strong>, <strong>Stores</strong>, <strong>Views</strong>, or <strong>Controllers</strong>, right-click on it, and click on the <strong>Export to File…</strong> option. In the following screenshot, we are exporting the <strong>Book</strong> <strong>Model</strong> from the <code class="literal">extBooks</code> project (<code class="literal">chap02</code>)—<em>Step 1</em>. Next, we need to save it—we will name it <code class="literal">BookModel</code> (<em>Step 2</em>). Once it is saved, Sencha Architect will save it with the <code class="literal">.xdc</code> extension (<em>Step 3</em>):</p><div><img src="img/9819OS_04_07.jpg" alt="Creating a custom component for reuse"/></div><p>To import it, we need to go to <strong>Edit</strong> | <strong>Import Component…</strong> and choose the <code class="literal">BookModel.xdc</code> file (<em>Step 4</em>). Sencha Architect will save the component into the toolbox, so we can give it a <code class="literal">Name</code> and select a <code class="literal">Category</code> for it (<em>Step 5</em>). Then we can go to the toolbox and use it as <a id="id161" class="indexterm"/>any other component from the toolbox (<em>Step 6</em>):</p><div><img src="img/9819OS_04_08.jpg" alt="Creating a custom component for reuse"/></div><p>In case you want to reuse a <strong>View</strong> in a future project, you can also use the <strong>Save to Toolbox…</strong> option (<em>Step 7</em>). It will also ask you which <strong>name</strong> and which <strong>category</strong> you want to save the view to (<em>Step 8</em>). Then, the <strong>BooksGrid</strong> will also be available in the toolbox (<em>Step 9</em>):</p><div><img src="img/9819OS_04_09.jpg" alt="Creating a custom component for reuse"/></div><p>And as we already learned in <a class="link" href="ch02.html" title="Chapter 2. Creating an Ext JS App">Chapter 2</a>, <em>Creating an Ext JS App</em> and <a class="link" href="ch03.html" title="Chapter 3. Creating a Sencha Touch App">Chapter 3</a>, <em>Creating a Sencha Touch App</em>, to use a component from the toolbox, we can select the <strong>View</strong>, <strong>Model</strong>, <strong>Store</strong>, or <strong>Controller</strong> from the project inspector, and when we double-click on the toolbox component, it will be created as a child of the selected item of the project inspector or will be created as a <strong>Model</strong>, <strong>Store</strong>, <strong>View</strong>, or <strong>Controller</strong> if we select the package.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec35"/>Adding HTML code to app.html</h1></div></div></div><p>So far, we already<a id="id162" class="indexterm"/> learned that we cannot edit code in Sencha Architect unless it is for a function or template. If we take a look at Sencha Ext JS examples (<a class="ulink" href="http://www.sencha.com/products/extjs/examples/">http://www.sencha.com/products/extjs/examples/</a>), we will see that many examples have HTML tags (DIV, P) inside the <code class="literal">index.html</code> of the example. What if we want to create applications like those? Is it possible? Again, the answer is yes.</p><p>You will not be able to manually edit the <code class="literal">app.html</code> file to add the HTML code that you want. As we saw in <a class="link" href="ch02.html" title="Chapter 2. Creating an Ext JS App">Chapter 2</a>, <em>Creating an Ext JS App</em> and <a class="link" href="ch03.html" title="Chapter 3. Creating a Sencha Touch App">Chapter3</a>, <em>Creating a Sencha Touch App</em>, if you do change any file generated with Sencha Architect, when you open the same project on Sencha Architect, it will override all your changes with the original code.</p><p>But how can we add HTML code? The answer is by using DOM manipulation using Sencha code, also called as Ext Core, available on both Ext JS and Sencha Touch frameworks.</p><p>To do so, when we create a Sencha Architect application (Ext JS or Sencha Touch), select the <strong>Application</strong> icon<a id="id163" class="indexterm"/> from the project inspector (<em>Step 1</em>), go to the config panel, locate the <strong>launch</strong> function, and click on the <strong>+</strong> icon (<em>Step 2</em>). Then, a green diamond icon will appear and we can click on the arrow icon (<em>Step 3</em>) as shown in the following screenshot:</p><div><img src="img/9819OS_04_10.jpg" alt="Adding HTML code to app.html"/></div><p>The code editor will be opened and we can use Ext Core to manipulate the DOM. In this case, we are appending HTML tags to the HTML body:</p><div><img src="img/9819OS_04_11.jpg" alt="Adding HTML code to app.html"/></div><p>If we run the project,<a id="id164" class="indexterm"/> the output will be as shown in the following screenshot:</p><div><img src="img/9819OS_04_12.jpg" alt="Adding HTML code to app.html"/></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec36"/>Using third-party plugins (non-native plugins)</h1></div></div></div><p>Plugins are a huge help when we want to develop something that is not available within the Sencha API. The plugins<a id="id165" class="indexterm"/> that are supported natively already come as an option in Sencha Architect, but there are a lot of plugins that are shared by other developers that we can find on Sencha Forums.</p><p>We want to focus on <a id="id166" class="indexterm"/>a particular case here, because we have already seen how to add a new property, and for some components, we can easily add the plugins or features property, and then add the plugin configuration. But the components that have native plugins supported by the API do not allow us to do so, like for instance, the grid panel from Ext JS:</p><div><img src="img/9819OS_04_13.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>We can only use the plugins and features that are available within Sencha Architect. What if we want to use a third-party plugin or feature such as the Filter Plugin? It is possible, but we need to use an advanced feature from Sencha Architect, which is "creating overrides". A disclaimer about overrides: this has to be avoided. Whenever you can use a set method to change a property, use it. Overrides should be your last resource and they should be used very carefully, because if you do not use them carefully, you can change the behavior of a component and something may stop working. But we will demonstrate how to do it in a safe way!</p><p>We will use the <strong>BooksGrid</strong> as an example in this topic. Let's say we need to use the Filter Plugin on it, so we need to create an override first. To do it, select the <strong>BooksGrid</strong> from the project<a id="id167" class="indexterm"/> inspector, open the code editor, and click on the <strong>Create Override</strong> button<a id="id168" class="indexterm"/> (<em>Step 1</em>). Sencha Architect will display a warning (<em>Step 2</em>). We can click on <strong>Yes</strong> to continue:</p><div><img src="img/9819OS_04_14.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>The code editor will open (<em>Step 3</em>) the override class so we can enter our code. In this case, we will have complete freedom to do whatever we need to on this file. So let's add the <code class="literal">features()</code> function<a id="id169" class="indexterm"/> with the declaration of the plugin and also the <code class="literal">initComponent()</code> function<a id="id170" class="indexterm"/> as shown in the following screenshot (<em>Step 4</em>):</p><div><img src="img/9819OS_04_15.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>One thing that is very important is that we must call the <code class="literal">callParent()</code> function<a id="id171" class="indexterm"/> (<code class="literal">callOverriden()</code> is deprecated already in Ext JS 4.1 and later versions) to make sure we will continue to have all the original behavior of the component (in this case the <code class="literal">BooksGrid</code> class). The only thing we want to do is to add a new feature to it.</p><p>And we are done with the override! To go back to the original class we can use the navigator as shown in the following screenshot:</p><div><img src="img/9819OS_04_16.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>Notice that <code class="literal">requires</code> was added to the class <code class="literal">Packt.view.override.BooksGrid</code>, which is the class we just wrote. The next step is to add the plugin on the class requires. To do so, we<a id="id172" class="indexterm"/> need to select the <strong>BooksGrid</strong>, go to the config panel, and add the requires with the name of the plugin (<strong>Ext.ux.grid.FiltersFeature</strong>):</p><div><img src="img/9819OS_04_17.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>Some developers like to add the plugin file directly as a JavaScript file on <code class="literal">app.html</code>/<code class="literal">index.html</code>. Sencha provides the dynamic loading feature so let's take advantage of it and use it! First, we cannot forget to add the <code class="literal">ux</code> folder with the plugin on the project root folder as shown in the following screenshot:</p><div><img src="img/9819OS_04_18.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>Next, we need to set the application loader. Select the <strong>Application</strong> from the project inspector (<em>Step 5</em>), then go to the config panel, locate the <strong>Loader Config</strong> property<a id="id173" class="indexterm"/>, click on the <strong>+</strong> icon (<em>Step 6</em>), then click on the arrow icon (<em>Step 7</em>). The details of the loader will be available on the config panel. Locate the <strong>paths</strong> property and click on it (<em>Step 8</em>). The code editor will be <a id="id174" class="indexterm"/>opened with the loader path's default value, which is <strong>{"Ext": "."}</strong> (<em>Step 9</em>). Do not remove it; simply add the path of the <code class="literal">Ext.ux</code> namespace which is the <code class="literal">ux</code> folder (<em>Step 10</em>):</p><div><img src="img/9819OS_04_19.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>And we are almost done! We need to add the <code class="literal">filterable</code> option in each column we want to allow the user to filter its values (<em>Step 11</em>): we can use the config panel to add a new property (we need to select the desired column from the project inspector first—always remember to do this). And then, we can choose what type of property we want to add (<em>Step 12</em> and<em> Step 14</em>). For example, we can add <code class="literal">filterable: true</code> (<em>Step 13</em>) for the <code class="literal">id</code> column and <code class="literal">filterable:</code> <code class="literal">{type: 'string'}</code> (<em>Step 15</em> and <em>Step 16</em>) to the <code class="literal">Name</code> column as shown in the following screenshot:</p><div><img src="img/9819OS_04_20.jpg" alt="Using third-party plugins (non-native plugins)"/></div><p>And the plugin<a id="id175" class="indexterm"/> is ready to be used!</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec37"/>Creating multilanguage apps</h1></div></div></div><p>Another feature that is very useful is to have is a multilingual application, and many developers try to do it within Sencha Architect. The issue is that we usually have a JavaScript object with the<a id="id176" class="indexterm"/> translations we want to apply to a text on the application. For example, let's say we want to translate the <code class="literal">BooksGrid</code>; first we will need to create a JavaScript file with the desired translations (one for each column of the grid):</p><div><pre class="programlisting">translation = {
    books: 'Livros',
    id: 'Id',
    name: 'Nome',
    author: 'Autor(a)',
    language: 'Língua',
    paperback: 'Folhas',
    release: 'Lançamento',
    isbn: 'ISBN',
    isbn13: 'ISBN13'    
};</pre></div><p>The preceding code contains Portuguese translations. The way we want to use it, is applying the value of the translation in a specific column, and the column label we need to use is given in the following code:</p><div><pre class="programlisting">xtype: 'gridcolumn',
dataIndex: 'author',
<strong>text: translation.author</strong>
</pre></div><p>What happens is that the text property on Sencha Architect only allows you to enter a string and you cannot enter an object as the text property value; how do we solve this? We have two choices: whenever the user changes the language, we can call the <code class="literal">setText()</code> or <code class="literal">setTitle()</code> method,<a id="id177" class="indexterm"/> passing the new value for all the components we have on the application. But this is too <a id="id178" class="indexterm"/>much work. Or, we can use an override. In our case, as we already have an override from a previous topic, we just need to add the following code to it:</p><div><pre class="programlisting">columns: [
    {
        xtype: 'gridcolumn',
        width: 53,
        dataIndex: 'id',
        text: translation.id
    },
    {
        xtype: 'gridcolumn',
        dataIndex: 'name',
        text: translation.name,
        flex: 1
    }
    // other columns
]</pre></div><p>And then the multilingual app is ready to be used.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec38"/>Creating util and custom classes</h1></div></div></div><p>In most of the projects that you are going to work on, you will probably need to create <code class="literal">util</code> classes with functions you can reuse or properties that you will treat as constants. And you can also use them on<a id="id179" class="indexterm"/> Sencha Architect. So let's say we need to create a function that sums two given values and returns the result. This function can be used in several places of your project, and is independent from any business logic. So we need to create a class. Sencha Architect provides the capability to create stores, models, controllers, and views, but we want to create another type of class. We can create an Ext class using the <strong>+</strong> icon on the <a id="id180" class="indexterm"/>top of the project inspector (<em>Step 1</em>).Then, click on <strong>Class</strong>, and select a package where you want to create this class. </p><p>Let's create inside the <strong>Controllers</strong> package. Sencha Architect will list the new class under the desired package with the ext icon (<em>Step 2</em>). Next, you can give a name to your class, an alias, and choose other options, such as <strong>singleton</strong>: true (<em>Step 3</em>):</p><div><img src="img/9819OS_04_21.jpg" alt="Creating util and custom classes"/></div><p>In classes like this, you can add properties and functions, but you will be limited to the fact that all the changes <a id="id181" class="indexterm"/>must be made using the config panel. It is not a file that you have total control over as an override.</p><p>For example, let's create the sum function we talked about. We need to go to <strong>Functions</strong> and click on the <strong>+</strong> icon (<em>Step 4</em>—on the config panel), choose a name for our function and click on <strong>Next</strong> (<em>Step 5</em>), then enter the parameters (<em>Step 6</em>), and then an arrow icon will appear (<em>Step 7</em>) and if we click on it, the code editor will be opened so we can enter our code (<em>Step 8</em>). If we need to <a id="id182" class="indexterm"/>change any configuration, such as the function name or add, edit, or remove parameters, we can do it using the config panel (<em>Step 9</em>). And as usual, we will have the code generated by Sencha Architect (<em>Step 10</em>):</p><div><img src="img/9819OS_04_22.jpg" alt="Creating util and custom classes"/></div><p>If we would like to use the <code class="literal">sum()</code> function<a id="id183" class="indexterm"/> we can simply call <code class="literal">Packt.controller.Utils.sum(1,2)</code> and the return will be <code class="literal">3</code>!</p><p>An alternative if you really want to have total control on the code is to create an <code class="literal">Ext</code> class, and then create an override. Then it will be as if you were using any code editor. But in this case, you will not be able to use the functionalities of Sencha Architect.</p><p>In case you<a id="id184" class="indexterm"/> try to change the extend class (the default is <code class="literal">Ext.Base</code>) to <code class="literal">Ext.grid.Panel</code> for example, Sencha Architect will recognize that this class is supported by the tool and will ask you if you want to transform (and if positive, it will be as if you chose the component from the toolbox). If not, you<a id="id185" class="indexterm"/> will have the freedom to create each property or function by yourself (and Sencha Architect will not list the available properties on the config panel, but you will be able to add your own features and plugins as an example):</p><div><img src="img/9819OS_04_23.jpg" alt="Creating util and custom classes"/></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec39"/>Working with sub-packages</h1></div></div></div><p>When working with the MVC architecture and Sencha projects, we are already working with four packages that help us to organize our application better: <code class="literal">model</code>, <code class="literal">view</code>, <code class="literal">controller</code>, and <code class="literal">store</code>. But <a id="id186" class="indexterm"/>when our application starts to grow and we have many classes, it is normal to organize the classes even more inside each package into sub-packages.</p><p>Creating sub-packages within Sencha Architect is very simple. Let's consider we want to create a new view named <code class="literal">Profile</code>. If we name the class <code class="literal">Profile</code> (<code class="literal">userClassName</code>), this class will be created inside the <code class="literal">app/view</code> directory. But if we want it to be created inside <code class="literal">app/view/security</code> we need to name the ID <code class="literal">security.Profile</code> (<em>Step 1</em>):</p><div><img src="img/9819OS_04_24.jpg" alt="Working with sub-packages"/></div><p>In the project inspector, the classes will not be separated by sub-folders; we will see only a dot (<code class="literal">.</code>) separating the name of the class from its sub-package (<em>Step 2</em>). But in the project's folder, we can see that Sencha Architect created the sub-folders for us (<em>Step 3</em>). And in case we need to do a quick search, we can always use the quick open option on the top of the project<a id="id187" class="indexterm"/> inspector (<em>Step 4</em>).</p><p>We can create as many sub-packages as we need. We just need to separate the name of the sub-packages with a dot (<code class="literal">.</code>) as given in the following example: <code class="literal">package1.package2.package3.NameOfTheClass</code>.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec40"/>Summary</h1></div></div></div><p>In this chapter we learned some useful tricks that can help in our everyday tasks while working with Sencha projects using Sencha Architect. We learned advanced topics such as creating overrides to use third party plugins and features and implement multilingual apps. We learned that it is possible to use Sencha Architect with our favorite IDE, create custom components to share within our development team or even other developers, and also how to save a component in the toolbox to be reused in other projects. We have also learned how to manipulate the DOM within Sencha Architect to add HTML tags to the <code class="literal">app.html</code> page and create projects similar to the ones from Ext JS examples.</p><p>In the next chapter we will learn how to work with Resources. We will learn how to change the SDK path, create new CSS and JS files, work with Google Maps, and other examples.</p></div></body></html>