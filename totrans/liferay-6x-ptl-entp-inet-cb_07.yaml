- en: Chapter 7. Working with Content
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Managing and displaying web contents
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating a new structure
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating a new template
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As was described in the previous chapter, Liferay provides a whole set of tools
    that allows us to manage files that store data exchanged between the employees
    of the company. However, in many cases, it is not quite convenient for end users
    to operate on the information stored in files. For example, it is much easier
    to navigate through the content available directly on the web page than in a file
    while reading the news or browsing the corporate knowledge base. Information such
    as news, project descriptions, procedures, and so on can be provided using web
    content. The web content can be displayed on a page using some specific portlets,
    such as the Web Content Display portlet or the Asset Publisher portlet.
  prefs: []
  type: TYPE_NORMAL
- en: Managing and displaying web contents
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Each site in Liferay has its own separate set of web contents, which can be
    accessed by going to **Admin** | **Site Administration** | **Content** | **Web
    Content**. All the web contents stored in the **Web Content** section can be organized
    in a tree-like folder structure. The web content can contain text, graphics, tables,
    lists, and links to other web contents, documents, or pages. Additionally, every
    web content can be tagged and categorized or provided with the list of assets
    related to it. This list will be listed in the related assets section under the
    main content of the web content. It is also possible to define permissions that
    specify which actions can be performed on web contents by users assigned to different
    roles.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This recipe will cover all the basic actions that can be performed in order
    to manage web contents within a site.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a new folder
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To add a new folder, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator and go to **Admin | Site Administration | Content
    | Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the **Folder** option (if you add a folder inside one that is already
    created, the **Subfolder** option will be available instead).![Creating a new
    folder](img/image00343.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter the **Name (Required)** of the folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter the **Description** of the folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Determine **Permissions** for the folder by setting all actions that may be
    performed by specific roles (you can find more permissions after clicking on the
    **More Options** link).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Downloading the example code**'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You can download the example code files from your account at [http://www.packtpub.com](http://www.packtpub.com)
    for all the Packt Publishing books you have purchased. If you purchased this book
    elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Editing a folder
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To edit a folder, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Find the folder that you want to edit.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on its actions icon (the down-arrow icon visible when hovering on the
    folder miniature).![Editing a folder](img/image00344.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Edit** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide a new **Name (required)** for the folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter a new **Description** of the folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Determine new **Permissions** for the folder by setting all actions that may
    be performed by specific roles.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Leave the **Merge with Parent Folder** option unchecked.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Creating a new web content
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To create a new basic web content, perform these roles:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Basic web content** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the **Title (Required)** and **Content**.![Creating a new web content](img/image00345.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to the **Abstract** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide a **Summary**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the small image by providing a URL or by uploading it from your computer
    drive. Then, select the **Use Small Image** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to the **Categorization** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose **Type** from the type drop-down list, for example, **News**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose **Categories** from the available category dictionaries (represented
    by a name and a related **Select** button) by clicking on the button beside the
    dictionary and marking the categories.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: If there are no visible categories that can be assigned to the document, it
    means that either the categories for the specific site have not been created or
    the account user, who is working on it, does not have access to the existing category's
    dictionaries.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Provide **Tags** by adding new tags. You can choose them from the list of existing
    tags or use the suggestions function.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to the **Schedule** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the **Display date**, **Review date**, and **Expiration date** functions
    (or enable the **Never expire** and **Never review** functions).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to the **Display Page** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the page on which you want the web content to be displayed in full.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: The display page will be available if there is at least one page containing
    the Asset Publisher portlet with the **Set as the Default Asset Publisher for
    This Page** option enabled. Page names without an Asset Publisher portlet are
    shown in gray instead of black. For more information, refer to the *Asset Publisher
    as a search-based tool for content presentation* recipe from [Chapter 8](part0059.xhtml#aid-1O8H61
    "Chapter 8. Search and Content Presentation Tools"), *Search and Content Presentation
    Tools*.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Navigate to the **Related Assets** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose **Related Assets**, which should be listed under the full text of your
    web content.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Publish** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: It is possible to preview web content before publishing it using the basic preview
    option. This option becomes available after saving the first draft of the web
    content. However, the basic preview function does not allow us to preview web
    content in a theme context. Instead, it is presented in default view.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Displaying web content in the Web Content Display portlet
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In order to display web content in the Web Content Display portlet, perform
    these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Go to the page on which you want to display the web content.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the add icon (this is a **+** sign on the left-hand side).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Applications** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Find the **Web Content Display** portlet using the search feature or by browsing
    the list of available portlets.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add** link located next to it or drag and drop it on the page
    you want.![Displaying web content in the Web Content Display portlet](img/image00346.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the added portlet options icon (this will be a gear icon in the top-right
    corner of the portlet).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Configuration** option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From the list, choose the web content (by clicking on its name) that you want
    to display in a portlet.![Displaying web content in the Web Content Display portlet](img/image00347.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the list of additional functionalities that should be available in a
    portlet (for example, the **Enable Print** or **Enable Comments** option).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Editing web content
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In order to modify existing web content, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From the list of available web contents, choose the one you want to modify.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the name of the chosen web content or choose the **Edit** action from
    its **Actions** menu.![Editing web content](img/image00348.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When the form opens, edit the field you want to change.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Publish** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Adding translation to an existing web content
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To add a translation to an existing web content, perform these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From the list of available web contents, choose the one you want to define a
    translation for.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the name of the chosen web content or choose the **Edit** action from
    its actions menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add Translation** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the language you want to create a translation for (if you want, change
    the available languages by referring to *The language properties hook* recipe
    from [Chapter 11](part0080.xhtml#aid-2C9D01 "Chapter 11. Quick Tricks and Advanced
    Knowledge"), *Quick Tricks and Advanced Knowledge*).![Adding translation to an
    existing web content](img/image00349.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide a **Title**, **Content**, and **Summary** for this language.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: All the available translations are listed in the available translations section
    placed just after the **Add Translation** button in the edit content page. It
    is possible to manage (including removing) the translation using a form that can
    be accessed after clicking on the translation name in this section.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Click on the **Publish** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expiring web content
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'There are two ways of expiring web content. The first way, described previously,
    is to set the expiration date while adding or editing a web content. The second
    option is to use the expire action available in the **Web Content** actions menu.
    Go through the following steps to follow this option of expiring web content:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From the list of available web contents, choose the one you want to modify.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** menu of the chosen web content.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: Choose the **Expire** action. To make the expired web content available for
    users, it is required that you edit and publish it again.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Removing folders and web content
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Each folder and web content can be temporarily or permanently removed. Both
    temporary and permanent removal are done through the **Recycle Bin** mechanism.
  prefs: []
  type: TYPE_NORMAL
- en: 'To temporarily remove a folder or web content, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Go to the folder or web content that needs to be deleted.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on its actions icon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Move to the Recycle Bin** action.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: You can undo this action by clicking on the **Undo** button that will appear
    just after moving a web content to the trash.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'To permanently remove a folder or web content, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Recycle Bin**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Actions** button, which is located near the name of the web content
    or folder you want to delete:![Removing folders and web content](img/image00350.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Delete** action and confirm your choice by clicking on **OK**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: Note that when you remove a folder, its entire content is also removed. By default,
    the trash is enabled and keeps removed items for 30 days. The trash availability
    for the particular site and the maximum age of trash entries can be changed by
    going to **Admin** | **Site Administration** | **Configurations** | **Site Settings**
    | **Recycle Bin**.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: It is also possible to restore the web content or web content folder using the
    **Restore** action available in the **Actions** menu.
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The **Web Content** section allows us to create a tree-like folder structure
    to organize web contents stored within a site. It is possible to create or move
    a web content to a default folder (`Home`) or to one of the folders defined by
    users. It is also possible to merge one folder (and its content) with another.
    While creating or editing a web content, the user has a choice to save it as a
    draft or publish it. Draft versions of web content can be accessed by going to
    **Admin** | **Site Administration** | **Content** | **Web Content** for authorized
    users only. Published versions can be seen by end users. Each time a web content
    is published, its version increases. All versions are available in the web content
    history, which can be accessed from the web content editing form.
  prefs: []
  type: TYPE_NORMAL
- en: If there is a need to hide the previously published web content from end users
    but keep it within the system, the expire action should be used. As was shown
    previously, it is possible to schedule a time of publication and expiration of
    the web content.
  prefs: []
  type: TYPE_NORMAL
- en: 'Each web content has a unique ID, title, status, and version number. There
    are three available statuses:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Approved**: This is dedicated for published web contents, which can be placed
    in a portlet on a page and is available for end users'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Drafts**: They are reserved for web content where the newest version has
    not been published yet'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Expired**: This marks all the web contents that have been expired and are
    not available for end users'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Permissions
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Each folder and web content has its own permissions set, which defines the list
    of actions that can be performed on it by users assigned to different roles. For
    example, it is possible to set such permissions so that users with a specific
    role will be able to provide commentaries on one particular web content, but won't
    be permitted to do the same with some other web content.
  prefs: []
  type: TYPE_NORMAL
- en: Categorization
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The **Categorization** tab in the web content adding and editing forms allows
    us to define the type, categories, and tags of the web content. Categories and
    tags provide an additional mechanism to mark, list, and search web content and
    allow their subsequent selection with the help of dedicated portlets such as Category
    Navigation, Asset Publisher, or Tag Cloud. Categories can create a tree-like structure.
    Each category is placed in the dictionary and can have subcategories. Tags, on
    the contrary, are not stored in dictionaries and create a flat structure. It is
    possible to assign a web content to one or more categories and tags. Types are
    used to search the web content within the **Web Content** section.
  prefs: []
  type: TYPE_NORMAL
- en: Related assets
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: In Liferay, an asset is a piece of content that can be shown on a page, such
    as a document, web content, blog entry, and so on. Each web content can be connected
    to another web content, document, or different types of assets, such as commentaries,
    blog entries, and so on. These web contents will be listed by portlets such as
    Asset Publisher.
  prefs: []
  type: TYPE_NORMAL
- en: Placing web content on a page
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: As was shown previously, the web content section allows us to organize web contents
    in a structure of folders that help us manage web contents within the site. However,
    this structure doesn't have any influence on the information architecture of the
    site. In order to place a web content on a page, it is required that you use dedicated
    portlets, such as the Web Content Display or Asset Publisher portlet. The Web
    Content Display portlet allows us to show the full content of exactly one web
    content at a time. The Asset Publisher portlet (described in the following chapter)
    is much more complex and enables us to create a different list of contents. It
    also allows us to display the web content in full-content view.
  prefs: []
  type: TYPE_NORMAL
- en: Display page
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The Display page parameter allows us to decide on which page a particular web
    content will be shown in full-content view within the Asset Publisher portlet.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For more information on how to present web content on a page, refer to the *Tagging
    and categorizing content* and *Asset Publisher as a search-based tool for content
    presentation* recipes from [Chapter 8](part0059.xhtml#aid-1O8H61 "Chapter 8. Search
    and Content Presentation Tools"), *Search and Content Presentation Tools*
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'For more information about permissions, refer to the following recipes:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Creating and configuring roles* from [Chapter 5](part0045.xhtml#aid-1AT9A1
    "Chapter 5. Roles and Permissions"), *Roles and Permissions*'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Kaleo Web installation* and *The* *Single Approver workflow for the user creation
    process* from [Chapter 9](part0065.xhtml#aid-1TVKI1 "Chapter 9. Liferay Workflow
    Capability"), *Liferay Workflow Capability*'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: For more information on Web Content, refer to the *Creating a new structure*
    and the *Creating a new template* recipes from this chapter
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating a new structure
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Liferay gives users interesting features: structures and templates. Structures
    provide information about possible fields in our content, and templates are responsible
    for rendering these fields as an article in a frontend (for instance, in the Asset
    Publisher or Web Content Display portlet).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s assume that our goal is to define a new structure and template called
    *Internal publication*. This structure consists of the following fields:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Name | Type | Required | Repeatable |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Author | Text | Yes | No |'
  prefs: []
  type: TYPE_TB
- en: '| Department | Select | Yes | No |'
  prefs: []
  type: TYPE_TB
- en: '| Project | Text Box | No | No |'
  prefs: []
  type: TYPE_TB
- en: '| Client | Text | Yes | No |'
  prefs: []
  type: TYPE_TB
- en: '| Content | HTML | No | No |'
  prefs: []
  type: TYPE_TB
- en: '| Attachment | Documents and Media | No | Yes |'
  prefs: []
  type: TYPE_TB
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In order to define a new structure, it is required that you log in as a user
    with the **Add Structure** permission in the **Web Content** section. To achieve
    this goal, go through the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go to **Admin** | **Site Administration** | **Content** | **Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Manage** option and choose **Structures**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Type the name of the structure, which is `Internal publication`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It is possible to choose the default language and add some description. We will
    leave it as default.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go to the section where there is a drag-and-drop functionality to define fields.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Text** field and drag and drop this field into the gray section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click on the added element, go to the **Settings** tab, and set the following
    properties:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Field** label as **Author**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Required** as **Yes**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Indexable** as **Indexable – keywords**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Repeatable** as **No**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Click on the **Close** button to save information and go back to the **Fields**
    tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Repeat steps 8 and 9 to define all the necessary fields that were described
    in our assumptions. The result should look like this:![How to do it…](img/image00351.jpeg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To check out the newly created structure, go to **Web Content** | **Add** |
    **Internal publication**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The structure is an XML definition of the web content form. It gives users
    the following thirteen predefined types:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Boolean**: This adds a checkbox onto our structure with true/false values'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Date**: Adds an input text with a calendar (date picker)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Decimal**: Adds an input that accepts only numbers and decimal point'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Documents and Media**: Adds an existing uploaded document to attach to the
    structure'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**HTML**: Adds a WYSIWYG editor'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Image**: Adds a browse-image application'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Integer**: Adds an input that accepts only numbers'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Link to page**: Adds a select list to select links to another page'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Number**: Similar to Integer and allows only numbers'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Radio**: Adds a radio button'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Select**: Add a select list with options'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Text**: Adds an input text'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Text Box**: Adds a text area component'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In the background, each definition is stored as an XML node called `<dynamic-element>`.
    It is possible to look at how the definition is built by clicking on the **Source**
    tab from the edit mode of the structure. Here is an example of our `Author` definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'This definition describes all the fields that we set, such as `dataType: string`,
    `indexType: keyword`, `name: Author`, and so on.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Each row has many attributes, such as `predefinedValue`, `tip`, `required`,
    and so on. The following table shows the most important attributes:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Property name | Value | Description |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Type | Predefined field type | Type of the field definition |'
  prefs: []
  type: TYPE_TB
- en: '| Field label | String | Label of the field |'
  prefs: []
  type: TYPE_TB
- en: '| Show label | Yes/No | Determines label visibility |'
  prefs: []
  type: TYPE_TB
- en: '| Required | Yes/No | Sets field as required field |'
  prefs: []
  type: TYPE_TB
- en: '| Name | String | Name of the field, usually the same as label |'
  prefs: []
  type: TYPE_TB
- en: '| Predefined value | String | Sets the default value |'
  prefs: []
  type: TYPE_TB
- en: '| Tip | String | A tip (description) of the field |'
  prefs: []
  type: TYPE_TB
- en: '| Indexable | Not indexable / Indexable—Keyword / Indexable—Text | Defines
    an indexer type and indicates which type of search indexer will be used |'
  prefs: []
  type: TYPE_TB
- en: '| Repeatable | Yes/No | Allows us to set the field as repeatable |'
  prefs: []
  type: TYPE_TB
- en: '| Width | Small/Medium/Large | Allows us to define the width of the field |'
  prefs: []
  type: TYPE_TB
- en: There is more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The journal structure provides interesting functionalities to set default values
    for articles that will be created from this structure. One of the possibilities
    is to set a predefined value on the edit structure screen. However, Liferay also
    gives us an option called **Edit Default Values**. This setting is really interesting
    when our requirement is that every article that will be generated from this structure
    should have a predefined specific category, tag, display page, and so on. In the
    background, this is an article that has a specific setting in the database in
    order to prevent it from it being chosen or found by Asset Publisher, Web Content
    Display, or even searches.
  prefs: []
  type: TYPE_NORMAL
- en: 'To set the default values, follows these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go to **Admin** | **Site Administration** | **Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Manage** option and choose **Structures**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the selected structure, such as **Internal Publication**, go to **Actions**
    | **Edit default values**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Fill in the default values and click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Creating a new template
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This recipe requires basic programming skills. In general, a template is a pattern
    to render values from an article with a specific structure. In accordance with
    this fact, a template is relative to the structure, so a structure and template
    are a pair of definitions that can't exist alone. Structures define how the form
    looks; templates determine how the journal article will be rendered and arranged.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Prepare a structure called **Internal publication**. To see how to achieve this,
    refer to the previous recipe.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s assume that our template is divided into four parts:'
  prefs: []
  type: TYPE_NORMAL
- en: Metadata definition that contains *Author* and *Department*
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Metric definition with *Client* and *Project* information
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Description part with *Content*
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Attachments* section'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Liferay gives users three languages to write a template: Velocity (.vm), FreeMarker
    (.ftl), and Extensible Stylesheet Language (.xsl). Regardless of the language
    definition, the process of creating a new template consists of the same rules.
    In order to create a new template, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in as an administrator.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go to **Admin** | **Site Administration** | **Content** | **Web Content**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Manage** option and choose **Templates**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Add** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Fill in the form with the following values:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Name**: Type `Internal Publication`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Structure**: Choose **Internal Publication**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Language**: Choose **Velocity (.vm)**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Write a script that renders our assumptions as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Click on the **Save** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'As we mentioned at the beginning, Liferay gives users three ways (languages)
    to write an article''s template: Velocity (.vm), FreeMarker (.ftl), and Extensible
    Stylesheet Language (.xls). In this recipe, we chose Velocity macro, which allows
    us to mix logic (macros) with HTML and CSS. If we open an editor, we can see that
    on the left-hand side, there is a menu with **General Variables**, **Fields**,
    and **Util**, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How it works…](img/image00352.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Variables
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The **General Variables** section contains variables that can be used in the
    script. As a matter of fact, these definitions are used rarely and only in sophisticated
    VM or FTL scripts. The following variables are available:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Name | Variable | Liferay Class | Description |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Portal instance | `$company` | Company | Object that represents the current
    portal instance |'
  prefs: []
  type: TYPE_TB
- en: '| Portal instance identifier | `$companyId` | Long | Identifier of the current
    portal instance |'
  prefs: []
  type: TYPE_TB
- en: '| Device | `$device` | Device | Object that represents the device currently
    used to access the site |'
  prefs: []
  type: TYPE_TB
- en: '| Site ID | `$groupId` | Long | The identifier of the current site |'
  prefs: []
  type: TYPE_TB
- en: '| View mode | `$viewMode` | String | The desired view mode for the content;
    the value will be `print` for print mode |'
  prefs: []
  type: TYPE_TB
- en: Fields
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'These objects can be used in our scripts. For instance, the `$Content.getData()`
    invocation prints a value from the `Content` field of the structure. As shown
    in the preceding code, we used this invocation for the following fields:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: The next useful invocation is `$Attachment.getSiblings()`. This method is used
    when our field is repeatable and contains many values. In our example, the `Attachment`
    field has two siblings.
  prefs: []
  type: TYPE_NORMAL
- en: To iterate over siblings, we used the `foreach` macro, which is very similar
    to the well-known `foreach` construction from the Java language.
  prefs: []
  type: TYPE_NORMAL
- en: 'Considering the preceding code, fields have other methods, such as the following
    ones:'
  prefs: []
  type: TYPE_NORMAL
- en: '`$field.getName()`: This prints the field''s name'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`$field.getType()`: This returns field''s type, which is defined in the structure'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`$field.getChildren()`: This is used when a field has nested fields'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Utils
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The most powerful tools that are available in the script are utils. In fact,
    there are real Java-based classes that offer a huge range of functionalities.
    In our example, we used one to print a display date of the article:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'The full list of available services is placed in the following Java classes:'
  prefs: []
  type: TYPE_NORMAL
- en: '`com.liferay.portal.template.TemplateContextHelper`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`com.liferay.portal.velocity.VelocityTemplateContextHelper` (for Velocity)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`com.liferay.portal.freemarker.FreeMarkerTemplateContextHelper` (for FreeMarker)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Reserved variables
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The preceding code has a special invocation: `$reserved-article-display-date.getData()`.
    This is a reserved variable that is globally available in every template. In our
    example, it displays `display date` for the article. Liferay offers many reserved
    variables, such as `reserved-article-title`, `reserved-article-type`, `reserved-article-version`,
    and so on.'
  prefs: []
  type: TYPE_NORMAL
- en: The full list of these variables is defined in the `com.liferay.portlet.journal.model.JournalStructureConstants`
    class.
  prefs: []
  type: TYPE_NORMAL
