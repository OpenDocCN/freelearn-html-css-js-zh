<html><head></head><body>
<div id="_idContainer035">
<h1 class="chapter-number" id="_idParaDest-82"><a id="_idTextAnchor082"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-83"><a id="_idTextAnchor083"/><span class="koboSpan" id="kobo.2.1">Expanding the Foundations – Building a User Registration Page, Front to Back!</span></h1>
<p><span class="koboSpan" id="kobo.3.1">At this point, you’ve started building the technical foundations and have some context around web development. </span><span class="koboSpan" id="kobo.3.2">You’ve also seen some of the frontend (the client) and some of the backend (the server), but so far, you haven’t seen them put together. </span><span class="koboSpan" id="kobo.3.3">Let’s address </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">that now!</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In the process, you’ll first learn a little bit about networking, since the internet and websites are all built on top of networking. </span><span class="koboSpan" id="kobo.5.2">You’ll then get some exposure to more HTML, CSS, JS, and Node, and you’ll do this by building another simple web page and seeing how it communicates with the server </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">side now.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">The goal here is to see how the client and server connect, how information is transmitted to the server, and how the server handles it and returns a response. </span><span class="koboSpan" id="kobo.7.2">This is part and parcel of what we do every day in web development, so clearly, it’s of paramount importance. </span><span class="koboSpan" id="kobo.7.3">Not only will you get some exposure to this but you’ll also do so in two different ways, ensuring that you can see that there is more than one way to skin a cat in </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">web development.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">You’ll also learn a little bit about the tools available to you that come with your web browser and how valuable they are, as they are tools you’ll interact with constantly as you work to debug and get things working </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">exactly right.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">In this chapter, we’ll cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.13.1">Connecting over </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">a network</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Building an interactive web app – </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">the frontend</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Building an interactive web app – </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">the backend</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Exploring a different approach – </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">single-page apps</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Loving your new best friend – </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">DevTools</span></span></li>
</ul>
<h1 id="_idParaDest-84"><a id="_idTextAnchor084"/><span class="koboSpan" id="kobo.23.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.24.1">For the purposes of this chapter, the only thing you’ll require is having Node installed and working, which you should have done in the previous chapter. </span><span class="koboSpan" id="kobo.24.2">You’ll also want to be sure you’ve downloaded all of the source code for this book from GitHub (</span><a href="https://github.com/PacktPublishing/Web-Development-Career-Master-Plan"><span class="koboSpan" id="kobo.25.1">https://github.com/PacktPublishing/Web-Development-Career-Master-Plan</span></a><span class="koboSpan" id="kobo.26.1">), which you can find in the </span><em class="italic"><span class="koboSpan" id="kobo.27.1">Technical requirements</span></em><span class="koboSpan" id="kobo.28.1"> section of </span><a href="B18315_02.xhtml#_idTextAnchor061"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.29.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.30.1">. </span><span class="koboSpan" id="kobo.30.2">As you’ve probably noticed by now, each chapter has its own directory in the downloaded code, so you’re interested in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.31.1">ch-03/1-form</span></strong><span class="koboSpan" id="kobo.32.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.33.1">ch-03/2-spa</span></strong><span class="koboSpan" id="kobo.34.1"> directories for </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.36.1">That’s really all you need for this chapter, so now, let’s build ourselves a user </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">registration page!</span></span></p>
<h1 id="_idParaDest-85"><a id="_idTextAnchor085"/><span class="koboSpan" id="kobo.38.1">Connecting over a network</span></h1>
<p><span class="koboSpan" id="kobo.39.1">Before we actually get</span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.40.1"> to developing code, let’s first talk about something more fundamental, networking, and how the web communicates over </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">a network.</span></span></p>
<p><span class="koboSpan" id="kobo.42.1">I mentioned </span><strong class="bold"><span class="koboSpan" id="kobo.43.1">IP</span></strong><span class="koboSpan" id="kobo.44.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.45.1">Internet Protocol</span></strong><span class="koboSpan" id="kobo.46.1">) in the last chapter, but I didn’t go</span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.47.1"> into too much detail. </span><span class="koboSpan" id="kobo.47.2">I really won’t go into it too much here either because when we talk about network protocols, which include IP, it quickly becomes an expansive topic. </span><span class="koboSpan" id="kobo.47.3">However, as a web developer, you should know at least </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">the basics.</span></span></p>
<h2 id="_idParaDest-86"><a id="_idTextAnchor086"/><span class="koboSpan" id="kobo.49.1">Understanding IP</span></h2>
<p><span class="koboSpan" id="kobo.50.1">IP, as the second word in the</span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.51.1"> acronym states, is a protocol. </span><span class="koboSpan" id="kobo.51.2">A protocol is simply an agreed-upon standard for how two things communicate. </span><span class="koboSpan" id="kobo.51.3">In this case, IP</span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.52.1"> describes how small bits of data called </span><strong class="bold"><span class="koboSpan" id="kobo.53.1">datagrams</span></strong><span class="koboSpan" id="kobo.54.1"> are transmitted between two machines over a network. </span><span class="koboSpan" id="kobo.54.2">As you saw in </span><a href="B18315_02.xhtml#_idTextAnchor061"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.55.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.56.1">, it’s also what is responsible for giving each machine an IP address that uniquely identifies them on </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">the network.</span></span></p>
<p><span class="koboSpan" id="kobo.58.1">However, it may surprise you to learn that IP doesn’t guarantee the delivery, order, or integrity of the datagrams it transmits. </span><span class="koboSpan" id="kobo.58.2">In other words, if you want to send a picture from one machine to another, that picture will be broken up into many datagrams, and they will be transmitted over the network using IP, but they may or may not reach the destination, may or may not be in the proper order for the other machine to reconstruct the image (in fact, the receiving machine wouldn’t even have a way to know what order they should go in), and may or may not be corrupted in some way. </span><span class="koboSpan" id="kobo.58.3">IP is considered a “best-effort” protocol, meaning it’ll </span><em class="italic"><span class="koboSpan" id="kobo.59.1">try</span></em><span class="koboSpan" id="kobo.60.1"> to get data from machine A to machine B, but it’s </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">not guaranteed.</span></span></p>
<p><span class="koboSpan" id="kobo.62.1">If that sounds like a recipe</span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.63.1"> for disaster, you’re right! </span><span class="koboSpan" id="kobo.63.2">But the benefit of it is that it is very simple and fast, and when you have something simple and fast in technology, it’s almost always easy to extend it or build something on top of it (we’re big on layers in software engineering). </span><span class="koboSpan" id="kobo.63.3">And that’s exactly where TCP </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">comes in.</span></span></p>
<h2 id="_idParaDest-87"><a id="_idTextAnchor087"/><span class="koboSpan" id="kobo.65.1">Understanding TCP</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.66.1">TCP</span></strong><span class="koboSpan" id="kobo.67.1">, which stands for </span><strong class="bold"><span class="koboSpan" id="kobo.68.1">Transmission Control Protocol</span></strong><span class="koboSpan" id="kobo.69.1">, works in conjunction</span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.70.1"> with – or </span><em class="italic"><span class="koboSpan" id="kobo.71.1">on top of</span></em><span class="koboSpan" id="kobo.72.1"> – IP by ensuring that when information is sent, it is sent reliably. </span><span class="koboSpan" id="kobo.72.2">It begins by breaking the data</span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.73.1"> to be sent down into </span><strong class="bold"><span class="koboSpan" id="kobo.74.1">packets</span></strong><span class="koboSpan" id="kobo.75.1"> (which IP will then further break down into datagrams), and it ensures that the packets all arrive at the destination, that they are error-free, and that they tell the receiver what order everything all goes in. </span><span class="koboSpan" id="kobo.75.2">It does this by establishing a connection between machines and then sending the packets, which the receiver will then examine. </span><span class="koboSpan" id="kobo.75.3">The packets contain data that the receiver can use to validate that the data is correct. </span><span class="koboSpan" id="kobo.75.4">They also include sequence numbers, which tell the receiver what order they go in. </span><span class="koboSpan" id="kobo.75.5">If a packet is corrupt, or if the receiver finds some missing, it can request the sender to resend the data, which is another key thing that </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">TCP provides.</span></span></p>
<p><span class="koboSpan" id="kobo.77.1">TCP/IP is a great combination because, in a large network with a lot of machines (like the internet), there are a lot of routes between them and connections that packets can be transmitted across. </span><span class="koboSpan" id="kobo.77.2">If one connection is broken – maybe because someone accidentally cut a network cable while doing some roadwork – a different route can be chosen. </span><span class="koboSpan" id="kobo.77.3">In such a scenario, the fact that IP doesn’t provide concrete guarantees doesn’t matter because TCP on top of it has all the information it needs to request a retry from the sender as needed, and this can continue until all the data is received correctly and in the right order. </span><span class="koboSpan" id="kobo.77.4">This provides redundancy for the network. </span><span class="koboSpan" id="kobo.77.5">Yes, if packets suddenly must travel halfway around the world to get where they’re going, things will slow down a bit, but the data will still get there, and that’s the key thing TCP provides when working in conjunction </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">with IP.</span></span></p>
<p><span class="koboSpan" id="kobo.79.1">However, while TCP/IP serves</span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.80.1"> as, conceptually, the foundational protocols of the internet, the web has its own protocol that sits on top of TCP/IP, and </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">that’s HTTP.</span></span></p>
<h2 id="_idParaDest-88"><a id="_idTextAnchor088"/><span class="koboSpan" id="kobo.82.1">Understanding HTTP</span></h2>
<p><span class="koboSpan" id="kobo.83.1">You can think of </span><strong class="bold"><span class="koboSpan" id="kobo.84.1">HTTP</span></strong><span class="koboSpan" id="kobo.85.1">, which is an acronym for </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">HyperText Transfer Protocol</span></strong><span class="koboSpan" id="kobo.87.1">, as the foundation</span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.88.1"> for data communication on </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">the web.</span></span></p>
<p><span class="koboSpan" id="kobo.90.1">HTTP works as a request-response model between two machines, one acting as a client and one acting as a server. </span><span class="koboSpan" id="kobo.90.2">HTTP</span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.91.1"> is what we call a </span><strong class="bold"><span class="koboSpan" id="kobo.92.1">stateless</span></strong><span class="koboSpan" id="kobo.93.1"> protocol, which means that each request is independent. </span><span class="koboSpan" id="kobo.93.2">In other words, when you enter a URL in your browser, a connection is established from your machine to the server, but that connection ends once the HTML page is returned to you. </span><span class="koboSpan" id="kobo.93.3">When an image or style sheet needs to be retrieved, a new connection is established. </span><span class="koboSpan" id="kobo.93.4">Well, more modern versions of HTTP will actually reuse connections to some degree, but the connections still don’t last forever, which is what we mean by stateless – there is not a constant connection between the </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">two machines.</span></span></p>
<p><span class="koboSpan" id="kobo.95.1">When you use HTTP to connect from one machine to another, each request uses an HTTP method, which comprises a basic set of operations that can be used to interact with a server. </span><span class="koboSpan" id="kobo.95.2">They are meant to, at least generally, convey to the server what the client wants to do. </span><span class="koboSpan" id="kobo.95.3">Note that this is different from a JS method – a function that is attached to an object – and is really just a fancy way of saying that it tells us what </span><em class="italic"><span class="koboSpan" id="kobo.96.1">kind</span></em><span class="koboSpan" id="kobo.97.1"> of HTTP request </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">is made.</span></span></p>
<p><span class="koboSpan" id="kobo.99.1">HTTP defines several</span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.100.1"> methods, where each one has a typical (although not concrete) </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">intended use:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.102.1">GET</span></strong><span class="koboSpan" id="kobo.103.1">: Retrieve data from </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">the server</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.105.1">POST</span></strong><span class="koboSpan" id="kobo.106.1">: Send data to be processed by </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">the server</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.108.1">PUT</span></strong><span class="koboSpan" id="kobo.109.1">: Update existing data on </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">the server</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.111.1">DELETE</span></strong><span class="koboSpan" id="kobo.112.1">: Remove data from </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">the server</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.114.1">HEAD</span></strong><span class="koboSpan" id="kobo.115.1">: The same as </span><strong class="source-inline"><span class="koboSpan" id="kobo.116.1">GET</span></strong><span class="koboSpan" id="kobo.117.1"> but a more </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">limited version</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.119.1">OPTIONS</span></strong><span class="koboSpan" id="kobo.120.1">: Discover allowed</span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.121.1"> methods on </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">a resource</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.123.1">When you enter a URL in your browser, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.124.1">GET</span></strong><span class="koboSpan" id="kobo.125.1"> request is made. </span><span class="koboSpan" id="kobo.125.2">That makes sense if you think about it – your browser is asking for data from the server, an HTML document usually. </span><span class="koboSpan" id="kobo.125.3">Other situations call for other methods – when you’re sending information to the server, you will probably use </span><strong class="source-inline"><span class="koboSpan" id="kobo.126.1">POST</span></strong><span class="koboSpan" id="kobo.127.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.128.1">PUT</span></strong><span class="koboSpan" id="kobo.129.1">, depending on the situation – but you’ll see how choosing other methods comes into play in just a </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">little while.</span></span></p>
<p><span class="koboSpan" id="kobo.131.1">It’s worth noting </span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.132.1">that HTTP, being closely tied to HTML, has a similar concept to the head and body in HTML, instead called the </span><strong class="bold"><span class="koboSpan" id="kobo.133.1">headers</span></strong><span class="koboSpan" id="kobo.134.1"> and body. </span><span class="koboSpan" id="kobo.134.2">Headers</span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.135.1"> are bits of data that provide some metadata to the receiver. </span><span class="koboSpan" id="kobo.135.2">There are a substantial number of headers, and you can create your own too, so I’m not going to go into any here; instead, I’ll opt to introduce headers when necessary later. </span><span class="koboSpan" id="kobo.135.3">However, one thing I </span><em class="italic"><span class="koboSpan" id="kobo.136.1">will</span></em><span class="koboSpan" id="kobo.137.1"> tell you</span><a id="_idIndexMarker194"/><span class="koboSpan" id="kobo.138.1"> is that they are sent in </span><strong class="bold"><span class="koboSpan" id="kobo.139.1">key-value pairs</span></strong><span class="koboSpan" id="kobo.140.1">. </span><span class="koboSpan" id="kobo.140.2">This is a common programming idea that looks </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.142.1">
first_name:Frank</span></pre> <p><span class="koboSpan" id="kobo.143.1">Alternatively, it can look </span><span class="No-Break"><span class="koboSpan" id="kobo.144.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.145.1">
first_name=Frank</span></pre> <p><span class="koboSpan" id="kobo.146.1">Whether a colon or equal sign (or possibly some other character) is used depends on the context, but the key point is that you have a key (</span><strong class="source-inline"><span class="koboSpan" id="kobo.147.1">first_name</span></strong><span class="koboSpan" id="kobo.148.1">) and a value (</span><strong class="source-inline"><span class="koboSpan" id="kobo.149.1">Frank</span></strong><span class="koboSpan" id="kobo.150.1">). </span><span class="koboSpan" id="kobo.150.2">The value is identified by the key. </span><span class="koboSpan" id="kobo.150.3">You can almost think of them as variables in JS in that you can look up the value associated with a key </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">when needed.</span></span></p>
<p><span class="koboSpan" id="kobo.152.1">The body of an HTTP request can contain arbitrary data, whether that’s text, an image, an audio file, or anything else. </span><span class="koboSpan" id="kobo.152.2">When an HTTP request has a body and data in it, almost always it will use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">POST</span></strong><span class="koboSpan" id="kobo.154.1"> method. </span><span class="koboSpan" id="kobo.154.2">You’re about to see an example of that, as part of a discussion of something else – </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">HTML forms.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.156.1">HTTP versus HTTPS</span></p>
<p class="callout"><span class="koboSpan" id="kobo.157.1">Oh, and if that</span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.158.1"> wasn’t enough, there’s also HTTPS. </span><span class="koboSpan" id="kobo.158.2">Fortunately, that’s simple – it’s just HTTP but encrypted, with the </span><strong class="bold"><span class="koboSpan" id="kobo.159.1">S</span></strong><span class="koboSpan" id="kobo.160.1"> standing for </span><strong class="bold"><span class="koboSpan" id="kobo.161.1">Secure</span></strong><span class="koboSpan" id="kobo.162.1">. </span><span class="koboSpan" id="kobo.162.2">If you see a URL with HTTP, it means that all the content sent back and forth using that connection could potentially be looked at by other people on the network (it’s not quite that easy to do, but it’s also not especially difficult). </span><span class="koboSpan" id="kobo.162.3">With HTTPS though, all that content is encrypted, and without</span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.163.1"> some secret information called </span><em class="italic"><span class="koboSpan" id="kobo.164.1">keys</span></em><span class="koboSpan" id="kobo.165.1">, a person who intercepts the data would essentially see a lot </span><span class="No-Break"><span class="koboSpan" id="kobo.166.1">of gibberish.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.167.1">There was a time when HTTPS was only used for sensitive sites such as banking sites and shopping sites. </span><span class="koboSpan" id="kobo.167.2">That’s because, for a long time, the encryption and decryption process – which is based on some complex mathematics – was an expensive thing for computers to do. </span><span class="koboSpan" id="kobo.167.3">It was expensive in terms of money and, more importantly, in terms of performance. </span><span class="koboSpan" id="kobo.167.4">An HTTPS connection would simply be slower than an HTTP one. </span><span class="koboSpan" id="kobo.167.5">However, nowadays, that’s no longer the case. </span><span class="koboSpan" id="kobo.167.6">Computers are fast enough and often have specialized hardware specifically for encryption/decryption, so most connections are, in fact, HTTPS now. </span><span class="koboSpan" id="kobo.167.7">Browsers will even make you aware that a connection isn’t secure, and some will even disallow a non-HTTPS </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">connection entirely.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.169.1">For most intents and purposes, you can generally treat HTTP and HTTPS connections the same. </span><span class="koboSpan" id="kobo.169.2">However, in terms of development, setting up an HTTPS connection takes some additional configuration that can be non-trivial to set up. </span><span class="koboSpan" id="kobo.169.3">If you ever hear the term </span><em class="italic"><span class="koboSpan" id="kobo.170.1">certificates</span></em><span class="koboSpan" id="kobo.171.1">, that’s what’s involved. </span><span class="koboSpan" id="kobo.171.2">That’s a whole other topic that can get rather complicated, so it won’t be covered in this book. </span><span class="koboSpan" id="kobo.171.3">When developing on your own machine, you can simply use HTTP, which is what will be used by default if you don’t explicitly set up HTTPS, and you needn’t worry about certificates and all that unless and until you really </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">have to.</span></span></p>
<p><span class="koboSpan" id="kobo.173.1">With this basic understanding of how things communicate over the internet (and most networks generally) in hand, we can now move on to building the aforementioned </span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">registration app.</span></span></p>
<h1 id="_idParaDest-89"><a id="_idTextAnchor089"/><span class="koboSpan" id="kobo.175.1">Building an interactive web app – the frontend</span></h1>
<p><span class="koboSpan" id="kobo.176.1">For this chapter, rather than just using</span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.177.1"> simple HTML as you’ve previously seen, let’s create an application that looks somewhat more “real.” </span><span class="koboSpan" id="kobo.177.2">By that, I mean let’s create something you might actually have to build on the job someday – a user </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">registration page.</span></span></p>
<p><span class="koboSpan" id="kobo.179.1">The goal will be simple – give a user a way to enter a few key pieces of information (their title, first and last names, age, and email address) and then send that information to a server, where we’ll generate a response to confirm that the user is now registered. </span><span class="koboSpan" id="kobo.179.2">We won’t actually register the user in any fashion – we won’t even store the information they sent – but it’ll be enough</span><a id="_idIndexMarker198"/><span class="koboSpan" id="kobo.180.1"> to see how such a client-server </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">interaction works.</span></span></p>
<h2 id="_idParaDest-90"><a id="_idTextAnchor090"/><span class="koboSpan" id="kobo.182.1">Building a registration page</span></h2>
<p><span class="koboSpan" id="kobo.183.1">The first step is to build a page</span><a id="_idIndexMarker199"/><span class="koboSpan" id="kobo.184.1"> where the user enters</span><a id="_idIndexMarker200"/> <span class="No-Break"><span class="koboSpan" id="kobo.185.1">their information.</span></span></p>
<p><span class="koboSpan" id="kobo.186.1">Well, I take that back, because the </span><em class="italic"><span class="koboSpan" id="kobo.187.1">real</span></em><span class="koboSpan" id="kobo.188.1"> first step is to start a project. </span><span class="koboSpan" id="kobo.188.2">As you learned in the previous chapters, this can be as simple as creating an HTML file; however, you also saw how you can use NPM to create a new project. </span><span class="koboSpan" id="kobo.188.3">Since we know we’ll be building a server later for this project, let’s go ahead and do </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">that now.</span></span></p>
<p><span class="koboSpan" id="kobo.190.1">As before, simply create a directory, go to a command prompt, navigate to the directory, and execute </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">npm init</span></strong><span class="koboSpan" id="kobo.192.1">. </span><span class="koboSpan" id="kobo.192.2">For now, you can just press </span><em class="italic"><span class="koboSpan" id="kobo.193.1">Enter</span></em><span class="koboSpan" id="kobo.194.1"> for every question, as this will be sufficient for </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">our needs.</span></span></p>
<p><span class="koboSpan" id="kobo.196.1">Once that’s done, it’s time to write some HTML, the result of which will be what you see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.197.1">Figure 3</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.198.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer027">
<span class="koboSpan" id="kobo.200.1"><img alt="Figure 3.1: The registration page we’re building" src="image/B18315_03_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.201.1">Figure 3.1: The registration page we’re building</span></p>
<p><span class="koboSpan" id="kobo.202.1">You would begin this project by creating a file in your project directory, named </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">index.html</span></strong><span class="koboSpan" id="kobo.204.1">, and then get to work writing the code in it. </span><span class="koboSpan" id="kobo.204.2">Of course, I’ve already done that part for you! </span><span class="koboSpan" id="kobo.204.3">In the GitHub repo, you’ll find this file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.205.1">ch-03/1-form</span></strong><span class="koboSpan" id="kobo.206.1"> directory. </span><span class="koboSpan" id="kobo.206.2">Since there is a bit more to it than in the prior examples, we’ll tackle it bit by bit, breaking it down</span><a id="_idIndexMarker201"/><span class="koboSpan" id="kobo.207.1"> into manageable</span><a id="_idIndexMarker202"/><span class="koboSpan" id="kobo.208.1"> chunks, starting </span><span class="No-Break"><span class="koboSpan" id="kobo.209.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">&lt;head&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.212.1">Creating the head</span></h3>
<p><span class="koboSpan" id="kobo.213.1">For our registration page, we start </span><a id="_idIndexMarker203"/><span class="koboSpan" id="kobo.214.1">the HTML document, as before, with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">&lt;html&gt;</span></strong><span class="koboSpan" id="kobo.216.1"> tag and then a </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.218.1"> section </span><span class="No-Break"><span class="koboSpan" id="kobo.219.1">within it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.220.1">
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;User Registration&lt;/title&gt;
    &lt;link rel="stylesheet" type="text/css" href="styles.css" /&gt;
  &lt;/head&gt;</span></pre> <p><span class="koboSpan" id="kobo.221.1">By now, the code should be starting to make some sense to you, since you’ve seen </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">it before.</span></span></p>
<p><span class="koboSpan" id="kobo.223.1">However, unlike the examples shown in the previous chapters, there is no </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">&lt;style&gt;</span></strong><span class="koboSpan" id="kobo.225.1"> block in </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.227.1">. </span><span class="koboSpan" id="kobo.227.2">Instead, all the CSS is in an external </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">styles.css</span></strong><span class="koboSpan" id="kobo.229.1"> file. </span><span class="koboSpan" id="kobo.229.2">I did this for one main reason – so that I could skip the CSS for now! </span><span class="koboSpan" id="kobo.229.3">There’s not much CSS to deal with at all; however, it will make more sense if you see how HTML styles it first, so we’ll be coming back to it at the end. </span><span class="koboSpan" id="kobo.229.4">For now, just know that the style sheet file gets imported by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">&lt;link&gt;</span></strong><span class="koboSpan" id="kobo.231.1"> tag and acts as if it were a </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">&lt;style&gt;</span></strong><span class="koboSpan" id="kobo.233.1"> block directly in </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.235.1">, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">previous chapters.</span></span></p>
<p><span class="koboSpan" id="kobo.237.1">There is also no JS in this project, so that’s actually all there is for </span><strong class="source-inline"><span class="koboSpan" id="kobo.238.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.239.1">. </span><span class="koboSpan" id="kobo.239.2">Now, we can move on to </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">creating </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">&lt;body&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.242.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.243.1">Creating the body</span></h3>
<p><span class="koboSpan" id="kobo.244.1">As with </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.246.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.247.1">&lt;body&gt;</span></strong><span class="koboSpan" id="kobo.248.1"> starts out </span><span class="No-Break"><span class="koboSpan" id="kobo.249.1">very</span></span><span class="No-Break"><a id="_idIndexMarker204"/></span><span class="No-Break"><span class="koboSpan" id="kobo.250.1"> simply:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.251.1">
&lt;body&gt;
    &lt;h1&gt;User Registration&lt;/h1&gt;
    &lt;p&gt;Please enter the following information to register for our website&lt;/p&gt;
&lt;/body&gt;</span></pre> <p><span class="koboSpan" id="kobo.252.1">As you can see, we have a heading with a paragraph of text under it. </span><span class="koboSpan" id="kobo.252.2">Of course, you know there’s more – all those fields you saw in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.253.1">Figure 3</span></em></span><em class="italic"><span class="koboSpan" id="kobo.254.1">.1</span></em><span class="koboSpan" id="kobo.255.1"> where the user can enter their information</span><a id="_idIndexMarker205"/><span class="koboSpan" id="kobo.256.1"> and the button to submit it – but all of those constitute a new concept that I’ll introduce now – </span><span class="No-Break"><span class="koboSpan" id="kobo.257.1">forms.</span></span></p>
<h3><span class="koboSpan" id="kobo.258.1">Getting to know forms</span></h3>
<p><span class="koboSpan" id="kobo.259.1">In HTML, forms</span><a id="_idIndexMarker206"/><span class="koboSpan" id="kobo.260.1"> are how we provide a way for users to enter information. </span><span class="koboSpan" id="kobo.260.2">A form consists of one or more form fields, and these fields come in several types. </span><span class="koboSpan" id="kobo.260.3">You may not realize it, but unless you’ve literally never used a website, then you know many of these fields, even if you don’t realize you do. </span><span class="koboSpan" id="kobo.260.4">Putting that aside, it all starts with defining a form itself, and with HTML, that means a </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">new tag:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.262.1">
&lt;form action="/register" method="post"&gt;</span></pre> <p><span class="koboSpan" id="kobo.263.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">&lt;form&gt;</span></strong><span class="koboSpan" id="kobo.265.1"> tag is how we begin a form. </span><span class="koboSpan" id="kobo.265.2">This tag has several attributes, but the two key ones are </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">action</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.267.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">method</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.270.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.271.1">action</span></strong><span class="koboSpan" id="kobo.272.1"> attribute tells the browser what URL to send the information the user enters. </span><span class="koboSpan" id="kobo.272.2">You can express this URL as an </span><em class="italic"><span class="koboSpan" id="kobo.273.1">absolute</span></em><span class="koboSpan" id="kobo.274.1"> URL or a </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.275.1">relative</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.276.1"> URL.</span></span></p>
<p><span class="koboSpan" id="kobo.277.1">An absolute URL contains all the information needed to get to a given resource. </span><span class="koboSpan" id="kobo.277.2">For example, www.packt.com/takeMyInfo is an absolute URL because it starts with a domain name and includes a full path to a resource on the server. </span><a href="http://www.packt.com/books/zammetti/forms/takeMyInfo "><span class="koboSpan" id="kobo.278.1">www.packt.com/books/zammetti/forms/takeMyInfo </span></a><span class="koboSpan" id="kobo.279.1">might be another (this is fake, for the record!) example of an </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">absolute URL.</span></span></p>
<p><span class="koboSpan" id="kobo.281.1">What, then, is a relative URL? </span><span class="koboSpan" id="kobo.281.2">A relative URL starts from an absolute URL or, more precisely, </span><em class="italic"><span class="koboSpan" id="kobo.282.1">part</span></em><span class="koboSpan" id="kobo.283.1"> of one. </span><span class="koboSpan" id="kobo.283.2">/takeMyInfo is an example of a relative URL. </span><span class="koboSpan" id="kobo.283.3">If the document that uses that URL is loaded from </span><a href="http://www.packt.com"><span class="koboSpan" id="kobo.284.1">www.packt.com</span></a><span class="koboSpan" id="kobo.285.1">, the browser interprets all relative URLs as being relative to that base URL. </span><span class="koboSpan" id="kobo.285.2">So, the full URL that /takeMyInfo leads to </span><span class="No-Break"><span class="koboSpan" id="kobo.286.1">is </span></span><span class="No-Break"><span class="koboSpan" id="kobo.287.1">www.packt.com/takeMyInfo</span></span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.289.1">In a more complex example, /books/zammetti/forms/takeMyInfo could be a relative URL. </span><span class="koboSpan" id="kobo.289.2">If you loaded an HTML document from </span><a href="http://www.packt.com/books/zammetti"><span class="koboSpan" id="kobo.290.1">www.packt.com/books/zammetti</span></a><span class="koboSpan" id="kobo.291.1">, then you could have a relative URL of /forms/takeMyInfo, since the two get joined together by the browser behind the scenes, forming the absolute URL that it will then request </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">resources with.</span></span></p>
<p><span class="koboSpan" id="kobo.293.1">In this </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">&lt;form&gt;</span></strong><span class="koboSpan" id="kobo.295.1"> though, </span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">/register</span></strong><span class="koboSpan" id="kobo.297.1"> is the URL the form will be sent to, and you’ll see what is there waiting for it later when we talk about the server part of </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">this project.</span></span></p>
<p><span class="koboSpan" id="kobo.299.1">The other key attribute is </span><strong class="source-inline"><span class="koboSpan" id="kobo.300.1">method</span></strong><span class="koboSpan" id="kobo.301.1">. </span><span class="koboSpan" id="kobo.301.2">This is the HTTP method used to transmit the form, and it will be either </span><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">GET</span></strong><span class="koboSpan" id="kobo.303.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.304.1">POST</span></strong><span class="koboSpan" id="kobo.305.1">. </span><span class="koboSpan" id="kobo.305.2">The difference is that when it’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">GET</span></strong><span class="koboSpan" id="kobo.307.1">, the information on the form</span><a id="_idIndexMarker207"/><span class="koboSpan" id="kobo.308.1"> is added to the URL as a </span><strong class="bold"><span class="koboSpan" id="kobo.309.1">query string</span></strong><span class="koboSpan" id="kobo.310.1">. </span><span class="koboSpan" id="kobo.310.2">This is a string in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.311.1">?aaa=bbb&amp;…</span></strong><span class="koboSpan" id="kobo.312.1"> form, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">aaa</span></strong><span class="koboSpan" id="kobo.314.1"> is a key and </span><strong class="source-inline"><span class="koboSpan" id="kobo.315.1">bbb</span></strong><span class="koboSpan" id="kobo.316.1"> is a value. </span><span class="koboSpan" id="kobo.316.2">For example, in this form, we’re going to ask the user for their first name and last name. </span><span class="koboSpan" id="kobo.316.3">If this information is sent via </span><strong class="source-inline"><span class="koboSpan" id="kobo.317.1">GET</span></strong><span class="koboSpan" id="kobo.318.1">, a query string will be appended to the URL </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.320.1">?first_name=Frank&amp;last_name=Zammetti</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.322.1">This is fine in some cases, but in most, it’s a bad</span><a id="_idIndexMarker208"/><span class="koboSpan" id="kobo.323.1"> idea because it has security implications and also because a URL has a size limit, and the information might be larger than you have space for. </span><span class="koboSpan" id="kobo.323.2">So, you can POST the information instead, which will cause the browser to send it in the body of the HTTP request, where there is effectively no limit and where it’s not </span><em class="italic"><span class="koboSpan" id="kobo.324.1">quite</span></em><span class="koboSpan" id="kobo.325.1"> as exposed to the world (it’s still quite easy to get, but every little </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">bit helps).</span></span></p>
<p><span class="koboSpan" id="kobo.327.1">Once we have </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">&lt;form&gt;</span></strong><span class="koboSpan" id="kobo.329.1">, we can start adding fields </span><span class="No-Break"><span class="koboSpan" id="kobo.330.1">to it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.331.1">
&lt;p&gt;
  Title
  &lt;br&gt;
  &lt;input type="radio" name="title" value="Mr"&gt;Mr
  &lt;input type="radio" name="title" value="Mrs"&gt;Mrs
  &lt;input type="radio" name="title" value="Miss"&gt;Miss
&lt;/p&gt;</span></pre> <p><span class="koboSpan" id="kobo.332.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.333.1">&lt;p&gt;</span></strong><span class="koboSpan" id="kobo.334.1"> tag is, strictly speaking, not necessary in a form. </span><span class="koboSpan" id="kobo.334.2">In fact, you can define your HTML and your layout however you like, but here, I just want each field to go down the screen, so putting each field in </span><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">&lt;p&gt;</span></strong><span class="koboSpan" id="kobo.336.1"> does the job simply. </span><span class="koboSpan" id="kobo.336.2">I want each field to have a text label too, and that’s where the </span><strong class="source-inline"><span class="koboSpan" id="kobo.337.1">Title</span></strong><span class="koboSpan" id="kobo.338.1"> text comes in. </span><span class="koboSpan" id="kobo.338.2">I want that label to be above the field itself, so </span><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">&lt;br&gt;</span></strong><span class="koboSpan" id="kobo.340.1">, a line break in other words, </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">ensures this.</span></span></p>
<p><span class="koboSpan" id="kobo.342.1">An </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">&lt;input&gt;</span></strong><span class="koboSpan" id="kobo.344.1"> tag defines a field</span><a id="_idIndexMarker209"/><span class="koboSpan" id="kobo.345.1"> in the form where the user can enter information. </span><span class="koboSpan" id="kobo.345.2">In most cases, a single-entry field on the screen is also a single </span><strong class="source-inline"><span class="koboSpan" id="kobo.346.1">&lt;input&gt;</span></strong><span class="koboSpan" id="kobo.347.1"> tag in the HTML, with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">type</span></strong><span class="koboSpan" id="kobo.349.1"> attribute that tells the browser what kind of field it is out of several choices. </span><span class="koboSpan" id="kobo.349.2">However, in the case of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">radio</span></strong><span class="koboSpan" id="kobo.351.1"> button, which is the type of control where you can select one and only one from a set of options, there will be multiple </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">&lt;input&gt;</span></strong><span class="koboSpan" id="kobo.353.1"> tags of type </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">radio</span></strong><span class="koboSpan" id="kobo.355.1">, one for each option. </span><span class="koboSpan" id="kobo.355.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">name</span></strong><span class="koboSpan" id="kobo.357.1"> attribute tells the browser what the name – the key – of the input value should be in the form. </span><span class="koboSpan" id="kobo.357.2">Here, we’re saying that in this form, we want to have a key named </span><strong class="source-inline"><span class="koboSpan" id="kobo.358.1">title</span></strong><span class="koboSpan" id="kobo.359.1">, and it will have one of the three values available (which are defined literally by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">value</span></strong><span class="koboSpan" id="kobo.361.1"> attribute of each </span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">&lt;input&gt;</span></strong><span class="koboSpan" id="kobo.363.1"> element). </span><span class="koboSpan" id="kobo.363.2">When the user selects one of the three options, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.364.1">title</span></strong><span class="koboSpan" id="kobo.365.1"> value in the form will reflect that </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">selected </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.369.1">If that seems a bit confusing, don’t worry – I think you’ll find it makes more sense later in this chapter when you see the </span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">server interaction.</span></span></p>
<p><span class="koboSpan" id="kobo.371.1">After that comes two </span><strong class="source-inline"><span class="koboSpan" id="kobo.372.1">&lt;input&gt;</span></strong><span class="koboSpan" id="kobo.373.1"> fields, for the first and </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">last names:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.375.1">
&lt;p&gt;
  First name
  &lt;br&gt;
  &lt;input type="text" name="first_name" size="20"&gt;
&lt;/p&gt;
&lt;p&gt;
  Last Name
  &lt;br&gt;
  &lt;input type="text" name="last_name" size="30"&gt;
&lt;/p&gt;</span></pre> <p><span class="koboSpan" id="kobo.376.1">Here, we have another kind of </span><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">&lt;input&gt;</span></strong><span class="koboSpan" id="kobo.378.1"> field – a </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">text</span></strong><span class="koboSpan" id="kobo.380.1"> field. </span><span class="koboSpan" id="kobo.380.2">This allows the user to enter any arbitrary text they want to. </span><span class="koboSpan" id="kobo.380.3">Then, again, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">type</span></strong><span class="koboSpan" id="kobo.382.1"> attribute tells the browser what kind of field we want, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">name</span></strong><span class="koboSpan" id="kobo.384.1"> tells it what key will hold the value the </span><span class="No-Break"><span class="koboSpan" id="kobo.385.1">user enters.</span></span></p>
<p><span class="koboSpan" id="kobo.386.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.387.1">size</span></strong><span class="koboSpan" id="kobo.388.1"> attribute tells the browser how large the field physically is, and it’s defined as how many characters wide the field should be. </span><span class="koboSpan" id="kobo.388.2">When we talk about non-proportional fonts – meaning that each character takes up a variable amount of space (the letter “I” doesn’t take us as much space</span><a id="_idIndexMarker210"/><span class="koboSpan" id="kobo.389.1"> horizontally as “W” does, for instance) – this value can be a little fungible. </span><span class="koboSpan" id="kobo.389.2">But, as a rule of thumb, if </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">size</span></strong><span class="koboSpan" id="kobo.391.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">20</span></strong><span class="koboSpan" id="kobo.393.1">, then you can generally see 20 characters at a time in it, give or take a little. </span><span class="koboSpan" id="kobo.393.2">Note that this does not set a limit on how many characters can actually be entered; the field will scroll if you enter more than the size attribute allows for (there is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">maxlength</span></strong><span class="koboSpan" id="kobo.395.1"> attribute that sets a limit on how many can </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">be entered).</span></span></p>
<p><span class="koboSpan" id="kobo.397.1">Next, we have a different kind of </span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">input field:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.399.1">
&lt;p&gt;
  Age
  &lt;br&gt;
  &lt;input type="number" name="age" min="13" max="100" step="1"&gt;
&lt;/p&gt;</span></pre> <p><span class="koboSpan" id="kobo.400.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">type</span></strong><span class="koboSpan" id="kobo.402.1"> of </span><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">number</span></strong><span class="koboSpan" id="kobo.404.1"> ensures that only numeric values can be entered; if you try to enter a letter, the browser won’t allow it. </span><span class="koboSpan" id="kobo.404.2">In addition, most browsers will show up and down arrows to allow the user to scroll through available values. </span><span class="koboSpan" id="kobo.404.3">This tag allows us to set a limit on the numbers entered; here, 13–100 is allowed by setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">min</span></strong><span class="koboSpan" id="kobo.406.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">max</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.408.1"> attributes.</span></span></p>
<p><span class="koboSpan" id="kobo.409.1">Next, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">step</span></strong><span class="koboSpan" id="kobo.411.1"> attribute tells us by what increment the number changes when the arrow buttons are used (if the value were 2 instead of 1, then it would jump from 13 to 15 to 17 when the up arrow is clicked, </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">for example).</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.413.1">Figure 3</span></em></span><em class="italic"><span class="koboSpan" id="kobo.414.1">.2</span></em><span class="koboSpan" id="kobo.415.1"> shows the presentation of the up and down arrows, which could be different depending on the browser (this example is </span><span class="No-Break"><span class="koboSpan" id="kobo.416.1">from Chrome):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer028">
<span class="koboSpan" id="kobo.417.1"><img alt="Figure 3.2: How Chrome shows the arrows in a number field" src="image/B18315_03_2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.418.1">Figure 3.2: How Chrome shows the arrows in a number field</span></p>
<p><span class="koboSpan" id="kobo.419.1">After that comes the final </span><span class="No-Break"><span class="koboSpan" id="kobo.420.1">input field:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.421.1">
&lt;p&gt;
  Email Address
  &lt;br&gt;
  &lt;input type="email" name="email"&gt;
&lt;/p&gt;</span></pre> <p><span class="koboSpan" id="kobo.422.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">email</span></strong><span class="koboSpan" id="kobo.424.1"> type ensures that the value</span><a id="_idIndexMarker211"/><span class="koboSpan" id="kobo.425.1"> entered is a valid email address. </span><span class="koboSpan" id="kobo.425.2">If you enter a value that isn’t valid (</span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">none@@@nowhere</span></strong><span class="koboSpan" id="kobo.427.1">, for example), the field will be highlighted, and hovering over it will show a tooltip explaining the problem. </span><span class="koboSpan" id="kobo.427.2">Note that the presentation of this is browser-specific, but </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.428.1">Figure 3</span></em></span><em class="italic"><span class="koboSpan" id="kobo.429.1">.3</span></em><span class="koboSpan" id="kobo.430.1"> shows what you should see when hovering over the field </span><span class="No-Break"><span class="koboSpan" id="kobo.431.1">in Chrome:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer029">
<span class="koboSpan" id="kobo.432.1"><img alt="Figure 3.3: How Chrome shows errors in an email field" src="image/B18315_03_3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.433.1">Figure 3.3: How Chrome shows errors in an email field</span></p>
<p><span class="koboSpan" id="kobo.434.1">After the input fields, we need a button for the user to click to send the information to </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">the server:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.436.1">
&lt;button type="submit"&gt;Register Now&lt;/button&gt;</span></pre> <p><span class="koboSpan" id="kobo.437.1">There are several types of buttons, and you’ll see another later in this chapter, but </span><strong class="source-inline"><span class="koboSpan" id="kobo.438.1">submit</span></strong><span class="koboSpan" id="kobo.439.1"> is perhaps the most important, as it literally tells the browser that, when clicked, it needs to send the information entered to the server. </span><span class="koboSpan" id="kobo.439.2">The text between the opening and closing </span><strong class="source-inline"><span class="koboSpan" id="kobo.440.1">&lt;button&gt;</span></strong><span class="koboSpan" id="kobo.441.1"> tags is the label that will be shown on </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">the button.</span></span></p>
<p><span class="koboSpan" id="kobo.443.1">Only one thing remains now, and that’s to close the </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">form properly:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.445.1">
&lt;/form&gt;</span></pre> <p><span class="koboSpan" id="kobo.446.1">With all that done, we have ourselves</span><a id="_idIndexMarker212"/><span class="koboSpan" id="kobo.447.1"> a complete HTML form that will send its information to the specified </span><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">action</span></strong><span class="koboSpan" id="kobo.449.1"> URL when the user clicks the button. </span><span class="koboSpan" id="kobo.449.2">But we’re not quite done yet; we still have an HTML document </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">to complete!</span></span></p>
<h3><span class="koboSpan" id="kobo.451.1">Finishing the body and the document</span></h3>
<p><span class="koboSpan" id="kobo.452.1">Of course, we have to close the body</span><a id="_idIndexMarker213"/><span class="koboSpan" id="kobo.453.1"> of the document using </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.455.1">
&lt;/body&gt;</span></pre> <p><span class="koboSpan" id="kobo.456.1">Then, we have to close the document</span><a id="_idIndexMarker214"/><span class="koboSpan" id="kobo.457.1"> itself using </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.459.1">
&lt;/html&gt;</span></pre> <p><span class="koboSpan" id="kobo.460.1">With those tasks complete, we now</span><a id="_idIndexMarker215"/><span class="koboSpan" id="kobo.461.1"> have a complete </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">HTML page.</span></span></p>
<p><span class="koboSpan" id="kobo.463.1">Remember when I said we’d skip the style sheet earlier? </span><span class="koboSpan" id="kobo.463.2">Well, it’s time to look at </span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">that now!</span></span></p>
<h3><span class="koboSpan" id="kobo.465.1">Adding some style</span></h3>
<p><span class="koboSpan" id="kobo.466.1">Earlier, you saw</span><a id="_idIndexMarker216"/><span class="koboSpan" id="kobo.467.1"> that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">styles.css</span></strong><span class="koboSpan" id="kobo.469.1"> file is imported in </span><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.471.1">. </span><span class="koboSpan" id="kobo.471.2">The content in this file isn’t very voluminous, but it demonstrates a few new </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">CSS concepts:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.473.1">
input:invalid {
  outline: 2px solid red;
}</span></pre> <p><span class="koboSpan" id="kobo.474.1">The first new concept is </span><strong class="bold"><span class="koboSpan" id="kobo.475.1">pseudo-classes</span></strong><span class="koboSpan" id="kobo.476.1">. </span><span class="koboSpan" id="kobo.476.2">A CSS pseudo-class is a keyword</span><a id="_idIndexMarker217"/><span class="koboSpan" id="kobo.477.1"> added to a selector that specifies a special state of the selected element(s). </span><span class="koboSpan" id="kobo.477.2">For example, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">&lt;a&gt;</span></strong><span class="koboSpan" id="kobo.479.1"> tag can be displayed in three different states – when the user has never clicked it (unvisited), when the user has clicked it before (visited), and when the user’s mouse pointer hovers over it. </span><span class="koboSpan" id="kobo.479.2">If you want a link to be red when unvisited, blue when visited, and green when hovered over, you can create a CSS class with the names </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">a:visited</span></strong><span class="koboSpan" id="kobo.481.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">a:unvisited</span></strong><span class="koboSpan" id="kobo.483.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">a:hover</span></strong><span class="koboSpan" id="kobo.485.1">, setting the appropriate </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">color</span></strong><span class="koboSpan" id="kobo.487.1"> property value on each. </span><span class="koboSpan" id="kobo.487.2">The colon and the word after it are </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">the pseudo-class.</span></span></p>
<p><span class="koboSpan" id="kobo.489.1">In this case, I want to ensure that the email field specifically will have a red border when an invalid email address is entered. </span><span class="koboSpan" id="kobo.489.2">Fortunately, there is a pseudo-class on the input selector for that, namely </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">:invalid</span></strong><span class="koboSpan" id="kobo.491.1">. </span><span class="koboSpan" id="kobo.491.2">So, </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">input:invalid</span></strong><span class="koboSpan" id="kobo.493.1"> is the selector to use to target an invalid </span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">input field.</span></span></p>
<p><span class="koboSpan" id="kobo.495.1">The second new concept is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">outline</span></strong><span class="koboSpan" id="kobo.497.1"> property. </span><span class="koboSpan" id="kobo.497.2">This property allows us to draw a border around an element (it’s one of two ways to do this, and you’ll see the other later). </span><span class="koboSpan" id="kobo.497.3">This property also actually</span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.498.1"> demonstrates a third bonus concept – </span><strong class="bold"><span class="koboSpan" id="kobo.499.1">shorthand properties</span></strong><span class="koboSpan" id="kobo.500.1">. </span><span class="koboSpan" id="kobo.500.2">Let me explain that </span><span class="No-Break"><span class="koboSpan" id="kobo.501.1">a bit.</span></span></p>
<p><span class="koboSpan" id="kobo.502.1">You see, there are three things defined by </span><span class="No-Break"><span class="koboSpan" id="kobo.503.1">this property:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.504.1">The width of the border to draw around the field (2 pixels – </span><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">px</span></strong><span class="koboSpan" id="kobo.506.1"> is short for pixels, which are the dots that make up the picture on </span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">your monitor)</span></span></li>
<li><span class="koboSpan" id="kobo.508.1">The style of the border (</span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">solid</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.510.1"> here)</span></span></li>
<li><span class="koboSpan" id="kobo.511.1">The color of </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">the border</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.513.1">These could each be defined by independent properties too – </span><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">outline-width</span></strong><span class="koboSpan" id="kobo.515.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">outline-style</span></strong><span class="koboSpan" id="kobo.517.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">outline-color</span></strong><span class="koboSpan" id="kobo.519.1">. </span><span class="koboSpan" id="kobo.519.2">However, just using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">outline</span></strong><span class="koboSpan" id="kobo.521.1"> shorthand property allows us to set all three </span><span class="No-Break"><span class="koboSpan" id="kobo.522.1">at once.</span></span></p>
<p><span class="koboSpan" id="kobo.523.1">Several groups of related properties have shorthand properties like this in CSS, and you’ll see some more of them later too. </span><span class="koboSpan" id="kobo.523.2">However, to not keep you in suspense, some of the others</span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.524.1"> include </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">margin</span></strong><span class="koboSpan" id="kobo.526.1"> (shorthand for </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">margin-top</span></strong><span class="koboSpan" id="kobo.528.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">margin-bottom</span></strong><span class="koboSpan" id="kobo.530.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">margin-left</span></strong><span class="koboSpan" id="kobo.532.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">margin-right</span></strong><span class="koboSpan" id="kobo.534.1">), </span><strong class="source-inline"><span class="koboSpan" id="kobo.535.1">padding</span></strong><span class="koboSpan" id="kobo.536.1"> (shorthand for </span><strong class="source-inline"><span class="koboSpan" id="kobo.537.1">padding-top</span></strong><span class="koboSpan" id="kobo.538.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.539.1">padding-bottom</span></strong><span class="koboSpan" id="kobo.540.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.541.1">padding-left</span></strong><span class="koboSpan" id="kobo.542.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.543.1">padding-right</span></strong><span class="koboSpan" id="kobo.544.1">), </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">background</span></strong><span class="koboSpan" id="kobo.546.1"> (shorthand for </span><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">background-color</span></strong><span class="koboSpan" id="kobo.548.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">background-image</span></strong><span class="koboSpan" id="kobo.550.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">background-repeat</span></strong><span class="koboSpan" id="kobo.552.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">background-attachment</span></strong><span class="koboSpan" id="kobo.554.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">background-position</span></strong><span class="koboSpan" id="kobo.556.1">), and </span><strong class="source-inline"><span class="koboSpan" id="kobo.557.1">font</span></strong><span class="koboSpan" id="kobo.558.1"> (shorthand for </span><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">font-style</span></strong><span class="koboSpan" id="kobo.560.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">font-weight</span></strong><span class="koboSpan" id="kobo.562.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">font-variant</span></strong><span class="koboSpan" id="kobo.564.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.565.1">font-size</span></strong><span class="koboSpan" id="kobo.566.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">line-height</span></strong><span class="koboSpan" id="kobo.568.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.569.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">font-family</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.572.1">Now that we have a frontend (a client), let’s build a backend (a server) for it to talk to. </span><span class="koboSpan" id="kobo.572.2">This will require us to write some code that will accept the data the user enters on the form and return a response of some sort for the browser to display to them. </span><span class="koboSpan" id="kobo.572.3">Let’s get </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">to work!</span></span></p>
<h1 id="_idParaDest-91"><a id="_idTextAnchor091"/><span class="koboSpan" id="kobo.574.1">Building an interactive web app – the backend</span></h1>
<p><span class="koboSpan" id="kobo.575.1">To build the server for this little </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.576.1">project, we’ll again use Node. </span><span class="koboSpan" id="kobo.576.2">However, rather than write a server from scratch as we did in the last chapter, this time we’ll use possibly the most popular package available for Node to take care of a lot of the basic details for us – </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">Express.</span></span></p>
<h2 id="_idParaDest-92"><a id="_idTextAnchor092"/><span class="koboSpan" id="kobo.578.1">Introducing Express</span></h2>
<p><span class="koboSpan" id="kobo.579.1">When you write a Node</span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.580.1"> server from scratch, you must take care of all of the details yourself. </span><span class="koboSpan" id="kobo.580.2">That means that, for example, if you want to have a server respond to multiple different URLs, in your handler function you’ll need to examine the URL that was requested and, based on it, branch to a piece of code to return the appropriate response. </span><span class="koboSpan" id="kobo.580.3">It doesn’t take too long for an application to become large enough that this becomes a </span><span class="No-Break"><span class="koboSpan" id="kobo.581.1">real headache.</span></span></p>
<p><span class="koboSpan" id="kobo.582.1">So, very often, we’ll use an add-on package for Node that handles a lot of that for us – one such package is called </span><strong class="bold"><span class="koboSpan" id="kobo.583.1">Express</span></strong><span class="koboSpan" id="kobo.584.1">. </span><span class="koboSpan" id="kobo.584.2">Express is actually a very</span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.585.1"> powerful module that can handle all sorts of things for us, including security, file uploads and downloads, the logging of operations, and templating (the ability to have HTML and other response types built in a generic way that can then have data plugged into an outline, or template, to return a </span><span class="No-Break"><span class="koboSpan" id="kobo.586.1">full response).</span></span></p>
<p><span class="koboSpan" id="kobo.587.1">Express is also the first </span><strong class="bold"><span class="koboSpan" id="kobo.588.1">framework</span></strong><span class="koboSpan" id="kobo.589.1"> you’re meeting. </span><span class="koboSpan" id="kobo.589.2">A framework</span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.590.1"> is a pre-written code library that provides a foundation to build your own code. </span><span class="koboSpan" id="kobo.590.2">It offers a defined structure to your code, so you don’t have to guess and make it up yourself, and it pushes you to use best practices. </span><span class="koboSpan" id="kobo.590.3">In essence, they are meant to make it easier to develop software and allow you to write less code yourself, which as a general rule is a good thing, since it means fewer opportunities for you to </span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">make mistakes.</span></span></p>
<p><span class="koboSpan" id="kobo.592.1">To be more specific, Express</span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.593.1"> is what’s called an “unopinionated” framework. </span><span class="koboSpan" id="kobo.593.2">Whereas opinionated frameworks</span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.594.1"> ensure that there’s really only one “right” way to do things, and you’d better do it that way or you’ll find yourself having a challenging time, unopinionated frameworks don’t force as much on you. </span><span class="koboSpan" id="kobo.594.2">Express, being unopinionated, allows you much more flexibility and, while saving you a lot of effort, still allows you to do things your way for the most part. </span><span class="koboSpan" id="kobo.594.3">The debate about whether opinionated or unopinionated frameworks are better is an age-old one that I’m not even going to attempt to </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">answer here!</span></span></p>
<p><span class="koboSpan" id="kobo.596.1">To get started with Express, we have to add it as a dependency of our project, so let’s do </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">that now.</span></span></p>
<h2 id="_idParaDest-93"><a id="_idTextAnchor093"/><span class="koboSpan" id="kobo.598.1">Adding dependencies</span></h2>
<p><span class="koboSpan" id="kobo.599.1">Remember the </span><strong class="source-inline"><span class="koboSpan" id="kobo.600.1">package.json</span></strong><span class="koboSpan" id="kobo.601.1"> file that was created</span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.602.1"> when you ran the </span><strong class="source-inline"><span class="koboSpan" id="kobo.603.1">npm init</span></strong><span class="koboSpan" id="kobo.604.1"> command? </span><span class="koboSpan" id="kobo.604.2">I said that it provides Node and NPM metadata about our project, but I also said we’d largely ignore it. </span><span class="koboSpan" id="kobo.604.3">Well, we </span><em class="italic"><span class="koboSpan" id="kobo.605.1">have</span></em><span class="koboSpan" id="kobo.606.1"> to look at </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">it now!</span></span></p>
<p><span class="koboSpan" id="kobo.608.1">Here’s what I got from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.609.1">npm init</span></strong><span class="koboSpan" id="kobo.610.1"> command (remember, yours could look slightly different depending on the values you may have entered, but it should look </span><em class="italic"><span class="koboSpan" id="kobo.611.1">substantially</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.612.1">the same):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.613.1">
{
  "name": "form-example",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "4.18.2"
  }
}</span></pre> <p><span class="koboSpan" id="kobo.614.1">Most of this is still ignorable, but one thing we now have to care about is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.615.1">dependencies</span></strong><span class="koboSpan" id="kobo.616.1"> element. </span><span class="koboSpan" id="kobo.616.2">This tells Node and NPM what packages our project depends on. </span><span class="koboSpan" id="kobo.616.3">Yours will be empty at this point, but I’ve already added the Express dependency in mine, and I’ve also specified exactly which version I want. </span><span class="koboSpan" id="kobo.616.4">If you</span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.617.1"> head over to </span><a href="https://www.npmjs.com"><span class="koboSpan" id="kobo.618.1">https://www.npmjs.com</span></a><span class="koboSpan" id="kobo.619.1">, you can explore all the different packages available. </span><span class="koboSpan" id="kobo.619.2">NPM uses this site to download the dependencies you add to your </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.620.1">package.json</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.621.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.622.1">But how do you actually </span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.623.1">add a dependency into </span><strong class="source-inline"><span class="koboSpan" id="kobo.624.1">package.json</span></strong><span class="koboSpan" id="kobo.625.1">? </span><span class="koboSpan" id="kobo.625.2">Well, given that this is just a text file, you could just go and edit it by hand. </span><span class="koboSpan" id="kobo.625.3">However, there is a better way. </span><span class="koboSpan" id="kobo.625.4">First, execute </span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">this command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.627.1">
npm install -save express@4.18.2</span></pre> <p><span class="koboSpan" id="kobo.628.1">Then, open </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">package.json</span></strong><span class="koboSpan" id="kobo.630.1"> again, and you should now find the same dependency entry as shown in that command. </span><span class="koboSpan" id="kobo.630.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">npm install</span></strong><span class="koboSpan" id="kobo.632.1"> command tells NPM to install the package you name in your project (it gets added </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">node_modules</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.636.1">Here, I’ve specified the version as </span><strong class="source-inline"><span class="koboSpan" id="kobo.637.1">@4.18.2</span></strong><span class="koboSpan" id="kobo.638.1">. </span><span class="koboSpan" id="kobo.638.2">You don’t </span><em class="italic"><span class="koboSpan" id="kobo.639.1">have</span></em><span class="koboSpan" id="kobo.640.1"> to specify the version like this, and in fact, you usually will not want to. </span><span class="koboSpan" id="kobo.640.2">What will happen when you don’t is that NPM will install whatever the latest version of the package is. </span><span class="koboSpan" id="kobo.640.3">I’ve specified the version explicitly here because, with a book, you need to ensure that a reader, months or years after the book was written, will still get the exact right versions that are known to work with the code; otherwise, a newer version might possibly not work with the code as written and described by the text (I’ve learned this lesson the </span><span class="No-Break"><span class="koboSpan" id="kobo.641.1">hard way!)</span></span></p>
<p><span class="koboSpan" id="kobo.642.1">Finally, in order to update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.643.1">package.json</span></strong><span class="koboSpan" id="kobo.644.1"> file, we need to specify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.645.1">–save</span></strong><span class="koboSpan" id="kobo.646.1"> option. </span><span class="koboSpan" id="kobo.646.2">Not doing so will cause NPM to install Express in </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">node_modules</span></strong><span class="koboSpan" id="kobo.648.1"> but not add it to the list of dependencies in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">package.json</span></strong><span class="koboSpan" id="kobo.650.1"> file. </span><span class="koboSpan" id="kobo.650.2">When you’re just experimenting with a new package and don’t yet know whether you’ll continue to use it in your project, not specifying </span><strong class="source-inline"><span class="koboSpan" id="kobo.651.1">–save</span></strong><span class="koboSpan" id="kobo.652.1"> is good because nothing is permanently altered that way. </span><span class="koboSpan" id="kobo.652.2">But since we know we want Express to stick around, we </span><em class="italic"><span class="koboSpan" id="kobo.653.1">do</span></em><span class="koboSpan" id="kobo.654.1"> want to update the file, and the reason you want the file to be updated is that you can give another developer your </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">package.json</span></strong><span class="koboSpan" id="kobo.656.1"> file, and all they have to do is execute </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">this command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.658.1">
npm install</span></pre> <p><span class="koboSpan" id="kobo.659.1">NPM will then look in </span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">package.json</span></strong><span class="koboSpan" id="kobo.661.1"> and install all the dependencies listed. </span><span class="koboSpan" id="kobo.661.2">That way, the developer is ready to work on your code and will have all the same dependencies </span><span class="No-Break"><span class="koboSpan" id="kobo.662.1">as you.</span></span></p>
<p><span class="koboSpan" id="kobo.663.1">It’s something you wouldn’t know</span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.664.1"> unless you’ve experienced it, but setting up a new developer’s development environment hasn’t always been that easy. </span><span class="koboSpan" id="kobo.664.2">In the past, they would have to go to the internet and manually download all the dependencies – which weren’t always on one site – and that’s assuming they even had a list of what was needed. </span><span class="koboSpan" id="kobo.664.3">NPM, through its </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">package.json</span></strong><span class="koboSpan" id="kobo.666.1"> file, solves all </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">those problems!</span></span></p>
<p><span class="koboSpan" id="kobo.668.1">The last thing I want to mention is that if you look in your project directory, you’ll find a new directory has been created, called </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">node_modules</span></strong><span class="koboSpan" id="kobo.670.1">. </span><span class="koboSpan" id="kobo.670.2">This is a directory that NPM creates to keep all the packages it downloads in. </span><span class="koboSpan" id="kobo.670.3">For the most part, you don’t need to look at this directory or care what’s in it; just let Node and NPM do their thing with it. </span><span class="koboSpan" id="kobo.670.4">You should also be aware that it can get rather large at times because if a package itself depends on another package, then that package will be downloaded, and that sort of chain of dependencies can keep going for a while. </span><span class="koboSpan" id="kobo.670.5">So, </span><strong class="source-inline"><span class="koboSpan" id="kobo.671.1">node_modules</span></strong><span class="koboSpan" id="kobo.672.1"> will be stuffed with packages you don’t recognize because they all have dependencies. </span><span class="koboSpan" id="kobo.672.2">That’s how it’s meant to work. </span><span class="koboSpan" id="kobo.672.3">If you ever delete </span><strong class="source-inline"><span class="koboSpan" id="kobo.673.1">node_modules</span></strong><span class="koboSpan" id="kobo.674.1">, that’s fine; you can just run </span><strong class="source-inline"><span class="koboSpan" id="kobo.675.1">npm install</span></strong><span class="koboSpan" id="kobo.676.1"> again and it will </span><span class="No-Break"><span class="koboSpan" id="kobo.677.1">be recreated.</span></span></p>
<p><span class="koboSpan" id="kobo.678.1">Now that we have the dependencies added that we need, let’s address one issue that you may not have even realized in the code for the previous chapter – that of developer efficiency – and in the process, you’ll see</span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.679.1"> a new capability that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">package.json</span></strong><span class="koboSpan" id="kobo.681.1"> file provides for – </span><span class="No-Break"><span class="koboSpan" id="kobo.682.1">scripts.</span></span></p>
<h2 id="_idParaDest-94"><a id="_idTextAnchor094"/><span class="koboSpan" id="kobo.683.1">Adding scripts</span></h2>
<p><span class="koboSpan" id="kobo.684.1">In the past, starting our server</span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.685.1"> would be done with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.686.1">node index.js</span></strong><span class="koboSpan" id="kobo.687.1"> command. </span><span class="koboSpan" id="kobo.687.2">However, when another developer wants to work on our project, they may not know that. </span><span class="koboSpan" id="kobo.687.3">With only a single JS file, it’s easy enough to guess, but imagine if we had hundreds of files, which definitely can be the case in larger projects – how would you know where </span><span class="No-Break"><span class="koboSpan" id="kobo.688.1">to start?</span></span></p>
<p><span class="koboSpan" id="kobo.689.1">Of course, you might guess it’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.690.1">index.js</span></strong><span class="koboSpan" id="kobo.691.1">, since that is the default value that NPM will set for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.692.1">main</span></strong><span class="koboSpan" id="kobo.693.1"> property in </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">package.json</span></strong><span class="koboSpan" id="kobo.695.1"> when you execute </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">npm init</span></strong><span class="koboSpan" id="kobo.697.1"> in a project, but a) there might not be an </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">index.js</span></strong><span class="koboSpan" id="kobo.699.1"> file at all, and b) that may not be the right answer even if it </span><em class="italic"><span class="koboSpan" id="kobo.700.1">is</span></em><span class="koboSpan" id="kobo.701.1"> there, as the developer of the project may have made a different choice. </span><span class="koboSpan" id="kobo.701.2">We can tell the developer which file it is of course, but shouldn’t there be a better way to communicate that information without explicitly having to </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">tell someone?</span></span></p>
<p><span class="koboSpan" id="kobo.703.1">There is, and it comes about due to another available element in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.704.1">package.json</span></strong><span class="koboSpan" id="kobo.705.1"> file – </span><strong class="source-inline"><span class="koboSpan" id="kobo.706.1">scripts</span></strong><span class="koboSpan" id="kobo.707.1">. </span><span class="koboSpan" id="kobo.707.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">scripts</span></strong><span class="koboSpan" id="kobo.709.1"> element gives us a way to, in a sense, create custom NPM commands. </span><span class="koboSpan" id="kobo.709.2">Anything that appears in that element can be run with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">npm run XXX</span></strong><span class="koboSpan" id="kobo.711.1"> command, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">XXX</span></strong><span class="koboSpan" id="kobo.713.1"> is a key in </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">scripts</span></strong><span class="koboSpan" id="kobo.715.1">. </span><span class="koboSpan" id="kobo.715.2">NPM, by default, gives us a </span><strong class="source-inline"><span class="koboSpan" id="kobo.716.1">test</span></strong><span class="koboSpan" id="kobo.717.1"> command, so you can run that with </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1">npm </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.719.1">run tests</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.720.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.721.1">We can use this capability to provide a way to start </span><span class="No-Break"><span class="koboSpan" id="kobo.722.1">the server:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.723.1">
"dev": "node index.js"</span></pre> <p><span class="koboSpan" id="kobo.724.1">This way, we can execute </span><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">npm run dev</span></strong><span class="koboSpan" id="kobo.726.1"> to start the server, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.727.1">scripts</span></strong><span class="koboSpan" id="kobo.728.1"> entry knows which file to run, so the developer doesn’t need to. </span><span class="koboSpan" id="kobo.728.2">This is a common command to include, so many developers will know it automatically. </span><span class="koboSpan" id="kobo.728.3">But even if they don’t, they can simply look in </span><strong class="source-inline"><span class="koboSpan" id="kobo.729.1">package.json</span></strong><span class="koboSpan" id="kobo.730.1"> and see the available commands. </span><span class="koboSpan" id="kobo.730.2">It is, in a sense, a way to document the proper start up command for </span><span class="No-Break"><span class="koboSpan" id="kobo.731.1">our project.</span></span></p>
<p><span class="koboSpan" id="kobo.732.1">Now that we have Express added to our project, and a start-up script to run it with, let’s use it to write our </span><span class="No-Break"><span class="koboSpan" id="kobo.733.1">server code.</span></span></p>
<h2 id="_idParaDest-95"><a id="_idTextAnchor095"/><span class="koboSpan" id="kobo.734.1">Writing the server code</span></h2>
<p><span class="koboSpan" id="kobo.735.1">We start by creating</span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.736.1"> an </span><strong class="source-inline"><span class="koboSpan" id="kobo.737.1">index.js</span></strong><span class="koboSpan" id="kobo.738.1"> file in the project directory. </span><span class="koboSpan" id="kobo.738.2">This will again be the server code from the </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">previous chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.740.1">Any time you add a package to a Node project, you’ll almost certainly need to import it into your code, and that is indeed the first thing we have </span><span class="No-Break"><span class="koboSpan" id="kobo.741.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.742.1">index.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.744.1">
const express = require("express");</span></pre> <p><span class="koboSpan" id="kobo.745.1">This gives us an object named </span><strong class="source-inline"><span class="koboSpan" id="kobo.746.1">express</span></strong><span class="koboSpan" id="kobo.747.1">, from which we can use several properties and methods. </span><span class="koboSpan" id="kobo.747.2">However, the object itself is a function in this case – in other words, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.748.1">express</span></strong><span class="koboSpan" id="kobo.749.1"> variable points to a function, so we can execute it as </span><span class="No-Break"><span class="koboSpan" id="kobo.750.1">a function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.751.1">
const app = express();</span></pre> <p><span class="koboSpan" id="kobo.752.1">The result of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.753.1">express()</span></strong><span class="koboSpan" id="kobo.754.1"> function is that a server object is returned to us. </span><span class="koboSpan" id="kobo.754.2">Express handles all the setup and creation of that server. </span><span class="koboSpan" id="kobo.754.3">However, because the object is returned to us, Express gives us the ability to configure the server to meet our specific needs, and the first thing we need to do is tell it that we want to be able to handle forms being </span><span class="No-Break"><span class="koboSpan" id="kobo.755.1">sent in:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.756.1">
app.use(express.urlencoded());</span></pre> <p><span class="koboSpan" id="kobo.757.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">app.use()</span></strong><span class="koboSpan" id="kobo.759.1"> function allows us to configure Express </span><strong class="bold"><span class="koboSpan" id="kobo.760.1">middleware</span></strong><span class="koboSpan" id="kobo.761.1">. </span><span class="koboSpan" id="kobo.761.2">That’s really just a fancy way of saying that we can tell Express to execute one or more functions for every request that comes in. </span><span class="koboSpan" id="kobo.761.3">This comes in handy for things such as logging the incoming request to make debugging easier, implementing some sort of security, or, in this case, telling it to handle </span><span class="No-Break"><span class="koboSpan" id="kobo.762.1">form data.</span></span></p>
<h2 id="_idParaDest-96"><a id="_idTextAnchor096"/><span class="koboSpan" id="kobo.763.1">Adding Express middleware</span></h2>
<p><span class="koboSpan" id="kobo.764.1">When a form is sent</span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.765.1"> to a server via </span><strong class="source-inline"><span class="koboSpan" id="kobo.766.1">POST</span></strong><span class="koboSpan" id="kobo.767.1">, it gets encoded</span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.768.1"> in a unique way in the body of the request, such as </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.770.1">
title=Mr&amp;first_name=James&amp;last_name=Kirk&amp;age=54&amp;email=jame.t.kirk%40starfleet.com</span></pre> <p><span class="koboSpan" id="kobo.771.1">For the server to be able to make sense of that, it must know how to parse it and what middleware function to use to do so. </span><span class="koboSpan" id="kobo.771.2">Express provides several prebuilt middleware functions, one of which is given to us if we call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.772.1">express.urlencoded()</span></strong><span class="koboSpan" id="kobo.773.1"> function. </span><span class="koboSpan" id="kobo.773.2">It returns the function, which we then add to Express as middleware by passing it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.774.1">app.use()</span></strong><span class="koboSpan" id="kobo.775.1"> function. </span><span class="koboSpan" id="kobo.775.2">Without this, Express wouldn’t be able to handle the form data that our client code will send </span><span class="No-Break"><span class="koboSpan" id="kobo.776.1">to it.</span></span></p>
<p><span class="koboSpan" id="kobo.777.1">You can add zero, one, or more middleware functions via calls to </span><strong class="source-inline"><span class="koboSpan" id="kobo.778.1">app.use()</span></strong><span class="koboSpan" id="kobo.779.1">. </span><span class="koboSpan" id="kobo.779.2">Each time you call it, you give it a reference to a function, whether it’s one you create yourself, one that Express supplies, or one from a third-party source, and it gets added to the chain of middleware</span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.780.1"> functions that Express</span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.781.1"> will execute for each request that comes </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">into it.</span></span></p>
<h3><span class="koboSpan" id="kobo.783.1">Creating Express routes with JS arrow functions</span></h3>
<p><span class="koboSpan" id="kobo.784.1">Perhaps the</span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.785.1"> key concept</span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.786.1"> of Express is the idea of </span><strong class="bold"><span class="koboSpan" id="kobo.787.1">routes</span></strong><span class="koboSpan" id="kobo.788.1">. </span><span class="koboSpan" id="kobo.788.2">Routes are really</span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.789.1"> just URLs. </span><span class="koboSpan" id="kobo.789.2">Defining a route in Express means defining the function to execute for a given URL. </span><span class="koboSpan" id="kobo.789.3">For our little app, we need two routes, beginning with the </span><span class="No-Break"><span class="koboSpan" id="kobo.790.1">default route:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.791.1">
app.get("/", (inRequest, inResponse) =&gt; {
  inResponse.sendFile(`${__dirname}/index.html`);
});</span></pre> <p><span class="koboSpan" id="kobo.792.1">This is the default route because it’s what will execute when the URL has nothing after the domain. </span><span class="koboSpan" id="kobo.792.2">In other words, if you access </span><a href="http://localhost"><span class="koboSpan" id="kobo.793.1">http://localhost</span></a><span class="koboSpan" id="kobo.794.1"> with the server running, this is the route that will be hit because there’s nothing after the domain, which is </span><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">localhost</span></strong><span class="koboSpan" id="kobo.796.1"> in this case. </span><span class="koboSpan" id="kobo.796.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.797.1">"/"</span></strong><span class="koboSpan" id="kobo.798.1"> argument equates to “nothing after </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">the domain.”</span></span></p>
<p><span class="koboSpan" id="kobo.800.1">Calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.801.1">app.get()</span></strong><span class="koboSpan" id="kobo.802.1"> function registers a route with Express that will be accessed using the HTTP </span><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">GET</span></strong><span class="koboSpan" id="kobo.804.1"> method, which you’ll recall is what the browser uses by default, so that’s what we need here. </span><span class="koboSpan" id="kobo.804.2">The second argument passed</span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.805.1"> to this function is what we call a </span><strong class="bold"><span class="koboSpan" id="kobo.806.1">handler function</span></strong><span class="koboSpan" id="kobo.807.1">, which is just a plain old JS function to execute when a request comes in via </span><span class="No-Break"><span class="koboSpan" id="kobo.808.1">this route.</span></span></p>
<p><span class="koboSpan" id="kobo.809.1">However, here, I’m using a different form of functions available</span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.810.1"> to us in JS that you haven’t seen before – </span><strong class="bold"><span class="koboSpan" id="kobo.811.1">arrow functions</span></strong><span class="koboSpan" id="kobo.812.1">. </span><span class="koboSpan" id="kobo.812.2">If we “pull out” the arrow function in that </span><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">app.get()</span></strong><span class="koboSpan" id="kobo.814.1"> call so that we can look at it in isolation, it would be just this snippet of  </span><span class="No-Break"><span class="koboSpan" id="kobo.815.1">code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.816.1">
(inRequest, inResponse) =&gt; {
  inResponse.sendFile(`${__dirname}/index.html`);
}</span></pre> <p><span class="koboSpan" id="kobo.817.1">That is equivalent to </span><span class="No-Break"><span class="koboSpan" id="kobo.818.1">this code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.819.1">
function(inRequest, inResponse) {
  inResponse.sendFile(`${__dirname}/index.html`);
}</span></pre> <p><span class="koboSpan" id="kobo.820.1">So, we could write that </span><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">app.get()</span></strong><span class="koboSpan" id="kobo.822.1"> call like </span><span class="No-Break"><span class="koboSpan" id="kobo.823.1">this instead:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.824.1">
app.get("/", function(inRequest, inResponse) {
  inResponse.sendFile(`${__dirname}/index.html`);
});</span></pre> <p><span class="koboSpan" id="kobo.825.1">With arrow </span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.826.1">functions, you’re essentially</span><a id="_idIndexMarker243"/><span class="koboSpan" id="kobo.827.1"> trading the </span><strong class="source-inline"><span class="koboSpan" id="kobo.828.1">function</span></strong><span class="koboSpan" id="kobo.829.1"> keyword for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.830.1">=&gt;</span></strong><span class="koboSpan" id="kobo.831.1"> characters. </span><span class="koboSpan" id="kobo.831.2">In most cases, these two are absolutely equivalent, but there are some subtle differences that can become large in more advanced situations. </span><span class="koboSpan" id="kobo.831.3">I’m going to skip that for now because there are some other concepts you would need to be introduced to before you could understand the explanation. </span><span class="koboSpan" id="kobo.831.4">At this point, I’ll just say that, at the time of writing, developers tend to use arrow functions more because they are shorter (although only by a character or two) and more aesthetically pleasing. </span><span class="koboSpan" id="kobo.831.5">Your opinion may be different, but at the end of the day, you can generally just choose whichever you prefer (at least until you hit the situations where it matters what you choose, which I’ll touch on in later chapters). </span><span class="koboSpan" id="kobo.831.6">Arrow functions can be written in some other forms as well depending on developer needs, but I’ll explain those when we get to them in </span><span class="No-Break"><span class="koboSpan" id="kobo.832.1">other code.</span></span></p>
<p><span class="koboSpan" id="kobo.833.1">Arrow function syntax aside, the function performs a simple task – sending a file back to the browser. </span><span class="koboSpan" id="kobo.833.2">The file that is sent back is </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1">index.html</span></strong><span class="koboSpan" id="kobo.835.1">, sent by calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.836.1">sendFile()</span></strong><span class="koboSpan" id="kobo.837.1"> method that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.838.1">inResponse</span></strong><span class="koboSpan" id="kobo.839.1"> argument provides to us. </span><strong class="source-inline"><span class="koboSpan" id="kobo.840.1">inRequest</span></strong><span class="koboSpan" id="kobo.841.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.842.1">inResponse</span></strong><span class="koboSpan" id="kobo.843.1"> are objects that Express and Node create and pass to the function that we can use to construct a response. </span><span class="koboSpan" id="kobo.843.2">They provide many methods and properties to examine the incoming request, get data from it, and produce a response, </span><strong class="source-inline"><span class="koboSpan" id="kobo.844.1">sendFile()</span></strong><span class="koboSpan" id="kobo.845.1"> being one </span><span class="No-Break"><span class="koboSpan" id="kobo.846.1">of them.</span></span></p>
<p><span class="koboSpan" id="kobo.847.1">However, let’s talk about what is passed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.848.1">sendFile()</span></strong><span class="koboSpan" id="kobo.849.1"> a bit. </span><span class="koboSpan" id="kobo.849.2">In JS, the backtick character (</span><strong class="source-inline"><span class="koboSpan" id="kobo.850.1">`</span></strong><span class="koboSpan" id="kobo.851.1">) is used to define</span><a id="_idIndexMarker244"/><span class="koboSpan" id="kobo.852.1"> a special kind of string, called a </span><strong class="bold"><span class="koboSpan" id="kobo.853.1">template literal</span></strong><span class="koboSpan" id="kobo.854.1"> string. </span><span class="koboSpan" id="kobo.854.2">These are essentially strings on steroids! </span><span class="koboSpan" id="kobo.854.3">They allow a string to go onto multiple lines in your code (something you can’t do with regular strings), and they also support expressions. </span><span class="koboSpan" id="kobo.854.4">An expression in a template literal is </span><strong class="source-inline"><span class="koboSpan" id="kobo.855.1">${}</span></strong><span class="koboSpan" id="kobo.856.1">, with something between the braces. </span><span class="koboSpan" id="kobo.856.2">And what is the something? </span><span class="koboSpan" id="kobo.856.3">Well, it can be any valid JS! </span><span class="koboSpan" id="kobo.856.4">What happens is that the JS engine, when it encounters such a template literal string, will replace each of those expressions, resulting in the JS executing </span><span class="No-Break"><span class="koboSpan" id="kobo.857.1">within it.</span></span></p>
<p><span class="koboSpan" id="kobo.858.1">Here, the JS to execute</span><a id="_idIndexMarker245"/><span class="koboSpan" id="kobo.859.1"> is actually just the name of a variable</span><a id="_idIndexMarker246"/><span class="koboSpan" id="kobo.860.1"> that Express provides – </span><strong class="source-inline"><span class="koboSpan" id="kobo.861.1">__dirname</span></strong><span class="koboSpan" id="kobo.862.1">. </span><span class="koboSpan" id="kobo.862.2">When JS sees just a variable name like this, it simply inserts the current value of that variable into the string. </span><span class="koboSpan" id="kobo.862.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.863.1">__dirname</span></strong><span class="koboSpan" id="kobo.864.1"> variable contains the full path of the directory that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.865.1">index.js</span></strong><span class="koboSpan" id="kobo.866.1"> file is in at runtime. </span><span class="koboSpan" id="kobo.866.2">When we append </span><strong class="source-inline"><span class="koboSpan" id="kobo.867.1">/index.html</span></strong><span class="koboSpan" id="kobo.868.1"> to it – which is what happens when this template literal is interpreted by JS – we get a full path to that file, which just so happens is what </span><strong class="source-inline"><span class="koboSpan" id="kobo.869.1">sendFile()</span></strong><span class="koboSpan" id="kobo.870.1"> needs to return that file to </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">the browser.</span></span></p>
<p><span class="koboSpan" id="kobo.872.1">We have to add another route specifically for the style sheet file that is imported; otherwise, you’ll find that the styles don’t work because the file can’t </span><span class="No-Break"><span class="koboSpan" id="kobo.873.1">be loaded:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.874.1">
app.get("/styles.css", (inRequest, inResponse) =&gt; {
  inResponse.sendFile(`${__dirname}/styles.css`);
});</span></pre> <p><span class="koboSpan" id="kobo.875.1">In this case, we’re serving a specific file using a specific URL, the one specified in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.876.1">&lt;link&gt;</span></strong><span class="koboSpan" id="kobo.877.1"> tag in </span><strong class="source-inline"><span class="koboSpan" id="kobo.878.1">index.html</span></strong><span class="koboSpan" id="kobo.879.1">. </span><span class="koboSpan" id="kobo.879.2">Remember that our server won’t do anything we don’t specifically program it to do, including responding to the browser’s request for that </span><span class="No-Break"><span class="koboSpan" id="kobo.880.1">stylesheet file.</span></span></p>
<p><span class="koboSpan" id="kobo.881.1">That route will allow us to see the registration page, but we also need a route for the form to be submitted to, so we’ll define </span><span class="No-Break"><span class="koboSpan" id="kobo.882.1">that next:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.883.1">
app.post("/register", (inRequest, inResponse) =&gt; {
  inResponse.send(`
  &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;User Registration - SUCCESS&lt;/title&gt;
      &lt;style&gt;
        th { background-color: #e0e0e0; }
        tr { border: 1px solid #a0a0a0; }
        td { border: 1px solid #a0a0a0; }
      &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;h2&gt;Thank you for registering! </span><span class="koboSpan" id="kobo.883.2">Here is the information we got:&lt;/h2&gt;</span></pre> <p><span class="koboSpan" id="kobo.884.1">This time, remember that we’re going to send the form to the server with the HTTP </span><strong class="source-inline"><span class="koboSpan" id="kobo.885.1">POST</span></strong><span class="koboSpan" id="kobo.886.1"> method, so we have to call </span><strong class="source-inline"><span class="koboSpan" id="kobo.887.1">app.post()</span></strong><span class="koboSpan" id="kobo.888.1"> this time. </span><span class="koboSpan" id="kobo.888.2">The URL will be </span><a href="http://localhost/register"><span class="koboSpan" id="kobo.889.1">http://localhost/register</span></a><span class="koboSpan" id="kobo.890.1"> this time, so the route is </span><strong class="source-inline"><span class="koboSpan" id="kobo.891.1">/register</span></strong><span class="koboSpan" id="kobo.892.1"> (again, relative to the base URL, which in this case is just the </span><span class="No-Break"><span class="koboSpan" id="kobo.893.1">domain name).</span></span></p>
<p><span class="koboSpan" id="kobo.894.1">The handler function we pass along this time returns content directly from this code, not from a separate file, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.895.1">inResponse.send()</span></strong><span class="koboSpan" id="kobo.896.1"> function allows us to do that. </span><span class="koboSpan" id="kobo.896.2">We pass it a string, and that string is returned to the browser. </span><span class="koboSpan" id="kobo.896.3">The string, in this case, is the actual HTML document to return, our registration acknowledgment page. </span><span class="koboSpan" id="kobo.896.4">And here, you can see why being able to spread a template literal string onto multiple lines is nice – imagine if all that HTML was put on a single, lengthy line, which is what we’d have to do with plain </span><span class="No-Break"><span class="koboSpan" id="kobo.897.1">old strings.</span></span></p>
<p><span class="koboSpan" id="kobo.898.1">I would think that, at this</span><a id="_idIndexMarker247"/><span class="koboSpan" id="kobo.899.1"> point, most of that HTML looks</span><a id="_idIndexMarker248"/><span class="koboSpan" id="kobo.900.1"> pretty self-explanatory to you, save for the style classes defined there. </span><span class="koboSpan" id="kobo.900.2">You will know, based on the selectors, that the classes must style some HTML elements called </span><strong class="source-inline"><span class="koboSpan" id="kobo.901.1">th</span></strong><span class="koboSpan" id="kobo.902.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.903.1">tr</span></strong><span class="koboSpan" id="kobo.904.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.905.1">td</span></strong><span class="koboSpan" id="kobo.906.1">, but at this point, you don’t know what they are. </span><span class="koboSpan" id="kobo.906.2">Let’s remedy that situation now by talking about a new HTML concept – </span><span class="No-Break"><span class="koboSpan" id="kobo.907.1">tables.</span></span></p>
<h3><span class="koboSpan" id="kobo.908.1">Introducing tables</span></h3>
<p><span class="koboSpan" id="kobo.909.1">Tables in HTML are a lot like</span><a id="_idIndexMarker249"/><span class="koboSpan" id="kobo.910.1"> spreadsheets – they allow us to organize data in rows and columns. </span><span class="koboSpan" id="kobo.910.2">We begin a table with, unsurprisingly, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.912.1">table&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.913.1"> tag:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.914.1">
&lt;table style="border:4px solid black;"&gt;</span></pre> <p><span class="koboSpan" id="kobo.915.1">By default, a table won’t have</span><a id="_idIndexMarker250"/><span class="koboSpan" id="kobo.916.1"> a border, but I want it to in this case, so I’ve added an inline style for it. </span><span class="koboSpan" id="kobo.916.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.917.1">border</span></strong><span class="koboSpan" id="kobo.918.1"> property is very much like the </span><strong class="source-inline"><span class="koboSpan" id="kobo.919.1">outline</span></strong><span class="koboSpan" id="kobo.920.1"> property you saw earlier. </span><span class="koboSpan" id="kobo.920.2">It’s another of those shorthand properties I previously explained, and in this case, it has the same values as </span><strong class="source-inline"><span class="koboSpan" id="kobo.921.1">outline</span></strong><span class="koboSpan" id="kobo.922.1"> – the width of the border in pixels, the style of it, and </span><span class="No-Break"><span class="koboSpan" id="kobo.923.1">the color.</span></span></p>
<p><span class="koboSpan" id="kobo.924.1">Once we have a table, we can begin filling it with rows of data. </span><span class="koboSpan" id="kobo.924.2">Each</span><a id="_idIndexMarker251"/><span class="koboSpan" id="kobo.925.1"> row is defined with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.926.1">&lt;tr&gt;</span></strong><span class="koboSpan" id="kobo.927.1"> element (short for </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.928.1">Table Row</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.929.1">):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.930.1">
&lt;tr&gt;
  &lt;th&gt;Title&lt;/th&gt;
  &lt;th&gt;First Name&lt;/th&gt;
  &lt;th&gt;Last Name&lt;/th&gt;
  &lt;th&gt;Age&lt;/th&gt;
  &lt;th&gt;Email Address&lt;/th&gt;
&lt;/tr&gt;</span></pre> <p><span class="koboSpan" id="kobo.931.1">Inside of a row, we define one or more columns, and here we have </span><span class="No-Break"><span class="koboSpan" id="kobo.932.1">a choice:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.933.1">We can use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.934.1">&lt;th&gt;</span></strong><span class="koboSpan" id="kobo.935.1"> tag, which stands for </span><strong class="bold"><span class="koboSpan" id="kobo.936.1">Table Header</span></strong><span class="koboSpan" id="kobo.937.1">. </span><span class="koboSpan" id="kobo.937.2">If it’s the first row in the table, and assuming</span><a id="_idIndexMarker252"/><span class="koboSpan" id="kobo.938.1"> we want a header row in the table, then we typically </span><span class="No-Break"><span class="koboSpan" id="kobo.939.1">use </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.940.1">&lt;th&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.941.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.942.1">We could use</span><a id="_idIndexMarker253"/><span class="koboSpan" id="kobo.943.1"> a </span><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.945.1"> tag, which stands for </span><strong class="bold"><span class="koboSpan" id="kobo.946.1">Table Data</span></strong><span class="koboSpan" id="kobo.947.1">. </span><span class="koboSpan" id="kobo.947.2">For all other columns in later rows, it’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.948.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.949.1"> (or, if you don’t want a header row at all, you can just start with </span><strong class="source-inline"><span class="koboSpan" id="kobo.950.1">&lt;td&gt;</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.951.1">right away).</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.952.1">Whether we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.953.1">&lt;th&gt;</span></strong><span class="koboSpan" id="kobo.954.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.955.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.956.1">, we generically call either one </span><span class="No-Break"><span class="koboSpan" id="kobo.957.1">a </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.958.1">cell</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.959.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.960.1">Each </span><strong class="source-inline"><span class="koboSpan" id="kobo.961.1">&lt;th&gt;</span></strong><span class="koboSpan" id="kobo.962.1"> element defines a column, and since this is the header row, the values inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.963.1">&lt;th&gt;</span></strong><span class="koboSpan" id="kobo.964.1"> elements are the header text for each column. </span><span class="koboSpan" id="kobo.964.2">In this case, we’re only going to have a single row after the </span><span class="No-Break"><span class="koboSpan" id="kobo.965.1">header row:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.966.1">
&lt;tr&gt;
  &lt;td&gt;${inRequest.body.title}&lt;/td&gt;
  &lt;td&gt;${inRequest.body.first_name}&lt;/td&gt;
  &lt;td&gt;${inRequest.body.last_name}&lt;/td&gt;
  &lt;td&gt;${inRequest.body.age}&lt;/td&gt;
  &lt;td&gt;${inRequest.body.email}&lt;/td&gt;
&lt;/tr&gt;</span></pre> <p><span class="koboSpan" id="kobo.967.1">Again, </span><strong class="source-inline"><span class="koboSpan" id="kobo.968.1">&lt;tr&gt;</span></strong><span class="koboSpan" id="kobo.969.1"> creates a row, and then for each</span><a id="_idIndexMarker254"/><span class="koboSpan" id="kobo.970.1"> column, we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.971.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.972.1"> element. </span><span class="koboSpan" id="kobo.972.2">Remember that this HTML is being built inside of a template literal string in JS code, so we can use those expressions I mentioned earlier. </span><span class="koboSpan" id="kobo.972.3">For each cell, a property in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.973.1">inRequest</span></strong><span class="koboSpan" id="kobo.974.1"> object is used – </span><strong class="source-inline"><span class="koboSpan" id="kobo.975.1">body</span></strong><span class="koboSpan" id="kobo.976.1">. </span><span class="koboSpan" id="kobo.976.2">This will hold the information sent to the server from the form, so we can then grab each piece of data using properties named after the </span><span class="No-Break"><span class="koboSpan" id="kobo.977.1">form fields.</span></span></p>
<p><span class="koboSpan" id="kobo.978.1">Then, we just have to close </span><span class="No-Break"><span class="koboSpan" id="kobo.979.1">the table:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.980.1">
&lt;/table&gt;</span></pre> <p><span class="koboSpan" id="kobo.981.1">The result of this is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.982.1">Figure 3</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.983.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.984.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer030">
<span class="koboSpan" id="kobo.985.1"><img alt="Figure 3.4: The registration acknowledgment screen, using an HTML table" src="image/B18315_03_4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.986.1">Figure 3.4: The registration acknowledgment screen, using an HTML table</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.987.1">A warning about table usage</span></p>
<p class="callout"><span class="koboSpan" id="kobo.988.1">Tables are often used</span><a id="_idIndexMarker255"/><span class="koboSpan" id="kobo.989.1"> in HTML, and they are sometimes even abused because tables can be used to lay out your pages if you want. </span><span class="koboSpan" id="kobo.989.2">The content inside a </span><strong class="source-inline"><span class="koboSpan" id="kobo.990.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.991.1"> element can be anything, even more HTML, so it’s possible to build tables nested inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.992.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.993.1"> elements with all sorts of complex HTML and use the table structure to define the structure of the page. </span><span class="koboSpan" id="kobo.993.2">However, this practice is frowned upon for several reasons, including performance, the complexity of the markup, and a more philosophical “it’s just not what tables are meant for” arguments. </span><span class="koboSpan" id="kobo.993.3">There are preferable ways to do layout in CSS, some of which wind up looking an awful lot like tables anyway but with more flexibility. </span><span class="koboSpan" id="kobo.993.4">I only mention this so that you’re aware – tables shouldn’t be thought of as being used for layout, even though they can be (and for many years before CSS evolved</span><a id="_idIndexMarker256"/><span class="koboSpan" id="kobo.994.1"> into what it is today, it was extremely common to </span><span class="No-Break"><span class="koboSpan" id="kobo.995.1">do so).</span></span></p>
<p><span class="koboSpan" id="kobo.996.1">Now, you have the context to understand</span><a id="_idIndexMarker257"/><span class="koboSpan" id="kobo.997.1"> the CSS classes applied to </span><strong class="source-inline"><span class="koboSpan" id="kobo.998.1">tr</span></strong><span class="koboSpan" id="kobo.999.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1000.1">th</span></strong><span class="koboSpan" id="kobo.1001.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1002.1">td</span></strong><span class="koboSpan" id="kobo.1003.1"> that you saw earlier when the response to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1004.1">/register</span></strong><span class="koboSpan" id="kobo.1005.1"> route was generated – these elements are the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1006.1">&lt;tr&gt;</span></strong><span class="koboSpan" id="kobo.1007.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1008.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.1009.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1010.1">&lt;th&gt;</span></strong><span class="koboSpan" id="kobo.1011.1"> tags that the styles apply to! </span><span class="koboSpan" id="kobo.1011.2">Simply put, they put a background color on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1012.1">&lt;th&gt;</span></strong><span class="koboSpan" id="kobo.1013.1"> elements in the header row so that they stand out from the data, and then a border is put around each </span><strong class="source-inline"><span class="koboSpan" id="kobo.1014.1">&lt;tr&gt;</span></strong><span class="koboSpan" id="kobo.1015.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1016.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.1017.1"> element, really just for aesthetic reasons so that the data doesn’t all </span><span class="No-Break"><span class="koboSpan" id="kobo.1018.1">run together.</span></span></p>
<h3><span class="koboSpan" id="kobo.1019.1">Completing the response</span></h3>
<p><span class="koboSpan" id="kobo.1020.1">To wrap things up properly, we need</span><a id="_idIndexMarker258"/><span class="koboSpan" id="kobo.1021.1"> to close the body and the HTML document that our response constructs, as well as close the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1022.1">inResponse.send()</span></strong><span class="koboSpan" id="kobo.1023.1"> call and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1024.1">app.post()</span></strong><span class="koboSpan" id="kobo.1025.1"> function call. </span><span class="koboSpan" id="kobo.1025.2">That’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1026.1">done here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1027.1">
    &lt;/body&gt;
  &lt;/html&gt;
  `);
});</span></pre> <p><span class="koboSpan" id="kobo.1028.1">With that done, the only thing left to do is to start </span><span class="No-Break"><span class="koboSpan" id="kobo.1029.1">the server.</span></span></p>
<h3><span class="koboSpan" id="kobo.1030.1">Starting the server</span></h3>
<p><span class="koboSpan" id="kobo.1031.1">Starting the server</span><a id="_idIndexMarker259"/><span class="koboSpan" id="kobo.1032.1"> means telling the object that Express gave back to us to start listening </span><span class="No-Break"><span class="koboSpan" id="kobo.1033.1">for requests:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1034.1">
app.listen(80, () =&gt; {
  console.log("Server listening on port 80");
});</span></pre> <p><span class="koboSpan" id="kobo.1035.1">The aptly named </span><strong class="source-inline"><span class="koboSpan" id="kobo.1036.1">listen()</span></strong><span class="koboSpan" id="kobo.1037.1"> method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1038.1">app</span></strong><span class="koboSpan" id="kobo.1039.1"> object is what allows us to do that. </span><span class="koboSpan" id="kobo.1039.2">We pass to it what port to listen to and, optionally, a function to execute when it starts up. </span><span class="koboSpan" id="kobo.1039.3">Since there are no arguments we need to pass to it, an empty set of parentheses is all we need (because it’s still a function we’re defining, after all), and then we again use arrow notation for </span><span class="No-Break"><span class="koboSpan" id="kobo.1040.1">the function.</span></span></p>
<p><span class="koboSpan" id="kobo.1041.1">Go ahead and run the server (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1042.1">npm run dev</span></strong><span class="koboSpan" id="kobo.1043.1">) and play with it a bit to see it in action, including the start up text being displayed, as you can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1044.1">Figure 3</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1045.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1046.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer031">
<span class="koboSpan" id="kobo.1047.1"><img alt="Figure 3.5: The output of console.log()" src="image/B18315_03_5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1048.1">Figure 3.5: The output of console.log()</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1049.1">Deprecation warnings</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1050.1">By the way, the warning you</span><a id="_idIndexMarker260"/><span class="koboSpan" id="kobo.1051.1"> can see in the preceding screenshot can be ignored. </span><span class="koboSpan" id="kobo.1051.2">It’s a deprecation warning, which means that there is some change in process in a package that the server code depends on. </span><span class="koboSpan" id="kobo.1051.3">The authors of that package alert us to the fact that, eventually, we’ll need to change our code in some way; otherwise, it will break (the change, in this case, is that the call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1052.1">express.urlencoded()</span></strong><span class="koboSpan" id="kobo.1053.1"> earlier will eventually require an object to be passed with an extended attribute – you can add </span><strong class="source-inline"><span class="koboSpan" id="kobo.1054.1">{extended:false}</span></strong><span class="koboSpan" id="kobo.1055.1"> as an argument to that call to get rid of the message now if you’d like, but it isn’t yet necessary, which is the point of a </span><span class="No-Break"><span class="koboSpan" id="kobo.1056.1">deprecation warning).</span></span></p>
<p><span class="koboSpan" id="kobo.1057.1">Speaking of that start up text, inside of the function passed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1058.1">app.listen()</span></strong><span class="koboSpan" id="kobo.1059.1"> is a call to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1060.1">log()</span></strong><span class="koboSpan" id="kobo.1061.1"> method of an object named </span><strong class="source-inline"><span class="koboSpan" id="kobo.1062.1">console</span></strong><span class="koboSpan" id="kobo.1063.1">. </span><span class="koboSpan" id="kobo.1063.2">It’s easy enough to surmise that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1064.1">console</span></strong><span class="koboSpan" id="kobo.1065.1"> is an object representing the command-line </span><a id="_idIndexMarker261"/><span class="koboSpan" id="kobo.1066.1">output, frequently called the </span><em class="italic"><span class="koboSpan" id="kobo.1067.1">console</span></em><span class="koboSpan" id="kobo.1068.1">. </span><span class="koboSpan" id="kobo.1068.2">And it’s easy to guess that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1069.1">log()</span></strong><span class="koboSpan" id="kobo.1070.1"> is the method that allows us to write text to that console. </span><span class="koboSpan" id="kobo.1070.2">But all that opens up a whole new world of knowledge that we’ll explore a little bit later</span><a id="_idIndexMarker262"/><span class="koboSpan" id="kobo.1071.1"> in the </span><em class="italic"><span class="koboSpan" id="kobo.1072.1">Loving your new best friend – </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1073.1">DevTools</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1074.1"> section.</span></span></p>
<p><span class="koboSpan" id="kobo.1075.1">Well, that wasn’t so bad, was it? </span><span class="koboSpan" id="kobo.1075.2">Writing servers is easy! </span><span class="koboSpan" id="kobo.1075.3">However, so far, you’ve only written one </span><em class="italic"><span class="koboSpan" id="kobo.1076.1">type</span></em><span class="koboSpan" id="kobo.1077.1"> of server. </span><span class="koboSpan" id="kobo.1077.2">Let’s now talk about another way we could write this server and registration page that is a little </span><span class="No-Break"><span class="koboSpan" id="kobo.1078.1">more modern.</span></span></p>
<h1 id="_idParaDest-97"><a id="_idTextAnchor097"/><span class="koboSpan" id="kobo.1079.1">Exploring a different approach – single-page apps</span></h1>
<p><span class="koboSpan" id="kobo.1080.1">When you click the button</span><a id="_idIndexMarker263"/><span class="koboSpan" id="kobo.1081.1"> on our registration page, the form is sent to the server, which then produces a new HTML document. </span><span class="koboSpan" id="kobo.1081.2">This document is sent back to the browser, which replaces the entire registration page with the results page. </span><span class="koboSpan" id="kobo.1081.3">This is what is often referred to – at least by (relative!) old-timers</span><a id="_idIndexMarker264"/><span class="koboSpan" id="kobo.1082.1"> like me – as the “classic” model of the web. </span><span class="koboSpan" id="kobo.1082.2">In short, for every user action, the server is contacted, generating a new page to </span><span class="No-Break"><span class="koboSpan" id="kobo.1083.1">be displayed.</span></span></p>
<p><span class="koboSpan" id="kobo.1084.1">That’s an inefficient model, frankly. </span><span class="koboSpan" id="kobo.1084.2">Imagine thousands of users all doing the same thing – the server must handle all those requests, and quickly, because users hate to wait! </span><span class="koboSpan" id="kobo.1084.3">But even if it’s almost instantaneous, think about it from the user’s perspective – the screen is constantly being redrawn. </span><span class="koboSpan" id="kobo.1084.4">It just doesn’t </span><em class="italic"><span class="koboSpan" id="kobo.1085.1">look</span></em><span class="koboSpan" id="kobo.1086.1"> great, or at least it doesn’t look like an app they run on their operating system. </span><span class="koboSpan" id="kobo.1086.2">Imagine if your web browser had to completely redraw itself every time you, say, click a menu item on the toolbar. </span><span class="koboSpan" id="kobo.1086.3">However, that doesn’t happen; the menu simply appears. </span><span class="koboSpan" id="kobo.1086.4">So, why can’t a website work </span><span class="No-Break"><span class="koboSpan" id="kobo.1087.1">the same?</span></span></p>
<p><span class="koboSpan" id="kobo.1088.1">In fact, it can! </span><span class="koboSpan" id="kobo.1088.2">An approach referred to as </span><em class="italic"><span class="koboSpan" id="kobo.1089.1">SPAs</span></em><span class="koboSpan" id="kobo.1090.1"> does it. </span><strong class="bold"><span class="koboSpan" id="kobo.1091.1">SPA</span></strong><span class="koboSpan" id="kobo.1092.1"> stands for </span><strong class="bold"><span class="koboSpan" id="kobo.1093.1">Single Page App</span></strong><span class="koboSpan" id="kobo.1094.1">, and what it means is that the HTML document you initially load is never thrown away and replaced with another. </span><span class="koboSpan" id="kobo.1094.2">Instead, what happens is that when a request goes to the server, the server responds with just data, not a full HTML document. </span><span class="koboSpan" id="kobo.1094.3">We then use JS to take that data and do something with it. </span><span class="koboSpan" id="kobo.1094.4">It might be as simple as showing it on the page, which we can do through DOM functions. </span><span class="koboSpan" id="kobo.1094.5">Alternatively, maybe we use it to do some calculations and display the result of those on the screen, or maybe we use it to modify the page somehow. </span><span class="koboSpan" id="kobo.1094.6">In all cases, the main point is that the single HTML document that was loaded at the start is </span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">still there.</span></span></p>
<p><span class="koboSpan" id="kobo.1096.1">This may sound a bit confusing right now, but I think once you see what we’re going to do to our little registration page, it’ll make a lot of sense. </span><span class="koboSpan" id="kobo.1096.2">However, before we touch the code at all, I want to solve one minor problem and make life a little easier for </span><span class="No-Break"><span class="koboSpan" id="kobo.1097.1">us developers!</span></span></p>
<h2 id="_idParaDest-98"><a id="_idTextAnchor098"/><span class="koboSpan" id="kobo.1098.1">Improving developer productivity through automation</span></h2>
<p><span class="koboSpan" id="kobo.1099.1">You may not have noticed</span><a id="_idIndexMarker265"/><span class="koboSpan" id="kobo.1100.1"> this, but if you were to make a change to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1101.1">index.js</span></strong><span class="koboSpan" id="kobo.1102.1"> file, such as changing the HTML it returns when the form is submitted, you would find that the change doesn’t take effect immediately. </span><span class="koboSpan" id="kobo.1102.2">You have to stop and restart the server for the changes to “kick in,” so to speak. </span><span class="koboSpan" id="kobo.1102.3">That’s quite inconvenient if you ask me! </span><span class="koboSpan" id="kobo.1102.4">If you were making a lot of changes, that would get annoying fast. </span><span class="koboSpan" id="kobo.1102.5">Fortunately, there’s an</span><a id="_idIndexMarker266"/><span class="koboSpan" id="kobo.1103.1"> easy solution – </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1104.1">nodemon</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1105.1">!</span></span></p>
<p><span class="koboSpan" id="kobo.1106.1">First, since </span><strong class="source-inline"><span class="koboSpan" id="kobo.1107.1">nodemon</span></strong><span class="koboSpan" id="kobo.1108.1">’s an NPM package, we need to add it to our project. </span><span class="koboSpan" id="kobo.1108.2">To do so, execute </span><span class="No-Break"><span class="koboSpan" id="kobo.1109.1">this command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1110.1">
npm install –save-dev nodemon</span></pre> <p><span class="koboSpan" id="kobo.1111.1">Earlier, you saw how Express was added with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1112.1">–save</span></strong><span class="koboSpan" id="kobo.1113.1"> option, which added it to the dependencies element in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1114.1">package.json</span></strong><span class="koboSpan" id="kobo.1115.1">. </span><span class="koboSpan" id="kobo.1115.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1116.1">–save-dev</span></strong><span class="koboSpan" id="kobo.1117.1"> option is similar but a little different. </span><span class="koboSpan" id="kobo.1117.2">You see, there is also a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1118.1">devDependencies</span></strong><span class="koboSpan" id="kobo.1119.1"> element that may be present in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1120.1">package.json</span></strong><span class="koboSpan" id="kobo.1121.1">. </span><span class="koboSpan" id="kobo.1121.2">This works the same as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1122.1">dependencies</span></strong><span class="koboSpan" id="kobo.1123.1"> element, with one key difference – these are dependencies that we need during development but which our code itself does not depend on; </span><strong class="source-inline"><span class="koboSpan" id="kobo.1124.1">nodemon</span></strong><span class="koboSpan" id="kobo.1125.1"> is one such dependency. </span><span class="koboSpan" id="kobo.1125.2">So, after executing that command, you’ll find a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1126.1">devDependencies</span></strong><span class="koboSpan" id="kobo.1127.1"> element has been added, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1128.1">nodemon</span></strong><span class="koboSpan" id="kobo.1129.1"> has been added as a dependency in it (note this time that I did not specify an explicit version number, so NPM will install the latest version of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1130.1">nodemon</span></strong><span class="koboSpan" id="kobo.1131.1"> – since our code doesn’t depend on it, this is safe and most likely desired, since having the latest version gives us any new features it </span><span class="No-Break"><span class="koboSpan" id="kobo.1132.1">may offer).</span></span></p>
<p><span class="koboSpan" id="kobo.1133.1">Now, what </span><strong class="source-inline"><span class="koboSpan" id="kobo.1134.1">nodemon</span></strong><span class="koboSpan" id="kobo.1135.1"> does</span><a id="_idIndexMarker267"/><span class="koboSpan" id="kobo.1136.1"> is watch (or </span><em class="italic"><span class="koboSpan" id="kobo.1137.1">monitors</span></em><span class="koboSpan" id="kobo.1138.1">, hence the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.1139.1">nodemon</span></strong><span class="koboSpan" id="kobo.1140.1">) our files for changes and, when they are detected, restart our application for us. </span><span class="koboSpan" id="kobo.1140.2">However, to make that happen, we have to start the server using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">nodemon</span></strong><span class="koboSpan" id="kobo.1142.1">. </span><span class="koboSpan" id="kobo.1142.2">The way we do this is to modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1143.1">dev</span></strong><span class="koboSpan" id="kobo.1144.1"> script we added to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1145.1">package.json</span></strong><span class="koboSpan" id="kobo.1146.1"> earlier. </span><span class="koboSpan" id="kobo.1146.2">Now, it should be </span><span class="No-Break"><span class="koboSpan" id="kobo.1147.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1148.1">
"dev": "npx nodemon"</span></pre> <p><span class="koboSpan" id="kobo.1149.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1150.1">npx</span></strong><span class="koboSpan" id="kobo.1151.1"> command is an alternate version of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1152.1">npm</span></strong><span class="koboSpan" id="kobo.1153.1"> that basically says, “</span><em class="italic"><span class="koboSpan" id="kobo.1154.1">Run a program that is supplied by a dependency in our project.</span></em><span class="koboSpan" id="kobo.1155.1">” In this case, that of course means </span><strong class="source-inline"><span class="koboSpan" id="kobo.1156.1">nodemon</span></strong><span class="koboSpan" id="kobo.1157.1">. </span><span class="koboSpan" id="kobo.1157.2">But note how you would still, as a developer, execute the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.1158.1">npm run dev</span></strong><span class="koboSpan" id="kobo.1159.1"> command to start the server. </span><span class="koboSpan" id="kobo.1159.2">That command is what will start </span><strong class="source-inline"><span class="koboSpan" id="kobo.1160.1">nodemon</span></strong><span class="koboSpan" id="kobo.1161.1">, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1162.1">npx</span></strong><span class="koboSpan" id="kobo.1163.1"> as per the script. </span><span class="koboSpan" id="kobo.1163.2">And, by default, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1164.1">nodemon</span></strong><span class="koboSpan" id="kobo.1165.1"> will simply monitor all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1166.1">.js</span></strong><span class="koboSpan" id="kobo.1167.1"> files in the project directory, and since we just have one, that’s all we need (you can configure </span><strong class="source-inline"><span class="koboSpan" id="kobo.1168.1">nodemon</span></strong><span class="koboSpan" id="kobo.1169.1"> to only monitor specific files, subdirectories, or many other options, but the defaults work just fine for </span><span class="No-Break"><span class="koboSpan" id="kobo.1170.1">us here).</span></span></p>
<h2 id="_idParaDest-99"><a id="_idTextAnchor099"/><span class="koboSpan" id="kobo.1171.1">Writing a new kind of client</span></h2>
<p><span class="koboSpan" id="kobo.1172.1">Now, what we’re going</span><a id="_idIndexMarker268"/><span class="koboSpan" id="kobo.1173.1"> to do is modify our registration page to work</span><a id="_idIndexMarker269"/><span class="koboSpan" id="kobo.1174.1"> as an SPA. </span><span class="koboSpan" id="kobo.1174.2">Rather than listing out all the code, I’m just going to show the changes required, just to save a few trees! </span><span class="koboSpan" id="kobo.1174.3">If I don’t mention a specific change, then you can assume the code is the same as the </span><span class="No-Break"><span class="koboSpan" id="kobo.1175.1">original version.</span></span></p>
<p><span class="koboSpan" id="kobo.1176.1">The first change is a </span><span class="No-Break"><span class="koboSpan" id="kobo.1177.1">simple one:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1178.1">
&lt;form id="theForm"&gt;</span></pre> <p><span class="koboSpan" id="kobo.1179.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1180.1">action</span></strong><span class="koboSpan" id="kobo.1181.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1182.1">method</span></strong><span class="koboSpan" id="kobo.1183.1"> attributes have been removed and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1184.1">id</span></strong><span class="koboSpan" id="kobo.1185.1"> attribute added. </span><span class="koboSpan" id="kobo.1185.2">Removing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1186.1">action</span></strong><span class="koboSpan" id="kobo.1187.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">method</span></strong><span class="koboSpan" id="kobo.1189.1"> is a change I didn’t technically need to make, but it makes obvious the fact that the form won’t be submitted like before. </span><span class="koboSpan" id="kobo.1189.2">Instead, the information from the form will be sent to the server in an entirely different way, which we’ll get to shortly. </span><span class="koboSpan" id="kobo.1189.3">Adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1190.1">id</span></strong><span class="koboSpan" id="kobo.1191.1"> attribute though is necessary, as you’ll </span><span class="No-Break"><span class="koboSpan" id="kobo.1192.1">see shortly.</span></span></p>
<p><span class="koboSpan" id="kobo.1193.1">The only other change is to </span><span class="No-Break"><span class="koboSpan" id="kobo.1194.1">the button:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1195.1">
&lt;button type="button" onClick="registerNow();"&gt;Register Now&lt;/button&gt;</span></pre> <p><span class="koboSpan" id="kobo.1196.1">Now, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1197.1">type</span></strong><span class="koboSpan" id="kobo.1198.1"> attribute’s value is just </span><strong class="source-inline"><span class="koboSpan" id="kobo.1199.1">button</span></strong><span class="koboSpan" id="kobo.1200.1"> instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1201.1">submit</span></strong><span class="koboSpan" id="kobo.1202.1">. </span><span class="koboSpan" id="kobo.1202.2">That’s because the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1203.1">submit</span></strong><span class="koboSpan" id="kobo.1204.1"> type creates a special button that knows to submit the form to the server when clicked. </span><span class="koboSpan" id="kobo.1204.2">But since we don’t want that to happen now, it’s changed to a plain button, which has no intrinsic action when clicked. </span><span class="koboSpan" id="kobo.1204.3">To give it an action, we need to attach an event handler to it. </span><span class="koboSpan" id="kobo.1204.4">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1205.1">onClick</span></strong><span class="koboSpan" id="kobo.1206.1"> handler is what executes when the user clicks the button of course, and in that case, we need it to execute some JS, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1207.1">registerNow()</span></strong><span class="koboSpan" id="kobo.1208.1"> function specifically, which we’ll look at </span><span class="No-Break"><span class="koboSpan" id="kobo.1209.1">very soon.</span></span></p>
<p><span class="koboSpan" id="kobo.1210.1">But first, there is a new bit of markup that needs to </span><span class="No-Break"><span class="koboSpan" id="kobo.1211.1">be added.</span></span></p>
<h3><span class="koboSpan" id="kobo.1212.1">Embedding the response page</span></h3>
<p><span class="koboSpan" id="kobo.1213.1">Remember, the whole point</span><a id="_idIndexMarker270"/><span class="koboSpan" id="kobo.1214.1"> of what we’re trying</span><a id="_idIndexMarker271"/><span class="koboSpan" id="kobo.1215.1"> to accomplish here is to submit the form data to the server, get some data back, and display it on the screen, </span><em class="italic"><span class="koboSpan" id="kobo.1216.1">without</span></em><span class="koboSpan" id="kobo.1217.1"> overwriting what’s there already. </span><span class="koboSpan" id="kobo.1217.2">So, we’re going to need a place to show that data, and that’s what we’ll </span><span class="No-Break"><span class="koboSpan" id="kobo.1218.1">discover next:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1219.1">
&lt;div id="theResults" style="display:none;"&gt;
  &lt;h2&gt;Thank you for registering! </span><span class="koboSpan" id="kobo.1219.2">Here is the information we got:&lt;/h2&gt;
  &lt;table style="border:4px solid black;"&gt;
    &lt;tr&gt;
      &lt;th&gt;Title&lt;/th&gt;
      &lt;th&gt;First Name&lt;/th&gt;
      &lt;th&gt;Last Name&lt;/th&gt;
      &lt;th&gt;Age&lt;/th&gt;
      &lt;th&gt;Email Address&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td id="results_title"&gt;&lt;/td&gt;
      &lt;td id="results_first_name"&gt;&lt;/td&gt;
      &lt;td id="results_last_name"&gt;&lt;/td&gt;
      &lt;td id="results_age"&gt;&lt;/td&gt;
      &lt;td id="results_email"&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/div&gt;</span></pre> <p><span class="koboSpan" id="kobo.1220.1">This code should </span><a id="_idIndexMarker272"/><span class="koboSpan" id="kobo.1221.1">look rather familiar</span><a id="_idIndexMarker273"/><span class="koboSpan" id="kobo.1222.1"> to you – it’s almost exactly identical to the markup that the server generates in the original version. </span><span class="koboSpan" id="kobo.1222.2">The key differences are first that everything is wrapped up in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1223.1">&lt;div&gt;</span></strong><span class="koboSpan" id="kobo.1224.1"> now, the one with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1225.1">theResults</span></strong><span class="koboSpan" id="kobo.1226.1"> ID. </span><span class="koboSpan" id="kobo.1226.2">In addition, an inline style is used here. </span><span class="koboSpan" id="kobo.1226.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1227.1">display</span></strong><span class="koboSpan" id="kobo.1228.1"> property in CSS tells the browser whether the content inside this element should be visible or not. </span><span class="koboSpan" id="kobo.1228.2">Setting it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1229.1">none</span></strong><span class="koboSpan" id="kobo.1230.1">, as is done here, means that this entire </span><strong class="source-inline"><span class="koboSpan" id="kobo.1231.1">&lt;div&gt;</span></strong><span class="koboSpan" id="kobo.1232.1"> will not be seen, at least not at first. </span><span class="koboSpan" id="kobo.1232.2">And, indeed, if you run this code now, you’ll find that it looks exactly like the original version, but none of the content inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.1233.1">&lt;div&gt;</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1234.1">is shown.</span></span></p>
<p><span class="koboSpan" id="kobo.1235.1">Secondly, the content in the row where the data is displayed is different. </span><span class="koboSpan" id="kobo.1235.2">No longer do we have expressions like in the original version because, remember, this isn’t a template literal string like it is there; this is just plain old HTML. </span><span class="koboSpan" id="kobo.1235.3">Instead, each of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1236.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.1237.1"> elements is now given an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1238.1">id</span></strong><span class="koboSpan" id="kobo.1239.1">, which will allow us to reference them in code later. </span><span class="koboSpan" id="kobo.1239.2">And I prefixed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1240.1">id</span></strong><span class="koboSpan" id="kobo.1241.1"> values with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1242.1">results_</span></strong><span class="koboSpan" id="kobo.1243.1"> so they can be differentiated</span><a id="_idIndexMarker274"/><span class="koboSpan" id="kobo.1244.1"> from the fields</span><a id="_idIndexMarker275"/><span class="koboSpan" id="kobo.1245.1"> in the form at </span><span class="No-Break"><span class="koboSpan" id="kobo.1246.1">a glance.</span></span></p>
<p><span class="koboSpan" id="kobo.1247.1">And, speaking of the code, that’s exactly where we’re </span><span class="No-Break"><span class="koboSpan" id="kobo.1248.1">headed next!</span></span></p>
<h3><span class="koboSpan" id="kobo.1249.1">Executing the new JS code</span></h3>
<p><span class="koboSpan" id="kobo.1250.1">Coming back to</span><a id="_idIndexMarker276"/><span class="koboSpan" id="kobo.1251.1"> that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1252.1">registerNow()</span></strong><span class="koboSpan" id="kobo.1253.1"> function I mentioned</span><a id="_idIndexMarker277"/><span class="koboSpan" id="kobo.1254.1"> earlier, you’ll find that it is contained within a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1255.1">&lt;script&gt;</span></strong><span class="koboSpan" id="kobo.1256.1"> block that comes right before the closing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1257.1">&lt;/html&gt;</span></strong><span class="koboSpan" id="kobo.1258.1"> tag. </span><span class="koboSpan" id="kobo.1258.2">That’s something you haven’t seen before – you’ve only ever seen a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1259.1">&lt;script&gt;</span></strong><span class="koboSpan" id="kobo.1260.1"> tag inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.1261.1">&lt;head&gt;</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1262.1">before now.</span></span></p>
<p><span class="koboSpan" id="kobo.1263.1">As you can guess, you can put </span><strong class="source-inline"><span class="koboSpan" id="kobo.1264.1">&lt;script&gt;</span></strong><span class="koboSpan" id="kobo.1265.1"> tags anywhere because, remember, they aren’t content that is shown to the user, so they have no impact on your markup no matter where you put them. </span><span class="koboSpan" id="kobo.1265.2">I put a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1266.1">&lt;script&gt;</span></strong><span class="koboSpan" id="kobo.1267.1"> tag at the end for just one reason – so that I could discuss the markup changes first and not have to pull a “we’ll come back to this later” with the JS code, which is what I would have had to do if it was </span><span class="No-Break"><span class="koboSpan" id="kobo.1268.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1269.1">&lt;head&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1270.1">!</span></span></p>
<p><span class="koboSpan" id="kobo.1271.1">But now, we’re ready to look at it, and I’m going to break it up into pieces to make it easier to digest, starting </span><span class="No-Break"><span class="koboSpan" id="kobo.1272.1">with this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1273.1">
&lt;script&gt;
  async function registerNow() {</span></pre> <p><span class="koboSpan" id="kobo.1274.1">You’ve seen a function defined before, but that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1275.1">async</span></strong><span class="koboSpan" id="kobo.1276.1"> thing is new. </span><span class="koboSpan" id="kobo.1276.2">Normally, when a function executes, it completes from start to finish in one go. </span><span class="koboSpan" id="kobo.1276.3">However, there are some cases where we might need to do something in a function that can take a while. </span><span class="koboSpan" id="kobo.1276.4">A good example – the one in play here – is calling the server. </span><span class="koboSpan" id="kobo.1276.5">We need a way to, in effect, make our function “pause” until the server responds, which it normally would not do. </span><span class="koboSpan" id="kobo.1276.6">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1277.1">async</span></strong><span class="koboSpan" id="kobo.1278.1"> keyword tells JS that we’re doing something like that here. </span><span class="koboSpan" id="kobo.1278.2">On its own, it’s only part of the equation, and you’ll see the other </span><span class="No-Break"><span class="koboSpan" id="kobo.1279.1">part soon.</span></span></p>
<p><span class="koboSpan" id="kobo.1280.1">But first, let’s return to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1281.1">function’s code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1282.1">
const theForm = document.getElementById("theForm");</span></pre> <p><span class="koboSpan" id="kobo.1283.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1284.1">getElementById()</span></strong><span class="koboSpan" id="kobo.1285.1"> method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1286.1">document</span></strong><span class="koboSpan" id="kobo.1287.1"> object, which is an object the browser always provides to us, allows us to get a reference to a DOM node based on its ID. </span><span class="koboSpan" id="kobo.1287.2">In this case, the form has an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1288.1">id</span></strong><span class="koboSpan" id="kobo.1289.1"> of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1290.1">theForm</span></strong><span class="koboSpan" id="kobo.1291.1">, so the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1292.1">theForm</span></strong><span class="koboSpan" id="kobo.1293.1"> variable now references </span><span class="No-Break"><span class="koboSpan" id="kobo.1294.1">the form.</span></span></p>
<p><span class="koboSpan" id="kobo.1295.1">From there, we can pull out the data from </span><span class="No-Break"><span class="koboSpan" id="kobo.1296.1">the form:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1297.1">
const userInfo = {
  title: theForm.elements["title"].value,
  first_name: theForm.elements["first_name"].value,
  last_name: theForm.elements["last_name"].value,
  age: theForm.elements["age"].value,
  email: theForm.elements["email"].value
};
console.log("userInfo to be sent to server", userInfo);</span></pre> <p><span class="koboSpan" id="kobo.1298.1">Every entry field in the form is an element in an object named </span><strong class="source-inline"><span class="koboSpan" id="kobo.1299.1">elements</span></strong><span class="koboSpan" id="kobo.1300.1">, which is a property of the form object referenced by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1301.1">theForm</span></strong><span class="koboSpan" id="kobo.1302.1"> variable. </span><span class="koboSpan" id="kobo.1302.2">So, we can access each of them using bracket notation, as you can any property of </span><span class="No-Break"><span class="koboSpan" id="kobo.1303.1">an object.</span></span></p>
<p><span class="koboSpan" id="kobo.1304.1">What we’re doing here is building an object with keys for each of the form fields. </span><span class="koboSpan" id="kobo.1304.2">We define an object with an opening and closing brace and then list the properties we want in it, in a key-value pair form. </span><span class="koboSpan" id="kobo.1304.3">Then, just to prove that worked, the object is displayed in the console using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1305.1">console.log()</span></strong><span class="koboSpan" id="kobo.1306.1">, as you saw on the server side. </span><span class="koboSpan" id="kobo.1306.2">However, here, you see another capability of that method – the ability to pass multiple arguments. </span><span class="koboSpan" id="kobo.1306.3">Each argument will be displayed separated by some space. </span><span class="koboSpan" id="kobo.1306.4">And if we pass an object as an argument, as is the case for the second argument here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1307.1">console.log()</span></strong><span class="koboSpan" id="kobo.1308.1"> will display the contents of that object for us. </span><span class="koboSpan" id="kobo.1308.2">Immensely helpful, </span><span class="No-Break"><span class="koboSpan" id="kobo.1309.1">isn’t it?</span></span></p>
<p><span class="koboSpan" id="kobo.1310.1">I’m going to talk more</span><a id="_idIndexMarker278"/><span class="koboSpan" id="kobo.1311.1"> about </span><strong class="source-inline"><span class="koboSpan" id="kobo.1312.1">console</span></strong><span class="koboSpan" id="kobo.1313.1"> and the wider</span><a id="_idIndexMarker279"/><span class="koboSpan" id="kobo.1314.1"> world it hints at near the end of this chapter, so just keep it in the back of your mind </span><span class="No-Break"><span class="koboSpan" id="kobo.1315.1">for now.</span></span></p>
<p><span class="koboSpan" id="kobo.1316.1">Once we have that object, we can then call on the server </span><span class="No-Break"><span class="koboSpan" id="kobo.1317.1">using JS:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1318.1">
const response = await fetch("/register", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(userInfo)
});</span></pre> <p><span class="koboSpan" id="kobo.1319.1">This is where the second part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1320.1">async</span></strong><span class="koboSpan" id="kobo.1321.1"> puzzle comes into play – the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1322.1">await</span></strong><span class="koboSpan" id="kobo.1323.1"> keyword. </span><span class="koboSpan" id="kobo.1323.2">This tells JS that whatever function or code follows may take some time to execute, and we </span><em class="italic"><span class="koboSpan" id="kobo.1324.1">do not</span></em><span class="koboSpan" id="kobo.1325.1"> want the rest of the function to execute until it does, as it normally would. </span><span class="koboSpan" id="kobo.1325.2">We want to </span><em class="italic"><span class="koboSpan" id="kobo.1326.1">await</span></em><span class="koboSpan" id="kobo.1327.1"> the outcome of that call, in </span><span class="No-Break"><span class="koboSpan" id="kobo.1328.1">other words.</span></span></p>
<p><span class="koboSpan" id="kobo.1329.1">In this case, what we’re awaiting is the result of a call to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1330.1">fetch()</span></strong><span class="koboSpan" id="kobo.1331.1"> function. </span><span class="koboSpan" id="kobo.1331.2">This is a function the browser provides that allows us to make an HTTP request to a remote system – in this case, our server. </span><span class="koboSpan" id="kobo.1331.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1332.1">fetch()</span></strong><span class="koboSpan" id="kobo.1333.1"> function can take in a lot of information to do its job, but in its simplest form, it requires two arguments – the URL to send the request to (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1334.1">/register</span></strong><span class="koboSpan" id="kobo.1335.1"> in this case, just like the original version of this page) and an object with several properties that provides the data needed to make the call. </span><span class="koboSpan" id="kobo.1335.2">Here, we first specify the HTTP </span><strong class="source-inline"><span class="koboSpan" id="kobo.1336.1">method</span></strong><span class="koboSpan" id="kobo.1337.1"> to use as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1338.1">POST</span></strong><span class="koboSpan" id="kobo.1339.1"> again, as with the original form. </span><span class="koboSpan" id="kobo.1339.2">Then, we need to provide some </span><strong class="source-inline"><span class="koboSpan" id="kobo.1340.1">headers</span></strong><span class="koboSpan" id="kobo.1341.1">. </span><span class="koboSpan" id="kobo.1341.2">Recall from earlier that headers are metadata that can be sent on a request to tell the server something about that request. </span><span class="koboSpan" id="kobo.1341.3">In this case, we’re telling it that we’re sending something called JSON. </span><span class="koboSpan" id="kobo.1341.4">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1342.1">Content-Type</span></strong><span class="koboSpan" id="kobo.1343.1"> header is the key in a key-value pair that allows us to express that, and the value </span><span class="No-Break"><span class="koboSpan" id="kobo.1344.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1345.1">application/json</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1346.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1347.1">You’ll see strings like this frequently in headers, and when</span><a id="_idIndexMarker280"/><span class="koboSpan" id="kobo.1348.1"> you do, this is something called a MIME type, where </span><strong class="bold"><span class="koboSpan" id="kobo.1349.1">MIME</span></strong><span class="koboSpan" id="kobo.1350.1"> stands for </span><strong class="bold"><span class="koboSpan" id="kobo.1351.1">Multipurpose Internet Mail Extension</span></strong><span class="koboSpan" id="kobo.1352.1">. </span><span class="koboSpan" id="kobo.1352.2">It may seem odd to see </span><em class="italic"><span class="koboSpan" id="kobo.1353.1">mail</span></em><span class="koboSpan" id="kobo.1354.1"> in there, but that’s just because MIME types were originally created for use in emails and then expanded to other contexts, such as the web (email came before the web you see, so this makes sense). </span><span class="koboSpan" id="kobo.1354.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1355.1">application/json</span></strong><span class="koboSpan" id="kobo.1356.1"> value specifically</span><a id="_idIndexMarker281"/><span class="koboSpan" id="kobo.1357.1"> is a common one these days, where </span><strong class="bold"><span class="koboSpan" id="kobo.1358.1">JSON</span></strong><span class="koboSpan" id="kobo.1359.1"> stands for </span><strong class="bold"><span class="koboSpan" id="kobo.1360.1">JavaScript Object Notation</span></strong><span class="koboSpan" id="kobo.1361.1">. </span><span class="koboSpan" id="kobo.1361.2">JSON is a way to express JS objects, and you’ve essentially already seen it – when we defined that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1362.1">userInfo</span></strong><span class="koboSpan" id="kobo.1363.1"> object before, that was JSON! </span><span class="koboSpan" id="kobo.1363.2">The server needs to know that the client is sending JSON, so this header and that specific MIME type </span><span class="No-Break"><span class="koboSpan" id="kobo.1364.1">do that.</span></span></p>
<p><span class="koboSpan" id="kobo.1365.1">After that, we of course</span><a id="_idIndexMarker282"/><span class="koboSpan" id="kobo.1366.1"> have to include</span><a id="_idIndexMarker283"/><span class="koboSpan" id="kobo.1367.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1368.1">userInfo</span></strong><span class="koboSpan" id="kobo.1369.1"> object, and this becomes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1370.1">body</span></strong><span class="koboSpan" id="kobo.1371.1"> of the request. </span><span class="koboSpan" id="kobo.1371.2">However, when you make an HTTP request, the body is always a string. </span><span class="koboSpan" id="kobo.1371.3">At this point though, we only have </span><strong class="source-inline"><span class="koboSpan" id="kobo.1372.1">userInfo</span></strong><span class="koboSpan" id="kobo.1373.1"> as a JS object, not a string. </span><span class="koboSpan" id="kobo.1373.2">Fortunately, the JS engine provides an object called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1374.1">JSON</span></strong><span class="koboSpan" id="kobo.1375.1">, which gives us access to several useful methods, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1376.1">stringify()</span></strong><span class="koboSpan" id="kobo.1377.1"> being one of them. </span><span class="koboSpan" id="kobo.1377.2">You simply pass this function to a JS object, and it will return a string version of it, which we can then make the body of </span><span class="No-Break"><span class="koboSpan" id="kobo.1378.1">the request.</span></span></p>
<p><span class="koboSpan" id="kobo.1379.1">Once the response comes</span><a id="_idIndexMarker284"/><span class="koboSpan" id="kobo.1380.1"> back, it will be put</span><a id="_idIndexMarker285"/><span class="koboSpan" id="kobo.1381.1"> into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1382.1">response</span></strong><span class="koboSpan" id="kobo.1383.1"> variable. </span><span class="koboSpan" id="kobo.1383.2">However, it will be a string at this point, and we want a JS object so that we can get the values from it. </span><span class="koboSpan" id="kobo.1383.3">To do that, we can call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1384.1">json()</span></strong><span class="koboSpan" id="kobo.1385.1"> method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1386.1">response</span></strong><span class="koboSpan" id="kobo.1387.1"> object. </span><span class="koboSpan" id="kobo.1387.2">This is another asynchronous call though, so we have to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1388.1">await</span></strong><span class="koboSpan" id="kobo.1389.1"> again, after which we can display the </span><span class="No-Break"><span class="koboSpan" id="kobo.1390.1">resultant object:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1391.1">
const results = await response.json();
console.log("results from server", results);</span></pre> <p><span class="koboSpan" id="kobo.1392.1">Finally, now that we have an object with the data returned by the server, the last step is to show it on the screen (well, the last step after displaying it in the console, which is something you can do in a browser, just like in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1393.1">server-side code):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1394.1">
    document.getElementById("results_title").innerHTML =
      results.title;
    document.getElementById("results_first_name").innerHTML =
      results.first_name;
    document.getElementById("results_last_name").innerHTML =
      results.last_name;
    document.getElementById("results_age").innerHTML =
      results.age;
    document.getElementById("results_email").innerHTML =
      results.email;
    document.getElementById("theResults").style.display = "";
  }
&lt;/script&gt;</span></pre> <p><span class="koboSpan" id="kobo.1395.1">Here, the five data values are inserted into the page. </span><span class="koboSpan" id="kobo.1395.2">Again, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1396.1">document.getElementById()</span></strong><span class="koboSpan" id="kobo.1397.1"> function is used, referencing the IDs assigned to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1398.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.1399.1"> elements from earlier. </span><span class="koboSpan" id="kobo.1399.2">That gives us a DOM node object back, and many DOM node objects have an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1400.1">innerHTML</span></strong><span class="koboSpan" id="kobo.1401.1"> property. </span><span class="koboSpan" id="kobo.1401.2">This allows us to insert content between two tags – in this case, between the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1402.1">&lt;td&gt;</span></strong><span class="koboSpan" id="kobo.1403.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1404.1">&lt;/td&gt;</span></strong><span class="koboSpan" id="kobo.1405.1"> tags corresponding to a given </span><strong class="source-inline"><span class="koboSpan" id="kobo.1406.1">id</span></strong><span class="koboSpan" id="kobo.1407.1"> value. </span><span class="koboSpan" id="kobo.1407.2">The text to insert is simply the value of the various properties of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1408.1">results</span></strong><span class="koboSpan" id="kobo.1409.1"> object that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1410.1">response.json()</span></strong><span class="koboSpan" id="kobo.1411.1"> gave </span><span class="No-Break"><span class="koboSpan" id="kobo.1412.1">to us.</span></span></p>
<p><span class="koboSpan" id="kobo.1413.1">Now, it’s great</span><a id="_idIndexMarker286"/><span class="koboSpan" id="kobo.1414.1"> that all the data</span><a id="_idIndexMarker287"/><span class="koboSpan" id="kobo.1415.1"> is inserted at this point, but it’s still not visible. </span><span class="koboSpan" id="kobo.1415.2">To make it visible, we have to change the display CSS property of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1416.1">&lt;div&gt;</span></strong><span class="koboSpan" id="kobo.1417.1"> tag that contains the table. </span><span class="koboSpan" id="kobo.1417.2">DOM nodes almost always have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1418.1">style</span></strong><span class="koboSpan" id="kobo.1419.1"> property, which allows us to alter any CSS properties on that node that we want to, so we can set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1420.1">display</span></strong><span class="koboSpan" id="kobo.1421.1"> property to an empty string. </span><span class="koboSpan" id="kobo.1421.2">This may seem weird, but by default, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1422.1">display</span></strong><span class="koboSpan" id="kobo.1423.1"> property has no value, which tells the browser that it </span><em class="italic"><span class="koboSpan" id="kobo.1424.1">should</span></em><span class="koboSpan" id="kobo.1425.1"> be displayed, so that’s what we </span><span class="No-Break"><span class="koboSpan" id="kobo.1426.1">do here.</span></span></p>
<p><span class="koboSpan" id="kobo.1427.1">As a result, you can now see the data that the server sent back, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1428.1">Figure 3</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1429.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1430.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer032">
<span class="koboSpan" id="kobo.1431.1"><img alt="Figure 3.6: The result of calling the server" src="image/B18315_03_6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1432.1">Figure 3.6: The result of calling the server</span></p>
<p><span class="koboSpan" id="kobo.1433.1">Now that we’ve reworked</span><a id="_idIndexMarker288"/><span class="koboSpan" id="kobo.1434.1"> the client-side code</span><a id="_idIndexMarker289"/><span class="koboSpan" id="kobo.1435.1"> for this new SPA approach, let’s look at what changes are required on the server side to ensure that the client and the server can talk to each other properly in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1436.1">new way.</span></span></p>
<h2 id="_idParaDest-100"><a id="_idTextAnchor100"/><span class="koboSpan" id="kobo.1437.1">Writing a new kind of server</span></h2>
<p><span class="koboSpan" id="kobo.1438.1">Okay, great, we’ve modified</span><a id="_idIndexMarker290"/><span class="koboSpan" id="kobo.1439.1"> our frontend code to prepare for this great new SPA version; now, we need to make some changes on the server. </span><span class="koboSpan" id="kobo.1439.2">Once again, I’ll just show the changes; however, in this case, I’d definitely suggest looking at the complete code from GitHub because the one thing you’ll find is that it’s shorter. </span><span class="koboSpan" id="kobo.1439.3">And that makes sense if you think about it – the styles and HTML that the server returns in the original version are now effectively part of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1440.1">index.html</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1441.1"> source.</span></span></p>
<p><span class="koboSpan" id="kobo.1442.1">First up, we must tell Express that it needs to be able to work </span><span class="No-Break"><span class="koboSpan" id="kobo.1443.1">with JSON:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1444.1">
app.use(express.json());</span></pre> <p><span class="koboSpan" id="kobo.1445.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1446.1">express.json()</span></strong><span class="koboSpan" id="kobo.1447.1"> method returns a function – a bit of Express middleware again – that knows how to work with JSON. </span><span class="koboSpan" id="kobo.1447.2">Cool, that </span><span class="No-Break"><span class="koboSpan" id="kobo.1448.1">was easy!</span></span></p>
<p><span class="koboSpan" id="kobo.1449.1">The next change comes in the handler function for a POST to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1450.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1451.1">register</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1452.1"> route:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1453.1">
app.post("/register", (inRequest, inResponse) =&gt; {
  console.log("Data sent from client", inRequest.body);
  const responseObj = {
    title: inRequest.body.title,
    first_name: inRequest.body.first_name,
    last_name: inRequest.body.last_name,
    age: inRequest.body.age,
    email: inRequest.body.email
  };
  inResponse.send(responseObj);
});</span></pre> <p><span class="koboSpan" id="kobo.1454.1">Like I said, it’s shorter! </span><span class="koboSpan" id="kobo.1454.2">The only real purpose of the server in this app is to echo back to the client the information received. </span><span class="koboSpan" id="kobo.1454.3">Normally, you’d probably validate this data somehow, store it in a database, and so on. </span><span class="koboSpan" id="kobo.1454.4">But remember, I’m just trying to demonstrate a client-server interaction here, which is the whole point of the chapter, so none of that needs to come </span><span class="No-Break"><span class="koboSpan" id="kobo.1455.1">into play.</span></span></p>
<p><span class="koboSpan" id="kobo.1456.1">However, we will display the data that was received via the call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1457.1">console.log()</span></strong><span class="koboSpan" id="kobo.1458.1"> first, just so we have it ready if we need to debug. </span><span class="koboSpan" id="kobo.1458.2">After that, an object is created, referenced by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1459.1">responseObj</span></strong><span class="koboSpan" id="kobo.1460.1"> variable, just like you saw earlier on the client side. </span><span class="koboSpan" id="kobo.1460.2">This object is then passed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1461.1">inResponse.send()</span></strong><span class="koboSpan" id="kobo.1462.1">, which results in a call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1463.1">JSON.stringify()</span></strong><span class="koboSpan" id="kobo.1464.1">, as you saw earlier, being made automatically for us, since Express is aware that we want JSON – in the form of a string – </span><span class="No-Break"><span class="koboSpan" id="kobo.1465.1">returned.</span></span></p>
<p><span class="koboSpan" id="kobo.1466.1">Let’s walk through this whole flow from client to server, detailing the </span><span class="No-Break"><span class="koboSpan" id="kobo.1467.1">steps involved:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1468.1">The JS in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1469.1">index.html</span></strong><span class="koboSpan" id="kobo.1470.1"> sent an object in the form of a JSON string to </span><span class="No-Break"><span class="koboSpan" id="kobo.1471.1">the server.</span></span></li>
<li><span class="koboSpan" id="kobo.1472.1">Express took that string and turned it into a </span><span class="No-Break"><span class="koboSpan" id="kobo.1473.1">JS object.</span></span></li>
<li><span class="koboSpan" id="kobo.1474.1">Our server-side code then used the properties of that JS object to construct another object, with the data that was sent copied </span><span class="No-Break"><span class="koboSpan" id="kobo.1475.1">into it.</span></span></li>
<li><span class="koboSpan" id="kobo.1476.1">That object was then returned to the JS running in the browser as a string </span><span class="No-Break"><span class="koboSpan" id="kobo.1477.1">of JSON.</span></span></li>
<li><span class="koboSpan" id="kobo.1478.1">The code in the browser converted the string back into </span><span class="No-Break"><span class="koboSpan" id="kobo.1479.1">an object.</span></span></li>
<li><span class="koboSpan" id="kobo.1480.1">We then used the data from that object to populate the hidden table cells on </span><span class="No-Break"><span class="koboSpan" id="kobo.1481.1">the screen.</span></span></li>
<li><span class="koboSpan" id="kobo.1482.1">We then showed the table by updating the style of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1483.1">&lt;div&gt;</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1484.1">containing </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1485.1">&lt;table&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1486.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1487.1">Critically, note that the original registration</span><a id="_idIndexMarker291"/><span class="koboSpan" id="kobo.1488.1"> form is still there, untouched by the response from the server. </span><span class="koboSpan" id="kobo.1488.2">That, in a nutshell, is the entire point of this new SPA version of this small and simple app. </span><span class="koboSpan" id="kobo.1488.3">If you imagine this on a much larger and grander scale, such as Google’s Gmail or Microsoft’s Office Online, then hopefully you can quickly start to see the benefits. </span><span class="koboSpan" id="kobo.1488.4">There’s more code involved of course, but you get better performance (usually), less server load (usually), and less network traffic (usually) with this SPA approach rather than the “classic” web approach, and that’s why the former is actually the more common approach to web development today overall. </span><span class="koboSpan" id="kobo.1488.5">There definitely is still a place for the classic web approach, but that place</span><a id="_idIndexMarker292"/><span class="koboSpan" id="kobo.1489.1"> is shrinking as time </span><span class="No-Break"><span class="koboSpan" id="kobo.1490.1">goes on.</span></span></p>
<p><span class="koboSpan" id="kobo.1491.1">Now that you’ve seen these two approaches – the “classic” web model and the SPA model – let’s discuss the topic I hinted at when I mentioned the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1492.1">console.log()</span></strong><span class="koboSpan" id="kobo.1493.1"> function – </span><span class="No-Break"><span class="koboSpan" id="kobo.1494.1">developer DevTools.</span></span></p>
<h1 id="_idParaDest-101"><a id="_idTextAnchor101"/><span class="koboSpan" id="kobo.1495.1">Loving your new best friend – DevTools</span></h1>
<p><span class="koboSpan" id="kobo.1496.1">While </span><strong class="source-inline"><span class="koboSpan" id="kobo.1497.1">console.log()</span></strong><span class="koboSpan" id="kobo.1498.1"> is available in Node code</span><a id="_idIndexMarker293"/><span class="koboSpan" id="kobo.1499.1"> on the server side, it’s an exceedingly small part of a much larger palette of tools that are available on the client side in the browser. </span><span class="koboSpan" id="kobo.1499.2">To begin exploring that palette, go to a random website of your choosing, maybe www.microsoft.com or some other well-known site, and press </span><em class="italic"><span class="koboSpan" id="kobo.1500.1">F12</span></em><span class="koboSpan" id="kobo.1501.1"> once the page loads. </span><span class="koboSpan" id="kobo.1501.2">You should find a new area in your browser opens up that looks something like </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1502.1">Figure 3</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1503.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1504.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer033">
<span class="koboSpan" id="kobo.1505.1"><img alt="Figure 3.7: Browser DevTools in “action”" src="image/B18315_03_7.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1506.1">Figure 3.7: Browser DevTools in “action”</span></p>
<p><span class="koboSpan" id="kobo.1507.1">These are the browser DevTools, and they are available</span><a id="_idIndexMarker294"/><span class="koboSpan" id="kobo.1508.1"> in some form in all modern web browsers. </span><span class="koboSpan" id="kobo.1508.2">Here, you can dig into the guts of the site you’re viewing. </span><span class="koboSpan" id="kobo.1508.3">As you can see, there are many different tabs, each containing a wealth </span><span class="No-Break"><span class="koboSpan" id="kobo.1509.1">of data:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1510.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.1511.1">Console</span></strong><span class="koboSpan" id="kobo.1512.1"> tab, for example, is perhaps the most used. </span><span class="koboSpan" id="kobo.1512.2">This is where you’ll see the output of those </span><strong class="source-inline"><span class="koboSpan" id="kobo.1513.1">console.log()</span></strong><span class="koboSpan" id="kobo.1514.1"> statements. </span><span class="koboSpan" id="kobo.1514.2">You can also see JS errors here, as well as network requests. </span><span class="koboSpan" id="kobo.1514.3">In fact, now would be a good time to open DevTools while viewing our little user registration app and see what is output to the </span><strong class="bold"><span class="koboSpan" id="kobo.1515.1">Console</span></strong><span class="koboSpan" id="kobo.1516.1"> tab. </span><span class="koboSpan" id="kobo.1516.2">You should see all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1517.1">console.log()</span></strong><span class="koboSpan" id="kobo.1518.1"> messages there, although remember that you’ll only see those for the code running in the browser, not those in the server-side code running in Node (those are output to </span><span class="No-Break"><span class="koboSpan" id="kobo.1519.1">the console).</span></span></li>
<li><span class="koboSpan" id="kobo.1520.1">The other tab that you’ll probably use most often is the </span><strong class="bold"><span class="koboSpan" id="kobo.1521.1">Network</span></strong><span class="koboSpan" id="kobo.1522.1"> tab. </span><span class="koboSpan" id="kobo.1522.2">Here, you can also see network requests, but you’ll see a lot more of them than in the </span><strong class="bold"><span class="koboSpan" id="kobo.1523.1">Console</span></strong><span class="koboSpan" id="kobo.1524.1"> tab and a lot more details about them. </span><span class="koboSpan" id="kobo.1524.2">In fact, assuming you’re looking at that tab now on some site, go ahead and click on a request and examine some of the details. </span><span class="koboSpan" id="kobo.1524.3">You can see things such as the headers sent on the request and the body content, if there </span><span class="No-Break"><span class="koboSpan" id="kobo.1525.1">are any.</span></span></li>
<li><span class="koboSpan" id="kobo.1526.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.1527.1">Elements</span></strong><span class="koboSpan" id="kobo.1528.1"> tab is another area of immense importance because it’s here that you can examine the DOM, examine individual nodes, and even alter their styles directly. </span><span class="koboSpan" id="kobo.1528.2">Yes, you can actually change things about someone else’s web page! </span><span class="koboSpan" id="kobo.1528.3">Not permanently of course, only in your own browser. </span><span class="koboSpan" id="kobo.1528.4">But it’s a fantastic way to see how other developers have done things and how you can modify their work in </span><span class="No-Break"><span class="koboSpan" id="kobo.1529.1">numerous ways.</span></span></li>
<li><span class="koboSpan" id="kobo.1530.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.1531.1">Sources</span></strong><span class="koboSpan" id="kobo.1532.1"> tab is where you can see all the various JS files, CSS files, and other resources that make up the website. </span><span class="koboSpan" id="kobo.1532.2">And again, here you can actually edit that </span><span class="No-Break"><span class="koboSpan" id="kobo.1533.1">code, temporarily.</span></span></li>
<li><span class="koboSpan" id="kobo.1534.1">The other tab I’d say is most important is the </span><strong class="bold"><span class="koboSpan" id="kobo.1535.1">Application</span></strong><span class="koboSpan" id="kobo.1536.1"> tab. </span><span class="koboSpan" id="kobo.1536.2">Here is where you can find things such as cookies (small bits of information stored on your computer by websites) and other data that some sites store on your machine to do </span><span class="No-Break"><span class="koboSpan" id="kobo.1537.1">their work.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1538.1">There are many other tabs, some</span><a id="_idIndexMarker295"/><span class="koboSpan" id="kobo.1539.1"> of which are hidden by default unless and until you decide you need them, but I’d say those four are probably the ones you’ll find yourself using </span><span class="No-Break"><span class="koboSpan" id="kobo.1540.1">most commonly.</span></span></p>
<p><span class="koboSpan" id="kobo.1541.1">But let’s go back to that console object for a moment because </span><strong class="source-inline"><span class="koboSpan" id="kobo.1542.1">log()</span></strong><span class="koboSpan" id="kobo.1543.1"> isn’t the only method it offers. </span><span class="koboSpan" id="kobo.1543.2">While not an exhaustive list, here are a few I think you’ll find </span><span class="No-Break"><span class="koboSpan" id="kobo.1544.1">most interesting:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1545.1">clear()</span></strong><span class="koboSpan" id="kobo.1546.1">: Well, it’s no surprise but this clears the console! </span><span class="koboSpan" id="kobo.1546.2">This comes in handy in sections of your code where you want to focus on some messages and get rid of </span><span class="No-Break"><span class="koboSpan" id="kobo.1547.1">older ones.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1548.1">debug()</span></strong><span class="koboSpan" id="kobo.1549.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1550.1">error(</span></strong><span class="koboSpan" id="kobo.1551.1">)/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1552.1">info()</span></strong><span class="koboSpan" id="kobo.1553.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1554.1">warn()</span></strong><span class="koboSpan" id="kobo.1555.1">: These are similar to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1556.1">log()</span></strong><span class="koboSpan" id="kobo.1557.1"> except that they output messages that are usually colored or highlighted in some way, depending on the severity of the message. </span><span class="koboSpan" id="kobo.1557.2">For example, you can call </span><strong class="source-inline"><span class="koboSpan" id="kobo.1558.1">console.error()</span></strong><span class="koboSpan" id="kobo.1559.1"> to display a message in bold red text so that an error stands out against messages that are just information that you might output with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1560.1">console.info()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1561.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1562.1">console.log()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1563.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1564.1">time()</span></strong><span class="koboSpan" id="kobo.1565.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1566.1">timeEnd(</span></strong><span class="koboSpan" id="kobo.1567.1">)/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1568.1">timeLog()</span></strong><span class="koboSpan" id="kobo.1569.1">: Calling </span><strong class="source-inline"><span class="koboSpan" id="kobo.1570.1">console.time()</span></strong><span class="koboSpan" id="kobo.1571.1"> acts like you pressing the start button on a stopwatch, and then </span><strong class="source-inline"><span class="koboSpan" id="kobo.1572.1">console.timeEnd()</span></strong><span class="koboSpan" id="kobo.1573.1"> acts like you clicking it again, at which point you can call </span><strong class="source-inline"><span class="koboSpan" id="kobo.1574.1">console.timeLog()</span></strong><span class="koboSpan" id="kobo.1575.1"> to display the elapsed time between the (virtual) clicks. </span><span class="koboSpan" id="kobo.1575.2">This is handy when you want to figure out how long some code takes to execute, usually to aid in </span><span class="No-Break"><span class="koboSpan" id="kobo.1576.1">performance tuning.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1577.1">dir()</span></strong><span class="koboSpan" id="kobo.1578.1">: This may not have the best name, but it’s very handy. </span><span class="koboSpan" id="kobo.1578.2">It displays an interactive listing of the properties of a specified JS object. </span><span class="koboSpan" id="kobo.1578.3">You can expand and collapse sections of it, making it much easier to navigate </span><span class="No-Break"><span class="koboSpan" id="kobo.1579.1">larger objects.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1580.1">As with the tabs in DevTools, there are several more methods, but these are probably the most common. </span><span class="koboSpan" id="kobo.1580.2">Note that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1581.1">console</span></strong><span class="koboSpan" id="kobo.1582.1"> object available in your Node code has most of these same methods, although the logging functions may not output messages with the same styling as in </span><span class="No-Break"><span class="koboSpan" id="kobo.1583.1">the browser.</span></span></p>
<p><span class="koboSpan" id="kobo.1584.1">As a web developer, you’ll find yourself using browser DevTools </span><em class="italic"><span class="koboSpan" id="kobo.1585.1">a lot</span></em><span class="koboSpan" id="kobo.1586.1">, so I would very much encourage you to explore some random sites with them and see what you can do with them. </span><span class="koboSpan" id="kobo.1586.2">There is an awful lot of power there – you could write a whole book on browser DevTools alone if you wanted to – and the best way to learn what they’re capable of is to simply jump in </span><span class="No-Break"><span class="koboSpan" id="kobo.1587.1">and experiment.</span></span></p>
<p><span class="koboSpan" id="kobo.1588.1">To help you along though – and assuming you’re using a Chromium-based browser such as Chrome, Edge Opera, Vivaldi, or Brave – going right to the source is probably best, and that means the Google</span><a id="_idIndexMarker296"/><span class="koboSpan" id="kobo.1589.1"> DevTools team’s website: </span><a href="https://developer.chrome.com/docs/devtools"><span class="koboSpan" id="kobo.1590.1">https://developer.chrome.com/docs/devtools</span></a><span class="koboSpan" id="kobo.1591.1">. </span><span class="koboSpan" id="kobo.1591.2">Note that non-Chromium browsers such as Firefox and Safari also have DevTools, and they’ll be substantially the same, although certainly with differences and perhaps their </span><span class="No-Break"><span class="koboSpan" id="kobo.1592.1">own capabilities.</span></span></p>
<p><span class="koboSpan" id="kobo.1593.1">Remember that you can’t do any harm</span><a id="_idIndexMarker297"/><span class="koboSpan" id="kobo.1594.1"> playing around with DevTools because you’re not modifying the code of a website for anyone but yourself on your own machine, so there’s no reason not to mess around! </span><span class="koboSpan" id="kobo.1594.2">If you get yourself into a pickle, you have only to reload the page, and everything will return </span><span class="No-Break"><span class="koboSpan" id="kobo.1595.1">to normal.</span></span></p>
<h1 id="_idParaDest-102"><a id="_idTextAnchor102"/><span class="koboSpan" id="kobo.1596.1">Reviewing the roadmap</span></h1>
<p><span class="koboSpan" id="kobo.1597.1">With this chapter </span><a id="_idIndexMarker298"/><span class="koboSpan" id="kobo.1598.1">concluded, we can now fill in a few more boxes in our web </span><span class="No-Break"><span class="koboSpan" id="kobo.1599.1">developer roadmap:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer034">
<span class="koboSpan" id="kobo.1600.1"><img alt="Figure 3.8: The roadmap, with a few more boxes filled in" src="image/B18315_03_8.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1601.1">Figure 3.8: The roadmap, with a few more boxes filled in</span></p>
<p><span class="koboSpan" id="kobo.1602.1">With this chapter, you opened up the </span><strong class="bold"><span class="koboSpan" id="kobo.1603.1">Networking</span></strong><span class="koboSpan" id="kobo.1604.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1605.1">Developer Tooling</span></strong><span class="koboSpan" id="kobo.1606.1"> boxes on the roadmap. </span><span class="koboSpan" id="kobo.1606.2">Of course, you also built up some knowledge about the boxes that were opened in the previous chapter too. </span><span class="koboSpan" id="kobo.1606.3">Hopefully, the big picture is starting to form in your mind now, at least a little bit. </span><span class="koboSpan" id="kobo.1606.4">The upcoming chapters will expand that picture of course – some a little, some a lot, but </span><span class="No-Break"><span class="koboSpan" id="kobo.1607.1">always expanding!</span></span></p>
<h1 id="_idParaDest-103"><a id="_idTextAnchor103"/><span class="koboSpan" id="kobo.1608.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1609.1">In this chapter, you built a simple user registration page and a server to work with it, using the “classic web” approach. </span><span class="koboSpan" id="kobo.1609.2">You first built the frontend using some new concepts, including basic HTML forms to demonstrate submitting data to the server that way, and some new CSS properties, including shorthand properties. </span><span class="koboSpan" id="kobo.1609.3">Then, you saw how to build a server that accepts that data and generates a response for the client that is then displayed in the browser using another new concept, HTML tables, to display </span><span class="No-Break"><span class="koboSpan" id="kobo.1610.1">tabular data.</span></span></p>
<p><span class="koboSpan" id="kobo.1611.1">Then, you saw an entirely different approach to transmitting data to a server and receiving a response, an approach that leads to the more modern SPA paradigm. </span><span class="koboSpan" id="kobo.1611.2">This included building the frontend code that introduced some new JS concepts, including </span><strong class="source-inline"><span class="koboSpan" id="kobo.1612.1">async</span></strong><span class="koboSpan" id="kobo.1613.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1614.1">await</span></strong><span class="koboSpan" id="kobo.1615.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1616.1">fetch()</span></strong><span class="koboSpan" id="kobo.1617.1">. </span><span class="koboSpan" id="kobo.1617.2">You saw how the server can handle a new kind of request from a client and generate a new kind of response using JSON, allowing the browser to display the results without overwriting the entire page. </span><span class="koboSpan" id="kobo.1617.3">Finally, you saw how your web browser provides tools specifically for developers to examine pages, explore JS and CSS, and work with any website out there at the level of the code </span><span class="No-Break"><span class="koboSpan" id="kobo.1618.1">behind it.</span></span></p>
<p><span class="koboSpan" id="kobo.1619.1">In the next chapter, we’ll step back from code a little bit (not completely though!) and look at some other topics that a web developer should be familiar with, including source control, Linux, security, integrated development environments, </span><span class="No-Break"><span class="koboSpan" id="kobo.1620.1">and Python.</span></span></p>
</div>


<div class="Content" id="_idContainer036">
<h1 id="_idParaDest-104" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor104"/><span class="koboSpan" id="kobo.1.1">Part 2: Expanding Your  Knowledge Base</span></h1>
</div>
<div id="_idContainer037">
<p><span class="koboSpan" id="kobo.2.1">In this part, you’ll continue to gain technical knowledge about web development, including things such as developer tooling, security concerns, cloud infrastructure, virtual machines and containers, </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">and DevOps.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">We’ll also talk about modern frontend frameworks such as React, Angular, and Vue, and see how they can be used to accelerate development, as well as talk about responsive design on </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">the frontend.</span></span></p>
<p><span class="koboSpan" id="kobo.6.1">We’ll then flip over to look at some backend concerns and technologies, including how to build servers with Node.js and Express, Java and Spring Boot, and PHP </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">and Python.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">Finally, we’ll begin to talk about some technologies that have the goal of allowing you to be a web developer while doing less coding. </span><span class="koboSpan" id="kobo.8.2">These include things such as content management systems (like WordPress and Drupal) and so-called “no-code” solutions such as GoDaddy’s </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">Website Builder.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">This part includes the </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">following chapters:</span></span></p>
<ul>
<li><a href="B18315_04.xhtml#_idTextAnchor105"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 4</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Managing, Securing, and Working with Code</span></em></li>
<li><a href="B18315_05.xhtml#_idTextAnchor129"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Understanding the User Experience, Deployment Options, and DevOps</span></em></li>
<li><a href="B18315_06.xhtml#_idTextAnchor159"><em class="italic"><span class="koboSpan" id="kobo.18.1">Chapter 6</span></em></a><span class="koboSpan" id="kobo.19.1">, </span><em class="italic"><span class="koboSpan" id="kobo.20.1">Exploring Modern Frontend Development</span></em></li>
<li><a href="B18315_07.xhtml#_idTextAnchor176"><em class="italic"><span class="koboSpan" id="kobo.21.1">Chapter 7</span></em></a><span class="koboSpan" id="kobo.22.1">, </span><em class="italic"><span class="koboSpan" id="kobo.23.1">From Front to Back – More on Backend Tools and Technologies</span></em></li>
<li><a href="B18315_08.xhtml#_idTextAnchor203"><em class="italic"><span class="koboSpan" id="kobo.24.1">Chapter 8</span></em></a><span class="koboSpan" id="kobo.25.1">, </span><em class="italic"><span class="koboSpan" id="kobo.26.1">Writing Less Code – CMSs, No-Code Solutions, and Generative AI</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer038">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer039">
</div>
</div>
</body></html>