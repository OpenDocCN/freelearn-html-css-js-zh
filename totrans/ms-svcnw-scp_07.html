<html><head></head><body>
        

                            
                    <h1 class="header-title">Introduction to Custom Pages</h1>
                
            
            
                
<p class="mce-root">For this chapter, we are going to take a look at building custom pages. This will also introduce scripting in Jelly code, and where and when to use it. We will also take a look at how to build a custom UI page.</p>
<p>We will look at the following topics while introducing custom pages:</p>
<ul>
<li>Introduction to Jelly</li>
<li>UI pages</li>
<li>Custom page examples</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction to Jelly</h1>
                
            
            
                
<p>Jelly is certainly a lesser known language to script in. It does not appear in the majority of ServiceNow, only on the outskirts of the platform. However, if you want to create custom pages in ServiceNow, it is a must to learn.</p>
<p>It is unfortunate that Jelly is a lesser known language, as documentation on how to use it is therefore also in short supply. Using pages already created in Jelly or the ServiceNow community can be very useful when getting started due to this general lack of information in the developer space.</p>
<p>One of the main areas you will find Jelly script is in UI pages, which we'll take a look at later in the chapter. Jelly code is found in XML field types, as it is a Java and XML scripting engine that allows XML to be turned into executable code.</p>
<p>When looking at Jelly script, you will see that it is almost always started and finished with the same tags. Let's have a look at this code:</p>
<pre>&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br/>&lt;j:jelly trim="false"    &gt;<br/><br/>&lt;/j:jelly&gt;</pre>
<p>This code sets up the XML version and encoding, and then the Jelly tags are written. <kbd>Trim</kbd> sets whether the whitespace inside this tag should be trimmed, and we set this to <kbd>false</kbd>. The other four attributes set up the tags and phases for the Jelly script.</p>
<p>Jelly is split into two phases of processing. The first phase tags are <kbd>j</kbd> and <kbd>g</kbd>, with the second phase being <kbd>j2</kbd> and <kbd>g2</kbd>. In the first phase, the <kbd>j</kbd> and <kbd>g</kbd> tags are parsed, with the result being cached, followed by the second phase of the <kbd>j2</kbd> and <kbd>g2</kbd> tags. When the script is run subsequently, only the second phase will be parsed again, using the cached data for phase one.</p>
<p>This means that it is a good practice to set data that is unlikely to change in the first phase with constantly changing data in the second phase. The <kbd>j</kbd> tags are native to Jelly and the <kbd>g</kbd> tags have been created especially for ServiceNow.</p>
<p>Jelly is a necessary skill to learn for creating UI pages and we will look further at how to script in Jelly in the next chapter.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">UI pages</h1>
                
            
            
                
<p>UI pages are pages of script and XML that exist all across the ServiceNow platform. There are many UI pages that you will see as you navigate through ServiceNow, including the home pages for the service catalog and knowledge. UI pages are also a way to make custom pages where you can define everything that appears on the page.</p>
<p>Let's look at creating a new UI page. We start by giving our UI page a name; make sure you make a note of the name, as it will be needed to reference the page later on. The category field is mainly for reference and does not provide any additional functionality. It can be helpful for grouping your UI pages.</p>
<p>There are three fields that can contain code in a UI page; they are:</p>
<ul>
<li>HTML</li>
<li>Client script</li>
<li>Processing script</li>
</ul>
<p>The HTML field is where the Jelly script is held, and ServiceNow provides the tags for you to start your Jelly coding:</p>
<pre>&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br/>&lt;j:jelly trim="false"    &gt;<br/><br/>&lt;/j:jelly&gt;</pre>
<p>These are the standard tags we saw when introducing Jelly scripting, so we can start to add our Jelly script inside the Jelly tags.</p>
<p>The Client script field is a script field that client-side code can be written inside of. This client-side code runs when the UI page is loaded. This script could be put into the HTML field, but it is easier to read if separated out into the two fields.</p>
<p>The Processing script field is a script field as well, but this field runs server-side script. The script runs when the page is submitted, so is helpful when creating forms on a custom page.</p>
<p>UI pages can be accessed from anywhere in ServiceNow by adding the name of the UI page and <kbd>.do</kbd> onto the end of the instance URL. This means that you can navigate to a UI page you create very easily.</p>
<p>Let's have a look at a simple UI page to show how written code appears in the UI page. Here is the code in the HTML field:</p>
<pre>&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br/>&lt;j:jelly trim="false"    &gt;<br/>Sample UI Page Text<br/>&lt;/j:jelly&gt;</pre>
<p>With this code, we will simply see the text Sample UI Page Text on the screen of our UI page. We can also add some code to the client script field to see when this is run:</p>
<pre>alert('Page loaded');</pre>
<p>We will just use an <kbd>alert</kbd> here, as we are scripting on the client side to show when the code runs.</p>
<p>Our whole UI page definition can be seen in <em>Figure 7.1</em>:</p>
<div><img class="alignnone size-full wp-image-526 image-border" src="img/510e9c90-cc26-4695-8323-835fccf64fd7.png" style="width:117.00em;height:88.75em;"/></div>
<p>Figure 7.1: Sample UI page definition</p>
<p>We can also take a look at how this page would look by navigating to <kbd>sample_page.do</kbd>, as shown in <em>Figure 7.2</em>:</p>
<div><img class="alignnone size-full wp-image-527 image-border" src="img/9c06b764-6da7-47f6-98da-9c05f9593687.png" style="width:43.42em;height:29.25em;"/></div>
<p>Figure 7.2: Sample UI page example</p>
<p>UI pages are a great way to create custom pages and move away from the standard ServiceNow form and list layouts seen across the platform. They also give you the opportunity to create a page truly from scratch, containing whatever information and data you like.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Script examples</h1>
                
            
            
                
<p>Now that we have seen how to create a custom page, let's have a look at an example of how to make a working UI page.</p>
<p>For our example, we will create our own change interceptor. This is usually seen when creating a new change, but for the example, we will create a UI page to be the page navigated to.</p>
<p>Here is the code we will use in the HTML field:</p>
<pre>&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br/>&lt;j:jelly trim="false"    &gt;<br/>  <br/>&lt;nav class="navbar navbar-default" role="navigation"&gt;<br/>&lt;div class="container-fluid"&gt;<br/>  &lt;div class="navbar-header"&gt;<br/>    &lt;input type="HIDDEN" id="sysverb_back"&gt;&lt;/input&gt;<br/>    &lt;h1 style="display:inline-block;" class="navbar-title"&gt;Change Request &lt;/h1&gt;<br/>  &lt;/div&gt;<br/>  &lt;div class="nav navbar-right"&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;<br/>&lt;/nav&gt;<br/>&lt;div class="container-fluid" style="border-bottom: 1px solid #ddd; margin-bottom: 5px;"&gt;<br/>  &lt;h4 class="wizard-row-indent"&gt;What type of change is required?&lt;/h4&gt;<br/>&lt;/div&gt;<br/>&lt;div class="container-fluid wizard-container"&gt;<br/>  &lt;a href="change_request.do?sysparm_query=type=standard"&gt;<br/>  Standard Change - A predefined change. &lt;/a&gt;&lt;br/&gt;<br/><br/>  &lt;a href="change_request.do?sysparm_query=type=normal"&gt;<br/>  Normal Change - A regular change with over two weeks until start. &lt;/a&gt;&lt;br/&gt;<br/><br/>  &lt;a href="change_request.do?sysparm_query=type=emergency"&gt;<br/>  Emergency Change - A change occuring within two weeks. &lt;/a&gt;<br/>&lt;/div&gt; <br/>  <br/>&lt;/j:jelly&gt;</pre>
<p>Here, we have used HTML tags to create our own interceptor in the style of the change interceptor. This makes it easy to change aspects of the page in any way we want to, rather than having to use the ServiceNow interceptors module.</p>
<p>By looking at the source code of the change interceptor, here we have used code from the actual interceptor to keep the look and feel of the page in line with ServiceNow. It is often good to make your custom pages look like they fit into the ServiceNow platform to give a good user experience.</p>
<p>In our example, we are allowing the user to pick one of three change choices, and then redirecting them to a new change of that type. In the tag creating the link, we can see how the URL changes for each choice. We use <kbd>sysparm_query</kbd> in the URL to set values on a new form. For our example, we are using this to set the change type.</p>
<p>Let's have a look at the UI page itself in <em>Figure 7.3</em>:</p>
<div><img src="img/9ec4f0b5-9ce1-49d7-a921-8c942b80cbe1.png"/></div>
<p>Figure 7.3: Intercepter UI page definition</p>
<p>If we wanted to use this page when a change was created, we could amend Create New module in the change application to navigate to the UI page by making the module navigate to the URL <kbd>change_interceptor.do</kbd>.</p>
<p>Let's see what the UI page will look like in <em>Figure 7.4</em>:</p>
<div><img class="alignnone size-full wp-image-528 image-border" src="img/71222bd7-700f-4a77-9bc8-f9cd78d33aa5.png" style="width:37.33em;height:15.25em;"/></div>
<p>Figure 7.4: Intercepter UI page example</p>
<p>We can see the three options we defined on the page with the ServiceNow style navigation header.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>In this chapter, we looked at starting to build a custom page. We introduced Jelly scripting, UI pages, and where Jelly is used inside a UI page definition. We also had a look at a UI page example to see how one is written and how it looks to the user once completed.</p>
<p>In the following chapter, we will explore Jelly scripting more, looking further than the basics. We also introduce UI macros, a way to add reusable components and scripts to UI pages and other areas of ServiceNow. We will also take a look at how we can use UI pages and UI macros together in a practical example.</p>


            

            
        
    </body></html>