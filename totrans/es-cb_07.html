<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Creating Classes</h1>
                </header>
            
            <article>
                
<p class="mce-root">In this chapter, we will cover the following recipes:</p>
<ul>
<li>Creating a new class</li>
<li>Assigning properties with constructor arguments</li>
<li>Defining methods on a class</li>
<li>Checking the instance type with instanceOf</li>
<li>Using getters to create read-only properties</li>
<li>Using setters to encapsulate values</li>
<li>Using static methods to work with all instances</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p>Creating and extending similar objects has always been possible with JavaScript's prototypical inheritance model. By using the <kbd>new</kbd> operator and adding prototype properties, we can create structures that behave like classes.</p>
<p>ECMAScript 2015 introduced class syntax as a friendlier way to work with prototypical inheritance. It has been argued that this <em>syntactic sugar</em> is not worth the overhead of having two ways to implement OOP structures. However, I would argue that class provides a more concise way of expressing the same idea, and is a net benefit. As we'll see in this chapter and the next, the class syntax makes it easier to express sophisticated OOP relationships.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a new class</h1>
                </header>
            
            <article>
                
<p>The most fundamental task class can be used for is, of course, creating a new class. This recipe shows the simple syntax for defining and instantiating a new class.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you already have a workspace that allows you to create and run ES modules in your browser. If you don't, please see the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application and navigate to your workspace.</li>
<li>Create a new folder named <kbd>07-01-create-a-new-class</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that defines a new class named <kbd>Rocket</kbd> and a <kbd>main</kbd> function that creations two instances and logs them out:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket {} 
 
export function main() { 
  const saturnV = new Rocket(); 
  const falconHeavy = new Rocket(); 
  console.log(saturnV); 
  console.log(falconHeavy); 
}  </pre>
<ol start="5">
<li>Start your Python web server and open the following link in your browser: <br/>
<span class="URLPACKT"><kbd>http://localhost:8000/</kbd>.</span></li>
<li>You will see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/bc310b0e-4ae3-4e57-b9ea-ecc7f407d6cb.png" style="width:63.08em;height:35.58em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The <kbd>classRocket {}</kbd> syntax is the equivalent to creating a function named <kbd>Rocket</kbd> (notice the <kbd>constructor</kbd> value of the logged object). This means that, in JavaScript, instances of <kbd>Rocket</kbd> can be created with the <kbd>new</kbd> operator. This creates an object based on the prototype.</p>
<p>We'll see how to make some more interesting objects in future recipes.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Assigning properties with constructor arguments</h1>
                </header>
            
            <article>
                
<p>Now that we have a new class, it's time to start differentiating instances. In this recipe, we'll see how to assign properties when instances are created, via constructor arguments.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you already have a workspace that allows you to create and run ES modules in your browser. If you don't, please see the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application and navigate to your workspace.</li>
<li>Create a new folder named <kbd>07-02-assigning-constructor-props</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file that creates a new class named <kbd>Rocket</kbd>. Add a <kbd>constructor</kbd> method that takes a single argument, <kbd>name</kbd>, and assigns it to a property of the same name in the body of the method:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
} </pre>
<ol start="5">
<li>Create a <kbd>main</kbd> function that creates two instances and logs them out with their property:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const saturnV = new Rocket('Saturn V'); 
  const falconHeavy = new Rocket('Falcon Heavy'); 
  console.log(saturnV.name, saturnV); 
  console.log(falconHeavy.name, falconHeavy); 
} </pre>
<ol start="6">
<li>Start your Python web server and open the following link in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
</ol>
<ol start="7">
<li>You should see the following output displayed:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a4b23e7e-421c-4a1e-83db-2333fe0c711c.png" style="width:48.42em;height:27.25em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>As we saw in the previous recipe, the class syntax creates an empty <kbd>constructor</kbd> function if none is defined. A <kbd>constructor</kbd> is a method that is called immediately after a class is instantiated. Here, we create a new <kbd>Rocket</kbd> instance as follows:</p>
<pre>const saturnV = new Rocket('Saturn V');</pre>
<p>This means that the name property is actually assigned before that rocket instance is returned from the <kbd>new</kbd> expression and assigned to <kbd>saturnV</kbd>.</p>
<p>In this recipe, we define the <kbd>constructor</kbd>. The context of the <kbd>constructor</kbd> function, the value of <kbd>this</kbd>, is the instance of the new object. Therefore, when we assign the <kbd>name</kbd> property of <kbd>this</kbd><strong>,</strong> it is set on that new instance.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Defining methods on a class</h1>
                </header>
            
            <article>
                
<p>Classes that hold values are not particularly interesting. We also want them to be able to have some behaviors that act as interfaces to the outside world. In this recipe, we'll see how to add methods to a class.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you already have a workspace that allows you to create and run ES modules in your browser. If you don't, please see the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application and navigate to your workspace.</li>
<li>Create a new folder named <kbd>07-03-defining-methods</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> with a class named <kbd>Rocket</kbd>, which assigns a <kbd>name</kbd> property upon construction:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
} </pre>
<ol start="5">
<li>Add a method named <kbd>takeoff</kbd> that accepts an option countdown argument. The body of the method should log a message before and after a timeout:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
class Rocket { 
  // ... 
  takeOff(countdown = 1000) { 
    console.log(this.name + ' starting countdown.'); 
    setTimeout(() =&gt; { 
      console.log(`Blastoff! ${this.name} has taken off`); 
    }, countdown); 
  } 
} </pre>
<ol start="6">
<li>Add a <kbd>main</kbd> function that creates two instances and then calls their <kbd>takeOff</kbd> methods:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const saturnV = new Rocket('Saturn V'); 
  const falconHeavy = new Rocket('Falcon Heavy'); 
  saturnV.takeOff(500); 
  falconHeavy.takeOff(); 
}  </pre>
<ol start="7">
<li>Start your Python web server and open the following link in your browser: <br/>
<span class="URLPACKT"><kbd>http://localhost:8000/</kbd>.</span></li>
<li>You will see the following output:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/33a85f9f-798b-4a8b-8eb9-bf978e115831.png" style="width:49.75em;height:28.00em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Adding methods to the body of a class definition is the same as attaching properties to the prototype of a function, with functions as their values. This means that those properties are added as properties to the instance of the new object. When these methods are called, the context (the value of <kbd>this</kbd>) is the current instance.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Checking instance type with instanceOf</h1>
                </header>
            
            <article>
                
<p>There are many situations, such as argument validation, where we'll want to check the class of an object. Because JavaScript is not statically typed, we can't guarantee that a function receives an argument of the correct type before the program starts, and we need to check at runtime.</p>
<p>In this recipe, we'll see how to use the <kbd>instanceOf</kbd> operator to check an object's prototype at runtime.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you already have a workspace that allows you to create and run ES modules in your browser. If you don't, please see the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application and navigate to your workspace.</li>
<li>Create a new folder named <kbd>07-04-checking-with-instanceof</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
</ol>
<ol start="4">
<li>Create a <kbd>main.js</kbd> with two identical classes, <kbd>Rocket</kbd> and <kbd>InactiveRocket</kbd>:</li>
</ol>
<pre style="padding-left: 90px">// main.js class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
} 
 
class InactiveRocket { 
  constructor(name) { 
    this.name = name; 
  } 
}  </pre>
<ol start="5">
<li>Create a function named <kbd>printRocketType</kbd> that uses <kbd>instanceOf</kbd> to distinguish between rocket classes:</li>
</ol>
<pre style="padding-left: 90px">// main.js class Rocket { 
function printRocketType(rocket) { 
  if (rocket instanceof InactiveRocket) { 
    console.log(rocket.name + ' is an inactive rocket'); 
  } else { 
    console.log(rocket.name + ' is active'); 
  } 
} </pre>
<ol start="6">
<li>Create a <kbd>main</kbd> function that creates rockets of either class and then calls <kbd>printRocketType</kbd> on both of them:</li>
</ol>
<pre style="padding-left: 90px">// main.js 
export function main() { 
  const saturnV = new InactiveRocket('Saturn V'); 
  const falconHeavy = new Rocket('Falcon Heavy'); 
 
  [saturnV, falconHeavy].forEach(printRocketType); 
} </pre>
<ol start="7">
<li>Start your Python web server and open the following link in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
</ol>
<ol start="8">
<li>You should see the following output displayed:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b6e16b1a-f376-43d2-ba6a-ee3a292ef04a.png" style="width:52.42em;height:29.50em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The <kbd>instanceOf</kbd> operator compares a prototype of the left-hand value with the right-hand value. If the two match, the expression is evaluated as true, otherwise it evaluates as false. Thus, we can use it in a conditional expression.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using getters to create read-only properties</h1>
                </header>
            
            <article>
                
<p>We don't always want a property to be writable. In previous recipes, we saw how to create a read-only property on an object. In this recipe, we'll see how to use the <kbd>get</kbd> keyword to do this in the context of a class body.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you already have a workspace that allows you to create and run ES modules in your browser. If you don't, please see the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application and navigate to your workspace.</li>
<li>Create a new folder named <kbd>07-05-getters-read-only</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file with the <kbd>Rocket</kbd> class that defines a read only property:</li>
</ol>
<pre style="padding-left: 90px">class Rocket { 
  constructor(name) { 
    this.name = name; 
  } 
 
  get readOnlyValue() { 
    return 'Cant' touch this.'; 
  } 
} </pre>
<ol start="5">
<li>Create a <kbd>main</kbd> function that creates an instance of the <kbd>Rocket</kbd> class. Read from the writable and read-only properties, then try to write to them:</li>
</ol>
<pre style="padding-left: 90px">export function main() { 
  const saturnV = new Rocket('Saturn V'); 
 
  console.log(saturnV.name); 
  saturnV.name = 'Saturn Five'; 
  console.log(saturnV.name); 
 
  console.log(saturnV.readOnlyValue); 
  // throws error 
  saturnV.readOnlyValue = 'somethingElse'; 
} </pre>
<ol start="6">
<li>Start your Python web server and open the following link in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
</ol>
<ol start="7">
<li>You should see the following output displayed:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ab45130e-2a43-4732-ae74-582d1e6767bb.png" style="width:51.67em;height:29.08em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Using the <kbd>get</kbd> keyword creates a read-only property that has a function for a value. We return a string from that function, so that,when the property is read, that value is returned. However, because it is read-only, a run-time error is thrown when we try to write to it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using setters to encapsulate values</h1>
                </header>
            
            <article>
                
<p>In the previous recipe, we saw how to prevent values from being written<strong>.</strong> Sometimes however, we don't want to prevent a property from being written to. Rather, we want to control how it is written to. In this recipe, we'll see how to use <kbd>set</kbd> to control the writing of a property.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you already have a workspace that allows you to create and run ES modules in your browser. If you don't, please see the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application and navigate to your workspace.</li>
<li>Create a new folder named <kbd>07-06-setters-encapsulate</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
<li>Create a <kbd>main.js</kbd> file with a <kbd>Rocket</kbd> class that writes a ­<kbd>_secretName</kbd> property upon construction:</li>
</ol>
<pre style="padding-left: 90px">class Rocket { 
  constructor(name) { 
    this._secretName = name; 
  }  
} </pre>
<ol start="5">
<li>Add a getter and setter for a <kbd>name</kbd> property and only update it if the <kbd>newValue</kbd> is a string:</li>
</ol>
<pre style="padding-left: 90px">class Rocket { 
  // ... 
<strong>  get name() {<br/>    </strong><strong>return this._secretName;<br/></strong><strong>  }<br/><br/></strong><strong>  set name(newValue) {<br/></strong><strong>    if (typeof newValue === 'string') {<br/></strong><strong>      this._secretName = newValue;<br/></strong><strong>    } else {<br/></strong><strong>      console.error('Invalid name: ' + newValue)<br/></strong><strong>    }<br/></strong><strong> }</strong></pre>
<ol start="6">
<li>Create a <kbd>main</kbd> function that tries to set the <kbd>name</kbd> property to different values:</li>
</ol>
<pre style="padding-left: 90px">export function main() { 
  const saturnV = new Rocket('Saturn V'); 
  console.log(saturnV.name) 
   
  saturnV.name = 'Saturn Five'; 
  console.log(saturnV.name) 
   
  saturnV.name = 5; 
  console.log(saturnV.name) 
} </pre>
<ol start="7">
<li>Start your Python web server and open the following link in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
<li>You should see the following output displayed:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8d8e478c-b257-494d-aa9d-a90d328834d0.png" style="width:52.75em;height:32.92em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Like the <kbd>get</kbd> keyword, the <kbd>set</kbd> keyword calls a function property when a property is written to. Instead of setting the value directly, we are able to perform a type check. If the <kbd>newValue</kbd> is a string, it is written as normal. Otherwise, we log an error, and do not set the value of the secret property.</p>
<p>Obviously, <kbd>_secretName</kbd> can be written directly. This has to be solved through documentation. Users of a library should only be using the public interface. They deviate at their own risk!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using static methods to work with all instances</h1>
                </header>
            
            <article>
                
<p>It can be a good idea to organize methods on a class, rather than on an instance of a class. One example is the <strong>Manager</strong> pattern. This pattern is useful when an object is expensive to create, or will be reused a lot.</p>
<p>In this recipe, we'll see how to use the <kbd>static</kbd> keyword to create a map for reusing instances of the <kbd>Rocket</kbd> class.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>This recipe assumes you already have a workspace that allows you to create and run ES modules in your browser. If you don't, please see the first two chapters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Open your command-line application and navigate to your workspace.</li>
<li>Create a new folder named <kbd>07-07-static-methods-on-all-instances</kbd>.</li>
<li>Copy or create an <kbd>index.html</kbd> that loads and runs a <kbd>main</kbd> function from <kbd>main.js</kbd>.</li>
</ol>
<ol start="4">
<li>Create a <kbd>main.js</kbd> file with an empty object <kbd>rocketMap</kbd> and a class <kbd>Rocket</kbd>:</li>
</ol>
<pre style="padding-left: 90px">//main.js<br/>let rocketMap = {};  
 
class Rocket {} </pre>
<ol start="5">
<li>Create a static method named <kbd>find</kbd> that looks up rockets by string on the <kbd>Rocket</kbd> class:</li>
</ol>
<pre style="padding-left: 90px">class Rocket { 
  // ... 
<strong>  static find (name) {<br/></strong><strong>    return rocketMap[name];<br/></strong><strong>  }</strong> 
} </pre>
<ol start="6">
<li>Add a construction that assigns a name property, and assigns the instance to the <kbd>rocketMap</kbd>:</li>
</ol>
<pre style="padding-left: 90px">class Rocket { 
  // ... 
<strong>  constructor(name) {<br/></strong><strong>    this.name = name;<br/></strong><strong>    rocketMap[name] = this;<br/></strong><strong>  }</strong> 
} </pre>
<ol start="7">
<li>Create a <kbd>main</kbd> function that compares created instances of <kbd>Rocket</kbd> with results of the static <kbd>find</kbd> method:</li>
</ol>
<pre style="padding-left: 90px">//main.js<br/>export function main() { 
  const saturnV = new Rocket('Saturn V'); 
  const falconHeavy = new Rocket('Falcon Heavy'); 
 
  console.log('Is Saturn V?', saturnV === Rocket.find('Saturn <br/>  V')); 
  console.log('Is Falcon Heavy?', falconHeavy === <br/>  Rocket.find('Saturn V')); 
  console.log('Is Same Rocket?', Rocket.find('Saturn V') === <br/>  Rocket.find('Saturn V')); 
} </pre>
<ol start="8">
<li>Start your Python web server and open the following link in your browser:<br/>
<kbd>http://localhost:8000/</kbd>.</li>
<li>You should see the following output displayed:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7d33985f-1875-4932-8915-a60acc4726ff.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The static keyword means that the function will be a property of the <kbd>Rocket</kbd> class, rather than an instance. This is the same as setting a function property directly on a function, rather than on its prototype. Thus, we call the function as a property of the class, not an instance.</p>
<p> </p>


            </article>

            
        </section>
    </body></html>