<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Setting Up Your Development Environment</h1>
                </header>
            
            <article>
                
<p><span><span>Welcome! This book is designed to get you started with writing robotics code in JavaScript using the Raspberry Pi, Node.js, and the Johnny-Five framework. This chapter will fill in the details of what the Raspberry Pi is and how we're going to use it, and will also help you get your development environment ready. </span></span></p>
<p>The following topics will be covered in this chapter:</p>
<ul>
<li>What is the Raspberry Pi</li>
<li>How we will use the Raspberry Pi</li>
<li>Installing the operating system</li>
<li>Setting up SSH and hardware interfaces</li>
<li>Installing Node.js</li>
<li>Installing Johnny-Five and Raspi-IO</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>In order to get started, you'll need the following:</p>
<ul>
<li><strong>A Raspberry Pi 3</strong>: Either the original or model B is fine. </li>
<li><strong>A power supply</strong>: Plugging the Raspberry Pi into a USB port on your computer can cause serious issues because it cannot supply enough power to allow the Raspberry Pi to function properly, so you'll need a proper wall wart power supply.</li>
<li><strong>MicroSD card</strong>: This needs to have at least 8 GB to hold the Raspbian OS and the code we're going to write. You'll also need a way to write to the SD card from your computer—either a full SD card adapter or a USB card reader.</li>
<li><strong>A PC9685 GPIO expansion board</strong>: There are expansion boards that require assembly on Adafruit (<a href="https://www.adafruit.com/product/815">https://www.adafruit.com/product/815</a>), but if you're not confident in your soldering, then there are plenty of preassembled ones available on Amazon if you search for <kbd>PC9685</kbd>.</li>
<li><strong>Text editor</strong>: Your code editor will be fine; we just need to edit a few files on the SD card once we've burned the OS image onto it.</li>
</ul>
<p>If this is your first foray into a hardware project, I suggest getting a kit that contains at least the following items, as it will help you finish many of the projects in this book, and will provide you with the parts to create your own designs:</p>
<ul>
<li>Pi Cobbler</li>
<li>Resistors</li>
<li>LEDs</li>
<li>A servo</li>
<li>A motor</li>
<li>Buttons</li>
<li>Other sensors and peripherals</li>
</ul>
<p class="mce-root">The following are some good examples of these items (at the time of writing):</p>
<ul>
<li class="mce-root"><strong>The Raspberry Pi 3 B+ starter kit</strong>: <a href="https://www.sparkfun.com/products/14644">https://www.sparkfun.com/products/14644</a></li>
<li class="mce-root"><strong>The Adafruit Raspberry Pi 3 Model B Starter Pack</strong>: <a href="https://www.adafruit.com/product/2380">https://www.adafruit.com/product/2380</a></li>
<li class="mce-root"><strong>If you already have a Pi, they sell the kit without the Pi as well</strong>: <a href="https://www.adafruit.com/product/3241">https://www.adafruit.com/product/3241</a></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What is the Raspberry Pi?</h1>
                </header>
            
            <article>
                
<p>So, now you've got this green, credit-card-sized object with a bunch of ports that you recognize, and a bunch of pins, as shown in the following diagram. You can see some chips, and some parts you might not recognize. Before we talk about the power contained in this rather inconspicuous board, we need to clear up some vocabulary that we'll be using throughout the book:</p>
<p class="mce-root"/>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-56 image-border" src="assets/cc70eef4-da36-4b73-9d2a-796df9676467.png" style="width:44.92em;height:35.83em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Microcontrollers</h1>
                </header>
            
            <article>
                
<p><strong>Microcontroller</strong> is a term that encapsulates a bunch of devices. It's a term used to describe a device that contains a processor, memory, and input/output peripherals (or ways to interact with those peripherals) that is meant for a particular type of task. One extremely common microcontroller is the Arduino Uno, and the Raspberry Pi technically falls into this category as well.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">General-Purpose Input/Output (GPIO) pins</h1>
                </header>
            
            <article>
                
<p>Microcontrollers interface with devices such as sensors, LEDs, and buttons using electrical signals that are sent and received through pins designed for input and/or output signals. These pins can be broken into multiple subcategories, as we'll find out in subsequent chapters, but you can address them as GPIO pins <span>as a whole</span>. We'll use that abbreviation throughout the book.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Debian and Raspbian</h1>
                </header>
            
            <article>
                
<p>Debian is a distribution of Linux that is considered extremely user friendly for those new to using Linux. It contains many utilities that are commonly used while working with Linux preinstalled, and is compatible with a lot of the peripherals that you would use with a computer, such as Wi-Fi cards and USB devices.</p>
<p>Raspbian is a modified version of Debian specifically designed to run on Raspberry Pi devices. There are drivers for the GPIO pins, USB Wi-Fi devices, and expansion slots on the Pi that allow you to attach a specific display and camera. </p>
<p>There are two flavors of Raspbian—Raspbian Full and Raspbian Lite. Full has a graphical desktop with programs aimed at educational programming and development. Lite (which we will be using for the projects in this book) only has a command-line interface, but still has full functionality when it comes to Raspberry Pi peripherals. As of the time of writing, the current version of Raspbian is 4.14, nicknamed <strong>Stretch</strong>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Johnny-Five and Raspi-IO</h1>
                </header>
            
            <article>
                
<p>Back in 2012, Rick Waldron wrote a <em>node-serialport</em> program to operate an Arduino Uno with Node.js, and formed a library around it called Johnny-Five. Since then, the Johnny-Five library has grown to over 100 contributors, and can control over 40 platforms, including the Raspberry Pi! It can also control many kinds of sensors and peripherals that you can use to create the robotics project you've been dreaming of in Node.js!</p>
<p>One of the ways the Johnny-Five library has grown to support so many platforms is by creating what are called IO plugins. You create an IO plugin for each type of board you wish to control. For example, we will be installing and using the Raspi-IO plugin to use Johnny-Five with the Raspberry Pi.</p>
<p class="mce-root"/>
<p>What is great about this system is that the code you write in this book can be used on any other platform that Johnny-Five supports (you just need to change PIN numbers)! Writing code for Node.js botnets is much easier when you're using the same APIs for any devices you might use.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">So, the Pi is technically a microcontroller...</h1>
                </header>
            
            <article>
                
<p>Let's get back to the question of what the Raspberry Pi is. In short, it is a microcontroller. It has dozens of GPIO pins and can be used to interface with many physical peripherals in order to achieve specialized tasks. The low cost and small size allows the Raspberry Pi to be a versatile device, but the power involved allows you to use it for tasks that other microcontrollers may not pack the punch for.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">...but it is also a computer!</h1>
                </header>
            
            <article>
                
<p>An interesting fact about the Raspberry Pi is that, while it is a microcontroller, it can also be used as a fully fledged computer! While it certainly isn't the most powerful hardware, with full Raspbian installed, a Raspberry Pi attached to a monitor, keyboard, and mouse creates a great machine for kids and adults to learn programming on! The original intent of the Raspberry Pi was to create a low-cost educational machine to teach programming, and it exceeded every expectation in that regard. The fact that it's also a great microcontroller for the world of makers is a great bonus!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How we will use the Raspberry Pi</h1>
                </header>
            
            <article>
                
<p>So, we've established that the Raspberry Pi is a very versatile and powerful machine for its size, but with so many options, it can be hard to figure out where to get started. Luckily, we have a plan that will walk you through your first Raspberry Pi and Johnny-Five projects so that you can keep up, but which will also empower you to build your way into advanced robotics projects.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Taking advantage of all that the Raspberry Pi has to offer!</h1>
                </header>
            
            <article>
                
<p>The projects we will build will take advantage of the fact that the Raspberry Pi is both a microcontroller and a computer. We'll use the Linux operating system, via the Raspbian distribution, and leverage it to run our projects in Node.js. We'll also use Johnny-Five and Raspi-IO to leverage the GPIO of the Raspberry Pi in order to create robotics projects in a way that makes the code easy to understand and portable to many different hardware platforms.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Johnny-Five – letting us code hardware in Node.js</h1>
                </header>
            
            <article>
                
<p>In the past, when you thought of robotics projects, it meant writing in C or C++, usually through the Arduino IDE and APIs. However, as microcontrollers have gotten more powerful, they are capable of running other programming languages, even scripting languages, such as subsets of Python and JavaScript.</p>
<p>And, of course, with computer/microcontroller hybrids, such as the Raspberry Pi, you're able to run stock Node.js, allowing you to create even advanced robotics projects without having to deal with any low-level languages. There are quite a few benefits to being able to code robotics projects in Node.js:</p>
<ul>
<li><strong>Event-based systems</strong>:<strong> </strong>In the Arduino and C/C++ level of robotics programming, you will need to check the state of everything through each iteration of a loop, and act accordingly. This can create monolithic functions and code paths. With Node.js and Johnny-Five, we can use event emitters and systems, which fit in surprisingly well as they can read sensors and interact with peripherals in the real world, where things take time. This will help you to organize code in a way that reflects the asynchronous way the world works.</li>
<li><strong>Garbage collection/automatic memory management</strong>:<strong> </strong>While Arduino and C++ handle most memory management for you, programming in microcontrollers that use C requires strict memory management. While you may need to bear the resource constraints of the Raspberry Pi in mind from time to time, it is much easier than the days of 20K SRAM.</li>
<li><strong>Using a language you already know</strong>:<strong> </strong>Instead of trying to remember the way things work in a new language, it will accelerate your learning in the field of electronics and robotics if you focus on learning fewer things at once. Using Node.js can help you focus on learning the wide and varied world of electronics, instead of adding on the extra work of remembering whether it's <kbd>uint8_t</kbd> or <kbd>uint16_t</kbd>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing the operating system</h1>
                </header>
            
            <article>
                
<p>In order to get started with Johnny-Five and the Raspberry Pi, we will need to set up the Raspbian <span>operating system</span><span> by burning it to a microSD card. Then, we'll need to edit some files on the SD card in order for the Raspberry Pi to boot with Wi-Fi and the ability to SSH in. Lastly, we'll need to boot up the Raspberry Pi and get some settings in place before finally installing Node.js, Johnny-Five, and Raspi-IO.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Downloading Raspbian Lite</h1>
                </header>
            
            <article>
                
<p><span>The following steps will show you how to download Raspbian Lite:</span></p>
<ol>
<li>The first step is downloading the Raspbian Lite image so we can burn it to our microSD card. The best place to get the image from is <a href="https://www.raspberrypi.org/downloads/raspbian/">https://www.raspberrypi.org/downloads/raspbian/</a>, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-80 image-border" src="assets/ed6fe723-213e-4069-a77b-80979b1f2a7f.png" style="width:77.67em;height:20.92em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">A screenshot of the Raspbian download page, with both Full and Lite download links</div>
<ol start="2">
<li>Select <span class="packt_screen">RASPBIAN STRETCH LITE</span> (or whichever version is the current one), which will replace the word <span class="packt_screen">STRETCH</span>. Give yourself some time for this step to complete; although Raspbian Lite is much smaller than Raspbian Full, it is still several hundred megabytes, and can take time to download!</li>
</ol>
<div class="packt_tip">If you're preparing to run a class, hackathon, or some other event using the Raspberry Pi and Raspbian, it's best to predownload it and place it on a flash drive to hand around, as conference and event Wi-Fi can be a bit slower than normal, or even drop in and out, so be prepared!</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Burning the image to an SD card</h1>
                </header>
            
            <article>
                
<p>Luckily, the tools for burning OS images to SD cards have evolved arcane command-line tools that can overwrite your computer's hard drive as easily as it can the SD card. My current favorite is called <strong>Etcher</strong>, and it can be downloaded for any platform at <a href="https://etcher.io/">https://etcher.io/</a>, as shown in the following steps:</p>
<ol>
<li>The free version is more than enough for our needs, so download and install it as you download Raspbian Lite.</li>
<li>Once they are both downloaded, you'll want to place the micro SD card in your computer, either by placing it into a full-sized SD adapter and then into a slot on your computer, or by using a USB-to-micro-SD adapter. Whichever you use, make sure your computer can see the volume as a drive before continuing. Then, boot up Etcher. The following screenshot shows Etcher running on a Mac:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-79 image-border" src="assets/1f67ea05-49b6-48e6-8d2b-b4aca898ffa6.png" style="width:66.67em;height:31.00em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">A screenshot of the Etcher program running on a Mac</div>
<ol start="3">
<li>Once you see a window similar to the preceding screenshot, you'll need to select the Raspbian Lite image you just downloaded. You don't even need to unzip the <kbd>.zip</kbd> file—Etcher can handle that outright! Once you've selected the image, Etcher should select your micro SD card drive, so long as your machine can see it! Once you've ensured that the image and micro SD card drive are properly selected, hit <span class="packt_screen">Flash</span><span class="packt_screen">!</span> to begin the process.</li>
</ol>
<div class="packt_tip">Sometimes, with larger micro SD cards, you'll get a warning from Etcher about the drive being very large <span>(this happens to me when I use 64 GB cards)</span><span>. This is to prevent you from overwriting your computer's hard drive. You can bypass the warning by going through a confirmation window—just be absolutely sure that your micro SD card drive is selected first!</span></div>
<p>A few minutes will pass as Etcher burns <span>the image to your micro SD card</span><span>, then verifies that it is present on the card. Once this is done, </span><strong>remove and reinsert</strong><span> </span><strong>the micro SD card so that your computer recognizes it as a drive again</strong><span>; the drive should be named</span> <kbd>boot</kbd><span>. We're not quite done editing the image files yet, so Etcher's polite attempt to eject the micro SD card drive needs to be ignored.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Editing files on the SD card</h1>
                </header>
            
            <article>
                
<p>We need to edit and create some files on our Raspberry Pi's image in order to be able to access it with SSH when we turn on the Raspberry Pi. First, we'll set up the Wi-Fi using the following steps:</p>
<div class="packt_infobox">If you're using an Ethernet cable and port to connect the Raspberry Pi to the internet, you can skip this step. If this doesn't get the Wi-Fi to work, you'll want to look at the information box under the section <em>Booting up the Pi</em> for troubleshooting steps and an alternative (if clunkier) way to set this up.</div>
<ol>
<li>In order to set up the Wi-Fi, you'll want to create a file in the root of the micro SD card drive called <kbd>wpa_supplicant.conf</kbd> that contains the following text:</li>
</ol>
<pre style="padding-left: 60px">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1<br/>network={
    ssid="yourNetworkSSID"
    psk="yourNetworkPasswd"
}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="2">
<li>Replace <kbd>yourNetworkSSID</kbd> with the SSID of the Wi-Fi network you wish to connect to, and then replace <kbd>yourNetworkPasswd</kbd> with that Wi-Fi's network password.</li>
</ol>
<div class="packt_tip">The Raspberry Pi's Wi-Fi chip can only connect to 2.4 GHz networks at the time of writing, so you need to make sure that you input a network that operates on that bandwidth or your Raspberry Pi will not be able to connect!</div>
<ol start="3">
<li>After you've set up the Wi-Fi network, you'll want to tell the Raspberry Pi to allow you to SSH into it. To do this, you'll want to create a file called <kbd>ssh</kbd> in the same <kbd>root</kbd> folder as the <kbd>wpa_supplicant.conf</kbd> file. Make sure that the <kbd>ssh</kbd> file is empty and has no extension. When you're all done, the <kbd>root</kbd> <span>directory of the micro SD card drive will look similar to the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-78 image-border" src="assets/877a3ed9-5770-40fc-bdd8-dc52681208fd.png" style="width:102.83em;height:22.33em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">A list of files on the micro SD drive, once I've made my edits</div>
<p>Once this is all done, fully eject the microSD drive, take the microSD card and insert it into the Raspberry Pi. We're now ready to boot up the Raspberry Pi and start installing software.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Booting up the Pi</h1>
                </header>
            
            <article>
                
<p>Once the micro SD card is inserted, plug your power source into your Raspberry Pi. A red and green LED should light up. The red LED should be solid—this is the power indicator. The green light will flicker on and <span>off—</span><span>this is the LED that indicates activity. The Raspberry Pi should take a maximum of a minute or so to boot up once you've plugged it in. Next, we'll SSH in. </span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SSHing from a Linux or Mac</h1>
                </header>
            
            <article>
                
<p>If you're on a Mac or Linux machine, you'll open up a Terminal and type the following:</p>
<pre><strong>ssh pi@raspberrypi.local</strong></pre>
<p>If you're successful, you'll see a question appear, asking about the authenticity of the host. Respond by typing <kbd>yes</kbd> and hitting <em>Enter</em>. You'll then be asked for a password, which is <kbd>raspberry</kbd>, as shown in the following screenshot: </p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/9466d77e-c5e3-4b92-9928-2b0138d851e2.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref"><span>Successful SSH into a Raspberry Pi from a Mac Terminal</span></div>
<div class="CDPAlignCenter CDPAlign"/>
<p>Once you've entered the password, you should see the following:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-77 image-border" src="assets/613e5e15-c251-4acd-9f0c-6b0375dc21c8.png" style="width:104.75em;height:33.67em;"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref"><span>Successful login to a Raspberry Pi via SSH from a Mac</span></div>
<div class="CDPAlignCenter CDPAlign"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SSHing from Windows</h1>
                </header>
            
            <article>
                
<p>In order to SSH from a Windows machine, you'll need to use a program called PuTTY. You can get it on <a href="https://putty.org/">https://putty.org/</a>. But first, you'll want your Raspberry Pi's IP address. You'll need a monitor, an HDMI cable, and a USB keyboard. Once you have these, go through the following steps:</p>
<ol>
<li>Plug the <span>monitor, HDMI cable, and USB </span>keyboard into the Raspberry Pi <strong>before booting it up</strong>. Then plug in the power supply.</li>
<li>When it prompts you for a username, type <kbd>pi</kbd>. When it asks for a password, enter <kbd>raspberry</kbd>. Once you are logged in, type <kbd>ifconfig</kbd>. You should see a lot of information appear.</li>
<li>Look for the <kbd>wlan0</kbd> section and the <kbd>inet</kbd> address under that heading. For the following output, the IP is <kbd>192.168.1.106</kbd>, as shown in the following screenshot. Write this IP down. Then, you can unplug the display and the keyboard—you won't need them again:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-76 image-border" src="assets/e84dc231-edd5-4697-97a4-440241f188fc.png" style="width:82.08em;height:44.67em;"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref"><span>Getting the IP address from the Terminal</span></div>
<ol start="4">
<li>Once you have the IP address for your Raspberry Pi, you can boot up PuTTY. The window that opens is the configuration window, as shown in the following screenshot: </li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-342 image-border" src="assets/322759a7-915e-4b72-be8b-a729faca8c2b.png" style="width:37.33em;height:36.33em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The PuTTY configuration window</div>
<ol start="5">
<li>Type the IP address that you obtained into the field labeled <span class="packt_screen">Host Name (or IP address)</span> and click the <span class="packt_screen">Open</span> button. You'll be asked about the authenticity of the host (only the first time you connect). Select <span class="packt_screen">Yes</span>. Then enter <kbd>Pi</kbd> as the username and <kbd>raspberry</kbd> as the password when prompted. Once that's done, you should see the following:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-343 image-border" src="assets/5d5b4faa-4895-4b3b-bfd7-cf7bbbaab0e4.png" style="width:51.75em;height:21.42em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Successful login to the Raspberry Pi with PuTTY</div>
<p>Now that everyone's logged in, let's set up our Raspberry Pi for our projects!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up your password and hardware interfaces</h1>
                </header>
            
            <article>
                
<p><span><span>Now that we have our Raspberry Pi connected to the Wi-Fi and we're SSHed in, we need to make a few changes before we install Node.js and get started with our coding.</span></span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">First things first – change your password!</h1>
                </header>
            
            <article>
                
<p>When you log in, your Raspberry Pi will warn you that having SSH enabled with the default username and password isn't very secure, and it's absolutely right! The first step is to change our password.</p>
<p class="mce-root"/>
<p>In order to do so, in your SSH window, type in <kbd>passwd</kbd> and hit <em>Enter</em>. You'll be prompted for your current password (<kbd>raspberry</kbd>) and a new password. Type in whatever you like (just don't forget it)! You'll be asked to confirm it, and voila! The new password is set, as shown in the following screenshot. Your Raspberry Pi will be much more secure:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-75 image-border" src="assets/3421257f-7ce8-4a96-afcb-90c2d33eb1f5.png" style="width:23.67em;height:9.58em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Changing your Pi password</div>
<div class="CDPAlignCenter CDPAlign"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Updating the Raspberry Pi</h1>
                </header>
            
            <article>
                
<p>Next, you'll make sure that the Raspberry Pi is updated and ready to go by running the following command:</p>
<pre><strong>sudo apt-get update &amp;&amp; sudo apt-get upgrade</strong></pre>
<p>This will take a while, but it's worth it to make sure everything is properly updated.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Turning on the hardware interfaces</h1>
                </header>
            
            <article>
                
<p>Next, we'll set up the Raspberry Pi so that our hardware code can run. Run the following command:</p>
<pre><strong>sudo raspi-config</strong></pre>
<p>You'll be greeted with a graphical menu with lots of different options, as shown in the following screenshot:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-73 image-border" src="assets/dc5aad01-edeb-4be9-9aa0-9bec59d417d8.png" style="width:92.25em;height:35.92em;"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The raspi-config menu</div>
<p>You'll want to use the arrow keys to select <kbd>Interfacing Options</kbd>, and then select <kbd>I2C</kbd> and <kbd>Yes</kbd> to turn it on. Repeat for SPI, then use <em>Tab</em> to close the menu. When it prompts you to reboot, say <kbd>Yes</kbd>, then SSH back in, because you're ready to install Node.js, Johnny-Five, and Raspi-IO!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing Node.js, Johnny-Five, and Raspi-IO</h1>
                </header>
            
            <article>
                
<p>So, now that our Raspbian OS is installed and set up, it's time to install Node.js (which comes bundled with npm), Johnny-Five, and Raspi-IO!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing Node.js and npm</h1>
                </header>
            
            <article>
                
<p>In days past, you would have to compile the Node.js source on your Pi, to varying degrees of success because of the nonexistence of binaries for the ARM processor that Raspberry Pi uses. Luckily now, because of a rousing amount of third-party support in the past few years, you can easily download the binary from the <a href="https://nodejs.org/en/">https://nodejs.org/en/</a> website! But how are we going to do this from the command line of our Raspberry Pi? </p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Detecting your version of ARM processor</h1>
                </header>
            
            <article>
                
<p>If you're using the Raspberry Pi 3 Model B recommended by this book, you're most likely on ARM v8 (the Raspberry Pi 3 original is ARMv7, which is fine too!). But you should always double-check (doubly so if you're using a different Raspberry Pi, such as the Pi Zero or Pi 2/1 series). To check the ARM version on your Raspberry Pi, run the following in your SSH Terminal:</p>
<pre><strong>uname -m</strong></pre>
<p>You'll see a return message that looks like <kbd>armv#</kbd>, where <kbd>#</kbd> is a number (possibly followed by a letter). That number is what is important, because that number tells us which Node.js binary we will need. Once <span>you have your ARM version</span><span>, go through the following steps:</span></p>
<ol>
<li>Head to the Node.js download page at <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-344 image-border" src="assets/c387da8b-63cb-48e4-b65a-bb786db1bbf9.png" style="width:82.50em;height:39.17em;"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">A snapshot of the Node.js binary download page</div>
<ol start="2">
<li>Right-click on the ARM version link you need and copy the URL. Then, run the following in your Raspberry Pi's SSH Terminal:</li>
</ol>
<pre style="padding-left: 60px"><strong>wget &lt;binary-download-url&gt;</strong></pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p style="padding-left: 60px">Replace <kbd>&lt;binary-download-url&gt;</kbd> (carats, too!) with the URL you copied from the Node.js download website. Once it's downloaded, we need to extract the archive using the following code:</p>
<pre style="padding-left: 60px"><strong>tar -xvf node-v****-linux-armv**.tar.xz</strong></pre>
<ol start="3">
<li>The asterisks will differ depending on the current LTS version of Node.js and your ARM version. The Raspberry Pi will spit out a lot of filenames to the console, then give you back your shell prompt. This means that the binaries have been extracted into your <kbd>home</kbd> folder. We need to place them into the <kbd>/usr/local</kbd> folder. To do that, run the following:</li>
</ol>
<pre style="padding-left: 60px"><strong>cd node-v****-linux-armv** </strong><br/><strong>sudo mv ./lib/* /usr/local/lib</strong><br/><strong>sudo mv ./share/* /usr/local/share</strong></pre>
<ol start="4">
<li>This will move all of the precompiled binaries to their new homes on your Raspberry Pi. Once this is done, run the following:</li>
</ol>
<pre style="padding-left: 60px"><strong>node -v</strong><br/><strong>npm -v</strong></pre>
<p style="padding-left: 60px">You should see something like the following:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="assets/57b83d29-8436-4d22-aa78-438b410727e8.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref"><span>Successful Node.js installation results</span></div>
<ol start="5">
<li>If that's all well and good, you now have Node.js and npm installed! Let's wrap this up with Johnny-Five and Raspi-IO! Note that you can absolutely clean up the binary downloads by running the following:</li>
</ol>
<pre style="padding-left: 60px"><strong>cd ~</strong><br/><strong>rm -rf node-v**-linux-armv**<br/>rm -rf node-v****-linux-armv**.tar.xz</strong></pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="mceNonEditable"/>
<div class="packt_tip">Some of you with more Debian experience may be asking, <em>well, why can't we just use</em> <em>apt-get</em>? The short answer is that the package with the name <kbd>node</kbd> was taken a very long time ago, and because that is the case, and because <kbd>sudo apt-get install nodejs</kbd> is outdated (<span>at the time of writing, </span><span>using this command will </span><span>install</span><span> </span><kbd>v4</kbd><span> </span><span>when we need</span> <kbd>v8+</kbd><span>, if it installs Node.js at all), we need to download the binaries and move them ourselves.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing Johnny-Five and Raspi-IO</h1>
                </header>
            
            <article>
                
<p>To install Johnny-Five, once you've made sure Node.js and npm are installed, run the following command:</p>
<pre><strong>npm i -g johnny-five raspi-io</strong></pre>
<p>This installs the libraries globally; you won't have to reinstall it every new project. And that's it! You're ready to start developing Node.js robotics projects on the Raspberry Pi with Johnny-Five!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>It feels like a lot, but you've now completed everything you need to have a fully-fledged development environment for the projects in this book, and you've taken your first steps toward building robots with JavaScript. You've learned more about what the Raspberry Pi is and why we're using it, and how to get the operating system image ready to go!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Questions</h1>
                </header>
            
            <article>
                
<ol>
<li>What is the common operating system for the Raspberry Pi that we'll be using in the projects in this book, and what Linux distribution is it based on?</li>
<li>What does GPIO stand for?</li>
<li>Who originally started the Johnny-Five project, and what did they use it to control?</li>
</ol>
<p> </p>
<ol start="4">
<li>What command do you run on the Raspberry Pi to find out what ARM architecture it uses?</li>
<li>Why is changing the default Raspberry Pi password important?</li>
<li>What are two benefits of using JavaScript and Node.js for robotics code?</li>
<li>Why do we have to download the Node.js binaries instead of using Raspbian's package manager?</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Further reading</h1>
                </header>
            
            <article>
                
<p><span>You can use the following sources for further reading relating to the topics covered in this chapter:</span></p>
<ul>
<li><strong>Learn more about the Raspberry Pi from the website of the Raspberry Pi organization</strong>: <a href="https://www.raspberrypi.org/">https://www.raspberrypi.org/</a></li>
<li><strong>Learn more about Johnny-Five from the main project page for Johnny-Five (we'll be seeing a lot of this site as we use their documentation to complete many of the book's projects)</strong>: <a href="http://johnny-five.io/">http://johnny-five.io/</a></li>
<li><strong>Learn more about the Raspbian operating system from the Raspbian website</strong>: <a href="https://www.raspberrypi.org/documentation/raspbian/">https://www.raspberrypi.org/documentation/raspbian</a></li>
</ul>


            </article>

            
        </section>
    </body></html>