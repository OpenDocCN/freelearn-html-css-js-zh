<html><head></head><body>
        

                            
                    <h1 class="header-title">Building the Real Application</h1>
                
            
            
                
<p>We have covered the basic components that we need to have knowledge of in order to build a full-stack JavaScript application. From this point on, we will work on building a whole web application using all of these technologies.</p>
<p>We will be building a movie rating application that will have the following features throughout this book:</p>
<ul>
<li>A home page that lists all the movies with other attributes</li>
<li>There will be an admin section where the administrator will be able to add movies</li>
<li>The user will be able to log in and sign up</li>
<li>The user will be able to rate a movie</li>
<li>There will be a movie profile section where the logged-in user can rate the movie</li>
</ul>
<p>So, let's get started.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Introducing Vue.js</h1>
                
            
            
                
<p class="mce-root">Vue.js is an open source, progressive JavaScript framework for building user interfaces. The rise of new JavaScript frameworks has been tremendous. With such growth, you might get confused about where to get started and how. There are hundreds of JavaScript frameworks today; among them, there are dozens of frameworks that stood out. But still, to choose from those dozens might be a daunting task.</p>
<p>There are quite a few popular frameworks today, such as React, Ember, and Angular. While these frameworks have their own advantages, there are some limitations to them as well. While building an application with React or Angular is good in itself, Vue.js helps eliminate some of the limitations associated with these frameworks.</p>
<p class="mce-root">Vue.js is <strong>progressive.</strong> With Vue.js, you can start with small and then progress gradually toward building bigger applications. This means that if you are just starting out, you might want to start with a very small application and scale slowly. Vue.js is perfect for such applications. It is lightweight and flexible as well. The learning curve is also very easy and super easy to get started.</p>
<p>Vue.js was invented by Evan You. It was first released in February 2014 and gained huge popularity around 2016. He used to work for Google and in Angular projects. The motivation for this invention was mainly because he didn't want to use Angular for small projects, since Angular provides a lot of packages out of the box and, hence, is not lightweight and not suitable for small applications. Having said that, Vue.js does not only target the smaller applications. It definitely does not provide all the packages with it, but you can add them as you progress with your application. That is the beauty of Vue.js. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Vue.js</h1>
                
            
            
                
<p>Let's get started with the installation of Vue.js. There are three ways to install and use Vue.js.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Including it in a script tag</h1>
                
            
            
                
<p>The easiest way to use Vue.js is to download it and include it in your <kbd>script</kbd> tag. You can download it from <a href="https://cdn.jsdelivr.net/npm/vue">https://cdn.jsdelivr.net/npm/vue</a>:<a href="https://cdn.jsdelivr.net/npm/vue"/></p>
<pre><strong>&lt;script type="text/javascript" src="img/vue.js"&gt;&lt;/script&gt;</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Using Content Delivery Network (CDN) links directly</h1>
                
            
            
                
<p>CDN is a network of distributed servers. It stores the cached version of contents in different geographical locations so that the content loads faster when fetched. We can use the CDN link directly in our <kbd>script</kbd> tag:</p>
<pre><strong>&lt;script type="text/javascript" src="img/vue.js"&gt;&lt;/script&gt;</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Using Vue.js as an npm package</h1>
                
            
            
                
<p><kbd>npm</kbd> also has a package for <kbd>vue</kbd>, which can be installed as follows:</p>
<pre><strong>$ npm install vue</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Introducing vue-cli</h1>
                
            
            
                
<p>CLI stands for Command Line Interface. A <kbd>cli</kbd> runs one or multiple commands successively in a command line interface. Vue.js also has a <kbd>cli</kbd> which, when installed, makes it super easy to spin up a project. We will be using a <kbd>vue-cli</kbd> in this book to create the Vue.js application. Let's install <kbd>vue-cli</kbd> with the following command. You can execute this command in your root folder:</p>
<pre><strong>$ npm install -g vue-cli</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Initializing projects with vue-cli</h1>
                
            
            
                
<p>Let's go ahead with creating a new project folder for our movie rating application. We will call it <kbd>movie_rating_app</kbd>. Go to the directory where you want to create your application in the Terminal and run the following:</p>
<pre><strong>$ vue init webpack movie_rating_app</strong></pre>
<p>The preceding command initializes an application with all the dependencies that a Vue.js project requires. It will ask you a few questions about the project setup, to which you can answer either <em>y</em>, as in <em>yes</em>, or <em>n</em>, as in <em>no</em>:</p>
<ul>
<li><strong>Vue build</strong>: You will find two options to build the Vue.js app: runtime + compiler, or runtime Only. This has to do with the template compiler: 
<ul>
<li><strong>Runtime only</strong>: The runtime option is used to create the <kbd>vue</kbd> instances. This option does not include the template compiler.</li>
<li><strong>Runtime + compiler</strong>: This option includes the template compiler, which means the <kbd>vue</kbd> templates are compiled to the plain JavaScript render functions.</li>
</ul>
</li>
<li><strong>Vue-router</strong>:<strong> </strong>Vue-router is the official router for Vue.js applications. This option is specially used when we want to make our application a <strong>Single Page Application</strong> (<strong>SPA</strong>). When using this option, the application makes all the necessary requests one time when the page initially loads and sends requests to the server when new data is needed. We will be talking more about Single Page and Multi-Page applications in future chapters as well. For now, we will be using the Vue-router.</li>
<li><strong>ESLint</strong>:<strong> </strong>ESLint is a JavaScript linter tool. It is a static code analysis tool used to find the errors or the mistakes in the code. It basically makes sure that the code follows the standard guidelines. There are two options for choosing the ESLint from as well: standard linting or the Airbnb linting. We will be going with Airbnb for this project.</li>
<li><strong>Setup test</strong>:<strong> </strong>By setting up tests, the project creates a wrapper for the tests that we will be writing for our application. It creates the necessary structure and configuration for the tests codes to be able to be run. We will be using this option as well. For the test runner, we will be using Mocha and Karma, and for the end to end testing, we will be using Nightwatch, which we will learn about in further chapters.</li>
<li><strong>Dependency management</strong>: Lastly, to manage the packages and the dependencies, here we have two options: <kbd>npm</kbd> and <kbd>Yarn</kbd>. We mostly talked about <kbd>npm</kbd> in previous chapters. <kbd>Yarn</kbd> is also a dependency management tool just like <kbd>npm</kbd>. Both Yarn and <kbd>npm</kbd> have their own benefits, but for this application, we are going to use <kbd>npm</kbd>. You can learn more about Yarn here (<a href="https://yarnpkg.com/en/">https://yarnpkg.com/en/</a>).</li>
</ul>
<p>This will take some time as it will install all the dependencies. Here are the options that we selected for our application:</p>
<div><img src="img/e962ace9-cf14-44e2-b418-2df63afde539.png" style="width:49.58em;height:25.33em;"/></div>
<p>When the command is successfully executed, you should be able to see the further steps on your Terminal:</p>
<div><img class="alignnone size-full wp-image-449 image-border" src="img/6eccf577-1893-40fd-8534-571db89ed658.png" style="width:46.00em;height:15.75em;"/></div>
<p>If the build is successful, we will be able to see the preceding output. Now, let's do as it says in the Terminal:</p>
<pre><strong>$ cd movie_rating_app</strong><br/><strong>$ npm run dev</strong></pre>
<p>This will start your application. The default port of the Vue.js application is 8080. As you can see in your Terminal, it should say:</p>
<div><img src="img/027b2d37-1812-46ce-8cec-66e218227acb.png" style="width:49.42em;height:9.67em;"/></div>
<p>Go to the browser and open the URL <kbd>http://localhost:8080/#/</kbd>, and we should be able to see our application:</p>
<div><img class="alignnone size-full wp-image-451 image-border" src="img/7ca9be13-5227-4432-910a-912a0037985a.png" style="width:40.17em;height:31.67em;"/></div>
<p>Great job! That was super easy. You have successfully created and run a Vue.js application.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Project folder structure</h1>
                
            
            
                
<p>Now, if you have noticed, <kbd>vue-cli</kbd> commands add a bunch of dependencies to your application, which is listed in the <kbd>package.json</kbd> file. The <kbd>cli</kbd> command also sets up a folder structure that you can customize to your needs as well. Let's review and understand the structure that the <kbd>cli</kbd> has made for us:</p>
<div><img src="img/5ae64fa6-aa4e-4d02-87af-7244b258abf5.png"/></div>
<ul>
<li><kbd>build</kbd> folder: This folder contains the <kbd>webpack</kbd> configuration files for different environments: development, test, and production</li>
<li><kbd>config</kbd> folder: All the configurations of the application would go here</li>
<li><kbd>node_modules</kbd>: All the <kbd>npm</kbd> packages that we install reside in this folder</li>
<li><kbd>src</kbd>:  This folder contains all the files related to rendering the components in the browser:
<ul>
<li><kbd>assets</kbd>: You can add your CSS and images for your application inside this folder.</li>
<li><kbd>components</kbd>: This folder will house all the frontend rendering files that will have a <kbd>.vue</kbd> extension.</li>
<li><kbd>router</kbd>: This folder will take care of all the URL routes for different pages throughout the application.</li>
<li><kbd>App.vue</kbd>: You can think of <kbd>App.vue</kbd> as the main component for rendering the view files. Other files will extend the layout defined on this file to create different views.</li>
<li><kbd>main.js</kbd>: This is the main entry point for any Vue.js application.</li>
</ul>
</li>
<li><kbd>Static</kbd>: You can use this folder as well to keep your static files, such as CSS and images. </li>
<li><kbd>Test</kbd>: This folder will be used to handle all the tests written for our application.</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Building a static application with Vue.js</h1>
                
            
            
                
<p>Now that we have initialized a project, let's move ahead with creating a static web application. Don't forget to make a repository on GitHub and commit and push changes regularly. </p>
<p>When you visit the URL <kbd>http://localhost:8080/#/</kbd>, you will see a default page rendered.  This piece of code is written in <kbd>src/components/HelloWorld.vue</kbd>. </p>
<p>If you look into <kbd>build/webpack.base.conf.js</kbd>, you will see this line of code in the <kbd>module.exports</kbd> section:</p>
<pre>module.exports = {<br/>  context: path.resolve(__dirname, '../'),<br/>  entry: {<br/>    <strong>app: './src/main.js'</strong><br/>  },<br/>  output: {</pre>
<p>This means, when you run the app, this <kbd>main.js</kbd> will be the entry point for the app. Everything will start from there. Let's have a quick look at that <kbd>main.js</kbd> file inside <kbd>src</kbd>:</p>
<pre><strong>// The Vue build version to load with the `import` command</strong><br/><strong>// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</strong><br/><strong>import Vue from 'vue';</strong><br/><strong>import App from './App';</strong><br/><strong>import router from './router';</strong><br/><br/><strong>Vue.config.productionTip = false;</strong><br/><br/><strong>/* eslint-disable no-new */</strong><br/><strong>new Vue({</strong><br/><strong>  el: '#app',</strong><br/><strong>  router,</strong><br/><strong>  template: '&lt;App/&gt;',</strong><br/><strong>  components: { App },</strong><br/><strong>});</strong></pre>
<p>The first three lines import the necessary packages required for this app to run. <kbd>App.vue</kbd> is the main template layout for this app. All other <kbd>.vue</kbd> files will extend this layout.</p>
<p>The bottom block defines which component to render when you run the app. In this case, this is telling our app to take the template <kbd>&lt;App&gt;</kbd> and render it inside the <kbd>#app</kbd> element.  Now, if we look into <kbd>App.vue</kbd>:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;div id="app"&gt;</strong><br/><strong>    &lt;img src="img/logo.png"&gt;</strong><br/><strong>    &lt;router-view/&gt;</strong><br/><strong>  &lt;/div&gt;</strong><br/><strong>&lt;/template&gt;</strong><br/><br/><strong>&lt;script&gt;</strong><br/><strong>export default {</strong><br/><strong>  name: 'app',</strong><br/><strong>};</strong><br/><strong>&lt;/script&gt;</strong><br/><br/><strong>&lt;style&gt;</strong><br/><strong>#app {</strong><br/><strong>  font-family: 'Avenir', Helvetica, Arial, sans-serif;</strong><br/><strong>  -webkit-font-smoothing: antialiased;</strong><br/><strong>  -moz-osx-font-smoothing: grayscale;</strong><br/><strong>  text-align: center;</strong><br/><strong>  color: #2c3e50;</strong><br/><strong>  margin-top: 60px;</strong><br/><strong>}</strong><br/><strong>&lt;/style&gt;</strong></pre>
<p>Here we have the template that has a <kbd>div</kbd> element with an ID <kbd>#app</kbd>. It means that the <kbd>vue</kbd> templates that we create will get rendered in this. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Redefining the home page</h1>
                
            
            
                
<p>Let's make our own view page for the home. For this, we can just modify the <kbd>HelloWorld.vue</kbd> component. The <kbd>.vue</kbd> file should always start with a template. Hence, a basic template for this file is:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;div&gt;</strong><br/><strong>  &lt;/div&gt;</strong><br/><strong>&lt;/template&gt;</strong></pre>
<p>You can also include your style sheets and JavaScript codes definitions in this page, but it will be much cleaner if we separate these out somewhere else.</p>
<p>Let's remove everything from <kbd>HelloWorld.vue</kbd> and add these lines of code:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;div&gt;</strong><br/><strong>    Hello World</strong><br/><strong>  &lt;/div&gt;</strong><br/><strong>&lt;/template&gt;</strong></pre>
<p>We also don't need a Vue.js logo, so let's delete that as well from <kbd>src/assets</kbd> and the line of code in <kbd>App.vue</kbd>:</p>
<pre><strong>&lt;img src="img/logo.png"&gt;</strong></pre>
<p>Now, if you revisit the URL <kbd>http://localhost:8080/#/</kbd>, you will see <kbd>Hello World</kbd> rendered:</p>
<div><img class="alignnone size-full wp-image-453 image-border" src="img/b3ba6aec-edc9-4c60-ad26-712c12a42a34.png" style="width:35.33em;height:7.67em;"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">Segregating CSS</h1>
                
            
            
                
<p>Time for segregating CSS. Let's create a folder inside the <kbd>src/assets</kbd> folder called <kbd>stylesheets</kbd> and add a <kbd>main.css</kbd> file. Add the following line of code in <kbd>main.css</kbd>:</p>
<pre><strong>@import './home.css';</strong></pre>
<p>The <kbd>main.css</kbd> will be our main CSS file that includes all other CSS components. We can directly add all our style code here as well. But to maintain readability, we will be creating separate style sheets for different sections in our applications and importing them here.</p>
<p>Since we will be importing all the style sheets here, now we need to include only the <kbd>main.css</kbd> file in the main application so that it gets loaded. To do that, let's add the following line of code in <kbd>src/App.vue</kbd>:</p>
<pre>&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;router-view/&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/><strong>import './assets/stylesheets/main.css';<br/></strong><br/>export default {<br/>  name: 'App',<br/>};<br/>&lt;/script&gt;</pre>
<p>We have imported a style sheet called <kbd>home.css</kbd> in <kbd>main.css</kbd> that does not yet exist. So let's go ahead and create that in the same directory, which is <kbd>src/assets</kbd>. Also, let's remove the following piece of code from <kbd>App.vue</kbd> and paste it into the <kbd>home.css</kbd> file: so that our component is clean:</p>
<pre><strong>#app {</strong><br/><strong>  font-family: 'Avenir', Helvetica, Arial, sans-serif;</strong><br/><strong>  -webkit-font-smoothing: antialiased;</strong><br/><strong>  -moz-osx-font-smoothing: grayscale;</strong><br/><strong>  text-align: center;</strong><br/><strong>  color: #2c3e50;</strong><br/><strong>  margin-top: 60px;</strong><br/><strong>  width: 100%;</strong><br/><strong>}</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction to Vuetify</h1>
                
            
            
                
<p>Vuetify is a module that can be used to build materialistic web page designs for Vue.js applications. It provides several features that can be used as building blocks for our application. It is a UI framework like Bootstrap, but it mostly has the material components. For more details, you can go to this link <a href="https://vuetifyjs.com">https://vuetifyjs.com</a>.</p>
<p class="mce-root">We will be using both Vuetify and Bootstrap combined when building the application.  The first step is to install the packages:</p>
<pre><strong>$ npm install bootstrap bootstrap-vue vuetify --save</strong></pre>
<p>After these get installed, the next thing we need to do is require these packages in our main file. So, in the <kbd>src/main.js</kbd> file, add the following lines:</p>
<pre>// The Vue build version to load with the `import` command<br/>// (runtime-only or standalone) has been set in webpack.base.conf with an alias.<br/><strong>import 'bootstrap/dist/css/bootstrap.min.css';</strong><br/><strong>import 'bootstrap-vue/dist/bootstrap-vue.css';</strong><br/><strong>import BootstrapVue from 'bootstrap-vue';<br/></strong><br/>import Vue from 'vue';<br/><strong>import Vuetify from 'vuetify';</strong><br/>import App from './App';<br/>import router from './router';<br/><br/><strong>Vue.use(BootstrapVue);</strong><br/><strong>Vue.use(Vuetify);</strong><br/><br/>Vue.config.productionTip = false;<br/><br/>/* eslint-disable no-new */<br/>new Vue({<br/>  el: '#app',<br/>  router,<br/>  components: { App },<br/>  template: '&lt;App/&gt;',<br/>});</pre>
<p>We also need to use <kbd>vuetify.css</kbd>, which holds all the style sheets related to its design. We will need this as well. We can just simply link a style sheet for this. In the <kbd>index.html</kbd> file, add the following lines of code in your <kbd>head</kbd> section:</p>
<pre>...<br/>&lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0"&gt;<br/>    <strong>&lt;link href="https://unpkg.com/vuetify/dist/vuetify.min.css" rel="stylesheet"&gt;</strong><br/>    &lt;title&gt;movie_rating_app&lt;/title&gt;<br/>  &lt;/head&gt;<br/>...</pre>
<p>Vuetify uses material icons well, so also import the fonts. Add the following line of code in <kbd>index.html</kbd> as well:</p>
<pre>&lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0"&gt;<br/>    &lt;link href="https://unpkg.com/vuetify/dist/vuetify.min.css" rel="stylesheet"&gt;<br/>    <strong>&lt;link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons" rel="stylesheet"&gt;</strong><br/>    &lt;title&gt;movie_rating_app&lt;/title&gt;<br/>  &lt;/head&gt;</pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Redesigning pages with Vuetify</h1>
                
            
            
                
<p>Now that we have Vuetify, let's move on to creating the pages for the application. provides us with some predefined themes as well. We will use a very simple and minimalistic theme for the app. Of course, we can also customize these according to our needs.</p>
<p>The outcome of this section will look as follows:</p>
<div><img src="img/9116e70e-d17b-43e5-a7dc-09da33118cde.png"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">Redesigning the home page</h1>
                
            
            
                
<p>In our <kbd>App.vue</kbd>, replace the file content with the following code:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;v-app id="inspire"&gt;</strong><br/><strong>    &lt;v-navigation-drawer</strong><br/><strong>      fixed</strong><br/><strong>      v-model="drawer"</strong><br/><strong>      app</strong><br/><strong>    &gt;</strong><br/><strong>      &lt;v-list dense&gt;</strong><br/><strong>        &lt;router-link v-bind:to="{ name: 'Home' }" class="side_bar_link"&gt;</strong><br/><strong>          &lt;v-list-tile&gt;</strong><br/><strong>            &lt;v-list-tile-action&gt;</strong><br/><strong>              &lt;v-icon&gt;home&lt;/v-icon&gt;</strong><br/><strong>            &lt;/v-list-tile-action&gt;</strong><br/><strong>            &lt;v-list-tile-content&gt;Home&lt;/v-list-tile-content&gt;</strong><br/><strong>          &lt;/v-list-tile&gt;</strong><br/><strong>        &lt;/router-link&gt;</strong><br/><strong>        &lt;router-link v-bind:to="{ name: 'Contact' }" class="side_bar_link"&gt;</strong><br/><strong>          &lt;v-list-tile&gt;</strong><br/><strong>            &lt;v-list-tile-action&gt;</strong><br/><strong>              &lt;v-icon&gt;contact_mail&lt;/v-icon&gt;</strong><br/><strong>            &lt;/v-list-tile-action&gt;</strong><br/><strong>            &lt;v-list-tile-content&gt;Contact&lt;/v-list-tile-content&gt;</strong><br/><strong>          &lt;/v-list-tile&gt;</strong><br/><strong>        &lt;/router-link&gt;</strong><br/><strong>      &lt;/v-list&gt;</strong><br/><strong>    &lt;/v-navigation-drawer&gt;</strong><br/><strong>    &lt;v-toolbar color="indigo" dark fixed app&gt;</strong><br/><strong>      &lt;v-toolbar-side-icon @click.stop="drawer = !drawer"&gt;&lt;/v-toolbar-side-icon&gt;</strong><br/><strong>      &lt;v-toolbar-title&gt;Home&lt;/v-toolbar-title&gt;</strong><br/><strong>    &lt;/v-toolbar&gt;</strong><br/><strong>    &lt;v-content&gt;</strong><br/><strong>      &lt;v-container fluid&gt;</strong><br/><strong>        &lt;div id="app"&gt;</strong><br/><strong>          &lt;router-view/&gt;</strong><br/><strong>        &lt;/div&gt;</strong><br/><strong>      &lt;/v-container&gt;</strong><br/><strong>    &lt;/v-content&gt;</strong><br/><strong>    &lt;v-footer color="indigo" app&gt;</strong><br/><strong>      &lt;span class="white--text"&gt;&amp;copy; 2018&lt;/span&gt;</strong><br/><strong>    &lt;/v-footer&gt;</strong><br/><strong>  &lt;/v-app&gt;</strong><br/><strong>&lt;/template&gt;</strong><br/><br/><strong>&lt;script&gt;</strong><br/><strong>import './assets/stylesheets/main.css';</strong><br/><br/><strong>export default {</strong><br/><strong>  data: () =&gt; ({</strong><br/><strong>    drawer: null,</strong><br/><strong>  }),</strong><br/><strong>  props: {</strong><br/><strong>    source: String,</strong><br/><strong>  },</strong><br/><strong>};</strong><br/><strong>&lt;/script&gt;</strong></pre>
<p>This contains several tags that mostly start with <kbd>v-</kbd>. These are the tags given by Vuetify to define our blocks in UI. We have attached a <kbd>stylesheet</kbd> file with the preceding file called <kbd>main.css</kbd>. Let's add some styling to our <kbd>App.vue</kbd> page.</p>
<p>Add the following code to <kbd>src/assets/stylesheets/home.css</kbd>:</p>
<pre><strong>#app {</strong><br/><strong>  font-family: 'Avenir', Helvetica, Arial, sans-serif;</strong><br/><strong>  -webkit-font-smoothing: antialiased;</strong><br/><strong>  -moz-osx-font-smoothing: grayscale;</strong><br/><strong>  text-align: center;</strong><br/><strong>  color: #2c3e50;</strong><br/><strong>}</strong><br/><br/><strong>#inspire {</strong><br/><strong>  font-family: 'Avenir', Helvetica, Arial, sans-serif;</strong><br/><strong>}</strong><br/><br/><strong>.container.fill-height {</strong><br/><strong>  align-items: normal;</strong><br/><strong>}</strong><br/><br/><strong>a.side_bar_link {</strong><br/><strong>  text-decoration: none;</strong><br/><strong>}</strong></pre>
<p>We still have a <kbd>div</kbd> section with an ID app in it. This is the section where all our other <kbd>.vue</kbd> files will get rendered.</p>
<p>Now, in <kbd>HelloWorld.vue</kbd>, replace the content with this:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;v-layout&gt;</strong><br/><strong>    this is home</strong><br/><strong>  &lt;/v-layout&gt;</strong><br/><strong>&lt;/template&gt;</strong></pre>
<p>Now, if you visit <kbd>http://localhost:8080/#/</kbd>, you should be able to view the home page.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Redesigning the contact page</h1>
                
            
            
                
<p>Let's go ahead with adding a new contact page. The first thing to do is add a route to our routes file. In <kbd>router/index.js</kbd>, add the following code:</p>
<pre>import Vue from 'vue';<br/>import Router from 'vue-router';<br/>import HelloWorld from '@/components/HelloWorld';<br/><strong>import Contact from '@/components/Contact';</strong><br/><br/>Vue.use(Router);<br/><br/>export default new Router({<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      name: 'HelloWorld',<br/>      component: HelloWorld,<br/>    }<strong>,</strong><br/><strong>    {</strong><br/><strong>      path: '/contact',</strong><br/><strong>      name: 'Contact',</strong><br/><strong>      component: Contact,</strong><br/><strong>    },</strong><br/>  ],<br/>});</pre>
<p>What we did here is add a path for the contact page, the name of the component, which we did in our export module in the <kbd>.vue</kbd> file, and the actual name of the component. Now we need to build a view file. So let's create a <kbd>Contact.vue</kbd> file in <kbd>src/components/</kbd> and add the following content to it:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;v-layout&gt;</strong><br/><strong>    this is contact</strong><br/><strong>  &lt;/v-layout&gt;</strong><br/><strong>&lt;/template&gt;</strong></pre>
<p>Now, visit <kbd>http://localhost:8080/#/contact</kbd> and you should be able to view both pages.</p>
<p>To make it usable and easily readable for our app, let's rename the <kbd>HelloWorld</kbd> component to the <kbd>Home</kbd> component. Rename the file <kbd>HelloWorld.vue</kbd> to <kbd>Home.vue</kbd></p>
<p>Also, change the binding route from <kbd>HelloWorld</kbd> to <kbd>Home</kbd> in <kbd>App.vue</kbd>:</p>
<pre>&lt;template&gt;<br/>  &lt;v-app id="inspire"&gt;<br/>    &lt;v-navigation-drawer<br/>      fixed<br/>      v-model="drawer"<br/>      app<br/>    &gt;<br/>      &lt;v-list dense&gt;<br/><strong>        &lt;router-link v-bind:to="{ name: 'Home' }" class="side_bar_link"&gt;</strong><br/>          &lt;v-list-tile @click=""&gt;<br/>            &lt;v-list-tile-action&gt;<br/>              &lt;v-icon&gt;home&lt;/v-icon&gt;</pre>
<p>In the <kbd>routes/index.js</kbd> as well, change the component name and the route to <kbd>Home</kbd> from <kbd>HelloWorld</kbd>:</p>
<pre>import Vue from 'vue';<br/>import Router from 'vue-router';<br/><strong>import Home from '@/components/Home';</strong><br/>import Contact from '@/components/Contact';<br/><br/>Vue.use(Router);<br/><br/>export default new Router({<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      <strong>name: 'Home',</strong><br/>      <strong>component: Home,</strong><br/>    },<br/>    {<br/>      path: '/contact',<br/>      name: 'Contact',<br/>      component: Contact,<br/>    },<br/>  ],<br/>});</pre>
<p>We should be able to see something like this when we visit the URL <kbd>http://localhost:8080/#/</kbd>:</p>
<div><img src="img/5a2bd1e8-a96b-49c0-95d8-499db0a047bd.png"/></div>
<p>That's it. You have successfully created a basic static two-page web application!</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Understanding Vue.js components</h1>
                
            
            
                
<p>The <kbd>vue</kbd> components are equivalent to the HTML files that you write in an application. You can write the plain HTML syntax in <kbd>.vue</kbd> files. The only thing that needs to be taken care of is to wrap all the content with <kbd>&lt;template&gt;&lt;/template&gt;</kbd>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Vue.js directives</h1>
                
            
            
                
<p>Directives are used with a markup language to perform some functions on the DOM elements. For example, in HTML markup language, when we write:</p>
<pre><strong>&lt;div class='app'&gt;&lt;/div&gt;</strong></pre>
<p>The <kbd>class</kbd> used here is a directive for HTML language. Similarly, Vue.js also provides a lot of such directives to make application development easier, such as:</p>
<ul>
<li><kbd>v-text</kbd></li>
<li><kbd>v-on</kbd></li>
<li><kbd>v-ref</kbd></li>
<li><kbd>v-show</kbd></li>
<li><kbd>v-pre</kbd></li>
<li><kbd>v-transition</kbd></li>
<li><kbd>v-for</kbd></li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">v-text</h1>
                
            
            
                
<p>You can use <kbd>v-text</kbd> when you want to display some variables that you have to define dynamically. Let's see with an example. In <kbd>src/components/Home.vue</kbd>, let's add the following:</p>
<pre class="mce-root">&lt;template&gt;<br/>  &lt;v-layout&gt;<br/>    <strong>&lt;div v-text="message"&gt;&lt;/div&gt;</strong><br/>  &lt;/v-layout&gt;<br/>&lt;/template&gt;<br/><strong>&lt;script type="text/javascript"&gt;</strong><br/><strong>export default {</strong><br/><strong>  data() {</strong><br/><strong>    return {</strong><br/><strong>      message: 'Hello there, how are you this morning?',</strong><br/><strong>    };</strong><br/><strong>  },</strong><br/><strong>};</strong><br/><strong>&lt;/script&gt;</strong></pre>
<p>The code inside the script tag is a data variable, which binds the data defined inside it to this component. When you change the value of that variable message, the <kbd>div</kbd> element with that directive also gets updated.</p>
<p>If we visit the URL (<kbd>http://localhost:8080/#/</kbd>), we can see the following:</p>
<div><img src="img/3e7c450c-8772-441e-a681-a4e8e7392069.png"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">v-on</h1>
                
            
            
                
<p>This directive is used for event handling. We can use this to trigger some logic in your application. For example, let's say we want to reply to a question that we did in the last example, for that we can do the following. Change the code in <kbd>src/components/Home.vue</kbd> to the following:</p>
<pre>&lt;template&gt;<br/>  <strong>&lt;v-layout row wrap&gt;</strong><br/><strong>    &lt;v-flex xs12&gt;</strong><br/><strong>      &lt;div v-text="message"&gt;&lt;/div&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>    &lt;v-flex xs12&gt;</strong><br/><strong>      &lt;v-btn color="primary" v-on:click="reply"&gt;Reply&lt;/v-btn&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>  &lt;/v-layout&gt;</strong><br/>&lt;/template&gt;<br/>&lt;script type="text/javascript"&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      message: 'Hello there, how are you this morning?',<br/>    };<br/>  },<br/>  <strong>methods: {</strong><br/><strong>    reply() {</strong><br/><strong>      this.message = "I'm doing great. Thank You!";</strong><br/><strong>    },</strong><br/><strong>  },</strong><br/>};<br/>&lt;/script&gt;</pre>
<p>The first screen will be as follows:</p>
<div><img src="img/b7d00360-1b89-4930-b816-754317639f37.png"/></div>
<p>When you click REPLY, you will see the following:</p>
<div><img src="img/5cdf10ea-add8-45db-b66f-8ca237115802.png"/></div>
<p>These are the directives that we will be using mostly in our app. There are a lot more other directives as well that we will explore on the way. If you want to learn more about each of these, you can visit <kbd>https://012.vuejs.org/api/directives.html</kbd>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Data binding</h1>
                
            
            
                
<p><strong>Data binding</strong> is the process of synchronizing data. For example, for the same example for what we did on <kbd>v-text</kbd>, we can do it with data binding with the mustaches, in other words using the <kbd>{{}}</kbd> operators.</p>
<p>For example, we can use the <kbd>{{message}}</kbd> instead of using the Vue.js directive for the message. Let's change the code in <kbd>src/components/Home.vue</kbd> to the following:</p>
<pre>&lt;template&gt;<br/>  &lt;v-layout row wrap&gt;<br/>    &lt;v-flex xs12&gt;<br/>      <strong>&lt;div&gt;{{message}}&lt;/div&gt;</strong><br/>    &lt;/v-flex&gt;<br/>    &lt;v-flex xs12&gt;<br/>      &lt;v-btn color="primary" v-on:click="reply"&gt;Reply&lt;/v-btn&gt;<br/>    &lt;/v-flex&gt;<br/>  &lt;/v-layout&gt;<br/>&lt;/template&gt;<br/>&lt;script type="text/javascript"&gt;<br/>  export default {<br/>    data () {<br/>      return {<br/>        <strong>message: 'Hello there, how are you?',</strong><br/>      }<br/>    },<br/>    methods: {<br/>      reply () {<br/>        this.message = "I'm doing great. Thank You!"<br/>      }<br/>    }<br/>  }<br/>&lt;/script&gt;</pre>
<p>This will behave the same way as what we did with <kbd>v-text</kbd>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Handling forms with Vue.js</h1>
                
            
            
                
<p>Now that we have a basic idea of how Vue.js works, let's roll ahead with our first form, where we will be adding the details of movies and displaying those movies in the home page so that  users can view them.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a movies listing page</h1>
                
            
            
                
<p>First of all, let's start with creating static movie cards for our home page and we will make this data dynamic in the next step. In <kbd>Home.vue</kbd>, replace the content inside <kbd>template</kbd> with the following code:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;v-layout row wrap&gt;</strong><br/><strong>    &lt;v-flex xs4&gt;</strong><br/><strong>      &lt;v-card&gt;</strong><br/><strong>        &lt;v-card-title primary-title&gt;</strong><br/><strong>          &lt;div&gt;</strong><br/><strong>            &lt;div class="headline"&gt;Batman vs Superman&lt;/div&gt;</strong><br/><strong>            &lt;span class="grey--text"&gt;2016 ‧ Science fiction film/Action fiction ‧ 3h 3m&lt;/span&gt;</strong><br/><strong>          &lt;/div&gt;</strong><br/><strong>        &lt;/v-card-title&gt;</strong><br/><strong>        &lt;v-card-text&gt;</strong><br/><strong>          It's been nearly two years since Superman's (Henry Cavill) colossal battle with Zod (Michael Shannon) devastated the city of Metropolis. The loss of life and collateral damage left many feeling angry and helpless, including crime-fighting billionaire Bruce Wayne (Ben Affleck). Convinced that Superman is now a threat to humanity, Batman embarks on a personal vendetta to end his reign on Earth, while the conniving Lex Luthor (Jesse Eisenberg) launches his own crusade against the Man of Steel.</strong><br/><strong>        &lt;/v-card-text&gt;</strong><br/><strong>        &lt;v-card-actions&gt;</strong><br/><strong>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;</strong><br/><strong>          &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>        &lt;/v-card-actions&gt;</strong><br/><strong>      &lt;/v-card&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>    &lt;v-flex xs4&gt;</strong><br/><strong>      &lt;v-card&gt;</strong><br/><strong>        &lt;v-card-title primary-title&gt;</strong><br/><strong>          &lt;div&gt;</strong><br/><strong>            &lt;div class="headline"&gt;Logan&lt;/div&gt;</strong><br/><strong>            &lt;span class="grey--text"&gt;2017 ‧ Drama/Science fiction film ‧ 2h 21m&lt;/span&gt;</strong><br/><strong>          &lt;/div&gt;</strong><br/><strong>        &lt;/v-card-title&gt;</strong><br/><strong>        &lt;v-card-text&gt;</strong><br/><strong>          In the near future, a weary Logan (Hugh Jackman) cares for an ailing Professor X (Patrick Stewart) at a remote outpost on the Mexican border. His plan to hide from the outside world gets upended when he meets a young mutant (Dafne Keen) who is very much like him. Logan must now protect the girl and battle the dark forces that want to capture her.</strong><br/><strong>        &lt;/v-card-text&gt;</strong><br/><strong>        &lt;v-card-actions&gt;</strong><br/><strong>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;</strong><br/><strong>          &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>        &lt;/v-card-actions&gt;</strong><br/><strong>      &lt;/v-card&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>    &lt;v-flex xs4&gt;</strong><br/><strong>      &lt;v-card&gt;</strong><br/><strong>        &lt;v-card-title primary-title&gt;</strong><br/><strong>          &lt;div&gt;</strong><br/><strong>            &lt;div class="headline"&gt;Star Wars: The Last Jedi&lt;/div&gt;</strong><br/><strong>            &lt;span class="grey--text"&gt;2017 ‧ Fantasy/Science fiction film ‧ 2h 35m&lt;/span&gt;</strong><br/><strong>          &lt;/div&gt;</strong><br/><strong>        &lt;/v-card-title&gt;</strong><br/><strong>        &lt;v-card-text&gt;</strong><br/><strong>          Luke Skywalker's peaceful and solitary existence gets upended when he encounters Rey, a young woman who shows strong signs of the Force. Her desire to learn the ways of the Jedi forces Luke to make a decision that changes their lives forever. Meanwhile, Kylo Ren and General Hux lead the First Order in an all-out assault against Leia and the Resistance for supremacy of the galaxy.</strong><br/><strong>        &lt;/v-card-text&gt;</strong><br/><strong>        &lt;v-card-actions&gt;</strong><br/><strong>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;</strong><br/><strong>          &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>        &lt;/v-card-actions&gt;</strong><br/><strong>      &lt;/v-card&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>    &lt;v-flex xs4&gt;</strong><br/><strong>      &lt;v-card&gt;</strong><br/><strong>        &lt;v-card-title primary-title&gt;</strong><br/><strong>          &lt;div&gt;</strong><br/><strong>            &lt;div class="headline"&gt;Wonder Woman&lt;/div&gt;</strong><br/><strong>            &lt;span class="grey--text"&gt;2017 ‧ Fantasy/Science fiction film ‧ 2h 21m&lt;/span&gt;</strong><br/><strong>          &lt;/div&gt;</strong><br/><strong>        &lt;/v-card-title&gt;</strong><br/><strong>        &lt;v-card-text&gt;</strong><br/><strong>          Before she was Wonder Woman (Gal Gadot), she was Diana, princess of the Amazons, trained to be an unconquerable warrior. Raised on a sheltered island paradise, Diana meets an American pilot (Chris Pine) who tells her about the massive conflict that's raging in the outside world. Convinced that she can stop the threat, Diana leaves her home for the first time. Fighting alongside men in a war to end all wars, she finally discovers her full powers and true destiny.</strong><br/><strong>        &lt;/v-card-text&gt;</strong><br/><strong>        &lt;v-card-actions&gt;</strong><br/><strong>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;</strong><br/><strong>          &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>        &lt;/v-card-actions&gt;</strong><br/><strong>      &lt;/v-card&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>    &lt;v-flex xs4&gt;</strong><br/><strong>      &lt;v-card&gt;</strong><br/><strong>        &lt;v-card-title primary-title&gt;</strong><br/><strong>          &lt;div&gt;</strong><br/><strong>            &lt;div class="headline"&gt;Dunkirk&lt;/div&gt;</strong><br/><strong>            &lt;span class="grey--text"&gt;2017 ‧ Drama/Thriller ‧ 2 hours&lt;/span&gt;</strong><br/><strong>          &lt;/div&gt;</strong><br/><strong>        &lt;/v-card-title&gt;</strong><br/><strong>        &lt;v-card-text&gt;</strong><br/><strong>          In May 1940, Germany advanced into France, trapping Allied troops on the beaches of Dunkirk. Under air and ground cover from British and French forces, troops were slowly and methodically evacuated from the beach using every serviceable naval and civilian vessel that could be found. At the end of this heroic mission, 330,000 French, British, Belgian and Dutch soldiers were safely evacuated.</strong><br/><strong>        &lt;/v-card-text&gt;</strong><br/><strong>        &lt;v-card-actions&gt;</strong><br/><strong>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;</strong><br/><strong>          &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>        &lt;/v-card-actions&gt;</strong><br/><strong>      &lt;/v-card&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>    &lt;v-flex xs4&gt;</strong><br/><strong>      &lt;v-card&gt;</strong><br/><strong>        &lt;v-card-title primary-title&gt;</strong><br/><strong>          &lt;div&gt;</strong><br/><strong>            &lt;div class="headline"&gt;The Revenant&lt;/div&gt;</strong><br/><strong>            &lt;span class="grey--text"&gt;2015 ‧ Drama/Thriller ‧ 2h 36m&lt;/span&gt;</strong><br/><strong>          &lt;/div&gt;</strong><br/><strong>        &lt;/v-card-title&gt;</strong><br/><strong>        &lt;v-card-text&gt;</strong><br/><strong>          While exploring the uncharted wilderness in 1823, frontiersman Hugh Glass (Leonardo DiCaprio) sustains life-threatening injuries from a brutal bear attack. When a member (Tom Hardy) of his hunting team kills his young son (Forrest Goodluck) and leaves him for dead, Glass must utilize his survival skills to find a way back to civilization. Grief-stricken and fueled by vengeance, the legendary fur trapper treks through the snowy terrain to track down the man who betrayed him.</strong><br/><strong>        &lt;/v-card-text&gt;</strong><br/><strong>        &lt;v-card-actions&gt;</strong><br/><strong>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;</strong><br/><strong>          &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>        &lt;/v-card-actions&gt;</strong><br/><strong>      &lt;/v-card&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>  &lt;/v-layout&gt;</strong><br/><strong>&lt;/template&gt;</strong></pre>
<p>Also, replace the content in <kbd>home.css</kbd> as follows:</p>
<pre><strong>#app {</strong><br/><strong>  font-family: 'Avenir', Helvetica, Arial, sans-serif;</strong><br/><strong>  -webkit-font-smoothing: antialiased;</strong><br/><strong>  -moz-osx-font-smoothing: grayscale;</strong><br/><strong>  text-align: center;</strong><br/><strong>  color: #2c3e50;</strong><br/><strong>  width: 100%;</strong><br/><strong>}</strong><br/><br/><strong>#inspire {</strong><br/><strong>  font-family: 'Avenir', Helvetica, Arial, sans-serif;</strong><br/><strong>}</strong><br/><br/><strong>.container.fill-height {</strong><br/><strong>  align-items: normal;</strong><br/><strong>}</strong><br/><br/><strong>a.side_bar_link {</strong><br/><strong>  text-decoration: none;</strong><br/><strong>}</strong><br/><br/><strong>.card__title--primary, .card__text {</strong><br/><strong>  text-align: left;</strong><br/><strong>}</strong><br/><br/><strong>.card {</strong><br/><strong>  height: 100% !important;</strong><br/><strong>}</strong></pre>
<p>Also, in <kbd>App.vue</kbd>, replace the content with the following:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;v-app id="inspire"&gt;</strong><br/><strong>    &lt;v-navigation-drawer</strong><br/><strong>      fixed</strong><br/><strong>      v-model="drawer"</strong><br/><strong>      app</strong><br/><strong>    &gt;</strong><br/><strong>      &lt;v-list dense&gt;</strong><br/><strong>        &lt;router-link v-bind:to="{ name: 'Home' }" class="side_bar_link"&gt;</strong><br/><strong>          &lt;v-list-tile&gt;</strong><br/><strong>            &lt;v-list-tile-action&gt;</strong><br/><strong>              &lt;v-icon&gt;home&lt;/v-icon&gt;</strong><br/><strong>            &lt;/v-list-tile-action&gt;</strong><br/><strong>            &lt;v-list-tile-content&gt;Home&lt;/v-list-tile-content&gt;</strong><br/><strong>          &lt;/v-list-tile&gt;</strong><br/><strong>        &lt;/router-link&gt;</strong><br/><strong>        &lt;router-link v-bind:to="{ name: 'Contact' }" class="side_bar_link"&gt;</strong><br/><strong>          &lt;v-list-tile&gt;</strong><br/><strong>            &lt;v-list-tile-action&gt;</strong><br/><strong>              &lt;v-icon&gt;contact_mail&lt;/v-icon&gt;</strong><br/><strong>            &lt;/v-list-tile-action&gt;</strong><br/><strong>            &lt;v-list-tile-content&gt;Contact&lt;/v-list-tile-content&gt;</strong><br/><strong>          &lt;/v-list-tile&gt;</strong><br/><strong>        &lt;/router-link&gt;</strong><br/><strong>      &lt;/v-list&gt;</strong><br/><strong>    &lt;/v-navigation-drawer&gt;</strong><br/><strong>    &lt;v-toolbar color="indigo" dark fixed app&gt;</strong><br/><strong>      &lt;v-toolbar-side-icon @click.stop="drawer = !drawer"&gt;&lt;/v-toolbar-side-icon&gt;</strong><br/><strong>      &lt;v-toolbar-title&gt;Home&lt;/v-toolbar-title&gt;</strong><br/><strong>      &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>      &lt;v-toolbar-items class="hidden-sm-and-down"&gt;</strong><br/><strong>        &lt;v-btn flat v-bind:to="{ name: 'AddMovie' }"&gt;Add Movie&lt;/v-btn&gt;</strong><br/><strong>      &lt;/v-toolbar-items&gt;</strong><br/><strong>    &lt;/v-toolbar&gt;</strong><br/><strong>    &lt;v-content&gt;</strong><br/><strong>      &lt;v-container fluid&gt;</strong><br/><strong>        &lt;div id="app"&gt;</strong><br/><strong>          &lt;router-view/&gt;</strong><br/><strong>        &lt;/div&gt;</strong><br/><strong>      &lt;/v-container&gt;</strong><br/><strong>    &lt;/v-content&gt;</strong><br/><strong>    &lt;v-footer color="indigo" app&gt;</strong><br/><strong>      &lt;span class="white--text"&gt;&amp;copy; 2018&lt;/span&gt;</strong><br/><strong>    &lt;/v-footer&gt;</strong><br/><strong>  &lt;/v-app&gt;</strong><br/><strong>&lt;/template&gt;</strong><br/><br/><strong>&lt;script&gt;</strong><br/><strong>import './assets/stylesheets/main.css';</strong><br/><br/><strong>export default {</strong><br/><strong>  data: () =&gt; ({</strong><br/><strong>    drawer: null,</strong><br/><strong>  }),</strong><br/><strong>  props: {</strong><br/><strong>    source: String,</strong><br/><strong>  },</strong><br/><strong>};</strong><br/><strong>&lt;/script&gt;</strong></pre>
<p>Finally, replace the content in <kbd>src/main.js</kbd>:</p>
<pre><strong>// The Vue build version to load with the `import` command</strong><br/><strong>// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</strong><br/><strong>import 'bootstrap/dist/css/bootstrap.min.css';</strong><br/><strong>import 'bootstrap-vue/dist/bootstrap-vue.css';<br/></strong><br/><strong>import BootstrapVue from 'bootstrap-vue';</strong><br/><strong>import Vue from 'vue';</strong><br/><strong>import Vuetify from 'vuetify';</strong><br/><strong>import App from './App';</strong><br/><strong>import router from './router';</strong><br/><br/><strong>Vue.use(BootstrapVue);</strong><br/><strong>Vue.use(Vuetify);</strong><br/><br/><strong>Vue.config.productionTip = false;</strong><br/><br/><strong>/* eslint-disable no-new */</strong><br/><strong>new Vue({</strong><br/><strong>  el: '#app',</strong><br/><strong>  router,</strong><br/><strong>  components: { App },</strong><br/><strong>  template: '&lt;App/&gt;',</strong><br/><strong>});</strong></pre>
<p>With this, we should have a page like this on the home page:</p>
<div><img class="alignnone size-full wp-image-842 image-border" src="img/4ca9ae33-37ba-4cb9-8cce-8760481f572b.png" style="width:162.50em;height:88.75em;"/></div>
<p>We will be making these pages dynamic as we go.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating an Add movie form</h1>
                
            
            
                
<p>First, we need to add a link that takes us to a form to add the movies. For that, we need to change the toolbar in <kbd>App.vue</kbd>.  So, let's add a link to the toolbar in <kbd>App.vue</kbd>:</p>
<pre><strong>&lt;v-toolbar color="indigo" dark fixed app&gt;</strong><br/><strong>  &lt;v-toolbar-side-icon @click.stop="drawer = !drawer"&gt;&lt;/v-toolbar-side-icon&gt;</strong><br/><strong>  &lt;v-toolbar-title&gt;Home&lt;/v-toolbar-title&gt;</strong><br/><strong>  &lt;v-spacer&gt;&lt;/v-spacer&gt;</strong><br/><strong>  &lt;v-toolbar-items class="hidden-sm-and-down"&gt;</strong><br/><strong>    &lt;v-btn flat v-bind:to="{ name: 'AddMovie' }"&gt;Add Movie&lt;/v-btn&gt;</strong><br/><strong>  &lt;/v-toolbar-items&gt;</strong><br/><strong>&lt;/v-toolbar&gt;</strong></pre>
<p>Now that we have the link, we need to add a route to link it to the page. Just like we did for our <kbd>Contact</kbd> page, let's add a route that will be used to add movies to our application. So, in <kbd>routes/index.js</kbd>:</p>
<pre>import Vue from 'vue';<br/>import Router from 'vue-router';<br/>import Home from '@/components/Home';<br/>import Contact from '@/components/Contact';<br/><strong>import AddMovie from '@/components/AddMovie';</strong><br/><br/>Vue.use(Router);<br/><br/>export default new Router({<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      name: 'Home',<br/>      component: Home,<br/>    },<br/>    {<br/>      path: '/contact',<br/>      name: 'Contact',<br/>      component: Contact,<br/>    },<br/>    <strong>{</strong><br/><strong>      path: '/movies/add',</strong><br/><strong>      name: 'AddMovie',</strong><br/><strong>      component: AddMovie,</strong><br/><strong>    },</strong><br/>  ],<br/>});</pre>
<p>Here, we added a route for <kbd>AddMovie</kbd>, which now means that we can access the add movie page at <kbd>http://localhost:8080/#/movies/add</kbd>.</p>
<p>The next thing we need to do now is to create the <kbd>vue</kbd> component file. For that, let's add a new <kbd>AddMovie.vue</kbd> file in <kbd>src/components</kbd>. Vuetify provides a very simple way to create forms and add validations as well. You can look for more information at <a href="https://vuetifyjs.com/components/forms">https://vuetifyjs.com/components/forms</a>.</p>
<p>Let's add the following content to <kbd>src/components/AddMovie.vue</kbd>:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;v-form v-model="valid" ref="form" lazy-validation&gt;</strong><br/><strong>    &lt;v-text-field</strong><br/><strong>      label="Movie Name"</strong><br/><strong>      v-model="name"</strong><br/><strong>      :rules="nameRules"</strong><br/><strong>      required</strong><br/><strong>    &gt;&lt;/v-text-field&gt;</strong><br/><strong>    &lt;v-text-field</strong><br/><strong>      name="input-7-1"</strong><br/><strong>      label="Movie Description"</strong><br/><strong>      v-model="description"</strong><br/><strong>      multi-line</strong><br/><strong>    &gt;&lt;/v-text-field&gt;</strong><br/><strong>    &lt;v-select</strong><br/><strong>      label="Movie Release Year"</strong><br/><strong>      v-model="release_year"</strong><br/><strong>      :items="years"</strong><br/><strong>    &gt;&lt;/v-select&gt;</strong><br/><strong>    &lt;v-text-field</strong><br/><strong>      label="Movie Genre"</strong><br/><strong>      v-model="genre"</strong><br/><strong>    &gt;&lt;/v-text-field&gt;</strong><br/><strong>    &lt;v-btn</strong><br/><strong>      @click="submit"</strong><br/><strong>      :disabled="!valid"</strong><br/><strong>    &gt;</strong><br/><strong>      submit</strong><br/><strong>    &lt;/v-btn&gt;</strong><br/><strong>    &lt;v-btn @click="clear"&gt;clear&lt;/v-btn&gt;</strong><br/><strong>  &lt;/v-form&gt;</strong><br/><strong>&lt;/template&gt;</strong></pre>
<p>Vuetify also provides some basic validations to the form. Let's add some validation to it as well.</p>
<p>Add the following code to <kbd>AddMovie.vue</kbd> inside the <kbd>script</kbd> tag:</p>
<pre>&lt;template&gt;<br/>...<br/>&lt;/template&gt;<br/><strong>&lt;script&gt;</strong><br/><strong>export default {</strong><br/><strong>  data: () =&gt; ({</strong><br/><strong>    valid: true,</strong><br/><strong>    name: '',</strong><br/><strong>    description: '',</strong><br/><strong>    genre: '',</strong><br/><strong>    release_year: '',</strong><br/><strong>    nameRules: [</strong><br/><strong>      v =&gt; !!v || 'Movie name is required',</strong><br/><strong>    ],</strong><br/><strong>    select: null,</strong><br/><strong>    years: [</strong><br/><strong>      '2018',</strong><br/><strong>      '2017',</strong><br/><strong>      '2016',</strong><br/><strong>      '2015',</strong><br/><strong>    ],</strong><br/><strong>  }),</strong><br/><strong>  methods: {</strong><br/><strong>    submit() {</strong><br/><strong>      if (this.$refs.form.validate()) {</strong><br/><strong>        // Perform next action</strong><br/><strong>      }</strong><br/><strong>    },</strong><br/><strong>    clear() {</strong><br/><strong>      this.$refs.form.reset();</strong><br/><strong>    },</strong><br/><strong>  },</strong><br/><strong>};</strong><br/><strong>&lt;/script&gt;</strong></pre>
<p>If we look into the form element in <kbd>AddMovie.vue</kbd>, the line that says:</p>
<pre><strong>  &lt;v-form v-model="valid" ref="form" lazy-validation&gt;<br/></strong></pre>
<p>What <kbd>v-model="valid"</kbd> part does here is, it makes sure the form does not get submitted until it is true, which again ties back to the script that we have added in the bottom. Also, let's look into the validations that we have added to the form. </p>
<p>The first basic validation is the <kbd>required</kbd> validation:</p>
<pre>&lt;v-text-field<br/>  label="Movie Name"<br/>  v-model="name"<br/>  :rules="nameRules"<br/>  <strong>required</strong><br/>&gt;&lt;/v-text-field&gt;</pre>
<p>This adds a <kbd>required</kbd> validation in the <kbd>name</kbd> field.</p>
<p>Also, for the <kbd>release_year</kbd> field, we want it to be a dropdown of years, so, for that, we have added the following:</p>
<pre>&lt;script&gt;<br/>export default {<br/>  data: () =&gt; ({<br/>    valid: true,<br/>    name: '',<br/>    description: '',<br/>    genre: '',<br/>    release_year: '',<br/>    nameRules: [<br/>      v =&gt; !!v || 'Movie name is required',<br/>    ],<br/>    select: null,<br/>    <strong>years: [</strong><br/><strong>      '2018',</strong><br/><strong>      '2017',</strong><br/><strong>      '2016',</strong><br/><strong>      '2015',</strong><br/><strong>    ],</strong><br/>  }),<br/>  methods: {<br/>    submit() {<br/>      if (this.$refs.form.validate()) {<br/>        // Perform next action<br/>      }<br/>    },<br/>    clear() {<br/>      this.$refs.form.reset();<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</pre>
<p>This adds items to the select list dynamically through the script.</p>
<p>As regards the last part, we have two buttons <kbd>Submit</kbd> and <kbd>Clear</kbd>, which call the methods <kbd>submit() </kbd>and <kbd>clear()</kbd>, respectively.</p>
<p>Now, you should have a form like this when you visit the URL (<kbd>http://localhost:8080/#/movies/add</kbd>):</p>
<div><img src="img/51c30522-e0d2-4cb9-986b-ad482a9382be.png"/></div>
<p>The <kbd>*</kbd> in the <strong>Movie Name</strong> denotes that it is a required field.</p>
<p>If you have noticed, we have been adding a <kbd>#</kbd> to all the routes that we have added. That is because it is the default setting for the Vue.js router. We can remove that by adding <kbd>mode: 'history'</kbd> in <kbd>routes/index.js</kbd>:</p>
<pre>import Vue from 'vue';<br/>import Router from 'vue-router';<br/>import Home from '@/components/Home';<br/>import Contact from '@/components/Contact';<br/>import AddMovie from '@/components/AddMovie';<br/><br/>Vue.use(Router);<br/><br/>export default new Router({<br/>  <strong>mode: 'history',</strong><br/>  routes: [<br/>    {<br/>      path: '/',<br/>      name: 'Home',<br/>      component: Home,<br/>    },<br/>    {<br/>      path: '/contact',<br/>      name: 'Contact',<br/>      component: Contact,<br/>    },<br/>    {<br/>      path: '/movies/add',<br/>      name: 'AddMovie',<br/>      component: AddMovie,<br/>    },<br/>  ],<br/>});</pre>
<p>Now, we can all route without adding the <kbd>#</kbd> in the URL as follows:</p>
<ul>
<li class="mce-root"><kbd>http://localhost:8080/</kbd></li>
<li class="mce-root"><kbd>http://localhost:8080/contact</kbd></li>
<li class="mce-root"><kbd>http://localhost:8080/movies/add</kbd></li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Communicating with servers</h1>
                
            
            
                
<p>We now have a movie listing page, we have an add movie page, so the next thing we have to do is save the data into the MongoDB when we submit the form.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding express to our application</h1>
                
            
            
                
<p>Now that we have all the components in place, it's time to add the server layer to our application.</p>
<p> Let's start by adding the express package with the following:</p>
<pre><strong>npm install express --save</strong></pre>
<p>The next part is to create the necessary endpoints and models so that we can add the movies to the database.</p>
<p>To do that, we first need to install the required packages:</p>
<ul>
<li><kbd>body-parser</kbd>: To parse the incoming  requests</li>
<li><kbd>cors</kbd>: To handle cross-origin requests between frontend and backend</li>
<li><kbd>morgan</kbd>: HTTP request logger</li>
<li><kbd>mongoose</kbd>: Object modeling for MongoDB</li>
</ul>
<p>Let's install all of these packages by running the following command in the Terminal:</p>
<pre><strong>$ npm install morgan body-parser cors mongoose --save</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding a server file</h1>
                
            
            
                
<p>Now, we need to set up the server for our application. Let's add a file called <kbd>server.js</kbd> in the root of the application and add the following content:</p>
<pre><strong>const express = require('express');</strong><br/><strong>const bodyParser = require('body-parser');</strong><br/><strong>const mongoose = require('mongoose');</strong><br/><strong>const cors = require('cors');</strong><br/><strong>const morgan = require('morgan');</strong><br/><strong>const fs = require('fs');</strong><br/><br/><strong>const app = express();</strong><br/><strong>const router = express.Router();</strong><br/><strong>app.use(morgan('combined'));</strong><br/><strong>app.use(bodyParser.json());</strong><br/><strong>app.use(cors());</strong><br/><br/><strong>//connect to mongodb</strong><br/><strong>mongoose.connect('mongodb://localhost/movie_rating_app', function() {</strong><br/><strong>  console.log('Connection has been made');</strong><br/><strong>})</strong><br/><strong>.catch(err =&gt; {</strong><br/><strong>  console.error('App starting error:', err.stack);</strong><br/><strong>  process.exit(1);</strong><br/><strong>});</strong><br/><br/><strong>router.get('/', function(req, res) {</strong><br/><strong>  res.json({ message: 'API Initialized!'});</strong><br/><strong>});</strong><br/><br/><strong>const port = process.env.API_PORT || 8081;</strong><br/><strong>app.use('/', router);</strong><br/><strong>app.listen(port, function() {</strong><br/><strong>  console.log(`api running on port ${port}`);</strong><br/><strong>});</strong></pre>
<p>Here, we have set up a server that tells the express server to run on the 8081 port. We will be using this server to handle all the API requests via express.</p>
<p>Also, we have required and used all the packages that we need in this <kbd>server.js</kbd> file. </p>
<p>Also, for the mongoose connection, we have added a connection to our local database called <kbd>movie_rating_app</kbd> with the following code block:</p>
<pre><strong>//connect to mongodb<br/>mongoose.connect('mongodb://localhost/movie_rating_app', function() {<br/>  console.log('Connection has been made');<br/>})<br/>.catch(err =&gt; {<br/>  console.error('App starting error:', err.stack);<br/>  process.exit(1);<br/>});</strong></pre>
<p>As I mentioned earlier, if the database does not exist yet, it will automatically get created when we add our very first Mongoose document to the DB.</p>
<p>The next thing is to run our MongoDB server. Let's do that by running the following command in the Terminal:</p>
<pre><strong>$ mongod</strong></pre>
<p>Once the Mongo server is up, let's spin up our <kbd>node</kbd> server for this application using the following command:</p>
<pre><strong>$ node server.js</strong></pre>
<p>Now, when we open <kbd>http://localhost:8081/</kbd>, you should be able to see the following message:</p>
<div><img class="alignnone size-full wp-image-459 image-border" src="img/51654a80-e1f1-452d-84aa-559b4711e2e1.png" style="width:25.92em;height:7.33em;"/></div>
<p>Until now, we have our frontend server up and running on port 8080 with the following:</p>
<pre><strong>$ npm run dev</strong></pre>
<p>The backend server running on port 8081 with the following:</p>
<pre><strong>$ node server.js<br/></strong></pre>
<p>One important thing to remember is that whenever we change the code in <kbd>server.js</kbd>, we have to restart the server by running the following command:</p>
<pre><strong>$ node server.js</strong></pre>
<p>This is a very tedious task. However, there is one good way to get rid of that. There is a package called <kbd>nodemon</kbd>, which, when installed, restarts the server automatically whenever the code gets updated and we don't have to do it manually every time. So, let's go ahead and install the package:</p>
<pre><strong>$ npm install nodemon --save<br/></strong></pre>
<p>With the package installed, now we can start our server with the following command:</p>
<pre><strong>$ nodemon server.js</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding a Movie model</h1>
                
            
            
                
<p>The next thing is to add the movies to the database when we submit the form. Let's go ahead and create a folder called <kbd>models</kbd> in the root directory and add a <kbd>Movie.js</kbd> file in the <kbd>models</kbd> directory:</p>
<p>We will be using singular capitalized names for Models, and all lowercase plural names for <kbd>Controllers</kbd> files.</p>
<p>The following code into the <kbd>Movie.js</kbd>:</p>
<pre><strong>const mongoose = require('mongoose');</strong><br/><br/><strong>const Schema = mongoose.Schema;</strong><br/><strong>const MovieSchema = new Schema({</strong><br/><strong>  name: String,</strong><br/><strong>  description: String,</strong><br/><strong>  release_year: Number,</strong><br/><strong>  genre: String,</strong><br/><strong>});</strong><br/><br/><strong>const Movie = mongoose.model('Movie', MovieSchema)</strong><br/><strong>module.exports = Movie;</strong></pre>
<p>Here, we have created a Movie model that would take all the four attributes that we have added to our <kbd>AddMovie.vue</kbd> form earlier.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding movies controller</h1>
                
            
            
                
<p>Now, the last thing we need to set up is an endpoint to save the movie to the database. Let's create a folder called <kbd>controllers</kbd> in the root directory and add a file called <kbd>movies.js</kbd> inside the directory and add the following code:</p>
<pre><strong>const MovieSchema = require('../models/Movie.js');</strong><br/><br/><strong>module.exports.controller = (app) =&gt; {</strong><br/><strong>  // add a new movie</strong><br/><strong>  app.post('/movies', (req, res) =&gt; {</strong><br/><strong>    const newMovie = new MovieSchema({</strong><br/><strong>      name: req.body.name,</strong><br/><strong>      description: req.body.description,</strong><br/><strong>      release_year: req.body.release_year,</strong><br/><strong>      genre: req.body.genre,</strong><br/><strong>    });</strong><br/><br/><strong>    newMovie.save((error, movie) =&gt; {</strong><br/><strong>      if (error) { console.log(error); }</strong><br/><strong>      res.send(movie);</strong><br/><strong>    });</strong><br/><strong>  });</strong><br/><strong>};</strong></pre>
<p>Here we have added an endpoint that takes the post requests with the given params and creates a Mongoose document in the database that we have configured.</p>
<p>Since these controllers have the routes, we need to include these files in our main entry point as well. For our backend, the main entry file is <kbd>server.js</kbd>. So, let's add the following highlighted code block in <kbd>server.js</kbd>:</p>
<pre>...<br/>//connect to mongodb<br/>mongoose.connect('mongodb://localhost/movie_rating_app', function() {<br/>  console.log('Connection has been made');<br/>})<br/>.catch(err =&gt; {<br/>  console.error('App starting error:', err.stack);<br/>  process.exit(1);<br/>});<br/><br/><strong>// Include controllers</strong><br/><strong>fs.readdirSync("controllers").forEach(function (file) {</strong><br/><strong>  if(file.substr(-3) == ".js") {</strong><br/><strong>    const route = require("./controllers/" + file)</strong><br/><strong>    route.controller(app)</strong><br/><strong>  }</strong><br/><strong>})</strong><br/><br/>router.get('/', function(req, res) {<br/>  res.json({ message: 'API Initialized!'});<br/>});<br/>...</pre>
<p>This code block will include all our controllers' files and we don't have to add each of them manually.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Connecting frontend and backend</h1>
                
            
            
                
<p>Now, we have the model and an endpoint. The next thing to do is to call this endpoint when we hit the Submit button in <kbd>AddMovie.vue</kbd>. </p>
<p>This is the part where we need to communicate the frontend and the backend. For this, we need to use a separate package called axios.</p>
<p>The axios package helps us to make the HTTP requests from the Node.js. It helps to make the Ajax calls from the frontend. There are several alternatives for axios as well, such as fetch, and superagent. But axios has been successful enough to become the most popular among these. So we will be using the same as well.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing axios</h1>
                
            
            
                
<p>Now, in order to communicate between the client and the server, we will be using the <kbd>axios</kbd> library. So, let's install the library first:</p>
<pre><strong>npm install axios --save</strong></pre>


            

            
        
    

        

                            
                    <h1 class="header-title">Connecting all the pieces</h1>
                
            
            
                
<p>Now, we have all the things in place (movie model, movies controller, and axios) to communicate between the client and server. The last thing to do now is to connect these pieces when we click the submit button in the Movie Add form. If you remember, we added a placeholder before while submitting the button in <kbd>AddMovie.vue</kbd>:</p>
<pre>&lt;v-select<br/>      label="Movie Release Year"<br/>      v-model="select"<br/>      :items="years"<br/>    &gt;&lt;/v-select&gt;<br/>    &lt;v-text-field<br/>      label="Movie Genre"<br/>      v-model="genre"<br/>    &gt;&lt;/v-text-field&gt;<br/>    <strong>&lt;v-btn</strong><br/><strong>      @click="submit"</strong><br/><strong>      :disabled="!valid"</strong><br/><strong>    &gt;</strong><br/>      submit<br/>    &lt;/v-btn&gt;<br/>    &lt;v-btn @click="clear"&gt;clear&lt;/v-btn&gt;</pre>
<p>This code tells us to execute the <kbd>submit()</kbd> method when the button is clicked. We also have it in the <kbd>script</kbd> section:</p>
<pre>...<br/>methods: {<br/>    <strong>submit() {</strong><br/><strong>      if (this.$refs.form.validate()) {</strong><br/><strong>        // Perform next action</strong><br/><strong>      }</strong><br/><strong>    },</strong><br/>    clear() {<br/>      this.$refs.form.reset();<br/>    },
  },<br/>...</pre>
<p>All the methods that we will have will be added in this section. Now that we have our placeholder for <kbd>submit</kbd>, let's modify this piece of code to incorporate the Movie Add form:</p>
<pre>&lt;script&gt;<br/><strong>import axios from 'axios';</strong><br/><br/>export default {<br/>  data: () =&gt; ({<br/>    valid: true,<br/>    name: '',<br/>    description: '',<br/>    genre: '',<br/>    release_year: '',<br/>    nameRules: [<br/>      v =&gt; !!v || 'Movie name is required',<br/>    ],<br/>    select: null,<br/>    years: [<br/>      '2018',<br/>      '2017',<br/>      '2016',<br/>      '2015',<br/>    ],<br/>  }),<br/>  methods: {<br/>    <strong>submit() {</strong><br/><strong>      if (this.$refs.form.validate()) {</strong><br/><strong>        return axios({</strong><br/><strong>          method: 'post',</strong><br/><strong>          data: {</strong><br/><strong>            name: this.name,</strong><br/><strong>            description: this.description,</strong><br/><strong>            release_year: this.release_year,</strong><br/><strong>            genre: this.genre,</strong><br/><strong>          },</strong><br/><strong>          url: 'http://localhost:8081/movies',</strong><br/><strong>          headers: {</strong><br/><strong>            'Content-Type': 'application/json',</strong><br/><strong>          },</strong><br/><strong>        })</strong><br/><strong>          .then(() =&gt; {</strong><br/><strong>            this.$router.push({ name: 'Home' });</strong><br/><strong>            this.$refs.form.reset();</strong><br/><strong>          })</strong><br/><strong>          .catch(() =&gt; {</strong><br/><strong>          });</strong><br/><strong>      }</strong><br/><strong>      return true;</strong><br/><strong>    },</strong><br/>    clear() {<br/>      this.$refs.form.reset();<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</pre>
<p>This should suffice. Now, let's go ahead and add a movie from the UI itself from the <kbd>http://localhost:8080/movies/add</kbd> endpoint. We should be able to save a movie's record in the MongoDB. Let me explain what we did here a little bit.</p>
<p>When we hit the <kbd>Submit</kbd> button, we made an AJAX request via axios to hit the post endpoint in the movies controller. The <kbd>post</kbd> method in movies controller, in turn, saves the record with the parameters that we gave according to the model schema we designed for the movies. And, when the process is complete, redirect the page back to the homepage.</p>
<p>To check whether the record was actually created or not, let's look into MongoDB:</p>
<pre><strong>$ mongo</strong><br/><strong>$ use movie_rating_app</strong><br/><strong>$ db.movies.find()</strong></pre>
<p>We can see the record being created with the parameters we provided in the form:</p>
<div><img src="img/c6be4e4e-6ffe-48c6-93ac-e9483534f9d7.png"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding form validations</h1>
                
            
            
                
<p>We covered how to add the validations in the previous section as well. Let's go ahead and add a few validations to our movie add form. We will add the following validations:</p>
<ul>
<li><kbd>Movie Name</kbd> cannot be empty</li>
<li><kbd>Movie Description</kbd> is optional</li>
<li><kbd>Movie Release Year</kbd> cannot be blank </li>
<li>The genre of the movie will be required and will be maxed to 80 characters</li>
</ul>
<p>In <kbd>AddMovie.vue</kbd>, let's add the rules in input fields and bind the rules from the script:</p>
<pre>&lt;template&gt;<br/>  &lt;v-form v-model="valid" ref="form" lazy-validation&gt;<br/>    &lt;v-text-field<br/>      label="Movie Name"<br/>      v-model="name"<br/>      :rules="nameRules"<br/>      required<br/>    &gt;&lt;/v-text-field&gt;<br/>    &lt;v-text-field<br/>      name="input-7-1"<br/>      label="Movie Description"<br/>      v-model="description"<br/>      multi-line<br/>    &gt;&lt;/v-text-field&gt;<br/>    &lt;v-select<br/>      label="Movie Release Year"<br/>      v-model="release_year"<br/>      <strong>required</strong><br/><strong>      :rules="releaseRules"</strong><br/>      :items="years"<br/>    &gt;&lt;/v-select&gt;<br/>    &lt;v-text-field<br/>      label="Movie Genre"<br/>      v-model="genre"<br/>      <strong>required</strong><br/><strong>      :rules="genreRules"</strong><br/>    &gt;&lt;/v-text-field&gt;<br/>    &lt;v-btn<br/>      @click="submit"<br/>      :disabled="!valid"<br/>    &gt;<br/>      submit<br/>    &lt;/v-btn&gt;<br/>    &lt;v-btn @click="clear"&gt;clear&lt;/v-btn&gt;<br/>  &lt;/v-form&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>  import axios from 'axios';<br/><br/>  export default {<br/>    data: () =&gt; ({<br/>      valid: true,<br/>      name: '',<br/>      description: '',<br/>      genre: '',<br/>      release_year: '',<br/>      nameRules: [<br/>        (v) =&gt; !!v || 'Movie name is required'<br/>      ],<br/>      <strong>genreRules: [</strong><br/><strong>        v =&gt; !!v || 'Movie genre year is required',</strong><br/><strong>        v =&gt; (v &amp;&amp; v.length &lt;= 80) || 'Genre must be less than equal to 80 characters.',</strong><br/><strong>      ],</strong><br/><strong>      releaseRules: [</strong><br/><strong>        v =&gt; !!v || 'Movie release year is required',</strong><br/><strong>      ],</strong><br/>      select: null,<br/>      years: [<br/>        '2018',<br/>        '2017',<br/>        '2016',<br/>        '2015'<br/>      ],<br/>      checkbox: false<br/>    }),<br/>    methods: {<br/>      submit () {<br/>        if (this.$refs.form.validate()) {<br/>          return axios({<br/>            method: 'post',<br/>            data: {<br/>              name: this.name,<br/>              description: this.description,<br/>              release_year: this.release_year,<br/>              genre: this.genre<br/>            },<br/>            url: 'http://localhost:8081/movies',<br/>            headers: {<br/>              'Content-Type': 'application/json'<br/>            }<br/>          })<br/>          .then((response) =&gt; {<br/>            this.$router.push({ name: 'Home' });<br/>            this.$refs.form.reset();<br/>          })<br/>          .catch((error) =&gt; {<br/>          });
        }<br/>      },<br/>      clear () {<br/>        this.$refs.form.reset()<br/>      }<br/>    }<br/>  }<br/>&lt;/script&gt;</pre>
<p>Now, if we try to submit the form with all the fields blank, and the field <kbd>Movie Genre</kbd> with more than 80 characters, we should not be able to submit the form. The form will display these error messages:</p>
<div><img src="img/b45e3b2c-8263-47e3-b40d-c0554d70fddb.png"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding a flash message </h1>
                
            
            
                
<p>We have covered the basics of app building. Now that we can add a movie, what would be really nice is to have a certain message when the movie is saved successfully in the DB or notify if something goes wrong. There are several <kbd>npm</kbd> packages to do just that. We can also build our own as well. For this application, we will be using a package called: <kbd>vue-swal(https://www.npmjs.com/package/vue-swal)</kbd>. Let's add the package first:</p>
<pre><strong>$ npm install vue-swal --save</strong></pre>
<p>Now, let's include the package in our <kbd>main.js</kbd> file:<br/></p>
<pre>// The Vue build version to load with the `import` command<br/>// (runtime-only or standalone) has been set in webpack.base.conf with an alias.<br/>import 'bootstrap/dist/css/bootstrap.min.css';<br/>import 'bootstrap-vue/dist/bootstrap-vue.css';<br/><br/>import BootstrapVue from 'bootstrap-vue';<br/>import Vue from 'vue';<br/>import Vuetify from 'vuetify';<br/><strong>import VueSwal from 'vue-swal';</strong><br/>import App from './App';<br/>import router from './router';<br/><br/>Vue.use(BootstrapVue);<br/>Vue.use(Vuetify);<br/><strong>Vue.use(VueSwal);</strong><br/><br/>Vue.config.productionTip = false;<br/><br/>/* eslint-disable no-new */<br/>new Vue({<br/>  el: '#app',<br/>  router,<br/>  components: { App },<br/>  template: '&lt;App/&gt;',<br/>});</pre>
<p>Now, let's modify our <kbd>AddMovie.vue</kbd> to display the flash message when the action is performed successfully or when it fails:</p>
<pre>...<br/>methods: {<br/>  submit() {<br/>    if (this.$refs.form.validate()) {<br/>      return axios({<br/>        method: 'post',<br/>        data: {<br/>          name: this.name,<br/>          description: this.description,<br/>          release_year: this.release_year,<br/>          genre: this.genre,<br/>        },<br/>        url: 'http://localhost:8081/movies',<br/>        headers: {<br/>          'Content-Type': 'application/json',<br/>        },<br/>      })<br/>        .then(() =&gt; {<br/>          <strong>this.$swal(</strong><br/><strong>            'Great!',</strong><br/><strong>            'Movie added successfully!',</strong><br/><strong>            'success',</strong><br/><strong>          );</strong><br/>          this.$router.push({ name: 'Home' });<br/>          this.$refs.form.reset();<br/>        })<br/>        .catch(() =&gt; {<br/>          <strong>this.$swal(</strong><br/><strong>            'Oh oo!',</strong><br/><strong>            'Could not add the movie!',</strong><br/><strong>            'error',</strong><br/><strong>          );</strong><br/>        });<br/>    }<br/>    return true;<br/>  },<br/>  clear() {<br/>    this.$refs.form.reset();<br/>  },<br/>},<br/>...</pre>
<p>Now, with this, when we submit a movie, we should be able to see a success message before redirecting to the homepage:</p>
<div><img src="img/e379a65e-69c5-4a66-931b-ce8bf96ff61f.png"/></div>
<p>There are also several other packages for the message alerting, such as <kbd>vue-flash</kbd>, <kbd>vuex-flash</kbd>, and <kbd>sweet-alert</kbd>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Loading dynamic content on the homepage</h1>
                
            
            
                
<p>Currently, our homepage has all the static movies in the content. Let's fill the data with the data that we have added to the movies in our database. For that, the first thing to do is to add a few movies to the database, which we can do via the <kbd>http://localhost:8080/movies/add</kbd> endpoint from the UI.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">API endpoint to fetch all movies</h1>
                
            
            
                
<p>First, we need to add an endpoint to fetch all the movies from the Mongo database. So, let's first add an endpoint to fetch all the movies in <kbd>controllers/movies.js</kbd>:</p>
<pre>const MovieSchema = require('../models/Movie.js');<br/><br/>module.exports.controller = (app) =&gt; {<br/>  <strong>// fetch all movies</strong><br/><strong>  app.get('/movies', (req, res) =&gt; {</strong><br/><strong>    MovieSchema.find({}, 'name description release_year genre', (error, movies) =&gt; {</strong><br/><strong>      if (error) { console.log(error); }</strong><br/><strong>      res.send({</strong><br/><strong>        movies,</strong><br/><strong>      });</strong><br/><strong>    });</strong><br/><strong>  });</strong><br/><br/>  // add a new movie<br/>  app.post('/movies', (req, res) =&gt; {<br/>    const newMovie = new MovieSchema({<br/>      name: req.body.name,<br/>      description: req.body.description,<br/>      release_year: req.body.release_year,<br/>      genre: req.body.genre,<br/>    });<br/><br/>    newMovie.save((error, movie) =&gt; {<br/>      if (error) { console.log(error); }<br/>      res.send(movie);<br/>    });<br/>  });<br/>};</pre>
<p>Now, if you hit the URL <kbd>http://localhost:8081/movies</kbd>, we should be able to see the entire movie list that we have added via UI or the mongo shell itself. Here is what I have:</p>
<div><img src="img/3d467d70-d506-4f39-98ec-370eb03e6d67.png"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">Modifying Home.vue to display dynamic content</h1>
                
            
            
                
<p>Now, let's update our <kbd>Home.vue</kbd>, which will fetch the movies from our Mongo database and display the dynamic content. Replace the code in <kbd>Home.vue</kbd> with the following content:</p>
<pre>&lt;template&gt;<br/>  &lt;v-layout row wrap&gt;<br/>    &lt;v-flex xs4&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;Batman vs Superman&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;2016 ‧ Science fiction film/Action <br/>            fiction ‧ 3h 3m&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          It's been nearly two years since Superman's (Henry Cavill) colossal battle with Zod (Michael Shannon) devastated the city of Metropolis. The loss of life and collateral damage left many feeling angry and helpless, including crime-fighting billionaire Bruce Wayne (Ben Affleck). Convinced that Superman is now a threat to humanity, Batman embarks on a personal vendetta to end his reign on Earth, while the conniving Lex Luthor (Jesse Eisenberg) launches his own crusade against the Man of Steel.<br/>        &lt;/v-card-text&gt;<br/>        &lt;v-card-actions&gt;<br/>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;<br/>          &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>        &lt;/v-card-actions&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>    &lt;v-flex xs4&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;Logan&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;2017 ‧ Drama/Science fiction film ‧ <br/>            2h 21m&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          In the near future, a weary Logan (Hugh Jackman) cares for an ailing Professor X (Patrick Stewart) at a remote outpost on the Mexican border. His plan to hide from the outside world gets upended when he meets a young mutant (Dafne Keen) who is very much like him. Logan must now protect the girl and battle the dark forces that want to capture her.<br/>        &lt;/v-card-text&gt;<br/>        &lt;v-card-actions&gt;<br/>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;<br/>          &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>        &lt;/v-card-actions&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>    &lt;v-flex xs4&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;Star Wars: The Last Jedi&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;2017 ‧ Fantasy/Science fiction film <br/>            ‧ 2h 35m&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          Luke Skywalker's peaceful and solitary existence gets upended when he encounters Rey, a young woman who shows strong signs of the Force. Her desire to learn the ways of the Jedi forces Luke to make a decision that changes their lives forever. Meanwhile, Kylo Ren and General Hux lead the First Order in an all-out assault against Leia and the Resistance for supremacy of the galaxy.<br/>        &lt;/v-card-text&gt;<br/>        &lt;v-card-actions&gt;<br/>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;<br/>          &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>        &lt;/v-card-actions&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>    &lt;v-flex xs4&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;Wonder Woman&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;2017 ‧ Fantasy/Science fiction film <br/>            ‧ 2h 21m&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          Before she was Wonder Woman (Gal Gadot), she was Diana, princess of the Amazons, trained to be an unconquerable warrior. Raised on a sheltered island paradise, Diana meets an American pilot (Chris Pine) who tells her about the massive conflict that's raging in the outside world. Convinced that she can stop the threat, Diana leaves her home for the first time. Fighting alongside men in a war to end all wars, she finally discovers her full powers and true destiny.<br/>        &lt;/v-card-text&gt;<br/>        &lt;v-card-actions&gt;<br/>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;<br/>          &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>        &lt;/v-card-actions&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>    &lt;v-flex xs4&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;Dunkirk&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;2017 ‧ Drama/Thriller ‧ 2 <br/>            hours&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          In May 1940, Germany advanced into France, trapping Allied troops on the beaches of Dunkirk. Under air and ground cover from British and French forces, troops were slowly and methodically evacuated from the beach using every serviceable naval and civilian vessel that could be found. At the end of this heroic mission, 330,000 French, British, Belgian and Dutch soldiers were safely evacuated.<br/>        &lt;/v-card-text&gt;<br/>        &lt;v-card-actions&gt;<br/>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;<br/>          &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>        &lt;/v-card-actions&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>    &lt;v-flex xs4&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;The Revenant&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;2015 ‧ Drama/Thriller ‧ 2h <br/>            36m&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          While exploring the uncharted wilderness in 1823, frontiersman Hugh Glass (Leonardo DiCaprio) sustains life-threatening injuries from a brutal bear attack. When a member (Tom Hardy) of his hunting team kills his young son (Forrest Goodluck) and leaves him for dead, Glass must utilize his survival skills to find a way back to civilization. Grief-stricken and fueled by vengeance, the legendary fur trapper treks through the snowy terrain to track down the man who betrayed him.<br/>        &lt;/v-card-text&gt;<br/>        &lt;v-card-actions&gt;<br/>          &lt;v-btn flat color="purple"&gt;Rate this movie&lt;/v-btn&gt;<br/>          &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>        &lt;/v-card-actions&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>  &lt;/v-layout&gt;<br/>&lt;/template&gt;<br/><strong>&lt;script&gt;<br/>import axios from 'axios';<br/><br/>export default {<br/>  name: 'Movies',<br/>  data() {<br/>    return {<br/>      movies: [],<br/>    };<br/>  },<br/>  mounted() {<br/>    this.fetchMovies();<br/>  },<br/>  methods: {<br/>    async fetchMovies() {<br/>      return axios({<br/>        method: 'get',<br/>        url: 'http://localhost:8081/movies',<br/>      })<br/>        .then((response) =&gt; {<br/>          this.movies = response.data.movies;<br/>        })<br/>        .catch(() =&gt; {<br/>        });<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</strong></pre>
<p>This code calls a method when the page loads, which is defined in the <kbd>mounted</kbd> method. The method fetches the movies using an axios request. Now we have pulled the data from the server to the client. Now, we will use the <kbd>vue</kbd> directive to loop through these movies and render in the home page. Replace the content of the <kbd>&lt;template&gt;</kbd> tag with the following code in <kbd>Home.vue</kbd>:</p>
<pre><strong>&lt;template&gt;<br/>  &lt;v-layout row wrap&gt;<br/>    &lt;v-flex xs4 v-for="movie in movies" :key="movie._id"&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;{{ movie.name }}&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;{{ movie.release_year }} ‧ {{ movie.genre }}&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          {{ movie.description }}<br/>        &lt;/v-card-text&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>  &lt;/v-layout&gt;<br/>&lt;/template&gt;<br/>...</strong></pre>
<p>As you can see, we have used the <kbd>vue</kbd> directive <kbd>for</kbd>. The key is used to assign a unique identity to each record. Now, when you visit <kbd>http://localhost:8080/</kbd>, you will see the following:</p>
<div><img src="img/d00b295b-283b-4516-968f-b7a6db462c38.png"/></div>
<p>We have successfully built an application where we can add the movies to the MongoDB and display the DB records on the home page.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding a movie profile page</h1>
                
            
            
                
<p>Now, we need a page where a logged-in user can go and rate the movie. To do that, let's add a link to the title of the movie on the home page. In <kbd>Home.vue</kbd>, replace the template part with the following content:</p>
<pre>&lt;template&gt;<br/>  &lt;v-layout row wrap&gt;<br/>    &lt;v-flex xs4 v-for="movie in movies" :key="movie._id"&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            <strong>&lt;div class="headline"&gt;</strong><br/><strong>              &lt;v-btn flat v-bind:to="`/movies/${movie._id}`"&gt;</strong><br/><strong>                {{ movie.name }}</strong><br/><strong>              &lt;/v-btn&gt;</strong><br/><strong>            &lt;/div&gt;</strong><br/>            &lt;span class="grey--text"&gt;{{ movie.release_year }} ‧ {{ movie.genre }}&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/>        &lt;v-card-text&gt;<br/>          {{ movie.description }}<br/>        &lt;/v-card-text&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>  &lt;/v-layout&gt;<br/>&lt;/template&gt;</pre>
<p>Here, we added a link to the title that will take the user to its corresponding detail page. </p>
<p>Let's add a page for the detailed view of the movie page where a logged-in user can go and rate the movie. Create a file called <kbd>Movie.vue</kbd> inside the <kbd>src/components</kbd> directory and add the following content:</p>
<pre><strong>&lt;template&gt;</strong><br/><strong>  &lt;v-layout row wrap&gt;</strong><br/><strong>    &lt;v-flex xs4&gt;</strong><br/><strong>      &lt;v-card&gt;</strong><br/><strong>        &lt;v-card-title primary-title&gt;</strong><br/><strong>          &lt;div&gt;</strong><br/><strong>            &lt;div class="headline"&gt;{{ movie.name }}&lt;/div&gt;</strong><br/><strong>            &lt;span class="grey--text"&gt;{{ movie.release_year }} ‧ {{ movie.genre }}&lt;/span&gt;</strong><br/><strong>          &lt;/div&gt;</strong><br/><strong>        &lt;/v-card-title&gt;</strong><br/><strong>        &lt;h6 class="card-title"&gt;Rate this movie&lt;/h6&gt;</strong><br/><strong>        &lt;v-card-text&gt;</strong><br/><strong>          {{ movie.description }}</strong><br/><strong>        &lt;/v-card-text&gt;</strong><br/><strong>      &lt;/v-card&gt;</strong><br/><strong>    &lt;/v-flex&gt;</strong><br/><strong>  &lt;/v-layout&gt;</strong><br/><strong>&lt;/template&gt;</strong><br/><strong>&lt;script&gt;</strong><br/><strong>import axios from 'axios';</strong><br/><br/><strong>export default {</strong><br/><strong>  name: 'Movie',</strong><br/><strong>  data() {</strong><br/><strong>    return {</strong><br/><strong>      movie: [],</strong><br/><strong>    };</strong><br/><strong>  },</strong><br/><strong>  mounted() {</strong><br/><strong>    this.fetchMovie();</strong><br/><strong>  },</strong><br/><strong>  methods: {</strong><br/><strong>    async fetchMovie() {</strong><br/><strong>      return axios({</strong><br/><strong>        method: 'get',</strong><br/><strong>        url: `http://localhost:8081/api/movies/${this.$route.params.id}`,</strong><br/><strong>      })</strong><br/><strong>        .then((response) =&gt; {</strong><br/><strong>          this.movie = response.data;</strong><br/><strong>        })</strong><br/><strong>        .catch(() =&gt; {</strong><br/><strong>        });</strong><br/><strong>    },</strong><br/><strong>  },</strong><br/><strong>};</strong><br/><strong>&lt;/script&gt;</strong></pre>
<p>We have added an axios request here to fetch the movie when a user clicks on the title of the movie.</p>
<p>Now, we also need to define the routes to the page. So, in <kbd>routes/index.js</kbd>, replace the content with the following:</p>
<pre>import Vue from 'vue';<br/>import Router from 'vue-router';<br/>import Home from '@/components/Home';<br/>import Contact from '@/components/Contact';<br/>import AddMovie from '@/components/AddMovie';<br/>import Register from '@/components/Register';<br/>import Login from '@/components/Login';<br/><strong>import Movie from '@/components/Movie';</strong><br/><br/>Vue.use(Router);<br/><br/>export default new Router({<br/>  mode: 'history',<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      name: 'Home',<br/>      component: Home,<br/>    },<br/>    {<br/>      path: '/contact',<br/>      name: 'Contact',<br/>      component: Contact,<br/>    },<br/>    {<br/>      path: '/movies/add',<br/>      name: 'AddMovie',<br/>      component: AddMovie,<br/>    },<br/>    <strong>{</strong><br/><strong>      path: '/movies/:id',</strong><br/><strong>      name: 'Movie',</strong><br/><strong>      component: Movie,</strong><br/><strong>    },</strong><br/>  ],<br/>});</pre>
<p>Now, we need to add an endpoint for a GET request to fetch the movie with the specified ID.</p>
<p>Replace the content in <kbd>controllers/movies.js</kbd> with the following:</p>
<pre>const MovieSchema = require('../models/Movie.js');<br/><br/>module.exports.controller = (app) =&gt; {<br/>  // fetch all movies<br/>  app.get('/movies', (req, res) =&gt; {<br/>    MovieSchema.find({}, 'name description release_year genre', (error, movies) =&gt; {<br/>      if (error) { console.log(error); }<br/>      res.send({<br/>        movies,<br/>      });<br/>    });<br/>  });<br/><br/> <strong> // fetch a single movie</strong><br/><strong>  app.get('/api/movies/:id', (req, res) =&gt; {</strong><br/><strong>    MovieSchema.findById(req.params.id, 'name description release_year genre', (error, movie) =&gt; {</strong><br/><strong>      if (error) { console.error(error); }</strong><br/><strong>      res.send(movie);</strong><br/><strong>    });</strong><br/><strong>  });</strong><br/><br/>  // add a new movie<br/>  app.post('/movies', (req, res) =&gt; {<br/>    const newMovie = new MovieSchema({<br/>      name: req.body.name,<br/>      description: req.body.description,<br/>      release_year: req.body.release_year,<br/>      genre: req.body.genre,<br/>    });<br/><br/>    newMovie.save((error, movie) =&gt; {<br/>      if (error) { console.log(error); }<br/>      res.send(movie);<br/>    });<br/>  });<br/>};</pre>
<p>Now, when we click the link on the title of the movie, we should be able to see the following page:</p>
<div><img src="img/6a91082a-2182-4be0-bba0-97d1b7418b1a.png"/></div>
<p>Here, we have also added an area where a user can click on to Rate this Movie. Let's move ahead to add the functionality to rate the movie. For this, we will be using a package called <kbd>vue-star-rating</kbd>, which makes it easy to add the rating component. You can find this example on this link as well at <kbd>https://jsfiddle.net/anteriovieira/8nawdjs7/</kbd>.</p>
<p>Let's first add the package:</p>
<pre><strong>$ npm install vue-star-rating --save</strong></pre>
<p>In <kbd>Movie.vue</kbd>, replace the content  with the following:</p>
<pre>&lt;template&gt;<br/>  &lt;v-layout row wrap&gt;<br/>    &lt;v-flex xs4&gt;<br/>      &lt;v-card&gt;<br/>        &lt;v-card-title primary-title&gt;<br/>          &lt;div&gt;<br/>            &lt;div class="headline"&gt;{{ movie.name }}&lt;/div&gt;<br/>            &lt;span class="grey--text"&gt;{{ movie.release_year }} ‧ {{ movie.genre }}&lt;/span&gt;<br/>          &lt;/div&gt;<br/>        &lt;/v-card-title&gt;<br/><strong>        &lt;h6 class="card-title" v-if="current_user"&gt;Rate this movie&lt;/h6&gt;</strong><br/>        &lt;v-card-text&gt;<br/>          {{ movie.description }}<br/>        &lt;/v-card-text&gt;<br/>      &lt;/v-card&gt;<br/>    &lt;/v-flex&gt;<br/>  &lt;/v-layout&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import axios from 'axios';<br/>import Vue from 'vue';<br/><strong>import StarRating from 'vue-star-rating';</strong><br/><br/><strong>const wrapper = document.createElement('div');</strong><br/><strong>// shared state</strong><br/><strong>const state = {</strong><br/><strong>  note: 0,</strong><br/><strong>};</strong><br/><strong>// crate component to content</strong><br/><strong>const RatingComponent = Vue.extend({</strong><br/><strong>  data() {</strong><br/><strong>    return { rating: 0 };</strong><br/><strong>  },</strong><br/><strong>  watch: {</strong><br/><strong>    rating(newVal) { state.note = newVal; },</strong><br/><strong>  },</strong><br/><strong>  template: `</strong><br/><strong>    &lt;div class="rating"&gt;</strong><br/><strong>      How was your experience getting help with this issues?</strong><br/><strong>      &lt;star-rating v-model="rating" :show-rating="false"&gt;&lt;/star-rating&gt;</strong><br/><strong>    &lt;/div&gt;`,</strong><br/><strong>  components: { 'star-rating': StarRating },</strong><br/><strong>});</strong><br/><br/><strong>const component = new RatingComponent().$mount(wrapper);</strong><br/><br/>export default {<br/>  name: 'Movie',<br/>  data() {<br/>    return {<br/>      movie: [],<br/>    };<br/>  },<br/>  mounted() {<br/>    this.fetchMovie();<br/>  },<br/>  methods: {<br/>    <strong>async rate() {</strong><br/><strong>      this.$swal({</strong><br/><strong>        content: component.$el,</strong><br/><strong>        buttons: {</strong><br/><strong>          confirm: {</strong><br/><strong>            value: 0,</strong><br/><strong>          },</strong><br/><strong>        },</strong><br/><strong>      }).then(() =&gt; {</strong><br/><strong>        const movieId = this.$route.params.id;</strong><br/><strong>        return axios({</strong><br/><strong>          method: 'post',</strong><br/><strong>          data: {</strong><br/><strong>            rate: state.note,</strong><br/><strong>          },</strong><br/><strong>          url: `http://localhost:8081/movies/rate/${movieId}`,</strong><br/><strong>          headers: {</strong><br/><strong>            'Content-Type': 'application/json',</strong><br/><strong>          },</strong><br/><strong>        })</strong><br/><strong>          .then(() =&gt; {</strong><br/><strong>            this.$swal(`Thank you for rating! ${state.note}`, 'success');</strong><br/><strong>          })</strong><br/><strong>          .catch((error) =&gt; {</strong><br/><strong>            const message = error.response.data.message;</strong><br/><strong>            this.$swal('Oh oo!', `${message}`, 'error');</strong><br/><strong>          });</strong><br/><strong>      });</strong><br/><strong>    },</strong><br/>    async fetchMovie() {<br/>      return axios({<br/>        method: 'get',<br/>        url: `http://localhost:8081/api/movies/${this.$route.params.id}`,<br/>      })<br/>        .then((response) =&gt; {<br/>          this.movie = response.data;<br/>        })<br/>        .catch(() =&gt; {<br/>        });<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</pre>
<p>Let's also update the code to call the <kbd>rate</kbd>  method when Rate this Movie is clicked. In <kbd>Movie.vue</kbd>, update the following line of code:</p>
<pre>...<br/>&lt;h6 class="card-title" v-if="current_user" <strong>@click="rate"</strong>&gt;Rate this movie&lt;/h6&gt;<br/>...</pre>
<p>Now, the last thing we need to do is add the <kbd>rate</kbd> endpoint in <kbd>movies.js</kbd>:</p>
<pre>var Movie = require("../models/Movie");<br/><br/>module.exports.controller = (app) =&gt; {<br/>  // fetch all movies<br/>  app.get("/movies", function(req, res) {<br/>    Movie.find({}, 'name description release_year genre', function (error, movies) {<br/>      if (error) { console.log(error); }<br/>       res.send({<br/>        movies: movies<br/>      })<br/>    })<br/>  })<br/><br/>  // fetch a single movie<br/>  app.get("/api/movies/:id", function(req, res) {<br/>    Movie.findById(req.params.id, 'name description release_year <br/>    genre', function (error, movie) {<br/>      if (error) { console.error(error); }<br/>      res.send(movie)<br/>    })<br/>  })<br/><br/>  <strong>// rate a movie</strong><br/><strong>  app.post('/movies/rate/:id', (req, res) =&gt; {</strong><br/><strong>    const rating = new Rating({</strong><br/><strong>      movie_id: req.params.id,</strong><br/><strong>      user_id: req.body.user_id,</strong><br/><strong>      rate: req.body.rate,</strong><br/><strong>    })</strong><br/><br/><strong>    rating.save(function (error, rating) {</strong><br/><strong>      if (error) { console.log(error); }</strong><br/><strong>      res.send({</strong><br/><strong>        movie_id: rating.movie_id,</strong><br/><strong>        user_id: rating.user_id,</strong><br/><strong>        rate: rating.rate</strong><br/><strong>      })</strong><br/><strong>    })</strong><br/><strong>  })</strong><br/><br/>  // add a new movie<br/>  app.post('/movies', (req, res) =&gt; {<br/>    const movie = new Movie({<br/>      name: req.body.name,<br/>      description: req.body.description,<br/>      release_year: req.body.release_year,<br/>      genre: req.body.genre<br/>    })<br/><br/>    movie.save(function (error, movie) {<br/>      if (error) { console.log(error); }<br/>      res.send(movie)<br/>    })<br/>  })<br/>}</pre>
<p>The endpoint saves the user ratings in a separate collection called <kbd>Rating</kbd>, which we haven't created yet. Let's go ahead and do that as well. Create a file called <kbd>Rating.js</kbd> inside the <kbd>models</kbd> directory and add the following content:</p>
<pre><strong>const mongoose = require('mongoose')</strong><br/><strong>const Schema = mongoose.Schema</strong><br/><strong>const RatingSchema = new Schema({</strong><br/><strong>  movie_id: String,</strong><br/><strong>  user_id: String,</strong><br/><strong>  rate: Number</strong><br/><strong>})</strong><br/><br/><strong>const Rating = mongoose.model("Rating", RatingSchema)</strong><br/><strong>module.exports = Rating</strong></pre>
<p>Include the same model in <kbd>movies.js</kbd> as well:</p>
<pre>const Movie = require("../models/Movie");<br/><strong>const Rating = require("../models/Rating");</strong></pre>
<p>That's it! Now a user should be able to rate a movie when logged-in. The user should get a popup when Rate this movie is clicked and display the rated score upon successful rating with a thank you message:</p>
<div><img src="img/7c9354a3-fa9a-4300-bc98-d2e691e29923.png"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>In this chapter, we covered what Vue.js is! We built a static application that lists the movies followed by adding the dynamic functionality to a movies listing via a form that stores the movies in the MongoDB. We also learned about Vue.js components, Data Binding, and Vue.js Directives.</p>
<p>We also added the functionality for users to be able to rate the movies.</p>
<p>In the next chapter, we will add the users and sign in/sign up functionality in the same application.</p>


            

            
        
    </body></html>