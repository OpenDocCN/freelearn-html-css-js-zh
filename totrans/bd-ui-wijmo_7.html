<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Wijmo Mobile</h1></div></div></div><p>Introduced in the 2013 release, adaptive widgets can be used in both desktop and mobile web applications. In this chapter, we take a quick tour of Wijmo mobile: the setup, simple widgets, and views. In particular, we focus on the AppView, Wijmo's adaptive super widget that lets you use the same pages for mobile and desktop browsers.</p><div><div><div><div><h1 class="title"><a id="ch07lvl1sec33"/>Getting started with Wijmo mobile</h1></div></div></div><p>In this section, I show you how to enable Wijmo's mobile widgets. We go through the steps of obtaining jQuery mobile and creating widgets. Wijmo mobile widgets are an extension of jQuery's mobile widgets. I also explain how a different approach to creating mobile widgets is taken by jQuery mobile.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec28"/>Setting up Wijmo mobile</h2></div></div></div><p>Since <a id="id292" class="indexterm"/>Wijmo mobile is built on jQuery mobile, we will first obtain and install jQuery mobile.</p><div><div><div><div><h3 class="title"><a id="ch07lvl3sec07"/>Obtaining jQuery mobile</h3></div></div></div><p>You will<a id="id293" class="indexterm"/> need to replace the jQuery UI library <a id="id294" class="indexterm"/>used in the setup previously with jQuery mobile, which<a id="id295" class="indexterm"/> is available from <a class="ulink" href="http://jquerymobile.com/download/">http://jquerymobile.com/download/</a>. jQuery mobile also has a Theme Roller like jQuery UI. The<a id="id296" class="indexterm"/> default theme is included in the jQuery mobile package. If you want to make a custom theme, you can do so at <a class="ulink" href="http://jquerymobile.com/themeroller/">http://jquerymobile.com/themeroller/</a>.</p></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec08"/>Installing jQuery mobile</h3></div></div></div><p>You need to<a id="id297" class="indexterm"/> copy over the following items<a id="id298" class="indexterm"/> from the jQuery mobile download into the <code class="literal">lib</code> folder:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">jquery.mobile-1.3.1.min.js</code> file</li><li class="listitem" style="list-style-type: disc">The <code class="literal">jquery.mobile-1.3.1.min.css</code> file for the CSS styles</li><li class="listitem" style="list-style-type: disc">The images directory for jQuery mobile icons</li></ul></div><p>Once the<a id="id299" class="indexterm"/> files are in place, a mobile page can be created. In the following code snippet, I show the<a id="id300" class="indexterm"/> contents of an example page using jQuery mobile:</p><div><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;HTML&gt;
&lt;head&gt;
&lt;meta name="viewport" content="width=device-width"/&gt;
&lt;!--jQuery References--&gt;
&lt;script src="img/jquery-1.9.1.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="img/jquery.mobile-1.3.1.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;!--Wijmo Widgets JavaScript--&gt;
&lt;script src="img/jquery.wijmo-open.all.3.20131.2.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="img/jquery.wijmo-pro.all.3.20131.2.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;!--Theme--&gt;
&lt;link href="../lib/jquery.mobile-1.3.1.min.css" rel="stylesheet" type="text/css"/&gt;
&lt;!--Wijmo Widgets CSS--&gt;
&lt;link href="../lib/jquery.wijmo-open.3.20131.2.css" rel="stylesheet" type="text/css"/&gt;
&lt;link href="../lib/jquery.wijmo-pro.3.20131.2.css" rel="stylesheet" type="text/css"/&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div data-role="page" data-theme="b"&gt;
  &lt;div data-role="content"&gt;
  &lt;div data-role="header"&gt;
  &lt;h1&gt;Page Title&lt;/h1&gt;
  &lt;/div&gt;
  &lt;div data-role="content"&gt;
  &lt;button&gt;Press Here&lt;/button&gt;
  &lt;/div&gt;
  &lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/HTML&gt;</pre></div><p>Instead of the jQuery UI library, we used jQuery mobile here. In addition, we replaced the Wijmo Rocket theme with the jQuery UI theme.</p></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec09"/>Using a mobile browser emulator</h3></div></div></div><p>For this <a id="id301" class="indexterm"/>chapter, we use the Opera <a id="id302" class="indexterm"/>mobile emulator<a id="id303" class="indexterm"/> available at <a class="ulink" href="http://www.opera.com/developer/mobile-emulator">http://www.opera.com/developer/mobile-emulator</a>. Compared to the iPhone or Android emulators, it is easier to install and simulate different devices with different screen sizes. The Opera mobile browser is also widely used and supported on all popular platforms. The following screenshot shows you the previous example of a jQuery mobile page rendered in Opera mobile:</p><div><img src="img/6067OT_7_02.jpg" alt="Using a mobile browser emulator"/></div></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec34"/>Creating an expander widget</h1></div></div></div><p>The <a id="id304" class="indexterm"/>expander is for collapsible content. Unlike the accordion, it only has a single section. To create an expander, wrap the collapsible block in a single-parent element and apply the <code class="literal">data-role="wijexpander" attribute </code>to the parent element. You can see how to do this in the following example, where only the contents of the <code class="literal">body</code> tag<a id="id305" class="indexterm"/> are shown:</p><div><pre class="programlisting">&lt;div data-role="page" data-theme="b"&gt;
&lt;div data-role="content"&gt;
&lt;div data-role="wijexpander"&gt;
&lt;h3&gt;Header&lt;/h3&gt;

&lt;div&gt;
Loremipsum...
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</pre></div><p>The default<a id="id306" class="indexterm"/> for an expander shows the content within the block.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec29"/>Passing options to the expander widget</h2></div></div></div><p>To make the<a id="id307" class="indexterm"/> expander collapsed by default, we use the <code class="literal">data-options</code> attribute<a id="id308" class="indexterm"/> and set <code class="literal">expanded</code> to <code class="literal">false</code>.</p><div><pre class="programlisting">&lt;div data-role="wijexpander" <strong>data-options='{ expanded: false }'</strong>&gt;
&lt;h3&gt;Header&lt;/h3&gt;

&lt;div&gt;
...
&lt;/div&gt;
&lt;/div&gt;</pre></div><p>Since Wijmo mobile is still new, many of the widgets do not have mobile counterparts and a few of the options supported for desktop browsers don't work. Namely, the option <code class="literal">contentUrl</code> does not work in the 3.20131.2 version, and setting the expand direction to <code class="literal">right</code> makes the UI look confusing. Here, we see an example of changing the expand direction by setting <code class="literal">data-options='{expandDirection: "right"}'</code>:</p><div><img src="img/6067OT_7_04.jpg" alt="Passing options to the expander widget"/></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec35"/>Creating a ListView widget</h1></div></div></div><p>The ListView<a id="id309" class="indexterm"/> acts as a list of links for navigation. jQuery mobile applies the necessary styles to make the list mobile-friendly. Once a list item is tapped on, the link content is loaded through AJAX and inserted into the page. This improves the user perception as they do not see a blank screen. A ListView is created by setting the <code class="literal">data-role</code> attribute<a id="id310" class="indexterm"/> of an HTML list to <code class="literal">listview</code> with each list item containing a link:</p><div><pre class="programlisting">&lt;div data-role="page"&gt;
&lt;div data-role="content"&gt;
&lt;ul data-role="listview" data-autodividers="true" data-theme="c"&gt;
&lt;li&gt;&lt;a href="http://wijmo.com/demos/"&gt;Wijmo Demos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://wijmo.com/wiki/index.php/ListView"&gt;WijmoListViewDocumentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html"&gt;jQuery Mobile Lists&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</pre></div><p>With <code class="literal">data-autodividers="true"</code> on the list parent, the list items are categorized by their first letter. The list items show up as navigation buttons with right arrows as shown in the<a id="id311" class="indexterm"/> following screenshot:</p><div><img src="img/6067OT_7_05.jpg" alt="Creating a ListView widget"/></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec36"/>Creating an AppView widget</h1></div></div></div><p>The WijmoAppView<a id="id312" class="indexterm"/> creates a responsive layout that adapts to the screen size. It works similar to ListView on phones. On desktops and tablets, the list is displayed on the left side with the content pane taking up the rest of the page. Note that when using AppView, your jQuery mobile and jQuery versions must be compatible with the release of Wijmo you're using. For this example, I am using jQuery 1.8.2, jQuery mobile 1.2.0, and Wijmo3.20131.4.</p><p>An AppView is composed of an AppView page and a ListView for navigation:</p><div><pre class="programlisting">&lt;div data-role="wijappview"&gt;
&lt;div data-role="appviewpage"&gt;
&lt;div data-role="header" data-position="fixed"&gt;
&lt;h2&gt;Title&lt;/h2&gt;
&lt;/div&gt;
&lt;div data-role="content"&gt;
&lt;h3&gt;Content for Tablets&lt;/h3&gt;
&lt;p&gt;On an tablet the AppView will result in a multi-column layout with an always visible menu. This view is optimized for tablets or even full desktop browsers. AppView will automatically use this view when running on a large enough screen.&lt;/p&gt;
&lt;/div&gt;
&lt;div data-role="footer" data-position="fixed"&gt;
&lt;h2&gt;Footer&lt;/h2&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div data-role="menu" class="ui-body-a"&gt;
&lt;ul data-role="listview" data-theme="a"&gt;
  &lt;li&gt;&lt;a href="calendar.html"&gt;Calendar&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="form.html"&gt;Form&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="accordion.html"&gt;Accordion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</pre></div><p>Under<a id="id313" class="indexterm"/> the AppView page, the page title is set in an element using <code class="literal">data-role="header"</code>, which is always displayed at the top of the page. As you might guess, there is also a <code class="literal">data-role="footer"</code> attribute, which is displayed at the bottom of the page when data-position is set to <code class="literal">fixed</code>. The content area in the preceding code marked with <code class="literal">data-role="content"</code> only shows in tablets. You can see how the page would look like in a tablet in the following screenshot:</p><div><img src="img/6067OT_7_06.jpg" alt="Creating an AppView widget"/></div><p>The navigation <a id="id314" class="indexterm"/>panel is a ListView widget wrapped around by a <code class="literal">data-role="menu"</code> element. On the phone, only the navigation panel is shown when the AppView is loaded as in the following screenshot:</p><div><img src="img/6067OT_7_14.jpg" alt="Creating an AppView widget"/></div><p>To make the menu items work, we need to serve the files set in the <code class="literal">href</code> attributes<a id="id315" class="indexterm"/> from a server since they are loaded through AJAX. The downloadable source code for this chapter <a id="id316" class="indexterm"/>includes a file server written in <code class="literal">Node.JS</code>.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec30"/>Adding the AppView pages</h2></div></div></div><p>Let's add the<a id="id317" class="indexterm"/> calendar page and initialize it <a id="id318" class="indexterm"/>with the calendar widget. Create a <code class="literal">calendar.html</code> file with the following code:</p><div><pre class="programlisting">&lt;div data-role="appviewpage" data-title="Calendar"&gt;
  &lt;div data-role="content"&gt;
    &lt;div id="wijcalendar" data-role="wijcalendar"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div><p>The contents under <code class="literal">data-role="content"</code> are displayed in the content area. In this area, the calendar is added by setting <code class="literal">data-role="wijcalendar"</code> on a <code class="literal">div</code>. On the top left is a <strong>Back</strong> button<a id="id319" class="indexterm"/>, which returns to the main menu. It is added whenever a menu item is selected. In the following screen, I selected the calendar menu entry:</p><div><img src="img/6067OT_7_08.jpg" alt="Adding the AppView pages"/></div><div><div><h3 class="title"><a id="note03"/>Note</h3><p>If the example doesn't work for you, the first thing to try is replacing the header styles and scripts with the ones hosted on the CDN: <a class="ulink" href="http://wijmo.com/downloads/#wijmo-cdn">http://wijmo.com/downloads/#wijmo-cdn</a>. The next step is to upload your HTML files and post a question on the forum <a class="ulink" href="http://wijmo.com/forums/">http://wijmo.com/forums/</a>. In addition, check the AJAX requests and make<a id="id320" class="indexterm"/> sure your files are being<a id="id321" class="indexterm"/> served locally.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec31"/>Reusing non-mobile pages</h2></div></div></div><p>Suppose<a id="id322" class="indexterm"/> we already have a <code class="literal">calendar.html</code>file. How can it be used with the new mobile app? You just need to add <code class="literal">data-role="appviewpage",data-role="content",</code> and insert <code class="literal">data-role="widgetname"</code> for<a id="id323" class="indexterm"/> all widgets on the page. For instance, we could replace <code class="literal">calendar.html</code> with the following, keeping the reference to jQuery UI and the Rocket theme:</p><div><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Calendar&lt;/title&gt;
  &lt;!--jQuery References--&gt;
  &lt;script src="img/jquery-1.9.1.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;script src="img/jquery-ui.custom.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;!--Wijmo Widgets JavaScript--&gt;
  &lt;script src="img/jquery.wijmo-open.all.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;script src="img/jquery.wijmo-pro.all.3.20131.2.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;!--Theme--&gt;
  &lt;link href="../lib/jquery-wijmo.css" rel="stylesheet" type="text/css" /&gt;
  &lt;!--Wijmo Widgets CSS--&gt;
  &lt;link href="../lib/jquery.wijmo-open.css" rel="stylesheet" type="text/css" /&gt;
  &lt;link href="../lib/jquery.wijmo-pro.3.20131.2.css" rel="stylesheet" type="text/css" /&gt;
  &lt;script id="scriptInit" type="text/javascript"&gt;
    $(document).ready(function () {
      $('#wijcalendar').wijcalendar()
    });
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div data-role="appviewpage"&gt;
  &lt;div data-role="content"&gt;
  &lt;div id="wijcalendar" data-role="wijcalendar"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>We added<a id="id324" class="indexterm"/> two extra elements for the required<a id="id325" class="indexterm"/> data-roles. Your page may have a different structure and you may just need to add the <code class="literal">data-roles </code>attribute to existing elements. The JavaScript on the page is not executed, as Wijmo ignores everything except the title outside of <code class="literal">data-role="appviewpage"</code>. Since the title is set with <code class="literal">&lt;title&gt;Calendar&lt;/title&gt;</code>, Wijmo uses it as the title for the page as shown in the following screenshot:</p><div><img src="img/6067OT_7_13.jpg" alt="Reusing non-mobile pages"/></div><p>On desktop browsers, the page still displays the calendar widget. Take a look at the screenshot:</p><div><img src="img/6067OT_7_10.jpg" alt="Reusing non-mobile pages"/></div><p>This <a id="id326" class="indexterm"/>is quite remarkable as jQuery mobile <a id="id327" class="indexterm"/>does not have a similar widget to allow reuse of non-mobile pages. Using the WijmoAppView, separate mobile development is no longer necessary.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec37"/>Summary</h1></div></div></div><p>This chapter introduced Wijmo mobile widgets. Unlike jQuery mobile, Wijmo's adaptive widgets can be used on both desktops and phones. We started by setting up the development environment, then we looked at several widgets, starting from the simplest.</p></div></body></html>