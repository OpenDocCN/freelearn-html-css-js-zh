["```js\n$ npm install passport-facebook --save\npassport-facebook@2.1.0 node_modules/passport-facebook\n    |__ passport-oauth2@1.1.2 (uid2@0.0.3, passport-strategy@1.0.0, oauth@0.9.14)\n\n```", "```js\nmodule.exports = { \n    facebookAuth : { \n        clientID: '695605423876152', // App ID \n        clientSecret: 'd8591aa38e06a07b040f20569a', // App secret \n        callbackURL: 'http://localhost:3000/login/FBcallback' \n    } \n} \n\n```", "```js\nvar express = require('express');s \nvar router = express.Router(); \n\nmodule.exports = function(passport){ \n\n    router.get('/', function(req, res) { \n        res.render('login/login', { message: req.flash('message'), csrfToken:\n        req.csrfToken() }); \n    }); \n\n    router.post('/', passport.authenticate('login', { \n        successRedirect: '/dash', \n        failureRedirect: '/login', \n        failureFlash : true \n    })); \n\n    router.get('/signup', function(req, res){ \n        console.log('signing up'); \n        res.render('login/signup',{message: req.flash('message'), csrfToken: \n        req.csrfToken()}); \n    }); \n\n    router.post('/register', passport.authenticate('signup', { \n        successRedirect: '/dash', \n        failureRedirect: '/login/signup', \n        failureFlash : true \n    })); \n\n    router.get('/signout', function(req, res) { \n        req.logout(); \n        res.redirect('/login'); \n    }); \n\n router.get('/facebook', passport.authenticate('facebook', scope:['emails'])); \n router.get('/FBcallback',\n passport.authenticate('facebook',\n { \nsuccessRedirect: '/dash',\n failureRedirect: '/login' })); \n\n    return router; \n} \n\n```", "```js\nvar FacebookStrategy = require('passport-facebook').Strategy; \nvar User = require('../models/user'); \nvar auth = require('../config/authorization'); \n\nmodule.exports = function(passport){ \n\n    passport.use('facebook', new FacebookStrategy({ \n            clientID: auth.facebookAuth.clientID, \n            clientSecret: auth.facebookAuth.clientSecret, \n            callbackURL: auth.facebookAuth.callbackURL, \n            profileFields: ['id', 'displayName', 'email'] \n        }, \n        function(accessToken, refreshToken, profile, cb) { \n            User.findOne({ 'facebook.id': profile.id }, function (err, user) { \n                if(err){ \n                    return cb(err) \n                } else if (user) { \n                    return cb(null, user); \n                } else { \n                    var newUser = new User(); \n                    newUser.facebook.id = profile.id; \n                    newUser.facebook.token = accessToken; \n                    newUser.facebook.name = profile.displayName; \n                    if(profile.emails){ \n                        newUser.email = profile.emails[0].value; \n                    } \n\n                    newUser.save(function(err){ \n                        if(err){ \n                            throw err; \n                        }else{ \n                            return cb(null, newUser); \n                        } \n                    }); \n                } \n            }); \n        } \n    )); \n} \n\n```", "```js\nvar mongoose = require('mongoose'); \n\nvar userSchema = mongoose.Schema({ \n    id: String, \n    email: String, \n    username: String, \n    password: String, \n    firstName: String, \n    lastName: String, \n\n    facebook: { \n\n        id: String, \n        token: String \n    } \n\n}); \nmodule.exports = mongoose.model('User',userSchema); \n\n```", "```js\n<!DOCTYPE html> \n<html> \n  <head> \n    <title><%= title %></title> \n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"> \n\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\"> \n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css\"> \n\n  </head> \n  <body> \n    <div class=\"container\"> \n      <div class=\"jumbotron\"> \n        <h1 class=\"text-center\">Welcome to Giftapp</h1> \n        <hr> \n        <p class=\"text-center\"> \n          <a class=\"btn btn-default btn-lg\" href=\"/login/\" role=\"button\">Log in</a> \n          <a class=\"btn btn-default btn-lg\" href=\"/login/signup\" role=\"button\">Sign Up</a> \n          <a class=\"btn btn-primary btn-lg\" href=\"/login/facebook\" role=\"button\">Log in or sign up with Facebook</a> \n        </p> \n      </div> \n    </div> \n  </body> \n</html> \n\n```", "```js\nmodule.exports = { \n    facebookAuth : { \n        clientID: '695605423876152', // App ID \n        clientSecret: 'd85fR1nkOz2056801c8f9a', // App secret \n        callbackURL: 'http://localhost:3000/login/FBcallback' \n    }, \n\n    twitterAuth : { \n        'consumerKey'       : 'JksPJ0z46tf10/15/16asUdgxW1lJp', \n        'consumerSecret'    : 'IV095CmDyUsSOZo21GnejiShTXWzzxxybalubae82P4hfLa', \n        'callbackURL'       : 'http://127.0.0.1:3000/login/twitterCallback' \n    } \n} \n\n```", "```js\n$ npm install passport-twitter --save\npassport-twitter@1.0.4 node_modules/passport-twitter\n|--- passport-oauth1@1.0.1 (passport-strategy@1.0.0, utils-merge@1.0.0, \n        oauth@0.9.14)\n|__ xtraverse@0.1.0 (xmldom@0.1.22)\n\n```", "```js\nvar TwitterStrategy = require('passport-twitter').Strategy; \nvar User = require('../models/user'); \nvar auth = require('../config/authorization'); \n\nmodule.exports = function(passport){ \n\n    passport.use('twitter', new TwitterStrategy({ \n            consumerKey     : auth.twitterAuth.consumerKey, \n            consumerSecret  : auth.twitterAuth.consumerSecret, \n            callbackURL     : auth.twitterAuth.callbackURL \n        }, \n        function(token, tokenSecret, profile, cb) { \n            User.findOne({ 'twitter.id': profile.id }, function (err, user) { \n                if(err){ \n                    return cb(err) \n                } else if (user) { \n                    return cb(null, user); \n                } else { \n                    // if there is no user, create them \n                    var newUser                 = new User(); \n\n                    // set all of the user data that we need \n                    newUser.twitter.id          = profile.id; \n                    newUser.twitter.token       = token; \n                    newUser.twitter.username    = profile.username; \n                    newUser.twitter.displayName =              \n                                                profile.displayName; \n\n                    newUser.save(function(err){ \n                        if(err){ \n                            throw err; \n                        }else{ \n                            return cb(null, newUser); \n                        } \n                    }); \n                } \n            }); \n        } \n    )); \n} \n\n```", "```js\nvar mongoose = require('mongoose'); \n\nvar userSchema = mongoose.Schema({ \n    id: String, \n    email: String, \n    username: String, \n    password: String, \n    firstName: String, \n    lastName: String, \n\n    facebook: { \n        name: String, \n        id: String, \n        token: String \n    }, \n\n twitter: {\n id: String,\n token: String,\n username: String,\n displayName: String\n } \n\n}); \nmodule.exports = mongoose.model('User',userSchema); \n\n```", "```js\nvar express = require('express'); \nvar router = express.Router(); \n\nmodule.exports = function(passport){ \n\n    router.get('/', function(req, res) { \n        res.render('login/login', { message: req.flash('message'), csrfToken: \n        req.csrfToken() }); \n    }); \n\n    router.post('/', passport.authenticate('login', { \n        successRedirect: '/dash', \n        failureRedirect: '/login', \n        failureFlash : true \n    })); \n\n    router.get('/signup', function(req, res){ \n        console.log('signing up'); \n        res.render('login/signup',{message: req.flash('message'), csrfToken:\n        req.csrfToken()}); \n    }); \n\n    router.post('/register', passport.authenticate('signup', { \n        successRedirect: '/dash', \n        failureRedirect: '/login/signup', \n        failureFlash : true \n    })); \n\n    router.get('/signout', function(req, res) { \n        req.logout(); \n        res.redirect('/login'); \n    }); \n\n    router.get('/facebook', passport.authenticate('facebook', {scope:\n    ['email']})); \n\n    router.get('/FBcallback', \n        passport.authenticate('facebook', { successRedirect: '/dash', \n            failureRedirect: '/login' })); \n\n router.get('/twitter', passport.authenticate('twitter')); \n // handle the callback after twitter has authenticated the user \n router.get('/twitterCallback', \n passport.authenticate('twitter',\n { \n successRedirect : '/dash', \n failureRedirect : '/login' \n })); \n\n    return router; \n} \n\n```", "```js\nvar signup = require('./signup'); \nvar login = require('./login'); \nvar facebook = require('./facebook'); \nvar twitter = require('./twitter'); \nvar User = require('../models/user'); \n\nmodule.exports = function(passport){ \n\n    passport.serializeUser(function(user, done) { \n\n        done(null, user._id); \n    }); \n\n    passport.deserializeUser(function(id, done) { \n        User.findById(id, function(err, user) { \n\n            done(err, user); \n        }); \n    }); \n\n    signup(passport); \n    login(passport); \n    facebook(passport); \n twitter(passport); \n\n} \n\n```", "```js\n<!DOCTYPE html> \n<html> \n  <head> \n    <title><%= title %></title> \n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"> \n\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\"> \n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css\"> \n\n  </head> \n  <body> \n    <div class=\"container\"> \n      <div class=\"jumbotron\"> \n        <h1 class=\"text-center\">Welcome to Giftapp</h1> \n        <hr> \n        <p class=\"text-center\"> \n          <a class=\"btn btn-default btn-lg\" href=\"/login/\" role=\"button\">Log in</a> \n          <a class=\"btn btn-default btn-lg\" href=\"/login/signup\" role=\"button\">Sign Up</a> \n          <a class=\"btn btn-primary btn-lg\" href=\"/login/facebook\" role=\"button\">Log in or sign up with Facebook</a> \n <a class=\"btn btn-primary btn-lg\" href=\"/login/twitter\" role=\"button\">Log in or sign up with Twitter</a> \n        </p> \n      </div> \n    </div> \n  </body> \n</html> \n\n```", "```js\n> use giftapp\nswitched to db giftapp\n> db.users.find({}).pretty()\n{\n \"_id\" : ObjectId(\"56bbdc4308ca9a596f0006d8\"),\n \"email\" : \"john@thisisafakeemail.com\",\n \"facebook\" : {\n \"name\" : \"John Moore\",\n \"token\" : \"CAAJ4pkIxqDgBABrsfsds345435ZAZAE73UZCjehrtjWQ8YhGWVxdoa6VA0OuydPPuQO8wJWBDO4ZCylNX7dMPOJL4VW7WX3nZCLt1b16Mghgdfdg34543543\",\n \"id\" : \"101539512345670\"\n },\n \"__v\" : 0\n}\n{\n \"_id\" : ObjectId(\"56bd252d32d162207ab35be4\"),\n \"twitter\" : {\n \"displayName\" : \"John Moore\",\n \"username\" : \"JohnMooreNinja\",\n \"token\" : \"4867525577-dvlIz4uEZMgMZHFd6tRjhgjhgjgf8WrGv\",\n \"id\" : \"486633445565657\"\n },\n \"__v\" : 0\n}\n\n```", "```js\nvar mongoose = require('mongoose'); \n\nvar giftlistSchema = mongoose.Schema({ \n    id: String, \n    user_id: String, \n    name: String, \n    gifts: [{name: String}] \n    sharedWith [{user_id: String}] \n\n}); \nmodule.exports = mongoose.model('Giftlist',giftlistSchema); \n\n```", "```js\nvar express = require('express'); \nvar router = express.Router(); \nvar isAuthenticated = require('../utils/authenticated'); \n\nrouter.get('/', isAuthenticated, function(req, res, next) { \n\n    var db = req.db; \n    var collection = db.get('giftlist'); \n        console.log(\"routing dash for \" + req.user._id); \n    collection.find({'owner_id':req.user._id}, {}, function(err,giftlists){ \n        if(err){ \n            res.send(err); \n        }else { \n            giftlists = giftlists || []; \n res.render('dash/dashboard', {user: req.user, giftlists: giftlists, csrfToken: req.csrfToken()}); \n        } \n    }); \n}); \n\nmodule.exports = router; \n\n```", "```js\n<!DOCTYPE html> \n<html ng-app=\"giftapp\"> \n<head > \n    <title>Dashboard for <%= user.firstName %> <%= user.lastName %> </title> \n\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"> \n\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\"> \n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css\"> \n    <script src=\"img/angular.min.js\"></script> \n    <script src=\"img/angular-ui-router.min.js\"></script> \n    <script src=\"img/angular-resource.js\"></script> \n\n</head> \n<body> \n<nav class=\"nav navbar-default\"> \n    <div class=\"container-fluid\"> \n        <div class=\"navbar-header\"> \n            <a class=\"navbar-brand\" href=\"#\"><%= user.firstName %> <%= user.lastName %> Dashboard</a> \n        </div> \n    </div> \n</nav> \n\n<div class=\"container\"> \n\n    <div ui-view></div> \n</div> \n<script src=\"img/dashMainController.js\"></script> \n<script src=\"img/giftappFormController.js\"></script> \n<script src=\"img/giftlistFactory.js\"></script> \n<script>\n angular.module(\"csrfValue\", []) \n .value(\"csrfToken\",\"<%= csrfToken %>\");\n</script> \n</body> \n</html> \n\n```", "```js\nangular.module('giftappControllers') \n    .controller('GiftappFormController', ['$scope','List','csrfToken', '$state', function($scope, List, csrfToken, $state) { \n        $scope.formData = {}; \n        $scope.formData.items = []; \n        $scope.formData._csrf = csrfToken; \n\n        $scope.create = function() { \n            console.log(\"create\"); \n            var myList = new List($scope.formData); \n            myList.$save(function(giftList){ \n                console.log(giftList); \n                $state.go('dash'); \n            }); \n\n        } \n    }]); \n\n```", "```js\nangular.module('giftappControllers',['giftlistServices','csrfValue']) \n    .controller('DashMainController', ['$scope','List', function($scope,List) { \n        $scope.lists = List.query(); \n\n    }]); \n\n```", "```js\n<div class=\"row\"> \n    <div class=\"col-md-12\"> \n        <h2>Add a new list</h2> \n <form class=\"form-horizontal\" ng-submit=\"create()\"> \n            <div class=\"form-group\"> \n                <label for=\"listname\" class=\"col-sm-2 control-label\">List \n                 Name</label> \n                <div class=\"col-sm-10\"> \n <input type=\"text\" class=\"form-control\" id=\"listname\"\n                     placeholder=\"Name\" ng-model=\"formData.name\"> \n                </div> \n            </div> \n            <div class=\"form-group\"> \n                <label class=\"col-sm-2 control-label\">Item 1</label> \n                <div class=\"col-sm-10\"> \n <input type=\"text\" class=\"form-control\" ng-\n                     model=\"formData.items[0]\"> \n                </div> \n            </div> \n            <div class=\"form-group\"> \n                <label class=\"col-sm-2 control-label\">Item 2</label> \n                <div class=\"col-sm-10\"> \n <input type=\"text\" class=\"form-control\" ng-\n                     model=\"formData.items[1]\"> \n                </div> \n            </div> \n            <div class=\"form-group\"> \n                <label class=\"col-sm-2 control-label\">Item 3</label> \n                <div class=\"col-sm-10\"> \n <input type=\"text\" class=\"form-control\" ng-\n                     model=\"formData.items[2]\"> \n                </div> \n            </div> \n            <div class=\"form-group\"> \n                <div class=\"col-sm-offset-2 col-sm-10\"> \n                    <button type=\"submit\" class=\"btn btn-default btn-lg btn-\n                     block\"> \n                        <span class=\"glyphicon glyphicon-flash\"></span> Create\n                          List \n                    </button> \n                </div> \n            </div> \n        </form> \n {{formData}} \n    </div> \n\n</div> \n\n```", "```js\nvar Giftlist = require('../models/giftlist'); \n\nexports.index = function(req, res){ \n\n        Giftlist.find({'user_id':req.user._id}, {}, function(err,giftlists){ \n            if(err){ \n                res.send(err); \n            }else if(giftlists){ \n                res.json(giftlists); \n\n            }; \n        }); \n\n}; \n\nexports.create = function(req, res){ \n    var newGiftlist = new Giftlist(); \n    newGiftlist.name = req.body.name; \n    newGiftlist.user_id = req.user._id; \n\n    var gifts = []; \n    req.body.items.forEach(function(item){ \n        gifts.push({name:item}); \n    }); \n    newGiftlist.gifts = gifts; \n\n    newGiftlist.save(function(err){ \n        if(err){ \n            throw err \n        } else { \n            res.json(newGiftlist); \n        } \n    }); \n\n}; \n\nexports.show = function(req, res){ \n    Giftlist.findOne({_id:req.params.id}, function(err, list){ \n        if(req.params.format == \"json\" || req.isJSON){ \n            res.json(list); \n        }else{ \n            res.render('giftlist/show',{giftlist:list}); \n        } \n    }); \n\n}; \n\n```", "```js\n<!DOCTYPE html> \n<html> \n<head> \n    <title>Show Users</title> \n    <link rel='stylesheet' href='/stylesheets/style.css' /> \n</head> \n<body> \n<h1>User List: <%= appName %></h1> \n\n<table> \n    <thead> \n        <tr> \n\n            <th>First Name</th> \n            <th>Last Name</th> \n            <th>Email Address</th> \n            <th>Dashboard</th> \n        </tr> \n    </thead> \n    <tbody> \n    <% users.forEach(function(user, index){ -%> \n        <tr> \n            <td><a href=\"show/<%= user._id%> \"><%= user.firstName %></a></td> \n            <td><%= user.lastName %></td> \n            <td><%= user.email %></td> \n            <td><a href=\"/dash/<%= user._id %>\">View</a></td> \n        </tr> \n    <% }); %> \n    </tbody> \n</table> \n\n</body> \n</html> \n\n```", "```js\n<div class=\"row\"> \n    <div class=\"col-xs-12 col-md-6\"> \n        <h2>My Lists</h2> \n\n        <a class=\"btn btn-primary\" role=\"button\" ui-sref=\"add\" href=\"#/add\"> \n            <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span> \n            Add List</a> \n        <ul class=\"list-unstyled\"> \n <li ng-repeat=\"list in lists\"><a class=\"btn btn-link\" \n             href=\"/giftlist/{{list._id}}\" role=\"button\">{{ list.name }}</a></li> \n\n        </ul> \n    </div> \n\n    <div class=\"col-xs-12 col-md-6\"> \n        <h2>Lists Shared With Me</h2> \n    </div> \n</div> \n\n```", "```js\n<!DOCTYPE html> \n<html> \n<head > \n    <title>Giftlist: <%= giftlist.name %></title> \n\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"> \n\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\"> \n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css\"> \n\n <!-- You can use open graph tags to customize link previews. \n Learn more: https://developers.facebook.com/docs/sharing/webmasters --> \n <meta property=\"og:url\"\n           content=\"http://localhost:3000/giftlist/<%= giftlist._id %>\" /> \n <meta property=\"og:type\"\n          content=\"website\" /> \n <meta property=\"og:title\"\n          content=\"Giftlist App\" /> \n <meta property=\"og:description\"\n         content=\"<%= giftlist.name %>\" /> \n\n</head> \n<body> \n<div id=\"fb-root\"></div>\n<script>(function(d, s, id)\n { \n var js, fjs = d.getElementsByTagName(s)[0]; \n if (d.getElementById(id)) return; \n js = d.createElement(s); js.id = id; \n js.src =\n \"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=228887303845448\"; \n fjs.parentNode.insertBefore(js, fjs); \n }\n(document, 'script', 'facebook-jssdk'));\n</script>\n<nav class=\"nav navbar-default\"> \n <div class=\"container-fluid\"> \n <div class=\"navbar-header\"> \n <a class=\"navbar-brand\" href=\"#\">Giftlist</a> \n </div> \n </div> \n</nav> \n\n<div class=\"container\"> \n    <h1><%= giftlist.name %></h1> \n\n    <div class=\"row\"> \n        <div class=\"col-md-12\"> \n            <ul> \n                <% giftlist.gifts.forEach(function(gift, index){ -%> \n                <li><%= gift.name %></li> \n                <% }); -%> \n            </ul> \n <a href=\"https://twitter.com/share\" class=\"twitter-share-button\" data-via=\"JohnMooreNinja\" data-size=\"large\" data-hashtags=\"giftapp\">Tweet</a>\n <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');\n</script> \n <div class=\"fb-like\"></div> \n\n        </div> \n    </div> \n\n</div> \n\n</body> \n</html> \n\n```"]