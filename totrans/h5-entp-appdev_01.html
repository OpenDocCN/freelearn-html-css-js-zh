<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;HTML5 Starter Kit: Compatibility"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. HTML5 Starter Kit: Compatibility</h1></div></div></div><p>In the <span class="emphasis"><em>Preface</em></span>, we covered the general structure of an HTML5 document, but before jumping into development, we must first talk about addressing the time consuming issue of compatibility across browsers and platforms. In this chapter, we will cover how web browsers work and the strategies to support HTML5 across multiple web browsers and devices. By the end of this chapter, you will be able to follow an initial plan of action to consistently support your enterprise application's functionality, interface, and user experience.</p><p>We will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The real meaning of compatibility</li><li class="listitem" style="list-style-type: disc">Browsers</li><li class="listitem" style="list-style-type: disc">OS platforms</li><li class="listitem" style="list-style-type: disc">Display resolution</li><li class="listitem" style="list-style-type: disc">Importance of compatibility</li><li class="listitem" style="list-style-type: disc">Patching the differences – compatibility libraries</li></ul></div><div class="section" title="The real meaning of compatibility"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>The real meaning of compatibility</h1></div></div></div><a id="id0" class="indexterm"/><p>In an ideal world, HTML, CSS, and JavaScript should be interpreted in the same way across all browsers and platforms. While the <span class="strong"><strong>World Wide Web Consortium</strong></span> (<span class="strong"><strong>W3C</strong></span>) <a id="id1" class="indexterm"/>has developed standards for such technologies, browser makers have implemented them in their own ways. This means that although you can use W3C standards for developing enterprise applications, it is possible for inconsistencies to arise between different browsers and platforms.</p><p>Compatibility does not mean that the experience of the user should be the same in every client, but it needs to maintain certain consistencies. For example, if we have a list of users in an application, it is good practice to have different inputs depending on the platform. We can use the scroll bar to navigate the list on any desktop client. For touch devices, gestures might be preferable.</p><a id="id2" class="indexterm"/><p>On the other hand, we need to be careful with platform restrictions because sometimes it is not technically possible to support the same functionality in every device or client. A particular instance that illustrates this is the audio and video volume management in iOS devices (until Version 5.1.1). It is not possible to control the volume using JavaScript in Safari for iOS. In such cases, it is preferable to hide the volume control for iOS devices.</p><p>To better understand the issues of compatibility, it is important to understand the evolution of the World Wide Web in relation to the capabilities of the client that renders the final product, the operating system or platform, and the screen resolution.</p></div></div>
<div class="section" title="Browsers"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Browsers</h1></div></div></div><a id="id3" class="indexterm"/><p>Since the release of the World Wide Web, there has always been competition for dominance in usage share in the browser marketplace. By 2001, Internet Explorer controlled over 90 percent of the browser market after Netscape ceased to be a major contender, but with the release of Version 1.0 of Mozilla Firefox in November 2004 and Google Chrome in September 2008, it began to see a new crop of competition.</p><div class="mediaobject"><img src="graphics/5869_01_01.jpg" alt="Browsers"/></div><p>As of June 2012 however, Google Chrome has become the most used browser at just 32.76 percent market share. It now shares an ever crowded space with Mozilla Firefox, Internet Explorer, Safari, and Opera including mobile counterparts. In addition, each one of these has its own list of versions, and we need to decide in some cases from which version we require support for our applications after knowing that newer versions are always around the corner.<a id="id4" class="indexterm"/>
</p><p>Let's peek behind the scenes a bit to understand the complexity behind the diversity of browsers and versions. Each browser has two major software components: a rendering engine and a JavaScript engine.</p><div class="section" title="Rendering engine"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>Rendering engine</h2></div></div></div><p>Also known as the <a id="id5" class="indexterm"/>
<span class="strong"><strong>layout engine</strong></span> or <a id="id6" class="indexterm"/>
<span class="strong"><strong>web browser engine</strong></span>, <a id="id7" class="indexterm"/>the rendering engine is responsible for parsing the markup content (HTML) and the style information (CSS, XSL, and so on), and generating a visual presentation of the formatted content including media files referenced (images, audio, video, fonts, and so on). It is important to know the many rendering engines out there because it can help you to recognize certain behaviors and deduce which browsers are going to behave in certain ways based on their rendering engine.</p><p>While Chrome and Safari use WebKit (developed by Apple, KDE, Nokia, Google, and others), Firefox uses Gecko (developed by Netscape/Mozilla Foundation), Internet Explorer uses Trident (owned by Microsoft), and Opera uses Presto.</p><p>With CSS, one can identify some exclusive rendering engine features (known as CSS extensions) by the prefix. WebKit-only features start with <code class="literal">-webkit-</code> and Gecko-only features with <code class="literal">-moz-</code>. Opera includes the <code class="literal">-o-</code> prefix while Internet Explorer 8 and up recognize <code class="literal">-ms-</code>.</p><p>Trident has a different approach. It recognizes common CSS properties with <code class="literal">*</code> or <code class="literal">–</code> as a prefix to override previous definitions (for example, <code class="literal">*color:#ccc;</code> and <code class="literal">_color:#ccc;</code> are not recognized by other rendering engines except Trident).</p></div><div class="section" title="JavaScript engine"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>JavaScript engine</h2></div></div></div><a id="id8" class="indexterm"/><p>The JavaScript engine is the software component that interprets and executes JavaScript code in the browser. While the rendering engine is responsible for the visual presentation of HTML content using CSS styles, the JavaScript engine will interpret and execute JavaScript code.</p><p>Chrome employs the V8 engine, Firefox now uses Jägermonkey, Internet Explorer 9 features Chakra, Safari uses Nitro, while Opera substituted SunSpider with Carakan in 2010.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>The rankings for what many consider the current browser war are largely driven by the speed of the JavaScript engine. While other engines rely on interpretation and compilation, V8 has no intermediate parser and it generates an assembler using its own runtime environment. In other words, it has a virtual machine. This has allowed Chrome to become one of the fastest browsers.</p></div></div><a id="id9" class="indexterm"/><p>As a general rule (there are some exceptions), it is better to load HTML and CSS first and then JavaScript. This can be done by including the <code class="literal">&lt;script&gt;</code> tags that import JavaScript just before closing the <code class="literal">&lt;body&gt;</code> tag. The reason for this is that it is faster to render HTML and CSS than to interpret and execute JavaScript. Web pages will appear to load faster as a result.</p><p>Where it is not possible to include the <code class="literal">&lt;script&gt;</code> tags in the body, there are two attributes on the <code class="literal">&lt;script&gt;</code> tag that can be used to signal to the browser when the script should be downloaded. These are <code class="literal">async</code>, which was introduced in HTML5, and <code class="literal">defer</code>. The <code class="literal">defer</code> attribute literally does what it purports; it defers script execution until the page has been rendered. This way, the DOM is ready for your script. The<a id="id10" class="indexterm"/> <code class="literal">async</code> attribute signals to the browser to download the script asynchronously and without blocking the rendering engine and executes it when it is ready. Both execute before the <code class="literal">DOMContentLoaded</code> event.<a id="id11" class="indexterm"/> The key difference is that <code class="literal">defer</code> executes each script sequentially and <code class="literal">async</code> executes each script when it is ready. Typically, in order to support older browsers that do not support the <code class="literal">async</code> attribute, these attributes are used together so that browsers that do not perform asynchronously can fall back to <code class="literal">defer</code>.</p><p>While there are many differences between browsers, it is important to be aware that inside the same browser category exists multiple versions whose HTML5 and CSS3 support vary widely. This is especially true for Internet Explorer. Proper support for HTML5 and CSS3 does not appear until Internet Explorer 9.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>Microsoft has started a campaign to deprecate and reduce the market share of Internet Explorer 6 worldwide. See <a class="ulink" href="http://www.ie6countdown.com">http://www.ie6countdown.com</a> for more details. The Aten Design Group took this to another level by commemorating the IE6 funeral <a id="id12" class="indexterm"/>at <a class="ulink" href="http:///www.ie6funeral.com">http:///www.ie6funeral.com</a>.</p></div></div><p>Most of the HTML5 and CSS3 capabilities are supported in the following browsers and versions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Internet Explorer 9 and higher</li><li class="listitem" style="list-style-type: disc">Firefox 7 and higher</li><li class="listitem" style="list-style-type: disc">Chrome 14 and higher</li><li class="listitem" style="list-style-type: disc">Safari 5 and higher</li><li class="listitem" style="list-style-type: disc">Safari Mobile 3.2 and higher</li><li class="listitem" style="list-style-type: disc">Opera 11 and higher</li><li class="listitem" style="list-style-type: disc">Opera Mobile 5 and higher</li></ul></div><a id="id13" class="indexterm"/><p>Even so, there are still some features not supported and there are inconsistencies between the implementations. One interesting case study that reveals the lack of standards across the browsers is the use of video in HTML5. To use the native video capabilities of HTML5, the video file must be compressed using specific codecs. There are three major codecs that exist: <a id="id14" class="indexterm"/>
<span class="strong"><strong>Ogg Theora</strong></span> (royalty-free), <a id="id15" class="indexterm"/>
<span class="strong"><strong>H.264</strong></span> (free for end consumer but involves royalties for products that encode and decode), and <a id="id16" class="indexterm"/>
<span class="strong"><strong>WebM</strong></span> (royalty-free). As Firefox is oriented to use open source technologies, it initially supported only Ogg and WebM. Chrome currently supports all three codecs, but, for similar reasons as Firefox support for H.264, will be removed in subsequent versions (although it may continue support on mobile). Safari, Safari Mobile, and Internet Explorer 9 and higher support only H.264 by default, but you can install plugins to support Ogg and WebM (except on Safari Mobile).</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>The following websites provide detailed information about support of HTML5 features on different browsers and differences in behaviors if any:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://caniuse.com/">http://caniuse.com/</a></li><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://html5please.com/">http://html5please.com/</a></li></ul></div></div></div></div></div>
<div class="section" title="OS platforms"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>OS platforms</h1></div></div></div><a id="id17" class="indexterm"/><p>Any web application will be affected by the operating system (OS) on which it runs. The most noticeable difference is the appearance of user interface elements of the browser including the scroll bars, submit buttons, checkboxes, and so on. This is an important consideration because the size and shape of these elements can vary across multiple operating systems – even with the same web browser. In fact, some operating systems restrict some functionality, as was the case with <code class="literal">&lt;input type="file"&gt;</code> which initially had not been supported on iOS prior to iOS6.</p><div class="mediaobject"><img src="graphics/5869_01_02.jpg" alt="OS platforms"/></div><a id="id18" class="indexterm"/><p>OS platform statistics show that Windows is by far the most used OS on the web. Mobile platforms, however, may take on more prominence in the years ahead considering the growing popularity of tablet devices and technical improvements of smartphones.</p></div>
<div class="section" title="Display resolution"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Display resolution</h1></div></div></div><a id="id19" class="indexterm"/><p>With so many devices on the market, screen resolution is quickly becoming an important factor for consideration when planning web applications. Android has a diversity of devices of many sizes and densities. According to the usage of screen resolutions, the advance of new hardware technologies has made it possible to increase the number of pixels on modern screens:</p><div class="mediaobject"><img src="graphics/5869_01_03.jpg" alt="Display resolution"/></div><a id="id20" class="indexterm"/><p>Even though most desktop systems now have a resolution higher than 1024 x 768, the rise of mobile technologies has created a paradox where lower resolution displays are retaking lost ground. The experience delivered by an enterprise application does not need to be—and in fact should not be—the same for all the devices. Viewing a page on a desktop screen at 1920 x 1200 can be vastly different from a mobile phone screen at 960 x 540 not only because of the resolution, but also because of the size of the device and readability (the ease in which text can be read and understood). It is sometimes important to detect the resolution to adapt the user experiences. To be sure, new techniques such as <a id="id21" class="indexterm"/>
<span class="strong"><strong>responsive web design</strong></span> are taking hold to address these issues.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>As if there were not enough variables in the playfield, Apple introduced Retina Display in June 2010 with the iPhone 4, having a native resolution of 960 x 640. This technology is based on a higher pixel density that is beyond the human eye's capacity to see pixelation in images on the screen at a typical viewing distance. Although it was not so noticeable for web images in the iPhone 4, the new iPad and the new line of MacBook Pros released in 2012 with Retina Display create new requirements for web applications.</p><p>First, there are some web development techniques which determine if the client is a mobile device by using CSS to detect the device resolution. With the new iPad, 2048 x 1536 px resolution is not possible or at least not intuitive. The resolution of the new iPad is higher than the majority of desktops and laptops in the market. Secondly, to avoid the pixelated effect in any application viewed on the new iPad or the new MacBook Pro, it is necessary to include higher resolution images for these Apple devices and images in normal resolution for backward compatibility with all other devices.<a id="id22" class="indexterm"/>
</p></div></div></div>
<div class="section" title="Importance of compatibility"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec18"/>Importance of compatibility</h1></div></div></div><a id="id23" class="indexterm"/><p>At this point, it is natural to ask why it is important to care about compatibility if one needs to only develop enterprise applications used internally within an organization, where a specific browser can be mandated. This attitude can be perilous for two reasons. First, businesses are moving quickly towards mobile delivery and controlling the platform is becoming thus less tenable. Secondly, constraining an organization in this way hampers its ability to update its application support capabilities as it couples the enterprise application too tightly to the choices in desktop support. If a company wanted to upgrade to a newer operating system or default web browser, constraining it by requiring that certain versions of browsers be supported can have undesired consequences down the line.</p></div>
<div class="section" title="Patching the differences &#x2013; compatibility libraries"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec19"/>Patching the differences – compatibility libraries</h1></div></div></div><p>In general, we want to support as many browsers as possible, so we are going to need a way to allow backward compatibility by implementing the capabilities not available on the browser, informing the user that the feature is not available, or modifying the user experience depending on the browser's capabilities. To this end, there are many JavaScript libraries that can help.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>For this chapter, styles and scripts will be included inline within the HTML file to simplify comprehension even though it is a good practice to have styles and scripts in separate files.</p></div></div><div class="section" title="HTML5 Shiv"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>HTML5 Shiv</h2></div></div></div><p>As already noted, Internet Explorer begins to support HTML5 tags in Version 9. <span class="strong"><strong>HTML5 Shiv</strong></span>
<a id="id24" class="indexterm"/> allows for support in previous versions. Also known as <span class="strong"><strong>HTML5 Shim</strong></span>, <a id="id25" class="indexterm"/>it is an open source JavaScript library that enables styling for HTML5 elements in versions of Internet Explorer before IE 9. It accomplishes this by using <code class="literal">document.createElement("element")</code> to tell the browser that the tags exist.</p><p>Suppose that we are testing in Internet Explorer 8, and we have the following code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
header{
  color:#ff0000;
  font-size:40px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;Hello HTML5!&lt;/header&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.PacktPub.com">http://www.PacktPub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.PacktPub.com/support">http://www.PacktPub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div><p>In Internet Explorer 8, the text will not display the style. HTML5 Shiv can be used to make this work.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>It is good practice to dive into libraries before you use them to understand exactly what they are doing. We encourage you to check out the HTML5 Shiv code at the following location: <a class="ulink" href="https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv.js">https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv.js</a>.</p></div></div><a id="id26" class="indexterm"/><p>To install this library you need to perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download the library from the following location: <a class="ulink" href="https://github.com/aFarkas/html5shiv/zipball/master">https://github.com/aFarkas/html5shiv/zipball/master</a>.</li><li class="listitem">Uncompress the file.</li><li class="listitem">Copy <code class="literal">html5shiv.js</code> from the <code class="literal">dist</code> folder to your JavaScript folder (<code class="literal">js</code> in our case).</li><li class="listitem">Insert the following code inside the <code class="literal">head</code> tag:<div class="informalexample"><pre class="programlisting">&lt;!--[if lt IE 9]&gt;
&lt;script src="js/html5shiv.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;</pre></div><p>As a result our code should look as follows:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;!--[if lt IE 9]&gt;
  &lt;script src="js/html5shiv.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;
&lt;style&gt;
header{
  color:#ff0000;
  font-size:40px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;header&gt;Hello HTML5!&lt;/header&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>Note that the <code class="literal">&lt;!--[if lt IE 9]&gt;</code> conditional comment includes the JavaScript library only if the browser version is Internet Explorer prior to Version 9.</p></div></div><p>If you run this code in Internet Explorer 8, it will show a <span class="strong"><strong>Hello HTML5!</strong></span> in red with a bigger font. This is one of the exceptions where we need to load a JavaScript library inside <code class="literal">&lt;head&gt;</code>, because we need to give the capability to recognize HTML5 elements to the browser before it begins styling.</p><div class="mediaobject"><img src="graphics/5869_01_04.jpg" alt="HTML5 Shiv"/></div></div><div class="section" title="Modernizr"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>Modernizr</h2></div></div></div><a id="id27" class="indexterm"/><p>Since not even the newest versions of web browsers support all HTML5 and CSS3 capabilities, it is useful to do some kind of detection to show a notification or change the behavior of a page when a feature is not supported. An old strategy was to look at the property <code class="literal">navigator.userAgent</code> to detect the browser's user agent and code based on the pertinent cases. As user agents change, it becomes difficult to keep pace and alter an application. An alternative approach to user agent detection is <span class="strong"><strong>feature detection</strong></span>
<a id="id28" class="indexterm"/>, wherein an application detects whether a particular feature is supported and reacts accordingly. The following is an example of feature detection:</p><div class="informalexample"><pre class="programlisting">function supports_video() {
  return !!document.createElement('video').canPlayType;
}</pre></div><p>
<span class="strong"><strong>Modernizr</strong></span> is an open source JavaScript library that allows support for different levels of experiences based on the capabilities of each browser using a simple feature detection model. Additionally, Modernizr uses HTML5 Shiv, adding the ability to style HTML5 elements on Internet Explorer prior to Version 9.</p><p>Going back to our previous example:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
header{
  color:#ff0000;
  font-size:40px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;Hello HTML5!&lt;/header&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><a id="id29" class="indexterm"/><p>Suppose that we want to implement the geolocation functionality using HTML5 to get the geographical position of the user, and we want to detect if it is available. For tha we start using Modernizr: <a id="id30" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem"><a id="id31" class="indexterm"/>Go to <a class="ulink" href="http://modernizr.com/download/">http://modernizr.com/download/</a>.</li><li class="listitem">Select the functionality that you want to validate and <span class="strong"><strong>html5shiv</strong></span>. In this case, we are going to select the <span class="strong"><strong>Geolocation API</strong></span> functionality under <span class="strong"><strong>Misc.</strong></span>, <span class="strong"><strong>html5shiv v3.4</strong></span> and <span class="strong"><strong>Add CSS Classes</strong></span> present under <span class="strong"><strong>Extra</strong></span>.</li><li class="listitem">Click on the <a id="id32" class="indexterm"/><span class="strong"><strong>GENERATE!</strong></span> button.</li><li class="listitem">Copy the source code generated.</li><li class="listitem">Create a new JavaScript file (call it <code class="literal">modernizr.js</code>), paste the source code, and save it in your JavaScript folder.</li><li class="listitem">Import the Modernizr library <code class="literal">&lt;script src="js/modernizr.js" type="text/javascript"&gt;&lt;/script&gt; inside &lt;head&gt;</code>. At this point the code should look as follows:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script src="js/modernizr.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;style&gt;
header{
  color:#ff0000;
  font-size:40px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;header&gt;Hello HTML5!&lt;/header&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>From here we have two possible solutions; use JavaScript or use CSS to detect the fallback.</p></li></ol></div><p>In order to show a message or display a different style, we can se CSS with the following steps: <a id="id33" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Add a class called <code class="literal">no-js</code> to the <code class="literal">&lt;html&gt;</code> tag. This will work as a default option if JavaScript is not supported. If JavaScript is supported, Modernizr will replace <code class="literal">no-js</code> with a class called <code class="literal">js</code>, and will add classes for all features using the prefix <code class="literal">no-</code> if it is not supported. For example, if your browser supports geolocation, the <code class="literal">html</code> tag will look something like the following line of code:<div class="informalexample"><pre class="programlisting">&lt;html class="js geolocation"&gt;  </pre></div><p>Otherwise, it will look like the following code:</p><div class="informalexample"><pre class="programlisting">&lt;html class="js no-geolocation"&gt;</pre></div></li><li class="listitem">In the <code class="literal">&lt;body&gt;</code> tag, add two <code class="literal">div</code> tags containing messages for when geolocation is supported and for when it is not:<div class="informalexample"><pre class="programlisting">&lt;div class="geolocation-available"&gt;
  Congrats! Your browser supports Geolocation!
&lt;/div&gt;
  &lt;div class="no-geolocation"&gt;
Your browser doesn't support Geolocation :(
&lt;/div&gt;</pre></div></li><li class="listitem">Add CSS styles to show and hide the messages. By default, hide both messages and use the class created by the detection class in the <code class="literal">&lt;html&gt;</code> tag to hide or show the classes accordingly:<div class="informalexample"><pre class="programlisting">div.geolocation-available, div.no-geolocation{
  display: none;
}
.no-geolocation div.no-geolocation, .geolocation div.geolocation-available {
  display: block;
}</pre></div><p>Finally, the complete code should look like the following code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html class="no-js"&gt;
&lt;head&gt;
  &lt;script src="js/modernizr.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;style&gt;
  header{
    color:#ff0000;
    font-size:40px;
  }
  div.geolocation-available, div.no-geolocation{
    display: none;
  }
  .no-geolocation div.no-geolocation, .geolocation div.geolocation-available {
    display: block;
  }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;Hello HTML5!&lt;/header&gt;
  &lt;div class="geolocation-available"&gt;
    Congrats! Your browser supports Geolocation!
  &lt;/div&gt;
  &lt;div class="no-geolocation"&gt;
    Your browser doesn't support Geolocation :(
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></li></ol></div><a id="id34" class="indexterm"/><p>In case we want to implement a JavaScript fallback, we would need to create a conditional statement using Modernizr. In our case, since Modernizr is a JavaScript object with methods, we can use <code class="literal">Modernizr.geolocation</code> to test whether geolocation is supported. The conditional statement should be as follows:</p><div class="informalexample"><pre class="programlisting">if (Modernizr.geolocation){
  alert("Congrats! Your browser supports Geolocation!");
}else{
  alert("Your browser doesn't support Geolocation :(");
}</pre></div><p>The complete code should look as follows:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;script src="js/modernizr.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;style&gt;
  header{
    color:#ff0000;
    font-size:40px;
  }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;Hello HTML5!&lt;/header&gt;
  &lt;script type="text/javascript"&gt;
  if (Modernizr.geolocation){
       alert("Congrats! Your browser supports Geolocation!"); 
     }
else{
       alert("Your browser doesn't support Geolocation :("); 
     }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><a id="id35" class="indexterm"/><p>Modernizr—in spite of its name—does not actually add missing functionalities to browsers save for the HTML5 tags styling support. Where you need to create fallbacks for functionalities in old browsers, Modernizr is a good choice. However, if simple styling with HTML5 and CSS3 is needed, HTML5 Shiv should suffice.</p></div><div class="section" title="Explorer Canvas"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>Explorer Canvas</h2></div></div></div><a id="id36" class="indexterm"/><p>Internet Explorer in versions prior to Version 9 does not support HTML5 Canvas, which allows 2D command-based drawing, but <span class="strong"><strong>Explorer Canvas</strong></span> enables this feature.</p><p>To use Explorer Canvas you can perform the following stes: <a id="id37" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to <a class="ulink" href="http://code.google.com/p/explorercanvas/downloads/list">http://code.google.com/p/explorercanvas/downloads/list</a>.</li><li class="listitem">Download the last version of Explorer Canvas.</li><li class="listitem">Copy <code class="literal">excanvas.compiled.js</code> in your JavaScript folder.</li><li class="listitem">Import the library in <code class="literal">&lt;head&gt;</code>, verifying the version of Internet Explorer:<div class="informalexample"><pre class="programlisting">&lt;!--[if lt IE 9]&gt;
    &lt;script type="text/javascript" src="js/excanvas.compiled.js"&gt;&lt;/script&gt;
  &lt;![endif]--&gt;</pre></div></li><li class="listitem">Now you can use the HTML5 Canvas API in older versions of Internet Explorer.</li></ol></div><a id="id38" class="indexterm"/><p>As it is a JavaScript library, meaning that it needs to be interpreted and executed at page load, its performance will be considerably lower than modern browsers. It also does not support several features and is quite buggy.</p></div><div class="section" title="HTML5 Boilerplate"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec24"/>HTML5 Boilerplate</h2></div></div></div><p>A very simple and straightforward way of setting up a project including incorporation of Modernizr and basic configuration is to use a starter kit such as <a id="id39" class="indexterm"/>
<span class="strong"><strong>HTML5 Boilerplate</strong></span>. HTML5 Boilerplate is a collection of HTML, CSS, and JavaScript files including Modernizr, jQuery, and CSS Reset2 (a set of CSS rules that override default and inconsistent renderings in different browsers in a way that creates a common baseline). Even when compatibility is the furthest topic of interest, this template can be used as an out-of-the-box way of initializing the CSS and putting the necessary JavaScript libraries in place to make compatibility a non-issue.</p><a id="id40" class="indexterm"/><p>You can download HTML5 Boilerplate from <a class="ulink" href="http://html5boilerplate.com/">http://html5boilerplate.com/</a> by selecting one of the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Boilerplate</strong></span>: The file collection not minimized and commented</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Boilerplate Stripped</strong></span>: The file collection minimized and not commented</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Customize Boilerplate</strong></span>: You can configure which files will go in your base project</li></ul></div><p>While the last case may be enough, sometimes it is necessary to include more customizations. Fortunately, there is a tool called <a id="id41" class="indexterm"/>
<span class="strong"><strong>Initializr</strong></span>, which removes unneeded files from our HMTL5 Boilerplate project. Additionally, you can use the templates provided by Initializr to modify the visual presentation according to the window size / screen resolution.</p><a id="id42" class="indexterm"/><p>To download Initializr, go to <a class="ulink" href="http://www.initializr.com/">http://www.initializr.com/</a> and select:<a id="id43" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Classic H5BP</strong></span>: This is the basic project</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Responsive</strong></span>: This is the responsive project based on screen resolution</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Bootstrap</strong></span>: This is the responsive project using Twitter's Bootstrap template (<a class="ulink" href="http://twitter.github.com/bootstrap/">http://twitter.github.com/bootstrap/</a>) using Less (<a class="ulink" href="http://verekia.com/less-css/">http://verekia.com/less-css/</a>), a dynamic stylesheet language that generates CSS on compilation using a JavaScript compiler</li></ul></div><p>After this you can choose or modify the files included.</p></div></div>
<div class="section" title="Before starting app development"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec20"/>Before starting app development</h1></div></div></div><p>As we build the MovieNow app in the following chapters, we are going to start from scratch, so we can see the process step by step. But remember that you could use templates to build your enterprise applications. The only caveat is that you always need to know what is inside the project; sometimes an unknown JavaScript or CSS file may cause serious performance issues.</p><p>While all this can sound like a nightmare, you only need to follow a simple strategy to embark on the magical quest for compatibility:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Follow the W3C standards for HTML, CSS, and JavaScript (<a class="ulink" href="http://www.w3schools.com">http://www.w3schools.com</a>).</li><li class="listitem">Choose JavaScript libraries or CSS to give backward compatibility for old browsers. In general, a compatibility solution that does <span class="emphasis"><em>not</em></span> include JavaScript is better than the one that does, but sometimes it is not possible with only CSS.</li><li class="listitem">Define a course of action for allowing accessibility for any user agent. There are a couple of strategies of note: <a id="id44" class="indexterm"/><span class="strong"><strong>graceful degradation</strong></span> or <a id="id45" class="indexterm"/><span class="strong"><strong>progressive enhancement</strong></span>. Graceful degradation implies that you begin developing for modern browsers, and then you add handlers for less capable devices. Progressive enhancement, on the other hand, implies starting with basic capabilities and building to the lowest common denominator for browser features, and then adding enhancements for more capable browsers.</li><li class="listitem">It is a good practice to support different<a id="id46" class="indexterm"/> <span class="strong"><strong>user experiences</strong></span> (<span class="strong"><strong>UX</strong></span>) for mobile devices for a series of reasons: the keyboard can be cumbersome in mobile devices such as mobile phones and even more so on on touchscreen devices; viewing the same layout on smaller resolutions can force users to constantly zoom in and out or make it difficult to click some buttons or links, and sometimes it is not technically possible to have certain functionalities. For example, autoplay for video or volume control using JavaScript in iOS Devices (iPhone, iPad, and so on) is not possible.</li><li class="listitem">Make a test plan for multiple browsers. There are services that allow you to test your enterprise application across multiple browsers and platforms. Of course, the services that employ snapshots may be sub-optimal since they do not test JavaScript execution. It is always good to have all of the browsers that your system will support installed on a test machine, and there are tools that allow you to change the browser version on the fly.</li><li class="listitem">Use the official documentation for web browsers as well as the community forums to keep abreast of what browser makers are doing.</li></ol></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec21"/>Summary</h1></div></div></div><p>In this chapter, we learned about the differences between the web browsers and the inconsistent ways in which they behave. We talked about the importance of compatibility and strategies you can use to level the playing field. In general, web developers must try to cover most of the cases to ensure compatibility, but at the same time it is important to understand the project and the target audience, and adapt our solutions to them first and then to the global scene.</p><p>As a final thought, we need to put ourselves in the user's shoes. The last thing a user wants to see is a message asking to download another browser to use an application. Remember that our goal as developers is not only to bring a collection of requirements to life, but also to create engaging user experiences that define the application as a medium that facilitates an end, rather than an obstacle that separates the user from a final goal.</p><p>Before you start building a house, you need to understand what tools you need and how to use them. In the next chapter, we will look at setting up your machine and the available tools that we can use to build our HTML5 enterprise application, including a comprehensive evaluation of the business decisions involved in selecting these tools.</p></div></body></html>