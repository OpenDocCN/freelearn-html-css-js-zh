<html><head></head><body>
<div><div><h1 id="_idParaDest-197"><em class="italic"><a id="_idTextAnchor199"/>Chapter 9</em>: Improving the Website with Interactive Features Using JavaScript</h1>
<p>In this chapter, we will learn how to improve our website with different interactive features. These features will be created using JavaScript and, in most cases, the JavaScript-based components of Bootstrap 5. In the previous chapter, we customized the <em class="italic">look</em> of our website – in this chapter, we will customize the <em class="italic">feel</em> of our website.</p>
<p>Bootstrap 5 has several interactive components that use JavaScript. Some of them are initialized automatically via the use of data attributes, for example, the <strong class="bold">accordion</strong>, <strong class="bold">carousel</strong>, <strong class="bold">dropdown</strong>, <strong class="bold">offcanvas</strong>, <strong class="bold">navbar</strong>, <strong class="bold">modal</strong>, and <strong class="bold">tab</strong> components, which we are currently using on the website. Other components require custom initialization using JavaScript, which is the case for popover, toast, and tooltip components. Form validation requires custom JavaScript to be executed at the correct time, and the spinner component should only be visible when the browser is in a loading state. As you can tell, JavaScript is used in different ways and for different purposes with Bootstrap 5. </p>
<p>In this chapter, we will see how we can use JavaScript to improve our website with interactive features for the following scenarios:</p>
<ul>
<li>Adding a tooltip component to a form label</li>
<li>Adding toast components to product-related actions</li>
<li>Changing the product quantity in the Shopping Cart form</li>
<li>Adding form validation</li>
<li>Adding form submission loading indicators</li>
<li>Adding form success messages</li>
<li>Creating programmatic tabs navigation</li>
<li>Updating the progress status in the checkout flow</li>
<li>Creating a lightbox for the product gallery</li>
</ul>
<p>All of these scenarios will influence the <em class="italic">feel</em> and <em class="italic">behavior</em> of various parts or components of our website, and that’s why they’re included in this chapter.</p>
<h1 id="_idParaDest-198"><a id="_idTextAnchor200"/>Technical requirements</h1>
<ul>
<li>To preview the examples, you will need a code editor and a browser. The source code for all code examples can be found here: <a href="https://github.com/PacktPublishing/The-Missing-Bootstrap-5-Guide">https://github.com/PacktPublishing/The-Missing-Bootstrap-5-Guide</a></li>
<li>To compile Sass to CSS, you will need one of the following: <ul><li><strong class="bold">Node.js</strong>, if you prefer a <strong class="bold">command-line interface</strong> (<strong class="bold">CLI</strong>) using Terminal (Mac) or Command Prompt (Windows) </li>
<li><strong class="bold">Scout-App</strong>, if you prefer a <strong class="bold">graphical user interface</strong> (<strong class="bold">GUI</strong>) </li>
<li><strong class="bold">Visual Studio Code</strong>, if you prefer to use an extension from the Visual Studio Code Marketplace</li>
</ul></li>
</ul>
<p>All these approaches are explained in <a href="B17143_02_epub.xhtml#_idTextAnchor033"><em class="italic">Chapter 2</em></a>, <em class="italic">Using and Compiling Sass</em>.</p>
<h1 id="_idParaDest-199"><a id="_idTextAnchor201"/>About the code examples</h1>
<p>Before we take a closer look at each example in the coming sections, here are a few notes about the <a id="_idIndexMarker581"/>code examples that are good to know in advance. I encourage you to look at the various files mentioned for each code example in this chapter in your own editor so that you can see the changes yourself. Also, I encourage you to view the project in the browser so that you can experience the improvements being made. This chapter is about interactive features, so to see the real difference it makes, it has to be viewed in a browser.</p>
<h2 id="_idParaDest-200"><a id="_idTextAnchor202"/>Simple and clean JavaScript code</h2>
<p>The custom <a id="_idIndexMarker582"/>JavaScript code for the website is written <a id="_idIndexMarker583"/>with simple and clean JavaScript. The focus has been to make it easy to understand, and not necessarily best practice. All code is placed in the same <code>script.js</code> file after the <code>bootstrap.bundle.min.js</code> Bootstrap 5 JavaScript file.</p>
<h2 id="_idParaDest-201"><a id="_idTextAnchor203"/>Page IDs</h2>
<p>Page IDs <a id="_idIndexMarker584"/>have been added to the <code>&lt;body&gt;</code> tag on the <code>script.js</code> is generally grouped according to which page or pages the code should be executed on, and it also appears in roughly the same order as presented in this chapter.</p>
<p>The updated code on the <code>&lt;body&gt;</code> tag looks like this:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml line 13</p>
<pre class="source-code">&lt;body <strong class="bold">id="homePage"</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/shop.xhtml line 13</p>
<pre class="source-code">&lt;body <strong class="bold">id="shopPage"</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/product.xhtml line 13</p>
<pre class="source-code">&lt;body <strong class="bold">id="productPage"</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/contact.xhtml line 13</p>
<pre class="source-code">&lt;body <strong class="bold">id="contactPage"</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/wishlist.xhtml line 13</p>
<pre class="source-code">&lt;body <strong class="bold">id="wishlistPage"</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml line 13</p>
<pre class="source-code">&lt;body <strong class="bold">id="cartPage"</strong>&gt;</pre>
<p>And here’s an illustration of what the conditional <code>if</code> statements using these IDs look like:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js</p>
<pre class="source-code">// Variables for individual pages</pre>
<pre class="source-code">const homePage = document.querySelector('#homePage'); // index.xhtml</pre>
<pre class="source-code">// Used like this for one page only</pre>
<pre class="source-code">if (homePage) {</pre>
<pre class="source-code">  [code added here]</pre>
<pre class="source-code">}</pre>
<pre class="source-code">// Used like this for multiple pages</pre>
<pre class="source-code">if (homePage || shopPage || productPage) {</pre>
<pre class="source-code">  [code added here]</pre>
<pre class="source-code">}</pre>
<p>The conditional <code>if</code> statements for the page variables will not be shown in the code examples, since I want <a id="_idIndexMarker586"/>those to be as simple as possible. In fact, the <code>if</code> statements in <a id="_idIndexMarker587"/>the source code can be ignored. They are not essential for understanding how to implement the various interactive features but are “just” used to handle when the different parts of the code are executed to not “break” the code.</p>
<h2 id="_idParaDest-202"><a id="_idTextAnchor204"/>Partial and complete code</h2>
<p>In this chapter, some <a id="_idIndexMarker588"/>of the code examples <a id="_idIndexMarker589"/>won’t look like the complete and finished source code. This is because, for some <a id="_idIndexMarker590"/>of the interactive features, as a starting point, I will show you the minimum required code. Then, later on, I will add new code to the existing code examples when we add additional features. This approach has been chosen to guide you, step by step, on how the code works.</p>
<p>When a <a id="_idIndexMarker591"/>code example is updated with new code <a id="_idIndexMarker592"/>for another feature, the new code will be highlighted. Here’s an <a id="_idIndexMarker593"/>illustration of what that means:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">script.js</p>
<pre class="source-code">this is the minimum required code</pre>
<pre class="source-code">  for an interactive feature</pre>
<pre class="source-code"><strong class="bold">  this is new code</strong></pre>
<pre class="source-code"><strong class="bold">    for another feature that we add to</strong></pre>
<pre class="source-code"><strong class="bold">  the existing code example</strong></pre>
<pre class="source-code">that we can think of as partial code</pre>
<h2 id="_idParaDest-203"><a id="_idTextAnchor205"/>Original and updated code</h2>
<p>Some of the <a id="_idIndexMarker594"/>code examples show both the original code (from <a href="B17143_08_epub.xhtml#_idTextAnchor179"><em class="italic">Chapter 8</em></a><em class="italic">,</em> <em class="italic">Customizing the Website Using Bootstrap 5 Variables, Utility API and Sass</em>) and the <a id="_idIndexMarker595"/>new updated code. The code will be presented in the same code block above each <a id="_idIndexMarker596"/>other and with code highlighting for the updated code, as follows:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">script.js</p>
<pre class="source-code">// Original code</pre>
<pre class="source-code">&lt;label for="securityCode"&gt;Lorem ipsum&lt;/label&gt;</pre>
<pre class="source-code">// Updated code</pre>
<pre class="source-code">&lt;label <strong class="bold">class="form-label d-flex justify-content-between"</strong> for="securityCode"&gt;Lorem ipsum&lt;/label&gt;</pre>
<h2 id="_idParaDest-204"><a id="_idTextAnchor206"/>Line numbers</h2>
<p>To make <a id="_idIndexMarker597"/>the navigation of the source code easier, line numbers have <a id="_idIndexMarker598"/>been added to most of the code examples in addition to the file path. This is especially true for the JavaScript and Sass code examples but also some of the HTML code examples.</p>
<h1 id="_idParaDest-205"><a id="_idTextAnchor207"/>Adding a tooltip component to a form label</h1>
<p>Now we will add a tooltip component to a form label in the checkout flow on the <strong class="bold">Cart</strong> page to provide <a id="_idIndexMarker599"/>the user with some helpful <a id="_idIndexMarker600"/>contextual information triggered on mouse hover (or tap on a touch device). We will add this tooltip component to an icon placed next to the label for the input of the security code for a credit card found in the form in the <strong class="bold">Payment Options</strong> tab pane.</p>
<p>The first thing we need to do is to add the proper markup. After the label text, we will add a <code>.bi-question-circle</code> icon colored with <code>.text-info</code>, and then put the required attributes for our tooltip component into that icon. Our markup will be updated in the following way:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml</p>
<pre class="source-code">// Original code</pre>
<pre class="source-code">&lt;label class="form-label d-flex justify-content-between" for="securityCode"&gt;Security code:&lt;/label&gt;</pre>
<pre class="source-code">// Updated code</pre>
<pre class="source-code">&lt;label class="form-label d-flex justify-content-between" for="securityCode"&gt;Security code:<strong class="bold"> &lt;i class="bi-question-circle text-info" data-bs-toggle="tooltip" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis convallis velit quis sapien sollicitudin ultrices."&gt;&lt;/i&gt;</strong>&lt;/label&gt;</pre>
<p>Tooltip components are not initialized automatically through the use of <code>data-bs-toggle=”tooltip”</code>, which we might expect. Instead, for performance reasons, tooltip components must be initialized by ourselves. Therefore, we will add the following JavaScript, which will initialize all the tooltip components on the page using the <code>Tooltip()</code> constructor:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 3-7</p>
<pre class="source-code">// Initialize all tooltips</pre>
<pre class="source-code">const tooltipTriggerElements = document.querySelectorAll('[data-bs-toggle="tooltip"]');</pre>
<pre class="source-code">for (let i = 0; i &lt; tooltipTriggerElements.length; i++) {</pre>
<pre class="source-code">  new bootstrap.Tooltip(tooltipTriggerElements[i])</pre>
<pre class="source-code">}</pre>
<p>With <a id="_idIndexMarker601"/>these changes, you will be able to see the <a id="_idIndexMarker602"/>new icon and tooltip component in action in the browser. Currently, we only have one tooltip on our website, so we could have chosen another implementation, but I like this way since it will accommodate any extra tooltip that we might choose to add later.</p>
<h1 id="_idParaDest-206"><a id="_idTextAnchor208"/>Adding toast components to product-related actions</h1>
<p>Now we <a id="_idIndexMarker603"/>will add toast components <a id="_idIndexMarker604"/>that are triggered by different product-related actions, for example, when clicking on the action buttons in the footer of the product cards on the <strong class="bold">Home</strong>, <strong class="bold">Shop</strong>, <strong class="bold">Cart</strong>, <strong class="bold">Product</strong>, and <strong class="bold">Wishlist</strong> pages.</p>
<p>Before creating the individual toast components, we will add a toast container to each of the previously mentioned pages, located just after the opening <code>&lt;body&gt;</code> tag and before the <code>&lt;header&gt;</code> tag. We will use the following code:</p>
<pre class="source-code">&lt;div class="toast-container position-fixed end-0 mt-3 me-3"&gt;&lt;/div&gt;</pre>
<p>Now, we have a problem the toast container won’t be properly positioned along the z axis of our layout. Other components on the page will be placed on top, which we don’t want. This is the case for the navbar, button group, and dropdown components. We will fix this issue by using one of the following Bootstrap 5 <code>z-index</code> variables in our custom style sheet:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">bootstrap/scss/_variables.scss</p>
<pre class="source-code">1068 $zindex-dropdown:                   1000 !default;</pre>
<pre class="source-code">1069 $zindex-sticky:                     1020 !default;</pre>
<pre class="source-code">1070 $zindex-fixed:                      1030 !default;</pre>
<pre class="source-code">1071 $zindex-offcanvas-backdrop:         1040 !default;</pre>
<pre class="source-code">1072 $zindex-offcanvas:                  1045 !default;</pre>
<pre class="source-code">1073 $zindex-modal-backdrop:             1050 !default;</pre>
<pre class="source-code">1074 $zindex-modal:                      1055 !default;</pre>
<pre class="source-code">1075 $zindex-popover:                    1070 !default;</pre>
<pre class="source-code">1076 $zindex-tooltip:                    1080 !default;</pre>
<p>From the preceding list, we can see that the <code>$zindex-fixed</code> variable will be a good fit. That’s <a id="_idIndexMarker605"/>because our toast container is already using the <code>.position-fixed</code> class, and we want it to appear on top of <a id="_idIndexMarker606"/>the currency dropdown in our header and below the offcanvas backdrop. Then, we can add the following Sass code to our custom style sheet:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/scss/_custom-styles.scss line 12-15</p>
<pre class="source-code">// Add z-index to get the right position along the z-axis</pre>
<pre class="source-code">.toast-container {</pre>
<pre class="source-code">  z-index: $zindex-fixed;</pre>
<pre class="source-code">}</pre>
<p>We’ll use the toast component in the following scenarios:</p>
<ul>
<li>Adding a product to the cart</li>
<li>Adding a product to the wishlist</li>
<li>Adding all products to the cart</li>
<li>Removing a product from the wishlist</li>
<li>Removing <a id="_idIndexMarker607"/>a product from the cart</li>
</ul>
<p>We will <a id="_idIndexMarker608"/>now go through all of them one by one.</p>
<h2 id="_idParaDest-207"><a id="_idTextAnchor209"/>Adding a product to the cart</h2>
<p>We want <a id="_idIndexMarker609"/>to show a toast component when the user clicks on the <strong class="bold">Add to cart</strong> button, which is located in the footer of the product cards on the <strong class="bold">Home</strong>, <strong class="bold">Shop</strong>, <strong class="bold">Product</strong>, and <strong class="bold">Wishlist</strong> pages.</p>
<p>First, we will add the following markup to our toast container on all the aforementioned pages:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml</p>
<pre class="source-code">&lt;div class="toast js-cartToast" role="status" aria-live="polite" aria-atomic="true"&gt;</pre>
<pre class="source-code">  &lt;div class="toast-header fw-bold"&gt;Added to cart&lt;/div&gt;</pre>
<pre class="source-code">  &lt;div class="toast-body"&gt;Product Name was added to the </pre>
<pre class="source-code">    cart.&lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Notice in the preceding code that we have added the <code>.js-cartToast</code> class to the Bootstrap 5 code for a default toast component. We will use that as a hook for the JavaScript that we use to initialize the toast component.</p>
<p>Before we do that, we will also need to update our <code>.js-addToCart</code> class as a hook for our JavaScript, too:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml</p>
<pre class="source-code">&lt;button type="button" class="btn btn-primary me-2<strong class="bold"> js-addToCart</strong>"&gt;</pre>
<pre class="source-code">  &lt;i class="bi-cart-plus"&gt;&lt;/i&gt;&lt;span class=</pre>
<pre class="source-code">    "visually-hidden"&gt;Add to cart&lt;/span&gt;</pre>
<pre class="source-code">&lt;/button&gt;</pre>
<p>Now we can <a id="_idIndexMarker610"/>show the toast component using the <code>Toast()</code> constructor and the <code>show()</code> method when any of the <strong class="bold">Add to cart</strong> buttons are clicked on with the following JavaScript code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 20-27</p>
<pre class="source-code">// Handle button click and show toast when adding product </pre>
<pre class="source-code">// to cart</pre>
<pre class="source-code">const addToCartButtons = document.querySelectorAll('.js-addToCart');</pre>
<pre class="source-code">const addToCartToast = document.querySelector('.js-cartToast');</pre>
<pre class="source-code">for (let i = 0; i &lt; addToCartButtons.length; i++) {</pre>
<pre class="source-code">  addToCartButtons[i].addEventListener('click', function() {</pre>
<pre class="source-code">    new bootstrap.Toast(addToCartToast).show();</pre>
<pre class="source-code">  })</pre>
<pre class="source-code">}</pre>
<p class="callout-heading">Using JavaScript Methods with Interactive Bootstrap 5 Components</p>
<p class="callout">The <code>show()</code> method will be used many times for the interactive features in this chapter. We will learn more about how to use JavaScript methods with the interactive Bootstrap 5 components in <a href="B17143_11_epub.xhtml#_idTextAnchor259"><em class="italic">Chapter 11</em></a>, <em class="italic">Using Bootstrap 5 with Advanced JavaScript Features</em>.</p>
<h2 id="_idParaDest-208"><a id="_idTextAnchor210"/>Adding a product to the wishlist</h2>
<p>We want to show a toast component when the user clicks on a button in the <strong class="bold">Add to wishlist</strong> dropdown <a id="_idIndexMarker611"/>located in the footer of the product cards on the <strong class="bold">Home</strong>, <strong class="bold">Shop</strong>, and <strong class="bold">Product</strong> pages.</p>
<p>First, we will add the following markup to our toast container on all of the aforementioned pages:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml</p>
<pre class="source-code">&lt;div class="toast js-wishlistToast" role="status" aria-live="polite" aria-atomic="true"&gt;</pre>
<pre class="source-code">  &lt;div class="toast-header fw-bold"&gt;Added to wishlist&lt;/div&gt;</pre>
<pre class="source-code">  &lt;div class="toast-body"&gt;Product Name was added to the </pre>
<pre class="source-code">    wishlist.&lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Notice in the preceding code that we have added the <code>.js-wishlistToast</code> class to the Bootstrap 5 code for a default toast component. We will use that as a hook for the JavaScript that we use to initialize the toast component.</p>
<p>Before we do that, we will also need to update the buttons in our <code>.js-addToWishlist</code> class as a hook for our JavaScript, too:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml</p>
<pre class="source-code">&lt;div class="dropdown"&gt;</pre>
<pre class="source-code">  &lt;button type="button" class="btn btn-secondary" </pre>
<pre class="source-code">    id="addToWishlistDropdown1" data-bs-toggle="dropdown" </pre>
<pre class="source-code">    aria-expanded="false"&gt;&lt;i class="bi-heart"&gt;&lt;/i&gt;&lt;span </pre>
<pre class="source-code">    class="visually-hidden"&gt;Add to wishlist&lt;/span&gt;&lt;/button&gt;</pre>
<pre class="source-code">  &lt;div class="dropdown-menu" aria-</pre>
<pre class="source-code">    labelledby="addToWishlistDropdown1"&gt;</pre>
<pre class="source-code">    &lt;h6 class="dropdown-header"&gt;Select wishlist&lt;/h6&gt;</pre>
<pre class="source-code">    &lt;button type="button" class="dropdown-item<strong class="bold"> js-</strong></pre>
<pre class="source-code"><strong class="bold">      addToWishlist</strong>"&gt;Wishlist #1&lt;/button&gt;</pre>
<pre class="source-code">    &lt;button type="button" class="dropdown-item<strong class="bold"> js-</strong></pre>
<pre class="source-code"><strong class="bold">      addToWishlist</strong>"&gt;Wishlist #2&lt;/button&gt;</pre>
<pre class="source-code">    &lt;button type="button" class="dropdown-item<strong class="bold"> js-</strong></pre>
<pre class="source-code"><strong class="bold">      addToWishlist</strong>"&gt;Wishlist #3&lt;/button&gt;</pre>
<pre class="source-code">  &lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Now we <a id="_idIndexMarker612"/>can initialize the toast component when any of the buttons in any of the <strong class="bold">Add to wishlist</strong> dropdowns are clicked on using the following JavaScript code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 34-41</p>
<pre class="source-code">// Handle button click and show toast when adding product </pre>
<pre class="source-code">// to wishlist</pre>
<pre class="source-code">const addToWishlistButtons = document.querySelectorAll('.js-addToWishlist');</pre>
<pre class="source-code">const addToWishlistToast = document.querySelector('.js-wishlistToast');</pre>
<pre class="source-code">for (let i = 0; i &lt; addToWishlistButtons.length; i++) {</pre>
<pre class="source-code">  addToWishlistButtons[i].addEventListener('click', </pre>
<pre class="source-code">    function() {</pre>
<pre class="source-code">    new bootstrap.Toast(addToWishlistToast).show();</pre>
<pre class="source-code">  })</pre>
<pre class="source-code">}</pre>
<h2 id="_idParaDest-209"><a id="_idTextAnchor211"/>Adding all products to the cart</h2>
<p>We want <a id="_idIndexMarker613"/>to show a toast component when the user clicks on the <code>&lt;aside&gt;</code> element on the Wishlist page.</p>
<p>First, we will add the following markup to our toast container on that page:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/wishlist.xhtml</p>
<pre class="source-code">&lt;div class="toast js-addAllToast" role="status" aria-live="polite" aria-atomic="true"&gt;</pre>
<pre class="source-code">  &lt;div class="toast-header fw-bold"&gt;All added to cart&lt;/div&gt;</pre>
<pre class="source-code">  &lt;div class="toast-body"&gt;All products from wishlist were </pre>
<pre class="source-code">    added to the cart.&lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Notice in the preceding code that we have added the <code>.js-addAllToast</code> class to the Bootstrap 5 code for a default toast component. We will use that as a hook for the JavaScript that we use to initialize the toast component.</p>
<p>Before we do that, we will also need to update the <code>.js-addAllToCart</code> class as a hook for our JavaScript, too:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/wishlist.xhtml</p>
<pre class="source-code">&lt;button type="button" class="btn btn-primary mt-3<strong class="bold"> js-addAllToCart</strong>"&gt;Add all products to cart&lt;/button&gt;</pre>
<p>Now we can initialize the toast component when the <strong class="bold">Add all products to cart</strong> button is clicked on using the following JavaScript code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 48-53</p>
<pre class="source-code">// Handle button click and show toast when adding all </pre>
<pre class="source-code">// products to cart</pre>
<pre class="source-code">const addAllToCartButton = document.querySelector('.js-addAllToCart');</pre>
<pre class="source-code">const addAllToCartToast = document.querySelector('.js-addAllToast');</pre>
<pre class="source-code">addAllToCartButton.addEventListener('click', function() {</pre>
<pre class="source-code">  new bootstrap.Toast(addAllToCartToast).show();</pre>
<pre class="source-code">})</pre>
<h2 id="_idParaDest-210"><a id="_idTextAnchor212"/>Removing a product from the wishlist</h2>
<p>We want <a id="_idIndexMarker614"/>to show a toast component when the user clicks on the <strong class="bold">Remove from wishlist</strong> button located in the footer of the product cards on the <strong class="bold">Wishlist</strong> page. At the same time, we also want to remove the product card from the page and the related markup from the DOM.</p>
<p>First, we will add the following markup to our toast container on that page:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/wishlist.xhtml</p>
<pre class="source-code">&lt;div class="toast js-wishlistToast" role="status" aria-live="polite" aria-atomic="true"&gt;</pre>
<pre class="source-code">  &lt;div class="toast-header fw-bold"&gt;Removed from </pre>
<pre class="source-code">    wishlist&lt;/div&gt;</pre>
<pre class="source-code">  &lt;div class="toast-body"&gt;Product Name was removed from the </pre>
<pre class="source-code">    wishlist.&lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Notice in the preceding code that we have added the <code>.js-wishlistToast</code> class to the Bootstrap 5 code for a default toast component. We will use that as a hook for the JavaScript that we use to initialize the toast component.</p>
<p>Before we do that, we will also need to update our <code>.js-removeFromWishlist</code> class as a hook for our JavaScript, too:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/wishlist.xhtml</p>
<pre class="source-code">&lt;button type="button" class="btn btn-danger<strong class="bold"> js-removeFromWishlist</strong>"&gt;</pre>
<pre class="source-code">  &lt;i class="bi-x-circle"&gt;&lt;/i&gt;&lt;span class="visually-</pre>
<pre class="source-code">    hidden"&gt;Remove from wishlist&lt;/span&gt;</pre>
<pre class="source-code">&lt;/button&gt;</pre>
<p>Now we <a id="_idIndexMarker615"/>can initialize the toast component when any of the <strong class="bold">Remove from wishlist</strong> buttons are clicked on, plus remove the element from the DOM using the following JavaScript code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 55-63</p>
<pre class="source-code">// Handle button click and show toast + remove element from </pre>
<pre class="source-code">// DOM when removing product from wishlist</pre>
<pre class="source-code">const removeFromWishlistButtons = document.querySelectorAll('.js-removeFromWishlist');</pre>
<pre class="source-code">const removeFromWishlistToast = document.querySelector('.js-wishlistToast');</pre>
<pre class="source-code">for (let i = 0; i &lt; removeFromWishlistButtons.length; i++) {</pre>
<pre class="source-code">  removeFromWishlistButtons[i].addEventListener('click', </pre>
<pre class="source-code">    function() {</pre>
<pre class="source-code">    new bootstrap.Toast(removeFromWishlistToast).show();</pre>
<pre class="source-code">    removeFromWishlistButtons[i].closest(</pre>
<pre class="source-code">      '.card').parentElement.remove();</pre>
<pre class="source-code">  })</pre>
<pre class="source-code">}</pre>
<h2 id="_idParaDest-211"><a id="_idTextAnchor213"/>Removing a product from the cart</h2>
<p>Here, we want to show a toast component when the user clicks on the remove button in the products <a id="_idIndexMarker616"/>overview in the <strong class="bold">Shopping Cart</strong> tab pane of the <strong class="bold">Cart</strong> page. At the same time, we also want to remove a product from the page and the related markup from the DOM.</p>
<p>First, we will add the following markup to our toast container on that page:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml</p>
<pre class="source-code">&lt;div class="toast js-cartToast" role="status" aria-live="polite" aria-atomic="true"&gt;</pre>
<pre class="source-code">  &lt;div class="toast-header fw-bold"&gt;Removed from cart&lt;/div&gt;</pre>
<pre class="source-code">  &lt;div class="toast-body"&gt;Product Name was removed from the </pre>
<pre class="source-code">    cart.&lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Notice in the preceding code that we have added the <code>.js-cartToast</code> class to the Bootstrap 5 code for a default toast component. We will use that as a hook for the JavaScript that we use to initialize the toast component.</p>
<p>Before we do that, we will also need to update our remove buttons by adding the <code>.js-removeFromCart</code> class as a hook for our JavaScript, too:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml</p>
<pre class="source-code">&lt;button type="button" class="btn btn-danger<strong class="bold"> js-removeFromCart</strong>"&gt;&lt;i class="bi-x-circle"&gt;&lt;/i&gt;&lt;/button&gt;</pre>
<p>Now we can initialize the toast component when any of the remove buttons are clicked on, plus remove the element from the DOM using the following JavaScript code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 71-78</p>
<pre class="source-code">// Handle button click and show toast + remove element from DOM when removing product from cart</pre>
<pre class="source-code">const removeFromCartButtons = document.querySelectorAll('.js-removeFromCart');</pre>
<pre class="source-code">const removeFromCartToast = document.querySelector('.js-cartToast');</pre>
<pre class="source-code">for (let i = 0; i &lt; removeFromCartButtons.length; i++) {</pre>
<pre class="source-code">  removeFromCartButtons[i].addEventListener('click', </pre>
<pre class="source-code">    function() {</pre>
<pre class="source-code">    new bootstrap.Toast(removeFromCartToast).show();</pre>
<pre class="source-code">    removeFromCartButtons[i].parentElement.</pre>
<pre class="source-code">      parentElement.remove();</pre>
<pre class="source-code">  })</pre>
<pre class="source-code">}</pre>
<p>Now we <a id="_idIndexMarker617"/>are finished adding toast components to the different product-related actions. Next, we will move on with a feature to change the quantity of the individual products in the shopping cart.</p>
<h1 id="_idParaDest-212"><a id="_idTextAnchor214"/>Changing the product quantity in the shopping cart</h1>
<p>In the products <a id="_idIndexMarker618"/>overview in the shopping cart tab of the <code>.js-productQuantity</code> class to the input group component for each product and use it as a hook to our JavaScript. The markup for our input group component will be updated in the following way:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml</p>
<pre class="source-code">&lt;div class="input-group me-3<strong class="bold"> js-productQuantity</strong>"&gt;</pre>
<pre class="source-code">  &lt;button type="button" class="btn btn-secondary"&gt;&lt;i </pre>
<pre class="source-code">    class="bi-dash-circle"&gt;&lt;/i&gt;&lt;/button&gt;</pre>
<pre class="source-code">  &lt;input type="text" class="form-control text-center" </pre>
<pre class="source-code">    value="1" aria-label="Product quantity"&gt;</pre>
<pre class="source-code">  &lt;button type="button" class="btn btn-secondary"&gt;&lt;i </pre>
<pre class="source-code">    class="bi-plus-circle"&gt;&lt;/i&gt;&lt;/button&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Now we <a id="_idIndexMarker619"/>can use the following JavaScript to either decrease the quantity (if it’s larger than <code>1</code>, so it never goes to <code>0</code> or below) or increase it:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 81-94</p>
<pre class="source-code">// Handle button click on input group buttons and adjust </pre>
<pre class="source-code">// value of input</pre>
<pre class="source-code">const productQuantityInputGroup = document.querySelectorAll('.js-productQuantity');</pre>
<pre class="source-code">for (let i = 0; i &lt; productQuantityInputGroup.length; i++) {</pre>
<pre class="source-code">  let productQuantityInput = </pre>
<pre class="source-code">    productQuantityInputGroup[i].querySelector(</pre>
<pre class="source-code">    '.form-control');</pre>
<pre class="source-code">  const productQuantitySubtractButton = </pre>
<pre class="source-code">    productQuantityInputGroup[i].querySelectorAll(</pre>
<pre class="source-code">    '.btn')[0];</pre>
<pre class="source-code">  const productQuantityAddButton = </pre>
<pre class="source-code">    productQuantityInputGroup[i].querySelectorAll(</pre>
<pre class="source-code">    '.btn')[1];</pre>
<pre class="source-code">  productQuantitySubtractButton.addEventListener('click', </pre>
<pre class="source-code">    function() {</pre>
<pre class="source-code">    if (productQuantityInput.value &gt; 1) {</pre>
<pre class="source-code">      productQuantityInput.value--;</pre>
<pre class="source-code">    }</pre>
<pre class="source-code">  })</pre>
<pre class="source-code">  productQuantityAddButton.addEventListener('click', </pre>
<pre class="source-code">    function() {</pre>
<pre class="source-code">    productQuantityInput.value++;</pre>
<pre class="source-code">  })</pre>
<pre class="source-code">}</pre>
<p>After adding <a id="_idIndexMarker620"/>this feature, we will continue with adding form validation to all our forms.</p>
<h1 id="_idParaDest-213"><a id="_idTextAnchor215"/>Adding form validation</h1>
<p>Bootstrap 5 has form validation as one of its features, so we want to take advantage of that for some <a id="_idIndexMarker621"/>of our forms: the newsletter form on the <strong class="bold">Home</strong> page, the contact form on the <strong class="bold">Contact</strong> page, and the two forms in the <strong class="bold">Shipping Details</strong> and <strong class="bold">Payment Options</strong> tabs on the <strong class="bold">Cart</strong> page.</p>
<p>The first thing we need to do is to add an <code>id</code> attribute to all of our form elements, so we can use that to target them from our JavaScript code. Additionally, we need to add the <code>novalidate</code> attribute to the form elements, which is used to disable the browser default feedback tooltips, while still providing access to form validation through JavaScript. So, we need to make the following updates to our markup:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml line 306</p>
<pre class="source-code">&lt;form class="text-white"<strong class="bold"> id="newsletterForm" novalidate</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/contact.xhtml line 185</p>
<pre class="source-code">&lt;form<strong class="bold"> id="contactForm" novalidate</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml line 172</p>
<pre class="source-code">&lt;form<strong class="bold"> id="shippingForm" novalidate</strong>&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml line 336</p>
<pre class="source-code">&lt;form<strong class="bold"> id="paymentForm" novalidate</strong>&gt;</pre>
<p>Now we need to add feedback messages for both the valid and invalid states. This will be added right after each form control that has the required attribute and where we want a feedback message. The only place we don’t want such a feedback message is for the checkbox in the newsletter form. That’s because the styles for the valid and invalid states are enough for the user to understand this kind of form control.</p>
<p>Here’s how <a id="_idIndexMarker622"/>the markup for the first form field of the newsletter form on the Home page should be updated to accommodate feedback messages:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml</p>
<pre class="source-code">&lt;div class="mb-3"&gt;</pre>
<pre class="source-code">  &lt;label for="firstName" class="visually-hidden"&gt;First </pre>
<pre class="source-code">    name:&lt;/label&gt;</pre>
<pre class="source-code">  &lt;input type="text" class="form-control" </pre>
<pre class="source-code">    placeholder="Firstname" id="firstName" required&gt;</pre>
<pre class="source-code"><strong class="bold">  &lt;p class="valid-feedback"&gt;Valid feedback text&lt;/p&gt;</strong></pre>
<pre class="source-code"><strong class="bold">  &lt;p class="invalid-feedback"&gt;Invalid feedback text&lt;/p&gt;</strong></pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>After these feedback messages have been added to all the form fields where we want them to be in all of the forms mentioned earlier, we can now implement the form validation in JavaScript.</p>
<p>First, we will store the form in a variable and listen for the <code>submit</code> event of the form, which is triggered when clicking on the submit button. If the form is invalid, we will prevent the form from submitting, and outside this condition, the <code>.was-validated</code> class is added to the form to show the correct styles and feedback messages for the valid and invalid states. </p>
<p>Here’s the JavaScript for the form validation of the newsletter form:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 104-123</p>
<pre class="source-code">// Newsletter form</pre>
<pre class="source-code">const newsletterForm = document.querySelector('#newsletterForm');</pre>
<pre class="source-code">newsletterForm.addEventListener('submit', function (event) {</pre>
<pre class="source-code">  if (!newsletterForm.checkValidity()) {</pre>
<pre class="source-code">    event.preventDefault();</pre>
<pre class="source-code">    event.stopPropagation();</pre>
<pre class="source-code">  }</pre>
<pre class="source-code">  newsletterForm.classList.add('was-validated');</pre>
<pre class="source-code">}, false)</pre>
<p>After trying <a id="_idIndexMarker623"/>to submit an invalid form, the validation will be run again whenever the user updates any of the form fields in the form. It’s only the first validation that isn’t run until the user tries to submit the form.</p>
<h1 id="_idParaDest-214"><a id="_idTextAnchor216"/>Adding form submission loading indicators</h1>
<p>We want to add a loading indicator for the form submission of the newsletter form, contact <a id="_idIndexMarker624"/>form, and payment form, so the <a id="_idIndexMarker625"/>user can see that the browser is waiting for a response from the server. For our website, we won’t submit any forms to a server or wait for any response, so we will emulate this behavior.</p>
<p>Our loading indicator will simply be the spinner component of Bootstrap 5 (to be precise, the border spinner variation) replacing the text of the submit button. </p>
<p>The first thing we need to do is to add an <code>id</code> attribute to all of the submit buttons, where we want a loading indicator to be. Then, we can use those <code>id</code> attributes later to target the submit buttons from our JavaScript code.</p>
<p>This is what the updated markup for our submit buttons will look like:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml</p>
<pre class="source-code">&lt;button type="submit" class="btn btn-primary"<strong class="bold"> id="newsletterButton"</strong>&gt;Subscribe&lt;/button&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/contact.xhtml</p>
<pre class="source-code">&lt;button type="submit" class="btn btn-primary"<strong class="bold"> id="contactButton"</strong>&gt;Submit&lt;/button&gt;</pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml</p>
<pre class="source-code">&lt;button type="submit" class="btn btn-primary"<strong class="bold"> id="paymentButton"</strong>&gt;Pay&lt;/button&gt;</pre>
<p>We will <a id="_idIndexMarker626"/>add the markup for the spinner <a id="_idIndexMarker627"/>component to a variable in our JavaScript using the following code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 98-100</p>
<pre class="source-code">// Markup for spinner component used on various forms</pre>
<pre class="source-code">const spinnerMarkup = '&lt;span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"&gt;&lt;/span&gt;Please wait...';</pre>
<p>Now this variable can be used to insert the spinner component into our submit button when we need it.</p>
<p>We will add the code for our loading indicator inside the script used to handle form validation. If the form is valid, first, we will prevent the form from submitting (so that we can emulate the loading behavior). Then, we will replace the text of the submit button with the spinner component and disable the submit button too. After that, we will use the <code>setTimeout()</code> method to emulate a loading time of <code>2000</code> milliseconds, after which the spinner component inside the submit button will be replaced with some new text.</p>
<p>The updated <a id="_idIndexMarker628"/>code for form submission <a id="_idIndexMarker629"/>with a loading indicator, again using the newsletter form as an example, will now look like this:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 104-123</p>
<pre class="source-code">// Newsletter form</pre>
<pre class="source-code">const newsletterForm = document.querySelector('#newsletterForm');</pre>
<pre class="source-code">newsletterForm.addEventListener('submit', function (event) {</pre>
<pre class="source-code">  if (!newsletterForm.checkValidity()) {</pre>
<pre class="source-code">    event.preventDefault();</pre>
<pre class="source-code">    event.stopPropagation();</pre>
<pre class="source-code">  }<strong class="bold"> else {</strong></pre>
<pre class="source-code"><strong class="bold">    event.preventDefault();</strong></pre>
<pre class="source-code"><strong class="bold">    const newsletterButton = </strong></pre>
<pre class="source-code">      <strong class="bold">document.querySelector('#newsletterButton');</strong></pre>
<pre class="source-code"><strong class="bold">    newsletterButton.innerHTML = spinnerMarkup;</strong></pre>
<pre class="source-code"><strong class="bold">    newsletterButton.disabled = true;</strong></pre>
<pre class="source-code"><strong class="bold">    setTimeout(function() {</strong></pre>
<pre class="source-code"><strong class="bold">      const newsletterConfirmationText = 'Subscribed';</strong></pre>
<pre class="source-code"><strong class="bold">      newsletterButton.innerHTML = </strong></pre>
<pre class="source-code"><strong class="bold">        newsletterConfirmationText;</strong></pre>
<pre class="source-code"><strong class="bold">    }, 2000)</strong></pre>
<pre class="source-code"><strong class="bold">  }</strong></pre>
<pre class="source-code">  newsletterForm.classList.add('was-validated');</pre>
<pre class="source-code">}, false)</pre>
<p>Now we <a id="_idIndexMarker630"/>have added the form submission <a id="_idIndexMarker631"/>loading indicators, but we have one more interactive feature for our forms. This is a form success message, which we will create next.</p>
<h1 id="_idParaDest-215"><a id="_idTextAnchor217"/>Adding form success messages</h1>
<p>In the previous example, when the loading had finished after form submission, the text of the <a id="_idIndexMarker632"/>submit button was replaced. Now we want to also add form success messages below our forms when loading has finished.</p>
<p>We will use the alert component with the <code>$success</code> color for our success message, and we will place it inside the collapse component, so it can be displayed with a vertical transition. To achieve this, first, we will add the following markup to our forms after the submit and reset buttons and just before the closing <code>&lt;/form&gt;</code> tag, again using the newsletter form as an example:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/index.xhtml</p>
<pre class="source-code">&lt;div class="collapse mt-3" id="newsletterConfirmation"&gt;</pre>
<pre class="source-code">  &lt;div class="alert alert-success"&gt;</pre>
<pre class="source-code">    &lt;h3 class="alert-heading h4"&gt;Subscribed!&lt;/h3&gt;</pre>
<pre class="source-code">    &lt;p class="mb-0"&gt;Lorem ipsum dolor sit amet, consectetur </pre>
<pre class="source-code">      adipiscing elit. Donec mattis posuere consequat. </pre>
<pre class="source-code">      Nulla fermentum sodales augue, vitae ornare eros </pre>
<pre class="source-code">      ornare quis. Donec lectus est, congue eu risus quis, </pre>
<pre class="source-code">      tempus sagittis nunc.&lt;/p&gt;</pre>
<pre class="source-code">  &lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>In our JavaScript, we will now update the code used inside the <code>setTimeout()</code> method. We will store the collapse component from the previous code block inside a variable and use that to show the collapse component by using the <code>Collapse()</code> constructor <a id="_idIndexMarker633"/>and the <code>show()</code> method. The alert component will then be displayed using a vertical transition. Using the newsletter form as an example, the updated JavaScript code looks like this:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 104-123</p>
<pre class="source-code">// Newsletter form</pre>
<pre class="source-code">const newsletterForm = document.querySelector('#newsletterForm');</pre>
<pre class="source-code">newsletterForm.addEventListener('submit', function (event) {</pre>
<pre class="source-code">  if (!newsletterForm.checkValidity()) {</pre>
<pre class="source-code">    event.preventDefault();</pre>
<pre class="source-code">    event.stopPropagation();</pre>
<pre class="source-code">  } else {</pre>
<pre class="source-code">    event.preventDefault();</pre>
<pre class="source-code">    const newsletterButton = </pre>
<pre class="source-code">      document.querySelector('#newsletterButton');</pre>
<pre class="source-code">    newsletterButton.innerHTML = spinnerMarkup;</pre>
<pre class="source-code">    newsletterButton.disabled = true;</pre>
<pre class="source-code">    setTimeout(function() {</pre>
<pre class="source-code">      const newsletterConfirmationText = 'Subscribed';</pre>
<pre class="source-code">      newsletterButton.innerHTML = </pre>
<pre class="source-code">        newsletterConfirmationText;</pre>
<pre class="source-code">      <strong class="bold">const newsletterConfirmationElement = </strong></pre>
<pre class="source-code">        <strong class="bold">document.querySelector('#newsletterConfirmation');</strong></pre>
<pre class="source-code"><strong class="bold">      new bootstrap.Collapse(</strong></pre>
<pre class="source-code">        <strong class="bold">newsletterConfirmationElement).show();</strong></pre>
<pre class="source-code">    }, 2000)</pre>
<pre class="source-code">  }</pre>
<pre class="source-code">  newsletterForm.classList.add('was-validated');</pre>
<pre class="source-code">}, false)</pre>
<p>The last <a id="_idIndexMarker634"/>two code blocks use the newsletter form as an example. The code for the contact form and payment form is similar.</p>
<h1 id="_idParaDest-216"><a id="_idTextAnchor218"/>Creating programmatic tabs navigation</h1>
<p>Currently, the user can use the tabs navigation on the <strong class="bold">Cart</strong> page to navigate between the three tabs. We want to disable the buttons used for tabs navigation and instead make use <a id="_idIndexMarker635"/>of programmatic tabs navigation. This means that the active tab pane will change automatically when the user goes through the checkout flow by using the submit button in each form, labeled <strong class="bold">Next</strong>, <strong class="bold">Next</strong>, and <strong class="bold">Pay</strong>, respectively.</p>
<p>First, we need to update our markup to disable the buttons used for tabs navigation. For each button, we will add the <code>.disabled</code> class to get the correct styling and remove the <code>data-bs-toggle=”tab”</code> attribute to disable the functionality to change the tab on click. The updated markup looks like this:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml</p>
<pre class="source-code">&lt;ul class="nav nav-pills nav-justified mb-5" role="tablist"&gt;</pre>
<pre class="source-code">  &lt;li class="nav-item" role="presentation"&gt;</pre>
<pre class="source-code">    &lt;button type="button" id="cartTabs-1" class="nav-link </pre>
<pre class="source-code">      active<strong class="bold"> disabled</strong>" <strong class="bold">data-bs-toggle="tab"</strong> data-bs-</pre>
<pre class="source-code">      target="#cartTabs-pane-1" role="tab" aria-</pre>
<pre class="source-code">      controls="cartTabs-pane-1" aria-selected="true"&gt;1. </pre>
<pre class="source-code">      Shopping Cart&lt;/button&gt;</pre>
<pre class="source-code">  &lt;/li&gt;</pre>
<pre class="source-code">  &lt;li class="nav-item" role="presentation"&gt;</pre>
<pre class="source-code">    &lt;button type="button" id="cartTabs-2" class="nav-link<strong class="bold"> </strong></pre>
<pre class="source-code">      <strong class="bold">disabled</strong>" <strong class="bold">data-bs-toggle="tab"</strong> data-bs-</pre>
<pre class="source-code">      target="#cartTabs-pane-2" role="tab" aria-</pre>
<pre class="source-code">      controls="cartTabs-pane-2" aria-selected="false"&gt;2. </pre>
<pre class="source-code">      Shipping Details&lt;/button&gt;</pre>
<pre class="source-code">  &lt;/li&gt;</pre>
<pre class="source-code">  &lt;li class="nav-item" role="presentation"&gt;</pre>
<pre class="source-code">    &lt;button type="button" id="cartTabs-3" class="nav-link<strong class="bold"> </strong></pre>
<pre class="source-code">      <strong class="bold">disabled</strong>" <strong class="bold">d</strong><strong class="bold">ata-bs-toggle="tab"</strong> data-bs-</pre>
<pre class="source-code">      target="#cartTabs-pane-3" role="tab" aria-</pre>
<pre class="source-code">      controls="cartTabs-pane-3" aria-selected="false"&gt;3. </pre>
<pre class="source-code">      Payment Options&lt;/button&gt;</pre>
<pre class="source-code">  &lt;/li&gt;</pre>
<pre class="source-code">&lt;/ul&gt;</pre>
<p>Before adding <a id="_idIndexMarker636"/>the JavaScript for changing the tabs programmatically, we will create a little helper function that is used to scroll the page to the top with a smooth transition. The helper function consists of the following code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 154-160</p>
<pre class="source-code">// Scroll effect for forms</pre>
<pre class="source-code">function scrollToTop() {</pre>
<pre class="source-code">  scroll({</pre>
<pre class="source-code">    top: 0,</pre>
<pre class="source-code">    behavior: "smooth"</pre>
<pre class="source-code">  });</pre>
<pre class="source-code">}</pre>
<p>Now we will look at how to create the JavaScript for the programmatic tabs navigation. We want to navigate from the <strong class="bold">Shopping Cart</strong> tab pane to the <strong class="bold">Shipping Details</strong> tab pane and again from the <strong class="bold">Shipping Details</strong> tab pane to the <strong class="bold">Payment Options</strong> tab pane. Since each tab needs to be activated individually, and we also need different behavior for <a id="_idIndexMarker637"/>each form in the <strong class="bold">Shopping Cart</strong> and <strong class="bold">Shipping Details</strong> tab panes, we will go through them one by one.</p>
<p class="callout-heading">Storing Form Values Through the Checkout Flow</p>
<p class="callout">We’re not storing the input values in each form through the checkout flow when we switch to the tab pane. This must be done in a way that will make it work for a real project.</p>
<h2 id="_idParaDest-217"><a id="_idTextAnchor219"/>Shopping Cart tab pane</h2>
<p>In our JavaScript, we will wait for the <code>submit</code> event of the form and then prevent the default <a id="_idIndexMarker638"/>form submission. After that, we will <a id="_idIndexMarker639"/>call our helper function, <code>scrollToTop()</code>, and add a <code>setTimeout()</code> method with a delay of <code>600</code> milliseconds. This is so that the browser has enough time to scroll the page to the top before executing the following code.</p>
<p>Inside the <code>setTimeout()</code> method, we will store the button for the second tab in a variable and use that to show the corresponding tab pane using the <code>Tab()</code> constructor and the <code>show()</code> method. The button for the tab is connected to the related tab pane through the <code>data-bs-target</code> attribute:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 165-177</p>
<pre class="source-code">// Shopping Cart form</pre>
<pre class="source-code">const shoppingCartForm = document.querySelector('#shoppingCartForm');</pre>
<pre class="source-code">shoppingCartForm.addEventListener('submit', function (event) {</pre>
<pre class="source-code">  event.preventDefault();</pre>
<pre class="source-code">  // Go to cart tab 2</pre>
<pre class="source-code">  scrollToTop();</pre>
<pre class="source-code">  setTimeout(function() {</pre>
<pre class="source-code">    const cartTabs2Element = </pre>
<pre class="source-code">      document.querySelector('#cartTabs-2');</pre>
<pre class="source-code">    new bootstrap.Tab(cartTabs2Element).show();</pre>
<pre class="source-code">  }, 600)</pre>
<pre class="source-code">}, false)</pre>
<h2 id="_idParaDest-218"><a id="_idTextAnchor220"/>Shipping Details tab pane</h2>
<p>The difference with this form compared to the <code>else</code> part of the conditional statement, as follows:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 179-198</p>
<pre class="source-code">// Shipping Details form</pre>
<pre class="source-code">const shippingForm = document.querySelector('#shippingForm');</pre>
<pre class="source-code">shippingForm.addEventListener('submit', function (event) {</pre>
<pre class="source-code">  if (!shippingForm.checkValidity()) {</pre>
<pre class="source-code">    event.preventDefault();</pre>
<pre class="source-code">    event.stopPropagation();</pre>
<pre class="source-code">  } else {</pre>
<pre class="source-code">    <strong class="bold">event.preventDefault();</strong></pre>
<pre class="source-code"><strong class="bold">    // Go to cart tab 3</strong></pre>
<pre class="source-code"><strong class="bold">    scrollToTop();</strong></pre>
<pre class="source-code"><strong class="bold">    setTimeout(function() {</strong></pre>
<pre class="source-code"><strong class="bold">      const cartTabs3Element = </strong></pre>
<pre class="source-code">        <strong class="bold">document.querySelector('#cartTabs-3');</strong></pre>
<pre class="source-code"><strong class="bold">      new bootstrap.Tab(cartTabs3Element).show();</strong></pre>
<pre class="source-code"><strong class="bold">    }, 600)</strong></pre>
<pre class="source-code">  }</pre>
<pre class="source-code">  shippingForm.classList.add('was-validated');</pre>
<pre class="source-code">}, false)</pre>
<p>Now we <a id="_idIndexMarker642"/>have created the <a id="_idIndexMarker643"/>programmatic tabs navigation and can continue with a feature to update the progress status in the checkout flow.</p>
<h1 id="_idParaDest-219"><a id="_idTextAnchor221"/>Updating the progress status in the checkout flow</h1>
<p>The last thing we want to improve for the checkout flow on the <strong class="bold">Cart</strong> page is to update the progress <a id="_idIndexMarker644"/>component as the tab panes are switched. In the <strong class="bold">Shopping Cart</strong> tab pane, initially, the progress should be 0 percent, and <a id="_idIndexMarker645"/>when the switch to the <strong class="bold">Shipping Details</strong> tab pane happens, the progress should be updated to 33 percent. When the form on the <strong class="bold">Shipping Details</strong> tab pane is submitted and the switch to the <strong class="bold">Payment Options</strong> tab pane happens, the progress should be updated to 67 percent. Finally, when the form on the <strong class="bold">Payment Options</strong> tab pane has been submitted and the success message has been displayed, the progress should be updated to 100 percent.</p>
<p>To update the progress component, we need to change the <code>width</code> property and the <code>aria-valuenow</code> attribute of the <code>.progress-bar</code> element (a child element of the progress component). The value of the <code>aria-valuenow</code> attribute will be updated directly with JavaScript, and the value of the <code>width</code> property can be updated either directly with inline styling or indirectly with classes. We will look at both approaches.</p>
<h2 id="_idParaDest-220"><a id="_idTextAnchor222"/>Updating the progress using inline styling</h2>
<p>For this approach, first, we will update our markup with inline styling for the <code>width</code> of the element. We <a id="_idIndexMarker646"/>will set it to the initial <a id="_idIndexMarker647"/>value of <code>0</code>, and this is necessary when we want to have the transition effect from one value to another. Not setting the <code>width</code> to <code>0</code> in advance will make the width of the <code>.progress-bar</code> element “jump” from one value to the other. Here’s the updated code:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/cart.xhtml</p>
<pre class="source-code">&lt;div class="progress mb-4" id="cartProgress"&gt;</pre>
<pre class="source-code">  &lt;div class="progress-bar progress-bar-striped progress-</pre>
<pre class="source-code">    bar-animated" <strong class="bold">style="width: 0;" </strong>role="progressbar" </pre>
<pre class="source-code">    aria-valuenow="00" aria-valuemin="0" aria-</pre>
<pre class="source-code">    valuemax="100"&gt;&lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>In our JavaScript, first, we will store the <code>.progress-bar</code> element of our progress component in a variable like so:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 162-163</p>
<pre class="source-code">// Progress component which is animated by the tabs </pre>
<pre class="source-code">// navigation below</pre>
<pre class="source-code">const cartProgressBar = document.querySelector('#cartProgress .progress-bar');</pre>
<p>Then, we will add two more lines of JavaScript at the end of the <code>setTimeout()</code> method for each form on the Cart page. This will update the value of the inline styling and the <code>aria-valuenow</code> attribute. The updated code will look like this, using the <strong class="bold">Shopping Cart</strong> form as an example:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 165-177</p>
<pre class="source-code">// Shopping Cart form</pre>
<pre class="source-code">const shoppingCartForm = document.querySelector('#shoppingCartForm');</pre>
<pre class="source-code">shoppingCartForm.addEventListener('submit', function (event) {</pre>
<pre class="source-code">  event.preventDefault();</pre>
<pre class="source-code">  // Go to cart tab 2</pre>
<pre class="source-code">  scrollToTop();</pre>
<pre class="source-code">  setTimeout(function() {</pre>
<pre class="source-code">    const cartTabs2Element = </pre>
<pre class="source-code">      document.querySelector('#cartTabs-2');</pre>
<pre class="source-code">    new bootstrap.Tab(cartTabs2Element).show();</pre>
<pre class="source-code"><strong class="bold">    cartProgressBar.style.width = "33%";</strong></pre>
<pre class="source-code"><strong class="bold">    cartProgressBar.ariaValueNow = 33;</strong></pre>
<pre class="source-code">  }, 600)</pre>
<pre class="source-code">}, false)</pre>
<p>We won’t <a id="_idIndexMarker648"/>use this approach with inline <a id="_idIndexMarker649"/>styling. That’s because we want to make use of the width utility classes, <code>.w-33</code> and <code>.w-67</code>, which we generated using the utility API when we customized the styling of our website.</p>
<h2 id="_idParaDest-221"><a id="_idTextAnchor223"/>Updating the progress using classes</h2>
<p>For this <a id="_idIndexMarker650"/>approach to work, we also need <a id="_idIndexMarker651"/>to specify the width of <code>.progress-element</code> explicitly to be able to get the transition effect when adding width utility classes. We could keep the inline styling in our markup, but since we want to avoid inline styling for this approach, instead, we will specify the width in our custom style sheet as follows:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/scss/_custom-styles.scss line 17-20</p>
<pre class="source-code">// Set the width of the .progress-bar so we can use the </pre>
<pre class="source-code">// transition effect when adding width utility classes</pre>
<pre class="source-code">.progress-bar {</pre>
<pre class="source-code">  width: 0;</pre>
<pre class="source-code">}</pre>
<p>Now, in our <a id="_idIndexMarker652"/>JavaScript, we will add and remove <a id="_idIndexMarker653"/>the width utility classes, <code>.w-33</code>, <code>.w-67</code>, and <code>.w-100</code>, to achieve the same result as before. The code to update the <code>aria-valuenow</code> attribute will remain the same, and the code will still be placed at the end of the <code>setTimeout()</code> method. It will look like this in the three different forms:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 174-175, line 192-194, line 216-218</p>
<pre class="source-code">// Shopping Cart form</pre>
<pre class="source-code"><strong class="bold">cartProgressBar.classList.add("w-33");</strong></pre>
<pre class="source-code">cartProgressBar.ariaValueNow = 33;</pre>
<pre class="source-code">// Shipping Details form</pre>
<pre class="source-code"><strong class="bold">cartProgressBar.classList.remove("w-33");</strong></pre>
<pre class="source-code"><strong class="bold">cartProgressBar.classList.add("w-67");</strong></pre>
<pre class="source-code">cartProgressBar.ariaValueNow = 67;</pre>
<pre class="source-code">// Payment Options form</pre>
<pre class="source-code"><strong class="bold">cartProgressBar.classList.remove("w-67");</strong></pre>
<pre class="source-code"><strong class="bold">cartProgressBar.classList.add("w-100");</strong></pre>
<pre class="source-code">cartProgressBar.ariaValueNow = 100;</pre>
<p>The last thing we want to do is to stop the animation for the progress component when it reaches 100 percent. To stop this, we simply need to remove the <code>.progress-bar-animated</code> class from the <code>.progress-bar</code> element when the transition from 67 percent <a id="_idIndexMarker654"/>to 100 percent has finished. In the previous chapter, when we customized the website using Bootstrap 5 variables, we set the <a id="_idIndexMarker655"/>animation duration of the <code>.progress-bar</code> element to 0.5 seconds using the <code>$progress-bar-animation-timing</code> variable in the <code>_default-variable-overrides.scss</code> file. Therefore, we will put the code to remove the <code>.progress-bar-animated</code> class inside a <code>setTimeout()</code> method with a delay of <code>500</code> milliseconds like so:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 219-221</p>
<pre class="source-code">setTimeout(function() {</pre>
<pre class="source-code">  cartProgressBar.classList.remove("progress-bar-</pre>
<pre class="source-code">    animated");</pre>
<pre class="source-code">}, 500)</pre>
<p>Now we are done adding interactive features to our Cart page, and we only have one more interactive feature to create.</p>
<h1 id="_idParaDest-222"><a id="_idTextAnchor224"/>Creating a lightbox for the product gallery</h1>
<p>The last interactive feature we want to make for the website is a lightbox for the product <a id="_idIndexMarker656"/>gallery on the <strong class="bold">Product</strong> page. We will simply <a id="_idIndexMarker657"/>use the modal component to display a large image when clicking on one of the thumbnail images.</p>
<p>First, we will insert the minimum code for a modal at the bottom of our <code>product.xhtml</code> file, after the closing <code>&lt;/footer&gt;</code> tag and before the two <code>&lt;script&gt;</code> tags. We will make the modal large and vertically centered by using the <code>.modal-xl</code> and <code>.modal-dialog-centered</code> modifier classes. We won’t have any modal header, modal body, or modal footer since we don’t want any padding or other UI elements in the modal. We only want our large image and the backdrop of the modal surrounding it. It will still be possible to close the modal using the <em class="italic">Escape</em> key or by clicking outside of it somewhere on the backdrop. The class on the <code>&lt;img&gt;</code> tag will be used as a hook for our JavaScript:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/product.xhtml line 408-414</p>
<pre class="source-code">&lt;div class="modal fade" id="productGallery" tabindex="-1" aria-hidden="true"&gt;</pre>
<pre class="source-code">  &lt;div class="modal-dialog modal-xl modal-dialog-centered"&gt;</pre>
<pre class="source-code">    &lt;div class="modal-content"&gt;</pre>
<pre class="source-code">      &lt;img class="js-productGalleryImage"&gt;</pre>
<pre class="source-code">    &lt;/div&gt;</pre>
<pre class="source-code">  &lt;/div&gt;</pre>
<pre class="source-code">&lt;/div&gt;</pre>
<p>Now, we <a id="_idIndexMarker658"/>need to update the markup for the links <a id="_idIndexMarker659"/>surrounding the thumbnail images. A class will be used as a hook for our JavaScript, two data attributes will be used to initialize the modal component, and one data attribute will be used to store the URL for the large image that we want to show in the modal. The updated code for the first thumbnail image will look like this:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/product.xhtml line 85</p>
<pre class="source-code">&lt;a href="#"<strong class="bold"> class="js-productGalleryThumbnail" data-bs-toggle="modal" data-bs-target="#productGallery" data-src="img/1600x900.png"</strong>&gt;&lt;img src="img/185x104.png" class="img-thumbnail" alt="Product image"&gt;&lt;/a&gt;</pre>
<p>In our JavaScript, first, we will store all the image thumbnails in our product gallery in a variable using the class we just added as a hook and store the empty image in the modal in a variable using the class we provided as a hook earlier. Then, we will loop through the image thumbnails and listen for the <code>click</code> event. In that click event, we will set the empty <code>src</code> attribute of the <code>&lt;img&gt;</code> tag to the value of the <code>data-src</code> attribute defined on the image thumbnail. Since this code will be executed at the same time the modal is triggered, a large image will now be displayed inside of the modal. The next time an image thumbnail <a id="_idIndexMarker660"/>is clicked on, the <code>src</code> attribute <a id="_idIndexMarker661"/>will be replaced by a new value from the <code>data-src</code> attribute. The JavaScript for this is as follows:</p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US">part-2/chapter-9/website/js/script.js line 231-238</p>
<pre class="source-code">// Handle button click and open product gallery with </pre>
<pre class="source-code">// specific "src" value</pre>
<pre class="source-code">const productGalleryThumbnails = document.querySelectorAll('.js-productGalleryThumbnail');</pre>
<pre class="source-code">const productGalleryImage = document.querySelector('.js-productGalleryImage');</pre>
<pre class="source-code">for (let i = 0; i &lt; productGalleryThumbnails.length; i++) {</pre>
<pre class="source-code">  productGalleryThumbnails[i].addEventListener('click', </pre>
<pre class="source-code">    function() {</pre>
<pre class="source-code">    productGalleryImage.src = </pre>
<pre class="source-code">      productGalleryThumbnails[i].dataset.src;</pre>
<pre class="source-code">  })</pre>
<pre class="source-code">}</pre>
<p>Now we have created our own lightbox for the product gallery and have finished adding interactive features to our website.</p>
<h1 id="_idParaDest-223"><a id="_idTextAnchor225"/>Summary</h1>
<p>In this chapter, we learned how we can improve our website with interactive features using JavaScript. Some of these features were based on Bootstrap 5 components that require custom JavaScript to work, while other features were created without the use of Bootstrap 5 components.</p>
<p>When going through all the scenarios in this chapter, we saw how it makes the website more appealing and engaging with these new interactive features being added.</p>
<p>This chapter concludes Part 2 of this book, which was centered around how to create a website using only Bootstrap 5 and then customizing and improving it with Sass and JavaScript. In Part 3, we will uncover more ways to work with Bootstrap 5 using the Sass and CSS features and learn how to optimize the usage of the Bootstrap 5 code and files.</p>
</div>
<div><div></div>
</div>
</div>
</body></html>