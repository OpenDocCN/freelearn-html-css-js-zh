<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Primitive Data Types, Arrays, Loops, and Conditions"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Primitive Data Types, Arrays, Loops, and Conditions</h1></div></div></div><p>Before diving into the object-oriented features of JavaScript, let's first take a look at some of the basics. This chapter walks you through the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The primitive data types in JavaScript, such as strings and numbers</li><li class="listitem" style="list-style-type: disc">Arrays</li><li class="listitem" style="list-style-type: disc">Common operators, such as <code class="literal">+</code>, <code class="literal">-</code>, <code class="literal">delete</code>, and <code class="literal">typeof</code></li><li class="listitem" style="list-style-type: disc">Flow control statements, such as loops and <code class="literal">if...else</code> conditions</li></ul></div><div class="section" title="Variables"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Variables</h1></div></div></div><p>Variables are used to store data; they are placeholders for concrete values. When writing programs, it's convenient to use variables instead of the actual data as it's much easier to write <code class="literal">pi</code> instead of <code class="literal">3.141592653589793</code>; especially when it happens several times inside your program. The data stored in a variable can be changed after it initially assigned, hence the name <span class="strong"><strong>variable</strong></span>. You can also use variables to store data that is unknown to you while you write the code, such as the result of a later operation.</p><p>Using a variable requires the following two steps. You will need to:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Declare the variable</li><li class="listitem" style="list-style-type: disc">Initialize it, that is, give it a value</li></ul></div><p>To declare a variable, you will use the <code class="literal">var</code> statement like the following piece of code:</p><pre class="programlisting">    var a; &#13;
    var thisIsAVariable;  &#13;
    var _and_this_too;  &#13;
    var mix12three; &#13;
</pre><p>For the names of the variables, you can use any combination of letters, numbers, the underscore character, and the dollar sign. However, you can't start with a number, which means that the following declaration of code is invalid:</p><pre class="programlisting">    var 2three4five; &#13;
</pre><p>To initialize a variable means to give it a value for the first (initial) time. The following are the two ways to do so:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Declare the variable first, then initialize it</li><li class="listitem" style="list-style-type: disc">Declare and initialize it with a single statement</li></ul></div><p>An example of the latter is as follows:</p><pre class="programlisting">    var a = 1; &#13;
</pre><p>Now the variable named <code class="literal">a</code> contains the value <code class="literal">1</code>.</p><p>You can declare, and optionally initialize, several variables with a single <code class="literal">var</code> statement; just separate the declarations with a comma, as shown in the following line of code:</p><pre class="programlisting">    var v1, v2, v3 = 'hello', v4 = 4, v5; &#13;
</pre><p>For readability, this is often written using one variable per line, as follows:</p><pre class="programlisting">    var v1,  &#13;
        v2,  &#13;
        v3 = 'hello',  &#13;
        v4 = 4,  &#13;
        v5; &#13;
</pre><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note3"/>Note</h3><p>
<span class="strong"><strong>The $ character in variable names</strong></span></p><p>You may see the dollar sign character (<code class="literal">$</code>) used in variable names, as in <code class="literal">$myvar</code> or less commonly <code class="literal">my$var</code>. This character is allowed to appear anywhere in a variable name, although previous versions of the ECMA standard discouraged its use in handwritten programs and suggested it should only be used in generated code (programs written by other programs). This suggestion is not well respected by the JavaScript community, and <code class="literal">$</code> is in fact commonly used in practice as a function name.</p></div></div><div class="section" title="Variables are case sensitive"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec21"/>Variables are case sensitive</h2></div></div></div><p>Variable names are case sensitive. You can easily verify this statement using your JavaScript console. Try typing the following code by pressing <span class="emphasis"><em>Enter</em></span> after each line:</p><pre class="programlisting">    var case_matters = 'lower'; &#13;
    var CASE_MATTERS = 'upper';  &#13;
    case_matters; &#13;
    CASE_MATTER; &#13;
</pre><p>To save keystrokes when you enter the third line, you can type <code class="literal">case</code> and press the <span class="emphasis"><em>Tab</em></span> or right arrow key. <span class="strong"><strong>Console</strong></span> autocompletes the variable name to <code class="literal">case_matters</code>. Similarly, for the last line, type <code class="literal">CASE</code> and press the <span class="emphasis"><em>Tab</em></span> key. The end result is shown in the following figure:</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_001-e1482738938732.jpg" alt="Variables are case sensitive"/></div><p>
</p><p>Throughout the rest of this book, only the code for the examples is given instead of a screenshot, as follows:</p><pre class="programlisting">    &gt; var case_matters = 'lower'; &#13;
    &gt; var CASE_MATTERS = 'upper'; &#13;
    &gt; case_matters; &#13;
    "lower" &#13;
    &gt; CASE_MATTERS; &#13;
    "upper" &#13;
</pre><p>The greater-than signs (<code class="literal">&gt;</code>) show the code that you type; the rest is the result as printed in <span class="strong"><strong>Console</strong></span>. Again, remember that when you see such code examples, you're strongly encouraged to type in the code yourself. Then, you can experiment by tweaking it a little here and there to get a better feeling of how exactly it works.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note4"/>Note</h3><p>You can see in the preceding screenshot that sometimes what you type in <span class="strong"><strong>Console</strong></span> results in the word <span class="strong"><strong>undefined</strong></span>. You can simply ignore this, but if you're curious, here's what happens when evaluating (executing) what you type-the <span class="strong"><strong>Console</strong></span> prints the returned value. Some expressions, such as <code class="literal">var a = 1;</code>, don't return anything explicitly, in which case, they implicitly return the special value <span class="strong"><strong>undefined</strong></span> (more on in a bit). When an expression returns some value (for example, <code class="literal">case_matters</code> in the previous example or something such as <code class="literal">1 + 1</code>), the resulting value is printed out. Not all consoles print the <span class="strong"><strong>undefined</strong></span> value; for example, the Firebug console.</p></div></div></div></div></div>
<div class="section" title="Operators"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Operators</h1></div></div></div><p>Operators take one or two values (or variables), perform an operation, and return a value. Let's check out a simple example of using an operator, just to clarify the terminology:</p><pre class="programlisting">    &gt; 1 + 2; &#13;
    3 &#13;
</pre><p>In the preceding code:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">+</code> symbol is the operator</li><li class="listitem" style="list-style-type: disc">The operation is addition</li><li class="listitem" style="list-style-type: disc">The input values are <code class="literal">1</code> and <code class="literal">2</code> (they are also called operands)</li><li class="listitem" style="list-style-type: disc">The result value is <code class="literal">3</code></li><li class="listitem" style="list-style-type: disc">The whole thing is called an expression</li></ul></div><p>Instead of using the values <code class="literal">1</code> and <code class="literal">2</code> directly in the expression, you can use variables. You can also use a variable to store the result of the operation as the following example demonstrates:</p><pre class="programlisting">    &gt; var a = 1; &#13;
    &gt; var b = 2; &#13;
    &gt; a + 1; &#13;
    2 &#13;
    &gt; b + 2; &#13;
    4 &#13;
    &gt; a + b; &#13;
    3 &#13;
    &gt; var c = a + b; &#13;
    &gt; c; &#13;
    3 &#13;
</pre><p>The following table lists the basic arithmetic operators:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Operator symbol</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Operation</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Example</strong></span>
</p>
</td></tr><tr><td>
<p>
<code class="literal">+</code>
</p>
</td><td>
<p>Addition</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 + 2;   &#13;
3   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">-</code>
</p>
</td><td>
<p>Subtraction</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 99.99 - 11;   &#13;
88.99   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">*</code>
</p>
</td><td>
<p>Multiplication</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 2 * 3;   &#13;
6   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">/</code>
</p>
</td><td>
<p>Division</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 6 / 4;   &#13;
1.5   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">%</code>
</p>
</td><td>
<p>Modulo, the remainder of a division</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 6 % 3;   &#13;
0   &#13;
&gt; 5 % 3;   &#13;
2   &#13;
</pre><p>
</p><p>It's sometimes useful to test if a number is even or odd. Using the modulo operator, it's easy to do just that. All odd numbers return <code class="literal">1</code> when divided by <code class="literal">2</code>, while all even numbers return <code class="literal">0</code>, for example:</p><p>
</p><pre class="programlisting">&gt; 4 % 2;   &#13;
0   &#13;
&gt; 5 % 2;   &#13;
1   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">++</code>
</p>
</td><td>
<p>Increment a value by <code class="literal">1</code>
</p>
</td><td>
<p>Post increment is when the input value is incremented after it's returned, for example:
</p><pre class="programlisting">&gt; var a = 123;    &#13;
&gt; var b = a++;   &#13;
&gt; b;   &#13;
123   &#13;
&gt; a;   &#13;
124   &#13;
</pre><p>
</p><p>The opposite is pre-increment. The input value is incremented by <code class="literal">1</code> first and then returned, for example:</p><p>
</p><pre class="programlisting">&gt; var a = 123;    &#13;
&gt; var b = ++a;   &#13;
&gt; b;   &#13;
124   &#13;
&gt; a;   &#13;
124   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">--</code>
</p>
</td><td>
<p>Decrement a value by 1</p>
</td><td>
<p>Post-decrement:
</p><pre class="programlisting">&gt; var a = 123;    &#13;
&gt; var b = a--;   &#13;
&gt; b;   &#13;
123   &#13;
&gt; a;   &#13;
122   &#13;
</pre><p>
</p><p>Pre-decrement:</p><p>
</p><pre class="programlisting">&gt; var a = 123;    &#13;
&gt; var b = --a;   &#13;
&gt; b;   &#13;
122   &#13;
&gt; a;   &#13;
122   &#13;
</pre><p>
</p>
</td></tr></tbody></table></div><p>The <code class="literal">var a = 1;</code> is also an operation; it's the simple assignment operation, and <code class="literal">=</code> is the <span class="strong"><strong>simple </strong></span>
<span class="strong"><strong>assignment </strong></span>
<span class="strong"><strong>operator</strong></span>.</p><p>There is also a family of operators that are a combination of an assignment and an arithmetic operator. These are called <span class="strong"><strong>compound operators</strong></span>. They can make your code more compact. Let's see some of them with the following examples:</p><pre class="programlisting">    &gt; var a = 5; &#13;
    &gt; a += 3; &#13;
    8 &#13;
</pre><p>In this example, <code class="literal">a += 3;</code> is just a shorter way of doing <code class="literal">a = a + 3;</code>. For example:</p><pre class="programlisting">    &gt; a -= 3; &#13;
    5 &#13;
</pre><p>Here, <code class="literal">a -= 3;</code> is the same as <code class="literal">a = a - 3;</code>:</p><pre class="programlisting">    &gt; a *= 2; &#13;
    10 &#13;
    &gt; a /= 5; &#13;
    2 &#13;
    &gt; a %= 2; &#13;
    0 &#13;
</pre><p>In addition to the arithmetic and assignment operators discussed previously, there are other types of operators, as you'll see later in this, and the following chapters.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note5"/>Note</h3><p>
<span class="strong"><strong>Best practice</strong></span></p><p>Always end your expressions with a semicolon. JavaScript has a semicolon insertion mechanism, where it can add the semicolon if you forget it at the end of a line. However, this can also be a source of errors, so it's best to make sure you always explicitly state where you want to terminate your expressions. In other words, both expressions <code class="literal">&gt; 1 + 1</code> and <code class="literal">&gt; 1 + 1;</code> will work; but throughout the book, you'll always see the second type, terminated with a semicolon, just to emphasize this habit.</p></div></div></div>
<div class="section" title="Primitive data types"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Primitive data types</h1></div></div></div><p>Any value that you use is of a certain type. In JavaScript, the following are just a few primitive data types:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem"><span class="strong"><strong>Number</strong></span>: This includes floating point numbers as well as integers. For example, these values are all numbers-<code class="literal">1</code>, <code class="literal">100</code>, <code class="literal">3</code>.<code class="literal">14</code>.</li><li class="listitem"><span class="strong"><strong>String</strong></span>: These consist of any number of characters, for example, <code class="literal">a</code>, <code class="literal">one</code>, and <code class="literal">one 2 three</code>.</li><li class="listitem"><span class="strong"><strong>Boolean</strong></span>: This can be either <code class="literal">true</code> or <code class="literal">false</code>.</li><li class="listitem"><span class="strong"><strong>Undefined</strong></span>: When you try to access a variable that doesn't exist, you get the special value undefined. The same happens when you declare a variable without assigning a value to it yet. JavaScript initializes the variable behind the scenes with the value <code class="literal">undefined</code>. The undefined data type can only have one value-the special value <code class="literal">undefined</code>.</li><li class="listitem"><span class="strong"><strong>Null</strong></span>: This is another special data type that can have only one value-the <code class="literal">null</code> value. It means no value, an empty value, or nothing. The difference with undefined is that if a variable has a null value, it's still defined; it just so happens that its value is nothing. You'll see some examples shortly.</li></ol></div><p>Any value that doesn't belong to one of the five primitive types listed here is an object. Even null is considered an object, which is a little awkward having an object (something) that is actually nothing. We'll learn more about objects in <a class="link" href="ch04.html" title="Chapter 4. Objects">Chapter 4</a>, <span class="emphasis"><em>Objects</em></span>, but for the time being, just remember that in JavaScript, the data types are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Primitive (the five types listed previously)</li><li class="listitem" style="list-style-type: disc">Non-primitive (objects)</li></ul></div><div class="section" title="Finding out the value type - the typeof operator"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec22"/>Finding out the value type - the typeof operator</h2></div></div></div><p>If you want to know the type of a variable or a value, you can use the special <code class="literal">typeof</code> operator. This operator returns a string that represents the data type. The return values of using <code class="literal">typeof</code> are one of the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">number</li><li class="listitem" style="list-style-type: disc">string</li><li class="listitem" style="list-style-type: disc">boolean</li><li class="listitem" style="list-style-type: disc">undefined</li><li class="listitem" style="list-style-type: disc">object</li><li class="listitem" style="list-style-type: disc">function</li></ul></div><p>In the next few sections, you'll see <code class="literal">typeof</code> in action using examples of each of the five primitive data types.</p></div><div class="section" title="Numbers"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec23"/>Numbers</h2></div></div></div><p>The simplest number is an integer. If you assign <code class="literal">1</code> to a variable, and then use the <code class="literal">typeof</code> operator, it returns the string <code class="literal">number</code>, as follows:</p><pre class="programlisting">    &gt; var n = 1; &#13;
    &gt; typeof n; &#13;
    "number" &#13;
    &gt; n = 1234; &#13;
    &gt; typeof n; &#13;
    "number" &#13;
</pre><p>In the preceding example, you can see that the second time you set a variable's value, you don't need the <code class="literal">var</code> statement.</p><p>Numbers can also be floating point (decimals), for example:</p><pre class="programlisting">    &gt; var n2 = 1.23; &#13;
    &gt; typeof n; &#13;
    "number" &#13;
</pre><p>You can call <code class="literal">typeof</code> directly on the value without assigning it to a variable first, for example:</p><pre class="programlisting">    &gt; typeof 123; &#13;
    "number" &#13;
</pre><div class="section" title="Octal and hexadecimal numbers"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec0"/>Octal and hexadecimal numbers</h3></div></div></div><p>When a number starts with a <code class="literal">0</code>, it's considered an octal number. For example, the octal <code class="literal">0377</code> is the decimal <code class="literal">255</code>:</p><pre class="programlisting">    &gt; var n3 = 0377; &#13;
    &gt; typeof n3; &#13;
    "number" &#13;
    &gt; n3; &#13;
    255 &#13;
</pre><p>The last line in the preceding example prints the decimal representation of the octal value.</p><p>ES6 provides a prefix <code class="literal">0o</code> (or <code class="literal">0O</code>, but this looks very confusing in most monospace fonts) to represent octals. Consider the following line of code for example:</p><pre class="programlisting">    console.log(0o776); //510 &#13;
</pre><p>While you may not be intimately familiar with octal numbers, you've probably used hexadecimal values to define colors in CSS stylesheets.</p><p>In CSS, you have several options to define a color, two of them are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Using decimal values to specify the amount of R (red), G (green), and B (blue), ranging from <code class="literal">0</code> to <code class="literal">255</code>. For example, <span class="emphasis"><em>rgb(0, 0, 0)</em></span> is black and <span class="emphasis"><em>rgb(255, 0, 0)</em></span> is red (maximum amount of red and no green or blue).</li><li class="listitem" style="list-style-type: disc">Using hexadecimals and specifying two characters for each R, G, and B value. For example, <span class="emphasis"><em>#000000</em></span> is black and <span class="emphasis"><em>#ff0000</em></span> is red. This is because <span class="emphasis"><em>ff</em></span> is the hexadecimal value for <code class="literal">255</code>.</li></ul></div><p>In JavaScript, you can put <code class="literal">0x</code> before a hexadecimal value, also called hex for short, for example:</p><pre class="programlisting">    &gt; var n4 = 0x00; &#13;
    &gt; typeof n4; &#13;
    "number" &#13;
    &gt; n4; &#13;
    0 &#13;
    &gt; var n5 = 0xff; &#13;
    &gt; typeof n5; &#13;
    "number" &#13;
    &gt; n5; &#13;
    255 &#13;
</pre></div><div class="section" title="Binary Literals"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec1"/>Binary Literals</h3></div></div></div><p>Untill ES6, if you needed binary representation of an integer, you had to pass them to the <code class="literal">parseInt()</code> function as a string with a radix of <code class="literal">2</code>, as follows:</p><pre class="programlisting">    console.log(parseInt('111',2)); //7 &#13;
</pre><p>In ES6 you can use <code class="literal">0b</code> (or <code class="literal">0B</code>) prefix to represent binary integers. For example:</p><pre class="programlisting">    console.log(0b111); //7 &#13;
</pre></div><div class="section" title="Exponent literals"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec2"/>Exponent literals</h3></div></div></div><p>
<code class="literal">1e1</code> (also written as <code class="literal">1e+1</code> or <code class="literal">1E1</code> or <code class="literal">1E+1</code>) represents the number 1 with a 0 after it, or in other words, <code class="literal">10</code>. Similarly, <code class="literal">2e+3</code> represents the number 2 with three 0s after it, or <code class="literal">2000</code>, for example:</p><pre class="programlisting">    &gt; 1e1; &#13;
    10 &#13;
    &gt; 1e+1; &#13;
    10 &#13;
    &gt; 2e+3; &#13;
    2000 &#13;
    &gt; typeof 2e+3; &#13;
    "number" &#13;
</pre><p>
<code class="literal">2e+3</code> means moving the decimal point three digits to the right of the number <span class="strong"><strong>2</strong></span>. There's also <code class="literal">2e-3</code>, meaning you move the decimal point three digits to the left of the number <span class="strong"><strong>2</strong></span>. Look at the following figure:</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_002.jpg" alt="Exponent literals"/></div><p>
</p><p>The following is the code:</p><pre class="programlisting">    &gt; 2e-3; &#13;
    0.002 &#13;
    &gt; 123.456E-3; &#13;
    0.123456 &#13;
    &gt; typeof 2e-3; &#13;
    "number" &#13;
</pre></div><div class="section" title="Infinity"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec3"/>Infinity</h3></div></div></div><p>There is a special value in JavaScript called Infinity. It represents a number too big for JavaScript to handle. Infinity is indeed a number, as typing <code class="literal">typeof Infinity</code> in the console will confirm. You can also quickly check that a number with <code class="literal">308</code> zeros is ok, but <code class="literal">309</code> zeros is too much. To be precise, the biggest number JavaScript can handle is <code class="literal">1.7976931348623157e+308</code>, while the smallest is <code class="literal">5e-324</code>, Look at the following example:</p><pre class="programlisting">    &gt; Infinity; &#13;
    Infinity &#13;
    &gt; typeof Infinity; &#13;
    "number" &#13;
    &gt; 1e309; &#13;
    Infinity &#13;
    &gt; 1e308; &#13;
    1e+308 &#13;
</pre><p>Dividing by zero gives you infinity, for example:</p><pre class="programlisting">    &gt; var a = 6 / 0; &#13;
    &gt; a; &#13;
    Infinity &#13;
</pre><p>
<code class="literal">Infinity</code> is the biggest number (or rather a little bigger than the biggest), but how about the smallest? It's infinity with a minus sign in front of it; <code class="literal">-Infinity</code>, for example:</p><pre class="programlisting">    &gt; var i = -Infinity; &#13;
    &gt; i; &#13;
    -Infinity &#13;
    &gt; typeof i; &#13;
    "number" &#13;
</pre><p>Does this mean you can have something that's exactly twice as big as Infinity, from 0 up to infinity and then from 0 down to minus infinity? Well, not really. When you sum <code class="literal">Infinity</code> and <code class="literal">-Infinity</code>, you don't get <code class="literal">0</code>, but something that is called <span class="strong"><strong>Not a Number</strong></span> (<span class="strong"><strong>NaN</strong></span>), For example:</p><pre class="programlisting">    &gt; Infinity - Infinity; &#13;
    NaN &#13;
    &gt; -Infinity + Infinity; &#13;
    NaN &#13;
</pre><p>Any other arithmetic operation with <code class="literal">Infinity</code> as one of the operands gives you <code class="literal">Infinity</code>, for example:</p><pre class="programlisting">    &gt; Infinity - 20; &#13;
    Infinity &#13;
    &gt; -Infinity * 3; &#13;
    -Infinity &#13;
    &gt; Infinity / 2; &#13;
    Infinity &#13;
    &gt; Infinity - 99999999999999999; &#13;
    Infinity &#13;
</pre><p>There is a lesser known global method, <code class="literal">isFinite()</code>, that tells you if the value is infinity or not. ES6 adds a <code class="literal">Number.isFinite()</code>method to do just that. Why another method, you may ask. The global variant of <code class="literal">isFinite()</code> tries to cast the value through Number(value), while <code class="literal">Number.isFinite()</code> doesn't, hence it's more accurate.</p></div><div class="section" title="NaN"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec4"/>NaN</h3></div></div></div><p>What was this <code class="literal">NaN</code> in the previous example? It turns out that despite its name, Not a Number, <code class="literal">NaN</code> is a special value that is also a number:</p><pre class="programlisting">    &gt; typeof NaN; &#13;
    "number" &#13;
    &gt; var a = NaN; &#13;
    &gt; a; &#13;
    NaN &#13;
</pre><p>You get <code class="literal">NaN</code> when you try to perform an operation that assumes numbers, but the operation fails. For example, if you try to multiply <code class="literal">10</code> by the character <code class="literal">"f"</code>, the result is <code class="literal">NaN</code>, because <code class="literal">"f"</code> is obviously not a valid operand for a multiplication:</p><pre class="programlisting">    &gt; var a = 10 * "f"; &#13;
    &gt; a;   &#13;
    NaN &#13;
</pre><p>
<code class="literal">NaN</code> is contagious, so if you have even one <code class="literal">NaN</code> in your arithmetic operation, the whole result goes down the drain, for example:</p><pre class="programlisting">    &gt; 1 + 2 + NaN; &#13;
    NaN &#13;
</pre><div class="section" title="Number.isNaN"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec0"/>Number.isNaN</h4></div></div></div><p>ES5 has a global method-<code class="literal">isNaN()</code>. It determines if a value is <code class="literal">NaN</code> or not. ES6 provides a very similar method-<code class="literal">Number.isNaN()</code> (Notice that this method is not global).</p><p>The difference between the global <code class="literal">isNaN()</code> and <code class="literal">Number.isNaN()</code> is that global <code class="literal">isNaN()</code> casts non-numeric values before evaluating them to be <code class="literal">NaN</code>. Let's look at the following example. We are using the ES6 <code class="literal">Number.isNaN()</code> method to test if something is a <code class="literal">NaN</code> or not:</p><pre class="programlisting">    console.log(Number.isNaN('test')); //false : Strings are not NaN &#13;
    console.log(Number.isNaN(123)); //false : integers are not NaN &#13;
    console.log(Number.isNaN(NaN)); //true : NaNs are NaNs &#13;
    console.log(Number.isNaN(123/'abc')); //true : 123/'abc' results in an NaN &#13;
</pre><p>We saw that ES5's global <code class="literal">isNaN()</code> method first casts non-numeric values and then does the comparison; the following result will be different from its ES6 counterpart:</p><pre class="programlisting">    console.log(isNaN('test')); //true &#13;
</pre><p>In general, compared to its global variant, <code class="literal">Number.isNaN()</code> is more correct. However, neither of them can be used to figure out if something is not a number-they just answer if the value is a <code class="literal">NaN</code> or not. Practically, you are interested in knowing if a value identifies as a number or not. Mozilla suggests the following polyfill method to do just that:</p><pre class="programlisting">    function isNumber(value) { &#13;
      return typeof value==='number' &amp;&amp; !Number.isNaN(value); &#13;
    } &#13;
</pre></div><div class="section" title="Number.isInteger"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec1"/>Number.isInteger</h4></div></div></div><p>This is a new method in ES6. It returns <code class="literal">true</code> if the number is finite and does not contain any decimal points (is an integer):</p><pre class="programlisting">    console.log(Number.isInteger('test')); //false &#13;
    console.log(Number.isInteger(Infinity)); //false &#13;
    console.log(Number.isInteger(NaN)); //false &#13;
    console.log(Number.isInteger(123)); //true &#13;
    console.log(Number.isInteger(1.23)); //false &#13;
</pre></div></div></div><div class="section" title="Strings"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec24"/>Strings</h2></div></div></div><p>A string is a sequence of characters used to represent text. In JavaScript, any value placed between single or double quotes is considered a string. This means that <code class="literal">1</code> is a number, but <code class="literal">"1"</code> is a string. When used with strings, <code class="literal">typeof</code> returns the string <code class="literal">"string"</code>, for example:</p><pre class="programlisting">    &gt; var s = "some characters"; &#13;
    &gt; typeof s; &#13;
    "string" &#13;
    &gt; var s = 'some characters and numbers 123 5.87'; &#13;
    &gt; typeof s; &#13;
    "string" &#13;
</pre><p>Here's an example of a number used in the string context:</p><pre class="programlisting">    &gt; var s = '1'; &#13;
    &gt; typeof s; &#13;
    "string" &#13;
</pre><p>If you put nothing in quotes, it's still a string (an empty string), for example:</p><pre class="programlisting">    &gt; var s = ""; typeof s; &#13;
    "string" &#13;
</pre><p>As you already know, when you use the plus sign with two numbers, this is the arithmetic addition operation. However, if you use the plus sign with strings, this is a string concatenation operation, and it returns the two strings glued together:</p><pre class="programlisting">    &gt; var s1 = "web";  &#13;
    &gt; var s2 = "site";  &#13;
    &gt; var s = s1 + s2;  &#13;
    &gt; s; &#13;
    "website" &#13;
    &gt; typeof s; &#13;
    "string" &#13;
</pre><p>The dual purpose of the <code class="literal">+</code> operator is a source of errors. Therefore, if you intend to concatenate strings, it's always best to make sure that all of the operands are strings. The same applies for addition; if you intend to add numbers then make sure the operands are numbers. You'll learn various ways to do so further in the chapter and the book.</p><div class="section" title="String conversions"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec5"/>String conversions</h3></div></div></div><p>When you use a number-like string, for example, <code class="literal">"1"</code>, as an operand in an arithmetic operation, the string is converted to a number behind the scenes. This works for all arithmetic operations except addition, because of its ambiguity. Consider the following example:</p><pre class="programlisting">    &gt; var s = '1';  &#13;
    &gt; s = 3 * s;  &#13;
    &gt; typeof s; &#13;
    "number" &#13;
    &gt; s; &#13;
    3 &#13;
    &gt; var s = '1'; &#13;
    &gt; s++; &#13;
    &gt; typeof s; &#13;
    "number" &#13;
    &gt; s; &#13;
    2 &#13;
</pre><p>A lazy way to convert any number-like string to a number is to multiply it by <code class="literal">1</code> (another way is to use a function called <code class="literal">parseInt()</code>, as you'll see in the next chapter):</p><pre class="programlisting">    &gt; var s = "100"; typeof s; &#13;
    "string" &#13;
    &gt; s = s * 1; &#13;
    100 &#13;
    &gt; typeof s; &#13;
    "number" &#13;
</pre><p>If the conversion fails, you'll get <code class="literal">NaN</code>:</p><pre class="programlisting">    &gt; var movie = '101 dalmatians'; &#13;
    &gt; movie * 1; &#13;
    NaN &#13;
</pre><p>You can convert a string to a number by multiplying it by <code class="literal">1</code>. The opposite-converting anything to a string-can be done by concatenating it with an empty string, as follows:</p><pre class="programlisting">    &gt; var n = 1; &#13;
    &gt; typeof n; &#13;
    "number" &#13;
    &gt; n = "" + n; &#13;
    "1" &#13;
    &gt; typeof n; &#13;
    "string" &#13;
</pre></div><div class="section" title="Special strings"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec6"/>Special strings</h3></div></div></div><p>There are also strings with special meanings, as listed in the following table:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>String</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Meaning</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Example</strong></span>
</p>
</td></tr><tr><td>
<p>
</p><p>
<code class="literal">\\</code>
</p><p>
</p><p>
<code class="literal">'</code>
</p><p>
</p><p>
<code class="literal">"</code>
</p><p>
</p>
</td><td>
<p>
</p><p>The <code class="literal">\</code> is the escape character. When you want to have quotes inside your string, you can escape them so that JavaScript doesn't think they mean the end of the string.</p><p>
</p><p>If you want to have an actual backslash in the string, escape it with another backslash.</p><p>
</p>
</td><td>
<p>
<code class="literal">&gt; var s = 'I don't know';</code>: This is an error because JavaScript thinks the string is <code class="literal">I don</code> and the rest is invalid code. The following codes are valid:
</p><pre class="programlisting">&gt; var s = 'I don't know';   &#13;
&gt; var s = "I don't know";   &#13;
&gt; var s = "I don't know";   &#13;
&gt; var s = '"Hello",   he said.';   &#13;
&gt; var s = ""Hello",   he said.";   &#13;
Escaping the escape:   &#13;
&gt; var s = "1\\2"; s;   &#13;
"1\2"   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">\n</code>
</p>
</td><td>
<p>End of line.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; var s = '\n1\n2\n3\n';   &#13;
&gt; s;   &#13;
"   &#13;
1   &#13;
2   &#13;
3   &#13;
"   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">\r</code>
</p>
</td><td>
<p>Carriage return.</p>
</td><td>
<p>Consider the following statements:
</p><pre class="programlisting">&gt; var s = '1\r2';   &#13;
&gt; var s = '1\n\r2';   &#13;
&gt; var s = '1\r\n2';   &#13;
</pre><p>
</p><p>The result of all of these is as follows:</p><p>
</p><pre class="programlisting">&gt; s;   &#13;
"1   &#13;
2"   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">\t</code>
</p>
</td><td>
<p>Tab.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; var s = "1\t2";   &#13;
&gt; s;   &#13;
"1 2"   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">\u</code>
</p>
</td><td>
<p>The <code class="literal">\u</code> followed by a character code allows you to use Unicode.</p>
</td><td>
<p>Here's my name in Bulgarian written with Cyrillic characters:
</p><pre class="programlisting">&gt; "\u0421\u0442\u043E\u044F\u043D";   &#13;
"Стoян"   &#13;
</pre><p>
</p>
</td></tr></tbody></table></div><p>There are also additional characters that are rarely used: <code class="literal">\b</code> (backspace), <code class="literal">\v</code> (vertical tab), and <code class="literal">\f</code> (form feed).</p></div><div class="section" title="String template literals"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec7"/>String template literals</h3></div></div></div><p>ES6 introduced template literals. If you are familiar with other programming languages, Perl and Python have supported template literals for a while now. Template literals allow expressions to be embedded within regular strings. ES6 has two kinds of literals: template literals and tagged literals.</p><p>Template literals are single or multiple line strings with embedded expressions. For example, you must have done something similar to this:</p><pre class="programlisting">    var log_level="debug"; &#13;
    var log_message="meltdown"; &#13;
    console.log("Log level: "+ log_level + &#13;
      " - message : " + log_message); &#13;
    //Log level: debug - message : meltdown &#13;
</pre><p>You can accomplish the same using template literals, as follows:</p><pre class="programlisting">    console.log(`Log level: ${log_level} - message: ${log_message}`) &#13;
</pre><p>Template literals are enclosed by the back-tick (<code class="literal">``</code>) (grave accent) character instead of the usual double or single quotes. Template literal place holders are indicated by the dollar sign and curly braces (<code class="literal">${expression}</code>). By default, they are concatenated to form a single string. The following example shows a template literal with a slightly complex expression:</p><pre class="programlisting">    var a = 10; &#13;
    var b = 10; &#13;
    console.log(`Sum is ${a + b} and Multiplication would be ${a * b}.`);   &#13;
    //Sum is 20 and Multiplication would be 100. &#13;
</pre><p>How about embedding a function call?</p><pre class="programlisting">    var a = 10; &#13;
    var b = 10; &#13;
    function sum(x,y){ &#13;
      return x+y &#13;
    } &#13;
    function multi(x,y){ &#13;
      return x*y &#13;
    } &#13;
    console.log(`Sum is ${sum(a,b)} and Multiplication &#13;
      would be ${multi(a,b)}.`); &#13;
</pre><p>Template literals also simplify multiline string syntax. Instead of writing the following line of code:</p><pre class="programlisting">    console.log("This is line one \n" + "and this is line two"); &#13;
</pre><p>You can have a much cleaner syntax using template literals, which is as follows:</p><pre class="programlisting">    console.log(`This is line one and this is line two`); &#13;
</pre><p>ES6 has another interesting literal type called <span class="strong"><strong>Tagged Template Literals</strong></span>. Tagged templates allow you to modify the output of template literals using a function. If you prefix an expression to a template literal, that prefix is considered to be a function to be invoked. The function needs to be defined before we can use the tagged template literal. For example, the following expression:</p><pre class="programlisting">    transform`Name is ${lastname}, ${firstname} ${lastname}` &#13;
</pre><p>The preceding expression is converted into a function call:</p><pre class="programlisting">    transform([["Name is ", ", ", " "],firstname, lastname) &#13;
</pre><p>The tag function, 'transform', gets two parameters-template strings like <code class="literal">Name is</code> and substitutions defined by <code class="literal">${}</code>. The substitutions are only known at runtime. Let's expand the <code class="literal">transform</code> function:</p><pre class="programlisting">    function transform(strings, ...substitutes){ &#13;
      console.log(strings[0]); //"Name is" &#13;
      console.log(substitutes[0]); //Bond &#13;
    }   &#13;
    var firstname = "James"; &#13;
    var lastname = "Bond" &#13;
    transform`Name is ${lastname}, ${firstname} ${lastname}` &#13;
</pre><p>When template strings (<code class="literal">Name is</code>) are passed to the tag function, there are two forms of each template string, as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The raw form where the backslashes are not interpreted</li><li class="listitem" style="list-style-type: disc">The cooked form where the backslashes has special meaning</li></ul></div><p>You can access the raw string form using raw property, as the following example shows:</p><pre class="programlisting">    function rawTag(strings,...substitutes){ &#13;
      console.log(strings.raw[0]) &#13;
    } &#13;
    rawTag`This is a raw text and \n are not treated differently` &#13;
    //This is a raw text and \n are not treated differently &#13;
</pre></div></div><div class="section" title="Booleans"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec25"/>Booleans</h2></div></div></div><p>There are only two values that belong to the Boolean data type-the <code class="literal">true</code> and <code class="literal">false</code> values used without quotes:</p><pre class="programlisting">    &gt; var b = true;  &#13;
    &gt; typeof b; &#13;
    "boolean" &#13;
    &gt; var b = false;  &#13;
    &gt; typeof b; &#13;
    "boolean" &#13;
</pre><p>If you quote <code class="literal">true</code> or <code class="literal">false</code>, they become strings, as shown in the following example:</p><pre class="programlisting">    &gt; var b = "true";  &#13;
    &gt; typeof b; &#13;
    "string" &#13;
</pre><div class="section" title="Logical operators"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec8"/>Logical operators</h3></div></div></div><p>There are three operators, called logical operators, that work with Boolean values. These are as follows:</p><pre class="programlisting">    ! - logical NOT (negation) &#13;
    &amp;&amp; - logical AND &#13;
    || - logical OR &#13;
</pre><p>You know that when something is not true, it must be false. Here's how this is expressed using JavaScript and the logical <code class="literal">!</code> operator:</p><pre class="programlisting">    &gt; var b = !true; &#13;
    &gt; b; &#13;
    false &#13;
</pre><p>If you use the logical <code class="literal">NOT</code> twice, you will get the original value, which is as follows:</p><pre class="programlisting">    &gt; var b = !!true; &#13;
    &gt; b; &#13;
    true &#13;
</pre><p>If you use a logical operator on a non-Boolean value, the value is converted to Boolean behind the scenes, as follows:</p><pre class="programlisting">    &gt; var b = "one"; &#13;
    &gt; !b; &#13;
    false &#13;
</pre><p>In the preceding case, the string value <code class="literal">"one"</code> is converted to a Boolean, <code class="literal">true</code>, and then negated. The result of negating <code class="literal">true</code> is <code class="literal">false</code>. In the following example, there's a double negation, so the result is <code class="literal">true</code>:</p><pre class="programlisting">    &gt; var b = "one"; &#13;
    &gt; !!b; &#13;
    true &#13;
</pre><p>You can convert any value to its Boolean equivalent using a double negation. Understanding how any value converts to a Boolean is important. Most values convert to <code class="literal">true</code> with the exception of the following, which convert to <code class="literal">false</code>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The empty string <code class="literal">""</code></li><li class="listitem" style="list-style-type: disc">null</li><li class="listitem" style="list-style-type: disc">undefined</li><li class="listitem" style="list-style-type: disc">The number <code class="literal">0</code></li><li class="listitem" style="list-style-type: disc">The number <code class="literal">NaN</code></li><li class="listitem" style="list-style-type: disc">The Boolean <code class="literal">false</code></li></ul></div><p>These six values are referred to as falsy, while all others are truthy, (including, for example, the strings <code class="literal">"0"</code>, <code class="literal">" "</code>, and <code class="literal">"false"</code>).</p><p>Let's see some examples of the other two operators-the logical <code class="literal">AND</code> (<code class="literal">&amp;&amp;</code>) and the logical <code class="literal">OR</code> (<code class="literal">||</code>). When you use <code class="literal">&amp;&amp;</code>, the result is <code class="literal">true</code> only if all of the operands are <code class="literal">true</code>. When you use <code class="literal">||</code>, the result is <code class="literal">true</code> if at least one of the operands is <code class="literal">true</code>:</p><pre class="programlisting">    &gt; var b1 = true, b2 = false; &#13;
    &gt; b1 || b2; &#13;
    true &#13;
    &gt; b1 &amp;&amp; b2; &#13;
    false &#13;
</pre><p>Here's a list of the possible operations and their results:</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Operation</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Result</strong></span>
</p>
</td></tr><tr><td>
<p>
<code class="literal">true &amp;&amp; true</code>
</p>
</td><td>
<p>
<code class="literal">true</code>
</p>
</td></tr><tr><td>
<p>
<code class="literal">true &amp;&amp; false</code>
</p>
</td><td>
<p>
<code class="literal">false</code>
</p>
</td></tr><tr><td>
<p>
<code class="literal">false &amp;&amp; true</code>
</p>
</td><td>
<p>
<code class="literal">false</code>
</p>
</td></tr><tr><td>
<p>
<code class="literal">false &amp;&amp; false</code>
</p>
</td><td>
<p>
<code class="literal">false</code>
</p>
</td></tr><tr><td>
<p>
<code class="literal">true || true</code>
</p>
</td><td>
<p>
<code class="literal">true</code>
</p>
</td></tr><tr><td>
<p>
<code class="literal">true || false</code>
</p>
</td><td>
<p>
<code class="literal">true</code>
</p>
</td></tr><tr><td>
<p>
<code class="literal">false || true</code>
</p>
</td><td>
<p>
<code class="literal">true</code>
</p>
</td></tr><tr><td>
<p>
<code class="literal">false || false</code>
</p>
</td><td>
<p>
<code class="literal">false</code>
</p>
</td></tr></tbody></table></div><p>You can use several logical operations one after the other, as follows:</p><pre class="programlisting">    &gt; true &amp;&amp; true &amp;&amp; false &amp;&amp; true; &#13;
    false &#13;
    &gt; false || true || false; &#13;
    true &#13;
</pre><p>You can also mix <code class="literal">&amp;&amp;</code> and <code class="literal">||</code> in the same expression. In such cases, you should use parentheses to clarify how you intend the operation to work. Consider the following example:</p><pre class="programlisting">    &gt; false &amp;&amp; false || true &amp;&amp; true; &#13;
    true &#13;
    &gt; false &amp;&amp; (false || true) &amp;&amp; true; &#13;
    false &#13;
</pre></div><div class="section" title="Operator precedence"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec9"/>Operator precedence</h3></div></div></div><p>You might wonder why the previous expression (<code class="literal">false &amp;&amp; false || true &amp;&amp; true</code>) returned <code class="literal">true</code>. The answer lies in the operator precedence, as you know from mathematics:</p><pre class="programlisting">    &gt; 1 + 2 * 3; &#13;
    7 &#13;
</pre><p>This is because multiplication has a higher precedence over addition, so <code class="literal">2 * 3</code> is evaluated first, as if you typed:</p><pre class="programlisting">    &gt; 1 + (2 * 3); &#13;
    7 &#13;
</pre><p>Similarly for logical operations, <code class="literal">!</code> has the highest precedence and is executed first, assuming there are no parentheses that demand otherwise. Then, in the order of precedence, comes <code class="literal">&amp;&amp;</code> and finally, <code class="literal">||</code>. In other words, the following two code snippets are the same. The first one is as follows:</p><pre class="programlisting">    &gt; false &amp;&amp; false || true &amp;&amp; true; &#13;
    true &#13;
</pre><p>And the second one is as follows:</p><pre class="programlisting">    &gt; (false &amp;&amp; false) || (true &amp;&amp; true); &#13;
    true &#13;
</pre><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note6"/>Note</h3><p>
<span class="strong"><strong>Best practice</strong></span></p><p>Use parentheses instead of relying on operator precedence. This makes your code easier to read and understand.</p></div></div><p>The ECMAScript standard defines the precedence of operators. While it may be a good memorization exercise, this book doesn't offer it. First of all, you'll forget it, and second, even if you manage to remember it, you shouldn't rely on it. The person reading and maintaining your code will likely be confused.</p></div><div class="section" title="Lazy evaluation"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec10"/>Lazy evaluation</h3></div></div></div><p>If you have several logical operations one after the other, but the result becomes clear at some point before the end, the final operations will not be performed because they don't affect the end result. Consider the following line of code as an example:</p><pre class="programlisting">    &gt; true || false || true || false || true; &#13;
    true &#13;
</pre><p>As these are all <code class="literal">OR</code> operations and have the same precedence, the result will be <code class="literal">true</code> if at least, one of the operands is <code class="literal">true</code>. After the first operand is evaluated, it becomes clear that the result will be <code class="literal">true</code>, no matter what values follow. So, the JavaScript engine decides to be lazy (OK, efficient) and avoids unnecessary work by evaluating code that doesn't affect the end result. You can verify this short-circuiting behavior by experimenting in the console, as shown in the following code block:</p><pre class="programlisting">    &gt; var b = 5; &#13;
    &gt; true || (b = 6); &#13;
    true &#13;
    &gt; b; &#13;
    5 &#13;
    &gt; true &amp;&amp; (b = 6); &#13;
    6 &#13;
    &gt; b; &#13;
    6 &#13;
</pre><p>This example also shows another interesting behavior-if JavaScript encounters a non-Boolean expression as an operand in a logical operation, the non-Boolean is returned as a result:</p><pre class="programlisting">    &gt; true || "something"; &#13;
    true &#13;
    &gt; true &amp;&amp; "something"; &#13;
    "something" &#13;
    &gt; true &amp;&amp; "something" &amp;&amp; true; &#13;
    true &#13;
</pre><p>This behavior is not something you should rely on because it makes the code harder to understand. It's common to use this behavior to define variables when you're not sure whether they were previously defined. In the next example, if the <code class="literal">mynumber</code> variable is defined, its value is kept; otherwise, it's initialized with the value <code class="literal">10</code>:</p><pre class="programlisting">    &gt; var mynumber = mynumber || 10; &#13;
    &gt; mynumber; &#13;
    10 &#13;
</pre><p>This is simple and looks elegant, but be aware that it's not completely foolproof. If <code class="literal">mynumber</code> is defined and initialized to <code class="literal">0</code>, or to any of the six falsy values, this code might not behave as you expect, as shown in the following piece of code:</p><pre class="programlisting">    &gt; var mynumber = 0; &#13;
    &gt; var mynumber = mynumber || 10; &#13;
    &gt; mynumber; &#13;
    10 &#13;
</pre></div><div class="section" title="Comparison"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec11"/>Comparison</h3></div></div></div><p>There's another set of operators that all return a Boolean value as a result of the operation. These are the comparison operators. The following table lists them together with example uses:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Operator symbol</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Description</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Example</strong></span>
</p>
</td></tr><tr><td>
<p>
<code class="literal">==</code>
</p>
</td><td>
<p>
<span class="strong"><strong>Equality comparison</strong></span>: This returns <code class="literal">true</code> when both operands are equal. The operands are converted to the same type before being compared. They're also called loose comparison.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 == 1;   &#13;
true   &#13;
&gt; 1 == 2;   &#13;
false   &#13;
&gt; 1 =='1';   &#13;
true   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">===</code>
</p>
</td><td>
<p>
<span class="strong"><strong>Equality and type comparison</strong></span>: This returns <code class="literal">true</code> if both operands are equal and of the same type. It's better and safer to compare this way because there's no behind-the-scenes type conversions. It is also called strict comparison.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 === '1';   &#13;
false   &#13;
&gt; 1 === 1;   &#13;
true   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">!=</code>
</p>
</td><td>
<p>
<span class="strong"><strong>Non-equality comparison</strong></span>: This returns <code class="literal">true</code> if the operands are not equal to each other (after a type conversion).</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 != 1;   &#13;
false   &#13;
&gt; 1 != '1';   &#13;
false   &#13;
&gt; 1 != '2';   &#13;
true   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">!==</code>
</p>
</td><td>
<p>
<span class="strong"><strong>Non-equality comparison without type conversion</strong></span>: Returns <code class="literal">true</code> if the operands are not equal or if they are of different types.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 !== 1;   &#13;
false   &#13;
&gt; 1 !== '1';   &#13;
true   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">&gt;</code>
</p>
</td><td>
<p>This returns <code class="literal">true</code> if the left operand is greater than the right one.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 &gt; 1;   &#13;
false   &#13;
&gt; 33 &gt; 22;   &#13;
true   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">&gt;=</code>
</p>
</td><td>
<p>This returns <code class="literal">true</code> if the left operand is greater than or equal to the right one.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 &gt;= 1;   &#13;
true   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">&lt;</code>
</p>
</td><td>
<p>This returns <code class="literal">true</code> if the left operand is less than the right one.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 &lt; 1;   &#13;
false   &#13;
&gt; 1 &lt; 2;   &#13;
true   &#13;
</pre><p>
</p>
</td></tr><tr><td>
<p>
<code class="literal">&lt;=</code>
</p>
</td><td>
<p>This returns <code class="literal">true</code> if the left operand is less than or equal to the right one.</p>
</td><td>
<p>
</p><pre class="programlisting">&gt; 1 &lt;= 1;   &#13;
true   &#13;
&gt; 1 &lt;= 2;   &#13;
true   &#13;
</pre><p>
</p>
</td></tr></tbody></table></div><p>Note that <code class="literal">NaN</code> is not equal to anything, not even itself. Take a look at the following line of code:</p><pre class="programlisting">    &gt; NaN == NaN; &#13;
    false &#13;
</pre></div></div><div class="section" title="Undefined and null"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec26"/>Undefined and null</h2></div></div></div><p>If you try to use a non-existing variable, you'll get the following error:</p><pre class="programlisting">    &gt; foo; &#13;
    ReferenceError: foo is not defined &#13;
</pre><p>Using the <code class="literal">typeof</code> operator on a non-existing variable is not an error. You will get the <code class="literal">"undefined"</code> string back, as follows:</p><pre class="programlisting">    &gt; typeof foo; &#13;
    "undefined" &#13;
</pre><p>If you declare a variable without giving it a value, this is, of course, not an error. But, the <code class="literal">typeof</code> still returns <code class="literal">"undefined"</code>:</p><pre class="programlisting">    &gt; var somevar; &#13;
    &gt; somevar; &#13;
    &gt; typeof somevar; &#13;
    "undefined" &#13;
</pre><p>This is because, when you declare a variable without initializing it, JavaScript automatically initializes it with the <code class="literal">undefined</code> value, as shown in the following lines of code:</p><pre class="programlisting">    &gt; var somevar; &#13;
    &gt; somevar === undefined; &#13;
    true &#13;
</pre><p>The <code class="literal">null</code> value, on the other hand, is not assigned by JavaScript behind the scenes; it's assigned by your code, which is as follows:</p><pre class="programlisting">    &gt; var somevar = null; &#13;
    null &#13;
    &gt; somevar; &#13;
    null &#13;
    &gt; typeof somevar; &#13;
    "object" &#13;
</pre><p>Although the difference between <code class="literal">null</code> and <code class="literal">undefined</code> is small, it can be critical at times. For example, if you attempt an arithmetic operation, you will get different results:</p><pre class="programlisting">    &gt; var i = 1 + undefined; &#13;
    &gt; i; &#13;
    NaN &#13;
    &gt; var i = 1 + null; &#13;
    &gt; i; &#13;
    1 &#13;
</pre><p>This is because of the different ways <code class="literal">null</code> and <code class="literal">undefined</code> are converted to the other primitive types. The following examples show the possible conversions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Conversion to a number:<pre class="programlisting">        &gt; 1 * undefined; &#13;
</pre></li><li class="listitem" style="list-style-type: disc">Conversion to NaN:<pre class="programlisting">        &gt; 1 * null; &#13;
        0 &#13;
</pre></li><li class="listitem" style="list-style-type: disc">Conversion to a Boolean:<pre class="programlisting">        &gt; !!undefined; &#13;
        false &#13;
        &gt; !!null; &#13;
        false &#13;
</pre></li><li class="listitem" style="list-style-type: disc">Conversion to a string:<pre class="programlisting">        &gt; "value: " + null; &#13;
        "value: null" &#13;
        &gt; "value: " + undefined; &#13;
        "value: undefined" &#13;
</pre></li></ul></div></div><div class="section" title="Symbols"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec27"/>Symbols</h2></div></div></div><p>ES6 introduced a new primitive type-symbols. Several languages have a similar notion. Symbols look very similar to regular strings, but they are very different. Let's see how these symbols are created:</p><pre class="programlisting">    var atom = Symbol() &#13;
</pre><p>Notice that we don't use <code class="literal">new</code> operator while creating symbols. You will get an error when you do use it:</p><pre class="programlisting">    var atom = new Symbol() //Symbol is not a constructor &#13;
</pre><p>You can describe <code class="literal">Symbol</code> as well:</p><pre class="programlisting">    var atom = Symbol('atomic symbol') &#13;
</pre><p>Describing symbols comes in very handy while debugging large programs where there are lots of symbols scattered across.</p><p>The most important property of <code class="literal">Symbol</code> (and hence the reason of their existence) is that they are unique and immutable:</p><pre class="programlisting">    console.log(Symbol() === Symbol()) //false &#13;
    console.log(Symbol('atom') === Symbol('atom')) // false &#13;
</pre><p>For now, we will have to pause this discussion on symbols. Symbols are used as property keys and places where you need unique identifiers. We will discuss symbols in a later part of this book.</p></div></div>
<div class="section" title="Primitive data types recap"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Primitive data types recap</h1></div></div></div><p>Let's quickly summarize some of the main points discussed so far:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">There are five primitive data types in JavaScript:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Number</li><li class="listitem" style="list-style-type: disc">String</li><li class="listitem" style="list-style-type: disc">Boolean</li><li class="listitem" style="list-style-type: disc">Undefined</li><li class="listitem" style="list-style-type: disc">Null </li></ul></div><p>
</p></li><li class="listitem" style="list-style-type: disc">Everything that is not a primitive data type is an object.<p>The primitive number data type can store positive and negative integers or floats, hexadecimal numbers, octal numbers, exponents, and the special numbers-<code class="literal">NaN</code>, <code class="literal">Infinity</code>, and <code class="literal">-Infinity</code>.</p></li><li class="listitem" style="list-style-type: disc">The string data type contains characters in quotes. Template literals allow embedding of expressions inside a string.</li><li class="listitem" style="list-style-type: disc">The only values of the Boolean data type are <code class="literal">true</code> and <code class="literal">false</code>.</li><li class="listitem" style="list-style-type: disc">The only value of the null data type is the <code class="literal">null</code> value.</li><li class="listitem" style="list-style-type: disc">The only value of the undefined data type is the <code class="literal">undefined</code> value.</li><li class="listitem" style="list-style-type: disc">All values become <code class="literal">true</code> when converted to a Boolean, with the exception of the following six falsy values:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">""</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">null</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">undefined</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">0</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">NaN</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">false</code></li></ul></div><p>
</p></li></ul></div></div>
<div class="section" title="Arrays"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Arrays</h1></div></div></div><p>Now that you know about the basic primitive data types in JavaScript, it's time to move to a more powerful data structure-the array.</p><p>So, what is an array? It's simply a list (a sequence) of values. Instead of using one variable to store one value, you can use one array variable to store any number of values as elements of the array.</p><p>To declare a variable that contains an empty array, you can use square brackets with nothing between them, as shown in the following line of code:</p><pre class="programlisting">    &gt; var a = []; &#13;
</pre><p>To define an array that has three elements, you can write the following line of code:</p><pre class="programlisting">    &gt; var a = [1, 2, 3]; &#13;
</pre><p>When you simply type the name of the array in the console, you can get the contents of your array:</p><pre class="programlisting">    &gt; a; &#13;
    [1, 2, 3] &#13;
</pre><p>Now the question is how to access the values stored in these array elements. The elements contained in an array are indexed with consecutive numbers, starting from zero. The first element has index (or position) 0, the second has index 1, and so on. Here's the three-element array from the previous example:</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Index</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Value</strong></span>
</p>
</td></tr><tr><td>
<p>0</p>
</td><td>
<p>1</p>
</td></tr><tr><td>
<p>1</p>
</td><td>
<p>2</p>
</td></tr><tr><td>
<p>2</p>
</td><td>
<p>3</p>
</td></tr></tbody></table></div><p>To access an array element, you can specify the index of that element inside square brackets. So, <code class="literal">a[0]</code> gives you the first element of the array <code class="literal">a</code>, <code class="literal">a[1]</code> gives you the second, and so on, as shown in the following example:</p><pre class="programlisting">    &gt; a[0]; &#13;
    1 &#13;
    &gt; a[1]; &#13;
    2 &#13;
</pre><div class="section" title="Adding/updating array elements"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec28"/>Adding/updating array elements</h2></div></div></div><p>Using the index, you can also update the values of the elements of the array. The next example updates the third element (index 2) and prints the contents of the new array, as follows:</p><pre class="programlisting">    &gt; a[2] = 'three'; &#13;
    "three" &#13;
    &gt; a; &#13;
    [1, 2, "three"] &#13;
</pre><p>You can add more elements by addressing an index that didn't exist before, as shown in the following lines of code:</p><pre class="programlisting">    &gt; a[3] = 'four'; &#13;
    "four" &#13;
    &gt; a; &#13;
    [1, 2, "three", "four"] &#13;
</pre><p>If you add a new element but leave a gap in the array, those elements in between don't exist and return the <code class="literal">undefined</code> value if accessed. Check out the following example:</p><pre class="programlisting">    &gt; var a = [1, 2, 3]; &#13;
    &gt; a[6] = 'n`xew'; &#13;
    "new" &#13;
    &gt; a; &#13;
    [1, 2, 3, undefined x 3, "new"] &#13;
</pre></div><div class="section" title="Deleting elements"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec29"/>Deleting elements</h2></div></div></div><p>To delete an element, you can use the <code class="literal">delete</code> operator. However, after the deletion, the length of the array does not change. In a sense, you may get a hole in the array:</p><pre class="programlisting">    &gt; var a = [1, 2, 3]; &#13;
    &gt; delete a[1]; &#13;
    true &#13;
    &gt; a; &#13;
    [1, undefined, 3] &#13;
    &gt; typeof a[1]; &#13;
    "undefined" &#13;
</pre></div><div class="section" title="Arrays of arrays"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec30"/>Arrays of arrays</h2></div></div></div><p>Arrays can contain all types of values, including other arrays:</p><pre class="programlisting">    &gt; var a = [1, "two", false, null, undefined]; &#13;
    &gt; a; &#13;
    [1, "two", false, null, undefined] &#13;
    &gt; a[5] = [1, 2, 3]; &#13;
    [1, 2, 3] &#13;
    &gt; a; &#13;
    [1, "two", false, null, undefined, Array[3]] &#13;
</pre><p>The <code class="literal">Array[3]</code> in the result is clickable in the console and it expands the array values. Let's look at an example where you have an array of two elements, both of them being other arrays:</p><pre class="programlisting">    &gt; var a = [[1, 2, 3], [4, 5, 6]]; &#13;
    &gt; a; &#13;
    [Array[3], Array[3]] &#13;
</pre><p>The first element of the array is <code class="literal">[0]</code>, and it's also an array:</p><pre class="programlisting">    &gt; a[0]; &#13;
    [1, 2, 3] &#13;
</pre><p>To access an element in the nested array, you can refer to the element index in another set of square brackets, as follows:</p><pre class="programlisting">    &gt; a[0][0]; &#13;
    1 &#13;
    &gt; a[1][2]; &#13;
    6 &#13;
</pre><p>Note that you can use the array notation to access individual characters inside a string, as shown in the following code block:</p><pre class="programlisting">    &gt; var s = 'one'; &#13;
    &gt; s[0]; &#13;
    "o" &#13;
    &gt; s[1]; &#13;
    "n" &#13;
    &gt; s[2]; &#13;
    "e" &#13;
</pre><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note7"/>Note</h3><p>Array access to strings was supported by many browsers for a while (not older IEs), but it was officially recognized only as late as ECMAScript 5.</p></div></div><p>There are more ways to have fun with arrays (and we get to those in <a class="link" href="ch04.html" title="Chapter 4. Objects">Chapter 4</a>, <span class="emphasis"><em>Objects</em></span>), but let's stop here for now, remembering the following points:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">An array is a data store</li><li class="listitem" style="list-style-type: disc">An array contains indexed elements</li><li class="listitem" style="list-style-type: disc">Indexes start from zero and increment by one for each element in the array</li><li class="listitem" style="list-style-type: disc">To access an element of an array, you can use its index in square brackets</li><li class="listitem" style="list-style-type: disc">An array can contain any type of data, including other arrays</li></ul></div></div></div>
<div class="section" title="Conditions and loops"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec19"/>Conditions and loops</h1></div></div></div><p>Conditions provide a simple but powerful way to control the flow of code execution. Loops allow you to perform repetitive operations with less code. Let's take a look at:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">if</code> conditions</li><li class="listitem" style="list-style-type: disc"><code class="literal">switch</code> statements</li><li class="listitem" style="list-style-type: disc"><code class="literal">while</code>, <code class="literal">do...while</code>, <code class="literal">for</code>, and <code class="literal">for...in</code> loops</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note8"/>Note</h3><p>The examples in the following sections require you to switch to the multiline Firebug console. Or, if you use the WebKit console, press <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>Enter</em></span> instead of <span class="emphasis"><em>Enter</em></span> to add a new line.</p></div></div><div class="section" title="Code blocks"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec31"/>Code blocks</h2></div></div></div><p>In the preceding examples, you saw the use of code blocks. Let's take a moment to clarify what a block of code is, because you will use blocks extensively when constructing conditions and loops.</p><p>A block of code consists of zero or more expressions enclosed in curly brackets, which is shown in the following lines of code:</p><pre class="programlisting">    { &#13;
      var a = 1; &#13;
      var b = 3; &#13;
    } &#13;
</pre><p>You can nest blocks within each other indefinitely, as shown in the following example:</p><pre class="programlisting">    { &#13;
      var a = 1; &#13;
      var b = 3; &#13;
      var c, d; &#13;
      { &#13;
        c = a + b; &#13;
        { &#13;
          d = a - b; &#13;
        } &#13;
      } &#13;
    } &#13;
</pre><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note9"/>Note</h3><p>
<span class="strong"><strong>Best practice tips</strong></span></p><p>Use end-of-line semicolons, as discussed previously in the chapter. Although the semicolon is optional when you have only one expression per line, it's good to develop the habit of using them. For best readability, the individual expressions inside a block should be placed one per line and separated by semicolons.</p><p>Indent any code placed within curly brackets. Some programmers like one tab indentation, some use four spaces, and some use two spaces. It really doesn't matter, as long as you're consistent. In the preceding example, the outer block is indented with two spaces, the code in the first nested block is indented with four spaces, and the innermost block is indented with six spaces.</p><p>Use curly brackets. When a block consists of only one expression, the curly brackets are optional, but for readability and maintainability, you should get into the habit of always using them, even when they're optional.</p></div></div><div class="section" title="The if condition"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec12"/>The if condition</h3></div></div></div><p>Here's a simple example of an <code class="literal">if</code> condition:</p><pre class="programlisting">    var result = '', a = 3; &#13;
    if (a &gt; 2) { &#13;
      result = 'a is greater than 2'; &#13;
    } &#13;
</pre><p>The parts of the <code class="literal">if</code> condition are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">if</code> statement</li><li class="listitem" style="list-style-type: disc">A condition in parentheses-<code class="literal">is a greater than 2</code>?</li><li class="listitem" style="list-style-type: disc">A block of code wrapped in <code class="literal">{}</code> that executes if the condition is satisfied</li></ul></div><p>The condition (the part in parentheses) always returns a Boolean value, and may also contain the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A logical operation-<code class="literal">!</code>, <code class="literal">&amp;&amp;</code>, or <code class="literal">||</code></li><li class="listitem" style="list-style-type: disc">A comparison, such as <code class="literal">===</code>, <code class="literal">!=</code>, <code class="literal">&gt;</code>, and so on</li><li class="listitem" style="list-style-type: disc">Any value or variable that can be converted to a Boolean</li><li class="listitem" style="list-style-type: disc">A combination of the above</li></ul></div></div><div class="section" title="The else clause"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec13"/>The else clause</h3></div></div></div><p>There can also be an optional else part of the <code class="literal">if</code> condition. The <code class="literal">else</code> statement is followed by a block of code that runs if the condition evaluates to <code class="literal">false</code>:</p><pre class="programlisting">    if (a &gt; 2) { &#13;
      result = 'a is greater than 2'; &#13;
    } else { &#13;
      result = 'a is NOT greater than 2'; &#13;
    } &#13;
</pre><p>In between the <code class="literal">if</code> and the <code class="literal">else</code> statements, there can also be an unlimited number of <code class="literal">else...if</code> conditions. Here's an example:</p><pre class="programlisting">    if (a &gt; 2 || a &lt; -2) { &#13;
      result = 'a is not between -2 and 2'; &#13;
    } else if (a === 0 &amp;&amp; b === 0) { &#13;
      result = 'both a and b are zeros'; &#13;
    } else if (a === b) { &#13;
      result = 'a and b are equal'; &#13;
    } else { &#13;
      result = 'I give up'; &#13;
    } &#13;
</pre><p>You can also nest conditions by putting new conditions within any of the blocks, as shown in the following piece of code:</p><pre class="programlisting">    if (a === 1) { &#13;
      if (b === 2) { &#13;
        result = 'a is 1 and b is 2'; &#13;
      } else { &#13;
        result = 'a is 1 but b is definitely not 2'; &#13;
     } &#13;
    } else { &#13;
      result = 'a is not 1, no idea about b'; &#13;
    } &#13;
</pre></div><div class="section" title="Checking if a variable exists"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec14"/>Checking if a variable exists</h3></div></div></div><p>Let's apply the new knowledge about conditions for something practical. It's often necessary to check whether a variable exists. The laziest way to do this is to simply put the variable in the condition part of the <code class="literal">if</code> statement, for example, <code class="literal">if (somevar) {...}</code>. But, this is not necessarily the best method. Let's take a look at an example that tests whether a variable called <code class="literal">somevar</code> exists, and if so, sets the <code class="literal">result</code> variable to <code class="literal">yes</code>:</p><pre class="programlisting">    &gt; var result = ''; &#13;
    &gt; if (somevar) {  &#13;
        result = 'yes';  &#13;
      } &#13;
    ReferenceError: somevar is not defined &#13;
    &gt; result;   &#13;
    "" &#13;
</pre><p>This code obviously works because the end result was not <code class="literal">yes</code>. But firstly, the code generated an error-<code class="literal">somevar</code> is not defined, and you don't want your code to behave like that. Secondly, just because <code class="literal">if (somevar)</code> returns <code class="literal">false</code>, it doesn't mean that <code class="literal">somevar</code> is not defined. It could be that <code class="literal">somevar</code> is defined and initialized but contains a falsy value like <code class="literal">false</code> or <code class="literal">0</code>.</p><p>A better way to check if a variable is defined is to use <code class="literal">typeof</code>:</p><pre class="programlisting">    &gt; var result = ""; &#13;
    &gt; if (typeof somevar !== "undefined") {  &#13;
        result = "yes";  &#13;
      } &#13;
    &gt; result; &#13;
    "" &#13;
</pre><p>The <code class="literal">typeof</code> operator always returns a string, and you can compare this string with the string <code class="literal">"undefined"</code>. Note that the <code class="literal">somevar</code> variable may have been declared but not assigned a value yet and you'll still get the same result. So, when testing with <code class="literal">typeof</code> like this, you're really testing whether the variable has any value other than the <code class="literal">undefined</code> value:</p><pre class="programlisting">    &gt; var somevar; &#13;
    &gt; if (typeof somevar !== "undefined") {  &#13;
        result = "yes";  &#13;
      } &#13;
    &gt; result; &#13;
    "" &#13;
    &gt; somevar = undefined; &#13;
    &gt; if (typeof somevar !== "undefined") {  &#13;
        result = "yes";  &#13;
      } &#13;
    &gt; result; &#13;
    "" &#13;
</pre><p>If a variable is defined and initialized with any value other than <code class="literal">undefined</code>, its type returned by <code class="literal">typeof</code> is no longer <code class="literal">"undefined"</code>, as shown in the following piece of code:</p><pre class="programlisting">    &gt; somevar = 123; &#13;
    &gt; if (typeof somevar !== "undefined") {  &#13;
        result = 'yes';  &#13;
      } &#13;
    &gt; result; &#13;
    "yes" &#13;
</pre></div><div class="section" title="Alternative if syntax"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec15"/>Alternative if syntax</h3></div></div></div><p>When you have a simple condition, you can consider using an alternative <code class="literal">if</code> syntax. Take a look at this:</p><pre class="programlisting">    var a = 1; &#13;
    var result = ''; &#13;
    if (a === 1) { &#13;
      result = "a is one"; &#13;
    } else { &#13;
      result = "a is not one"; &#13;
    } &#13;
</pre><p>You can also write this as:</p><pre class="programlisting">    &gt; var a = 1; &#13;
    &gt; var result = (a === 1) ? "a is one" : "a is not one"; &#13;
</pre><p>You should only use this syntax for simple conditions. Be careful not to abuse it, as it can easily make your code unreadable. Here's an example.</p><p>Let's say you want to make sure a number is within a certain range, say between <code class="literal">50</code> and <code class="literal">100</code>:</p><pre class="programlisting">    &gt; var a = 123; &#13;
    &gt; a = a &gt; 100 ? 100 : a &lt; 50 ? 50: a; &#13;
    &gt; a; &#13;
    100 &#13;
</pre><p>It may not be clear how this code works exactly because of the multiple ?. Adding parentheses makes it a little clearer, as shown in the following code block:</p><pre class="programlisting">    &gt; var a = 123; &#13;
    &gt; a = (a &gt; 100 ? 100 : a &lt; 50) ? 50 : a; &#13;
    &gt; a; &#13;
    50 &#13;
    &gt; var a = 123; &#13;
    &gt; a = a &gt; 100 ? 100 : (a &lt; 50 ? 50 : a); &#13;
    &gt; a; &#13;
    100 &#13;
</pre><p>
<code class="literal">?:</code> is called a ternary operator because it takes three operands.</p></div><div class="section" title="Switch"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec16"/>Switch</h3></div></div></div><p>If you find yourself using an <code class="literal">if</code> condition and having too many <code class="literal">else...if</code> parts, you can consider changing the <code class="literal">if</code> to a <code class="literal">switch</code>, as follows:</p><pre class="programlisting">    var a = '1', &#13;
        result = ''; &#13;
    switch (a) { &#13;
    case 1: &#13;
      result = 'Number 1'; &#13;
      break; &#13;
    case '1': &#13;
      result = 'String 1'; &#13;
      break; &#13;
    default: &#13;
      result = 'I don't know'; &#13;
      break; &#13;
    } &#13;
</pre><p>The result after executing this is <code class="literal">"String 1"</code>. Let's see what the parts of a <code class="literal">switch</code> are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">switch</code> statement.</li><li class="listitem" style="list-style-type: disc">An expression in parentheses. The expression most often contains a variable, but can be anything that returns a value.</li><li class="listitem" style="list-style-type: disc">A number of <code class="literal">case</code> blocks enclosed in curly brackets.</li><li class="listitem" style="list-style-type: disc">Each <code class="literal">case</code> statement is followed by an expression. The result of the expression is compared to the expression found after the <code class="literal">switch</code> statement. If the result of the comparison is <code class="literal">true</code>, the code that follows the colon after the <code class="literal">case</code> is executed.</li><li class="listitem" style="list-style-type: disc">There is an optional <code class="literal">break</code> statement to signal the end of the <code class="literal">case</code> block. If this <code class="literal">break</code> statement is reached, the <code class="literal">switch</code> statement is all done. Otherwise, if the <code class="literal">break</code> is missing, the program execution enters the next <code class="literal">case</code> block.</li><li class="listitem" style="list-style-type: disc">There's an optional default case marked with the <code class="literal">default</code> statement and followed by a block of code. The <code class="literal">default</code> case is executed if none of the previous cases evaluated to <code class="literal">true</code>.</li></ul></div><p>In other words, the step-by-step procedure to execute a <code class="literal">switch</code> statement is as follows:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Evaluate the <code class="literal">switch</code> expression found in parentheses; remember it.</li><li class="listitem">Move to the first case and compare its value with the one from Step 1.</li><li class="listitem">If the comparison in Step 2 returns <code class="literal">true</code>, execute the code in the <code class="literal">case</code> block.</li><li class="listitem">After the <code class="literal">case</code> block is executed, if there's a <code class="literal">break</code> statement at the end of it, exit <code class="literal">switch</code>.</li><li class="listitem">If there's no <code class="literal">break</code> or Step 2 returned <code class="literal">false</code>, move on to the next <code class="literal">case</code> block.</li><li class="listitem">Repeat steps 2 to 5.</li><li class="listitem">If you are still here (no exit in Step 4), execute the code following the <code class="literal">default</code> statement.</li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip10"/>Tip</h3><p>Indent the code that follows the case lines. You can also indent case from the switch, but that doesn't give you much in terms of readability.</p></div></div><div class="section" title="Don't forget to break"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec2"/>Don't forget to break</h4></div></div></div><p>Sometimes, you may want to omit the break intentionally, but that's rare. It's called a fall-through and should always be documented because it may look like an accidental omission. On the other hand, sometimes you may want to omit the whole code block following a case and have two cases sharing the same code. This is fine, but it doesn't change the rule that if there's code that follows a case statement, this code should end with a break. In terms of indentation, aligning the break with the case or with the code inside the case is a personal preference; again, being consistent is what matters.</p><p>Use the default case. This helps you make sure that you always have a meaningful result after the switch statement, even if none of the cases matches the value being switched.</p></div></div></div><div class="section" title="Loops"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec32"/>Loops</h2></div></div></div><p>The <code class="literal">if...else</code> and <code class="literal">switch</code> statements allow your code to take different paths, as if you're at a crossroad, and decide which way to go depending on a condition. Loops, on the other hand, allow your code to take a few roundabouts before merging back into the main road. How many repetitions? That depends on the result of evaluating a condition before (or after) each iteration.</p><p>Let's say you are (your program execution is) traveling from <span class="strong"><strong>A</strong></span> to <span class="strong"><strong>B</strong></span>. At some point, you will reach a place where you have to evaluate a condition, <span class="strong"><strong>C</strong></span>. The result of evaluating <span class="strong"><strong>C</strong></span> tells you whether you should go into a loop, <span class="strong"><strong>L</strong></span>. You make one iteration and arrive at <span class="strong"><strong>C</strong></span> again. Then, you evaluate the condition once again to see if another iteration is needed. Eventually, you move on your way to <span class="strong"><strong>B</strong></span>:</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_003.jpg" alt="Loops"/></div><p>
</p><p>An infinite loop is when the condition is always <code class="literal">true</code>, and your code gets stuck in the loop forever. This is, of course, a logical error, and you should look out for such scenarios.</p><p>In JavaScript, the following are the four types of loops:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">while</code> loops</li><li class="listitem" style="list-style-type: disc"><code class="literal">do-while</code> loops</li><li class="listitem" style="list-style-type: disc"><code class="literal">for</code> loops</li><li class="listitem" style="list-style-type: disc"><code class="literal">for-in</code> loops</li></ul></div><div class="section" title="While loops"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec17"/>While loops</h3></div></div></div><p>The <code class="literal">while</code> loops are the simplest type of iteration. They look like the following:</p><pre class="programlisting">    var i = 0; &#13;
    while (i &lt; 10) { &#13;
      i++; &#13;
    } &#13;
</pre><p>The <code class="literal">while</code> statement is followed by a condition in parentheses and a code block in curly brackets. As long as the condition evaluates to <code class="literal">true</code>, the code block is executed over and over again.</p></div><div class="section" title="Do-while loops"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec18"/>Do-while loops</h3></div></div></div><p>The <code class="literal">do...while</code> loops are a slight variation of <code class="literal">while</code> loops. An example is shown as follows:</p><pre class="programlisting">    var i = 0; &#13;
    do { &#13;
      i++; &#13;
    } while (i &lt; 10); &#13;
</pre><p>Here, the <code class="literal">do</code> statement is followed by a code block and a condition after the block. This means that the code block is always executed, at least once, before the condition is evaluated.</p><p>If you initialize <code class="literal">i</code> to <code class="literal">11</code> instead of <code class="literal">0</code> in the last two examples, the code block in the first example (the <code class="literal">while</code> loop) will not be executed, and <code class="literal">i</code> will still be <code class="literal">11</code> at the end, while in the second (the <code class="literal">do...while</code> loop), the code block will be executed once and <code class="literal">i</code> will become <code class="literal">12</code>.</p></div><div class="section" title="For loops"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec19"/>For loops</h3></div></div></div><p>The <code class="literal">for</code> loop is the most widely used type of loop, and you should make sure you're comfortable with this one. It requires just a little bit more in terms of syntax:</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_004.jpg" alt="For loops"/></div><p>
</p><p>In addition to the<span class="strong"><strong> C</strong></span> condition and the <span class="strong"><strong>L</strong></span> code block, you have the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Initialization</strong></span>: This is the code that is executed before you even enter the loop (marked with <span class="strong"><strong>0</strong></span> in the diagram)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Increment</strong></span>: This is the code that is executed after every iteration (marked with <span class="strong"><strong>++</strong></span> in the diagram)</li></ul></div><p>The following is the most widely used <code class="literal">for</code> loop pattern:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">In the initialization part, you can define a variable (or set the initial value of an existing variable), most often called <code class="literal">i</code></li><li class="listitem" style="list-style-type: disc">In the condition part, you can compare <code class="literal">i</code> to a boundary value, such as <code class="literal">i &lt; 100</code></li><li class="listitem" style="list-style-type: disc">In the increment part, you can increase <code class="literal">i</code> by <code class="literal">1</code>, such as <code class="literal">i++</code></li></ul></div><p>Here's an example:</p><pre class="programlisting">    var punishment = ''; &#13;
    for (var i = 0; i &lt; 100; i++) { &#13;
      punishment += 'I will never do this again, '; &#13;
    } &#13;
</pre><p>All three parts (initialization, condition, and increment) can contain multiple expressions separated by commas. Say you want to rewrite the example and define the variable <code class="literal">punishment</code> inside the initialization part of the loop:</p><pre class="programlisting">    for (var i = 0, punishment = ''; i &lt; 100; i++) { &#13;
      punishment += 'I will never do this again, '; &#13;
    } &#13;
</pre><p>Can you move the body of the loop inside the increment part? Yes, you can, especially as it's a one-liner. This gives you a loop that looks a little awkward, as it has no body. Note that this is just an intellectual exercise; it's not recommended that you write awkward-looking code:</p><pre class="programlisting">    for ( &#13;
      var i = 0, punishment = ''; &#13;
      i &lt; 100; &#13;
      i++, punishment += 'I will never do this again, ') { &#13;
 &#13;
      // nothing here &#13;
 &#13;
    } &#13;
</pre><p>These three parts are all optional. Here's another way of rewriting the same example:</p><pre class="programlisting">    var i = 0, punishment = ''; &#13;
    for (;;) { &#13;
      punishment += 'I will never do this again, '; &#13;
      if (++i == 100) { &#13;
        break; &#13;
      } &#13;
    } &#13;
</pre><p>Although the last rewrite works exactly the same way as the original, it's longer and harder to read. It's also possible to achieve the same result using a <code class="literal">while</code> loop. But, the <code class="literal">for</code> loops make the code tighter and more robust because the mere syntax of the <code class="literal">for</code> loop makes you think about the three parts (initialization, condition, and increment), and thus helps you reconfirm your logic and avoid situations such as being stuck in an infinite loop.</p><p>The <code class="literal">for</code> loops can be nested within each other. Here's an example of a loop that is nested inside another loop and assembles a string containing ten rows and ten columns of asterisks. Think of <code class="literal">i</code> being the row and <code class="literal">j</code> being the column of an image:</p><pre class="programlisting">    var res = '\n'; &#13;
    for (var i = 0; i &lt; 10; i++) { &#13;
      for (var j = 0; j &lt; 10; j++) { &#13;
        res += '* '; &#13;
      } &#13;
      res += '\n'; &#13;
    } &#13;
</pre><p>The result is a string, as shown here:</p><pre class="programlisting">    " &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    * * * * * * * * * *  &#13;
    " &#13;
</pre><p>Here's another example that uses nested loops and a modulo operation to draw a snowflake-like result:</p><pre class="programlisting">    var res = '\n', i, j; &#13;
    for (i = 1; i &lt;= 7; i++) { &#13;
      for (j = 1; j &lt;= 15; j++) { &#13;
        res += (i * j) % 8 ? ' ' : '*'; &#13;
      } &#13;
      res += '\n'; &#13;
    } &#13;
</pre><p>The result is as follows:</p><pre class="programlisting">    " &#13;
           *        &#13;
       *   *   *    &#13;
           *        &#13;
     * * * * * * *  &#13;
           *        &#13;
       *   *   *    &#13;
           *        &#13;
    " &#13;
</pre></div><div class="section" title="For...in loops"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec20"/>For...in loops</h3></div></div></div><p>The <code class="literal">for...in</code> loop is used to iterate over the elements of an array, or an object, as you'll see later. This is its only use; it cannot be used as a general-purpose repetition mechanism to replace <code class="literal">for</code> or <code class="literal">while</code>. Let's see an example of using a <code class="literal">for-in</code> to loop through the elements of an array. But, bear in mind that this is for informational purposes only, as <code class="literal">for...in</code> is mostly suitable for objects and the regular <code class="literal">for</code> loop should be used for arrays.</p><p>In this example, you can iterate over all of the elements of an array and print out the index (the key) and the value of each element, for example:</p><pre class="programlisting">    // example for information only &#13;
    // for-in loops are used for objects &#13;
    // regular for is better suited for arrays &#13;
 &#13;
    var a = ['a', 'b', 'c', 'x', 'y', 'z']; &#13;
 &#13;
    var result = '\n'; &#13;
 &#13;
    for (var i in a) { &#13;
      result += 'index: ' + i + ', value: ' + a[i] + '\n'; &#13;
    } &#13;
    The result is: &#13;
    " &#13;
    index: 0, value: a &#13;
    index: 1, value: b  &#13;
    index: 2, value: c  &#13;
    index: 3, value: x &#13;
    index: 4, value: y  &#13;
    index: 5, value: z &#13;
    " &#13;
</pre></div></div></div>
<div class="section" title="Comments"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec20"/>Comments</h1></div></div></div><p>One last thing for this chapter-comments. Inside your JavaScript program, you can put comments. These are ignored by the JavaScript engine and don't have any effect on how the program works. But they can be invaluable when you revisit your code after a few months, or transfer the code to someone else for maintenance.</p><p>The following two types of comments are allowed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Single line comments start with <code class="literal">//</code> and end at the end of the line.</li><li class="listitem" style="list-style-type: disc">Multiline comments start with <code class="literal">/*</code> and end with <code class="literal">*/</code> on the same line or any subsequent line. Note that any code in between the comment start and the comment end is ignored.</li></ul></div><p>Some examples are as follows:</p><pre class="programlisting">    // beginning of line &#13;
 &#13;
    var a = 1; // anywhere on the line &#13;
 &#13;
    /* multi-line comment on a single line */ &#13;
 &#13;
    /* &#13;
      comment that spans several lines &#13;
    */ &#13;
</pre><p>There are even utilities, such as JSDoc and YUIDoc, that can parse your code and extract meaningful documentation based on your comments.</p></div>
<div class="section" title="Exercises"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec21"/>Exercises</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">What is the result of executing each of these lines in the console? Why?<pre class="programlisting">        &gt; var a; typeof a; &#13;
        &gt; var s = '1s'; s++; &#13;
        &gt; !!"false"; &#13;
        &gt; !!undefined; &#13;
        &gt; typeof -Infinity; &#13;
        &gt; 10 % "0"; &#13;
        &gt; undefined == null; &#13;
        &gt; false === ""; &#13;
        &gt; typeof "2E+2"; &#13;
        &gt; a = 3e+3; a++; &#13;
</pre></li><li class="listitem">What is the value of v after the following?<pre class="programlisting">        &gt; var v = v || 10; &#13;
</pre><p>Experiment by first setting <code class="literal">v</code> to <code class="literal">100</code>, <code class="literal">0</code>, or <code class="literal">null</code>.</p></li><li class="listitem">Write a small program that prints out the multiplication table. Hint: use a loop nested inside another loop.</li></ol></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec22"/>Summary</h1></div></div></div><p>In this chapter, you learned a lot about the basic building blocks of a JavaScript program. Now you know the following primitive data types:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Number</li><li class="listitem" style="list-style-type: disc">String</li><li class="listitem" style="list-style-type: disc">Boolean</li><li class="listitem" style="list-style-type: disc">Undefined</li><li class="listitem" style="list-style-type: disc">Null</li></ul></div><p>You also know quite a few operators, which are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Arithmetic operators</strong></span>: <code class="literal">+</code>, <code class="literal">-</code>, <code class="literal">*</code>, <code class="literal">/</code>, and <code class="literal">%</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Increment operators</strong></span>: <code class="literal">++</code> and <code class="literal">-</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Assignment operators</strong></span>: <code class="literal">=</code>, <code class="literal">+=</code>, <code class="literal">-=</code>, <code class="literal">*=</code>, <code class="literal">/=</code>, and <code class="literal">%=</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Special operators</strong></span>: <code class="literal">typeof</code> and <code class="literal">delete</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Logical operators</strong></span>: <code class="literal">&amp;&amp;</code>, <code class="literal">||</code>, and <code class="literal">!</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Comparison operators</strong></span>: <code class="literal">==</code>, <code class="literal">===</code>, <code class="literal">!=</code>, <code class="literal">!==</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">&gt;=</code>, and <code class="literal">&lt;=</code></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>The ternary operator</strong></span>: <code class="literal">?</code></li></ul></div><p>Then you learned how to use arrays to store and access data, and finally you saw different ways to control the flow of your program using conditions (<code class="literal">if...else</code> or <code class="literal">switch</code>) and loops (<code class="literal">while</code>, <code class="literal">do...while</code>, <code class="literal">for</code>, and <code class="literal">for...in</code>).</p><p>This is quite a bit of information; give yourself a well-deserved pat on the back before diving into the next chapter. More fun is coming up!</p></div></body></html>