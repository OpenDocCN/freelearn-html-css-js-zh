<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06" class="calibre1"/>Chapter 6. Advanced Ionic Components</h1></div></div></div><p class="calibre10">In this chapter, we will extend the application we created in <a class="calibre1" title="Chapter 5. The London Tourist App" href="part0026_split_000.html#OPEK2-798adc86542b445d8a1bb648e10b6714">Chapter 5</a>, <em class="calibre14">The London Tourist App</em>. We are going to learn how to add some more complex features like the Ionic Popover and the Ionic Modal components to our current application. At the end of this chapter, we will have a popover menu and a modal window as part of our application.</p></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch06lvl1sec21" class="calibre1"/>The Ionic Popover</h1></div></div></div><p class="calibre10">The Ionic Popover<a id="id205" class="calibre1"/> component allows us to add a popover menu to our application. A popover menu is a contextual menu that is used to provide a hidden menu or extra menu options. It is normally used when we have limited space and want to present a list of options. Instead of cramming our limited available space, we create some sort of button so that, when clicked, the popover menu can pop up and show these menu items.</p><p class="calibre10">The following screenshot shows a good description of what a popover does in reality:</p><div><img src="img/00044.jpeg" alt="The Ionic Popover" class="calibre12"/></div><p class="calibre13"> </p></div></div>

<div><div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch06lvl2sec24" class="calibre1"/>Implementing the popover</h2></div></div></div><p class="calibre10">We are going to implement <a id="id206" class="calibre1"/>our popover in our already existing application. The first thing you should do is open your application, as you have left the London Tourist Application in the previous chapter. What we will be aiming to do is create a popover that has three extra options as a list. These three options are <strong class="calibre11">About</strong>, <strong class="calibre11">Help</strong> and <strong class="calibre11">Logout</strong>. These three options will not perform any action as we will only be placing them for the sake of example. The following screenshots show a sample of what we will be aiming to achieve.</p><div><ul class="itemizedlist"><li class="listitem">For iOS:<div><img src="img/00045.jpeg" alt="Implementing the popover" class="calibre12"/></div><p class="calibre25"> </p></li><li class="listitem">For <a id="id207" class="calibre1"/>Android:<div><img src="img/00046.jpeg" alt="Implementing the popover" class="calibre12"/></div><p class="calibre25"> </p></li></ul></div><p class="calibre10">To begin<a id="id208" class="calibre1"/> implementing our popover, open the <code class="email">playlists.html</code> file of your LTA application project. Remember that this <code class="email">playlists.html</code> file can be found by navigating to the <code class="email">www</code> folder and looking into the <code class="email">templates</code> folder within it. Here is the path: <code class="email">www/templates/playlists.html</code>.</p><p class="calibre10">Now, you should have a file that closely resembles the following code:</p><div><pre class="programlisting">&lt;ion-view view-title="London Sites"&gt;
  &lt;ion-content&gt;
    &lt;ion-list&gt;
      &lt;ion-item ng-repeat="site in sites"&gt;
        {{site.name}}
      &lt;/ion-item&gt;
    &lt;/ion-list&gt;
  &lt;/ion-content&gt;
&lt;/ion-view&gt;</pre></div><div><div><div><div><h3 class="title2"><a id="ch06lvl3sec19" class="calibre1"/>Adding the menu button</h3></div></div></div><p class="calibre10">The first thing we<a id="id209" class="calibre1"/> are going to do is add the menu button that we <a id="id210" class="calibre1"/>want to trigger for our popover. This menu will display the popover when tapped. The following code block represents the code for button icon of our popover:</p><div><pre class="programlisting">&lt;ion-nav-buttons side="right"&gt;
    &lt;button class="button button-clear icon ion-more"&gt;&lt;/button&gt;
&lt;/ion-nav-buttons&gt;</pre></div><p class="calibre10">You are to replicate the preceding code just after the opening <code class="email">&lt;ion-view&gt;</code> tag of your <code class="email">playlists.html</code> page. The preceding code is using the <code class="email">&lt;ion-nav-buttons&gt;</code> element to specify that we want to place a navigation button in our header. This element also has a <code class="email">side</code> attribute with<a id="id211" class="calibre1"/> the value <code class="email">right</code>. This <code class="email">side</code> attribute is there to tell the <code class="email">&lt;ion-nav-buttons&gt;</code> element which side of the page title to position itself. Within the <code class="email">&lt;ion-nav-buttons&gt;</code> element is a simple button with some ionic styles that ensure that the button has an icon (<code class="email">ion-more</code>) as our popover icon. If you have followed <a id="id212" class="calibre1"/>all the steps and replicated the code block correctly, your code should closely resemble the following code block:</p><div><pre class="programlisting">&lt;ion-view view-title="London Sites"&gt;

  &lt;ion-nav-buttons side="right"&gt;
    &lt;button class="button button-clear icon ion-more"&gt;&lt;/button&gt;
  &lt;/ion-nav-buttons&gt;

  &lt;ion-content&gt;
    &lt;ion-list&gt;
      &lt;ion-item ng-repeat="site in sites"&gt;
        {{site.name}}
      &lt;/ion-item&gt;
    &lt;/ion-list&gt;
  &lt;/ion-content&gt;
&lt;/ion-view&gt;</pre></div><p class="calibre10">At the moment, it is probably a good idea to test our application and see how our icon button looks. Fire up your application on a Chrome browser using the <code class="email">Ionic serve</code> technique as we have done in the past. Your screen should look close to what we have in the following screenshot.</p><div><h3 class="title2"><a id="tip10" class="calibre1"/>Tip</h3><p class="calibre10">If your title is centered to the left when using an Android emulator on Chrome, this is perfectly normal. The iOS equivalent will be centered.</p></div><div><img src="img/00047.jpeg" alt="Adding the menu button" class="calibre12"/></div><p class="calibre13"> </p></div><div><div><div><div><h3 class="title2"><a id="ch06lvl3sec20" class="calibre1"/>Coding the popover</h3></div></div></div><p class="calibre10">The next step is to write the actual logic for our popover menu. The first thing we need to do is go into <a id="id213" class="calibre1"/>our <code class="email">controller.js</code> file. This file can be found by looking in the following path from the root of your project:</p><div><pre class="programlisting">www/js/controller.js</pre></div><p class="calibre10">Within the <code class="email">controller.js</code> file, locate the <code class="email">PlaylistsCtrl</code> controller. It is within this controller that we will be implementing our popover, as it is the controller associated with our <code class="email">playlists.html</code>.</p></div><div><div><div><div><h3 class="title2"><a id="ch06lvl3sec21" class="calibre1"/>Adding the $ionicPopover service</h3></div></div></div><p class="calibre10">In order to use the Ionic <a id="id214" class="calibre1"/>Popover, Ionic has a special service called <code class="email">$ionicPopover</code> that makes this very easy. Add <code class="email">$ionicPopover</code> as a <a id="id215" class="calibre1"/>dependency by specifying it as a parameter on your <code class="email">PlaylistsCtrl</code> controller. If you have done this correctly, your <code class="email">PlaylistsCtrl</code> controller should now look similar to the following code:</p><div><pre class="programlisting">.controller('PlaylistsCtrl', function($scope, $http, $ionicPopover) {
      $scope.sites = [];
      $http.get('/sites.json')
          .then(function (response) {
            $scope.sites = response.data;
          });
})</pre></div><div><div><div><div><h4 class="title3"><a id="ch06lvl4sec18" class="calibre1"/>Finishing the popover code</h4></div></div></div><p class="calibre10">The next step is to write the<a id="id216" class="calibre1"/> actual code to create the popover using the <code class="email">$ionicPopover</code> service, as shown in the following code:</p><div><pre class="programlisting">$ionicPopover.fromTemplateUrl('templates/popover.html', {
        scope: $scope
      }).then(function(popover) {
        $scope.popover = popover;
      });

      $scope.openPopover = function($event) {
        $scope.popover.show($event);
      };</pre></div><p class="calibre10">The preceding code block uses the <code class="email">$ionicPopover</code> service to instantiate a new popover. We also use the <code class="email">.fromTemplateUrl</code> function of <code class="email">$ionicPopover</code> to create the popover. This function allows us to pass a URL for a file that contains the HTML for our popover. The <code class="email">.fromTemplateUrl</code> function also returns a promise which returns the instance of a popover created. We then bind this popover instance to our scope so that it is available for use in our view. There is, however, one small part that we have not done. We passed in a file path <code class="email">templates/popover.html</code> as the file which contains the code for our popover. However, this <code class="email">popover.html</code> file does not currently exist so we need to create it.</p></div></div><div><div><div><div><h3 class="title2"><a id="ch06lvl3sec22" class="calibre1"/>Creating the popover.html file</h3></div></div></div><p class="calibre10">To create <a id="id217" class="calibre1"/>our <code class="email">popover.html</code> file, create a new file called <a id="id218" class="calibre1"/>
<code class="email">popover.html</code> under the <code class="email">templates</code> folder. This <code class="email">templates</code> folder can be found under the <code class="email">www</code> folder located in the root directory of your project. Here is the path: <code class="email">www/templates/popover.html</code>.</p><p class="calibre10">Now that we have created this file, the next step is to populate this file. Remember that what we are trying to achieve is to have a list of menu items in <code class="email">popover.html</code>. We want these three options to be <strong class="calibre11">About</strong>, <strong class="calibre11">Help</strong>, and <strong class="calibre11">Logout</strong> to mimic a fake set of popover options.</p><p class="calibre10">To start creating<a id="id219" class="calibre1"/> the content of our popover, replicate the following code block into your <code class="email">popover.html</code>:</p><div><pre class="programlisting">&lt;ion-popover-view&gt;
    &lt;ion-content&gt;
        &lt;div class="list"&gt;
        &lt;b class="item" href="#"&gt;
            About
        &lt;/b&gt;
        &lt;b class="item" href="#"&gt;
            Help
        &lt;/b&gt;
        &lt;b class="item" href="#"&gt;
            Logout
        &lt;/b&gt;
    &lt;/div&gt;
    &lt;/ion-content&gt;
&lt;/ion-popover-view&gt;</pre></div><p class="calibre10">If you have done this, you<a id="id220" class="calibre1"/> have completed implementing the template of your popover. Now, let's understand what the HTML code we just implemented on our <code class="email">popover.html</code> file does. The <code class="email">&lt;ion-popover-view&gt;</code> element is an element that is essential for indicating that this particular view is a popover. It also contains an <code class="email">&lt;ion-content&gt;</code> element which is a container for all the visible parts of our view, or popover in this case. We then put a <code class="email">div</code> tag with a class <code class="email">list</code> which is one of the Ionic's built-in classes. Within this <code class="email">div</code>, there are three HTML bold tags that represent our three fake options. That is all we need to complete the implementation for our template. The final step is to wire our popover to ensure it works as it should.</p></div><div><div><div><div><h3 class="title2"><a id="ch06lvl3sec23" class="calibre1"/>Wiring up the popover</h3></div></div></div><p class="calibre10">This is the final <a id="id221" class="calibre1"/>step to get our popover to work. Remember that we created a function on our <code class="email">PlayListsCtrl</code> controller called <code class="email">openPopover()</code> which takes in a <code class="email">$event</code> parameter. This function will initiate the popover when executed. We will also have to pass the <code class="email">$event</code> parameter, which is a reserved parameter that represents an event sent from the view.</p><p class="calibre10">To put this into action, we will first need to wire this <code class="email">openPopover()</code> function to be executed when the popover icon we created earlier is clicked. This popover button is in our <code class="email">playlists.html</code> file from earlier steps. Your current <code class="email">playlists.html</code> file should look close to what<a id="id222" class="calibre1"/> we have in the following code block:</p><div><pre class="programlisting">&lt;ion-view view-title="London Sites"&gt;

  &lt;ion-nav-buttons side="right"&gt;
    &lt;button class="button button-clear icon ion-more"&gt;&lt;/button&gt;
  &lt;/ion-nav-buttons&gt;

  &lt;ion-content&gt;
    &lt;ion-list&gt;
      &lt;ion-item ng-repeat="site in sites"&gt;
        {{site.name}}
      &lt;/ion-item&gt;
    &lt;/ion-list&gt;
  &lt;/ion-content&gt;
&lt;/ion-view&gt;</pre></div><p class="calibre10">What we need to do is add an Ionic tap event on the popover icon button that we created. We can do this with the Ionic provided attribute directive called <code class="email">on-tap</code>. This <code class="email">on-tap</code> attribute directive takes in a function which we want to be executed when the containing element is tapped. In our case, we want this function to be the <code class="email">openPopover</code> function. Right now our popover Icon button code looks as follows:</p><div><pre class="programlisting">&lt;ion-nav-buttons side="right"&gt;
    &lt;button class="button button-clear icon ion-more"&gt;&lt;/button&gt;
  &lt;/ion-nav-buttons&gt;</pre></div><p class="calibre10">Now, the code for the <code class="email">on-tap</code> ionic attribute directive for <code class="email">&lt;button&gt;</code> will look as follows:</p><div><pre class="programlisting">on-tap="openPopover($event)"</pre></div><p class="calibre10">You can see <code class="email">$event</code> being passed as a parameter. Remember that this is very important and must be passed exactly as that. The final code for your <code class="email">playlists.html</code> will look like the following code block:</p><div><pre class="programlisting">&lt;ion-view view-title="London Sites"&gt;

  &lt;ion-nav-buttons side="right"&gt;
    &lt;button class="button button-clear icon ion-more" on- tap="openPopover($event)"&gt;&lt;/button&gt;
  &lt;/ion-nav-buttons&gt;

  &lt;ion-content&gt;
    &lt;ion-list&gt;
      &lt;ion-item ng-repeat="site in sites"&gt;
        {{site.name}}
      &lt;/ion-item&gt;
    &lt;/ion-list&gt;
  &lt;/ion-content&gt;
&lt;/ion-view&gt;</pre></div><p class="calibre10">With that done, we have completely finished the implementation of our popover. Now, we can run it in our browser using the <code class="email">ionic serve</code> technique to see what it looks like.</p><p class="calibre10">If you correctly ran your app using the <code class="email">ionic serve</code> technique, you should see something that looks like the following screenshot when you click the popover icon button. The<a id="id223" class="calibre1"/> view will be different depending on whether you are testing with an Android or iOS emulator setting:</p><div><img src="img/00048.jpeg" alt="Wiring up the popover" class="calibre12"/></div><p class="calibre13"> </p><p class="calibre10">The popover is a great contextual menu tool for fitting extra menu options. It also has an automatic way of displaying a different version depending on what mobile operating system it is being displayed on. Now that we have learned how to use the Ionic Popover, let's learn to use the Ionic Modal.</p></div></div></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec22" class="calibre1"/>The Ionic Modal</h1></div></div></div><p class="calibre10">The Ionic Modal is a<a id="id224" class="calibre1"/> component feature that Ionic provides and is used to create a modal window in our application. A modal window is a view that pops up on an existing page without losing the context of your current action. As soon as it is dismissed, the previous view state is restored. It is a great tool for collecting extra information or displaying something on the screen without losing track of our current state.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch06lvl2sec25" class="calibre1"/>Creating the modal</h2></div></div></div><p class="calibre10">Ionic exposes the modal functionality<a id="id225" class="calibre1"/> via a service called the <code class="email">$ionicModal</code> service. This service provides us a way of creating a modal in our application. Before we begin implementing our modal, let's understand what we aim to do with the modal feature in our application.</p><p class="calibre10">We will still be using our LTA application and adding a modal. We want this modal to mimic a sample <strong class="calibre11">About</strong> page of our application which will have some small details about the app. Remember that we already have a button from the popover we created earlier which has a text labeled as <strong class="calibre11">About</strong>. We will wire this popover item to simply open the modal when tapped.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch06lvl2sec26" class="calibre1"/>Implementing the modal</h2></div></div></div><p class="calibre10">To begin implementing<a id="id226" class="calibre1"/> the modal, open your <code class="email">controller.js</code> file and locate the <code class="email">PlaylistsCtrl</code> controller. The first thing to do is add a dependency to the <code class="email">$ionicModal</code> service on the <code class="email">PlaylistsCtrl</code> controller. This is done by adding <code class="email">$ionicModal</code> as a parameter for the <code class="email">PlaylistsCtrl</code> controller function definition. Doing this correctly should make your <code class="email">PlaylistsCtrl</code> controller look like what we have in the following code block:</p><div><pre class="programlisting">.controller('PlaylistsCtrl', function($scope, $http, $ionicPopover, $ionicModal) {
      $scope.sites = [];
      $http.get('/sites.json')
          .then(function (response) {
            $scope.sites = response.data;
          });

      $ionicPopover.fromTemplateUrl('templates/popover.html', {
        scope: $scope
      }).then(function(popover) {
        $scope.popover = popover;
      });

      $scope.openPopover = function($event) {
        $scope.popover.show($event);
      };
})</pre></div><p class="calibre10">The next thing <a id="id227" class="calibre1"/>we are going to do is write the code for our modal in our <code class="email">PlaylistsCtrl</code> controller. The following code represents the code for our modal:</p><div><pre class="programlisting">$ionicModal.fromTemplateUrl('templates/modal.html', {
            scope: $scope
        }).then(function(modal) {
            $scope.modal = modal;
        });
        $scope.openModal = function() {
            $scope.modal.show();
        };
        $scope.closeModal = function() {
            $scope.modal.hide();
        };</pre></div><p class="calibre10">Replicate the preceding code into your <code class="email">PlaylistsCtrl</code> controller. If you have done this correctly, your code block for the <code class="email">PlaylistsCtrl</code> controller should look like the following:</p><div><pre class="programlisting">.controller('PlaylistsCtrl', function($scope, $http, $ionicPopover, $ionicModal) {
        $ionicModal.fromTemplateUrl('templates/modal.html', {
            scope: $scope
        }).then(function(modal) {
            $scope.modal = modal;
        });

        $scope.openModal = function() {
            $scope.modal.show();
        };

        $scope.closeModal = function() {
            $scope.modal.hide();
        };
        
        $scope.sites = [];
        $http.get('/sites.json')
          .then(function (response) {
            $scope.sites = response.data;
          });
        
        $ionicPopover.fromTemplateUrl('templates/popover.html', {
        scope: $scope
        }).then(function(popover) {
        $scope.popover = popover;
        });
        
        $scope.openPopover = function($event) {
        $scope.popover.show($event);
        };
    })</pre></div><p class="calibre10">Now, let's understand what the code for the modal is doing. We used the <code class="email">$ionicModal</code> service to create a modal via its <code class="email">.fromTemplateUrl()</code> method. This method takes two parameters; the<a id="id228" class="calibre1"/> first being the path to an HTML file containing the modal, and the second being an <code class="email">options</code> object. This <code class="email">options</code> object lets us customize the modal and even provides us with ways to customize things like what animation to use. For now, we only specify the scope the modal should use, which in this case is the scope of our controller.</p><p class="calibre10">The <code class="email">.fromTemplateUrl</code> method returns a promise with the created modal, which we set to our <code class="email">$scope</code>. The following code is a reflection of the modal creation:</p><div><pre class="programlisting">$ionicModal.fromTemplateUrl('templates/modal.html', {
            scope: $scope
        }).then(function(modal) {
            $scope.modal = modal;
        });</pre></div><p class="calibre10">We also have two functions that we created. These functions are <code class="email">.openModal()</code> and <code class="email">.closeModal()</code>. The <code class="email">openModal()</code> function is bound to the <code class="email">$scope</code>, and all it does is use the created modal's <code class="email">.show()</code> method. The <code class="email">.closeModal()</code> function does the opposite by implementing the <code class="email">.hide()</code> method of the created modal. One thing we have not done yet is create the HTML template we passed, which is the <code class="email">modal.html</code> in this case.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_3"><a id="ch06lvl2sec27" class="calibre1"/>Creating the modal.html file</h2></div></div></div><p class="calibre10">Navigate to <a id="id229" class="calibre1"/>your <code class="email">templates</code> folder and create a new HTML file called <code class="email">modal.html</code>. The following code represents the template file for our modal, and you are to replicate this code into your <code class="email">modal.html</code> file:</p><div><pre class="programlisting">&lt;ion-modal-view&gt;
    &lt;ion-header-bar class="bar bar-header bar-positive"&gt;
        &lt;h1 class="title"&gt;About The App&lt;/h1&gt;
        &lt;button class="button button-clear button-primary" on- tap="closeModal()"&gt;Cancel&lt;/button&gt;
    &lt;/ion-header-bar&gt;

    &lt;ion-content class="padding"&gt;
        The LTA app is part of the Ionic By Example book written by Sani Yusuf.
    &lt;/ion-content&gt;
&lt;/ion-modal-view&gt;</pre></div><p class="calibre10">If you look at this <a id="id230" class="calibre1"/>code closely, you can see an <code class="email">&lt;ion-modal-view&gt;</code> element as the root element of the code. This <code class="email">&lt;ion-modal-view&gt;</code> element is the root element of any modal template. We can also see that we have an <code class="email">&lt;ion-header-bar&gt;</code> element and this element has a <code class="email">&lt;h1&gt;</code> element used to declare the title of the modal header. There is also a <code class="email">&lt;button&gt;</code> element that has an <code class="email">on-tap</code> attribute that is directed to a <code class="email">closeModal()</code> function which we created earlier.</p><p class="calibre10">There is also an <code class="email">&lt;ion-content&gt;</code> element which is used to contain the visible main body of the modal. There is some dummy text to mimic the <strong class="calibre11">About</strong> page of the LTA app, but feel free to add some of your own HTML text. The last step we need to do is wire our popover button to open our modal.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_4"><a id="ch06lvl2sec28" class="calibre1"/>Wiring up the modal</h2></div></div></div><p class="calibre10">To wire up<a id="id231" class="calibre1"/> our modal, remember that we want our <strong class="calibre11">About</strong> popover menu item to open the modal when tapped. To begin, first open the <code class="email">popover.html</code> file of your project. What you have currently is as follows:</p><div><pre class="programlisting">&lt;ion-popover-view&gt;
    &lt;ion-content&gt;
      &lt;div class="list"&gt;
        &lt;b class="item"&gt;
            About
        &lt;/b&gt;
        &lt;b class="item"&gt;
            Help
        &lt;/b&gt;
        &lt;b class="item"&gt;
            Logout
        &lt;/b&gt;
      &lt;/div&gt;
    &lt;/ion-content&gt;
&lt;/ion-popover-view&gt;</pre></div><p class="calibre10">All we need to do is use the Ionic <code class="email">on-tap</code> attribute on the <code class="email">About</code> entry to reference the <code class="email">openModal()</code> function. Doing this correctly will make our popover code look like the following:</p><div><pre class="programlisting">&lt;ion-popover-view&gt;
    &lt;ion-content&gt;
        &lt;div class="list"&gt;
        &lt;b class="item" on-tap="openModal()"&gt;
            About
        &lt;/b&gt;
        &lt;b class="item"&gt;
            Help
        &lt;/b&gt;
        &lt;b class="item"&gt;
            Logout
        &lt;/b&gt;
    &lt;/div&gt;
    &lt;/ion-content&gt;
&lt;/ion-popover-view&gt;</pre></div><p class="calibre10">With this done, we<a id="id232" class="calibre1"/> have completed the implementation of our modal window. The next thing to do is to go ahead and test this. To do this, run your application using the <code class="email">Ionic serve</code> technique. When your app is up and running in the browser, tap the popover icon and the <strong class="calibre11">About</strong> option. This should bring up a modal window like the one shown in the following screenshot:</p><div><img src="img/00049.jpeg" alt="Wiring up the modal" class="calibre12"/></div><p class="calibre13"> </p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch06lvl1sec23" class="calibre1"/>Summary</h1></div></div></div><p class="calibre10">In this chapter, we used two very important features of Ionic and learned to create a popover and modal. We still used our LTA application from the previous chapter. The Ionic Popover is a great feature which is used to add extra menu items or provide contextual menu options. We also learned about the Ionic Modal, which is used to provide a view over another view of the app while maintaining the context.</p><p class="calibre10">In the next chapter, we will learn to use some of the customization techniques of Ionic, along with how to customize our Ionic app.</p></div></body></html>