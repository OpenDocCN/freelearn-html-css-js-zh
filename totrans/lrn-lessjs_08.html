<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;8.&#xA0;Media Queries with Less"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08" class="calibre1"/>Chapter 8. Media Queries with Less</h1></div></div></div><p class="calibre7">Now that we've seen how to use Less to manage the appearance of our content, what about making sure it fits on the page? Ah yes—isn't this where media queries come in to play…?</p><p class="calibre7">Before the advent of smartphones, most websites would be built at a fixed width—small enough to fit on laptops or PCs so that most end users would have a consistent experience.</p><p class="calibre7">However, now that more and more people are using mobile devices, the need to design content that can be seamlessly viewed on each device has increased. Gone are the days where you had to have the skills of a surgeon to view content, and work a mobile device—people are increasingly more comfortable viewing content on mobile devices.</p><p class="calibre7">How do we get around this? Easy—welcome to the world of media queries! An essential component of responsive web design, we can use media queries to build a site that can be seamlessly viewed over multiple platforms.</p><p class="calibre7">I guess you're thinking—how can Less help here? No problem. In this chapter, we'll see how Less can make creating media queries a cinch; we will cover the following topics:</p><div class="book"><ul class="itemizedlist"><li class="listitem">How media queries work</li><li class="listitem">What's wrong with CSS?</li><li class="listitem">Setting client criteria</li><li class="listitem">Building media queries using Less</li></ul></div><p class="calibre7">Ready to have some fun creating media queries? Let's get started!</p></div>

<div class="book" title="Chapter&#xA0;8.&#xA0;Media Queries with Less">
<div class="book" title="Introducing media queries"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch08lvl1sec68" class="calibre1"/>Introducing media queries</h1></div></div></div><p class="calibre7">If you've<a id="id521" class="calibre1"/> ever spent time creating content for sites, particularly for display on a mobile platform, then you might have come across media queries.</p><p class="calibre7">For those of you who are new to the concept, media queries are a means of tailoring the content that is displayed on screen when the viewport is resized to a smaller size. Historically, websites were always built at a static size—with more and more people viewing content on smartphones and tablets, this means viewing them became harder, as scrolling around a page can be a tiresome process!</p><p class="calibre7">Thankfully, this <a id="id522" class="calibre1"/>became less of an issue with the advent of media queries—they help us with what should or should not be displayed when viewing content on a particular device. Throughout this chapter, we'll take a brief look at what they are, how they work, and focus more on how you can use Less to create them.</p><p class="calibre7">Almost all modern browsers offer native support for media queries—the only exception being IE Version 8 or below, where it is not supported natively:</p><div class="mediaobject"><img src="../images/00073.jpeg" alt="Introducing media queries" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Media queries always begin with <code class="email">@media</code> and consist of two parts:</p><div class="mediaobject"><img src="../images/00074.jpeg" alt="Introducing media queries" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">The first part, <code class="email">only screen</code>, determines the media type where a rule should apply—in this case, it will only show the rule if we're viewing content on screen; content viewed when printed can easily be different.</p><p class="calibre7">The second <a id="id523" class="calibre1"/>part, or media feature, <code class="email">(min-width: 530px) and (max-width: 949px)</code>, means the rule will only apply between a screen size set at a minimum of <code class="email">530px</code> and a maximum of <code class="email">949px</code>. This will rule out any smartphones and will apply to larger tablets, laptops, or PCs.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note37" class="calibre1"/>Note</h3><p class="calibre7">There are<a id="id524" class="calibre1"/> literally dozens of combinations of media queries to suit a variety of needs—for some good examples, visit <a class="calibre1" href="http://cssmediaqueries.com/overview.html">http://cssmediaqueries.com/overview.html</a>, where you can see an extensive list, along with an indication of whether it is supported in the browser you normally use.</p></div><p class="calibre7">Media queries are perfect to dynamically adjust your site to work in multiple browsers—indeed, they are an essential part of a responsive web design. While browsers support media queries, there are some limitations we need to consider; let's take a look at these now.</p></div></div>
<div class="book" title="The limitations of CSS"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec69" class="calibre1"/>The limitations of CSS</h1></div></div></div><p class="calibre7">If we spend<a id="id525" class="calibre1"/> any time working with media queries, there are some limitations we need to consider; these apply equally if we were writing using Less or plain CSS:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Not every browser supports media features uniformly; to see the differences, visit <a class="calibre1" href="http://cssmediaqueries.com/overview.html">http://cssmediaqueries.com/overview.html</a> using different browsers.</li><li class="listitem">Current thinking is that a range of breakpoints has to be provided; this can result in a lot of duplication and a constant battle to keep up with numerous different screen sizes!</li><li class="listitem">The <code class="email">@media</code> keyword is not supported in IE8 or below; you will need to use JavaScript or jQuery to <a id="id526" class="calibre1"/>achieve the same result, or a library such as <span class="strong"><strong class="calibre8">Modernizr</strong></span> to provide a graceful fallback option.</li><li class="listitem">Writing media queries will tie your design to a specific display size; this increases the risk of duplication as you might want the same element to appear in multiple <span class="strong"><strong class="calibre8">breakpoints</strong></span>, but have to write individual rules to cover each breakpoint.</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note38" class="calibre1"/>Note</h3><p class="calibre7">Breakpoints are points where your design will break if it is resized larger or smaller than a particular set of given dimensions.</p></div><p class="calibre7">The traditional<a id="id527" class="calibre1"/> thinking is that we have to provide different style rules for different breakpoints within our style sheets. While this is valid, ironically it is something we should not follow! The reason for this is the potential proliferation of breakpoint rules that you might need to add, just to manage a site.</p><p class="calibre7">With care and planning and a design-based breakpoints mindset, we can often get away with a fewer number of rules. As you will see in the example towards the end of the chapter, there is only one breakpoint given, but it works in a range of sizes without the need for more breakpoints. The key to the process is to start small, then increase the size of your display. As soon as it breaks your design (this is where your first breakpoint is) add a query to fix it, and then, keep doing it until you get to your maximum size.</p><p class="calibre7">Okay, so we've seen what media queries are; let's change tack and look at what you need to consider when working with clients, before getting down to writing the queries in code.</p></div>
<div class="book" title="Setting client criteria"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec70" class="calibre1"/>Setting client criteria</h1></div></div></div><p class="calibre7">The hardest <a id="id528" class="calibre1"/>part of working with media queries isn't in the design of the code, but in agreeing with clients as to what devices should be supported!</p><p class="calibre7">Some clients might want to have the same experience throughout their site, irrespective of the device or platform being used to view the content. This might have worked when the Internet was still being viewed on normal-sized screens. This is no longer the case; more and more people are viewing content on mobile or other such devices. The use of mobile devices is such that numbers are increasing rapidly, to the extent that they will soon overtake those who still use a desktop PC to view content.</p><p class="calibre7">The phrase, "Expectation is the root of all heartache" (from an anonymous source, but often misquoted as being Shakespeare), is particularly apt—it is key in deciding what should and should not be included in each breakpoint; if not, you are more likely to land yourself in trouble with your client!</p><p class="calibre7">When creating media queries as part of constructing a client's site, there are some key points to keep in mind, which will form the basis for conversations with your client:</p><div class="book"><ul class="itemizedlist"><li class="listitem">At the start, make it clear to your client what responsive design is all about—making content fit a particular screen size. Impress on them that it is perfectly acceptable practice for the site not to show all of the content on mobile devices.</li><li class="listitem">If the desire is to have the same experience on all devices, then this will naturally add a significant amount of code and require extra resources—is it absolutely necessary? It is far better to work with the client to create content that will work on multiple devices from the same site, but not every element will be displayed on each device.</li><li class="listitem">Be clear <a id="id529" class="calibre1"/>with the customer what should and should not be included at each breakpoint—they might want content such as terms and conditions to be displayed, but this might put mobile users off from viewing the site, if they are long.</li><li class="listitem">If clients have difficulty in grasping the whole concept of responsive design, then get them to look at their site in a mobile device—they should see that it looks poor. Mobile devices work better with content and less so with interaction or searching—media queries can hide these elements on screen.</li><li class="listitem">A more radical approach will be to limit what can be done on a mobile device—this works perfectly for airline sites, where they might only want customers to book tickets or check their reservations. This requires more work upfront to hide more elements by default, but is worth the effort required to produce a site that is clean, fast, and works well on mobile devices.</li><li class="listitem">From a technical perspective, it is critical to determine which elements can be scaled, moved, omitted, or even collapsed on screen, at a particular breakpoint. Consideration should also be given to other elements when used in a mobile environment, such as the forms of interaction used, resizing of fonts, and cropping of images.</li></ul></div><p class="calibre7">There is one critical question that needs to be agreed with the client—should the site work for a number of devices, or should it just work when the screen is resized and elements break at certain points? There is an emerging thought that says we can't hope to support every device and that we should just try resizing a screen and then fix any element that breaks at a certain point during the resizing process. We can, of course, use the emulation features available within Chrome or Opera—even after doing this, we still cannot hope to cater for every device!</p><p class="calibre7">Okay, let's move on and turn our attention to creating media queries; before we write the code, we will have a quick recap on the options available when creating the queries.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Exploring media queries"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec71" class="calibre1"/>Exploring media queries</h1></div></div></div><p class="calibre7">When <a id="id530" class="calibre1"/>creating media queries, we've seen how they split into two parts—the first part consists of a media type, which defines the environment where the media query should apply (that is, on screen or in print). It should be noted that none of these are specific to Less—they are all valid CSS media types that we can use when <a id="id531" class="calibre1"/>creating our media queries using Less.</p></div>

<div class="book" title="Exploring media queries">
<div class="book" title="Defining media types"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec65" class="calibre1"/>Defining media types</h2></div></div></div><p class="calibre7">Although<a id="id532" class="calibre1"/> it is likely that we might only need to use<a id="id533" class="calibre1"/> print or screen when creating our Less code, there are other options available; here's a full list of elements that might or might not be supported by all browsers:</p><div class="informalexample"><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Feature</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Intended for</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">all</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Most<a id="id534" class="indexterm"/> devices; this is default, unless otherwise specified</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">braille</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Use<a id="id535" class="indexterm"/> in braille tactile devices</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">embossed</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Paged <a id="id536" class="indexterm"/>braille printers</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">handheld</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Handheld <a id="id537" class="indexterm"/>devices, where screen size is small and bandwidth is limited</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">print</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Producing<a id="id538" class="indexterm"/> content that is viewed on screen in the print preview mode</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">projection</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Projected <a id="id539" class="indexterm"/>presentations when using devices such as projectors</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">screen</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Color<a id="id540" class="indexterm"/> computer screens</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">speech</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Use with <a id="id541" class="indexterm"/>speech synthesizers</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">tty</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Media <a id="id542" class="indexterm"/>using a fixed-pitch character grid, such as terminals or teletypes</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">tv</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Use with<a id="id543" class="indexterm"/> television devices, with low resolution, color, limited scrolling, and sound</p>
</td></tr></tbody></table></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Exploring media features"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec72" class="calibre1"/>Exploring media features</h1></div></div></div><p class="calibre7">Once the<a id="id544" class="calibre1"/> media type has been set, we also need to set the media feature that should be tested; the media query will return true if it can match both the type of device the media is being displayed on and the feature being tested.</p><p class="calibre7">Media features are split into three categories—visual and tactile media, bitmap media, and TV. Let's take a look at the full list of options available for visual and tactile media:</p><div class="informalexample"><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Feature</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Value</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Min/max prefixes</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Description</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">width</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Length</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This <a id="id545" class="indexterm"/>gives the width of the display area</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">height</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Length</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This gives <a id="id546" class="indexterm"/>the height of the display area</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">device-width</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Length</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This gives<a id="id547" class="indexterm"/> the width of the device area</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">device-height</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Length</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This gives<a id="id548" class="indexterm"/> the height of the device area</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">color</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Integer</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This<a id="id549" class="indexterm"/> is the number of bits per color component (if not color, the value is <code class="literal">0</code>)</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">color-index</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Integer</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This <a id="id550" class="indexterm"/>is the number of entries in the output device's color lookup table</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">monochrome</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Integer</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This<a id="id551" class="indexterm"/> is the number of bits per pixel in the monochrome frame buffer (if not monochrome, the value is <code class="literal">0</code>)</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">grid</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">0 or 1</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">No</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">If<a id="id552" class="indexterm"/> this is set to <code class="literal">1</code>, the device is grid based, such as a teletype terminal or phone display with only one fixed font (all other devices are <code class="literal">0</code>)</p>
</td></tr></tbody></table></div><p class="calibre7">The<a id="id553" class="calibre1"/> second category is bitmap media types; here's the full list:</p><div class="informalexample"><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Feature</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Value</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Min/max prefixes</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Description</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">orientation</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">portrait</code> or <code class="literal">landscape</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">No</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This gives<a id="id554" class="indexterm"/> the orientation of a device</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">aspect-ratio</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Ratio (w/h)</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This <a id="id555" class="indexterm"/>gives the ratio of width to height, expressed as two integers and separated by a slash (for example, <code class="literal">16/</code>
<code class="literal">9</code>)</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">device-aspect-ratio</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Ratio (w/h)</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This is <a id="id556" class="indexterm"/>the ratio of device-width to device-height</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">resolution</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Resolution</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Yes</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">This gives<a id="id557" class="indexterm"/> the density of pixels of the output device, expressed as an integer followed by <code class="literal">dpi</code> (dots per inch) or <code class="literal">dpc</code>
<code class="literal">m</code> (dots per centimeter)</p>
</td></tr></tbody></table></div><p class="calibre7">The third and final category only has one media type—this is <code class="email">scan</code>, which is used for TV devices:</p><div class="informalexample"><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Feature</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Value</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Min/max prefixes</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Description</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">scan</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Progressive</code> or <code class="literal">interlace</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">No</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Scanning process<a id="id558" class="indexterm"/> used by TV devices</p>
</td></tr></tbody></table></div><p class="calibre7">In most cases, it will be sufficient to specify a single media type and feature when creating media queries—there will be instances where we might need to check against multiple features or types in a single query.</p><p class="calibre7">Thankfully, Less can easily handle this by using logical operators—let's take a moment to recap the <a id="id559" class="calibre1"/>options available when creating media queries.</p></div>

<div class="book" title="Exploring media features">
<div class="book" title="Using logical operators"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec66" class="calibre1"/>Using logical operators</h2></div></div></div><p class="calibre7">As we<a id="id560" class="calibre1"/> begin to build more complex queries, there <a id="id561" class="calibre1"/>will be instances where we need to perform a check against multiple criteria within a media query. Less can handle this with ease. Before we take a look at putting into practice what we've learned, let's just take a moment to review the operators available:</p><div class="informalexample"><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Operator</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Is used to</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">and</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Combine <a id="id562" class="indexterm"/>multiple media features together, or media features with other media types. For example:</p>
<p class="calibre21">
</p><div class="informalexample1"><pre class="programlisting1">@media tv and (min-width: 700px) and (orientation: landscape) { ... }</pre></div><p class="calibre21">
</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">comma</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Apply <a id="id563" class="indexterm"/>a set of styles if any of a comma-delimited list of queries returns true:</p>
<p class="calibre21">
</p><div class="informalexample1"><pre class="programlisting1">@media (min-width: 700px), handheld and (orientation: landscape) { ... }</pre></div><p class="calibre21">
</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">not</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Return<a id="id564" class="indexterm"/> <code class="literal">true</code> if the media query would otherwise return <code class="literal">false</code>, for example, <code class="literal">@media not all and (monochrome) { ... }</code> would return <code class="literal">@media not (all and (monochrome)) { ... }</code>
</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">only</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Prevent <a id="id565" class="indexterm"/>application of styles by browsers that do not support <a id="id566" class="indexterm"/>media queries (assuming that fallback support has not been implemented)</p>
</td></tr></tbody></table></div><p class="calibre7">Okay, we've covered the theory around media queries; let's turn our attention to building some queries!</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Designing media queries"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec73" class="calibre1"/>Designing media queries</h1></div></div></div><p class="calibre7">So far, we've <a id="id567" class="calibre1"/>seen what media queries are, the options available, and our clients who have helped us to determine what devices we need to support. It's at this stage in the process that we need to determine how we're going to translate these requirements into real code.</p><p class="calibre7">To help with this, let's work through a simple example. In this instance, we need to create a simple block of text, with a list of editors shown to the left of the text. Granted, it is somewhat contrived, but it does show perfectly how we can vary the content when displayed on different devices.</p></div>

<div class="book" title="Designing media queries">
<div class="book" title="Creating a simple example"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec67" class="calibre1"/>Creating a simple example</h2></div></div></div><p class="calibre7">The best <a id="id568" class="calibre1"/>way to see how media queries work is in the <a id="id569" class="calibre1"/>form of a simple demo. In this instance, we have a simple set of requirements, in terms of what should be displayed at each size:</p><div class="book"><ul class="itemizedlist"><li class="listitem">We need to cater for four different sizes of content</li><li class="listitem">The small version must be shown to the authors as plain text e-mail links, with no decoration</li><li class="listitem">For medium-sized screens, we will add an icon before the link</li><li class="listitem">On large screens, we will add an e-mail address after the e-mail links</li><li class="listitem">On extra-large screens, we will combine the medium and large breakpoints together, so both icons and e-mail addresses are displayed</li></ul></div><p class="calibre7">In all instances, we will have a simple container in which there will be some dummy text and a list of editors. The media queries we create will control the appearance of the editor list, depending on the window size of the browser being used to display the content.</p><p class="calibre7">Let's begin by downloading and extracting a copy of <code class="email">simple.html</code> from the code download that accompanies the book. This contains the markup that we will use to create our page.</p><p class="calibre7">Next, add the following code to a new document. We'll go through it section by section, starting with the variables created for our media queries:</p><div class="informalexample"><pre class="programlisting">@small: ~"(max-width: 699px) and (min-width: 520px)";
@medium: ~"(max-width: 1000px) and (min-width: 700px)";
@large: ~"(min-width: 1001px)";
@xlarge: ~"(min-width: 1151px)";</pre></div><p class="calibre7">Next comes some basic styles to define margins, font sizes, and styles:</p><div class="informalexample"><pre class="programlisting">* { margin: 0; padding: 0; }
body { font: 14px Georgia, serif; }
h3 { margin: 0 0 8px 0; }
p { margin: 0 25px }</pre></div><p class="calibre7">We need to set sizes for each area within our demo, so go ahead and add the following styles:</p><div class="informalexample"><pre class="programlisting">#fluid-wrap { width: 70%; margin: 60px auto; padding: 20px; background: #eee; overflow: hidden; }
#main-content { width: 65%; float: right; } 

#sidebar {
  width: 35%; float: left;
  ul { list-style: none; }
  ul li a { color: #900; text-decoration: none; padding: 3px 0; display: block; }
}</pre></div><p class="calibre7">Now that the basic styles are set, we can add our media queries—beginning with the query catering for small screens, where we simply display an e-mail logo:</p><div class="informalexample"><pre class="programlisting">@media @small {
  #sidebar ul li a { padding-left: 21px; background: url(../img/email.png) left center no-repeat; }
}</pre></div><p class="calibre7">The medium <a id="id570" class="calibre1"/>query comes next; here, we add the<a id="id571" class="calibre1"/> word <code class="email">Email</code> before the e-mail address instead:</p><div class="informalexample"><pre class="programlisting">@media @medium { 
  #sidebar ul li a:before { content: "Email: "; font-style: italic; color: #666; }
}</pre></div><p class="calibre7">In the large media query, we switch to showing the name first, followed by the e-mail (the latter extracted from the <code class="email">data-email</code> attribute):</p><div class="informalexample"><pre class="programlisting">@media @large {
  #sidebar ul li a:after { content: " (" attr(data-email) ")"; font-size: 11px; font-style: italic; color: #666; }
}</pre></div><p class="calibre7">We finish with the extra-large query, where we use the e-mail address format shown in the large media query, but add an e-mail logo to it:</p><div class="informalexample"><pre class="programlisting">@media @xlarge {
  #sidebar ul li a { padding-left: 21px; background: url(../img/email.png) left center no-repeat; }
}</pre></div><p class="calibre7">Save the file as <code class="email">simple.less</code>. Now that our files are prepared, let's preview the results in a browser. For this, I recommend that you use <span class="strong"><strong class="calibre8">Responsive Design View</strong></span> within Firefox (activated by pressing <span class="strong"><em class="calibre9">Ctrl</em></span> + <span class="strong"><em class="calibre9">Shift</em></span> + <span class="strong"><em class="calibre9">M</em></span>). Once activated, resize the view to 416 x 735; here we can see that only the name is displayed as an e-mail link:</p><div class="mediaobject"><img src="../images/00075.jpeg" alt="Creating a simple example" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Increasing the size to 544 x 735 adds an e-mail logo, while still keeping the same name/e-mail format as before:</p><div class="mediaobject"><img src="../images/00076.jpeg" alt="Creating a simple example" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">If we<a id="id572" class="calibre1"/> increase it further to 716 x 735, the e-mail logo <a id="id573" class="calibre1"/>changes to the word <span class="strong"><strong class="calibre8">Email</strong></span>, as seen in the following screenshot:</p><div class="mediaobject"><img src="../images/00077.jpeg" alt="Creating a simple example" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Let's increase the size even further to 735 x 1029; the format changes again, to a name/e-mail link, followed by an e-mail address in parentheses:</p><div class="mediaobject"><img src="../images/00078.jpeg" alt="Creating a simple example" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In our final change, increase the size to 735 x 1182. Here, we can see the previous style being used, but with the addition of an e-mail logo:</p><div class="mediaobject"><img src="../images/00079.jpeg" alt="Creating a simple example" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">These <a id="id574" class="calibre1"/>screenshots illustrate perfectly how you can<a id="id575" class="calibre1"/> resize your screen and still maintain a suitable layout for each device you decide to support; let's take a moment to consider how the code works.</p><p class="calibre7">The normal accepted practice for developers is to work on the basis of "mobile first", or create the smallest view so it is perfect, then increase the size of the screen and adjust the content until the maximum size is reached. This works perfectly well for new sites, but the principle might have to be reversed if a mobile view is being retrofitted to an existing site.</p><p class="calibre7">In our instance, we've produced the content for a full-size screen first. From a Less perspective, there is nothing here that isn't new—we've used nesting for the <code class="email">#sidebar</code> div, but otherwise the rest of this part of the code is standard CSS.</p><p class="calibre7">The magic happens in two parts—immediately at the top of the file, we've set a number of Less variables, which encapsulate the media definition strings we use in the queries. Here, we've created four definitions, ranging from <code class="email">@small</code> (for devices between <code class="email">520px</code> to <code class="email">699px</code>), right through to <code class="email">@xlarge</code> for widths of <code class="email">1151px</code> or more.</p><p class="calibre7">We then take each of the variables and use them within each query as appropriate, for example, the <code class="email">@small</code> query is set as shown in the following code:</p><div class="informalexample"><pre class="programlisting">@media @small {
  #sidebar ul li a { padding-left: 21px; background: url(../img/email.png) left center no-repeat; }
}</pre></div><p class="calibre7">In the preceding code, we have standard CSS style rules to display an e-mail logo before the name/e-mail link. Each of the other queries follows exactly the same principle; they will each compile as valid CSS rules when running through Less.</p><p class="calibre7">Now that we've seen how to construct media queries using Less, it's worth taking a moment to explore how best to view our demos. While it can be argued that simply resizing the browser window might suffice, we can go further and take advantage of a number<a id="id576" class="calibre1"/> of tools to<a id="id577" class="calibre1"/> help with the process.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Using tools to resize the screen"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec74" class="calibre1"/>Using tools to resize the screen</h1></div></div></div><p class="calibre7">In the <a id="id578" class="calibre1"/>previous section, we took a look at a simple example of <a id="id579" class="calibre1"/>creating media queries to show or hide elements when a list of editors is resized. We used Firefox's <span class="strong"><strong class="calibre8">Responsive Design View</strong></span> option to resize the screen for us; this is one option we can use to cleanly resize a screen for mobile viewing; it's a critical tool to work with media queries.</p><p class="calibre7">You can use special tools for this purpose, but most modern browsers already have a perfectly adequate tool built in for this purpose. Let's take a look at a few in turn.</p><p class="calibre7">For Firefox users, press <span class="strong"><em class="calibre9">Ctrl</em></span> + <span class="strong"><em class="calibre9">Shift</em></span> + <span class="strong"><em class="calibre9">M</em></span> to activate <span class="strong"><strong class="calibre8">Responsive Design View</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00080.jpeg" alt="Using tools to resize the screen" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">However, if your preference is Google Chrome, then the same functionality is available—it is part of the developer tools set, which can be activated by pressing <span class="strong"><em class="calibre9">Ctrl</em></span> + <span class="strong"><em class="calibre9">Shift</em></span> + <span class="strong"><em class="calibre9">I</em></span>:</p><div class="mediaobject"><img src="../images/00081.jpeg" alt="Using tools to resize the screen" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">If you <a id="id580" class="calibre1"/>are an Opera user, then there is the dedicated<a id="id581" class="calibre1"/> Opera Mobile Emulator, which is available at <a class="calibre1" href="http://www.opera.com/developer/mobile-emulator">http://www.opera.com/developer/mobile-emulator</a>, with<a id="id582" class="calibre1"/> versions available for the Windows, Mac, and Linux platforms:</p><div class="mediaobject"><img src="../images/00082.jpeg" alt="Using tools to resize the screen" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">If you <a id="id583" class="calibre1"/>need to use IE to display your site in a responsive <a id="id584" class="calibre1"/>format, then unfortunately your options are somewhat limited—at least to IE10. IE has a <span class="strong"><strong class="calibre8">Resize</strong></span> option (as shown in the following screenshot), but it resizes the whole window, rather than show a view within a normal-sized window:</p><div class="mediaobject"><img src="../images/00083.jpeg" alt="Using tools to resize the screen" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">It's not the perfect option, but then the best practice is to develop in browsers that are more standards-compliant (such as Google Chrome or Firefox). We can then effect any tweaks for IE later.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip14" class="calibre1"/>Tip</h3><p class="calibre7">It is worth noting that if IE11 is used, then it can be set to work in a similar way to Google Chrome. We can set the emulation mode to display a small window, within a large/full-size browser window.</p></div><p class="calibre7">If you<a id="id585" class="calibre1"/> prefer not to use built-in browser tools, then there are<a id="id586" class="calibre1"/> other tools available that can be used instead. Two tools that <a id="id587" class="calibre1"/>are of particular note are ish from Brad Frost, available at <a class="calibre1" href="http://bradfrostweb.com/demo/ish/">http://bradfrostweb.com/demo/ish/</a>, and ViewPort Resizer by Malte Wassermann, available<a id="id588" class="calibre1"/> at <a class="calibre1" href="http://lab.maltewassermann.com/viewport-resizer/">http://lab.maltewassermann.com/viewport-resizer/</a>.</p><p class="calibre7">Let's now change focus and turn our attention to building something more in-depth, where we can use Less in a more real-world example.</p></div>

<div class="book" title="Using tools to resize the screen">
<div class="book" title="Building responsive pages"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec68" class="calibre1"/>Building responsive pages</h2></div></div></div><p class="calibre7">Adding media <a id="id589" class="calibre1"/>queries to any site is possible; the key to it is <a id="id590" class="calibre1"/>deciding what breakpoints you want to support and the elements that should be displayed at each breakpoint. This can be as little as just the one breakpoint, or many. It all depends on what happens to the elements when they are resized and whether you need to alter the code to improve their appearance at a particular breakpoint.</p><p class="calibre7">Now that we've seen basic media queries in action, we're going to create something more complex, in the form of a basic welcome page that would not be out of place on a portfolio site. We'll start with the basic full-size page, which will look something like this screenshot:</p><div class="mediaobject"><img src="../images/00084.jpeg" alt="Building responsive pages" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">This is <a id="id591" class="calibre1"/>a very simple page, created as if it were part of a <a id="id592" class="calibre1"/>portfolio site. It's a perfect opportunity to explore how we can use some simple media queries to resize the page for a mobile platform.</p></div></div>

<div class="book" title="Using tools to resize the screen">
<div class="book" title="Building the basic page"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec69" class="calibre1"/>Building the basic page</h2></div></div></div><p class="calibre7">Let's start by<a id="id593" class="calibre1"/> extracting a copy of the <code class="email">responsive.html</code> file<a id="id594" class="calibre1"/> that is in the code download that accompanies this book. This contains a simple demo page, set to appear as if it could form the front page of a portfolio site. Save this file into your project folder.</p><p class="calibre7">We also need a copy of the <code class="email">reset.less</code> file that is in the same code download; go ahead and extract this to the project folder as well. This provides some basic style resets to mimic what might happen when creating pages for display on your site.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note39" class="calibre1"/>Note</h3><p class="calibre7">For the purposes of this demo, I will assume that you are using Sublime Text, which is preconfigured to compile Less files into valid CSS when saving content.</p></div><p class="calibre7">Next, open your text editor of choice and add the following code; we'll go through it in detail, section by section. We start with setting some basic styles, to define each area within the page:</p><div class="informalexample"><pre class="programlisting">#wrapper { width: 96%; max-width: 45rem; margin: auto; padding: 2%; } 
#main { width: 60%; margin-right: 5%; float: left; }
aside { width: 35%; float: right; }
a { text-decoration: none; text-transform: uppercase; }
a, img { border: medium none; color: #000000; font-weight: bold;
    outline: medium none;}</pre></div><p class="calibre7">Next, we need to define some styles for our header. This is one of the elements that will be replaced when we resize the page to a smaller screen:</p><div class="informalexample"><pre class="programlisting">header {
  font-family: 'Droid Sans', sans-serif;	
  h1 { height: 70px; float: left; display: block; font-weight: 700; font-size: 2.0rem;}
  nav { 
  float: right; margin-top: 40px; height: 22px; border-radius: 4px; 
  li { display: inline; margin-left: 15px; }
  ul { font-weight: 400; font-size: 1.1rem; }
  a { 
    padding: 5px 5px 5px 5px; 
    &amp;:hover { background-color: #27a7bd; color: #ffffff; border-radius: 4px; }
  }
  }
}</pre></div><p class="calibre7">The remaining<a id="id595" class="calibre1"/> two basic styles cover the <span class="strong"><strong class="calibre8">Skip to Main Content</strong></span> link<a id="id596" class="calibre1"/> that appears when the screen is resized, and the main image on screen respectively:</p><div class="informalexample"><pre class="programlisting">#skipTo {
display: none;
  li { background: #197a8a; }
  a { color: #ffffff; font-size: 0.8rem; }
}
      
#banner {
  float: left; margin-bottom: 15px; width: 100%;
  img { width: 100%; }
}</pre></div><p class="calibre7">Save the file as <code class="email">responsive.less</code>. If we preview the results in a browser, we will see something akin to the screenshot shown at the beginning of this example.</p><p class="calibre7">However, if we resize the browser window using a tool such as Responsive Design View in Firefox, it will begin to break the design—the toolbar loses tabs, the header has a large gap, and the right side of the image has been chopped off, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00085.jpeg" alt="Building the basic page" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">We can fix <a id="id597" class="calibre1"/>this by adding in a media query to manage what happens <a id="id598" class="calibre1"/>when the screen is resized. Let's take a look at how this works in action.</p></div></div>

<div class="book" title="Using tools to resize the screen">
<div class="book" title="Adding responsive queries"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec70" class="calibre1"/>Adding responsive queries</h2></div></div></div><p class="calibre7">We've set the <a id="id599" class="calibre1"/>basic styles for our portfolio page and can <a id="id600" class="calibre1"/>clearly see that elements are beginning to break when the page is resized. Let's fix this by adding in the media query that redefines what happens when the screen is resized.</p><p class="calibre7">Start by adding the following at the head of the <code class="email">responsive.less</code> file:</p><div class="informalexample"><pre class="programlisting">@mobile: ~"screen and (max-width: 30rem)";</pre></div><p class="calibre7">Next, we need to add the replacement styles that will kick in when using a mobile platform. Immediately below the Less styles in <code class="email">responsive.less</code>, go ahead and add the following code, beginning with the styles that control the display of a <span class="strong"><strong class="calibre8">Skip to Main Content</strong></span> button that appears at the top of the page when it has been resized:</p><div class="informalexample"><pre class="programlisting">@media @mobile {
  #skipTo { 
  display: block; 
  a { 
    display: block; padding: 10px; text-align: center; height: 20px; 
  &amp;:hover { background-color: #27a7bd; border-radius: 0px; height: 20px; }
    }
  }</pre></div><p class="calibre7">Next comes the<a id="id601" class="calibre1"/> styles required to resize the main<a id="id602" class="calibre1"/> content area, side bar, and header:</p><div class="informalexample"><pre class="programlisting">  #main, aside { float: left; clear: left; margin: 0 0 10px; width: 100%; }
 #banner { margin-top: 150px; }
  header h1 { margin-top: 20px; }</pre></div><p class="calibre7">Finally, we need to alter the styles used to redefine the navigation options that now appear as a stacked list of buttons, when the page is resized:</p><div class="informalexample"><pre class="programlisting">  header nav{
  float: left; clear: left;margin: 0 0 10px; width: 100%;
  li { margin: 0; background: #efefef; display: block; margin-bottom: 3px; height: 40px; }
  a { 
    display: block; padding: 10px; text-align: center;
  &amp;:hover { background-color: #27a7bd; border-radius: 0px; padding: 10px; height: 20px; }
    }
  }
}</pre></div><p class="calibre7">Resave the file as <code class="email">responsive.less</code>. If you've used Sublime Text as your editor, it will convert it to a compiled CSS file. Let's now preview the results in a browser:</p><div class="mediaobject"><img src="../images/00086.jpeg" alt="Adding responsive queries" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">At full size, there will be no change (which is anticipated), but when the page is resized, we can already see an improvement on the page. The title has been repositioned so there is less of a<a id="id603" class="calibre1"/> gap below it, the toolbar has been reset to <a id="id604" class="calibre1"/>display as buttons, the image has been resized to better fit on the page, and the content has been repositioned into a vertical format. We can also see the addition of a button to allow us to jump down to the main content on the page.</p><p class="calibre7">Excellent, our page now looks and works as we expect in a mobile capacity! If we increase or decrease the size of the browser window, we can see the content reflowing to fit the available space, based on the media query we created in <code class="email">responsive.less</code>.</p><p class="calibre7">So, what's the magic that's making this work? From the code we've worked with, you might be forgiven if you thought it was all of the code in this section. It's a perfectly valid statement. After all, all of the styles are needed to ensure content is correctly placed when used in a mobile environment.</p><p class="calibre7">In reality though, there are only two statements that we've used that are key to the whole process: <code class="email">@mobile: ~"screen and (max-width: 30rem)"</code>; and <code class="email">@media @mobile {…}</code>.</p><p class="calibre7">(Okay, I cheated slightly, but only by one character!)</p><p class="calibre7">The first statement is a Less variable that we've set as our media type and the feature we will be testing. The second one calls in that variable as the test. Everything in between is standard CSS styling and is being used to rework the layout of the page when used to display content on a mobile device.</p><p class="calibre7">In this<a id="id605" class="calibre1"/> example, we've used a large image, which has been<a id="id606" class="calibre1"/> set with <code class="email">width: 100%</code>. While it will resize perfectly when the page size is reduced or increased, it still means that we're potentially loading a large image on a small device—not a good idea! We can improve on this by asking the browser to load different versions of the image, depending on which media query is being applied. Let's take a look and see how Less can help remove some of the burden in managing this process.</p></div></div>

<div class="book" title="Using tools to resize the screen">
<div class="book" title="Adding responsive images"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch08lvl2sec71" class="calibre1"/>Adding responsive images</h2></div></div></div><p class="calibre7">Hands up<a id="id607" class="calibre1"/> if you own a mobile device, such as a tablet or<a id="id608" class="calibre1"/> smartphone? If you do, then you will likely have seen how long pages take to load, when they haven't been sized for mobile use.</p><p class="calibre7">In the example we've just worked on, we set a 100 percent value for the width of <code class="email">#banner img</code>—in most cases this will work perfectly fine; it does mean that we are loading a large photo, which is not ideal on a mobile device! Instead, we can make a simple change to our media rules to load a smaller image when the screen is reduced in size.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note40" class="calibre1"/>Note</h3><p class="calibre7">For this demo, I've resized a copy of the abstract image to a smaller 461px x 346px version and saved it as <code class="email">abstract_small.jpg</code>. This size is small enough to see the change take effect when the screen is suitably resized to smaller dimensions.</p></div><p class="calibre7">Let's start by downloading and extracting copies of <code class="email">responsive.html</code> and <code class="email">responsive.less</code> from the code download for this book, then saving them as <code class="email">responsive_img.html</code> and <code class="email">responsive_img.less</code>, respectively.</p><p class="calibre7">Open up <code class="email">responsive_img.html</code>, then alter the line as shown:</p><div class="informalexample"><pre class="programlisting">&lt;link href="css/reset.less" type="text/less" rel="stylesheet"&gt;
<span class="strong"><strong class="calibre8">&lt;link rel="stylesheet/less" href="css/responsive_img.less"&gt;</strong></span>
</pre></div><p class="calibre7">Next, add the<a id="id609" class="calibre1"/> highlighted line to the media query, as<a id="id610" class="calibre1"/> indicated:</p><div class="informalexample"><pre class="programlisting">  #banner { 
  margin-top: 150px; 
<span class="strong"><strong class="calibre8">  img { content:url("../img/abstract_small.jpg"); }</strong></span>
  }</pre></div><p class="calibre7">Save both files. If we then preview the results in a browser, you should not see any visible change (which we would expect). However, we will see a change in the URL for the image if we open up the developer tools within the browser and reduce the size of the screen:</p><div class="mediaobject"><img src="../images/00087.jpeg" alt="Adding responsive images" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">The beauty of this is that we can save a few kilobytes, which makes it quicker to view the site on mobile devices, as there is less to download into the browser. We can, however, go to the complete extreme by replacing images with high definition resolution versions, but only if the<a id="id611" class="calibre1"/> device supports it! Intrigued? Let's take a look at how this works, using the <code class="email">retina.js</code> Less mixin, available at <a class="calibre1" href="http://imulus.github.io/retinajs/">http://imulus.github.io/retinajs/</a>.</p></div></div>

<div class="book" title="Using tools to resize the screen">
<div class="book" title="Incorporating retina support for images"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch08lvl2sec72" class="calibre1"/>Incorporating retina support for images</h2></div></div></div><p class="calibre7">In the <a id="id612" class="calibre1"/>previous example, we saw how easy it is<a id="id613" class="calibre1"/> to adjust our Less code so that a smaller<a id="id614" class="calibre1"/> image can be loaded when screen estate has been resized to mimic a mobile device.</p><p class="calibre7">However, many of you will own devices (such as iPads or iPhones) that have retina support, or which can support the display of high-resolution images that otherwise would not display very well on regular PCs. We can take advantage of this when working with Less. In fact, a Less mixin has already been created, which we can get from <a class="calibre1" href="https://raw.githubusercontent.com/imulus/retinajs/master/src/retina.less">https://raw.githubusercontent.com/imulus/retinajs/master/src/retina.less</a>. Save this as <code class="email">retina.less</code> within our project folder.</p><p class="calibre7">Next, we need to save a copy of the <code class="email">abstract.jpg</code> file that we've been using, as <code class="email">abstract@2x.jpg</code>—this will become our hi-res version. Take a copy of the original <code class="email">abstract.jpg</code> file and compress it using a JPG compressor such as the online service from <a class="calibre1" href="http://www.jpeg-optimizer.com">http://www.jpeg-optimizer.com</a>. Save the compressed version as <code class="email">abstract.jpg</code>.</p><p class="calibre7">Now<a id="id615" class="calibre1"/> that our images are prepared, open <a id="id616" class="calibre1"/>up <code class="email">responsive.html</code> and modify the lines <a id="id617" class="calibre1"/>as shown:</p><div class="informalexample"><pre class="programlisting">&lt;link href="css/reset.less" type="text/less" rel="stylesheet"&gt;
&lt;link href="css/responsive_hd.less" rel="stylesheet/less"&gt;
&lt;script src="js/less.min.js"&gt;&lt;/script&gt;</pre></div><p class="calibre7">Save this as <code class="email">responsive_hd.html</code>. Next, open <code class="email">responsive.less</code> and add this line at the head of the file:</p><div class="informalexample"><pre class="programlisting">@import "retina.less";</pre></div><p class="calibre7">Then, add the following line at the end of the file:</p><div class="informalexample"><pre class="programlisting">#banner img { .at2x('/images/abstract.png', 200px, 100px); }</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note41" class="calibre1"/>Note</h3><p class="calibre7">In a production environment, it is more likely that this would be within a media query—adding it at the end is sufficient to illustrate how it works, for the purposes of this demo.</p></div><p class="calibre7">Save this as <code class="email">responsive_hd.less</code>. We can then preview the results in a browser. For best results, I recommend the following:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Preview <a id="id618" class="calibre1"/>the results using a local web server or online webspace—a good local web server to try is WAMP (<a class="calibre1" href="http://www.wampserver.de">http://www.wampserver.de</a> for Windows) or MAMP (<a class="calibre1" href="http://www.mamp.info">http://www.mamp.info</a> for MAC).</li><li class="listitem">If possible, try<a id="id619" class="calibre1"/> to view the results within Google Chrome if you can't view them online via a retina-enabled device. Google Chrome has the ability to emulate different devices; if we enable this feature and set it to show as an iPhone 5, for example:<div class="mediaobject"><img src="../images/00088.jpeg" alt="Incorporating retina support for images" class="calibre10"/></div><p class="calibre13"> </p><p class="calibre24">We can clearly see that the change has been made:</p><div class="mediaobject"><img src="../images/00089.jpeg" alt="Incorporating retina support for images" class="calibre10"/></div><p class="calibre13"> </p></li></ul></div><p class="calibre7">While <a id="id620" class="calibre1"/>there should be no material change to <a id="id621" class="calibre1"/>the layout of the web page, using this <a id="id622" class="calibre1"/>trick means that a higher resolution image can be used when a device supports it, or be replaced with a standard resolution image if the device does not have retina support.</p><p class="calibre7">To test whether <a id="id623" class="calibre1"/>a device supports the <span class="strong"><strong class="calibre8">device-pixel-ratio</strong></span> test we used here, browse to <a class="calibre1" href="http://www.quirksmode.org/css/mediaqueries/devicepixelratio.html">http://www.quirksmode.org/css/mediaqueries/devicepixelratio.html</a>. For example, we can confirm that <code class="email">webkit-device-pixel-ratio</code> is supported, when testing with an iPad:</p><div class="mediaobject"><img src="../images/00090.jpeg" alt="Incorporating retina support for images" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Let's move<a id="id624" class="calibre1"/> on and continue with this<a id="id625" class="calibre1"/> theme of using external libraries by taking a look <a id="id626" class="calibre1"/>at what external libraries are available for use with Less, when working with media queries.</p></div></div>
<div class="book" title="Using prebuilt libraries"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec75" class="calibre1"/>Using prebuilt libraries</h1></div></div></div><p class="calibre7">So far <a id="id627" class="calibre1"/>we've covered the basics of creating media queries using Less—it's at this point that you're probably thinking, "Surely there's a prebuilt library we could use to help us here, right…?"</p><p class="calibre7">Well, in this instance, unfortunately there isn't a prebuilt library we can use; it's down to us to build each query manually! This is no bad thing, as media queries can be seen as something of a workaround, which can lead to bloated code if we're not careful. It will be difficult, if not near impossible, to cater for all breakpoints. Each project will require support for a specific set of break points, which will not necessarily be the same for every site.</p><p class="calibre7">In addition, media queries are natively supported in all modern browsers; the only exception is IE, where Version 8 or below is not supported. To get around this, there are three options:</p><div class="book"><ul class="itemizedlist"><li class="listitem">We <a id="id628" class="calibre1"/>can use the fallback library media-query-to-type created<a id="id629" class="calibre1"/> by Mike Morici, and which we can download from <a class="calibre1" href="https://github.com/himedlooff/media-query-to-type">https://github.com/himedlooff/media-query-to-type</a>. This converts media queries into media types, which are supported as far back as IE6.</li><li class="listitem">Alternatively, we<a id="id630" class="calibre1"/> can use Modernizr (from <a class="calibre1" href="http://www.modernizr.com">http://www.modernizr.com</a>) to detect when media queries are used.</li><li class="listitem">Another<a id="id631" class="calibre1"/> library that can be used is Respond.js, created by Scott Jehl and available from <a class="calibre1" href="https://github.com/scottjehl/Respond">https://github.com/scottjehl/Respond</a>. This is effectively a drop-in library that can convert most media queries into formats that IE8 or below can understand.</li></ul></div><p class="calibre7">Although this chapter is about using Less to create media queries, it is nevertheless important to consider which browsers should be supported and how far you will be willing to go to get media queries to work in older browsers such as IE6 to 8.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note42" class="calibre1"/>Note</h3><p class="calibre7">To help maintain clarity, we can use conditional hacks to only load the media-query-to-type or Respond.js libraries when we detect that IE9 or below has been used:</p><div class="informalexample"><pre class="programlisting">#&lt;!--[if lt IE 9]&gt;….&lt;![endif]--&gt;</pre></div></div><p class="calibre7">While in some respects we might feel obligated to provide the same environment in all cases (including for old IE), this is not necessarily a worthwhile exercise; supporting a smaller number well is better than average support for a lot of browsers!</p></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec76" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">Media queries have rapidly become a de facto part of responsive web design. Throughout this chapter, we saw how to use Less to make the process easier to manage within your code.</p><p class="calibre7">We started our journey through media queries with a brief introduction, followed by a review of some of the limitations that we must work around and considerations that need to be considered when working with clients.</p><p class="calibre7">Next came a brief exploration of the media types and features that we can use when working with Less; we took a look at the logical operators we can also use to create queries that test for multiple types or features. We then covered how to create a simple media query, with a quick look at how best to show responsive views in browsers, before continuing with a more practical example of a single page from a demo portfolio site. We saw how first we can create our basic page, before adding the requisite code to turn it into a responsive one.</p><p class="calibre7">We then moved on to take a brief look at how to improve the image on the page, by first making it more responsive, then switching to displaying high-resolution images when retina support is available and enabled. We then closed out the chapter with a look at what prebuilt libraries are available that can help when working with Less.</p><p class="calibre7">In the next chapter, we're going to move onto some more practical uses of Less, with a look at using Less within a CMS, such as WordPress.</p></div></body></html>