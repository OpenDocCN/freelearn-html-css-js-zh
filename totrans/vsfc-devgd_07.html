<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Visualforce for Mobile"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Visualforce for Mobile</h1></div></div></div><p>Using Visualforce and Apex we can build complex, dynamic, and powerful native applications on the Force.com platform. Nowadays, users are not satisfied only with only a web application, due to the competition in the industry. When it comes to applications on the Force.com platform, we can extend them to mobile devices by using Visualforce Mobile. Visualforce Mobile is a hybrid of client-side and on-demand programming. This allows us to extend applications for mobile devices with offline data access flexibility. We can rapidly build apps for mobile devices by using Visualforce and Apex.</p><p>This chapter covers how to extend applications built on the Force.com platform for mobile devices, and how developers can use Visualforce Mobile. The following topics will be covered in this chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Understanding Salesforce Mobile</li><li class="listitem" style="list-style-type: disc">Developing and mobilizing Visualforce pages</li></ul></div><p>Let's build Visualforce for mobiles.</p><div class="section" title="Understanding Salesforce Mobile"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec40"/>Understanding Salesforce Mobile</h1></div></div></div><p>Salesforce Mobile<a id="id254" class="indexterm"/> is a client application provided by Salesforce. Salesforce Mobile is used to extend applications which are built on the Force.com platform. This allows us to access the Salesforce data from BlackBerry, iPhone, or Windows Mobile devices. The Salesforce Mobile client application has the following features:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Makes the interaction with Salesforce via wireless carrier networks</li><li class="listitem" style="list-style-type: disc">Stores a local copy of user's data on the mobile device. It uses its own database.</li></ul></div><p>A set of parameters which is called as <span class="strong"><strong>Mobile configuration</strong></span>
<a id="id255" class="indexterm"/> is determined by the data sent to the mobile device. It defines the relevant subset of the user's Salesforce records.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip27"/>Tip</h3><p>If we access the Salesforce data via a mobile device, we need a separate Salesforce Mobile user license for a particular user. The Developer and Ultimate editions have only one mobile license. Others must be purchased separately.</p></div></div><div class="section" title="Salesforce Mobile and Visualforce Mobile supporting devices"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec22"/>Salesforce Mobile and Visualforce Mobile supporting devices</h2></div></div></div><p>Salesforce Mobile is supported on BlackBerry, iPhone, and Windows Mobile. Currently, Windows Mobile is not supported for Visualforce Mobile. BlackBerry and iPhone devices must have following requirements:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>BlackBerry configurations are as follows:</strong></span><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Supported <a id="id256" class="indexterm"/>OS versions 4.3 <a id="id257" class="indexterm"/>through 7.0 and for better performance versions 4.6 through 4.7</li><li class="listitem" style="list-style-type: disc">A minimum of 5 MB of free memory should be available on the device</li><li class="listitem" style="list-style-type: disc">The mobile client application is supported on BlackBerry 8100 Series (Pearl), BlackBerry 8300 Series (Curve), BlackBerry 8800 Series, BlackBerry 8900 Series (Javelin), BlackBerry 9000 Series (Bold), and BlackBerry 9500 Series (Storm)<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip28"/>Tip</h3><p>You don't need to own an iPhone or a BlackBerry device to develop and test applications. You can use simulators.</p></div></div></li></ul></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>iPhone configurations are as follows:</strong></span><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Supported for <a id="id258" class="indexterm"/>latest <a id="id259" class="indexterm"/>iPhone OS</li><li class="listitem" style="list-style-type: disc">A minimum of 5 MB of free memory should be available on the device</li><li class="listitem" style="list-style-type: disc">The mobile client application is supported on iPhone, iPhone 3G, iPhone 3GS, and iPod Touch</li></ul></div></li></ul></div></div><div class="section" title="Capabilities and limitations of the mobile application"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec23"/>Capabilities and limitations of the mobile application</h2></div></div></div><p>The native client <a id="id260" class="indexterm"/>application of Salesforce Mobile has an embedded browser <a id="id261" class="indexterm"/>which is used to communicate between a client application and a Visualforce page. There are a few concerns to consider when we are using Salesforce Mobile, which are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Accounts, assets, contacts, opportunities, tasks, leads, events, price books, products, cases solutions, and custom objects can be mobilized.</li><li class="listitem" style="list-style-type: disc">Custom links, s-controls, mashups, merge fields, and image fields cannot be mobilized.</li><li class="listitem" style="list-style-type: disc">Workflow rules, validation rules, formula fields, and Apex triggers are not suitable to be run on the mobile device. However, they can be run on the server side after a record is saved and submitted to Salesforce.</li><li class="listitem" style="list-style-type: disc">User permissions, record types, and page layouts are inherited from Salesforce. However, the administrator can change them to restrict the permissions of mobile users.</li><li class="listitem" style="list-style-type: disc">When we add a child data set to a parent data set, the object becomes a related list on the mobile device.</li><li class="listitem" style="list-style-type: disc">Reports are available only in a BlackBerry client application, but dashboards are available in both iPhone and BlackBerry.</li><li class="listitem" style="list-style-type: disc">Sorting, summaries, subtotals, or grouping are not supported in the report viewer of the mobile application.</li><li class="listitem" style="list-style-type: disc">Custom views of Salesforce can be accessed by iPhone and BlackBerry users, but the custom views can be created only by BlackBerry users.</li><li class="listitem" style="list-style-type: disc">In the mobile application, custom views are limited to two columns.</li><li class="listitem" style="list-style-type: disc">Mobilized Visualforce tabs and web tabs can be accessed in the client application by both iPhone and BlackBerry users.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip29"/>Tip</h3><p>The embedded browser communicates with Salesforce using the device's internet connection; the native client application communicates with Salesforce asynchronously through the SOAP API. The embedded browser can execute JavaScript, but the native client application cannot.</p></div></div></div><div class="section" title="Using Visualforce Mobile"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec24"/>Using Visualforce Mobile</h2></div></div></div><p>When we use mobile <a id="id262" class="indexterm"/>applications, they are client-side applications and they need an installation. The mobile applications need a periodic connection to send and receive data. When compared with the mobile on-demand applications, the mobile client applications are dependent upon network connection and speed. Mobile client applications can be used to work offline as well. When we come to speed, wireless data networks are still very slow. But client applications are highly responsive.</p><p>There are situations where a native client application cannot satisfy the customer's needs. Therefore, we can use Visualforce Mobile in the following situations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Integrating with<a id="id263" class="indexterm"/> other web APIs, for example, Google Maps</li><li class="listitem" style="list-style-type: disc">Rebuilding the functionality which are not available in client applications, such as responding to an approval request</li><li class="listitem" style="list-style-type: disc">Mobilizing a standard Salesforce object which is not supported in a client application</li><li class="listitem" style="list-style-type: disc">Integrating with peripheral devices, such as Bluetooth or embedded GPS</li><li class="listitem" style="list-style-type: disc">Overriding the action of the standard buttons on the detail page</li></ul></div></div></div></div>
<div class="section" title="Developing and mobilizing Visualforce pages"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec41"/>Developing and mobilizing Visualforce pages</h1></div></div></div><p>Developing a <a id="id264" class="indexterm"/>Visualforce page for a Salesforce Mobile is different from developing pages for <a id="id265" class="indexterm"/>Salesforce, especially as the user experiences on desktop browsers and mobile browsers are different.</p><div class="section" title="Best practices for building Visualforce Mobile pages for iPhone and BlackBerry"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec25"/>Best practices for building Visualforce Mobile pages for iPhone and BlackBerry</h2></div></div></div><p>The following <a id="id266" class="indexterm"/>are the<a id="id267" class="indexterm"/> best practices:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Controllers</strong></span>: Salesforce Mobile supports custom objects and many standard objects. Standard layouts and styles of a standard page are too complex for a mobile browser. When developing pages for the mobile application, the best practice is to use custom controllers for the page. If your controller has a very complex business logic, it may slow down the loading of the page.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Header and sidebar</strong></span>: Remove the header and the sidebar from the Visualforce Mobile pages because they may lead to long loading times and there won't be sufficient space to display them on the mobile screen. They can be removed by using the following code:<div class="informalexample"><pre class="programlisting">&lt;apex:page showHeader="false" sidebar="false"&gt;</pre></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Page styles</strong></span>: The standard stylesheets of Salesforce pages are too complex for the mobile browser. We have to stop loading the standard stylesheets by using the <code class="literal">standardStylesheets</code> attribute of the <code class="literal">&lt;apex:page&gt;</code> tag as follows:<div class="informalexample"><pre class="programlisting">&lt;apex:page showHeader="false" sidebar="false" standardStylesheets="false"&gt;
    &lt;style type="text/css"&gt;
&lt;!—your custom styles here--&gt;
    &lt;/style&gt;
&lt;/apex:page&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip30"/>Tip</h3><p>The best approach to add a stylesheet to your page is to include a <code class="literal">&lt;style&gt;</code> section just below the <code class="literal">&lt;apex:page&gt;</code> tag.</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Reuse</strong></span>: In a <a id="id268" class="indexterm"/>mobile client application, <a id="id269" class="indexterm"/>reusing is a key component. We can create a Visualforce page with custom styles and reuse that page in other Visualforce pages using the <code class="literal">&lt;apex:include&gt;</code> component. For example, if the preceding page's name is <code class="literal">myStylePage</code> and we have implemented a custom style on that page, then we can include the preceding page with styles as follows:<div class="informalexample"><pre class="programlisting">&lt;apex:page standardStylesheets="false"/&gt;
&lt;apex:include pageName="myStylePage"/&gt;
&lt;/apex:page&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip31"/>Tip</h3><p>We can create mobile-optimized stylesheet as a static resource and we can refer to the same stylesheet in non-mobile pages. We can increase the page's loading time by using the stylesheet as a static resource.</p></div></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Lookups</strong></span>: Lookups doesn't work properly on BlackBerry and iPhone. Therefore the best practice is to validate the entry in the lookup upon saving the record. We can use an Apex trigger for validation. And we can also change the file type occasionally.</li></ul></div></div><div class="section" title="iPhone considerations"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec26"/>iPhone considerations</h2></div></div></div><p>While developing pages for the<a id="id270" class="indexterm"/> iPhone, we must consider following things:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Page zoom</strong></span>: To maximize the compatibility with a broad range of websites, the iPhone browser sets the page width to 980 pixels. Using the <code class="literal">&lt;meta&gt;</code> tag, the iPhone browser can identify the width to display the page. The following tag definition is only valid for the iPhone browser, other browsers ignore this tag:<div class="informalexample"><pre class="programlisting">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /&gt;</pre></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>URL targets</strong></span>: The embedded browser doesn't support the <code class="literal">target="_blank"</code> attribute. The page will not load with this attribute.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Screen rotation</strong></span>: Rotating the<a id="id271" class="indexterm"/> screen will not cause the page to flip and resize.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Static resource caching</strong></span>: The embedded browser doesn't support caching.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>File access</strong></span>: The embedded browser does not natively offer access to the filesystem, camera, location, or other device data.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip32"/>Tip</h3><p>
<span class="strong"><strong>General rule for mobile development</strong></span>
</p><p>We shouldn't use components with JavaScript to perform an action on components that depend on Salesforce stylesheets. If we can see the <code class="literal">&lt;script&gt;</code> tag that refers to a JavaScript (<code class="literal">.js</code>) file or a <code class="literal">&lt;link&gt;</code> tag that refers to a stylesheet (<code class="literal">.css</code>) in the HTML source of our page, the page can fall under the preceding category.</p></div></div></div><div class="section" title="BlackBerry considerations"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec27"/>BlackBerry considerations</h2></div></div></div><p>When developing pages for <a id="id272" class="indexterm"/>BlackBerry smartphones, the following considerations are applied:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>JavaScript Support</strong></span>: Inline DOM events doesn't work in the BlackBerry browser. The BlackBerry browser has limited JavaScript support. When developing Visualforce pages for BlackBerry, avoiding JavaScript is the best option.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Forms and view state</strong></span>: If you want to use the <code class="literal">&lt;apex:form&gt;</code> tag in your Visualforce Mobile page, use standard HTML forms instead of <code class="literal">&lt;apex:form&gt;</code>. If we use the <code class="literal">&lt;apex:form&gt;</code> tag, the view state of the page will be too large for the BlackBerry browser. When we use a standard HTML tag, we have to do the following things manually and we cannot use the <code class="literal">&lt;apex:commandLink&gt;</code> tag and <code class="literal">&lt;apex:commandButton&gt;</code> components:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Maintaining state between pages</li><li class="listitem" style="list-style-type: disc">Redirecting to another page<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip33"/>Tip</h3><p>Parameters sent from the form can be retrieved using the <code class="literal">ApexPages.currentPage().getParameters()</code> map in the controller.</p></div></div></li></ul></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Page styles</strong></span>: We have to follow the best practices for building Visualforce Mobile pages for iPhone and BlackBerry. Additionally, we must know that the BlackBerry browser ignores some CSS properties, for example, <code class="literal">margin-left</code>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Line breaks</strong></span>: The <code class="literal">&lt;br/&gt;</code> tag <a id="id273" class="indexterm"/>is ignored unless there is something on the line.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Navigation</strong></span>: There isn't any in-built navigation in the embedded browser of a BlackBerry client application. We have to provide the navigation links.</li></ul></div></div><div class="section" title="Developing cross-platform compatible pages"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec28"/>Developing cross-platform compatible pages</h2></div></div></div><p>When we build Visualforce<a id="id274" class="indexterm"/> Mobile pages to perform well on both iPhone and BlackBerry browsers, we need to follow the following approaches which are provided by Salesforce:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Separation and redirection</strong></span>: We can build the Visualforce Mobile pages to redirect to a suitable optimized page (iPhone-optimized or BlackBerry-optimized) by using JavaScript. For that, we have to build pages separately for iPhone and BlackBerry. When the connecting device is not a BlackBerry device, the page will redirect the page to an iPhone-optimized page, as given in the following code:<div class="informalexample"><pre class="programlisting">&lt;apex:page&gt;
&lt;language="javascript" type="text/javascript"&gt;
if(!window.blackberry){
window.location.href='{!$Page.iPhoneOptimizedVersion}';
}
&lt;/script&gt;
   &lt;/apex:page&gt;</pre></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Conditional code</strong></span>: The server identifies the connecting device (iPhone or BlackBerry) by using the user agent string in the header, which is the user agent string that is passed by the browser to the server. Therefore, we can build device-conditional code and styles for well-performing pages on both iPhone and BlackBerry devices. The advantage is that the markup is interpreted on the server side and the user gets only the suitable markup which is selected by the conditional code. The disadvantage is that the code can be more complex due to the conditional code. The following example shows the way of handling conditional code and the markup. The markup has two <code class="literal">&lt;apex:outputPanel&gt;</code> components, each of which renders the markup for a particular device:<div class="informalexample"><pre class="programlisting">&lt;apex:page controller="ConditionalCodeController"&gt;
  &lt;apex:outputPanel rendered="{!deviceType = 'BlackBerry'}"&gt;
    &lt;apex:outputText value="This is BlackBerry"&gt;&lt;/apex:outputText&gt;
  &lt;/apex:outputPanel&gt;

  &lt;apex:outputPanel rendered="{!deviceType  = 'iPhone'}"&gt;
    &lt;apex:outputText value="This is iPhone"&gt;&lt;/apex:outputText&gt;
  &lt;/apex:outputPanel&gt;
&lt;/apex:page&gt;</pre></div><p>The controller of the preceding markup is as follows and it evaluates the user agent and prepares the <code class="literal">deviceType</code> attribute in order to render a correct output panel:</p><div class="informalexample"><pre class="programlisting">public class ConditionalCodeController {
    public String deviceType { get; set; }
  
    public ConditionalCodeController() {
        String userAgent = ApexPages.currentPage().getHeaders().get('USER-AGENT');      
        if(userAgent.contains('iPhone')) {
            deviceType = 'iPhone';
        }
        else if(userAgent.contains('BlackBerry')) {
            deviceType = 'BlackBerry';
        }
    }
}</pre></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Lowest common denominator</strong></span>: Build <a id="id275" class="indexterm"/>to the lowest common denominator and include only minimal, unobtrusive JavaScript, avoiding scripts with inline events in the tags. Depending on the devices in the customer's organization, you might need to avoid JavaScript all together. On older BlackBerry smartphones, using any JavaScript code can malfunction the page.</li></ul></div></div><div class="section" title="Using the JavaScript library"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec29"/>Using the JavaScript library</h2></div></div></div><p>The<a id="id276" class="indexterm"/> JavaScript library contains commands for trigger actions in Salesforce Mobile. This JavaScript library can be used to build seamless user experience between a native client application and Visualforce Mobile pages.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip34"/>Tip</h3><p>The JavaScript commands work only on JavaScript-enabled devices.</p></div></div><p>The following are the functions in the JavaScript library:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">mobileforce.device.sync()</code>: This <a id="id277" class="indexterm"/>function forces the mobile client application to synchronize with Salesforce, which updates data records on the device.</li><li class="listitem" style="list-style-type: disc"><code class="literal">mobileforce.device.close()</code>: This <a id="id278" class="indexterm"/>function closes the embedded browser containing the Visualforce page and returns the user to the original/previous tab or record.</li><li class="listitem" style="list-style-type: disc"><code class="literal">mobileforce.device.syncClose()</code>: This <a id="id279" class="indexterm"/>function forces the mobile client application to synchronize with Salesforce and closes the embedded browser containing the Visualforce page.</li><li class="listitem" style="list-style-type: disc"><code class="literal">mobileforce.device.getLocation()</code>: This <a id="id280" class="indexterm"/>function obtains the GPS coordinates of the device's current location.</li></ul></div><p>The following example has the usage of all the commands available in the JavaScript library:</p><div class="informalexample"><pre class="programlisting">&lt;apex:page showheader="false"&gt;
    &lt;html &gt;
      &lt;head&gt;
      &lt;title&gt;Visualforce Mobile Trigger Test&lt;/title&gt;
      &lt;!--  &lt;meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /&gt;--&gt;
      
      &lt;!-- Using static resource --&gt;
        &lt;script type="application/x-javascript" src="/mobileclient/api/mobileforce.js"&gt;
        &lt;/script&gt;
        &lt;script&gt;
          function sync() {
            mobileforce.device.sync();
            return false;
          }
          function doClose() {
            mobileforce.device.close();
            return false;
          }
          function syncClose() {
            mobileforce.device.syncClose();
            return false;
          }
          updateLocation = function(lat,lon) {
            document.getElementById('lat').value = lat;
            document.getElementById('lon').value = lon;
          }
          function getLocation(){
            mobileforce.device.getLocation(updateLocation);
            return false;
          }
        &lt;/script&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;h2&gt;Triggers:&lt;/h2&gt;
        &lt;p&gt;
          &lt;a href="#" onclick="return sync();"&gt;JS sync&lt;/a&gt;&lt;br/&gt;
          &lt;a href="#" onclick="return doClose();"&gt;JS close&lt;/a&gt;&lt;br/&gt;
           &lt;a href="#" onclick="return syncClose();"&gt;JS sync and close&lt;/a&gt;&lt;br/&gt;
           &lt;a href="mobileforce:///sync"&gt;HTML sync&lt;/a&gt;&lt;br/&gt;
           &lt;a href="mobileforce:///close"&gt;HTML close&lt;/a&gt;&lt;br/&gt;
           &lt;a href="mobileforce:///sync/close"&gt;HTML sync and close&lt;/a&gt;&lt;br/&gt;
        &lt;/p&gt;
        &lt;h2&gt;Location:&lt;/h2&gt;
        &lt;p&gt;Latitude: &lt;input type="text" disabled="disabled" id="lat" name="lat" value=""/&gt;&lt;/p&gt;
        &lt;p&gt;Logitude: &lt;input type="text" disabled="disabled" id="lon" name="lon" value=""/&gt;&lt;/p&gt;
        &lt;a href="#" onclick="return getLocation();"&gt;Get location&lt;/a&gt;&lt;br/&gt;
      &lt;/body&gt;
    &lt;/html&gt;
&lt;/apex:page&gt;</pre></div></div><div class="section" title="Building a mobile-ready Visualforce tab"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec30"/>Building a mobile-ready Visualforce tab</h2></div></div></div><p>After building the <a id="id281" class="indexterm"/>Visualforce Mobile pages, we have to do some <a id="id282" class="indexterm"/>configuration to access these pages via Salesforce Mobile. To mobilize the Visualforce page, we can create web and Visualforce tabs using the <span class="strong"><strong>Mobile Ready</strong></span> attribute. After navigating to the following path and clicking on <span class="strong"><strong>New</strong></span> in the Visualforce tab we will be directed to a page where we will create a mobile-ready Visualforce tab:</p><p>
<span class="strong"><strong>YourName</strong></span> | <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Tab</strong></span>
</p><div class="mediaobject"><img src="graphics/9818_07_01.jpg" alt="Building a mobile-ready Visualforce tab"/><div class="caption"><p>Building a mobile-ready Visualforce tab</p></div></div><p>The <span class="strong"><strong>Mobile Ready</strong></span> checkbox is used to specify whether the Visualforce page displays and functions properly in a mobile browser. By selecting the <span class="strong"><strong>Mobile Ready</strong></span> checkbox, we can add the tab to the list of available tabs for our mobile configuration.</p></div><div class="section" title="Creating the mobile configuration"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec31"/>Creating the mobile configuration</h2></div></div></div><p>When we use <a id="id283" class="indexterm"/>Salesforce Mobile, we have to determine the mobile user's data and the permissions given to mobile users. Mobile configuration is a set of parameters. An organization can have multiple mobile configurations for different kinds of mobile users. When we create a mobile configuration, a particular user must be assigned to a mobile license.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip35"/>Tip</h3><p>If the user account's <span class="strong"><strong>Mobile User</strong></span> checkbox is checked, then this means that the user is already identified as a mobile user, unless we give the <span class="strong"><strong>Manage Mobile Configurations</strong></span> permission<a id="id284" class="indexterm"/> to the user's profile or the permission set.</p></div></div><p>To create a mobile configuration, navigate to:</p><p>
<span class="strong"><strong>YourName</strong></span> | <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Mobile Administration</strong></span> | <span class="strong"><strong>Salesforce Mobile</strong></span> | <span class="strong"><strong>Configuration</strong></span> | <span class="strong"><strong>New Mobile Configuration</strong></span>
</p><p>Only the active mobile configuration will be available for use. Optionally, we can select the <span class="strong"><strong>Mobilize Recent Items</strong></span> option to mark recently the used records in Salesforce for device synchronization and the <span class="strong"><strong>Mobilize Recent Items</strong></span> option to select a value from the <span class="strong"><strong>Maximum Number of Recent Items</strong></span> drop-down list. In the mobile configuration, we can add an individual user or we can use a profile to give the permissions. We don't sync if the data size exceeds property to avoid overloading of mobile device. To do that, we have to specify the maximum size of data that is allowed for all data sets combined in this mobile configuration.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip36"/>Tip</h3><p>Salesforce.com will not synchronize any data sets if the combined data size exceeds this limit.</p></div></div><p>After creating the mobile configuration, we can define the data set by adding objects and records, and automatically synchronizing the mobile devices.</p><p>After developing Visualforce Mobile pages, we have to test them for checking the functionality and the appearance. For that, we can install the mobile application on a BlackBerry or an iPhone device or we can use the iPhone or BlackBerry simulator.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec42"/>Summary</h1></div></div></div><p>In this chapter, we learned about Salesforce Mobile and the usage of Salesforce Mobile. We became familiar with the way of extending applications built on the Force.com platform to mobile devices and how we can use Visualforce Mobile. We understood how to develop and mobilize Visualforce pages. We have seen the supporting configurations of mobile devices for a Visualforce Mobile.</p></div></body></html>