<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch11" class="calibre1"/>Chapter 11. Abstracting CSS Frameworks with Less</h1></div></div></div><p class="calibre7">Back in late 2011, the popular social networking site, Twitter, released Bootstrap—the framework caused such an impression, it quickly became the most followed project on GitHub!</p><p class="calibre7">Anybody who has spent time developing must have at least heard of Bootstrap, even if they haven't yet had a chance to use it. In the previous chapter, we took a brief look at how it uses Less to compile rules into valid CSS and how you can experiment with using one of the many mixins available to create your own styles.</p><p class="calibre7">The trouble is that Bootstrap as a framework is not without its own faults—it encourages us to overload HTML with dozens of classes! This goes against the trend that has developed over the last decade, where content should be separate from presentation. In this chapter, we'll see why this is bad practice and how we can fix the problem by being clever about how we use Bootstrap's mixins.</p><p class="calibre7">In this chapter, we will cover the following topics:</p><div><ul class="itemizedlist"><li class="listitem">Discovering what's wrong with using frameworks</li><li class="listitem">Keeping your HTML clean</li><li class="listitem">Simplifying complex styles</li></ul></div><p class="calibre7">Keen to learn more? Let's get started…!</p></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch11lvl1sec95" class="calibre1"/>Discovering what's wrong with using frameworks</h1></div></div></div><p class="calibre7">Think back to<a id="id804" class="calibre1"/> the previous chapter, where we introduced Bootstrap and covered how Less is used to create the styles that are compiled into clean, semantic HTML…Bootstrap looks good, is easy to use, and provides a nice, consistent theme to our site, right?</p><p class="calibre7">Wrong—it suffers from one particularly nasty problem: Bootstrap embeds CSS classes directly within HTML. We could argue that there is nothing wrong with that, except for the fact that the style names used are not always semantic!</p><p class="calibre7">This whole concept of providing semantic code has been at the forefront of developers' minds for years. Some frameworks such as Scaffold (for PHP) or Compass (for Ruby) recognized<a id="id805" class="calibre1"/> the problem back as far as 2009, yet Bootstrap still forces us to use nonsemantic CSS styling in our HTML code. To see what this all means, let's delve in deeper, take a look at an example, and understand how we can correct this using Less.</p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch11lvl1sec96" class="calibre1"/>Diagnosing the problem</h1></div></div></div><p class="calibre7">To see<a id="id806" class="calibre1"/> the problem in the flesh, so to speak, we need to view the source code for a Bootstrap-enabled site; ironically, the main Bootstrap website has several examples, which clearly show the issue!</p><p class="calibre7">Begin by navigating to <a class="calibre1" href="http://getbootstrap.com/examples/blog/">http://getbootstrap.com/examples/blog/</a>, which is the demo site <a id="id807" class="calibre1"/>for Bootstrap's Blog Theme. Right-click anywhere on the page to select the source code as seen in the browser. If you scroll down to on or around line 42, you will see the following:</p><div><img src="img/00111.jpeg" alt="Diagnosing the problem" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In the screenshot, lines 50 and 52 have been highlighted, which are perfect examples of nonsemantic code; the three styles that have been added all belong to Bootstrap. "Why should we not use them when they are clearly a part of Bootstrap?", I hear you ask.</p><div><h3 class="title2"><a id="note55" class="calibre1"/>Note</h3><p class="calibre7">For a useful introduction to the benefits of separating markup, then look no further than the book, <em class="calibre9">Designing with Web Standards</em>, by Jeffery Zeldman (and Ethan Marcotte, from Version 3 onwards).</p></div><p class="calibre7">The answer is simple—the HTML markup should describe the meaning of the content and nothing else. The problems we have with this code extract are two-fold:</p><div><ul class="itemizedlist"><li class="listitem">It makes it difficult to update any code style—if a style needs to be changed, then this must be done in every single page of the website, where it appears. This can <a id="id808" class="calibre1"/>be tedious at best for a small site, but a nightmare if the site is huge!</li><li class="listitem">Hardcoding Bootstrap's style names into your HTML code means that you are now dependent on Bootstrap. If Twitter changes Bootstrap's classes (which has happened), then you've just landed yourself a whole heap of unnecessary work.</li></ul></div><div><h3 class="title2"><a id="note56" class="calibre1"/>Note</h3><p class="calibre7">It's always a good idea to keep an eye on versions being used in your code and not simply use the latest version. Following the latter practice leaves you open to trouble!</p></div><p class="calibre7">Fortunately, the answer to our dilemma lies in Bootstrap itself and its array of mixins. Instead of using the Bootstrap class names within our code, we can abstract in a layer by creating more semantic names and applying the Bootstrap classes to these names instead. To see how this would work, let's work through a few simple examples, using Bootstrap's Jumbotron theme demo as a basis for our changes.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch11lvl2sec91" class="calibre1"/>Keeping HTML code clean</h2></div></div></div><p class="calibre7">If we view<a id="id809" class="calibre1"/> the source for Bootstrap's Jumbotron example, we<a id="id810" class="calibre1"/> can clearly see some<a id="id811" class="calibre1"/> nonsemantic examples, similar to those used in the Blog demo; we'll<a id="id812" class="calibre1"/> use them as a basis to work through the solution that we can use to fix the issue.</p><p class="calibre7">There are three examples of interest to us; the first is on line 67:</p><div><pre class="programlisting">&lt;div class="row"&gt;</pre></div><p class="calibre7">The next example follows suit immediately on line 68:</p><div><pre class="programlisting">&lt;div class="col-md-4"&gt;</pre></div><p class="calibre7">The third and final examples we will look at, appear several times, on lines 71, 76, and 81:</p><div><pre class="programlisting">&lt;p&gt;&lt;a class="btn btn-default" href="#" role="button"&gt;View details &amp;raquo;&lt;/a&gt;&lt;/p&gt;</pre></div><p class="calibre7">It goes without saying that there are more examples present; you can see where each of our three selected examples are being used:</p><div><img src="img/00112.jpeg" alt="Keeping HTML code clean" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">All three <a id="id813" class="calibre1"/>examples use names that are too specific to<a id="id814" class="calibre1"/> what they do and not to the content they<a id="id815" class="calibre1"/> apply to. We can easily change the style names used to<a id="id816" class="calibre1"/> something more semantic, using a technique that can be reused elsewhere in your code without difficulty.</p><p class="calibre7">Let's take a look at how the technique works; it's based around directly referencing the Less mixins included as part of the Bootstrap library.</p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch11lvl1sec97" class="calibre1"/>Fixing the code</h1></div></div></div><p class="calibre7">Before <a id="id817" class="calibre1"/>we get into editing any code, we first need to download a copy of the code that accompanies this book. Here, we will find an (unadulterated) copy of the Jumbotron theme, which we can use for the purpose of this exercise:</p><div><img src="img/00113.jpeg" alt="Fixing the code" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">For the <a id="id818" class="calibre1"/>purposes of this exercise, I will assume you have extracted a copy of the code that accompanies this chapter and stored it in a folder called <code class="email">jumbotron</code>, ready for <a id="id819" class="calibre1"/>editing. We also need a copy of the Bootstrap library, which we can get from the main site at <a class="calibre1" href="http://getbootstrap.com/getting-started/#download">http://getbootstrap.com/getting-started/#download</a> and then by clicking on <strong class="calibre8">Download source</strong> against the <strong class="calibre8">Source code</strong> option.</p><p class="calibre7">Assuming we have everything in place, let's make a start:</p><div><ol class="orderedlist"><li class="listitem" value="1">Open the zip archive file we downloaded from the Bootstrap site, then extract the <code class="email">less</code> folder, and copy it to our <code class="email">jumbotron</code> folder.</li><li class="listitem" value="2">In a separate file, add the following code, saving it as <code class="email">semantic.less</code> in the <code class="email">css</code> subfolder within the <code class="email">jumbotron</code> folder:<div><pre class="programlisting">@import "../less/variables.less";
@import "../less/mixins.less";
@import "../less/buttons.less";
@import "../less/grid.less";

.wrapper {
  .container;
}

.left-content {
  .make-md-column(4);
}

.middle-content {
  .make-md-column(4);
}

.right-content {
  .make-md-column(4);
}

.heading-row {
  .make-row();
  .clearfix;
}</pre></div></li><li class="listitem" value="3">Now, we <a id="id820" class="calibre1"/>need to alter our HTML, so open <code class="email">jumbotron.html</code> and add the highlighted line:<div><pre class="programlisting">    &lt;!-- Custom styles for this template --&gt;
    &lt;link href="css/jumbotron.css" rel="stylesheet"&gt;
<strong class="calibre8">    &lt;link href="css/semantic.css" rel="stylesheet"&gt;</strong>
  &lt;/head&gt;</pre></div></li><li class="listitem" value="4">Next, we're going to rename each of the three columns; move down and look for the first <code class="email">&lt;div class="col-md-4"&gt;</code> tag, which is on or around line 60. This can be removed and replaced as shown in the following code; you will need to repeat it for two more instances further down the code:<div><pre class="programlisting">    &lt;div class="container"&gt;
      &lt;!-- Example row of columns --&gt;
      &lt;div class="row"&gt;
<strong class="calibre8">        &lt;div class="left-content"&gt;</strong>
          &lt;h2&gt;Heading&lt;/h2&gt;
          &lt;p&gt;Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. &lt;/p&gt;
          &lt;p&gt;&lt;a class="btn btn-default" href="#" role="button"&gt;View details &amp;raquo;&lt;/a&gt;&lt;/p&gt;
        &lt;/div&gt;</pre></div></li><li class="listitem" value="5">Our third change concerns the heading row container; <code class="email">row</code> isn't sufficiently semantic, so we're going to change it:<div><pre class="programlisting">&lt;!--&lt;div class="container"&gt;--&gt;
    &lt;div class="wrapper"&gt;
      &lt;!-- Example row of columns --&gt;
<strong class="calibre8">      &lt;div class="heading-row"&gt;</strong>
        &lt;div class="left-content"&gt;
          &lt;h2&gt;Heading&lt;/h2&gt;
          &lt;p&gt;Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. &lt;/p&gt;
          &lt;p&gt;&lt;a class="view-details" href="#" role="button"&gt;View details &amp;raquo;&lt;/a&gt;&lt;/p&gt;
        &lt;/div&gt;</pre></div></li><li class="listitem" value="6">Our last <a id="id821" class="calibre1"/>change concerns the <code class="email">&lt;div&gt;</code> tag that is used to wrap the three columns. The container isn't particularly semantic, so we're going to change this to use the wrapper as its replacement. Go ahead and remove the container <code class="email">DIV</code> line and then replace it as shown:<div><pre class="programlisting">
<strong class="calibre8">    &lt;div class="wrapper"&gt;</strong>
      &lt;!-- Example row of columns --&gt;
      &lt;div class="heading-row"&gt;
        &lt;div class="left-content"&gt;
          &lt;h2&gt;Heading&lt;/h2&gt;</pre></div></li></ol><div></div><p class="calibre7">If we preview the results in a browser, we should not expect to see any change visually, but be safe in knowing that we have started to use more semantic class names within our code.</p><p class="calibre7">There is one very valid point here—it would be a perfectly valid question to ask why we use <code class="email">wrapper</code>, in place of <code class="email">container</code> here? We could equally use either, nothing wrong with that. My preference though is to use the wrapper here, purely because it encompasses all of the code (give or take!).</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch11lvl2sec92" class="calibre1"/>Exploring our solution</h2></div></div></div><p class="calibre7">So, now<a id="id822" class="calibre1"/> that we have semantic code in our example, what does this<a id="id823" class="calibre1"/> mean and how does it work? It's based on two key elements: one of substitution and the other of knowing the available Bootstrap mixins that we can use.</p><p class="calibre7">In this instance, we've taken advantage of the group of Less mixins that form the basis for creating columns and rows within Bootstrap. We first import four Less files, which contain the mixins that we need to use, then create four new styles (in the form of <code class="email">left-content</code>, <code class="email">middle-content</code>, <code class="email">right-content</code>, and <code class="email">heading-row</code>), and assign the <code class="email">make-md-column</code>, <code class="email">make-row</code>, or <code class="email">clearfix</code> mixins as appropriate. To ensure that our HTML reflects the changes, we then replace the original styles with the new, more semantic style names.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch11lvl1sec98" class="calibre1"/>Simplifying complex styles</h1></div></div></div><p class="calibre7">We can go<a id="id824" class="calibre1"/> further in our code to abstract and simplify the presentational classes being used; as an example, we'll edit the code to replace the CSS style names used on the two button types present in the code:</p><div><ol class="orderedlist"><li class="listitem" value="1">Let's start by opening up the <code class="email">jumbotron.html</code> file again. Here, we need to remove the line starting with <code class="email">&lt;p&gt;&lt;a class="btn btn-default"</code>… and replace it as indicated:<div><pre class="programlisting">&lt;!--&lt;div class="container"&gt;--&gt;
    &lt;div class="wrapper"&gt;
      &lt;!-- Example row of columns --&gt;
      &lt;div class="row"&gt;
        &lt;div class="left-content"&gt;
          &lt;h2&gt;Heading&lt;/h2&gt;
          &lt;p&gt;Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. &lt;/p&gt;
<strong class="calibre8">          &lt;p&gt;&lt;a class="view-details" href="#" role="button"&gt;View details &amp;raquo;&lt;/a&gt;&lt;/p&gt;</strong>
        &lt;/div&gt;</pre></div></li><li class="listitem" value="2">We also need to change the current classes assigned to the <strong class="calibre8">Learn more</strong> button, so go ahead and modify it as shown:<div><pre class="programlisting">Use it as a starting point to create something more unique.&lt;/p&gt;
<strong class="calibre8">        &lt;p&gt;&lt;a class="learn-more" role="button"&gt;Learn more &amp;raquo;&lt;/a&gt;&lt;/p&gt;</strong>
      &lt;/div&gt;</pre></div></li><li class="listitem" value="3">Now that our new style names have been assigned, let's rework the Less styling rules listed in <code class="email">semantic.less</code> to reflect the changes in our HTML, by assigning the relevant mixins to our style classes:<div><pre class="programlisting">.learn-more {
  .btn;
  .btn-primary;
  .btn-lg;
}

.view-details {
  .btn;
  .btn-default;
}</pre></div></li></ol><div></div><p class="calibre7">Save the files. If all is well, our code will look something like this screenshot extract:</p><div><img src="img/00114.jpeg" alt="Simplifying complex styles" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">If we<a id="id825" class="calibre1"/> preview the results of our work in a browser, we should not expect to see any difference visually, but know that our code is now more semantic. This doesn't mean to say that these changes are the only ones we can do; there is definitely scope to do more, at least in this example! This is something I will leave for you as my readers to work out, but I will give you a hint: check out the navigation…</p><p class="calibre7">In the meantime, let's take a moment to explore what we've achieved here—we've used the same solution as outlined in the <em class="calibre9">Exploring our solution</em> section we saw earlier in the chapter.</p><p class="calibre7">In this instance, we've taken advantage of the group of Less mixins that make up button support within Bootstrap. All we've done is created a new style rule in our Less code, called <code class="email">.learn-more</code>, then assigned to it the three Less mixins that were previously used: <code class="email">.btn</code>, <code class="email">.btn-primary</code>, and <code class="email">.btn-lg</code>, respectively.</p><div><h3 class="title2"><a id="note57" class="calibre1"/>Note</h3><p class="calibre7">It's important to note that this process will not work for grouped buttons due to what Bootstrap expects to see in terms of CSS classes; have a look at <a class="calibre1" href="http://stackoverflow.com/questions/24113419/">http://stackoverflow.com/questions/24113419/</a> and <a class="calibre1" href="http://stackoverflow.com/a/24240819">http://stackoverflow.com/a/24240819</a>, for some useful discussions on why this doesn't work for grouped buttons and how to work around it.</p></div><p class="calibre7">The key is to get them in the right order so that we maintain the same appearance as before. As long as we do this, there should be no change to the appearance of the page. We've then repeated the same process with the <code class="email">.view-details </code>button, but this time, assigned the <code class="email">.btn</code> and <code class="email">.btn-default</code> styles to it.</p><div><h3 class="title2"><a id="note58" class="calibre1"/>Note</h3><p class="calibre7">There is a complete version of <code class="email">jumbotron.html</code> along with the changes. You can<a id="id826" class="calibre1"/> find it in the code download as <code class="email">jumbotron_updated.html</code>.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch11lvl1sec99" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">In this modern day of web development, designers are often using frameworks to help get a website off the ground quickly. Bootstrap is often considered to be one of the most popular frameworks in use today.</p><p class="calibre7">We kicked off this chapter by examining a key flaw of frameworks such as Bootstrap, where presentational CSS must be included in HTML directly.</p><p class="calibre7">We took a look at the problem with using Bootstrap's CSS styles inline in more detail and discussed how to use a method to get around the issues. We then went on further to apply the same technique to help simplify our HTML so that we can still use Bootstrap's styling framework, while removing any dependency on it, which can affect how we develop the site in the future.</p><p class="calibre7">In the next chapter, we're going to change tack and take a look at a topic where we can really use the power of Less, in the form of processing colors within your website or online application.</p></div></body></html>