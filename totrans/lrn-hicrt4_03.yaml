- en: Chapter 3. Line, Area, and Scatter Charts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章：折线图、面积图和散点图
- en: 'In this chapter, we will learn about line, area, and scatter charts and explore
    their plotting options in more details. We will also learn how to create a stacked
    area chart and projection charts. Then, we will attempt to plot the charts in
    a slightly more artistic style. The reason for that is to provide us with an opportunity
    to utilize various plotting options. In this chapter, we will cover the following:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将学习折线图、面积图和散点图，并更详细地探讨它们的绘图选项。我们还将学习如何创建堆叠面积图和投影图。然后，我们将尝试以稍微更艺术化的风格绘制图表。这样做的原因是给我们一个机会利用各种绘图选项。在本章中，我们将涵盖以下内容：
- en: Introducing line charts
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍折线图
- en: Sketching an area chart
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制面积图
- en: Highlighting and raising the base level
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 突出显示和提高基准水平
- en: Mixing line and area series
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 混合线形和面积系列
- en: Combining scatter and area series
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结合散点图和面积系列
- en: Introducing line charts
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍折线图
- en: 'First let''s start with a single-series line chart. We will use one of the
    many data sets provided by *The World Bank* organization at [www.worldbank.org](http://www.worldbank.org).
    The following is the code snippet to create a simple line chart that shows the
    percentage of population aged 65 and above in Japan for the past three decades:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们从一个单系列折线图开始。我们将使用由*世界银行*组织提供的许多数据集之一。以下是一个创建简单折线图的代码片段，该图显示了日本过去三十年65岁及以上人口的比例：
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following is the display of the simple chart:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个简单图表的显示：
- en: '![Introducing line charts](img/7451OS_03_01.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![介绍折线图](img/7451OS_03_01.jpg)'
- en: 'Instead of specifying the year number manually as strings in categories, we
    can use the `pointStart` option in the `series` config to initiate the *x* axis
    value for the first point. So we have an empty `xAxis` config and `series` config,
    as follows:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在类别中，我们不是手动指定年份数字作为字符串，而是可以在`series`配置中使用`pointStart`选项来启动第一个点的*x*轴值。因此，我们有空的`xAxis`配置和`series`配置，如下所示：
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Extending to multiple-series line charts
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 扩展到多系列折线图
- en: 'We can include several more line series and emphasize the Japan series by increasing
    the line width to be `6`-pixels wide, as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以包括更多的线系列，并通过将线宽增加到`6`像素宽来强调日本系列，如下所示：
- en: '[PRE2]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'By making that line thicker, the line series for the Japanese population becomes
    the focus in the chart, as shown in the following screenshot:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使那条线更粗，日本人口折线系列在图表中成为焦点，如下面的截图所示：
- en: '![Extending to multiple-series line charts](img/7451OS_03_02.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![扩展到多系列折线图](img/7451OS_03_02.jpg)'
- en: 'Let''s move on to a more complicated line graph. For the sake of demonstrating
    inverted line graphs, we use the `chart.inverted` option to flip the y and x axes
    to opposite orientations. Then, we change the line colors of the axes to match
    the same series colors as in the previous chapter. We also disable data point
    markers for all the series, and finally align the second series to the second
    entry on the y-axis array, as follows:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续到一个更复杂的折线图。为了演示倒置的折线图，我们使用`chart.inverted`选项将y轴和x轴翻转成相反的方向。然后，我们更改轴的线颜色以匹配上一章中的系列颜色。我们还禁用了所有系列的标记点，并最终将第二个系列与y轴数组上的第二个条目对齐，如下所示：
- en: '[PRE3]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The following is the inverted graph with double y axes:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个带有双y轴的倒置图表：
- en: '![Extending to multiple-series line charts](img/7451OS_03_03.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![扩展到多系列折线图](img/7451OS_03_03.jpg)'
- en: The data representation of the chart may look slightly odd as the usual time
    labels are swapped to the *y* axis and the data trend is difficult to comprehend.
    The `inverted` option is normally used for showing data in a non-continuous form
    and in a bar format. If we interpret the data from the graph, 12 percent of the
    population is 65 or over in 1990, and the life expectancy is 79.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 由于通常的时间标签被交换到*y*轴上，数据趋势难以理解，因此图表的数据表示可能看起来有些奇怪。`inverted`选项通常用于以非连续形式和条形格式显示数据。如果我们从图中解释数据，1990年有12%的人口年龄在65岁或以上，预期寿命为79岁。
- en: 'Setting `plotOptions.series.marker.enabled` to `false` switches off all the
    data point markers. If we want to display a point marker for a particular series,
    we can either switch off the marker globally and then turn the marker on for individual
    series, or the other way round:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 将`plotOptions.series.marker.enabled`设置为`false`将关闭所有数据点标记。如果我们想显示特定系列的点标记，我们可以全局关闭标记然后为单个系列打开标记，或者反过来：
- en: '[PRE4]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The following graph demonstrates that only the 65-and-over series has point
    markers:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示，只有65岁以上的系列有数据点标记：
- en: '![Extending to multiple-series line charts](img/7451OS_03_15.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![扩展到多系列线条图表](img/7451OS_03_15.jpg)'
- en: Highlighting negative values and raising the base level
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 突出显示负值并提高基准水平
- en: 'Sometimes, we may want to highlight both positive and negative regions in different
    colors. In such cases, we can specify the series color for negative values with
    the series option, `negativeColor`. Let''s create a simple example with inflation
    data, containing both positive and negative data. Here is the series configuration:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，我们可能希望用不同的颜色突出显示正负区域。在这种情况下，我们可以使用系列选项`negativeColor`指定负值的系列颜色。让我们创建一个包含正负数据的简单通货膨胀数据示例。以下是系列配置：
- en: '[PRE5]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'We assign the color red for negative inflation values and disable the markers
    in the line series. The line series color is defined by another color, blue, which
    is used for positive values. The following is the graph showing the series in
    separate colors:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将负通货膨胀值指定为红色，并在线条系列中禁用标记。线条系列的颜色由另一种颜色定义，即蓝色，用于正值。以下是以不同颜色显示系列的图表：
- en: '![Highlighting negative values and raising the base level](img/7451OS_03_21.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![突出显示负值并提高基准水平](img/7451OS_03_21.jpg)'
- en: 'Let''s create another slightly more advanced example, in which we define the
    negative territory in terms of the subject. We plot another inflation chart, but
    based on the **European Central Bank** (**ECB**) definition of healthy inflation
    that is 2 percent. Anything below that level is regarded as unhealthy for the
    economy, so we set the color below that threshold to red. Beside the color threshold,
    we also set up a plotline on the y-axis to indicate the cut-off level. The following
    is our first try to set up the chart:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建另一个稍微复杂一点的例子，其中我们根据主题定义负值区域。我们绘制另一个通货膨胀图表，但基于**欧洲中央银行**（**ECB**）对健康通货膨胀2%的定义。任何低于该水平的都被认为对经济不健康，因此我们将低于该阈值的颜色设置为红色。除了颜色阈值外，我们还在y轴上设置了一条折线，以指示截止水平。以下是我们设置图表的第一个尝试：
- en: '[PRE6]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'We set up a green plotline along the y-axis at the value 2, 3 pixels wide.
    The `zIndex` option is to avoid the interval line appearing on top of the plot
    line. With the inflation line series, we disable the markers and also set the
    line width to 3 pixels wide. The following is the initial attempt without thresholding:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在y轴上设置了值为2的绿色折线，宽度为3像素。`zIndex`选项是为了避免间隔线出现在折线上方。对于膨胀线系列，我们禁用了标记，并将线宽设置为3像素宽。以下是没有阈值处理的初始尝试：
- en: '![Highlighting negative values and raising the base level](img/7451OS_03_19.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![突出显示负值并提高基准水平](img/7451OS_03_19.jpg)'
- en: 'Let''s apply the threshold level to the lines series. The default negative
    color on the y-axis level is at 0 value. As for this particular example, the base
    level for a negative color would be 2\. To raise the base level to 2, we set the
    `threshold` property along with the `negativeColor` option:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将阈值水平应用于线条系列。y轴上默认的负色值在0处。对于这个特定的例子，负色的基准水平是2。为了将基准水平提高到2，我们设置了`threshold`属性以及`negativeColor`选项：
- en: '[PRE7]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The preceding modification turns part of the line series red to indicate an
    alert:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的修改将部分线条系列变为红色，以表示警告：
- en: '![Highlighting negative values and raising the base level](img/7451OS_03_20.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![突出显示负值并提高基准水平](img/7451OS_03_20.jpg)'
- en: Sketching an area chart
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绘制面积图
- en: 'In this section, we are going to use our very first example and turn it into
    a more stylish graph (based on the design of a wind energy poster by Kristin Clute):
    an area spline chart. An **area spline chart** is generated using the combined
    properties of area and spline charts. The main data line is plotted as a spline
    curve and the region underneath the line is filled in a similar color with a gradient
    and opaque style:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用我们的第一个示例并将其转变为一个更时尚的图表（基于Kristin Clute设计的风能海报）：面积样条图。**面积样条图**是通过面积图和样条图的组合属性生成的。主要数据线以样条曲线的形式绘制，线下方的区域以类似颜色填充，具有渐变和不透明样式：
- en: '![Sketching an area chart](img/7451OS_03_04.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![绘制面积图](img/7451OS_03_04.jpg)'
- en: 'First, we want to make the graph easier for viewers to look up the values for
    the current trend, so we move the y-axis values to the right side of the chart,
    where they will be closest to the most recent year:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们希望使图表更容易让观众查找当前趋势的值，因此我们将y轴值移动到图表的右侧，这样它们将最接近最近的一年：
- en: '[PRE8]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The next thing is to remove the interval lines and have a thin axis line along
    the y axis:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是移除间隔线，并在y轴上有一条细轴线：
- en: '[PRE9]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Then, we simplify the y-axis title with a percentage sign and align to the
    top of the axis:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们使用百分比符号简化y轴标题，并将其对齐到轴的顶部：
- en: '[PRE10]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'As for the x axis, we thicken the axis line with red and remove the interval
    ticks:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 至于x轴，我们用红色加粗轴线，并移除间隔刻度：
- en: '[PRE11]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'For the chart title, we move the title to the right of the chart, increase
    the margin between the chart and the title, and then adopt a different font for
    the title:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 对于图表标题，我们将标题移动到图表的右侧，增加图表和标题之间的边距，并为标题采用不同的字体：
- en: '[PRE12]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: After that, we are going to modify the whole series presentation, so we first
    change the `chart.type` property from `'line'` to `'areaspline'`. Notice that
    setting the properties inside this `series` object will overwrite the same properties
    defined in `plotOptions.areaspline` and so on in `plotOptions.series`.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，我们将修改整个系列的展示，所以我们首先将`chart.type`属性从`'line'`更改为`'areaspline'`。请注意，在这个`series`对象内部设置属性将覆盖在`plotOptions.areaspline`等`plotOptions.series`中定义的相同属性。
- en: 'Since so far there is only one series in the graph, there is no need to display
    the legend box. We can disable it with the `showInLegend` property. We then smarten
    the area part with a gradient color and the spline with a darker color:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 由于到目前为止图中只有一个系列，因此没有必要显示图例框。我们可以使用`showInLegend`属性来禁用它。然后，我们使用渐变色智能地处理面积部分，并使用较深的颜色处理样条线：
- en: '[PRE13]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'After that, we introduce a couple of data labels along the line to indicate
    that the ranking of old age population has increased over time. We use the values
    in the series data array corresponding to the year 1995 and 2010, and then convert
    the numerical value entries into data point objects. Since we only want to show
    point markers for these two years, we turn off markers globally in `plotOptions.series.marker.enabled`
    and set the marker on individually inside the point objects, accompanied by style
    settings:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，我们在沿线引入了一些数据标签，以表明老龄人口排名随时间增加。我们使用对应于1995年和2010年的系列数据数组中的值，然后将数值条目转换为数据点对象。由于我们只想显示这两年的点标记，我们在`plotOptions.series.marker.enabled`中全局关闭标记，并在点对象内部单独设置标记，并伴随样式设置：
- en: '[PRE14]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'We then set a bounding box around the data labels with round corners (`borderRadius`)
    in the same border color (`borderColor`) as the x axis. The data label positions
    are then finely adjusted with the `x` and `y` options. Finally, we change the
    default implementation of the data label formatter. Instead of returning the point
    value, we print the country ranking:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先在数据标签周围设置了一个圆角边框（`borderRadius`），其边框颜色（`borderColor`）与x轴相同。然后，我们使用`x`和`y`选项对数据标签位置进行精细调整。最后，我们更改了数据标签格式器的默认实现。我们不再返回点值，而是打印国家排名：
- en: '[PRE15]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The final touch is to apply a gray background to the chart and add extra space
    for `spacingBottom`. The extra space for `spacingBottom` is to avoid the credit
    label and x-axis label getting too close together, because we have disabled the
    legend box:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的修饰是给图表添加灰色背景，并为`spacingBottom`添加额外空间。`spacingBottom`的额外空间是为了避免信用标签和x轴标签过于接近，因为我们已经禁用了图例框：
- en: '[PRE16]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: When all these configurations are put together, it produces the chart shown
    in the screenshot at the start of this section.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 当所有这些配置组合在一起时，它会产生本节开头截图所示的图表。
- en: Mixing line and area series
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 混合线形和面积系列
- en: 'In this section, we are going to explore different plots including line and
    area series together, as follows:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将探索不同的图表，包括线形和面积系列，如下所示：
- en: Creating a projection chart, where a single trend line is joined with two series
    in different line styles
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个投影图，其中一条趋势线与两种不同线型的系列连接
- en: Plotting an area spline chart with another step line series
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制一个带有另一个步进线系列的区域样条图
- en: Exploring a stacked area spline chart, where two area spline series are stacked
    on top of each other
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索一个堆叠的面积样条图，其中两个面积样条系列堆叠在一起
- en: Simulating a projection chart
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模拟一个投影图
- en: 'The projection chart has a spline area with the section of real data, and continues
    in a dashed line with the projection data. To do that we separate the data into
    two series, one for real data and the other for projection data. The following
    is the series configuration code for the data from the year 2015 to 2024\. This
    data is based on the National Institute of Population and Social Security Research
    report ([http://www.ipss.go.jp/pp-newest/e/ppfj02/ppfj02.pdf](http://www.ipss.go.jp/pp-newest/e/ppfj02/ppfj02.pdf)):'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 投影图具有与实际数据部分相对应的样条面积，并使用投影数据以虚线形式继续。为此，我们将数据分为两个系列，一个用于实际数据，另一个用于投影数据。以下是从2015年到2024年的数据系列配置代码。这些数据基于国家人口和社会安全研究所的报告（[http://www.ipss.go.jp/pp-newest/e/ppfj02/ppfj02.pdf](http://www.ipss.go.jp/pp-newest/e/ppfj02/ppfj02.pdf)）：
- en: '[PRE17]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The future series is configured as a spline in a dashed line style and the
    legend box is disabled, because we want to show both series as being part of the
    same series. Then we set the future (second) series color the same as the first
    series. The final part is to construct the series data. As we specify the x-axis
    time data with the `pointStart` property, we need to align the projection data
    after 2014\. There are two approaches that we can use to specify the time data
    in a continuous form, as follows:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 未来系列配置为虚线样式的样条线，图例框被禁用，因为我们想显示两个系列作为同一系列的一部分。然后我们将未来（第二个）系列的颜色设置为与第一个系列相同。最后部分是构建系列数据。由于我们使用`pointStart`属性指定了x轴时间数据，我们需要在2014年之后对齐投影数据。我们可以使用两种方法来指定时间数据，如下所示：
- en: Insert null values into the second series data array for padding, to align with
    the real data series
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在第二个系列数据数组中插入空值，以与实际数据系列对齐
- en: Specify the second series data in `tuples`, an array with both time and projection
    data
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`tuples`中指定第二个系列数据，这是一个包含时间和投影数据的数组
- en: 'Here we are going to use the second approach because the series presentation
    is simpler. The following is the screenshot for the future data series only:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用第二种方法，因为系列表示更简单。以下仅为未来数据系列的截图：
- en: '![Simulating a projection chart](img/7451OS_03_16.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![模拟投影图](img/7451OS_03_16.jpg)'
- en: 'The real data series is exactly the same as the graph in the screenshot at
    the start of the *Sketching an area chart* section, except without the point markers
    and data labels decorations. The next step is to join both series together, as
    follows:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 实际数据系列与*绘制面积图*部分开头截图中的图表完全相同，只是没有点标记和数据标签装饰。下一步是将两个系列合并，如下所示：
- en: '[PRE18]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Since there is no overlap between both series data, they produce a smooth projection
    graph:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 由于两个系列数据之间没有重叠，它们产生了一个平滑的投影图：
- en: '![Simulating a projection chart](img/7451OS_03_09.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![模拟投影图](img/7451OS_03_09.jpg)'
- en: Contrasting a spline with a step line
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对比样条线和步骤线
- en: 'In this section, we are going to plot an area spline series with another line
    series, but in step presentation. The step line transverses vertically and horizontally
    according to changes in series data only. It is generally used for presenting
    discrete data: data without continuous/gradual movement.'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将以步骤形式绘制一个面积样条图系列和另一个线条系列。步骤线根据系列数据的变化在垂直和水平方向上穿越。它通常用于表示离散数据：没有连续/渐进运动的数据。
- en: For the purpose of showing a step line, we will continue from the first area
    spline example. First of all, we need to enable the legend by removing the disabled
    `showInLegend` setting and also remove `dataLabels` in the series data.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 为了显示步骤线，我们将从第一个面积样条图示例继续。首先，我们需要通过移除禁用的`showInLegend`设置来启用图例，并在系列数据中移除`dataLabels`。
- en: 'Next is to include a new series—**Ages 0 to 14**—in the chart with the default
    line type. Then, we change the line style slightly into different steps. The following
    is the configuration for both series:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是在图表中包含一个新的系列——**0至14岁**——并使用默认的线条类型。然后，我们将线条样式稍作调整，变为不同的步骤。以下是为两个系列配置的以下内容：
- en: '[PRE19]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The following screenshot shows the second series in line step style:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了线条步骤样式中的第二个系列：
- en: '![Contrasting a spline with a step line](img/7451OS_03_05.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![对比样条线和步骤线](img/7451OS_03_05.jpg)'
- en: Extending to the stacked area chart
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 扩展到堆叠面积图
- en: In this section, we are going to turn both series into area splines and stack
    them on top of each other to create a stacked area chart. As the data series are
    stacked together, we can observe the series quantities as individual, proportional,
    and total amounts.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将把两个序列都转换为面积样条图，并将它们堆叠在一起以创建堆叠面积图。由于数据序列堆叠在一起，我们可以观察到各个序列的数量作为单独的、成比例的和总数量。
- en: 'Let''s change the second series into another `''areaspline''` type:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将第二个序列更改为另一种 `'areaspline'` 类型：
- en: '[PRE20]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Set the `stacking` option to `''normal''` as a default setting for `areaspline`,
    as follows:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 将 `stacking` 选项设置为 `areaspline` 的默认设置 `'normal'`，如下所示：
- en: '[PRE21]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'This sets both area graphs stacked on top of each other. By doing so, we can
    observe from the data that both age groups roughly compensate for each other to
    make up a total of around 33 percent of the overall population, and the **Ages
    65 and over** group is increasingly outpaced in the later stage:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 这样就设置了两个堆叠在彼此之上的面积图。通过这样做，我们可以从数据中观察到，两个年龄组大致相互补偿，总共约占总体人口的 33%，而 **65 岁及以上**
    的群体在后期阶段逐渐落后：
- en: '![Extending to the stacked area chart](img/7451OS_03_06.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![扩展到堆叠面积图](img/7451OS_03_06.jpg)'
- en: 'Suppose we have three area spline series and we only want to stack two of them
    (although it is clearer to do that in a column chart rather than in an area spline
    chart). As described in the *Exploring PlotOptions* section in [Chapter 2](ch02.html
    "Chapter 2. Highcharts Configurations"), *Highcharts Configurations*, we can set
    the `stacking` option in `plotOptions.series` to `''normal''`, and manually turn
    off `stacking` in the third series configuration. The following is the series
    configuration with another series:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们有三个面积样条序列，我们只想堆叠其中的两个（尽管在柱状图中这样做更清晰，而不是在面积样条图中）。如[第 2 章](ch02.html "第 2
    章。Highcharts 配置")中 *探索 PlotOptions* 部分所述，*Highcharts 配置*，我们可以在 `plotOptions.series`
    中设置 `stacking` 选项为 `'normal'`，并在第三个序列配置中手动关闭 `stacking`。以下是与另一个序列的序列配置：
- en: '[PRE22]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'This creates an area spline graph with the third series **Ages 15 to 64** covering
    the other two stacked series, as shown in the following screenshot:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 这创建了一个包含第三个序列 **15 至 64 岁** 覆盖其他两个堆叠序列的面积样条图，如下面的截图所示：
- en: '![Extending to the stacked area chart](img/7451OS_03_17.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![扩展到堆叠面积图](img/7451OS_03_17.jpg)'
- en: Plotting charts with missing data
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 绘制具有缺失数据的图表
- en: 'If a series has missing data, then the default action of Highcharts is to display
    the series as a broken line. There is an option—`connectNulls`—that allows a series
    line to continue even if there is missing data. The default value for this option
    is `false`. Let''s examine the default behavior by setting two spline series with
    null data points. We also enable the point markers, so that we can clearly view
    the missing data points:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个序列有缺失数据，那么 Highcharts 的默认行为是将序列显示为折线图。有一个选项——`connectNulls`——允许即使在存在缺失数据的情况下，序列线也可以继续。此选项的默认值是
    `false`。让我们通过设置两个具有空数据点的样条序列来检查默认行为。我们还启用了数据点标记，以便我们可以清楚地查看缺失的数据点：
- en: '[PRE23]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The following is a chart with the spline series presenting missing points in
    different styles:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个具有不同样式的样条序列表示缺失点的图表：
- en: '![Plotting charts with missing data](img/7451OS_03_18.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![绘制具有缺失数据的图表](img/7451OS_03_18.jpg)'
- en: As we can see, the **Ages 0 to 14** series has a clear broken line, whereas
    **Ages 65 and over** is configured by setting `connectNulls` to `true`, which
    joins the missing points with a spline curve. If the point marker is not enabled,
    we wouldn't be able to notice the difference.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，**0 至 14 岁** 的序列有一个明显的断裂线，而 **65 岁及以上** 是通过将 `connectNulls` 设置为 `true`
    来配置的，这使用样条曲线连接了缺失的点。如果未启用数据点标记，我们就无法注意到差异。
- en: 'However, we should use this option with caution and it should certainly never
    be enabled with the `stacking` option. Suppose we have a stacked area chart with
    both series and there is missing data only in the **Ages 0 to 14** series, which
    is the bottom series. The default action for the missing data will make the graph
    look like the following screenshot:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我们应该谨慎使用此选项，并且绝对不应该与 `stacking` 选项一起启用。假设我们有一个包含两个序列的堆叠面积图，并且只有 **0 至 14
    岁** 的序列中存在缺失数据，这是底部序列。对于缺失数据的默认行为将使图表看起来如下截图所示：
- en: '![Plotting charts with missing data](img/7451OS_03_07.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![绘制具有缺失数据的图表](img/7451OS_03_07.jpg)'
- en: Although the bottom series does show the broken part, the stack graph overall
    still remains correct. The same area of the top series drops back to single-series
    values and the overall percentage is still intact.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然底部系列确实显示了断裂部分，但堆叠图总体上仍然正确。顶部系列的相同区域回到单系列值，总体百分比仍然保持不变。
- en: 'The problem arises when we set the `connectNulls` option to `true` and do not
    realize that there is missing data in the series. This results in an inconsistent
    graph, as follows:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们将`connectNulls`选项设置为`true`时，问题出现了，我们没有意识到系列中存在缺失数据。这导致图表不一致，如下所示：
- en: '![Plotting charts with missing data](img/7451OS_03_08.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![绘制缺失数据的图表](img/7451OS_03_08.jpg)'
- en: The bottom series covers a hole left from the top series that contradicts the
    stack graph's overall percentage.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 底部系列覆盖了顶部系列留下的孔，这与堆叠图的总体百分比相矛盾。
- en: Combining the scatter and area series
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结合散点图和面积图
- en: Highcharts also supports a scatter chart that enables us to plot the data trend
    from a large set of data samples. Here we are going to use the scatter series
    differently, which makes our chart a bit like a poster chart.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts还支持散点图，使我们能够从大量数据样本中绘制数据趋势。在这里，我们将以不同的方式使用散点系列，这使得我们的图表有点像海报图表。
- en: 'First, we are going to use a subset of the `''Ages 0 to 14''` data and set
    the series to the `scatter` type:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将使用`'Ages 0 to 14'`数据的一个子集，并将系列设置为`scatter`类型：
- en: '[PRE24]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Then, we will enable the data labels for the `scatter` series and make sure
    the `marker` shape is always `''circle''`, as follows:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将为`scatter`系列启用数据标签，并确保`marker`形状始终为`'circle'`，如下所示：
- en: '[PRE25]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The preceding code snippet gives us the following graph:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码片段给出了以下图表：
- en: '![Combining the scatter and area series](img/7451OS_03_10.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![结合散点图和面积图](img/7451OS_03_10.jpg)'
- en: Tip
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: 'Highcharts provides a list of marker symbols as well as allowing users to supply
    their own marker icons (see [Chapter 2](ch02.html "Chapter 2. Highcharts Configurations"),
    *Highcharts Configurations*). The list of supported symbols contains: circle,
    square, diamond, triangle, and triangle-down.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts提供了一系列的标记符号，并允许用户提供自己的标记图标（见[第2章](ch02.html "第2章。Highcharts配置")，*Highcharts配置*）。支持的符号列表包括：圆形、正方形、菱形、三角形和向下三角形。
- en: Polishing a chart with an artistic style
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 以艺术风格润色图表
- en: The next step is to format each scatter point into a bubble style with the `radius`
    property and manually set the data label font size proportional to the percentage
    value.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是将每个散点点格式化为具有`radius`属性的气泡样式，并手动设置数据标签字体大小与百分比值成比例。
- en: Note
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The reason we used the scatter series instead of the bubble series is because
    most of the material in this chapter was written for the first edition; this chart
    was created with an earlier version of Highcharts that didn't support the bubble
    series.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用散点系列而不是气泡系列的原因是，本章的大部分内容是为第一版编写的；此图表是用早期版本的Highcharts创建的，该版本不支持气泡系列。
- en: 'Then use the `verticalAlign` property to adjust the labels to center inside
    the enlarged scatter points. The various sizes of scatter points require us to
    present each data point with different attributes. Therefore, we need to change
    the series data definition into an array of point object configurations, such
    as:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，使用`verticalAlign`属性调整标签，使其位于放大后的散点点中心。散点点的各种大小要求我们以不同的属性呈现每个数据点。因此，我们需要将系列数据定义更改为点对象配置数组，例如：
- en: '[PRE26]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The following screenshot shows a graph with a sequence of data points, starting
    with a large marker size and font, then gradually becoming smaller according to
    their percentage values:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了一个数据点序列的图表，从大标记大小和字体开始，然后根据它们的百分比值逐渐变小：
- en: '![Polishing a chart with an artistic style](img/7451OS_03_11.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![以艺术风格润色图表](img/7451OS_03_11.jpg)'
- en: Now, we have two issues with the preceding graph. First, the scatter series
    color (the default second series color) clashes with the gray text labels inside
    the markers, making them hard to read.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，前一个图表有两个问题。首先，散点系列颜色（默认的第二系列颜色）与标记内的灰色文本标签冲突，使得它们难以阅读。
- en: 'To resolve this issue, we will change the scatter series to a lighter color
    with the gradient setting:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个问题，我们将散点系列的颜色改为较浅的颜色，并使用渐变设置：
- en: '[PRE27]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Then, we give the scatter points a darker outline in `plotOptions`, as follows:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，在`plotOptions`中给散点点一个更深的轮廓，如下所示：
- en: '[PRE28]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Secondly, the data points are blocked by the end of the axes'' ranges. The
    issue can be resolved by introducing extra padding spaces into both axes:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，数据点被轴的范围结束所阻挡。可以通过在两个轴中引入额外的填充空间来解决这个问题：
- en: '[PRE29]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The following is the new look for the graph:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图形是新的外观：
- en: '![Polishing a chart with an artistic style](img/7451OS_03_12.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![用艺术风格润色图表](img/7451OS_03_12.jpg)'
- en: 'For the next part, we will put up a logo and some decorative text. There are
    two ways to import an image into a chart—the `plotBackgroundImage` option or the
    `renderer.image` API call. The `plotBackgroundImage` option brings the whole image
    into the chart background, which is not what we intend to do. The `renderer.image`
    method offers more control over the location and size of the image. The following
    is the call after the chart is created:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 对于下一部分，我们将放置一个标志和一些装饰性文本。将图像导入图表有两种方式——`plotBackgroundImage` 选项或 `renderer.image`
    API 调用。`plotBackgroundImage` 选项将整个图像带入图表背景，这不是我们想要做的。`renderer.image` 方法提供了更多关于图像位置和大小的控制。以下是图表创建后的调用：
- en: '[PRE30]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '`logo.png` is the URL path for the logo image file. The next two parameters
    are the x and y positions (starting from 0, where 0 is the upper-left corner)
    of the chart where the image will be displayed. The last two parameters are the
    width and height of the image file. The `image` call basically returns an `element`
    object and the subsequent `.add` call puts the returned image object into the
    renderer.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '`logo.png` 是标志图像文件的 URL 路径。接下来的两个参数是图表中图像显示的 x 和 y 位置（从 0 开始，其中 0 是左上角）。最后的两个参数是图像文件的宽度和高度。`image`
    调用基本上返回一个 `element` 对象，随后 `.add` 调用将返回的图像对象放入渲染器中。'
- en: 'As for the decorative text, it is a red circle with white bold text in a different
    size. They are all created from the renderer. In the following code snippet, the
    first renderer call is to create a red circle with x and y locations, and radius
    size. Then SVG attributes are immediately set with the `attr` method that configures
    the transparency and outline in a darker color. The next three renderer calls
    are to create text inside the red circle and set up the text using the `css` method
    for font size, style, and color. We will revisit `chart.renderer` as part of the
    Highcharts API in [Chapter 10](ch10.html "Chapter 10. Highcharts APIs"), *Highcharts
    APIs*:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 至于装饰性文本，它是一个带有白色粗体文本的不同大小的红色圆圈。它们都是通过渲染器创建的。在下面的代码片段中，第一个渲染器调用是用来创建一个带有 x 和
    y 位置的红色圆圈和半径大小的圆圈。然后使用 `attr` 方法立即设置 SVG 属性，该方法配置了透明度和轮廓的较暗颜色。接下来的三个渲染器调用是用来在红色圆圈内创建文本，并使用
    `css` 方法设置字体大小、样式和颜色。我们将在第 10 章 [Highcharts API](ch10.html "第 10 章。Highcharts
    API") 中重新访问 `chart.renderer`：
- en: '[PRE31]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Finally, we move the legend box to the top of the chart. In order to locate
    the legend inside the plot area, we need to set the `floating` property to `true`,
    which forces the legend into a fixed layout mode. Then, we remove the default
    border line and set the legend items list into a vertical direction:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将图例框移动到图表的顶部。为了将图例定位在绘图区域内，我们需要将 `floating` 属性设置为 `true`，这将强制图例进入固定布局模式。然后，我们移除默认的边框线并将图例项列表设置为垂直方向：
- en: '[PRE32]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'The following is our final graph with the decorations:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图形是我们带有装饰的最终图形：
- en: '![Polishing a chart with an artistic style](img/7451OS_03_13.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![用艺术风格润色图表](img/7451OS_03_13.jpg)'
- en: Summary
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we have explored the usage of line, area, and scatter charts.
    We have seen how much flexibility Highcharts can offer to make a poster-like chart.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了线形图、面积图和散点图的用法。我们看到了 Highcharts 可以提供多少灵活性来制作类似海报的图表。
- en: In the next chapter, we will learn how to plot column and bar charts with their
    plotting options.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将学习如何使用它们的绘图选项绘制柱状图和条形图。
