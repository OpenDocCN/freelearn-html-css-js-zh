- en: Chapter 13. Troubleshooting PostCSS Issues
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For many readers, PostCSS can be a little confusing—after all, it's still a
    relatively new library that is unlike other processors! Throughout the book, we've
    been on a journey of discovery—we'll finish with a look at some tips and tricks
    for best practice, along with some pointers for troubleshooting if we should find
    ourselves stuck.
  prefs: []
  type: TYPE_NORMAL
- en: Throughout the course of this chapter, we will take a look at some common issues
    you might experience when creating PostCSS processors. We'll see how easy it is
    to fix them, and discover what to do next if issues are not as easy to solve as
    we might have expected…
  prefs: []
  type: TYPE_NORMAL
- en: 'We will cover a number of topics throughout this chapter, which will include
    the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Fixing some common issues
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Exploring some common issues in detail
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Getting help from others
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let's make a start!
  prefs: []
  type: TYPE_NORMAL
- en: Fixing some common issues
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In an ideal world, any processor we build will work flawlessly, irrespective
    of which task runner or method we use to process each PostCSS task. Our aim is
    to end up with one or more successfully compiled files, as shown in this example:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Fixing some common issues](img/BO5194_13_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: But as we all know, not everything goes well 100% of the time; if it did, we
    would either be exceptionally lucky, or things would begin to get mundane!
  prefs: []
  type: TYPE_NORMAL
- en: Being a pragmatist, I suspect most people will have some form of issue crop
    up as they get to grips with PostCSS; throughout the course of this chapter we
    will explore some of the more common issues, how to resolve them, and bring together
    some of the tips and tricks we can use to help make our lives a little easier
    when using PostCSS. Let's begin with a look at some of the more common issues
    we might face, in more detail.
  prefs: []
  type: TYPE_NORMAL
- en: Exploring some common issues
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: PostCSS as a processing system is easy to set up and use, but occasionally we
    may come across issues during development. The issues will vary, of course, but
    to help you along, we can explore some of the more common issues we may face during
    development.
  prefs: []
  type: TYPE_NORMAL
- en: For the purposes of this chapter, we will assume that the Gulp task runner has
    been used—you will likely see similar issues with other task runners such as Grunt
    or Broccoli. It's time to explore some of these issues in more detail.
  prefs: []
  type: TYPE_NORMAL
- en: Not compatible with your operating system…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The beauty of PostCSS is that we can install any one of dozens of plugins available—if
    we're using a task runner such as Gulp, then we can easily extend this to cover
    the vast array available for use.
  prefs: []
  type: TYPE_NORMAL
- en: 'In most instances, plugins will install without a hitch; you may find that
    you see this appear occasionally:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Not compatible with your operating system…](img/BO5194_13_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'The warning message that is of most importance to us is not the `ENOENT` messages,
    but this one:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: It should be noted that this is only a warning, and not an error (as such)—it
    is caused by the use of `fsevents`, which is MacOSX only and will not work on
    Windows or Linux environments. In most cases this can be ignored, although it
    would be wise to test your processor to ensure it has not had any detrimental
    impact on your code.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This error is not limited to `fsevents`—it can apply to any package, which is
    not supported in the environment you use.
  prefs: []
  type: TYPE_NORMAL
- en: Task '<name of task>' is not in your gulpfile
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We''ve created a Gulp task file with a number of tasks within, and run it to
    compile our style sheet. Instead of getting our processed files, we end up with
    this message:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Task ''<name of task>'' is not in your gulpfile](img/BO5194_13_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'This is caused by the Gulp task not being present in the gulp file—in this
    declaration example, we''re calling the `rename` task:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Task ''<name of task>'' is not in your gulpfile](img/BO5194_13_04.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'But a look through the gulp file shows that there is no `rename` task in sight:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Task ''<name of task>'' is not in your gulpfile](img/BO5194_13_05.jpg)'
  prefs: []
  type: TYPE_IMG
- en: This is a simple fix—just rename the task so that the names match, and retry
    the compilation. Note, though—if more than one task is incorrectly named, then
    the process will fail but will only show the name of the first one that is at
    fault. Make sure that each task name is entered correctly in the file to ensure
    successful compilation.
  prefs: []
  type: TYPE_NORMAL
- en: Cannot find module '<name of plugin>'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'If any error is likely to catch us out, then it is this one—let me explain:'
  prefs: []
  type: TYPE_NORMAL
- en: As you get to grips with installing PostCSS plugins, you will see many that
    use the naming convention `postcss-<name of plugin>`. It seems a sensible proposition,
    but beware – not every PostCSS plugin uses this naming convention!
  prefs: []
  type: TYPE_NORMAL
- en: 'A great example is Rucksack – one would expect to use `postcss-rucksack` (and
    yes, that includes me!), but we will get this error if we do:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Cannot find module ''<name of plugin>''](img/BO5194_13_06.jpg)'
  prefs: []
  type: TYPE_IMG
- en: It turns out that Rucksack is one of those examples that doesn't use the same
    naming convention that many people would expect it to use. Instead, it uses `rucksack-css`,
    as the name we would expect to use had already been taken.
  prefs: []
  type: TYPE_NORMAL
- en: 'This is one of those instances where it pays to read the documentation, if
    only to save a lot of embarrassment later:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Cannot find module ''<name of plugin>''](img/BO5194_13_07.jpg)'
  prefs: []
  type: TYPE_IMG
- en: It clearly states what name to use when installing the plugin! Yes, it happens
    to the best of us…
  prefs: []
  type: TYPE_NORMAL
- en: 'ReferenceError: <name of task> is not defined'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Let us assume that we have a series of tasks in our gulp file, but for some
    unknown reason, we''re getting this error when we compile our code:'
  prefs: []
  type: TYPE_NORMAL
- en: '![ReferenceError: <name of task> is not defined](img/BO5194_13_08.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'What could be causing it? Well, there are at least two possible causes:'
  prefs: []
  type: TYPE_NORMAL
- en: We include the plugin within the task itself, but forget to include a reference
    to it within the declarations at the top of our file
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We do manage to include both the plugin within the task and its associated declaration,
    but somehow manage not to give the same declaration name
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The fix for this is to make sure that when we include the declaration at the
    top of the Gulp task file, that the same name is used when calling the task later
    in the file.
  prefs: []
  type: TYPE_NORMAL
- en: Please provide array of postcss processors!
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This next error is one that can catch anyone out, but is easy to fix—as time
    goes by you will develop your own processor; you will likely reach a point where
    you start to move some of the PostCSS processor tasks out from the main PostCSS
    call into their own task.
  prefs: []
  type: TYPE_NORMAL
- en: 'Imagine that you have a PostCSS task similar to this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Please provide array of postcss processors!](img/BO5194_13_09.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'There is a natural temptation to split this task into separate ones; after
    all, I extolled the virtues of keeping a 1:1 relationship between the task name
    (that is, styles), and what it does in the task! If, however, you take things
    a little too far, and think that you don''t need to have a PostCSS processor in
    the task, then you may come unstuck, and land up with an error similar to this
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Please provide array of postcss processors!](img/BO5194_13_10.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'A quick check in your Gulp task file will likely show something akin to this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Please provide array of postcss processors!](img/BO5194_13_11.jpg)'
  prefs: []
  type: TYPE_IMG
- en: We have a `postcss` task, but without any processors within it! Although it
    is tempting to rework processors to ensure we maintain that 1:1 relationship,
    we must always leave one processor in the `postcss()` task, to ensure it operates
    correctly.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: You will hear talk of the term processor used in several different ways—they
    can equally apply as a generic term for what is our Gulp task file. It can also
    apply to the processor tasks that should be added to any `postcss()` task.
  prefs: []
  type: TYPE_NORMAL
- en: Entries failing to appear in the package.json file
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This next error is a little trickier to catch, but the fix for it is easy—over
    time, you will likely make changes to your Gulp task file; this of course means
    that new plugins will need to be added from another `package.json` file (if already
    installed), or added afresh, if they haven't already been installed.
  prefs: []
  type: TYPE_NORMAL
- en: As the Gulp task file is just a plain text file, we can edit it in any text
    editor—my personal favorite is Sublime Text 3 ([http://www.sublimetext.com/3](http://www.sublimetext.com/3)),
    but any will suffice. Notepad isn't a good one, as it will fail to handle the
    line-endings correctly!
  prefs: []
  type: TYPE_NORMAL
- en: 'This aside, if we edit our `package.json` file to remove an entry, then add
    a new one, we might come across this warning:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Entries failing to appear in the package.json file](img/BO5194_13_17.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'The cause of this little gem is a really irritating one—it''s amazing how one
    single character can cause all these warnings! The culprit is the extraneous comma
    at the end of a line where there *isn''t* another plugin listed immediately after,
    as shown on line 27 in this screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Entries failing to appear in the package.json file](img/BO5194_13_12.jpg)'
  prefs: []
  type: TYPE_IMG
- en: If we remove the comma and retry the installation, we will soon see that the
    error has disappeared.
  prefs: []
  type: TYPE_NORMAL
- en: Output of compiling results is not as expected
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This final error can be deceptive—it's not strictly speaking even an error!
    Imagine we've created a killer processor application using Node and Gulp; it contains
    a number of tasks similar to the ones we created earlier, and have since used
    throughout this book.
  prefs: []
  type: TYPE_NORMAL
- en: 'We enter the relevant command and hit *Enter*. PostCSS starts the compilation:
    so far so good. A look in the `dest` folder shows this—where''s our minified file
    and source map?'
  prefs: []
  type: TYPE_NORMAL
- en: '![Output of compiling results is not as expected](img/BO5194_13_13.jpg)'
  prefs: []
  type: TYPE_IMG
- en: But hold on – where's the error? A check of the output from the compilation
    process shows no error, so what gives?
  prefs: []
  type: TYPE_NORMAL
- en: '![Output of compiling results is not as expected](img/BO5194_13_14.jpg)'
  prefs: []
  type: TYPE_IMG
- en: This little oddity is caused by miscalculating the order in which tasks should
    run—although the screenshot clearly says an error, it's not an error in the true
    sense. Let me explain.
  prefs: []
  type: TYPE_NORMAL
- en: 'The key to a successful compilation process (and by default, a working processor),
    lies in the need to make sure that each task we run is fired in the right order.
    To generate this error, I removed the constraint on our rename task in the Gulp
    file from the `T45 – converting to use Rucksack` demo, thus:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: The task looks perfectly acceptable, but introduces a problem—instead of just
    one starting task, we now have two!
  prefs: []
  type: TYPE_NORMAL
- en: The net result of this is that the styles task is run first (as it is called
    first in the default task from line 36). It's quickly followed by the rename task
    (no constraint on it), then `sourcemap` and `lint-styles` (following the constraints
    set against each task).
  prefs: []
  type: TYPE_NORMAL
- en: We end up with just one compiled file in the `dest` folder—the rename and styles
    tasks are both run at the same time; as the latter isn't completed, the former
    can't produce any content!
  prefs: []
  type: TYPE_NORMAL
- en: Let's move on. If all else fails, and you find problems you can't fix, then
    it is time to seek help….here's a quick rundown of the options available to you
    as a beginner to using PostCSS.
  prefs: []
  type: TYPE_NORMAL
- en: Getting help from others
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: At this stage, you've tried fixing an issue, but failed – you're not quite sure
    where to go next…
  prefs: []
  type: TYPE_NORMAL
- en: Don't worry, there are plenty of people who have been there, and needed help!
    A good start is the main documentation, which is available at [https://github.com/postcss/postcss/tree/master/docs](https://github.com/postcss/postcss/tree/master/docs).
    If this draws a blank, then Google is a good option; in addition, there are a
    couple of other options that may help.
  prefs: []
  type: TYPE_NORMAL
- en: Logging issues at Stack Overflow
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'If you spend time researching Google and don''t find anyone who has had this
    problem before, then you can try logging a question on Stack Overflow:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Logging issues at Stack Overflow](img/BO5194_13_15.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The URL is [http://stackoverflow.com/questions/tagged/postcss](http://stackoverflow.com/questions/tagged/postcss)—this
    lists all of the questions tagged with the name `postcss`, and is open to anyone
    to suggest a course of action or hopefully a tip that will get you back in business.
    If you do find yourself logging an issue, please try where possible to give details
    of the system you use (Windows, Mac, or Linux), any screenshots or details of
    the error, and the steps you were taking to arrive at the error.
  prefs: []
  type: TYPE_NORMAL
- en: Finding a bug with PostCSS
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Taking things a step further, you can also log a development request, or an
    issue that requires a change to the code—to do this, please browse to the issues
    log on the GitHub site, at [https://github.com/postcss/postcss/issues](https://github.com/postcss/postcss/issues):'
  prefs: []
  type: TYPE_NORMAL
- en: '![Finding a bug with PostCSS](img/BO5194_13_16.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'There are a few things to bear in mind:'
  prefs: []
  type: TYPE_NORMAL
- en: Don't be alarmed if you are advised to log the issue on the plugin's website,
    and not in GitHub for PostCSS – many issues are not as a result of a problem in
    PostCSS, but in the plugin itself.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It helps to show a copy of your task runner's task file and `package.json`,
    just in case—some of the issues that people experience are as a result of (known
    or unknown) compatibility issues between plugins, or where a certain order must
    be followed to ensure plugins can be used.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: PostCSS plugin developers frequently develop on the Apple Mac or Linux platforms—it
    means that some errors you may see are as a result of using a platform that doesn't
    support one or more commands in the plugin.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If you do come across problems when using one or more plugins, try to strip
    back your processor tasks to those that include the plugins that are causing issues.
    Even if this doesn't eliminate the issue, it will help narrow the cause and avoid
    unnecessary checks by others during the troubleshooting process.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The license used by PostCSS is the MIT license—it effectively means that you
    can do as you like with the software, as long as the copyright notice remains
    with the library.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It's worth noting that CodePen supports the use of PostCSS—you may find it useful
    to try out code online (and have it compile automatically), rather than running
    your processor manually. CodePen only supports a limited range of plugins, so
    it won't be useful for all occasions—but hopefully some!
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: 'For more details, take a look at this blog posting on the CodePen site: [https://blog.codepen.io/2015/07/14/postcss-now-supported-on-codepen/](https://blog.codepen.io/2015/07/14/postcss-now-supported-on-codepen/).'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The downside of open source software (and plugins created for PostCSS) is the
    varying levels of support offered by plugin developers—whilst support for the
    core system is very good, you may find support for individual plugins to not be
    quite so active! Don't rely on plugin developers to respond quickly if you have
    a critical issue—please log it via Stack Overflow first, before raising it on
    the plugin site. The latter should be used if the issue is identified to require
    further development.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: With these in mind, good luck! PostCSS is fast gaining ground—with some big
    name companies using it, such as WordPress and Google, it is sure to become very
    popular. It would be a shame to give up on something if you come across a problem
    with using a plugin!
  prefs: []
  type: TYPE_NORMAL
- en: Remember, if one plugin doesn't work, then look around—others may well be available
    that can take their place. It's a dog eat dog world, where those plugins that
    are not supported are likely to fall by the wayside, leaving those where support
    is active and problems are resolved efficiently and promptly.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: When learning a new topic, it is highly likely that we will have questions—throughout
    the course of this chapter, we've looked at some of the common errors you might
    experience, and listed solutions to help get back on track. We then explored what
    might happen if you have issues that can't easily be resolved with help from other
    developers.
  prefs: []
  type: TYPE_NORMAL
- en: 'Okay, let''s move on: we''ve covered a lot of ground throughout the book, so
    it''s time to look forward and see what CSS may bring. The great thing about PostCSS
    is that plugins already exist that allow us to use tomorrow''s features today—we''ll
    cover this and more in the next chapter.'
  prefs: []
  type: TYPE_NORMAL
