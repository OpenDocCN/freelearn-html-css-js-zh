<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch10"/>Chapter 10. Deploying HTML5 Games</h1></div></div></div><p>
<em>We have created several HTML5 games throughout the book. In this chapter, we discuss several approaches through which we can deploy our games to let others play them.</em>
</p><p>In this chapter, you will learn the following topics:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Deploying the game to a web page.</li><li class="listitem" style="list-style-type: disc">Deploying the game as a mobile web app.</li><li class="listitem" style="list-style-type: disc">Wrapping the game into an OS X app.</li><li class="listitem" style="list-style-type: disc">Deploying the game to the App Store.</li></ul></div><p>There are different channels to deploy HTML5 games. We can put the game online in a normal web page or deploy it as a mobile web app. Otherwise, we can deploy the game on the Chrome Web Store. For native app stores, we have different app store options according to the types of the games. We choose desktop or mobile app stores to deploy our games. For desktop games, we can deploy the game to the Mac App Store or Windows Store. For games for mobile devices, we can deploy them to the iOS app store and Android app stores.</p><p>The most direct approach to deploy HTML5 games to app stores is by using Web View components from the target platform to host the HTML file and the related assets.</p><div><div><div><div><h1 class="title"><a id="ch10lvl1sec142"/>Preparing the deploying materials</h1></div></div></div><p>When deploying the game, we <a id="id947" class="indexterm"/>usually need to prepare for the store listing. This means we need to make the app icon, several screenshots, and game description. Some stores may optionally accept a short game play video.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec143"/>Putting the game on the Web</h1></div></div></div><p>The requirement of the <a id="id948" class="indexterm"/>server depends on the technology we used in the game. For<a id="id949" class="indexterm"/> games that only involved client-side HTML, CSS, and JavaScript, we can use any web hosting, including the static website hosting service. Often, these static hosting services allow you to easily upload the website in a ZIP file or via cloud storage such as Dropbox.</p><p>Amazon S3<a id="id950" class="indexterm"/> is also an affordable choice for hosting a static website. For example, my HTML5 games are hosted on S3 with <strong>Amazon CloudFront</strong>
<a id="id951" class="indexterm"/> as the Content Delivery Network (CDN) to boost the caching and loading performance. You can check out a site for HTML5 games<a id="id952" class="indexterm"/> at <a class="ulink" href="http://makzan.net/html5-games-list/">http://makzan.net/html5-games-list/</a>.</p><p>Another popular and free way to host static websites is via the GitHub page. GitHub<a id="id953" class="indexterm"/> is a service that hosts the Git repository, and it provides every repository with a static website hosting feature. You can learn more about it in their <a id="id954" class="indexterm"/>guide at <a class="ulink" href="https://help.github.com/categories/github-pages-basics/">https://help.github.com/categories/github-pages-basics/</a>.</p><div><div><h3 class="title"><a id="note35"/>Note</h3><p>Some services mentioned in this chapter require you to use Git version control to push the code to their server. Git is<a id="id955" class="indexterm"/> a code version control system. You may learn about it via the online<a id="id956" class="indexterm"/> resource at <a class="ulink" href="http://git-scm.com/book/">http://git-scm.com/book/</a>.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec144"/>Hosting the node.js server</h1></div></div></div><p>For games that require a server, such as the<a id="id957" class="indexterm"/> multiplayer game, we need to host the game server. Take our draw-and-guess game as an example; we need a hosting that supports the running of the Node.js server. To get a list of hosting that supports running Node.js, go to: <a class="ulink" href="https://github.com/joyent/node/wiki/Node-Hosting">https://github.com/joyent/node/wiki/Node-Hosting</a>.</p><p>Some of them, such as Heroku, are free during low usage and charge you after your application gets popular and needs to use more server resources. This pricing model is good for us to test the game with the public without paying a high price for a server renting fee.</p></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec145"/>Deploying as a mobile web app in the home screen</h1></div></div></div><p>We can make the game able to be installed on mobile devices' home screens by configuring several <code class="literal">meta</code> tags.</p></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec146"/>Time for action – adding a meta tag for a mobile web app</h1></div></div></div><p>We will take an audio game as an <a id="id958" class="indexterm"/>example to begin with. Let's perform the <a id="id959" class="indexterm"/>following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">index.html</code> file in the code editor.</li><li class="listitem">Add the following code within the head section.<div><pre class="programlisting">&lt;meta name="apple-mobile-web-app-capable" content="yes"&gt;
&lt;meta name="apple-mobile-web-app-status-bar-style" content="black"&gt;
&lt;link rel="apple-touch-icon" href="game-icon.png"&gt;
&lt;link rel="apple-touch-startup-image" href="launch-screen.png"&gt;</pre></div></li><li class="listitem">Test the game on an iOS device or a simulator. To do this, try tapping on the <strong>Share</strong> button and then select <strong>Add to Home Screen</strong>. You should see the icon and the name of the game. Continue to add the game to the home screen.</li><li class="listitem">Then, open the game from the home screen. It will open in fullscreen mode.</li><li class="listitem">Double-click on the home button to enable the app-switching screen. You will be able to see that the app has its own place, similar to a natively installed application.<div><div><h3 class="title"><a id="note36"/>Note</h3><p>If you are developing on Mac, you may use the iOS simulator that comes with the free Xcode development IDE from Apple. Simply drag the HTML file into the simulator, and you can test your game in mobile Safari.</p></div></div></li></ol></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec278"/>
<em>What just happened?</em>
</h2></div></div></div><p>We have added several <code class="literal">meta</code> tags that are recognized by mobile operating systems, specifically iOS. The idea of a mobile web app was introduced with the debut of the first iPhone in 2007. We tell the system that our web browser is capable of being displayed like an app. Then, the system makes the web page very similar to an app to the user's perspective.</p><p>The default icon size is 60 x 60. We can also provide pixel-perfect icons by specifying each dimension for the iPhone and iPad:</p><div><pre class="programlisting">&lt;link rel="apple-touch-icon" href="default-icon-60x60.png"&gt;
&lt;link rel="apple-touch-icon" sizes="76x76" href="icon-ipad.png"&gt;
&lt;link rel="apple-touch-icon" sizes="120x120" href="icon-iphone-retina.png"&gt;
&lt;link rel="apple-touch-icon" sizes="152x152" href="icon-ipad-retina.png"&gt;</pre></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec147"/>Building an HTML5 game into a Mac OS X app</h1></div></div></div><p>In this section, I will show you<a id="id960" class="indexterm"/> how we can wrap an HTML5 game <a id="id961" class="indexterm"/>with a Web View and build it into a native application. This section includes code with other programming languages in a different development environment.</p></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec148"/>Time for action—putting the HTML5 games into a Mac app</h1></div></div></div><p>Follow the steps in Mac Xcode. We need a Mac and the Apple Xcode to create a Mac OS X app. Download Xcode from the Mac App Store if you haven't got it.</p><div><div><h3 class="title"><a id="note37"/>Note</h3><p>Even if you don't have a Mac, you can still have a look at how we wrap the Web View with an application. The concept is more important than the steps in this section.</p></div></div><div><ol class="orderedlist arabic"><li class="listitem">Launch Xcode and create a new project. Select <strong>Cocoa Application</strong> under <strong>OS X</strong>:<div><img src="img/B04290_10_01.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">In the Options View, give<a id="id962" class="indexterm"/> the name of the game as <a id="id963" class="indexterm"/><strong>Product Name</strong>. <strong>Organization Name</strong> can be your name or a company's name. Use a reversed domain as <strong>Organization Identifier</strong>. Choose <strong>Objective-C</strong> for this code example. We keep the default value for the other options.<div><img src="img/B04290_10_02.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">Open the <code class="literal">Main.storyboard</code> file <a id="id964" class="indexterm"/>from the left panel. In the <a id="id965" class="indexterm"/>bottom-right panel, choose the third tab (which is highlighted in blue in the following screenshot). Drag the <strong>Web View</strong> component into the Window View. The Web View should become full width and height when you drag and drop it into the view:<div><img src="img/B04290_10_03.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">At the bottom of the <a id="id966" class="indexterm"/>window, there are<a id="id967" class="indexterm"/> several icons that configure how you can handle the resizing of the app window. Keep the <strong>Web View</strong> selected and then select the second icon that pops up a window, as shown in the following screenshot. Click on the four spacing icons that are beside the <strong>0</strong> input at the top to turn them into solid red lines:<div><img src="img/B04290_10_04.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">After selecting the <a id="id968" class="indexterm"/>four spacings at the top, click <a id="id969" class="indexterm"/>on the <strong>Add Constraints</strong> button. This tells the Web View to maintain <strong>0</strong> spacing between all the four edges when the window resizes.<div><img src="img/B04290_10_05.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">Then, we set the <a id="id970" class="indexterm"/>window size to<a id="id971" class="indexterm"/> fit our game. To do this, select the window. On the top-right panel, choose the fifth tab. Then, we make the window's size exactly 1,300 px width and 600 px height:<div><img src="img/B04290_10_06.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">Then, we <a id="id972" class="indexterm"/>enable the <strong>Show Assistant Editor</strong> option <a id="id973" class="indexterm"/>in the <strong>View</strong> menu. Keep the <code class="literal">Main.storyboard</code> option on the left and open the <code class="literal">ViewController.h</code> file in the right panel.</li><li class="listitem">On the left panel, identify the <strong>Web View</strong> component. Right-click on the component and drag it to the interface section in the <code class="literal">ViewController.h</code> file. This allows us to<a id="id974" class="indexterm"/> name the component <a id="id975" class="indexterm"/>for future reference. Name the Web View component as <code class="literal">gameWebView</code>:<div><img src="img/B04290_10_13.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">We have now configured the view. Let's move on to the code. We used the Web View component that is part of the WebKit framework. We need to include it in the project. To do this, select the <strong>CarGame</strong> project on the left panel. In the <strong>Linked Framework and Libraries</strong> section under the <strong>General</strong> tab, click on the plus <a id="id976" class="indexterm"/>icon to add the WebKit <a id="id977" class="indexterm"/>framework:<div><img src="img/B04290_10_07.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">Now, we should see <code class="literal">WebKit.framework</code> in the <strong>Linked Frameworks and Libraries</strong> section:<div><img src="img/B04290_10_08.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">Click on the <code class="literal">ViewController.m</code> file and put the following code inside the <code class="literal">viewDidLoad</code> function:<div><pre class="programlisting">NSURL *url = [NSURL URLWithString:@"http://makzan.net/html5-games/car-game/"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[[self.gameWebView mainFrame] loadRequest:request];</pre></div></li><li class="listitem">Now, your <code class="literal">ViewController.m</code> file should look like the following screenshot:<div><img src="img/B04290_10_09.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li><li class="listitem">Finally, click<a id="id978" class="indexterm"/> on the <strong>Play</strong> button on <a id="id979" class="indexterm"/>the top left of the Xcode that is shown in the following screenshot:<div><img src="img/B04290_10_10.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div><p>After you click on the Play button, the application will build and open a window with our car game running, as shown in the following screenshot:</p><div><img src="img/B04290_10_11.jpg" alt="Time for action—putting the HTML5 games into a Mac app"/></div></li></ol></div><div><div><div><div><h2 class="title"><a id="ch10lvl2sec279"/>
<em>What just happened?</em>
</h2></div></div></div><p>We just wrapped <a id="id980" class="indexterm"/>our game with a native application by <a id="id981" class="indexterm"/>using the Web View component. We used Xcode and Objective-C to demonstrate the behind-the-scenes scenario of wrapping the Web View. You can actually apply the same techniques in other languages and platforms, for example, using Swift in iOS or even building Windows applications with their Web View components in the Windows platform.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec149"/>Building an HTML5 game into a mobile app with the Web View</h1></div></div></div><p>We had a glimpse of how wrapping the<a id="id982" class="indexterm"/> game in a Web View works. It's very similar to wrapping a Web View into a mobile app. For example, in iOS, we use the Xcode and create an iPhone or iPad project to which we add a Web View in the default view. Inside the Web View, we load the HTML file by using a similar technique in the Mac app section.</p><p>For an Android app, we can use Android Studio. Android uses a different programming language; it uses Java, but the concept is the same. We create a Web View component in the main view and load our HTML5 game via a URL.</p><p>Please note that we need a certificate to deploy an iOS app into app store. To obtain the certificate, we need to join the Apple Developer Program that requires an annual fee. For the Mac app, we can distribute the game on our own or deploy it to the Mac App Store with a Mac developer certificate.</p></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec150"/>Building with the PhoneGap build</h1></div></div></div><p>There is another option to <a id="id983" class="indexterm"/>build Android and iPhone apps from web apps—by using the PhoneGap build service. The service allows you to upload a ZIP file of the web game. Then, it uses Web View to display the HTML, similar to our previous Web View examples.</p><div><img src="img/B04290_10_12.jpg" alt="Building with the PhoneGap build"/></div><p>The difference is that PhoneGap provides several hardware resources via its JavaScript API. Since our game hasn't used any PhoneGap API, it gives pretty much the same result as wrapping the Web View ourselves and building using the PhoneGap.</p><p>If you don't have any native programming experience, PhoneGap or a similar cloud building service is a good choice. If you are comfortable with native development environment, I prefer wrapping the Web View myself. This provides more flexibility for future development in case we need to mix native and Web View to make it a hybrid application.</p><div><div><h3 class="title"><a id="note38"/>Note</h3><p>Besides a PhoneGap build, there are other services that try to put HTML5 games into the native app platform. CocoonJS (<a class="ulink" href="https://www.ludei.com/cocoonjs/">https://www.ludei.com/cocoonjs/</a>) is <a id="id984" class="indexterm"/>another platform for this purpose. Instead of just wrapping the Web View inside a native application, CocoonJS tries to convert the canvas drawing API into the operating system's OpenGL command to gain further performance.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec151"/>App store's reviewing process</h1></div></div></div><p>There are different <a id="id985" class="indexterm"/>review processes per deploying channel. For example, Apple <a id="id986" class="indexterm"/>often takes 1 to 4 weeks to review the app before allowing it on their app stores. On the other hand, Google often takes hours to review apps on the Play Store. If you are new to the store, it often takes an extra week to get familiar with its configuration tool. So, be ready 4 weeks in advance if you need to push the game on the app stores to a deadline, such as a client project.</p><div><div><h3 class="title"><a id="note39"/>Note</h3><p>We didn't go through the process of uploading our game to app stores because their configuration and store listing may change over time. The important thing is to have all the material and target builds ready. With all the material ready, uploading and configuring for each store shouldn't be a burden.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch10lvl1sec152"/>Summary</h1></div></div></div><p>In this chapter, you learned about publishing the game to different platforms. Specifically, we discussed static website hosting services to deploy our HTML5 games. We listed servers that run node.js. We updated our code to work well with the home screen web app. We tried to put our HTML5 game into Web View in Xcode. We also discussed the building of mobile apps and their review process.</p><p>We discussed different aspects of making HTML5 games with CSS3 and JavaScript in nine chapters. We learned how to build a traditional Ping Pong game in DOM and built a card-matching game in CSS3 and an Untangle puzzle game with Canvas. Then, we explored how to add sounds to the game and created a mini piano musical game around it. Next, we discussed saving and loading game statuses by using the local storage. We also built a draw-and-guess real-time multiplayer game with WebSockets. Then, we created a car game with a physics engine in this chapter. Finally, we discussed how we can deploy our HTML5 games to different platforms.</p><p>Throughout the book, we built different types of games, and you learned some essential techniques that you need to make HTML5 games. The next step is to go on and deploy your own games. To help develop your own games, there are some resources that can be helpful. The following list gives some useful links for HTML5 game development:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">General HTML5:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">HTML5 Game Development (<a class="ulink" href="http://www.html5gamedevelopment.com/">http://www.html5gamedevelopment.com/</a>)</li><li class="listitem" style="list-style-type: disc">HTML5 Rocks (<a class="ulink" href="http://www.html5rocks.com/">http://www.html5rocks.com/</a>)</li></ul></div></li><li class="listitem" style="list-style-type: disc">HTML5 game engines<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">ImpactJS (<a class="ulink" href="http://impactjs.com/">http://impactjs.com/</a>)</li><li class="listitem" style="list-style-type: disc">CreateJS (<a class="ulink" href="http://createjs.com/">http://createjs.com/</a>)</li><li class="listitem" style="list-style-type: disc">Phaser (<a class="ulink" href="http://phaser.io/">http://phaser.io/</a>)</li></ul></div></li><li class="listitem" style="list-style-type: disc">Game sprites and textures<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Lost Garden (<a class="ulink" href="http://lunar.lostgarden.com/labels/free%20game%20graphics.html">http://lunar.lostgarden.com/labels/free%20game%20graphics.html</a>)</li><li class="listitem" style="list-style-type: disc">HasGraphics sprites, textures, and tilesets (<a class="ulink" href="http://hasgraphics.com/category/sprites/">http://hasgraphics.com/category/sprites/</a>)</li><li class="listitem" style="list-style-type: disc">Subtle Patterns (<a class="ulink" href="http://subtlepatterns.com">http://subtlepatterns.com</a>)</li></ul></div></li></ul></div></div></body></html>