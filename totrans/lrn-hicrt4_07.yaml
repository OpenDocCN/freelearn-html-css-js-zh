- en: Chapter 7. Bubble, Box Plot, and Error Bar Charts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 7 章：气泡图、箱线图和误差线图
- en: In this chapter, we will explore bubble charts by first studying how the bubble
    size is determined from various series options, and then familiarizing ourselves
    with it by replicating a real-life chart. After that, we will study the structure
    of the box plot chart and discuss an article converting an over-populated spider
    chart into a box plot. We will use that as an exercise to familiarize ourselves
    with box plot charts. Finally, we will move on to the error bar series to understand
    its structure and apply the series to some statistical data.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将通过首先研究如何从各种系列选项中确定气泡大小，然后通过复制现实生活中的图表来熟悉它。之后，我们将研究箱线图的结构，并讨论将过度拥挤的蜘蛛图转换为箱线图的论文。我们将使用它作为练习，以熟悉箱线图。最后，我们将转向误差线系列，了解其结构，并将其应用于一些统计数据。
- en: This chapter assumes that you have some basic knowledge of statistics, such
    as mean, percentile, standard error, and standard deviation. For readers needing
    to revise these topics, there are plenty of online materials covering them. Alternatively,
    the book *Statistics For Dummies* by Deborah J. Rumsey provides great explanations
    and covers some fundamental charts such as the box plot.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章假设您对统计学有一些基本知识，例如平均值、百分位数、标准误差和标准差。对于需要复习这些主题的读者，有大量的在线材料涵盖了它们。或者，Deborah
    J. Rumsey 编著的《统计学傻瓜指南》提供了很好的解释，并涵盖了一些基本图表，如箱线图。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: How bubble size is determined
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 气泡大小是如何确定的
- en: Bubble chart options when reproducing a real-life chart in a step-by-step approach
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在逐步复制现实生活中的图表时，气泡图选项
- en: Box plot structure and the series options when replotting data from a spider
    chart
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在重新绘制蜘蛛图数据时，箱线图结构和系列选项
- en: Error bar charts with real-life data
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有现实数据的误差线图
- en: The bubble chart
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 气泡图
- en: The bubble series is an extension of the scatter series where each individual
    data point has a variable size. It is generally used for showing 3-dimensional
    data on a 2-dimensional chart, and the bubble size reflects the scale between
    z-values.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 气泡系列是散点系列的扩展，其中每个数据点的大小都是可变的。它通常用于在二维图表上显示三维数据，气泡大小反映了 z 值之间的比例。
- en: Understanding how the bubble size is determined
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解气泡大小是如何确定的
- en: In Highcharts, bubble size is decided by associating the smallest z-value to
    the `plotOptions.bubble.minSize` option and the largest z-value to `plotOptions.bubble.maxSize`.
    By default, `minSize` is set to 8 pixels in diameter, whereas `maxSize` is set
    to 20 percent of the plot area size, which is the minimum value of width and height.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Highcharts 中，气泡大小是通过将最小的 z 值关联到 `plotOptions.bubble.minSize` 选项，将最大的 z 值关联到
    `plotOptions.bubble.maxSize` 来决定的。默认情况下，`minSize` 被设置为直径 8 像素，而 `maxSize` 被设置为绘图区域大小的
    20%，这是宽度和高度的较小值。
- en: 'There is another option, `sizeBy`, which also affects the bubble size. The
    `sizeBy` option accepts string values: `''width''` or `''area''`. The width value
    means that the bubble width is decided by its z-value ratio in the series, in
    proportion to the `minSize` and `maxSize` range. As for `''area''`, the size of
    the bubble is scaled by taking the square root of the z-value ratio (see [http://en.wikipedia.org/wiki/Bubble_chart](http://en.wikipedia.org/wiki/Bubble_chart)
    for more description on `''area''` implementation). This option is for viewers
    who have different perceptions when comparing the size of circles. To demonstrate
    this concept, let''s take the `sizeBy` example ([http://jsfiddle.net/ZqTTQ/](http://jsfiddle.net/ZqTTQ/))
    from the Highcharts online API documentation. Here is the snippet of code from
    the example:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 另外还有一个选项，`sizeBy`，它也会影响气泡大小。`sizeBy` 选项接受字符串值：`'width'` 或 `'area'`。宽度值表示气泡宽度由其在系列中的
    z 值比例决定，与 `minSize` 和 `maxSize` 范围成比例。至于 `'area'`，气泡的大小通过取 z 值比例的平方根来缩放（有关 `'area'`
    实现的更多描述，请参阅 [http://en.wikipedia.org/wiki/Bubble_chart](http://en.wikipedia.org/wiki/Bubble_chart)）。此选项是为那些在比较圆圈大小时有不同的感知的观众设计的。为了演示这个概念，让我们以
    Highcharts 在线 API 文档中的 `sizeBy` 示例 ([http://jsfiddle.net/ZqTTQ/](http://jsfiddle.net/ZqTTQ/))
    为例。以下是示例中的代码片段：
- en: '[PRE0]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Two sets of bubbles are set with different `sizeBy` schemes. The minimum and
    maximum bubble sizes are set to 8 and 40 pixels wide respectively. The following
    is the screen output of the example:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 设置了两组具有不同 `sizeBy` 方案的气泡。最小和最大气泡大小分别设置为 8 和 40 像素宽。以下是该示例的屏幕输出：
- en: '![Understanding how the bubble size is determined](img/7451OS_07_01.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![理解气泡大小是如何确定的](img/7451OS_07_01.jpg)'
- en: 'Both series have the exact same x, y, and z values, so they have the same bubble
    sizes at the extremes (1 and 5). With the middle values 2 to 4, the **Size by
    area** bubbles start off with a larger area than the **Size by width**, and gradually
    both schemes narrow to the same size. The following is a table showing the final
    size values in different z-values for each method, whereas the associating value
    inside the bracket is the z-value ratio in the series:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 两个系列具有完全相同的x、y和z值，因此它们在极端值（1和5）处具有相同的气泡大小。对于中间值2到4，**按面积大小**的气泡开始时比**按宽度大小**的气泡面积大，并且两种方案逐渐缩小到相同的大小。以下是一个表格，显示了每种方法在不同z值下的最终大小值，而括号内的关联值是系列中的z值比率：
- en: '| **Z-Value** | 1 | 2 | 3 | 4 | 5 |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| **Z-值** | 1 | 2 | 3 | 4 | 5 |'
- en: '| **Size by width (Ratio)** | 8 (0) | 16 (0.25) | 24 (0.5) | 32 (0.75) | 40
    (1) |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| **按宽度大小（比率）** | 8 (0) | 16 (0.25) | 24 (0.5) | 32 (0.75) | 40 (1) |'
- en: '| **Size by area (Ratio)** | 8 (0) | 24 (0.5) | 31 (0.71) | 36 (0.87) | 40
    (1) |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| **按面积大小（比率）** | 8 (0) | 24 (0.5) | 31 (0.71) | 36 (0.87) | 40 (1) |'
- en: 'Let''s see how the bubble sizes are computed in both approaches. The ratio
    in **Size by width** is calculated as *(Z - Zmin) / (Zmax - Zmin)*. So, for z-value
    3, the ratio is computed as *(3 - 1) / (5 - 1) = 0.5*. To evaluate the ratio for
    the **Size by area** scheme, simply take the square root of the **Size by width**
    ratio. In this case, for z-value 3, it works out as *√0.5 ≈ 0.71*. We then convert
    the ratio value into the number of pixels based on the `minSize` and `maxSize`
    range. **Size by width** with z-value 3 is calculated as:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看在这两种方法中气泡大小是如何计算的。**按宽度大小**的比率计算为*(Z - Zmin) / (Zmax - Zmin)*。因此，对于z值3，比率计算为*(3
    - 1) / (5 - 1) = 0.5*。要评估**按面积大小**方案的比率，只需取**按宽度大小**比率的平方根。在这种情况下，对于z值3，计算结果为*√0.5
    ≈ 0.71*。然后，我们将比率值转换为基于`minSize`和`maxSize`范围的像素数。**按宽度大小**的z值3计算如下：
- en: '*ratio * (maxSize - minSize) + minSize = 0.5 * (40 - 8) + 8 = 24*'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '*比率 * (maxSize - minSize) + minSize = 0.5 * (40 - 8) + 8 = 24*'
- en: Reproducing a real-life chart
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 重现现实生活中的图表
- en: 'In this section, we will examine bubble series options by replicating a real-life
    example (MLB Players Chart: [http://fivethirtyeight.com/datalab/has-mike-trout-already-peaked/](http://fivethirtyeight.com/datalab/has-mike-trout-already-peaked/)).
    The following is a bubble chart of baseball players'' milestones:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将通过复制一个现实生活中的例子（MLB球员图表：[http://fivethirtyeight.com/datalab/has-mike-trout-already-peaked/](http://fivethirtyeight.com/datalab/has-mike-trout-already-peaked/))来检查气泡系列选项。以下是一名棒球运动员里程碑的气泡图：
- en: '![Reproducing a real-life chart](img/7451OS_07_02.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![重现现实生活中的图表](img/7451OS_07_02.jpg)'
- en: 'First, there are two ways that we can list the data points (the values are
    derived from best estimations of the graph) in the series. The conventional way
    is an array of x, y, and z values where x is the age value starting from 21 in
    this example:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们有两种方式可以在系列中列出数据点（这些值是从图表的最佳估计中得出的）。传统的方式是一个包含x、y和z值的数组，其中x是本例中从21岁开始的年龄值：
- en: '[PRE1]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Alternatively, we can simply use the `pointStart` option as the initial age
    value and miss out the rest:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们可以简单地使用`pointStart`选项作为初始年龄值，并省略其余部分：
- en: '[PRE2]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Then, we define the background color, axis titles, and rotate the *y* axis
    title to the top of the chart. The following is our first try:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们定义背景颜色、轴标题，并将*y*轴标题旋转到图表的顶部。以下是我们第一次尝试的结果：
- en: '![Reproducing a real-life chart](img/7451OS_07_03.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![重现现实生活中的图表](img/7451OS_07_03.jpg)'
- en: 'As we can see, there are a number of areas that are not quite right. Let''s
    fix the bubble size and color first. Compared to the original chart, the preceding
    chart has a larger bubble size for the upper value and the bubbles should be solid
    red. We update the `plotOptions.bubble` series as follows:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，有一些区域并不完全正确。让我们首先修复气泡大小和颜色。与原始图表相比，前一个图表对于较高值有更大的气泡大小，气泡应该是实心红色。我们更新`plotOptions.bubble`系列如下：
- en: '[PRE3]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'This changes the bubble size perspective to more closely resemble the original
    chart:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这将气泡大小视角调整为更接近原始图表：
- en: '![Reproducing a real-life chart](img/7451OS_07_04.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![重现现实生活中的图表](img/7451OS_07_04.jpg)'
- en: 'The next step is to fix the y-axis range as we want it to be between 0 and
    100 only. So, we apply the following config to the `yAxis` option:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是固定y轴范围，因为我们希望它仅在0到100之间。因此，我们将以下配置应用于`yAxis`选项：
- en: '[PRE4]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'By setting the options `endOnTick` and `startOnTick` to `false`, we remove
    the extra interval at both ends. The label formatter only prints the `%` sign
    at the `100` interval. The following chart shows the improvement on the *y* axis:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将`endOnTick`和`startOnTick`选项设置为`false`，我们移除了两端额外的间隔。标签格式化器仅在`100`间隔处打印`%`符号。以下图表显示了*y*轴上的改进：
- en: '![Reproducing a real-life chart](img/7451OS_07_05.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![重现真实生活中的图表](img/7451OS_07_05.jpg)'
- en: 'The next enhancement is to move the *x* axis up to the zero value level and
    refine the *x* axis into even number intervals. We also enable the grid lines
    on each major interval and increase the width of the axis line to resemble the
    original chart:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个改进是将*x*轴移动到零值级别，并将*x*轴细化成偶数间隔。我们还启用了每个主要间隔的网格线，并增加了轴线的宽度，使其类似于原始图表：
- en: '[PRE5]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The `tickInterval` property sets the label interval to even numbers and the
    `offset` option pushes the *x* axis level upwards, in line with the zero value.
    The interval lines are enabled by setting the `gridLineWidth` option to a non-zero
    value. In the original chart, there are extra spaces at both extremes of the *x*
    axis for the data labels. We can achieve this by assigning both `minPadding` and
    `maxPadding` with the ratio values. The *x* axis labels are pushed further down
    by increasing the property of the `y` value. The following screenshot shows the
    improvement:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '`tickInterval`属性设置标签间隔为偶数，`offset`选项将*x*轴级别向上推，与零值对齐。通过将`gridLineWidth`选项设置为非零值来启用间隔线。在原始图表中，*x*轴两端有额外的空间用于数据标签。我们可以通过将`minPadding`和`maxPadding`都设置为比例值来实现这一点。通过增加`y`值的属性，将*x*轴标签向下推得更远。以下截图显示了改进：'
- en: '![Reproducing a real-life chart](img/7451OS_07_06.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![重现真实生活中的图表](img/7451OS_07_06.jpg)'
- en: 'The final enhancement is to put data labels next to the first and penultimate
    data points. In order to enable a data label for a particular point, we turn the
    specific point value into an object configuration with the `dataLabels` option
    as follows:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 最终的改进是将数据标签放在第一个和倒数第二个数据点旁边。为了为特定点启用数据标签，我们将特定的点值转换为具有`dataLabels`选项的对象配置，如下所示：
- en: '[PRE6]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: We use the `name` property for the data label content and set the `format` option
    pointing to the `name` property. We also position the label on the right-hand
    side of the data point and assign the label color.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`name`属性作为数据标签内容，并将`format`选项设置为指向`name`属性。我们还将标签定位在数据点的右侧，并分配标签颜色。
- en: '![Reproducing a real-life chart](img/7451OS_07_07.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![重现真实生活中的图表](img/7451OS_07_07.jpg)'
- en: 'From the preceding observation, we notice that the font seems quite blurred.
    Actually, this is the default setting for `dataLabels` in the bubble series. (The
    default label color is white and the position inside the bubble is filled with
    the series color. As a result, the data label actually looks clear even when the
    text shadow effect is applied) Also, there is a connector between the bubble and
    data label in the original chart. Here is our second attempt to enhance the chart:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的观察中，我们注意到字体似乎相当模糊。实际上，这是气泡系列中`dataLabels`的默认设置。（默认标签颜色为白色，气泡内部填充系列颜色。因此，即使应用了文本阴影效果，数据标签实际上看起来也很清晰）此外，原始图表中气泡和数据标签之间存在连接器。这是我们第二次尝试改进图表：
- en: '[PRE7]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'To remove the blurred effect, we redefine the label style without CSS `textShadow`.
    As for the L-shaped connector, we use the trick of alt-code (alt-code: 28) with
    a larger font size. Then, we put the inline CSS style in the `format` option to
    make the two `DIV` boxes connector and text label adjacent to each other. The
    new arrangement looks considerably more polished:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 要去除模糊效果，我们重新定义了标签样式，不使用CSS的`textShadow`。至于L形连接器，我们使用alt-code（alt-code：28）和更大的字体大小。然后，我们将内联CSS样式放在`format`选项中，使两个`DIV`框的连接器和文本标签相邻。新的布局看起来更加精致：
- en: '![Reproducing a real-life chart](img/7451OS_07_08.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![重现真实生活中的图表](img/7451OS_07_08.jpg)'
- en: 'We apply the same trick to the other label; here is the final draft of our
    bubble chart:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将同样的技巧应用于其他标签；以下是我们的气泡图的最终草案：
- en: '![Reproducing a real-life chart](img/7451OS_07_09.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![重现真实生活中的图表](img/7451OS_07_09.jpg)'
- en: The only part left undone is the bubble size legend. Unfortunately, Highcharts
    currently doesn't offer such a feature. However, this can be accomplished by using
    the chart's Renderer engine to create a circle and text label. We will leave this
    as an exercise for readers.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 剩下的部分是气泡大小图例。不幸的是，Highcharts 目前不提供此类功能。然而，这可以通过使用图表的渲染器引擎来创建圆形和文本标签来完成。我们将把这个作为读者的练习。
- en: Technically speaking, we can create the same chart with a scatter series instead,
    with each data point specified in object configuration, and assign a precomputed
    z-value ratio to the `data.marker.radius` option.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术角度讲，我们可以用散点系列创建相同的图表，每个数据点在对象配置中指定，并将预先计算的 z 值比例分配给 `data.marker.radius`
    选项。
- en: Understanding the box plot chart
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解箱线图
- en: 'A box plot is a technical chart that shows data samples in terms of the shape
    of distribution. Before we can create a box plot chart, we need to understand
    the basic structure and concept. The following diagram illustrates the structure
    of a box plot:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 箱线图是一种技术图表，它以分布形状来展示数据样本。在我们可以创建箱线图之前，我们需要了解其基本结构和概念。以下图表展示了箱线图的结构：
- en: '![Understanding the box plot chart](img/7451OS_07_10.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![理解箱线图](img/7451OS_07_10.jpg)'
- en: In order to find out the percentile values, the entire data sample needs to
    be sorted first. Basically, a box plot is composed of top and bottom whisker values,
    first (Q1) and third (Q3) quartile values, and the median. The quartile Q1 represents
    the median value between the 50th percentile and the minimum data. Quartile Q3
    works in a similar fashion but with maximum data. For data with a perfectly normal
    distribution, the box plot will have an equal distance between each section.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 为了找出百分位数，首先需要对整个数据样本进行排序。基本上，箱线图由顶部和底部须线值、第一（Q1）和第三（Q3）四分位数以及中位数组成。四分位数 Q1 代表
    50 百分位数和最小数据之间的中位数。四分位数 Q3 以类似的方式工作，但与最大数据相关。对于完美正态分布的数据，箱线图中的每个部分之间将具有相等的距离。
- en: 'Strictly speaking, there are other types of box plot that differ in how much
    the percentiles of both whiskers cover. Some use the definition of 1.5 times the
    inter-quartile range, that is, *1.5 * (Q3 - Q1)*, or standard deviation. The purpose
    is to isolate the outlier data and plot them as separate points which can be put
    into scatter data points along with the box plot. Here, we use the simplest form
    of box plot: the maximum and minimum data points are regarded as the top and bottom
    whiskers respectively.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 严格来说，还有其他类型的箱线图，它们在须线百分位数覆盖的程度上有所不同。有些使用 1.5 倍的四分位距的定义，即 *1.5 * (Q3 - Q1)*，或者标准差。目的是隔离异常数据并将它们作为单独的点绘制出来，这些点可以与箱线图一起放入散点数据点中。在这里，我们使用最简单的箱线图形式：最大和最小数据点分别被视为顶部和底部须线。
- en: Plotting the box plot chart
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 绘制箱线图
- en: 'In order to create a box plot chart, we need to load an additional library,
    `highcharts-more.js`:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 为了创建箱线图，我们需要加载一个额外的库，`highcharts-more.js`：
- en: '[PRE8]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Highcharts offers a set of options to shape and style the box plot series,
    such as the line width, style, and color, which are shown in the following code
    snippet:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: Highcharts 提供了一系列选项来塑造和样式化箱线图系列，例如线宽、样式和颜色，这些在以下代码片段中显示：
- en: '[PRE9]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The `lineWidth` option is the overall line width of the boxplot, and `fillColor`
    is for the color inside the box. The `median` options refer to the horizontal
    median line inside the box whereas the `stem` options are for the line between
    the quartile and whisker. The `whiskerLength` option is the ratio that corresponds
    to the width of the quartile box. In this example, we will enlarge the `whiskerLength`
    option for ease of visualization, as there are a number of box plots packed into
    the graph.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '`lineWidth` 选项是箱线图的整体线宽，而 `fillColor` 用于箱体内部的颜色。`median` 选项指的是箱体内的水平中位数线，而
    `stem` 选项用于四分位数和须线之间的线。`whiskerLength` 选项是对应于四分位数箱体宽度的比例。在这个例子中，我们将增大 `whiskerLength`
    选项以方便可视化，因为图表中包含了许多箱线图。'
- en: 'The series data values for a box plot are listed in array form in ascending
    order, so from the bottom to top whisker. The following shows a sample of series
    data:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 箱线图的系列数据值以升序数组形式列出，因此从底部到顶部的须线。以下是一个系列数据的示例：
- en: '[PRE10]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Making sense with the box plot data
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解箱线图数据
- en: 'Before we dive into an example with real-life data, it is worth looking at
    an excellent article ([http://junkcharts.typepad.com/junk_charts/2014/04/an-overused-chart-why-it-fails-and-how-to-fix-it.html](http://junkcharts.typepad.com/junk_charts/2014/04/an-overused-chart-why-it-fails-and-how-to-fix-it.html))
    by Kaiser Fund, a marketing analytics and data visualization expert who also authored
    a couple of books on big data crunching. In the article, Kaiser raises an observation
    of a spider chart from a video *Arctic Death Spiral* ([http://youtu.be/20pjigmWwiw](http://youtu.be/20pjigmWwiw)),
    as follows:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们深入探讨一个真实数据示例之前，值得参考一篇优秀的文章([http://junkcharts.typepad.com/junk_charts/2014/04/an-overused-chart-why-it-fails-and-how-to-fix-it.html](http://junkcharts.typepad.com/junk_charts/2014/04/an-overused-chart-why-it-fails-and-how-to-fix-it.html))，这篇文章由营销分析及数据可视化专家Kaiser
    Fund撰写，他也是大数据处理方面的书籍作者之一。在文章中，Kaiser从一部名为 *Arctic Death Spiral* 的视频([http://youtu.be/20pjigmWwiw](http://youtu.be/20pjigmWwiw))中提出对蜘蛛图的观察，如下所述：
- en: '![Making sense with the box plot data](img/7451OS_07_11.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![使用箱线图数据来理解](img/7451OS_07_11.jpg)'
- en: 'The video demonstrates how the arctic sea ice volume (each month per series
    over the years) spirals towards the center at an alarming rate. He argues that
    using a spider chart doesn''t do justice to the important message in the data.
    To summarize his arguments:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 视频演示了北极海冰体积（每年每个系列每月的数据）以惊人的速度螺旋向中心移动。他辩称，使用蜘蛛图并不能公正地展示数据中的重要信息。为了总结他的论点：
- en: It is difficult for readers to comprehend the real downward trend scale in a
    circular chart.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在圆形图表中，读者很难理解真实的下降趋势尺度。
- en: Humans perceive time series data more naturally in a horizontal progression
    than in a circular motion.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与圆形运动相比，人类更自然地以水平进展的方式来感知时间序列数据。
- en: If the movement of monthly data within a year fluctuates more than other years,
    we will have multiple line series crossing each other. As a result, we have a
    plateful of spaghetti instead of a comprehensible chart.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果一年内月度数据的波动幅度大于其他年份，我们将有多个线系列相互交叉。结果，我们得到的是一大堆难以理解的图表，就像意大利面一样。
- en: In order to fix this, Kaiser suggests that a box plot is the best candidate.
    Instead of having 12 multiple series lines crammed together, he uses a box plot
    to represent the annual data distribution. The 12 months' data for each year are
    sorted and only the median, quartiles, and extreme values are substituted into
    the box plot. Although small details are lost due to less data, the range and
    scale of the downward trend over time are better represented in this case.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个问题，Kaiser建议箱线图是最好的选择。他不是将12个多个系列线挤在一起，而是使用箱线图来表示年度数据分布。每年的12个月数据都进行了排序，只有中位数、四分位数和极端值被替换到箱线图中。尽管由于数据较少而丢失了一些细节，但在此情况下，时间趋势的范围和尺度得到了更好的表示。
- en: 'The following is the final box plot presentation in Highcharts:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在Highcharts中的最终箱线图展示：
- en: '![Making sense with the box plot data](img/7451OS_07_12.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![使用箱线图数据来理解](img/7451OS_07_12.jpg)'
- en: The box plot tooltip
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 箱线图提示框
- en: 'Since the box plot series holds various values, the series has different property
    names—`low`, `q1`, `median`, `q3`, `high`—to refer to them. The following illustrates
    an example of `tooltip.formatter`:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 由于箱线图系列包含各种值，因此系列有不同的属性名称—`low`、`q1`、`median`、`q3`、`high`—来指代它们。以下是一个 `tooltip.formatter`
    的示例：
- en: '[PRE11]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Note that `formatter` should be added to the `tooltip` property of the main
    options object, and not in the `series` object. Here is what the box plot tooltip
    looks like:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，`formatter` 应该添加到主选项对象的 `tooltip` 属性中，而不是 `series` 对象中。以下是箱线图提示框的样式：
- en: '![The box plot tooltip](img/7451OS_07_13.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![箱线图提示框](img/7451OS_07_13.jpg)'
- en: The error bar chart
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 误差线图
- en: 'An error bar is another technical chart that shows the standard error, which
    is the standard deviation divided by the square root of the sample size. It means
    that as the sample size increases, the variation from the sample mean diminishes.
    The error bar series has similar color and style options as the box plot but only
    applies to whisker and stem:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 误差线图是另一种技术图表，它显示了标准误差，即标准差除以样本大小的平方根。这意味着随着样本大小的增加，样本均值的变化会减小。误差线系列具有与箱线图相似的色彩和样式选项，但仅适用于须和茎：
- en: '[PRE12]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The same also applies to the tooltip formatter, in which `low` and `high` refer
    to both ends of the error bar. As for the series data option, it takes an array
    of tuples of lower and upper values:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，这也适用于提示框格式化器，其中 `low` 和 `high` 指的是误差棒的两侧。至于系列数据选项，它接受一个包含下限和上限值的元组的数组：
- en: '[PRE13]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'To demonstrate the error bar, we use the F1 pit stop times from all the teams
    in each circuit from [http://www.formula1.com/results/season/2013](http://www.formula1.com/results/season/2013).
    We plot the mean of each circuit in a column series. We then calculate the standard
    error and apply the result to the mean. Here is a screenshot of the error bar
    chart:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 为了展示误差线，我们使用了来自每个赛道的所有车队在[http://www.formula1.com/results/season/2013](http://www.formula1.com/results/season/2013)的F1停站时间。我们将每个赛道的平均值绘制在柱状系列中。然后我们计算标准误差并将结果应用于平均值。以下是误差线图表的截图：
- en: '![The error bar chart](img/7451OS_07_14.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![误差线图表](img/7451OS_07_14.jpg)'
- en: 'Note that when displaying an error bar series with a column series, the column
    series has to be specified before the error bar series in the series array. Otherwise,
    half of the error bar is blocked by the column, as in the following example:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，当在柱状图中显示误差线系列时，误差线系列必须在系列数组中先于柱状系列指定。否则，误差线的一半会被柱状线遮挡，如下例所示：
- en: '![The error bar chart](img/7451OS_07_15.jpg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![误差线图表](img/7451OS_07_15.jpg)'
- en: Summary
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we have learned about bubble charts and how bubble sizes are
    determined. We also tested the bubble chart series by recreating a real-life chart.
    We examined the box plot principle and structure, and practiced how to turn data
    samples into percentile data and layout into a box plot chart. Finally, we studied
    error bar charts by using some statistical data.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了气泡图以及气泡大小是如何确定的。我们还通过重新创建一个现实生活中的图表来测试了气泡图系列。我们考察了箱线图的原则和结构，并练习了如何将数据样本转换为百分位数数据并将布局转换为箱线图。最后，我们通过使用一些统计数据来研究误差线图。
- en: In the next chapter, we will investigate the properties of waterfall, funnel,
    pyramid, and heatmap charts and experiment with them.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将研究瀑布图、漏斗图、金字塔图和热力图图表的特性，并对其进行实验。
