- en: Chapter 6. Documents and Media in Liferay
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章：Liferay中的文档和媒体
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Managing files in Liferay using the Documents and Media portlet
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用文档和媒体小部件在Liferay中管理文件
- en: Managing document types and metadata sets
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理文档类型和元数据集
- en: Integration with the Amazon S3 cloud
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与亚马逊S3云服务集成
- en: Data migration between storage hooks
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 之间存储钩子的数据迁移
- en: Introduction
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: The primary task of any intranet is to allow efficient exchange of information
    between the employees of a company. In most cases, business knowledge is stored
    in the form of files and—if the company does not have a dedicated system—distributed
    between mailboxes, network drives, FTP servers, employees' computer drives, and
    external data carriers. In such cases, there is often a problem in determining
    who has the current version of the file, whether such documents exist at all,
    or where to find them. Liferay helps in coping with the dispersal of information
    by providing an internal repository of files.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 任何内联网的主要任务都是允许公司员工之间高效地交换信息。在大多数情况下，业务知识以文件的形式存储，如果公司没有专用的系统，则分布在邮箱、网络驱动器、FTP服务器、员工计算机驱动器和外部数据载体之间。在这种情况下，通常存在一个问题，即确定谁拥有当前版本的文件，是否真的存在这样的文档，或者在哪里可以找到它们。Liferay通过提供文件内部存储库来帮助处理信息的分散。
- en: Managing files in Liferay using the Documents and Media portlet
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用文档和媒体小部件在Liferay中管理文件
- en: Each site in Liferay has its own separate repository, accessible by going to
    **Admin** | **Site Administration** | **Content** | **Documents and Media**. In
    addition, it is also possible to place the Documents and Media portlet on one
    of the pages where it can be shared between users who do not have access to the
    admin functionalities. The Documents and Media portlet allow us to manage all
    the folders and documents that can be published within a site.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay中的每个站点都有自己的独立存储库，可以通过转到**管理** | **站点管理** | **内容** | **文档和媒体**来访问。此外，还可以将文档和媒体小部件放置在可以由没有访问管理功能的用户之间共享的页面之一上。文档和媒体小部件允许我们管理可以在站点内发布的所有文件夹和文档。
- en: How to do it…
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: The Documents and Media portlet provides tools to create, edit, and delete folders,
    documents, and shortcuts. It also enables us to create multiple documents by uploading
    whole groups of files. This recipe will cover all the basic actions that can be
    performed in order to create an efficient and easy-to-search structure of documents
    and folders.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 文档和媒体小部件提供了创建、编辑和删除文件夹、文档和快捷方式的工具。它还使我们能够通过上传整个文件组来创建多个文档。本食谱将涵盖所有基本操作，以便创建一个高效且易于搜索的文档和文件夹结构。
- en: Creating a new folder
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建新文件夹
- en: 'To add a new folder, perform the following steps:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加新文件夹，请执行以下步骤：
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Documents and Media**.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**管理** | **站点管理** | **内容** | **文档和媒体**。
- en: Click on the **Add** button.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。
- en: Select the **Folder** or **Subfolder** option.![Creating a new folder](img/image00330.jpeg)
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**文件夹**或**子文件夹**选项。![创建新文件夹](img/image00330.jpeg)
- en: Enter the **Name (Required)** of the folder.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入文件夹的**名称（必填）**。
- en: Enter the **Description** of the folder.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入文件夹的**描述**。
- en: Determine the **Permissions** for the folder by setting all actions that may
    be performed by specific roles (you can find more permissions after clicking on
    the **More options** link).
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过设置特定角色可能执行的所有操作来确定文件夹的**权限**（您可以在点击**更多选项**链接后找到更多权限）。
- en: Click on the **Save** button.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Editing a folder
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 编辑文件夹
- en: 'To edit a folder, perform these steps:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 要编辑文件夹，请执行以下步骤：
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Documents and Media**.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**管理** | **站点管理** | **内容** | **文档和媒体**。
- en: Go to the folder you want to edit.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往您想要编辑的文件夹。
- en: Click on its actions icon (the down arrow icon visible when hovering on the
    folder miniature).![Editing a folder](img/image00331.jpeg)
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击其操作图标（当悬停在文件夹缩略图上时可见的向下箭头图标）。![编辑文件夹](img/image00331.jpeg)
- en: Click on the **Edit** button.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**编辑**按钮。
- en: Provide a new **Name** for the folder.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为文件夹提供新的**名称**。
- en: Enter a new **Description** of the folder.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入文件夹的新**描述**。
- en: Determine the way in which document type restrictions and wokflow definition
    settings work for this particular folder. You can do this by setting **Use document
    type restrictions and workflow of the parent folder** by going to the **Document
    Type Restrictions and Workflow** option.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定文档类型限制和工作流定义设置对此特定文件夹的工作方式。您可以通过转到**文档类型限制和工作流**选项，设置**使用父文件夹的文档类型限制和工作流**。
- en: Click on the **Save** button.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Adding a new document
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加新文档
- en: 'To add a new document, perform these steps:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加新文档，请执行以下步骤：
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Documents and Media**.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**管理** | **站点管理** | **内容** | **文档和媒体**。
- en: Click on the **Add** button.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。
- en: Select the appropriate document type, for example, Basic Document.![Adding a
    new document](img/image00332.jpeg)
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的文档类型，例如，基本文档。![添加新文档](img/image00332.jpeg)
- en: Click on the **Select File** button and choose a file from your drive to be
    added to the repository.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择文件**按钮并从您的驱动器中选择要添加到存储库的文件。
- en: Enter the **Title** of the document (if you do not provide a title, the filename
    will be used as the title).
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入文档的**标题**（如果您不提供标题，将使用文件名作为标题）。
- en: Enter the **Description** of the document.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入文档的**描述**。
- en: Expand the **Categorization** section.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开分类**部分**。
- en: Select **Categories** and type or select **Tags** that describe the document.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**类别**并输入或选择描述文档的**标签**。
- en: If there are no visible categories that can be assigned to the document, it
    means that either the categories for the specific site have not been created or
    the account of the user who is working on it does not have access to the existing
    dictionaries category.
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果没有可见的分类可以分配给文档，这意味着要么特定站点的分类尚未创建，要么正在工作的用户的账户没有访问现有字典分类的权限。
- en: Determine the permissions for the document by setting all actions that may be
    performed by specific roles.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过设置特定角色可能执行的所有操作来确定文档的权限。
- en: Click on the **Related Assets** button, and find and choose documents (or other
    content types) that will be set as related content.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**相关资产**按钮，查找并选择将设置为相关内容的文档（或其他内容类型）。
- en: Click on the **Publish** button.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布**按钮。
- en: Uploading multiple documents
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 上传多个文档
- en: It is also possible to add more than one document and set metadata for multiple
    documents at a time.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以一次性添加多个文档并设置多个文档的元数据。
- en: 'To add multiple documents, go to the **Documents and Media** section. Then,
    follow these steps:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加多个文档，请转到**文档和媒体**部分。然后，按照以下步骤操作：
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Documents and Media**.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**管理** | **站点管理** | **内容** | **文档和媒体**。
- en: Click on the **Add** button.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。
- en: Select the **Multiple Documents** option.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**多个文档**选项。
- en: Click on the **Select Files** button and choose all the files you want to upload.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择文件**按钮并选择您想要上传的所有文件。
- en: Note
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: It is also possible to choose the group of files that should be uploaded using
    drag-and-drop.
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您还可以通过拖放选择应上传的文件组。
- en: After uploading all the files, mark the checkboxes next to the names of files
    that will have the same type, set of tags and categories, and permissions:![Uploading
    multiple documents](img/image00333.jpeg)
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 上传所有文件后，勾选与文件名相同的类型、标签组和权限旁边的复选框：![上传多个文档](img/image00333.jpeg)
- en: Enter the description, choose a document type, and define categories, tags,
    and permissions for these documents.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入描述，选择文档类型，并定义这些文档的分类、标签和权限。
- en: Click on the **Save** button.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Repeat steps 6 and 7 until all the uploaded files are saved.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复步骤6和7，直到所有上传的文件都保存。
- en: Editing documents
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 编辑文档
- en: 'To edit a document, perform these steps:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 要编辑文档，请执行以下步骤：
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Documents and Media**.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**管理** | **站点管理** | **内容** | **文档和媒体**。
- en: Go to the document you want to edit.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往您想要编辑的文档。
- en: Click on its actions icon:![Editing documents](img/image00334.jpeg)
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击其操作图标：![编辑文档](img/image00334.jpeg)
- en: Click on the **Edit** button.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**编辑**按钮。
- en: Provide a new **Title** and **Description**, choose **Document Type**, define
    **Categories** and **Tags**, and choose **Related Content** for the edited document.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为编辑的文档提供新的**标题**和**描述**，选择**文档类型**，定义**分类**和**标签**，并为编辑的文档选择**相关内容**。
- en: Click on the **Publish** button.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布**按钮。
- en: Removing folders and documents
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 删除文件夹和文档
- en: Each folder and document can be temporarily or permanently removed from the
    repository. Both temporary and permanent removal are done through the *Recycle
    Bin* mechanism.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 每个文件夹和文档都可以从存储库中临时或永久删除。临时和永久删除都通过**回收站**机制完成。
- en: 'To temporarily remove a folder or document, perform these steps:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 要临时删除文件夹或文档，请执行以下步骤：
- en: Go to the folder or document you want to delete.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往要删除的文件夹或文档。
- en: Click on its actions icon.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击其操作图标。
- en: Click on the **Move to the Recycle Bin** action.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**移动到回收站**操作。
- en: Tip
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can undo this action by clicking on the undo button that will appear just
    after moving a document to the trash. By default, trash is enabled and keeps removed
    items for 30 days. The trash availability for the particular site and the maximum
    age of trash entries can be changed by going to **Admin** | **Site Administration**
    | **Configurations** | **Site Settings** | **Recycle Bin**.
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以通过点击移动文档到回收站后立即出现的撤销按钮来撤销此操作。默认情况下，回收站是启用的，并保留已删除的项目30天。可以通过前往**管理** | **站点管理**
    | **配置** | **站点设置** | **回收站**来更改特定站点的回收站可用性和回收站条目的最大年龄。
- en: 'To permanently remove a folder or document, follow these steps:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 要永久删除文件夹或文档，请按照以下步骤操作：
- en: Go to **Admin** | **Site Administration** | **Content** | **Recycle Bin**.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往**管理** | **站点管理** | **内容** | **回收站**。
- en: Click on the **Actions** button located near the name of the document you want
    to delete:![Removing folders and documents](img/image00335.jpeg)
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击要删除的文档名称附近的**操作**按钮：![删除文件夹和文档](img/image00335.jpeg)
- en: Click on the **Delete** action and confirm your wish by clicking on **Ok**.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**删除**操作，并通过点击**确定**来确认您的意愿。
- en: Note
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that when removing a folder, its whole content is also removed.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，删除文件夹时，其全部内容也会被删除。
- en: It is also possible to restore a document using the **Restore** action available
    in the **Actions** menu.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 还可以使用**操作**菜单中的**恢复**操作来恢复文档。
- en: How it works…
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: Liferay's documents and media library allows us to create a tree-like structure
    of folders and documents. This means that each folder can contain subfolders and
    documents. Each document in Liferay Portal consists of a file and a set of metadata
    describing it.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay的文档和媒体库允许我们创建文件夹和文档的树状结构。这意味着每个文件夹可以包含子文件夹和文档。Liferay Portal中的每个文档由一个文件和一组描述它的元数据组成。
- en: 'Liferay provides many properties to configure the Documents and Media portlet.
    They are localized in the `portal-impl/src/portal.properties` file, which can
    be overridden by `portal-ext.properties` located in the `${liferay.home}` folder.
    One of the properties is to deny names of files or folders, regardless of the
    extension:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay提供了许多属性来配置文档和媒体小部件。它们在`portal-impl/src/portal.properties`文件中本地化，可以被位于`${liferay.home}`文件夹中的`portal-ext.properties`覆盖。其中一个属性是拒绝文件或文件夹的名称，无论扩展名如何：
- en: '[PRE0]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'It is also possible to define the extension''s restriction and permit the addition
    only of defined extensions (by default, this property permits all file extensions).
    To reduce or add available extensions, set the following property:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 还可以定义扩展名的限制，并仅允许添加定义的扩展名（默认情况下，此属性允许所有文件扩展名）。要减少或添加可用的扩展名，设置以下属性：
- en: '[PRE1]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The next important and useful property is the definition of the maximum size
    of files. By default, it is unlimited. To change it, define how many bytes are
    allowed:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个重要且有用的属性是文件最大大小的定义。默认情况下，它是无限的。要更改它，定义允许的字节数：
- en: '[PRE2]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The Liferay search indexer tries to index the content of the file. It is possible
    to define which types of extensions should be ignored. You can also define the
    size for indexing files:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay搜索索引器试图索引文件的内容。可以定义应忽略哪些类型的扩展名。还可以定义索引文件的尺寸：
- en: '[PRE3]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: More settings are available in `portal-impl/src/portal.properties` in the Document
    Library portlet section.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在文档库小部件部分中，`portal-impl/src/portal.properties`提供了更多设置。
- en: Types of documents
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档类型
- en: 'There are five default types of documents: Basic Document, Contract, Marketing
    Banner, Online Training, and Sales Presentation. Each type of document may contain
    a different set of metadata. For instance, when adding a new contract, the user
    can provide data such as effective date, expiration date, contract type, legal
    reviewer, status, and so on. The Basic Document contains only the basic information,
    such as name, description, tags, categories and permissions.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 有五种默认的文档类型：基本文档、合同、营销横幅、在线培训和销售演示。每种文档类型可能包含不同的元数据集。例如，当添加新的合同时，用户可以提供有效日期、到期日期、合同类型、法律审查员、状态等信息。基本文档只包含基本信息，如名称、描述、标签、分类和权限。
- en: Very often, these default document types or metadata sets provided by Liferay
    are not sufficient. It is required to compose personalized types of documents
    containing very specific metadata information. This can be achieved using the
    Document Types and Metadata Sets that create tools, as described in the following
    recipe.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 非常常见的是，Liferay提供的这些默认文档类型或元数据集不足以满足需求。需要创建包含非常特定元数据信息的个性化文档类型。这可以通过以下菜谱中描述的文档类型和元数据集创建工具来实现。
- en: It is possible to restrict folders to contain documents of one or more particular
    types. The document type restrictions can be set separately for each folder or
    inherited from parent folders.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 可以限制文件夹只包含一种或多种特定类型的文档。文档类型限制可以单独为每个文件夹设置，也可以从父文件夹继承。
- en: Permissions
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 权限
- en: Each folder and document has its own permissions set, which defines the list
    of actions that can be performed on it by users assigned to different roles. For
    example, it is possible to set such permissions so that users with a specific
    role will have access to a specific folder, but will not see some of the files
    stored there.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 每个文件夹和文档都有自己的权限集，它定义了分配给不同角色的用户可以执行的操作列表。例如，可以设置这样的权限，使得具有特定角色的用户可以访问特定的文件夹，但不会看到存储在那里的某些文件。
- en: Note
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For more information on permissions, refer to [Chapter 5](part0045.xhtml#aid-1AT9A1
    "Chapter 5. Roles and Permissions"), *Roles and Permissions*.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 关于权限的更多信息，请参阅[第5章](part0045.xhtml#aid-1AT9A1 "第5章。角色和权限")，*角色和权限*。
- en: Categories and tags
  id: totrans-100
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 分类和标签
- en: If an intranet groups a very large number of documents, a well-designed structure
    cannot sufficiently help users get to the correct documents. Categories and tags
    provide an additional mechanism to mark, list, and search files and allow their
    subsequent selection with the help of dedicated portlets, such as Category Navigation,
    Asset Publisher, or Tag Cloud. Categories as well as documents can create a tree-like
    structure. Each category is placed in the dictionary and can have subcategories.
    Tags, on the contrary, are not stored in dictionaries and create a flat structure.
    It is possible to assign one or more categories and tags to a document.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个内网包含非常大量的文档，一个设计良好的结构可能不足以帮助用户找到正确的文档。分类和标签提供了一种额外的机制来标记、列表和搜索文件，并允许通过专门的端口（如分类导航、资产发布者或标签云）进行后续选择。分类以及文档可以创建一个树状结构。每个分类都放在字典中，可以拥有子分类。相反，标签不存储在字典中，创建一个平面结构。可以为文档分配一个或多个分类和标签。
- en: Related assets
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 相关资产
- en: In Liferay, an asset is a piece of content that can be shown on a page, such
    as a document, web content, blog entry, and so on. Each document can be connected
    to another document (or other types of assets). These documents will be listed
    by portlets, such as the Asset Publisher.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在Liferay中，资产是可以显示在页面上的内容片段，例如文档、网页内容、博客条目等。每个文档都可以连接到另一个文档（或其他类型的资产）。这些文档将通过端口（如资产发布者）列出。
- en: Additional information
  id: totrans-104
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 其他信息
- en: Let's understand in detail how Liferay stores files with the default configuration.
    First of all, the system reads a file's metadata, such as extension, title, size.
    Next, it recognizes the mime type of a file (`image/png`, `audio/mpeg`, `application/pdf`,
    and so on). This setting depends on the file's extension. The next thing that
    the portlet does is create a version. By default, the first uploaded file has
    the version 1.0\. Liferay also recognizes in which folder and in which repository
    a file is added. All of this information is stored in the `DLFileEntry` table.
    This type of data is called metadata.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们详细了解Liferay在默认配置下如何存储文件。首先，系统读取文件的元数据，如扩展名、标题、大小。接下来，它识别文件的MIME类型（`image/png`、`audio/mpeg`、`application/pdf`等）。此设置取决于文件的扩展名。接下来，小部件所做的下一件事是创建一个版本。默认情况下，第一个上传的文件版本为1.0。Liferay还识别文件添加的文件夹和存储库。所有这些信息都存储在`DLFileEntry`表中。这类数据称为元数据。
- en: 'By default, physically each file is stored on a local hard drive in the `${liferay.home}/data/document_library`
    folder. A hierarchy of the folders is very specific. It is difficult to recognize
    where each file is stored. Let''s examine one of the paths to the file: `data/document_library/10157/11501/303/1.0`.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，每个文件都存储在本地硬盘上的`${liferay.home}/data/document_library`文件夹中。文件夹的层次结构非常具体。很难识别每个文件存储的位置。让我们检查一个文件路径：`data/document_library/10157/11501/303/1.0`。
- en: As we said earlier, each file is placed in the `data/document_library` folder.
    The next folder name is an `instanceId`, which can be set by going to **Admin**
    | **Control Panel** | **Configuration** | **Portal Instances**. The next identifier
    is `folderId`. It is good to know that this identifier is exactly a parent folder
    of this file. If the file is placed in the folder's hierarchy, it is the last
    folder's identifier. 303 is a number stored in the `DLFileEntry.name` column.
    Each file has only the version name. In this example, the name of the file is
    1.0\. In the real world, this is a PNG image. All the necessary data for this
    file, such as its name, is placed in the database.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前所说，每个文件都放置在`data/document_library`文件夹中。下一个文件夹名称是`instanceId`，可以通过转到**管理**
    | **控制面板** | **配置** | **门户实例**来设置。下一个标识符是`folderId`。了解这个标识符是这个文件的父文件夹是很有帮助的。如果文件放置在文件夹的层次结构中，它就是最后一个文件夹的标识符。303是存储在`DLFileEntry.name`列中的数字。每个文件只有一个版本名称。在这个例子中，文件的名称是1.0。在现实世界中，这是一个PNG图像。所有必要的文件数据，如其名称，都放置在数据库中。
- en: Tip
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Be careful and remember that a file entry consists of metadata stored in the
    database and bytes stored on the hard drive in the specific location.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意并记住，文件条目由存储在数据库中的元数据和存储在硬盘特定位置的字节组成。
- en: There's more…
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多……
- en: It is also possible for the user to create a shortcut to any document that they
    can access. The permissions set on the shortcut enable the user to access the
    original document through the shortcut.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 用户也可以创建指向他们可以访问的任何文档的快捷方式。快捷方式上设置的权限使用户能够通过快捷方式访问原始文档。
- en: 'In order to create a shortcut, use these steps:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 为了创建快捷方式，请按照以下步骤操作：
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Documents and Media**.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**管理** | **站点管理** | **内容** | **文档和媒体**。
- en: Click on the **Add** button.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。
- en: Select the appropriate shortcut.![There's more…](img/image00336.jpeg)
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择合适的快捷方式。![还有更多……](img/image00336.jpeg)
- en: Click on the **Site** button and choose the site containing the document for
    which you want to create a shortcut.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**站点**按钮，选择包含您想要创建快捷方式的文档的站点。
- en: Click on the **Document** button and choose the document.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**文档**按钮并选择文档。
- en: Determine the permissions for the shortcut by setting all actions that may be
    performed by specific roles.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过设置特定角色可能执行的所有操作来确定快捷方式的权限。
- en: Click on the **Save** button.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: See also
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: For information on permissions, refer to the *Creating and configuring roles*
    recipe from [Chapter 5](part0045.xhtml#aid-1AT9A1 "Chapter 5. Roles and Permissions"),
    *Roles and Permissions*
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于权限的信息，请参阅[第5章](part0045.xhtml#aid-1AT9A1 "第5章。角色和权限")的*创建和配置角色*配方，*角色和权限*
- en: The *Kaleo Web installation* recipe from [Chapter 9](part0065.xhtml#aid-1TVKI1
    "Chapter 9. Liferay Workflow Capability"), *Liferay Workflow Capability*
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自[第9章](part0065.xhtml#aid-1TVKI1 "第9章。Liferay工作流功能")的*Kaleo Web安装*配方，*Liferay工作流功能*
- en: For more information on categorizing documents, refer to the *Tagging and categorizing
    content* recipe from [Chapter 8](part0059.xhtml#aid-1O8H61 "Chapter 8. Search
    and Content Presentation Tools"), *Search and Content Presentation Tool*
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于文档分类的更多信息，请参阅第8章中的*标签和内容分类*配方，*搜索和内容展示工具*。
- en: Managing document types and metadata sets
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理文档类型和元数据集
- en: As was mentioned in the previous recipe, each file, while provided with metadata,
    becomes a document. By default, each document consists of information, such as
    name, description, category, tags, permissions, or related assets. Very often,
    the basic set is not sufficient. In such cases, it may be necessary to create
    a new document type, which allows us to provide a file with specific additional
    information.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一个配方中提到的，每个文件虽然提供了元数据，但变成了文档。默认情况下，每个文档包含诸如名称、描述、类别、标签、权限或相关资产等信息。非常常见的是，基本集是不够的。在这种情况下，可能需要创建一个新的文档类型，这样我们就可以为文件提供特定的附加信息。
- en: How to do it…
  id: totrans-126
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点…
- en: It this recipe, we will describe how to define different types of documents
    and teach how to compose and use metadata sets.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在本配方中，我们将描述如何定义不同类型的文档，并教授如何组合和使用元数据集。
- en: Creating a new document type using metadata sets
  id: totrans-128
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用元数据集创建新文档类型
- en: 'To add a new document type, perform these steps:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加新的文档类型，请执行以下步骤：
- en: Log in as an administrator and go to **Admin** | **Site Administration** | **Content**
    | **Documents and Media**.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**管理** | **站点管理** | **内容** | **文档和媒体**。
- en: Click on the **Manage** button.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**管理**按钮。
- en: Select the **Document Types** option.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**文档类型**选项。
- en: Click on the **Add** button.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。
- en: Enter the **Name** of the type of document.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入文档类型的**名称**。
- en: Enter a description of the type of document.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入文档类型的描述。
- en: Determine **Metadata Fields**, which will be available in this type of document,
    by dragging and dropping fields from the left column menu to the area on the right-hand
    side.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过从左侧菜单拖放字段到右侧区域，确定将在此类文档中可用的**元数据字段**。
- en: Set all the added fields by clicking on each field and defining its properties
    (**Field Label**, **Show Label**, **Required**, **Name**, **Predefined Value**,
    **Tip**, **Indexable**, **Repeatable**, **Options**, and **Multiple**).![Creating
    a new document type using metadata sets](img/image00337.jpeg)
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击每个字段并定义其属性（**字段标签**、**显示标签**、**必填**、**名称**、**预定义值**、**提示**、**可索引**、**可重复**、**选项**和**多选**）来设置所有添加的字段。![使用元数据集创建新文档类型](img/image00337.jpeg)
- en: Click on **Select Additional Metadata Set** and choose one of the available
    metadata sets (see the next section of this recipe to understand how to work with
    metadata sets).
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择附加元数据集**并选择一个可用的元数据集（参见本配方的下一节以了解如何处理元数据集）。
- en: Determine the permissions for the document type by setting all actions that
    may be performed by specific roles.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过设置特定角色可能执行的所有操作来确定文档类型的权限。
- en: Click on the **Save** button.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Defining metadata sets
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 定义元数据集
- en: 'To define a new metadata set, perform the following steps:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 要定义新的元数据集，请执行以下步骤：
- en: Log in as an administrator and go to **Site Administration** | **Content** |
    **Documents and Media**.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录并转到**站点管理** | **内容** | **文档和媒体**。
- en: Click on the **Manage** button.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**管理**按钮。
- en: Select the **Metadata Sets** option.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**元数据集**选项。
- en: Click on the **Add** button.![Defining metadata sets](img/image00338.jpeg)
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。![定义元数据集](img/image00338.jpeg)
- en: Enter the **Name (Required)** of the metadata set.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入元数据集的**名称（必填）**。
- en: Enter the **Description** of the metadata set.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入元数据集的**描述**。
- en: Choose **Parent Metadata Set**.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**父元数据集**。
- en: Determine **Metadata Fields**, which will be available in this type of document.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定将在此类文档中可用的**元数据字段**。
- en: Click on the **Save** button.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: How it works…
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: When defining a new type of document, we not only define the scope of information
    that is stored with the file, but also compose a form that allows us to enter
    the information. Both document type forms and the metadata set form can be composed
    using a simple form editor. This editor contains a small library of different
    form fields, such as **Boolean**, **Date**, **Decimal**, **Documents and Media**,
    **HTML**, **Integer**, **Link to Page**, **Number**, **Radio**, **Select**, **Text**,
    and **Text Box**. It is worth noticing that it is also possible to create groups
    of fields by dragging and dropping one field (or more) onto another.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 当定义一种新的文档类型时，我们不仅定义了与文件存储的信息范围，还创建了一个表单，以便我们输入信息。文档类型表单和元数据集表单都可以使用简单的表单编辑器来创建。这个编辑器包含了一个不同表单字段的库，例如**布尔值**、**日期**、**十进制**、**文档和媒体**、**HTML**、**整数**、**页面链接**、**数字**、**单选按钮**、**选择**、**文本**和**文本框**。值得注意的是，也可以通过拖放一个字段（或多个）到另一个字段上来创建字段组。
- en: When defining a new type of document, we have to decide whether the set of fields
    we want to include will be used in this particular document only or with different
    document types. In the first case, we can compose the form directly within the
    new document type. In the second case, it is better to create a metadata set that
    can be used as a part of many document types, but is managed in one place. Similarly
    as in case of Liferay assets, metadata sets may be created and used in one particular
    scope only or, when created in global scope, may be used in all scopes within
    one Liferay Portal instance.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 当定义一种新的文档类型时，我们必须决定我们想要包含的字段集是仅用于特定文档还是用于不同的文档类型。在前一种情况下，我们可以在新的文档类型中直接创建表单。在后一种情况下，最好创建一个元数据集，它可以作为许多文档类型的一部分使用，但管理在一个地方。同样，与Liferay资产的情况一样，元数据集可以仅在一个特定范围内创建和使用，或者当在全局范围内创建时，可以在一个Liferay
    Portal实例的所有范围内使用。
- en: Additionally, metadata sets can inherit a set of fields from other metadata
    sets.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，元数据集可以继承来自其他元数据集的一组字段。
- en: 'Fields can be defined by the following properties:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 字段可以通过以下属性来定义：
- en: '| Type | Defines the type of the field |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| 类型 | 定义字段的类型 |'
- en: '| --- | --- |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Field Label | This allows us to provide a label for the field |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| 字段标签 | 这允许我们为字段提供标签 |'
- en: '| Show Label | This lets you decide whether the label should be shown or not
    |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| 显示标签 | 这让您决定是否显示标签 |'
- en: '| Required | This lets you decide whether filling the field is necessary or
    optional |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '| 必填 | 这让您决定填写字段是否是必需的或可选的 |'
- en: '| Name | This allows us to define the name of the field |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| 名称 | 这允许我们定义字段的名称 |'
- en: '| Predefined Value | This allows us to define they value that will be shown
    by default before a user enters their own value |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| 预定义值 | 这允许我们定义在用户输入自己的值之前默认显示的值 |'
- en: '| Tip | This lets you provide a short text, which will be shown as a tooltip
    for the field |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| 提示 | 这允许您提供一段简短文本，该文本将作为字段的工具提示显示 |'
- en: '| Indexable | This lets you decide whether the content of the file should be
    indexed and searched |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| 可索引 | 这让您决定文件内容是否应该被索引和搜索 |'
- en: '| Repeatable | This allows us to determine whether the field can be repeated
    |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| 可重复 | 这允许我们确定字段是否可以被重复 |'
- en: '| Options | This lets you provide possible options for all the fields that
    allows users to choose options from a defined list |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| 选项 | 这允许您为所有字段提供可能的选项，使用户可以从定义的列表中选择选项 |'
- en: '| Multiple | This allows us to determine whether a user can choose more than
    one option |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| 多选 | 这允许我们确定用户是否可以选择多个选项 |'
- en: See also
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: For information on document management, refer to the *Managing files in Liferay
    using the Documents and Media portlet* recipe.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 有关文档管理的信息，请参阅*使用“文档和媒体”小部件在Liferay中管理文件的食谱*。
- en: Integration with the Amazon S3 cloud
  id: totrans-171
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与Amazon S3云的集成
- en: Liferay provides a built-in capability to communicate with the Amazon S3 cloud.
    This feature gives users a really powerful tool to store their documents in a
    cloud-based solution. The **Amazon Simple Storage Service** (**Amazon S3**) is
    a scalable, high-speed, low-cost, and web-based service designed for online backup
    and archiving of data such as documents, presentations, spreadsheets, pictures,
    photos, and so on. The greatest feature of the **Amazon Storage** is the fact
    that it claims 99.99 percent availability of objects over a given year. Moreover,
    these services provide highly scalable storage that can be easily increased as
    data increases. The whole infrastructure has secure SSL data transfer and encryption.
    Amazon Simple Storage Service is a part of the bigger project called **Amazon
    Web Services** ([http://aws.amazon.com](http://aws.amazon.com)). This is a collection
    of many web services, such as computing cloud, storage cloud, databases, networking,
    and administration and security.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay 提供了与 Amazon S3 云通信的内置功能。这个功能为用户提供了一个非常强大的工具，可以将他们的文档存储在基于云的解决方案中。**Amazon
    简单存储服务**（**Amazon S3**）是一个可扩展的、高速的、低成本且基于网络的在线备份和存档服务，适用于文档、演示文稿、电子表格、图片、照片等数据。**Amazon
    存储**最伟大的特点是它声称在给定一年内对象可用性达到 99.99%。此外，这些服务提供高度可扩展的存储，可以随着数据的增加而轻松扩展。整个基础设施具有安全的
    SSL 数据传输和加密。Amazon Simple Storage Service 是更大项目 **Amazon Web Services**（[http://aws.amazon.com](http://aws.amazon.com)）的一部分。这是一个包含许多网络服务的集合，如计算云、存储云、数据库、网络以及管理和安全。
- en: Liferay gives users a feature to store and manage documents in remote repositories.
    This type of repository can be Amazon S3\. In order to allow communication between
    a portal and Amazon S3, Liferay uses *JetS3t toolkit*. It is an open source project
    based on Java. More details about this solution are available at [http://www.jets3t.org/](http://www.jets3t.org/).
    Technically, it is a `jets3t.jar` archive placed in the `ROOT/WEB-INF/lib/` folder
    of the deployed Liferay instance.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay 为用户提供了一个在远程存储库中存储和管理文档的功能。这种类型的存储库可以是 Amazon S3。为了允许门户与 Amazon S3 之间的通信，Liferay
    使用 *JetS3t 工具包*。这是一个基于 Java 的开源项目。有关此解决方案的更多详细信息，请参阅 [http://www.jets3t.org/](http://www.jets3t.org/)。技术上，它是一个放置在已部署
    Liferay 实例的 `ROOT/WEB-INF/lib/` 文件夹中的 `jets3t.jar` 归档。
- en: How to do it…
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Communication between Liferay and Amazon S3 works with Amazon S3 API. In order
    to properly configure this access, you need to have three things: access key,
    secret key, and bucket name. To generate this data (access key, secret key, and
    bucket name), follow these steps:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay 与 Amazon S3 之间的通信是通过 Amazon S3 API 实现的。为了正确配置此访问权限，您需要以下三项内容：访问密钥、秘密密钥和存储桶名称。要生成这些数据（访问密钥、秘密密钥和存储桶名称），请按照以下步骤操作：
- en: 'Log in to the Amazon Web Service console: [https://console.aws.amazon.com](https://console.aws.amazon.com).'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到 Amazon Web 服务控制台：[https://console.aws.amazon.com](https://console.aws.amazon.com)。
- en: Go to **Your Name** | **Security Credentials** on the dockbar.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具栏上，转到 **您的姓名** | **安全凭证**。
- en: Expand **Access Keys** (access key ID and secret access key).
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开 **访问密钥**（访问密钥 ID 和秘密访问密钥）。
- en: Click on the **Create New Access Key** button.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **创建新访问密钥** 按钮。
- en: 'On the popup window, you will see the following message:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出窗口中，您将看到以下消息：
- en: '**Your access key (access key ID and secret access key) has been created successfully.**'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**您的访问密钥（访问密钥 ID 和秘密访问密钥）已成功创建。**'
- en: '![How to do it…](img/image00339.jpeg)'
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/image00339.jpeg)'
- en: Click on **Show Access Key** and copy **Access Key ID** and **Secret Access
    Key**. This pair of keys will be used a little later.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **显示访问密钥** 并复制 **访问密钥 ID** 和 **秘密访问密钥**。这对密钥将在稍后使用。
- en: 'The next few steps are responsible for creating a new bucket, where Liferay
    will store its files:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的几个步骤负责创建一个新的存储桶，其中 Liferay 将存储其文件：
- en: In [https://console.aws.amazon.com](https://console.aws.amazon.com), go to **Services**
    | **S3**.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 [https://console.aws.amazon.com](https://console.aws.amazon.com)，转到 **服务**
    | **S3**。
- en: To create a new bucket, click on the **Create Bucket** button.![How to do it…](img/image00340.jpeg)
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要创建一个新的存储桶，请点击 **创建存储桶** 按钮。![如何操作…](img/image00340.jpeg)
- en: Fill in all required fields and save the form.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写所有必填字段并保存表单。
- en: Remember your bucket name.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 记住您的存储桶名称。
- en: 'The last thing is Liferay Portal configuration. As we said in the beginning,
    Liferay provides a built-in capability to communicate with Amazon, so the configuration
    is not difficult. It is only a simple setting with `${liferay.home}/portal-ext.properties`:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一件事情是 Liferay 门户配置。正如我们一开始所说的，Liferay 提供了与 Amazon 通信的内置功能，因此配置并不困难。它只是一个简单的设置，位于
    `${liferay.home}/portal-ext.properties`：
- en: '[PRE4]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Finally, restart your portal instance and try to upload a file in the Documents
    and Media portlet. From the user's point of view, it should not be any different
    with the upload action. In order to see the difference, you can log in to the
    S3 storage bucket to check out the uploaded file.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，重新启动您的门户实例，并尝试在文档和媒体端口中上传文件。从用户的角度来看，上传操作不应该有任何不同。为了看到差异，您可以登录到 S3 存储桶以检查上传的文件。
- en: How it works…
  id: totrans-192
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何工作…
- en: 'The portal provides many configurable hooks to upload and put documents into
    various persistence systems. All of them are implemented as Liferay core functionalities.
    The basic and default persistence system is `FileSystemStore`, which keeps data
    in the local hard drive. Liferay provides other implementations, such as `AdvancedFileSystemStore`,
    `CMISStore`, `DBStore`, `JCRStore`, and `S3Store`. One of these types can be set
    in `portal-ext.properties`:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 门户提供了许多可配置的钩子，用于将文档上传到各种持久化系统。所有这些都作为 Liferay 核心功能实现。基本和默认的持久化系统是 `FileSystemStore`，它将数据存储在本地硬盘上。Liferay
    提供了其他实现，例如 `AdvancedFileSystemStore`、`CMISStore`、`DBStore`、`JCRStore` 和 `S3Store`。可以在
    `portal-ext.properties` 中设置其中一种类型：
- en: '[PRE5]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The following description shows differences in storage implementation:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 以下描述显示了存储实现中的差异：
- en: '`FileSystemStore`: This saves documents directly to the local filesystem.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FileSystemStore`：此工具将文档直接保存到本地文件系统。'
- en: '`AdvancedFileSystemStore`: Similar to `FileSystemStore`, but divides the data
    into buckets (folders), thus avoiding the many-files-in-one-directory limitation.'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`AdvancedFileSystemStore`：类似于 `FileSystemStore`，但将数据划分为桶（文件夹），从而避免了单个目录中文件过多的限制。'
- en: '`DBStore`: Keeps binary data in the database as blobs.'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DBStore`：将二进制数据以 blob 的形式存储在数据库中。'
- en: '`CMISStore`: **Content Management Interoperability Services** (**CMIS**) is
    a specification to improve the interoperability between **Enterprise Content Management**
    (**ECM**) systems. Documents and Media allow users to connect to multiple third-party
    repositories that support CMIS 1.0 with **AtomPub** and web service protocols.
    It is possible to integrate Liferay with many CMIS-compliant ECM vendors, such
    as SharePoint, Alfresco, Documentum, IBM FileNet, and so on.'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CMISStore`：**内容管理互操作性服务**（**CMIS**）是一个规范，旨在提高 **企业内容管理**（**ECM**）系统之间的互操作性。文档和媒体允许用户连接到多个支持
    CMIS 1.0、**AtomPub** 和 Web 服务协议的第三方存储库。可以与许多符合 CMIS 标准的 ECM 供应商集成 Liferay，例如 SharePoint、Alfresco、Documentum、IBM
    FileNet 等。'
- en: '`JCRStore`: Implements content repository API for Java. The well-known implementation
    is **Apache Jackrabbit**. So, if this hook is set, it is possible to keep binary
    data in the Apache Jackrabbit content repository.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`JCRStore`：实现了 Java 内容存储库 API。著名的实现是 **Apache Jackrabbit**。因此，如果设置了此钩子，则可以在
    Apache Jackrabbit 内容存储库中保留二进制数据。'
- en: '`S3Store`: Keeps data in the Amazon Simple Storage Service.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`S3Store`：将数据存储在 Amazon 简单存储服务中。'
- en: Let's examine a code that is responsible for this integration. The `S3Store`
    class implements the `Store` interface. Thus, it provides all the necessary operations
    on files, for instance, `addFile`, `addDirectory`, `deleteFile`, `deleteDirectory`,
    and so on. In `portal-ext.properties`, we set the `dl.store.impl` property as
    the `S3Store` class.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们检查负责此集成的代码。`S3Store` 类实现了 `Store` 接口。因此，它提供了对文件的所有必要操作，例如 `addFile`、`addDirectory`、`deleteFile`、`deleteDirectory`
    等。在 `portal-ext.properties` 中，我们将 `dl.store.impl` 属性设置为 `S3Store` 类。
- en: Liferay uses the JetS3t toolkit to communicate with Amazon services. This toolkit
    is responsible for transferring files from/to Amazon Cloud.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay 使用 JetS3t 工具包与 Amazon 服务进行通信。此工具包负责将文件从/到 Amazon 云传输。
- en: 'In the Amazon S3 repository, the structure of the folders and files looks the
    same as in the local filesystem. The following screenshot shows an example of
    the folder hierarchy:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Amazon S3 存储库中，文件夹和文件的结构与本地文件系统中的结构相同。以下截图显示了文件夹层次结构的示例：
- en: '![How it works…](img/image00341.jpeg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![如何工作…](img/image00341.jpeg)'
- en: There's more…
  id: totrans-206
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: 'Integration with Amazon S3 Cloud works perfectly if the document library repository
    is small. The problems occur when the number of concurrent users and number of
    files is huge. The problem is between `HttpClient` and S3 and their parallel communication
    (concurrent communication threads). It is possible to increase the number of connections
    by overriding `jets3t.properties`. To properly change it, put this file in the
    Tomcat classpath, for instance, in the `${CATALINA_BASE}/lib` folder. Afterwards,
    change the following properties and try to fit the values to your environment:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 如果文档库存储库较小，与Amazon S3云的集成工作得非常完美。当并发用户数量和文件数量巨大时，问题就会出现。问题出在`HttpClient`和S3及其并行通信（并发通信线程）之间。可以通过覆盖`jets3t.properties`来增加连接数。为了正确更改它，将此文件放入Tomcat类路径中，例如，在`${CATALINA_BASE}/lib`文件夹中。之后，更改以下属性，并尝试将值调整到您的环境中：
- en: '[PRE6]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The official documentation at [https://jets3t.s3.amazonaws.com/toolkit/configuration.html](https://jets3t.s3.amazonaws.com/toolkit/configuration.html)
    describes the properties as follows:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在[https://jets3t.s3.amazonaws.com/toolkit/configuration.html](https://jets3t.s3.amazonaws.com/toolkit/configuration.html)的官方文档中，属性描述如下：
- en: '| Property name | Description |'
  id: totrans-210
  prefs: []
  type: TYPE_TB
  zh: '| 属性名称 | 描述 |'
- en: '| --- | --- |'
  id: totrans-211
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `s3service.internal-error-retry-max` | This refers to the maximum number
    of concurrent communication threads that will be started by the `ThreadedStorageService`
    / `SimpleThreadedStorageService` services for upload and download operations.
    This value should not be too high. Otherwise, you risk I/O errors due to bandwidth
    starvation when transferring many large files. *It works only with Liferay 6.0
    and Liferay 6.1*. |'
  id: totrans-212
  prefs: []
  type: TYPE_TB
  zh: '| `s3service.internal-error-retry-max` | 这指的是`ThreadedStorageService` / `SimpleThreadedStorageService`服务为上传和下载操作启动的最大并发通信线程数。这个值不应过高。否则，在传输大量大文件时，可能会由于带宽不足而出现I/O错误。*它仅适用于Liferay
    6.0和Liferay 6.1*。 |'
- en: '| `cloudfront-service.internal-error-retry-max` | This refers to the maximum
    number of retries that will be attempted when a CloudFront connection fails with
    an InternalServer error. To disable retries of InternalError failures, set this
    to 0\. *It works only with Liferay 6.2*. |'
  id: totrans-213
  prefs: []
  type: TYPE_TB
  zh: '| `cloudfront-service.internal-error-retry-max` | 这指的是当CloudFront连接因内部服务器错误失败时将尝试的最大重试次数。要禁用内部错误失败的重试，请将此设置为0。*它仅适用于Liferay
    6.2*。 |'
- en: '| `threaded-service.max-thread-count` | This is the maximum number of concurrent
    communication threads that will be started by the `ThreadedStorageService` / `SimpleThreadedStorageService`
    services for upload and download operations. This value should not be too high.
    Otherwise, you risk I/O errors due to bandwidth starvation when transferring many
    large files.The default value is `2`.This value must not exceed the maximum number
    of HTTP connections available to JetS3t, as set by the `httpclient.max-connections`
    property. |'
  id: totrans-214
  prefs: []
  type: TYPE_TB
  zh: '| `threaded-service.max-thread-count` | 这是指`ThreadedStorageService` / `SimpleThreadedStorageService`服务为上传和下载操作启动的最大并发通信线程数。这个值不应过高。否则，在传输大量大文件时，可能会由于带宽不足而出现I/O错误。默认值为`2`。这个值不能超过JetS3t可用的最大HTTP连接数，该连接数由`httpclient.max-connections`属性设置。
    |'
- en: '| `httpclient.retry-max` | This determines the number of times to retry connections
    when they fail with I/O errors. Set this to `0` to disable retries.The default
    value is `5`. |'
  id: totrans-215
  prefs: []
  type: TYPE_TB
  zh: '| `httpclient.retry-max` | 这决定了在连接失败时因I/O错误而重试连接的次数。将其设置为`0`以禁用重试。默认值为`5`。
    |'
- en: '| `httpclient.connection-timeout-ms` | This determines the number of milliseconds
    to wait before a connection times out. `0` means infinity.The default value is
    `60000`. |'
  id: totrans-216
  prefs: []
  type: TYPE_TB
  zh: '| `httpclient.connection-timeout-ms` | 这决定了在连接超时之前要等待的毫秒数。`0`表示无限。默认值为`60000`。
    |'
- en: '| `httpclient.socket-timeout-ms` | This determines the number of milliseconds
    to wait before a socket connection times out. `0` means infinity.The default value
    is `60000`. |'
  id: totrans-217
  prefs: []
  type: TYPE_TB
  zh: '| `httpclient.socket-timeout-ms` | 这决定了在套接字连接超时之前要等待的毫秒数。`0`表示无限。默认值为`60000`。
    |'
- en: '| `httpclient.max-connections` | This refers to the maximum number of simultaneous
    connections to be allowed globally.The default value is `20`.If you have a fast
    Internet connection, you can improve the performance of your S3 client by increasing
    this setting and the corresponding S3 Service properties, `s3service.max-thread-count`
    and `s3service.admin-max-thread-count`. However, be careful because, if you increase
    this value too much for your connection, you may exceed your available bandwidth
    and cause communication errors. |'
  id: totrans-218
  prefs: []
  type: TYPE_TB
  zh: '| `httpclient.max-connections` | 这指的是全局允许的最大并发连接数。默认值是`20`。如果你有快速的互联网连接，可以通过增加此设置以及相应的S3服务属性，`s3service.max-thread-count`和`s3service.admin-max-thread-count`来提高你的S3客户端性能。然而，请注意，如果你为你的连接增加太多，可能会超过你的可用带宽并导致通信错误。|'
- en: See also
  id: totrans-219
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: For information on building scalable systems, refer to the *Scalable infrastructure*
    recipe in [Chapter 12](part0088.xhtml#aid-2JTHG1 "Chapter 12. Basic Performance
    Tuning"), *Basic Performance Tuning*.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 有关构建可伸缩系统的信息，请参阅[第12章](part0088.xhtml#aid-2JTHG1 "第12章。基本性能调整")中的*可伸缩基础设施*配方，*基本性能调整*。
- en: Data migration between storage hooks
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存储钩子之间的数据迁移
- en: This recipe is dedicated to administrators who have to change from one store
    implementation to another for any reason. This example shows you how we can migrate
    binary files stored in the document library to other storage repositories. In
    our example, we will examine migration from S3Store (Amazon S3) to the local `FileSystemStore`
    repository hook.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 此配方献给那些因任何原因需要从一种存储实现更改为另一种存储实现的管理员。此示例展示了我们如何将存储在文档库中的二进制文件迁移到其他存储库。在我们的示例中，我们将检查从S3Store（Amazon
    S3）迁移到本地`FileSystemStore`存储钩子的过程。
- en: How to do it…
  id: totrans-223
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Liferay has a built-in functionality to migrate documents between storage hooks.
    Let''s assume that our Liferay instance is already started, and the library is
    connected to the Amazon S3 cloud. In order to migrate documents to the filesystem,
    go through the following steps:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay内置了在存储钩子之间迁移文档的功能。假设我们的Liferay实例已经启动，并且库已连接到Amazon S3云。为了将文档迁移到文件系统，请按照以下步骤操作：
- en: Log in as an administrator to the Liferay instance.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录到Liferay实例。
- en: Go to **Admin** | **Control Panel**.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**管理** | **控制面板**。
- en: Then go to **Configuration** | **Server Administration** | **Data Migration**.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后转到**配置** | **服务器管理** | **数据迁移**。
- en: Scroll to the **Migrate documents from one repository to another** section.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到**从一个存储库迁移文档到另一个存储库**部分。
- en: Select a new repository hook called **com.liferay.portlet.documentlibrary.store.FileSystemStore**.![How
    to do it…](img/image00342.jpeg)
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个新的存储钩子，称为**com.liferay.portlet.documentlibrary.store.FileSystemStore**。![如何操作…](img/image00342.jpeg)
- en: Click on the **Execute** button.
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**执行**按钮。
- en: Liferay temporarily changes the status to maintenance mode.
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Liferay临时将状态更改为维护模式。
- en: 'Look into the `catalina.out` log and check the execution. The log file should
    look like this:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看并检查`catalina.out`日志的执行情况。日志文件应如下所示：
- en: '[PRE7]'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: How it works…
  id: totrans-234
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: 'Liferay provides powerful features to migrate data between store hooks. It
    is an important tool when our Liferay instance works and our project manager or
    product owner wants to change the storage system to another, such as Amazon S3
    or even SharePoint. Moreover, it is possible to do it without your developers
    having to write custom scripts. This functionality is implemented in the `com.liferay.portal.convert.ConvertDocumentLibrary`
    class. The `doConvert` method invokes migration processes for the following files:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay提供了迁移存储钩子之间数据的功能。当我们的Liferay实例运行时，我们的项目经理或产品所有者想要将存储系统更改为另一个系统，例如Amazon
    S3或SharePoint时，这是一个重要的工具。此外，无需你的开发者编写自定义脚本即可完成此操作。此功能在`com.liferay.portal.convert.ConvertDocumentLibrary`类中实现。`doConvert`方法调用以下文件的迁移过程：
- en: Migrate images
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 迁移图片
- en: Migrate document libraries
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 迁移文档库
- en: Migrate message board attachments
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 迁移论坛附件
- en: Migrate wiki attachments
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 迁移维基附件
- en: In fact, these four methods call *Dynamic Query* to get all the file definitions
    placed in the database and physically copy them from one place to another. The
    structure of all the folders and files is mapped one by one.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，这四种方法调用*动态查询*来获取数据库中放置的所有文件定义，并将它们从一处复制到另一处。所有文件夹和文件的结构都是逐个映射的。
- en: Tip
  id: totrans-241
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Carefully study your logfile in order to make sure that all of the data is moved
    correctly.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 仔细检查你的日志文件，以确保所有数据都正确迁移。
- en: See also
  id: totrans-243
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: For information on how to change a database engine, refer to the *Migrating
    content from one database to another database* recipe in [Chapter 11](part0080.xhtml#aid-2C9D01
    "Chapter 11. Quick Tricks and Advanced Knowledge"), *Quick Tricks and Advanced
    Knowledge*.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 关于如何更改数据库引擎的信息，请参考[第11章](part0080.xhtml#aid-2C9D01 "第11章。快速技巧和高级知识")中的*从数据库迁移到另一个数据库*配方，*快速技巧和高级知识*。
