<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Making Your Website Secure</h1>
                
            
            <article>
                
<p class="calibre2">It's surprising that no website utilizes HTTPS today. Securing a website was difficult in the past, but most barriers to security have been erased in recent years. Some of those barriers included the price, technical requirements, and performance concerns.</p>
<p class="calibre2">To qualify as a progressive web application, a website must be served via HTTPS. Service workers are gated behind HTTPS because they run in the background and are designed to perform tasks that could compromise privacy if they are not protected.</p>
<p class="calibre2">With reduced and eliminated barriers, search engines and browsers have increased HTTPS's visibility to consumers because of improved search engine rankings, visual queues in the browser, and the gating APIs behind HTTPS:</p>
<p class="cdpaligncenter1"><img class="aligncenter" src="../images/00028.jpeg"/></p>
<p class="calibre2">This means that every website now has incentives to migrate from HTTP to HTTPS. But there are still some issues that you will need to deal with for a successful HTTPS strategy.</p>
<p class="calibre2">In this chapter, you will learn the following topics:</p>
<ul class="calibre10">
<li class="calibre11">What SSL/TLS and HTTPS are</li>
<li class="calibre11">Common objections, reasons to migrate today HTTPS</li>
<li class="calibre11">An HTTPS migration strategy</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">SSL history</h1>
                
            
            <article>
                
<p class="calibre2">The <strong class="calibre4">Secure Socket Layer</strong> (<strong class="calibre4">SSL</strong>) certificates represent the underpinnings of trust in most web and internet transactions. Trust is the key word when it comes to SSL and HTTPS. When a website uses SSL, the communication between the browser and the server is encrypted, but to obtain an SSL certificate, you must establish a level of trust with an issuing authority.</p>
<p class="calibre2">To enable SSL, you must install a certificate on your server. Certificates are issued by a <strong class="calibre4">certificate authority</strong> (<strong class="calibre4">CA</strong>). Today, there are many certificate authorities, and it would be difficult to list them all. You should search for the best provider for your needs. I will discuss a few in this chapter. You will also learn about the different types of certificates and <span class="calibre5">the additional features that </span><span class="calibre5">CAs <em class="calibre13">package</em> them with. In the not too distant past, Network Solutions was the only authority from which available to purchase a certificate.</span></p>
<p class="calibre2">Not only were they the only game in town, you had to navigate lots of red tape. If they did not like your paperwork, they would reject you. It was almost impossible for individuals to buy a certificate as domain ownership needed to be tied to a registered business.</p>
<p class="calibre2">This limited availability led to high prices for annual certificates. The average blog, business, or organization never considered using SSL because of the cost. This limited SSL to sites that transferred sensitive information, such as credit card and bank account numbers, because of the original barriers.</p>
<p class="calibre2">The certificate cost was not limited to just the annual certificate cost—hosting a secure site was prohibitive. Because web technology had not evolved, SSL was limited to a single domain per IP address. This meant that sites needed to pay for a dedicated IP address and, often, a dedicated web server. $4.99-a-month shared-hosting plans were not an option if you wanted encryption.</p>
<p class="calibre2">The HTTPS story has changed since then. There are many free and low-cost certificate authorities, removing the annual cost barrier. HTTP protocol and web server technology has also advanced. Today, you can host multiple sites on the same IP address using different certificates and host headers (domains).</p>
<p class="calibre2"><strong class="calibre4">Server Name Indication</strong> (<strong class="calibre4">SNI</strong>) was added to the TLS specification in 2003 (<a href="https://en.wikipedia.org/wiki/Server_Name_Indication" target="_blank" class="calibre9">https://en.wikipedia.org/wiki/Server_Name_Indication</a>). This allows servers to host multiple domains on the same IP and port number using TLS. Originally, the server managed the host header name translation once the HTTP connection was established, or after the TLS handshake.</p>
<p class="calibre2">The 2003 TLS specification change has the client include the domain name as part of the TLS negotiation. Now, web servers can use their internal host header tables to determine the desired website.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">How does TLS work?</h1>
                
            
            <article>
                
<p class="calibre2">TLS is an encryption protocol that works on top of TCP and sometimes UDP as well. Because it sits on top of the transport layer, it allows protocols higher in the chain to remain unchanged, such as HTTP, for example.</p>
<p class="calibre2">The protocol hides the actual data being sent across the wire. Attackers can only see what port, domain, and IP address are connected with it. They could also track how much data is being transferred.</p>
<p class="calibre2">Once the TCP connection is established, the TLS handshake is started by the client (through the browser or another user agent client application). The client starts the TLS conversation by asking a series of questions:</p>
<ul class="calibre10">
<li class="calibre11">Which version of SSL/TLS is it running?</li>
<li class="calibre11">What cipher suites does it want to use?</li>
<li class="calibre11">What compression methods does it want to use?</li>
</ul>
<p class="calibre2">The client chooses the highest level of the TLS protocol supported by both the client and server. The compression method is also selected.</p>
<p class="calibre2">Once the initial TLS connection is established, the client requests the server's certificate. The certificate must be trusted by the client or an authority party that the client trusts. Examples of certificate authorities are Network Solutions, GeoTrust, Let's Encrypt, and Amazon.</p>
<p class="calibre2">After the certificate is verified, an encryption key is exchanged. The key depends on the cipher that is chosen. Once the key is exchanged, the client and server are able to perform symmetric encryption.</p>
<p class="calibre2">The client tells the server that all future communications are to be encrypted:</p>
<div class="cdpaligncenter"><img src="../images/00029.jpeg" class="calibre45"/></div>
<p class="calibre2">The client and server perform a final verification in which the client's MAC address is verified by the server. The server receives an initial authentication message from the client that is decrypted and sent back to the client for verification.</p>
<p class="calibre2">Encryption keys are generated uniquely for each connection, and are based on the authentication message. Assuming the handshake completes successfully, the client and the server can now communicate securely.</p>
<p class="calibre2">Secure TLS connections between the client and server have at least one of the following properties:</p>
<ul class="calibre10">
<li class="calibre11">As symmetric cryptography is used to encrypt the transmitted data, it is the reason why the connection is secure. The negotiation of a shared secret is both secure and reliable ( the negotiated secret is unavailable to eavesdroppers and no attacker can modify the communications during the negotiation without being detected).</li>
<li class="calibre11">Public-key cryptography is used to authenticate the identity of the communicating parties. The authentication procedure could be made optional, but typically it is required for the server.</li>
<li class="calibre11">To prevent the undetected loss or alteration of the data during transmission, each transmitted message includes message integrity check using a message authentication code</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">What is HTTPS?</h1>
                
            
            <article>
                
<p class="calibre2"><strong class="calibre4">HTTPS</strong> is HTTP within SSL/TLS. TLS establishes a secure tunnel for bidirectional binary data communications between two hosts (the web server and browser). <strong class="calibre4">HTTP</strong> (<strong class="calibre4">Hypertext Transport Text Protocol</strong>) is the communications protocol that the client and server use to talk to each other<span class="calibre5"><span class="calibre5">:</span></span></p>
<div class="cdpaligncenter"><img src="../images/00030.jpeg" class="calibre46"/></div>
<p class="calibre2">So, think of HTTP as water inside a pipe. The pipe is the TLS encryption and the water is the data. The primary difference between HTTPS and the water analogy is that HTTPS is bidirectional and plumbing isn't.</p>
<p class="calibre2">There are other communication protocols that support TLS, such as web sockets (WSS), email (SMTPS), and FTP (FTPS).</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">HTTPS advantages</h1>
                
            
            <article>
                
<p class="calibre2">The first, and often only, feature you will think of when someone asks about SSL or HTTPS is encryption. This is a good reason to use HTTPS, but it is not the only reason, and not even the most important reason.</p>
<p class="calibre2">HTTPS gives us three security properties:</p>
<ul class="calibre10">
<li class="calibre11"><strong class="calibre1">Identity</strong>: Certificate proves the server is the real server</li>
<li class="calibre11"><strong class="calibre1">Confidentiality</strong>: Only the browser and server can read the data being passed between them</li>
<li class="calibre11"><strong class="calibre1">Integrity</strong>: The sent data is what the other party receives</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Identity</h1>
                
            
            <article>
                
<p class="calibre2">When you install an SSL certificate and enable HTTPS, you are telling the world that they can trust your site's identity. Once that secure channel of communication is opened between the client and server, both can have confidence that the conversation is to whom they expect.</p>
<p class="calibre2">Both the client and the server establish a communication channel by verifying each other's identity. The certificate is used to verify this identify. Each part of the conversation requires a token, known only to the client and server.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Confidentiality</h1>
                
            
            <article>
                
<p class="calibre2">Without HTTPS, your connection could be hijacked via a man in the middle attack. The address in the browser may tell you that it is the domain you expect to have loaded, but in reality, it could be bad guy in the middle.</p>
<p class="calibre2">Let's start by defining different scenarios:</p>
<p class="calibre2">Normally when you connect to a website using HTTP, the conversation is in plain text. In general, the conversation contains nothing sensitive. But a bad person could snoop on your traffic and use the information they find to do bad things, as shown in the following image:</p>
<div class="cdpaligncenter"><img src="../images/00031.jpeg" class="calibre47"/></div>
<p class="calibre2">This is amplified when you use public Wi-Fi. These networks are great for connecting to the internet for free, but poor for personal security.</p>
<p class="calibre2">Once the eavesdropping bad guy identifies your session, they could intercept the conversation and route you to their server. Now any information you share with the desired site is sent to the bad guy's server instead, as shown in the following image:</p>
<div class="cdpaligncenter"><img src="../images/00032.jpeg" class="calibre48"/></div>
<p class="calibre2">While somewhat sophisticated, it happens more times than you might think.</p>
<p class="calibre2">Let's change the scenario so that all those involved are using HTTPS. Now all the communication is encrypted. The only thing the bad guy can see is what domain(s) you visit, not even the URLs on those domains, as shown in the following image:</p>
<div class="cdpaligncenter"><img src="../images/00033.jpeg" class="calibre49"/></div>
<p class="calibre2">The connection between the client and server cannot be hijacked. If a bad actor tries to hijack the session, both the client and server know there is a problem and the conversation ends.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Integrity</h1>
                
            
            <article>
                
<p class="calibre2">Because the connection is encrypted and third-party actors cannot tamper with data, each end knows the data is valid. This is because the man-in-the-middle attack is thwarted.</p>
<p class="calibre2">It is not just bad guys you need to worry about. Third-party content, such as ads, could be injected into a response anywhere along the way with HTTP. For example, an ISP or your local coffee shop could modify the request and response to reroute you to a different server or change the content you view.</p>
<p class="calibre2">HTTPS gives both the customer and the server confidence that the conversation contains the real data. There is no guarantee that the data received by either the client or the server is correct when HTTP is used.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Browsers are going out of their way to indicate HTTPS to the customer</h1>
                
            
            <article>
                
<p class="calibre2">Have you noticed those padlocks in the browser address bar? Chances are you have, but that you don't really think about it until you feel something is a little fishy. Browsers have gradually been stepping up the user experience for the average consumer in recent years<span class="calibre5"><span class="calibre5">:</span></span></p>
<div class="cdpaligncenter"><img src="../images/00034.jpeg" class="calibre50"/></div>
<p class="calibre2">Soon, Chrome will start making it very apparent when a page contains either a password or credit card field. If those fields are present and not served via HTTPS, they will display a big red visual warning indicating to the customer that the page is not secure.</p>
<p class="calibre2">Recently, Chrome started showing a warning when a site is loaded using HTTP when in Incognito mode, as shown in the following image:</p>
<div class="cdpaligncenter"><img src="../images/00035.jpeg" class="calibre51"/></div>
<p class="calibre2">Chrome is not the only browser that is increasing visual prompting when a site is not served with HTTPS: Microsoft Edge, FireFox, and Opera have all announced plans to increase visual cues. This will, of course, lead to fewer and fewer scams succeeding, but will also cut into legitimate business conversions because they have neglected the application of HTTPS.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Search engine optimization</h1>
                
            
            <article>
                
<p class="calibre2">Google and other search engines have publicly stated that they consider HTTPS sites to be more authoritative than nonsecure sites with the same information. The reason is twofold. First, the average web surfer will trust an HTTPS site more than a non-HTTPS site. It might just be a simple blog, or it could be a giant bank—whatever the site is, the perception of security goes a long way.</p>
<p class="calibre2">Independent surveys have shown a correlation between higher rankings and HTTPS (see <a href="https://backlinko.com/search-engine-ranking" class="calibre9">https://backlinko.com/search-engine-ranking</a><span class="calibre5">)</span>. This makes sense because search ranking signals highly correlate with better user experience. HTTPS is a user experience factor because it conveys trust to the consumer.</p>
<p class="calibre2">So even if your site does not handle <em class="calibre13">sensitive </em>information, you should still implement HTTPS to boost your visitor's confidence in your brand and your search engine rankings.</p>
<p class="calibre2">The second reason search engines are pushing businesses and organizations to implement HTTPS is to verify ownership. You cannot install a legitimate TLS certificate without some sort of ownership verification. A certificate issuer will send an email to trigger a verification process based on the domain's WHOIS record. When you register your domain, you must supply real contact information, including an active email address.</p>
<p class="calibre2">Bad guys tend to register domains with fake or false contact information so they cannot be traced. By requiring HTTPS, search engines are showing that there is a modicum of trust in the site's ownership.</p>
<p class="calibre2">As the web moves toward HTTPS as the default, there will be fewer and fewer SPAM websites. Bad guys won't get SSL certificates, at least not easily.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">No longer cost-prohibitive</h1>
                
            
            <article>
                
<p class="calibre2">Since the beginning of SSL, certificates have come with a cost. Typically, this was an annual cost. In the past (around 15 years ago), certificates typically cost between $100 and $500 a year. You can think about it like an annual business license. In fact, to complete a certificate request, you often needed a proof of business or organization. The issuing process was also time-prohibitive. It often took 3–14 days to get a certificate. The issuing authority had a staff that evaluated every certificate request and the accompanying paperwork. A very archaic process for a digital platform.</p>
<p class="calibre2">While enterprises do not blink at a $100-a-year fee for their web site, the average small business does. There are thousands of small businesses for every enterprise. As well as traditional small businesses, there are millions of businesses, blogs, forums, and other entities that make little to no revenue from their site. They can barely justify their hosting overhead. HTTPS is just not viable at those rates.</p>
<p class="calibre2">Another cost you might not think about is IP addresses. In the beginning, SSL required a dedicated IP address. Despite millions of possible IP addresses, there were not enough, not even close. The limited supply of IP addresses also raised the price of HTTPS. This could have added another $100 or more a year to the cost of hosting a site. Today, this has changed. Now a certificate maps to a domain. This eliminates this tax.</p>
<p class="calibre2">Today, HTTPS requirements and costs have all relaxed. There are many low-cost certificate providers. In fact, you can obtain a certificate for free from Amazon or Let's Encrypt (<a href="https://letsencrypt.org" class="calibre9">https://letsencrypt.org</a>). The latest stats Let's Encrypt shares are over 50 million certificates issued.</p>
<p class="calibre2">Up to this point, I have referred to SSL, but that name is not exactly correct anymore. <strong class="calibre4">Transport Layer Security</strong> (<strong class="calibre4">TLS</strong>) is the proper term used today. The security protocol continues to evolve over time. SSL was originally created by Netscape, which is now owned by AOL.</p>
<p class="calibre2">To avoid potential legal issues, TLS was first drafted in 1999 in RFC 2246 (see<a href="https://tools.ietf.org/html/rfc2246" class="calibre9"> https://tools.ietf.org/html/rfc2246</a><span class="calibre5">)</span><span class="calibre5">. The primary intent behind the name change was to separate the encryption protocol from Netscape and make it more <em class="calibre13">open</em> and <em class="calibre13">free</em>.</span></p>
<p class="calibre2">SSL and TLS are interchangeable in general conversation as most people will understand what you mean.</p>
<p class="calibre2">Which protocol version you implement is limited by your server platform. Because TLS 1.2 is very well established at this point, it is difficult to find a server platform or browser that does not support version 1.2. But Qualys has some advice:</p>
<div class="packt_quote2">"There are five protocols in the SSL/TLS family, but not all of them are secure. The best practice is to use TLS v1.0 as your main protocol (making sure the BEAST attack is mitigated in configuration) and TLS v1.1 and v1.2 if they are supported by your server platform. That way, the clients that support newer protocols will select them, and those that don't will fall back to TLS v1.0. You must not use SSL v2.0, because it is insecure."</div>
<p class="calibre2">Fortunately, when you create a TLS certificate, the protocol version is handled for you. Later in this chapter, I will go through the steps to create a certificate in AWS and Let's Encrypt, both free services.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Modern APIs require HTTPS</h1>
                
            
            <article>
                
<p class="calibre2">We are currently at a point in our technological development where new high-value APIs and features are being added quickly. These include service workers and HTTP/2, both requiring HTTPS. WebRTC and now Geo-Location also require HTTPS. Any API that deals with personal information either is or soon will be gated behind HTTPS (<a href="https://www.chromium.org/Home/chromium-security/deprecating-powerful-features-on-insecure-origins" target="_blank" class="calibre9">https://www.chromium.org/Home/chromium-security/deprecating-powerful-features-on-insecure-origins</a>).</p>
<p class="calibre2">While these APIs could work without HTTPS, the security wraps these features in confidence. Think about it for a moment—the deeper a platform lets you integrate, the more they will require of your application.</p>
<p class="calibre2">Requiring HTTPS ensures a minimal amount of security and trust, and thus enough faith from potential platforms that you are not going to do evil things.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">HTTPS can be significantly faster than HTTP</h1>
                
            
            <article>
                
<p class="calibre2">Some technologies designed to make websites faster only work with HTTPS. One example is a protocol enhancement known as HTTP/2. Take the HTTP versus HTTPS test to see this in action <span class="calibre5">(see <a href="https://www.httpvshttps.com/" target="_blank" class="calibre9">https://www.httpvshttps.com/</a> for details)</span><span class="calibre5">.</span></p>
<p class="calibre2">When I first saw research showing HTTPS to be faster, I admit I was skeptical. I saw how much time the encryption adds in network waterfalls. Fortunately, the folks managing browsers and network stacks have done us a solid and smoothed out many of the issues that cause SSL to be slower than non-SSL, as illustrated in the following quote from Adam Langley at Google:</p>
<div class="packt_quote2">"On our production frontend machines, SSL/TLS accounts for less than 1% of the CPU load, less than 10 KB of memory per connection and less than 2% of network overhead. Many people believe that SSL/TLS takes a lot of CPU time and we hope the preceding numbers will help to dispel that."</div>
<p class="calibre2">Because HTTP/2 multiplexes requests through a single connection, there is only one TLS handshake that must be completed. This reduces the time to retrieve assets and server load. Now the client and the server only need to perform a single handshake and encryption cycle.</p>
<p class="calibre2">The goal of HTTP/2 is to improve performance by undoing the shortcomings of the HTTP/1.1 specification. HTTP/2 eliminates connections by multiplexing responses, compressing headers, prioritizing responses, and allowing server-side push, as shown in the following image:</p>
<div class="cdpaligncenter"><img src="../images/00036.jpeg" class="calibre52"/></div>
<p class="calibre2">All browsers support HTTP/2 and most servers do as well. Windows 2016 was the last major operating system to ship HTTP/2 support. Since it is relatively new, there are not many production deployments online.</p>
<p class="calibre2">HTTP/2 does not change any of the HTTP semantics. Status codes, verbs, and other such phrases are things we have used for years, and thus will not break existing applications.</p>
<p class="calibre2">The de facto implementation that standard browsers are enforcing is HTTP/2 over TLS. While you could <span class="calibre5">technically </span><span class="calibre5">use HTTP/2 without TLS, browsers do not allow this approach.</span></p>
<p class="calibre2">The combination of the single connection and TLS handshake in concert with the other performance benefits that HTTP/2 offers mean that TLS is consistently faster than HTTP.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">HTTPS adoption</h1>
                
            
            <article>
                
<p class="calibre2">According to the August 2017 Qualys survey (see<a href="https://www.ssllabs.com/ssl-pulse/" class="calibre9"> https://www.ssllabs.com/ssl-pulse/</a>), 60.2% of the sites they analyzed had proper SSL configuration. It is important to note that their survey is limited to 138, 672 of the most popular websites, a small sampling of the hundreds of millions of sites currently available online.</p>
<p class="calibre2">The HTTP Archive reports 64% of the top 500,000 websites use HTTPS (<a href="https://httparchive.org/reports/state-of-the-web#pctHttps" target="_blank" class="calibre9">https://httparchive.org/reports/state-of-the-web#pctHttps</a>) shown in the graph. The good news is both surveys show a positive trend toward more sites using SSL:</p>
<div class="cdpaligncenter"><img src="../images/00037.jpeg" class="calibre52"/></div>
<p class="calibre2">Unlike the past, every website should now use HTTPS instead of plain text HTTP. Securing your website via HTTPS is about more than security—it is about building trust. When you implement HTTPS, you not only add a layer of security: Your customers can see that dedication to security and feel more comfortable about doing business with your brand. Most consumers and non technologists get the purpose of HTTPS. They don't care about the technical implementation, they care about the trust. When you implement HTTPS, you are eliminating a layer of stress that your customer might have if you didn't use HTTPS. SSL adds value to your overall user experience, and that is why search engines and browsers are pushing everyone toward HTTPS everywhere. There are several reasons why you should use HTTPS with every website.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Different types of SSL certificate</h1>
                
            
            <article>
                
<p class="calibre2">SSL certificate can be organized into two types: <strong class="calibre4">validation level</strong> and <strong class="calibre4">secured domains</strong>.</p>
<p class="calibre2">Certificates can be issued for multiple domains and even wildcard domains. But because of the extended validation specification, these certificates can only be issued for a single domain, not multiple or wildcard domains. This is because of the sensitivity of the verification process.</p>
<p class="calibre2">There are a couple of different types of SSL certificates based on the method that you choose to confirm your identity. The three levels increase in complexity and vary in the type of information requested to validate the certificate.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Domain-validated certificates</h1>
                
            
            <article>
                
<p class="calibre2">The <strong class="calibre4">domain-validated SSL certificate</strong> (<strong class="calibre4">DV certificate</strong>) is the most basic, and validates the domain associated with the SSL certificate that is registered. To validate a DV SSL certificate, the owner (or someone with admin rights) approves the certificate request via email or DNS.</p>
<p class="calibre2">The email recipient proves their administrative privileges over the domain by acknowledging receipt and sending confirmation to the provider. Additionally, they may be required to configure certain DNS records for the associated domain. The process may take a few minutes to a few hours to order and validate a DV certificate.</p>
<p class="calibre2">This should be the most common type of certificate used because any site can quickly install them for little or no cost. If your site might be the target of phishing or other forms of fraud, you should probably invest in a certificate that requires more authentication<span class="calibre5"><span class="calibre5">:</span></span></p>
<div class="cdpaligncenter"><img src="../images/00038.jpeg" class="calibre53"/></div>
<p class="calibre2">Browsers will visually indicate a site that is served with proper HTTPS, typically with a green padlock. The domain-validated certificate is the minimal certificate required for this status.</p>
<p class="calibre2">The following screenshot shows how FireFox displays the certificate's information. Here is my current Love2Dev.com certificate, a domain-validated certificate:</p>
<div class="cdpaligncenter"><img src="../images/00039.gif" class="calibre54"/></div>
<p class="calibre2">You can see that it only lists the common name (domain) and leaves the <span class="calibre5">Organization</span> and <span class="calibre5">Organizational Unit</span> empty.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Organization-validated certificates</h1>
                
            
            <article>
                
<p class="calibre2">An <strong class="calibre4">organization-validated SSL certificate</strong> (<strong class="calibre4">OV certificate</strong>) validates the domain ownership, plus the organization information included in the certificate, such as the name, city, state, and country. The validation process is similar to that of the domain-validated certificate, but it requires additional documentation to certify the company's identity. The order can take up to a few days because of the company validation process.</p>
<p class="calibre2">Offers more company information and thus trust to the end user. Most consumers will never check the details of a certificate, but it can help convey more trust.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Extended-validation SSL certificates</h1>
                
            
            <article>
                
<p class="calibre2"><strong class="calibre4">Extended Validation SSL certificates</strong> (<strong class="calibre4">EV certificates</strong>) require more company data validation than DV and OV certificates. Domain ownership, organization information, and legal proof and documentation are all required. The order may take from a few days to a few weeks because of the extended validation process.</p>
<p class="calibre2">A <em class="calibre13">green address bar</em> in the browser containing the company name is the distinguishing attribute of extended-validation certificates, and is an immediate reward for the extended-validation certificate. It is not really a green bar, but your organization's name is listed in the address bar with a nice green font, indicating a trusted site, as shown in the following screenshot:</p>
<p class="cdpaligncenter1"><img class="aligncenter1" src="../images/00040.jpeg"/></p>
<p class="calibre2">Comparing an extended-validated certificate to the preceding example, the <span class="calibre5">Organization</span> and <span class="calibre5">Organizational Unit</span> fields have properties, as shown in the following screenshot:</p>
<div class="cdpaligncenter"><img src="../images/00041.gif" class="calibre55"/></div>
<p class="calibre2">The OV and EV certificate types do not reflect an increase in the level of encryption; instead, these reflect a more stringent validation of the individual/company that owns the website domain. A good rule is that the more sensitive the data that your site manages, the higher the level of verification you should use.</p>
<p class="calibre2">If you do use an organizational- or extended-validated certificate, make sure you start the renewal process ahead of your expiration date. These certificates take days and weeks to issue because of the diligence required. If your certificate expires, you could go days without being properly secured.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">How to obtain and install an SSL certificate</h1>
                
            
            <article>
                
<p class="calibre2">Every server platform has its own steps to generate a certificate request and install an issued certificate. But the common steps include the following:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Generate a <strong class="calibre1">certificate signing request</strong> (<strong class="calibre1">CSR</strong>)</li>
<li value="2" class="calibre11">Order an SSL certificate from a CA</li>
<li value="3" class="calibre11">Download the intermediate certificate from the CA</li>
<li value="4" class="calibre11">Install the intermediate certificate on the server</li>
</ol>
<p class="calibre2">There are multiple certificate authorities to choose from today, such as GeoTrust, DigiCert, Symantec, and Network Solutions. You can compare the prices as well as the types of certificates that they offer to find the best solution for you. We will review the different types of certificates later in the chapter.</p>
<p class="calibre2">Traditionally, you generate an unsigned key from your web server software or administration panel. This is usually a file with an encrypted string. You submit this file to the CA as part of the order process.</p>
<p class="calibre2">Once the verification process is complete, the CA will issue the certificate, another file. Your web server then allows you to install the certificate for the site.</p>
<p class="calibre2">Today, the process has become less manual. Many are making it an automated feature that is included with web server control panels. Many are including automated LetsEncrypt.org certificates.</p>
<p class="calibre2">WordPress (<a href="https://wordpress.com/" target="_blank" class="calibre9">https://wordpress.com/</a>)is the biggest player to adopt an HTTPS-only policy. They upgraded all the sites that they host to HTTPS in 2017 using a built-in LetsEncrypt tool.</p>
<p class="calibre2">Amazon AWS offers free certificates for Cloud Front and their network load-balancer services. These are domain-validated certificates, and take about 30 seconds to process; just a shining example of how far the SSL world has come since the mid 90s.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Migrating a website to HTTPS</h1>
                
            
            <article>
                
<p class="calibre2">Regardless of whether you have a new or existing site, you should have a system to ensure that your site is implementing HTTPS correctly. Installing a certificate is just the start of the process. You must make sure that different aspects of your site are referencing HTTPS correctly.</p>
<p class="calibre2">This includes the links in your pages, handling links to your site, and your analytics and search engine profiles.</p>
<p class="calibre2">Even if your site uses HTTPS, <span class="calibre5">the HTTP portion of </span><span class="calibre5">any page that includes HTTP content can be read or modified by attackers. When an HTTPS page has HTTP content, it's called</span> <strong class="calibre4">mixed content</strong><span class="calibre5">. You might think the page is secure, but it isn't because of the mixed content.</span></p>
<p class="calibre2">When a page has mixed content, browsers have visual queues to alert the user to the insecure state. You cannot rely on seeing https in the address bar—look for the green lock. The following screenshot shows an unsecured URL in the browser bar:</p>
<div class="cdpaligncenter"><img src="../images/00042.jpeg" class="calibre56"/></div>
<p class="calibre2">The image shows that Microsoft's home page is not secure, even though the site is loaded via HTTPS. It contains references to insecure assets. The following screenshot is an example of what might be causing the problem:</p>
<div class="cdpaligncenter"><img src="../images/00043.gif" class="calibre57"/></div>
<p class="calibre2">There is more to migrating your site than just cleaning up asset references. This section should be a guide or checklist for you to define an HTTPS migration strategy for your websites.</p>
<p class="calibre2">As a bonus, this list can serve as a portion of your full site-readiness checklist because it includes several best practices that are often overlooked.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Auditing the site for any HTTP:// link references</h1>
                
            
            <article>
                
<p class="calibre2">It does not matter if you have a single-page website or one that contains a million URLs, you need to audit each page for external <kbd class="calibre12">http://</kbd> link references. This include anchor tags as well as any link tags you may have in your document's head.</p>
<p class="calibre2">All third-party hosted assets, such as CSS, JavaScript libraries, images and fonts on public CDNs, as well as third-party services, such as <strong class="calibre4">Google Analytics</strong> (<strong class="calibre4">GA</strong>)<strong class="calibre4">,</strong> are prime targets for HTTP references. These are often overlooked because they are not "owned" by the business.</p>
<p class="calibre2">By now, any reputable third-party service offers HTTPS support. If it does not, you may need to require them to offer HTTPS or find a new provider it they refuse.</p>
<p class="calibre2">As with the preceding Microsoft example , you should also make sure that all references to assets in your site are either HTTPS or are simply absent of the protocol. This would update the site and be ready for any potential future protocols:</p>
<pre class="calibre17">//:c.microsoft.com/trans_pixel.aspx</pre>
<p class="calibre2">The best practice is to make all references protocol-less. Instead of changing all references to <kbd class="calibre12">https://</kbd>, change them to <kbd class="calibre12">//</kbd>. This approach is more forward-thinking because you are making any future communication protocols that may evolve easier to adapt.</p>
<p class="calibre2">When using a protocol-less reference, the user agent applies it to the primary protocol of the asset or external link. This way, the user should have a more seamless browsing experience.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Auditing content and data</h1>
                
            
            <article>
                
<p class="calibre2">Google advises that you should consistently reference external URLs using the HTTPS protocol to send a clear signal to the ranking engine that your site has HTTPS.</p>
<p class="calibre2">Content, such as a blog or general text, is often entered by non developers through a content-management interface. This means that the raw content or site data is persisted in some form of a database, and would not be part of a source-code audit.</p>
<p class="calibre2">You could spider your entire site and produce a report. This could be done with a simple node module or some other utility. Similarly, you should also run a script over your site's persisted data for external HTTP references.</p>
<p class="calibre2">The key is to audit your entire site to identify these potential problems. Every website will require some form of custom audit and update process. I suggest you automate as much as you can; that way, you can rapidly make updates and repeat the process as part of your build.</p>
<p class="calibre2">Once you update content, deploy (preferably to a test server) and audit the results. Chances are that you missed some references and will need to address them. Correct those issues and try again, until you pass the test.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Updating social media links</h1>
                
            
            <article>
                
<p class="calibre2">I wanted to highlight social media links as a common example of the previous step. All social media networks use HTTPS. Since most sites link to their social media profiles as part of the site's main layout, these should be the first links you update.</p>
<p class="calibre2">Because these links are typically contained in the site header, footer, or both, they propagate to every page. From a source code perspective, this app-shell file is a single file, and in audits like these, it is often overlooked.</p>
<p class="calibre2">When globally updating something, such as the protocol that is being used to reference a link, you need to audit your source code as well as your content. This includes every archetype file, such as the master and child layout files.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Configure server auto-redirect of HTTP to HTTPS</h1>
                
            
            <article>
                
<p class="calibre2">Legacy links and natural consumer tendency is to reference URLs via HTTP. Your web server should be configured to send a 301 redirect to the user agent telling them to permanently load the HTTPS address.</p>
<p class="calibre2">A 301 redirect is a permanent address change. You are telling the user agent that the address they are seeking is no longer valid, and to instead go to a new address. By redirecting HTTP to HTTPS, you are effectively telling the world not to ask for insecure content anymore.</p>
<p class="calibre2">This process varies by web server, so consult your platform's documentation for more guidance. Most servers can do this using a simple setting.</p>
<p class="calibre2">If you are using a content-delivery network, and you should for any consumer site, you should be able to configure this redirection in your CDN configuration.</p>
<p class="calibre2">A <kbd class="calibre12">301</kbd> redirect works by receiving a request from a user agent and <span class="calibre5">including a 301 header </span><span class="calibre5">in the server's response. For example, an HTTP request to <kbd class="calibre12">www.example.org</kbd> would look like the following:</span></p>
<pre class="calibre17"><strong class="calibre1">GET / HTTP/2</strong><br class="title-page-name"/><strong class="calibre1">Host: www.example.org</strong></pre>
<p class="calibre2">The server returns a <kbd class="calibre12">301</kbd> response, which includes the permanent location, as shown in the following code:</p>
<pre class="calibre17"><strong class="calibre1">HTTP/2 301 Moved Permanently</strong><br class="title-page-name"/><strong class="calibre1">Location: https://www.example.org/</strong></pre>
<p class="calibre2">You should also configure a proper 301 redirect any time you change your site's routing. When migrating from HTTP to HTTPS, you are changing every route in your site.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Add and verify all domain protocol combinations in webmaster tools</h1>
                
            
            <article>
                
<p class="calibre2">The addition and verification of all domain protocol combinations in webmaster tools is another commonly overlooked migration task. If you are serious about search engine ranking, you will have your site properly registered with both Google and Bing's webmaster tools.</p>
<p class="calibre2">Details of both webmaster platforms is out of the scope of this book.</p>
<p class="calibre2">The best practice is to register all four ways in which your site might be referenced. You should register both HTTP and HTTPS versions for your primary domain and the www. alias. If you do not have all four registered, you will not have a fully registered site, and may suffer some search engine ranking issues.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Defining a canonical HTTPS link</h1>
                
            
            <article>
                
<p class="calibre2">Another SEO practice you might overlook is defining the canonical link. Google and other search engines use this as a signal to know the original source of the content. In this case, any reference using an HTTP URL will be considered a duplicate of the HTTPS version. Take the following code:</p>
<pre class="calibre17">&lt;link rel="canonical" href="http://example.com/foo"&gt;</pre>
<p class="calibre2">You should update this to the following:</p>
<pre class="calibre17">&lt;link rel="canonical" href="https://example.com/foo"&gt;</pre>
<p class="calibre2">This will avoid the duplicate content penalty, which in this case would dilute the link juice. By defining a <kbd class="calibre12">canonical</kbd> link, you are telling the search engine where to direct the ranking authority.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Updating Google analytics to default to HTTPS</h1>
                
            
            <article>
                
<p class="calibre2">Another update you should make concerns your analytics service. Since GA is the most common consumer service, I will demonstrate how to update GA.</p>
<p class="calibre2">In the current GA dashboard, there is an <span class="calibre5">ADMIN </span>option at the bottom of the menu, as shown in the following screenshot:</p>
<div class="cdpaligncenter"><img src="../images/00044.gif" class="calibre58"/></div>
<p class="calibre2">This brings up the administration for your site. The center column <span class="calibre5">Property</span> has a <span class="calibre5">Property Settings</span> option. Select it:</p>
<div class="cdpaligncenter"><img src="../images/00045.jpeg" class="calibre59"/></div>
<p class="calibre2">In the <span class="calibre5">Property Settings</span> panel, change the <span class="calibre5">Default URL</span> to use the HTTPS protocol and save:</p>
<div class="cdpaligncenter"><img src="../images/00046.gif" class="calibre60"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Updating the sitemap and RSS feed to HTTPS</h1>
                
            
            <article>
                
<p class="calibre2">Just as you did with your site's source code and content, you should also make sure your <kbd class="calibre12">sitemal.xml</kbd> and RSS feed sources are updated to use HTTPS. These files are used by search engines and, of course, anyone that subscribes to your RSS feed. They serve as a known directory of your website.</p>
<p class="calibre2">The links in your sitemap are considered to be a source of authority to the search engines. Links in your RSS feed propagate to feed readers, and thus are the way many engaged visitors will enter your site. It is important that you bring them through the door in the best way.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Updating your robots.txt file</h1>
                
            
            <article>
                
<p class="calibre2">Just in case your <kbd class="calibre12">robots.txt</kbd> file has full URLs, you should update those as well. Generally speaking, you include relative paths if you are allowing and disallowing access to spiders. One file you most likely have the full reference for is your <kbd class="calibre12">sitemap</kbd> file:</p>
<pre class="calibre17">User-Agent: *<br class="title-page-name"/>Disallow:<br class="title-page-name"/><br class="title-page-name"/><br class="title-page-name"/><br class="title-page-name"/>Sitemap: https://example.com/sitemap.xml</pre>
<p class="calibre2">While not as common, some sites maintain a <kbd class="calibre12">disavow</kbd> file for search engine spiders. They do this to avoid penalties from negative links. This file should also be updated to use <kbd class="calibre12">https://</kbd>, which reinforces the site's protocol profile with the search engines.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">As you can see, HTTPS is important to implement, but does require some diligence on your part to properly configure your site. As TLS, certificates, and HTTP advances, the barriers that previously held sites back from implementing HTTPS have been removed.</p>
<p class="calibre2">Progressive web applications require HTTPS because it is a higher level of user experience. They also require a registered service worker, which also requires HTTPS. HTTPS unlocks the modern web's capabilities; without it, your website is relegated to a smaller set of capabilities.</p>
<p class="calibre2">Because TLS ensures the conversation between the client and server is not altered by a man in the middle, and because eavesdropping is mitigated, all sites should adopt HTTPS. You are adding a level of trust for your customers, and opening the gates to the latest features the web has to offer.</p>


            </article>

            
        </section>
    </body></html>