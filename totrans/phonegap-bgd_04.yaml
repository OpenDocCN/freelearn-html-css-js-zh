- en: Chapter 4. Working with Plugins
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四章：使用插件
- en: '*Using web standards and JavaScript to build a native app may have its limitations,
    because apps developed using native code can interact deeply with the operating
    system. But this is only partially true when dealing with PhoneGap apps because
    its architecture allows developers to extend the framework capabilities with the
    help of custom plugins.*'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*使用Web标准和JavaScript构建原生应用可能有其局限性，因为使用原生代码开发的应用可以深度与操作系统交互。但处理PhoneGap应用时，这仅部分正确，因为其架构允许开发者通过自定义插件扩展框架功能。*'
- en: 'In this chapter you will:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将：
- en: Learn what a PhoneGap plugin is and how to install the plugins in your project
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解PhoneGap插件是什么以及如何在项目中安装插件
- en: Know how to list all the installed plugins and remove unwanted plugins
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解如何列出所有已安装的插件并移除不需要的插件
- en: Understand how to manage project plugins and their dependencies using Plugman
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解如何使用Plugman管理项目插件及其依赖关系
- en: Discover how to implement the Device API in the project
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现如何在项目中实现设备API
- en: An introduction to plugins
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 插件简介
- en: When you develop and deploy a new simple hybrid application, the application
    might not be doing anything advanced. We know hybrid applications are developed
    using standard web technologies such as HTML, CSS, and JavaScript. We need some
    mechanism for the application to interact with various device-level features.
    To achieve this, we use plugins with PhoneGap/Cordova APIs. Since version 3.0,
    all the PhoneGap APIs have been converted to plugins, which means having a deep
    understanding of the plugins is now even more important for a PhoneGap developer.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开发和部署一个新的简单混合应用时，该应用可能不会执行任何高级操作。我们知道混合应用是使用标准Web技术（如HTML、CSS和JavaScript）开发的。我们需要某种机制让应用与各种设备级功能交互。为了实现这一点，我们使用PhoneGap/Cordova
    API的插件。自3.0版本以来，所有PhoneGap API都已转换为插件，这意味着对插件有深入理解现在对PhoneGap开发者来说更为重要。
- en: A PhoneGap plugin is a bridge between the WebView and the native platform on
    which the app is running.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: PhoneGap插件是WebView和应用程序运行的本地平台之间的桥梁。
- en: 'In order to be productive quickly with PhoneGap plugins, it''s important to
    keep in mind how the framework works. A PhoneGap app consists of three main layers.
    They are as follows:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够快速有效地使用PhoneGap插件，了解框架的工作方式非常重要。一个PhoneGap应用由三个主要层组成。具体如下：
- en: The user interface, developed using HTML, CSS, and JavaScript
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户界面，使用HTML、CSS和JavaScript开发
- en: The business logic, developed in JavaScript
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 业务逻辑，使用JavaScript开发
- en: The PhoneGap framework, native code exposed to the business logic through a
    JavaScript API
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PhoneGap框架，通过JavaScript API暴露给业务逻辑的本地代码
- en: The user interface and the business logic are the app's main source code and
    the parts on which most developers concentrate their development efforts. The
    plugins are strictly integrated in the framework and are exposed to the user through
    JavaScript. You can imagine a plugin as an additional component of the framework
    that works similar to all the PhoneGap APIs.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 用户界面和业务逻辑是应用的主要源代码，以及大多数开发者集中开发努力的部分。插件严格集成在框架中，并通过JavaScript暴露给用户。你可以想象插件是框架的附加组件，其工作方式类似于所有PhoneGap
    API。
- en: Getting started with plugins
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 插件入门
- en: Using plugins you can extend the PhoneGap framework in order to meet the needs
    of your app. This means that there are no compelling limitations but it also means
    that the source code of your app has to be maintained for different platforms.
    There are several plugins listed for all platforms at [http://plugins.cordova.io](http://plugins.cordova.io).
    In order to make sure that an existing plugin fits your needs, you have to double-check
    the compatibility with the PhoneGap version you are using in your project and
    eventually update the source code to be compliant. One of the strengths of PhoneGap
    is its continuous release model, because this speeds up the release of new features
    and bug fixing. But it also means that a plugin should be maintained in order
    to meet the deprecation policy of the framework. Refer to the online Wiki for
    updated information about upcoming deprecations at [http://wiki.apache.org/cordova/DeprecationPolicy](http://wiki.apache.org/cordova/DeprecationPolicy).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 使用插件，您可以扩展PhoneGap框架以满足您应用程序的需求。这意味着没有令人信服的限制，但也意味着您应用程序的源代码必须为不同的平台维护。在[http://plugins.cordova.io](http://plugins.cordova.io)列出了所有平台的几个插件。为了确保现有的插件符合您的需求，您必须检查与您项目中使用的PhoneGap版本的兼容性，并最终更新源代码以符合规范。PhoneGap的一个优势是其持续发布模型，因为这加快了新功能和错误修复的发布。但这也意味着插件应该得到维护，以满足框架的弃用策略。有关即将弃用的更新信息，请参考在线Wiki，链接为[http://wiki.apache.org/cordova/DeprecationPolicy](http://wiki.apache.org/cordova/DeprecationPolicy)。
- en: In order to use the features implemented in a custom plugin, you have to install
    it in your project. It's not an easy task to manually manage the plugins in a
    PhoneGap project; thankfully, there is a command-line tool that makes your life
    easier.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用自定义插件中实现的功能，您必须在项目中安装它。在PhoneGap项目中手动管理插件并不是一件容易的事情；幸运的是，有一个命令行工具可以使您的生活更加轻松。
- en: Installing plugins
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装插件
- en: 'You can install plugins to your project using the CLI tools of Cordova. The
    following command will add the plugin to your project and make the necessary changes
    to the manifest files if required:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用Cordova的CLI工具将插件安装到项目中。以下命令将插件添加到项目中，并在必要时对清单文件进行必要的更改：
- en: '[PRE0]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Here, `PLUGIN.ID` is the ID of the plugin as registered in the plugin repository.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，`PLUGIN.ID`是插件在插件存储库中注册的ID。
- en: The following list summarizes the currently available APIs and the commands
    to run to add them to a PhoneGap project. If you want to remove a plugin, use
    the `$ cordova plugin remove` command instead.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 以下列表总结了目前可用的API以及将它们添加到PhoneGap项目的命令。如果您想删除插件，请使用`$ cordova plugin remove`命令代替。
- en: 'Basic device information:'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本设备信息：
- en: '**Device API**: This gets basic information related to the device'
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设备API**：这获取与设备相关的基本信息'
- en: '[PRE1]'
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**StatusBar API**: This customizes the status bar background'
  id: totrans-26
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**状态栏API**：这自定义状态栏背景'
- en: '[PRE2]'
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Network and battery status:'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络和电池状态：
- en: '**Network API**: This gets cellular network information'
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网络API**：这获取蜂窝网络信息'
- en: '[PRE3]'
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '**Battery API**: This monitors the status of the device''s battery'
  id: totrans-31
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**电池API**：这监控设备电池的状态'
- en: '[PRE4]'
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Accelerometer, compass, and geolocation:'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加速度计、指南针和地理位置：
- en: '**Device Motion (Accelerometer) API**: This handles the device''s motion sensor'
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设备运动（加速度计）API**：这处理设备的运动传感器'
- en: '[PRE5]'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '**Device Orientation API**: This gets the device orientation'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设备方向API**：这获取设备方向'
- en: '[PRE6]'
  id: totrans-37
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '**Geolocation API**: This makes the application location-aware'
  id: totrans-38
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地理位置API**：这使得应用程序具有位置感知能力'
- en: '[PRE7]'
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Camera, media capture, and media playback:'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相机、媒体捕获和媒体播放：
- en: '**Camera API**: This captures a photo using the device''s camera'
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**相机API**：这使用设备的相机捕获照片'
- en: '[PRE8]'
  id: totrans-42
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '**Capture API**: This captures all media files using the device'
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**捕获API**：这使用设备捕获所有媒体文件'
- en: '[PRE9]'
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '**Media API**: This records and plays back audio files'
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**媒体API**：这记录和播放音频文件'
- en: '[PRE10]'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Access files on device or network:'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问设备或网络上的文件：
- en: '**File API**: This accesses the filesystem of the device'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件API**：这访问设备的文件系统'
- en: '[PRE11]'
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '**File Transfer API**: This uploads or downloads files using the API'
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件传输API**：这使用API上传或下载文件'
- en: '[PRE12]'
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Notifications via dialog box or vibration:'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过对话框或振动发送通知：
- en: '**Dialogs API**: Using this, notifications and alerts are made easy'
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**对话框API**：使用此API，通知和警报变得简单'
- en: '[PRE13]'
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '**Vibration API**: This vibrates the device'
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**振动API**：这会使设备振动'
- en: '[PRE14]'
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Contacts:'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 联系人：
- en: '**Contacts API**: This gives complete access to the device''s contact list'
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**联系人API**：这提供了对设备联系人列表的完全访问权限'
- en: '[PRE15]'
  id: totrans-59
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Globalization:'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 全球化：
- en: '**Globalization API**: This adds locale support to the application'
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全球化API**：这为应用程序添加了地区支持'
- en: '[PRE16]'
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Splash screen:'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动画面：
- en: '**Splash screen API**: This shows and hides splash screen'
  id: totrans-64
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**启动画面 API**：此功能显示和隐藏启动画面'
- en: '[PRE17]'
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'In-app browser:'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序内浏览器：
- en: '**InApp Browser API**: This launches any URLs in an in-app browser'
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**InApp Browser API**：此功能将在应用程序浏览器中打开任何URL'
- en: '[PRE18]'
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Although the simplest way to add the plugin is to use the plugin ID, there
    are other advanced options as well. These options help us customize the plugin
    installation. Instead of using the plugin ID, we can use the GitHub repo URL as
    shown here:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然使用插件ID添加插件是最简单的方法，但还有其他高级选项。这些选项帮助我们自定义插件安装。我们不仅可以使用插件ID，还可以使用此处所示的GitHub仓库URL：
- en: '[PRE19]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Here, `URL_TO_THE_GITHUB_REPO` is the path to the plugin (that is, API) repository.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，`URL_TO_THE_GITHUB_REPO` 是插件（即API）仓库的路径。
- en: 'For example, you can install the Device API plugin in the following way:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你可以用以下方式安装 Device API 插件：
- en: '[PRE20]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Alternatively, you can install the Device API plugin this way as well:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，你也可以用这种方式安装 Device API 插件：
- en: '[PRE21]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: If you are using PhoneGap CLI instead of Cordova CLI, you can use either of
    the following two commands provided here. The following example command installs
    the Camera plugin to your project.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是 PhoneGap CLI 而不是 Cordova CLI，你可以使用这里提供的以下两个命令中的任何一个。以下示例命令将 Camera 插件安装到你的项目中。
- en: '[PRE22]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Alternatively, you can use the following command:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，你可以使用以下命令：
- en: '[PRE23]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'If you would like to install a particular version of the plugin, you can specify
    it along with the plugin ID:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要安装特定版本的插件，你可以指定它并附带插件ID：
- en: '[PRE24]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'If you want to install a plugin from a local directory source, you can use
    the following format where you can specify the path to the source instead of the
    GIT repository URL:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要从本地目录源安装插件，你可以使用以下格式，其中你可以指定源路径而不是GIT仓库URL：
- en: '[PRE25]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: PhoneGap will look in this directory and each of its subdirectories for the
    plugin.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: PhoneGap 将会在这个目录及其所有子目录中查找插件。
- en: Listing installed plugins
  id: totrans-85
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 列出已安装的插件
- en: 'To list all the plugins installed in the application project, you can use the
    `list` command. It has three variations and all will output the same:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 要列出应用程序项目中安装的所有插件，你可以使用 `list` 命令。它有三个变体，所有这些都会输出相同的内容：
- en: '[PRE26]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: All the preceding three commands will list the plugins installed along with
    the plugin ID, version, and the full name.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的三个命令都会列出安装的插件，包括插件ID、版本和完整名称。
- en: Removing plugins
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 移除插件
- en: 'Sometimes you may need to remove a plugin that you no longer want to use in
    your application. As with adding a plugin, removing a plugin is also simple. To
    remove a plugin, refer to it by the same plugin ID that appears in the listing.
    For example, here is how you would remove support for the Camera API from the
    project:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候你可能需要从你的应用程序中移除不再需要的插件。与添加插件一样，移除插件也很简单。要移除插件，请通过列出中出现的相同插件ID来引用它。例如，以下是如何从项目中移除对
    Camera API 的支持的示例：
- en: '[PRE27]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Alternatively, you can use this command for the same:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，你可以使用这个命令来做同样的事情：
- en: '[PRE28]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'If you want to remove more than one plugin at a time, you can specify more
    than one argument:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要一次性移除多个插件，你可以指定多个参数：
- en: '[PRE29]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Using plugins with Plugman
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Plugman 使用插件
- en: 'Plugins are installed and removed using a tool called **Plugman**; from a developer''s
    point of view, this is just a command available in the `cordova-cli` utility.
    The Apache Cordova Plugman project [http://github.com/apache/cordova-plugman](http://github.com/apache/cordova-plugman)
    is an open source command-line utility distributed as an npm module to facilitate
    the installation and uninstallation of plugins. Plugman supports the Android,
    Amazon FireOS, BlackBerry 10, Windows Phone 8, and iOS platforms. The installation
    process is the same as any other npm module; remember that if you install it globally
    (using the `-g` option), you have to run the command as root:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 插件是通过一个名为 **Plugman** 的工具安装和移除的；从开发者的角度来看，这只是在 `cordova-cli` 工具中可用的一个命令。Apache
    Cordova Plugman 项目 [http://github.com/apache/cordova-plugman](http://github.com/apache/cordova-plugman)
    是一个开源的命令行工具，作为npm模块分发，以简化插件的安装和卸载。Plugman 支持Android、Amazon FireOS、BlackBerry 10、Windows
    Phone 8 和 iOS 平台。安装过程与其他任何npm模块相同；记住，如果你全局安装它（使用 `-g` 选项），你必须以root身份运行命令：
- en: '[PRE30]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Once installed, you can use the following several commands from your command-line
    tool to get the source code of a plugin, install and uninstall it, and package
    the plugin to be distributed with your app (Plugman is part of the `cordova-cli`
    tool; you don''t have to install it if you are already using it):'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，你可以使用以下命令从命令行工具获取插件源代码，安装和卸载插件，以及将插件打包以与你的应用程序一起分发（Plugman 是 `cordova-cli`
    工具的一部分；如果你已经在使用它，则无需安装）：
- en: 'The `--fetch` option retrieves a plugin from a directory, a Git repository,
    or by name, into the specified plugins directory:'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--fetch` 选项可以从目录、Git 仓库或按名称检索插件，并将其放入指定的插件目录：'
- en: '[PRE31]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'The `--install` option installs a plugin for a specific target platform in
    a PhoneGap project. The plugin can be installed by name or by URL:'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--install` 选项在 PhoneGap 项目中为特定目标平台安装插件。插件可以通过名称或 URL 安装：'
- en: '[PRE32]'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Tip
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: The `–-plugin` argument can be the name of the plugin or the path to a Git repository.
    By default, Plugman launches the `install` command and fetches the plugin if it
    doesn't exist in the `plugins` directory. For this reason the `--install` argument
    is optional.
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`–-plugin` 参数可以是插件的名称或 Git 仓库的路径。默认情况下，Plugman 会启动 `install` 命令，并在 `plugins`
    目录中不存在插件时获取插件。因此，`--install` 参数是可选的。'
- en: 'The `--uninstall` option uninstalls a previously installed plugin by name:'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--uninstall` 选项通过名称卸载之前安装的插件：'
- en: '[PRE33]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: The `--list` option lists all the plugins previously fetched using Plugman.
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--list` 选项列出之前使用 Plugman 获取的所有插件。'
- en: The `--prepare` option sets up the plugin, properly injecting the JavaScript
    files needed and defining the appropriate permissions. The `--prepare` command
    is implicitly called when you install or uninstall a plugin.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--prepare` 选项设置插件，正确注入所需的 JavaScript 文件并定义适当的权限。当你安装或卸载插件时，`--prepare` 命令会隐式调用。'
- en: 'The keyword `PLATFORM` can have any of these values: `ios`, `android`, `amazon-fireos`,
    `blackberry10`, or `wp8`. Also note that Plugman is a lower-level CLI and hence
    you can add the plugins only for one platform at a given time. If there are multiple
    targeted platforms, you need to use the Plugman CLI to install the plugin for
    each of those platforms. However, if you use the Cordova CLI to install the plugins,
    it will install the plugins for all targeted platforms at once.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 关键字 `PLATFORM` 可以有这些值之一：`ios`、`android`、`amazon-fireos`、`blackberry10` 或 `wp8`。此外，请注意，Plugman
    是一个低级 CLI，因此你只能一次添加一个平台的插件。如果有多个目标平台，你需要使用 Plugman CLI 为每个平台安装插件。然而，如果你使用 Cordova
    CLI 安装插件，它将一次性为所有目标平台安装插件。
- en: In order to add the plugin to a target platform, you can run the `compile` command
    or the `prepare` command.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将插件添加到目标平台，你可以运行 `compile` 命令或 `prepare` 命令。
- en: When using Plugman as a standalone utility, you can specify variables at install
    time using the `--variable` argument. Such variables are necessary for plugins
    requiring API keys or other custom, user-defined parameters.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用 Plugman 作为独立工具时，你可以在安装时使用 `--variable` 参数指定变量。这些变量对于需要 API 密钥或其他自定义、用户定义参数的插件是必要的。
- en: 'To get the entire list of Plugman commands and their syntax, you can use the
    global `help` command as shown here:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取 Plugman 命令及其语法的完整列表，你可以使用全局的 `help` 命令，如下所示：
- en: '[PRE34]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Since the release of PhoneGap 3.0, all the APIs are available as external plugins;
    you will learn more about plugins later in this book. At this point, all you need
    to know is that treating each single API as a plugin allows you to compose a version
    of PhoneGap suited to your project needs.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 自从 PhoneGap 3.0 版本发布以来，所有 API 都可以作为外部插件使用；你将在本书的后面部分了解更多关于插件的内容。目前，你需要知道的是，将每个单独的
    API 作为插件处理，可以使你根据项目需求组合出适合的 PhoneGap 版本。
- en: Exploring the Device API
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索 Device API
- en: Since we have covered the basics of using plugins in a Cordova/PhoneGap project,
    we will now look at an example of how to use the Device plugin.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们已经介绍了在 Cordova/PhoneGap 项目中使用插件的基本知识，我们现在将看看如何使用 Device 插件的示例。
- en: 'Device API is one of the simplest APIs of PhoneGap/Cordova, which provides
    you with details about the device on which it''s running. This is a great API
    to try when you first learn about plugins. Using the API, you can get the following
    properties of the device:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 设备 API 是 PhoneGap/Cordova 中最简单的 API 之一，它为你提供了有关其运行的设备的详细信息。这是当你刚开始学习插件时可以尝试的一个很好的
    API。使用该 API，你可以获取以下设备属性：
- en: Device platform
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备平台
- en: Device unique ID
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备唯一 ID
- en: Device version number
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备版本号
- en: Device model name
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备型号名称
- en: You can use these properties to provide device-specific features to the users.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用这些属性为用户提供设备特定的功能。
- en: Time for action – accessing the Device API
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 行动时间 - 访问 Device API
- en: You already used the `deviceready` event in [Chapter 2](ch02.html "Chapter 2. Building
    Your First PhoneGap Project"), *Building Your First PhoneGap Project*, to handle
    the bootstrap of our app. Use the device API to get information about the type
    of device you are running once the event is fired.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经在 [第 2 章](ch02.html "第 2 章。构建你的第一个 PhoneGap 项目") 中使用了 `deviceready` 事件来处理我们应用的引导。使用设备
    API 获取事件触发后你正在运行的设备类型信息。
- en: 'Open the command-line tool and create a new Cordova project using the Cordova
    command-line utility you installed before:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令行工具，使用你之前安装的 Cordova 命令行工具创建一个新的 Cordova 项目：
- en: '[PRE35]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: This will create a new directory called `DeviceApi` in your current working
    directory.
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将在你的当前工作目录中创建一个名为 `DeviceApi` 的新目录。
- en: 'Move to the directory you just created:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移动到刚刚创建的目录：
- en: '[PRE36]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Add the platforms you want to test on the device API. For example, we add the
    Android platform:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在设备 API 上添加你想要测试的平台。例如，我们添加了 Android 平台：
- en: '[PRE37]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Install the device API plugin. You can also use the shortest way to install
    the plugin, as shown here, instead of using the entire GIT repository URL:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装设备 API 插件。你也可以使用这里所示的最短方式安装插件，而不是使用整个 GIT 仓库 URL：
- en: '[PRE38]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'In the `www` folder inside the project folder you just created, open the `index.html`
    file and add a `div` element with `id` to render the device information that will
    be gathered using the PhoneGap API:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你刚刚创建的项目文件夹中的 `www` 文件夹内，打开 `index.html` 文件，并添加一个带有 `id` 的 `div` 元素以渲染使用 PhoneGap
    API 收集的设备信息：
- en: '[PRE39]'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Define a listener for the `deviceready` event in order to access all the supported
    API properties:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义一个监听 `deviceready` 事件的监听器，以便访问所有支持的 API 属性：
- en: '[PRE40]'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Show the device information on the HTML page:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 HTML 页面上显示设备信息：
- en: '[PRE41]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'Build the project using the Cordova command-line utility:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Cordova 命令行工具构建项目：
- en: '[PRE42]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'View the application in the emulator by using the following command. It might
    take some time to start the emulator:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令在模拟器中查看应用程序。启动模拟器可能需要一些时间：
- en: '[PRE43]'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The entire code has been provided here for your reference:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 整个代码已经在这里提供供你参考：
- en: '[PRE44]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'This is how the output is going to look on the actual device. The values that
    you see on your actual device might vary depending on your device:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是实际设备上的输出将看起来是什么样子。你实际设备上看到的值可能会根据你的设备而有所不同：
- en: '![Time for action – accessing the Device API](img/B03476_04_01.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![行动时间 – 访问 Device API](img/B03476_04_01.jpg)'
- en: '*What just happened?*'
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '*发生了什么？*'
- en: 'You handled the `deviceready` event, accessing the relevant device information
    using the PhoneGap API. The device object you just used describes the device''s
    hardware and software:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 你处理了 `deviceready` 事件，使用 PhoneGap API 访问了相关的设备信息。你刚刚使用的设备对象描述了设备的硬件和软件：
- en: '`device.platform`: This gets the operating system name'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`device.platform`: 这将获取操作系统名称'
- en: '`device.uuid`: This gets the Universally Unique Identifier'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`device.uuid`: 这将获取通用唯一标识符'
- en: '`device.version`: This gets the operating system version'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`device.version`: 这将获取操作系统版本'
- en: '`device.cordova`: This gets the version of Cordova running on the device'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`device.cordova`: 这将获取设备上运行的 Cordova 版本'
- en: '`device.model`: This gets the model name'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`device.model`: 这将获取型号名称'
- en: Note
  id: totrans-156
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Due to the rolling release model of PhoneGap, it's strongly suggested that you
    always refer to the GitHub repository at [https://github.com/apache/cordova-plugin-device](https://github.com/apache/cordova-plugin-device)
    in order to check whether a specific device API is going to be deprecated.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 PhoneGap 的滚动发布模型，强烈建议你始终参考 GitHub 仓库 [https://github.com/apache/cordova-plugin-device](https://github.com/apache/cordova-plugin-device)，以检查特定的设备
    API 是否将要被弃用。
- en: Custom plugins
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自定义插件
- en: We saw the list of basic plugins available for Cordova/PhoneGap platforms and
    how to use them in our application. The developer is not limited to use only these
    small set of plugins. There are several hundreds of plugins available and many
    new plugins are added every day. Here are some of the most used third-party plugins.
    You should be careful on selecting the plugins based on their support for various
    platforms.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到了可用于 Cordova/PhoneGap 平台的基本插件列表以及如何在我们的应用程序中使用它们。开发者不仅限于使用这些小插件集。有数百个插件可用，并且每天都有许多新插件被添加。以下是一些最常用的第三方插件。在选择插件时，你应该注意它们对各种平台的支持情况。
- en: '**Social Sharing**: This adds social sharing features to your application ([http://plugreg.com/plugin/EddyVerbruggen/SocialSharing-PhoneGap-Plugin](http://plugreg.com/plugin/EddyVerbruggen/SocialSharing-PhoneGap-Plugin))'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Social Sharing**: 这为您的应用程序添加社交分享功能（[http://plugreg.com/plugin/EddyVerbruggen/SocialSharing-PhoneGap-Plugin](http://plugreg.com/plugin/EddyVerbruggen/SocialSharing-PhoneGap-Plugin)）'
- en: '**Push Notifications**: This sends custom push notifications to your users
    ([http://plugreg.com/plugin/phonegap-build/PushPlugin](http://plugreg.com/plugin/phonegap-build/PushPlugin))'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Push Notifications**: 这可以向您的用户发送定制的推送通知（[http://plugreg.com/plugin/phonegap-build/PushPlugin](http://plugreg.com/plugin/phonegap-build/PushPlugin)）'
- en: '**Facebook Login**: This enables users to log in to your application using
    Facebook ([http://plugreg.com/plugin/Wizcorp/phonegap-facebook-plugin](http://plugreg.com/plugin/Wizcorp/phonegap-facebook-plugin))'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Facebook Login**: 这允许用户使用Facebook登录到您的应用程序（[http://plugreg.com/plugin/Wizcorp/phonegap-facebook-plugin](http://plugreg.com/plugin/Wizcorp/phonegap-facebook-plugin)）'
- en: '**ActionSheet**: This shows wonderful action sheet menus in your application
    ([http://plugreg.com/plugin/EddyVerbruggen/cordova-plugin-actionsheet](http://plugreg.com/plugin/EddyVerbruggen/cordova-plugin-actionsheet))'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ActionSheet**: 这可以在您的应用程序中显示出色的操作菜单（[http://plugreg.com/plugin/EddyVerbruggen/cordova-plugin-actionsheet](http://plugreg.com/plugin/EddyVerbruggen/cordova-plugin-actionsheet)）'
- en: '**AppRate**: This enables your users to add their feedback and rating for your
    application in the Google Play Store, Apple App Store, or in Windows Store ([http://plugreg.com/plugin/pushandplay/cordova-plugin-apprate](http://plugreg.com/plugin/pushandplay/cordova-plugin-apprate))'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AppRate**: 这允许您的用户在Google Play Store、Apple App Store或Windows Store中为您的应用程序添加反馈和评分（[http://plugreg.com/plugin/pushandplay/cordova-plugin-apprate](http://plugreg.com/plugin/pushandplay/cordova-plugin-apprate)）'
- en: 'You can install these plugins either from their GitHub URL or using their plugin
    ID if registered in the Cordova plugin''s repository. Here are the two methods
    to install the Social Sharing plugin. You can use this command:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从它们的GitHub URL或使用它们的插件ID（如果已在Cordova插件存储库中注册）安装这些插件。以下是安装Social Sharing插件的两种方法。您可以使用以下命令：
- en: '[PRE45]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'You can also use this command:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以使用以下命令：
- en: '[PRE46]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: For the complete list of plugins, you can refer to [http://plugins.cordova.io](http://plugins.cordova.io)
    or [http://plugreg.com](http://plugreg.com).
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以参考以下完整插件列表：[http://plugins.cordova.io](http://plugins.cordova.io) 或 [http://plugreg.com](http://plugreg.com)。
- en: Summary
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned about plugins and how to list, add, and remove
    them from the application. Using these techniques, we saw how to install the Device
    API in your project and get the details of the device. In the coming chapters,
    we will see how to access the local device storage using the Storage API and how
    to list/read/write files using the File API.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您学习了有关插件以及如何在应用程序中列出、添加和删除它们的内容。使用这些技术，我们看到了如何在项目中安装Device API并获取设备详情。在接下来的章节中，我们将看到如何使用Storage
    API访问本地设备存储，以及如何使用File API列出/读取/写入文件。
