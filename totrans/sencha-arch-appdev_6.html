<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Simulating, Building, Packaging, and Deploying an App/Project"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Simulating, Building, Packaging, and Deploying an App/Project</h1></div></div></div><p>In this chapter we will learn how to prepare the application for production by previewing it (testing on the browser), packaging, building, and deploying. So in this chapter we will cover:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Previewing and publishing an Ext JS Project</li><li class="listitem" style="list-style-type: disc">Previewing and publishing a Sencha Touch Project</li><li class="listitem" style="list-style-type: disc">Emulating a Sencha Touch app</li><li class="listitem" style="list-style-type: disc">Packaging a Sencha Touch app</li></ul></div><div class="section" title="Previewing, publishing, and building a project"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec46"/>Previewing, publishing, and building a project</h1></div></div></div><p>In this section we<a id="id219" class="indexterm"/> will learn what the <span class="strong"><strong>Build</strong></span>, <span class="strong"><strong>Publish</strong></span>, and <span class="strong"><strong>Preview</strong></span> <a id="id220" class="indexterm"/>buttons in<a id="id221" class="indexterm"/> the toolbar do. These buttons are the same for an Ext JS project or Sencha Touch project:</p><div class="mediaobject"><img src="graphics/9819OS_06_01.jpg" alt="Previewing, publishing, and building a project"/></div><p>Let's start with the <a id="id222" class="indexterm"/>
<span class="strong"><strong>Build</strong></span> button. This button will not do the production build for us. The only thing this button does is to compile and save the project. For Ext JS projects, the build must be done manually (Sencha Architect 2.2 and earlier versions do not have support). For Sencha Touch projects, we will learn how to do it later in this chapter.</p><p>All the functionalities <a id="id223" class="indexterm"/>we will learn throughout this chapter are only available <a id="id224" class="indexterm"/>when the project <a id="id225" class="indexterm"/>is saved. So please click on <span class="strong"><strong>Save</strong></span>, choose where you will save the project, and then have some fun!</p><div class="section" title="Previewing a project"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec21"/>Previewing a project</h2></div></div></div><p>The <span class="strong"><strong>Preview</strong></span> button <a id="id226" class="indexterm"/>will open the default browser of your computer, and <a id="id227" class="indexterm"/>will render the <code class="literal">app.html</code> file on it, meaning it will execute the application on the browser. So, when we click on it, a popup will be displayed asking what is the <span class="strong"><strong>URL prefix</strong></span> of the root of the project:</p><p> </p><div class="mediaobject"><img src="graphics/9819OS_06_02.jpg" alt="Previewing a project"/></div><p>
</p><p>As our project was already created inside the <code class="literal">htdocs</code> folder from the <code class="literal">Xampp</code> directory, we simply need to inform the localhost path and the path of the application. Then, the application will be opened in the browser as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_03.jpg" alt="Previewing a project"/></div><p>Every time you<a id="id228" class="indexterm"/> click on the <span class="strong"><strong>Preview</strong></span> button, the same popup will be displayed. You can click on the <a id="id229" class="indexterm"/>
<span class="strong"><strong>Do not show</strong></span> checkbox, so it will not be displayed again.</p></div><div class="section" title="Publishing a project"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec22"/>Publishing a project</h2></div></div></div><p>The <span class="strong"><strong>Publish</strong></span> button<a id="id230" class="indexterm"/> simply makes a copy of your code to a specific directory. It will not copy Sencha Architect files or source control files (<code class="literal">.svn</code>, <code class="literal">.git</code>, and so on).</p><p>So for example, let's say<a id="id231" class="indexterm"/> you are working on a project locally, but there is a webserver you want to publish to test this application. You need to click on the <span class="strong"><strong>Publish</strong></span> button, <a id="id232" class="indexterm"/>and if it is the first time you are clicking on this button for a particular project, a popup will be displayed as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_04.jpg" alt="Publishing a project"/></div><p>Then, click on <span class="strong"><strong>Browse</strong></span> and select the directory where the files will be copied. It needs to be a different directory than your project's root folder. When you click on <span class="strong"><strong>Continue</strong></span>, Sencha Architect will run a script and will copy all the files to the specified directory, as we can see<a id="id233" class="indexterm"/> in the screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_05.jpg" alt="Publishing a project"/></div><p>You can change the settings any time by clicking on the <a id="id234" class="indexterm"/>
<span class="strong"><strong>Setting</strong></span> button and <span class="strong"><strong>Project</strong></span> tab<a id="id235" class="indexterm"/>:</p><div class="mediaobject"><img src="graphics/9819OS_06_06.jpg" alt="Publishing a project"/></div></div></div></div>
<div class="section" title="Introducing Sencha Cmd and Sencha Architect"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec47"/>Introducing Sencha Cmd and Sencha Architect</h1></div></div></div><p>Sencha Architect is a great developer tool for Sencha Projects. Sencha also has this other tool called Sencha Cmd that allows developers to create, build, emulate, and package projects using the command line terminal. Sencha Architect allows us to build, emulate, and package natively Sencha <a id="id236" class="indexterm"/>Touch projects. And for this reason, there is integration between these two tools. So to get the most out of them, we need to have Sencha Cmd installed as well.</p><p>To download it, please go to <a class="ulink" href="http://www.sencha.com/products/sencha-cmd/download">http://www.sencha.com/products/sencha-cmd/download</a> and download the appropriate version according to the operating system you are using.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>Before we begin, we also need to have the Java JDK installed with the environment variables configured (<a class="ulink" href="http://docs.oracle.com/javase/tutorial/essential/environment/paths.html">http://docs.oracle.com/javase/tutorial/essential/environment/paths.html</a>), we need to have Ruby installed (<a class="ulink" href="http://www.ruby-lang.org">http://www.ruby-lang.org</a>), and Sass (<a class="ulink" href="http://sass-lang.com/">http://sass-lang.com/</a>), and Compass (<a class="ulink" href="http://compass-style.org/">http://compass-style.org/</a>) as well. You can find all these steps on the Sencha Cmd documentation at: <a class="ulink" href="http://docs.sencha.com/touch/2.2.0/#/guide/command">http://docs.sencha.com/touch/2.2.0/#/guide/command</a>.</p></div></div><p>Throughout this book, we have also learned that when we create a Sencha Touch project, it points to the SDK from Sencha servers. To be able to emulate and package the app, we will need to have Sencha Touch locally as well. Simply download it from the Sencha website (<a class="ulink" href="http://www.sencha.com/products/touch/download/">http://www.sencha.com/products/touch/download/</a>) and unzip to a directory of your preference. And then, we are good to go!</p></div>
<div class="section" title="Emulating a Sencha Touch app"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec48"/>Emulating a Sencha Touch app</h1></div></div></div><p>For all Sencha Touch<a id="id237" class="indexterm"/> projects, after you save it, you will see a button on the toolbox named <span class="strong"><strong>Package</strong></span> as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_07.jpg" alt="Emulating a Sencha Touch app"/></div><p>Clicking on the <span class="strong"><strong>Package</strong></span> button is the first step that we need to take prior to emulating the app. When we click on it, a screen is displayed as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_08.jpg" alt="Emulating a Sencha Touch app"/></div><p>The first thing we need to do is to download and install <span class="strong"><strong>Sencha Cmd</strong></span> (<span class="emphasis"><em>1</em></span>). If you already did it, then you need<a id="id238" class="indexterm"/> to set the path of where you installed Sencha Cmd (<span class="emphasis"><em>2</em></span>). The next step is to verify if everything is ok, by clicking on the <a id="id239" class="indexterm"/>
<span class="strong"><strong>Verify</strong></span> button (<span class="emphasis"><em>3</em></span>). The output should be a window, which will pop up (terminal) and Sencha Architect will try to execute the <code class="literal">sencha</code> command just to make sure everything is ok. If it's ok, just click on <span class="strong"><strong>Save</strong></span> (<span class="emphasis"><em>4</em></span>).</p><div class="mediaobject"><img src="graphics/9819OS_06_09.jpg" alt="Emulating a Sencha Touch app"/></div><p>Next, go to the <span class="strong"><strong>Setup project with Cmd</strong></span> vertical tab. Notice that the <span class="strong"><strong>Install plug-ins</strong></span> tab now has a green bullet. Our goal is to have all the tabs with green bullets. This means we have the setup completed and we are ready to emulate or build an app natively.</p><p>In this second tab, we <a id="id240" class="indexterm"/>need to inform Sencha Architect about the directory where Sencha Touch SDK is installed locally (<span class="emphasis"><em>2</em></span>). If you do not have it yet, download it and unzip it to a directory of your preference (<span class="emphasis"><em>1</em></span>).</p><div class="mediaobject"><img src="graphics/9819OS_06_10.jpg" alt="Emulating a Sencha Touch app"/></div><p>One very important thing we need to pay attention to is the combination of the Sencha Touch version we are using with the Sencha Cmd version. For Sencha Touch 2.0.x, we need to use Sencha SDK Tools 2.x (this is an older version of Sencha Cmd). For Sencha Touch 2.1.x we need to use Sencha Cmd 3.0.x, and for Sencha Touch 2.2.x we need to use Sencha <a id="id241" class="indexterm"/>Cmd 3.1.x. To make sure we are using the correct version, always check the official forum for more information (<a class="ulink" href="http://www.sencha.com/forum/forumdisplay.php?98-Sencha-Architect-2.x-Help-amp-Discussions">http://www.sencha.com/forum/forumdisplay.php?98-Sencha-Architect-2.x-Help-amp-Discussions</a>). If we do not use the correct version, we can get errors such as "The current working directory is not a recognized Sencha SDK or application folder."</p><p>And at last, click on<a id="id242" class="indexterm"/> the <span class="strong"><strong>Setup Project with Cmd</strong></span> button (<span class="emphasis"><em>3</em></span>). A terminal window will be displayed. In this terminal, the <code class="literal">sencha generate app</code> command will be executed, passing the projects configuration (name and path) as parameters to the command (as required):</p><div class="mediaobject"><img src="graphics/9819OS_06_11.jpg" alt="Emulating a Sencha Touch app"/></div><p>And the final step, we<a id="id243" class="indexterm"/> need to click on the third vertical tab, which is <span class="strong"><strong>Package settings</strong></span> (again, notice that the two previous tabs have the green bullet, meaning the previous steps are ok).</p><div class="mediaobject"><img src="graphics/9819OS_06_12.jpg" alt="Emulating a Sencha Touch app"/></div><p>When we create a Sencha Touch app manually (not using Sencha Architect) using Sencha Cmd and the <a id="id244" class="indexterm"/>
<code class="literal">sencha generate app</code> command, it creates a file named <code class="literal">packager.json</code> with all the information we need to give Sencha Cmd and Sencha Touch to emulate and create the native app for us. We need to do the same thing now. But this <code class="literal">packager.json</code> can be created automatically by clicking on the <a id="id245" class="indexterm"/>
<span class="strong"><strong>Add Package Settings</strong></span> button. When you <a id="id246" class="indexterm"/>click on it, the result will be as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_13.jpg" alt="Emulating a Sencha Touch app"/></div><p>Three things we need to pay attention to: first, all the bullets from the vertical tabs are green. This means we can start emulating and packaging natively now. Second, a <span class="strong"><strong>packager</strong></span> was created (<span class="strong"><strong>Current Package Settings</strong></span>) and we can configure as we would like to (emulate, build native for Android or iOS). And third, the <span class="strong"><strong>packager</strong></span> was added as a resource on the project, meaning we could also have done this manually (like when creating any other resource).</p><p>Now, let's see how to emulate for iOS and Android (the only platforms supported by Sencha Cmd).</p><div class="section" title="iOS"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec23"/>iOS</h2></div></div></div><p>First of all, to <a id="id247" class="indexterm"/>emulate an <a id="id248" class="indexterm"/>app for iOS, you need to have a Mac OS. So this step is only for Mac OS<span class="strong"><strong> </strong></span>users, and will not work if you are using Windows or Linux.</p><p>Secondly, you need to have XCode installed as well (<a class="ulink" href="https://developer.apple.com/xcode/">https://developer.apple.com/xcode/</a>). It is free and you can download it directly from the App Store.</p><p>By default, all the <a id="id249" class="indexterm"/>packager configurations come ready for the iOS platform, so we simply need to click on the down arrow icon from the <span class="strong"><strong>Package</strong></span> button<a id="id250" class="indexterm"/> from the toolbar and then select <span class="strong"><strong>Simulate</strong></span>. Again, a terminal window will be opened and will run the <code class="literal">sencha app build native</code> command. And then our app will be emulated!</p><div class="mediaobject"><img src="graphics/9819OS_06_14.jpg" alt="iOS"/></div><div class="section" title="Troubleshooting"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec03"/>Troubleshooting</h3></div></div></div><p>In case you get errors<a id="id251" class="indexterm"/> while trying to emulate for iOS, with the <span class="strong"><strong>iOS Simulator</strong></span> opened go to the menu and select <span class="strong"><strong>Reset Contents and Settings…</strong></span>, then click on <span class="strong"><strong>Reset</strong></span>. And then, try to simulate it again by clicking on <span class="strong"><strong>Simulate</strong></span>.</p><div class="mediaobject"><img src="graphics/9819OS_06_15.jpg" alt="Troubleshooting"/></div></div></div><div class="section" title="Android"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec24"/>Android</h2></div></div></div><p>To emulate an Android app, you<a id="id252" class="indexterm"/> only need to have the Android<a id="id253" class="indexterm"/> SDK installed (<a class="ulink" href="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</a>). But it is highly recommended that you have Eclipse with the <a id="id254" class="indexterm"/>ADT plugin (information at <a class="ulink" href="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</a>). It is much easier to set up and configure everything that you need prior to beginning with Android development. You can use any operating system (Mac OS, Linux, or Windows) to emulate or package an Android app.</p><p>There are three things we need to configure on the packager file. The first one is to change the <span class="strong"><strong>platform</strong></span> from <span class="strong"><strong>iOSSimulator</strong></span> to <span class="strong"><strong>AndroidEmulator</strong></span>. The second thing is the <span class="strong"><strong>sdkPath</strong></span>; you need to inform the complete path where you unzipped the Android SDK on your machine. And the third thing is the <code class="literal">androidAPILevel</code>; just make sure you have the API Level installed as well.</p><div class="mediaobject"><img src="graphics/9819OS_06_16.jpg" alt="Android"/></div><p>Before we click on the <span class="strong"><strong>Simulate</strong></span> button in <span class="strong"><strong>Package</strong></span> again, we need to start the Android emulator manually. For iOS, the emulator is started automatically; for Android, we need to do it manually. <a id="id255" class="indexterm"/>Open the <span class="strong"><strong>Android Virtual Device Manager</strong></span> from Eclipse or start it from the command line (<a class="ulink" href="http://developer.android.com/tools/devices/index.html">http://developer.android.com/tools/devices/index.html</a>). Make sure you have an <span class="strong"><strong>Android Virtual Device</strong></span>
<a id="id256" class="indexterm"/> (<span class="strong"><strong>AVD</strong></span>) for the <span class="strong"><strong>API Level</strong></span> you set on the packager:</p><div class="mediaobject"><img src="graphics/9819OS_06_17.jpg" alt="Android"/></div><p>Then, click on the <a id="id257" class="indexterm"/>
<span class="strong"><strong>Simulate</strong></span> button in <span class="strong"><strong>Package</strong></span> from the Sencha Architect toolbar and wait a little bit. The app will be emulated on the AVD as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_18.jpg" alt="Android"/></div><p>When you are <a id="id258" class="indexterm"/>emulating an app for the first time on an AVD, it can take a while, so please be a little patient.</p></div></div>
<div class="section" title="Packaging (native) a Sencha Touch App"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec49"/>Packaging (native) a Sencha Touch App</h1></div></div></div><p>After all <a id="id259" class="indexterm"/>the testing that we have done, it is time to test on a real device!</p><div class="mediaobject"><img src="graphics/9819OS_06_19.jpg" alt="Packaging (native) a Sencha Touch App"/></div><p>The configurations are the same for iOS and Android (that we have set up on the previous topic). Now, if we want to test on a real device, we simply need to change the <span class="strong"><strong>platform</strong></span> to <span class="strong"><strong>iOS</strong></span> or <span class="strong"><strong>Android</strong></span> as demonstrated in the previous screenshot.</p><div class="section" title="iOS"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec25"/>iOS</h2></div></div></div><p>Testing an app on a real Apple device requires a few more steps. We first need to create a provisioning profile<a id="id260" class="indexterm"/> on the iOS developer center. And to have an account for the iOS developer center (<a class="ulink" href="https://developer.apple.com/account/ios/overview.action">https://developer.apple.com/account/ios/overview.action</a>), you need to pay 99 USD annually to Apple. But if you only want to emulate the app, you do not need to pay anything!</p><p>So the first step is to create the provisioning profile. Make sure the <span class="strong"><strong>applicationId</strong></span> (<span class="strong"><strong>App ID</strong></span>) is the same as set on the packager. You also need to set the <span class="strong"><strong>bundleSeedId</strong></span> (you can also find what your <span class="strong"><strong>bundleSeedId</strong></span> is on your iOS developer account). You need to download the provisioning profile file and also set the path on the <span class="strong"><strong>provisionProfile</strong></span> configuration from the packager. The <span class="strong"><strong>certificateAlias</strong></span>, <span class="strong"><strong>certificatePass</strong></span>, and <span class="strong"><strong>certificatePath</strong></span> are not mandatory. If you have all the configurations required already on Xcode, Sencha Cmd will find it and you don't need to worry about it.</p><div class="mediaobject"><img src="graphics/9819OS_06_20.jpg" alt="iOS"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>To learn more about deploying apps on Apple real devices, please go to <a class="ulink" href="http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices">http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices</a>.</p></div></div><p>Once you have everything in place, just click on the <span class="strong"><strong>Simulate</strong></span> button<a id="id261" class="indexterm"/> in <span class="strong"><strong>Package</strong></span> again. And of course, your iDevice must be connected to your computer using an USB cable.</p></div><div class="section" title="Android"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec26"/>Android</h2></div></div></div><p>To be able to test an app on a real <a id="id262" class="indexterm"/>Android device you do not need to pay for it. You simply need to have a debug keystore. If you use Eclipse with an ADT plugin<a id="id263" class="indexterm"/> (<a class="ulink" href="http://developer.android.com/tools/sdk/eclipse-adt.html">http://developer.android.com/tools/sdk/eclipse-adt.html</a>), it is going to create one for you already as demonstrated in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_06_21.jpg" alt="Android"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>If you need to,<a id="id264" class="indexterm"/> you can also create the keystore manually. Please see the <span class="emphasis"><em>Create a Certificate</em></span> section from the guide at: <a class="ulink" href="http://docs.sencha.com/architect/2/#!/guide/deploy">http://docs.sencha.com/architect/2/#!/guide/deploy</a>.</p></div></div><p>Then, when you have your Android device connected to your computer (do not forget to enable <span class="strong"><strong>developer configurations</strong></span> on the <span class="strong"><strong>device settings</strong></span>), you simply need to click on the <span class="strong"><strong>Package</strong></span> | <span class="strong"><strong>Simulate</strong></span> button from the toolbar again and wait until the app is installed.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note13"/>Note</h3><p>For more information about testing apps on a real Android device, please go to <a class="ulink" href="http://mobile.tutsplus.com/tutorials/connecting-physical-android-devices-to-your-development-machine/">http://mobile.tutsplus.com/tutorials/connecting-physical-android-devices-to-your-development-machine/</a>.</p></div></div></div></div>
<div class="section" title="Windows Phone 8 and Blackberry 10"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec50"/>Windows Phone 8 and Blackberry 10</h1></div></div></div><p>Unfortunately, Sencha <a id="id265" class="indexterm"/>Cmd does not support emulating and packaging apps to Windows Phone 8 and Blackberry 10, although Sencha Touch 2.2 and later versions have support for Windows Phone 8 and Blackberry 10 themes (as we learned in the<a id="id266" class="indexterm"/> previous chapter).</p><p>However, we can create a Blackberry 10 app (<a class="ulink" href="http://developer.blackberry.com/html5/documentation/creating_a_bb10_app_2007539_11.html">http://developer.blackberry.com/html5/documentation/creating_a_bb10_app_2007539_11.html</a>) and use the <span class="strong"><strong>Publish</strong></span> button (from the Sencha Architect toolbar) to copy the files from the Sencha Architect project to the Blackberry 10 app project. The Blackberry 10 SDK is available for Mac OS, Linux, and Windows.</p><p>The same can be done with a Windows Phone 8. Simply create the Windows Phone 8 project (JavaScript project) using Visual Studio 2012 (there is an Express version specific for Windows<a id="id267" class="indexterm"/> Phone 8—and it is free) and publish the Sencha Architect project files to the specific directories of the Windows Phone 8 project. Just remember you need to have the Windows 8 Pro version to be able to develop and emulate apps for Windows <a id="id268" class="indexterm"/>Phone 8. Windows Phone 8 development and emulation is not available on previous Windows OS (Windows Vista, Windows 7, and Windows XP), and neither is it available on Mac OS and Linux.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec51"/>Summary</h1></div></div></div><p>In this chapter we learned how to preview and publish Ext JS and Sencha Touch apps within Sencha Architect. We have also learned how to use Sencha Architect with Sencha Cmd to emulate and package natively iOS and Android apps. And at last, we learned a few tips of how to use the same code to create Blackberry 10 and Windows Phone 8 apps.</p><p>So now it is time to let the creativity flow and create awesome apps and publish them on different app stores from different platforms! Hope you had a good time reading this book.</p><p>Happy coding!</p></div></body></html>