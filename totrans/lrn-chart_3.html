<html><head></head><body><div><h1 class="header-title">Chart.js - Quick Start</h1>
                
            
            
                
<p class="NormalPACKT">This chapter provides a quick start to creating web-based data visualizations with Chart.js. You will learn how to set up the library and configure a basic web page where you can include a chart. We will walk through a complete step-by-step example, describing how to create a bar chart and configure it with labels, tooltips, titles, interactions, colors, animations, and more. By using Chart.js to create a full-featured chart, you will have a better understanding of the main concepts when we explore the details later on.</p>
<p>In this chapter, you will learn about the following topics:</p>
<ul>
<li>How to install and set up Chart.js</li>
<li>How to create a simple bar chart</li>
<li>How to configure axes, colors, and tooltips</li>
<li>How to add animation and respond to simple events</li>
<li>How to create a horizontal and a stacked bar chart</li>
</ul>


            

            
        
    </div>



  
<div><h1 class="header-title">Introduction to Chart.js</h1>
                
            
            
                
<p>Chart.js is an open source community-maintained JavaScript data visualization library based on HTML5 Canvas. At the time of writing, it is available as version 2.7.3, and comes with eight customizable chart types. It's very easy to create a chart using Chart.js. It can be as simple as loading the JavaScript library into your page, choosing a chart type, and providing it with an array of data.</p>
<p class="NormalPACKT">All charts are configured with a default look and feel, as well as basic interactive features. You can focus on the data and quickly create a simple responsive and interactive chart that fits nicely in your page. You don't have to worry about configuring padding or margins, fitting labels in axes, adding tooltips, or controlling transitions. But if you need to change something, there are many configuration options available.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Installation and setup</h1>
                
            
            
                
<p>To set up a web page for Chart.js, you just need to load the library. If you already have a website set up, you can download Chart.js from <a href="http://www.chartjs.org" target="_blank">www.chartjs.org</a>, store it where you can load it from a web page, and import it using the <kbd>&lt;script&gt;</kbd> tag, as follows:</p>
<pre>&lt;script src="img/Chart.min.js"&gt;&lt;/script&gt;</pre>
<p>You can also use <kbd>npm</kbd> or <kbd>bower</kbd> to install Chart.js if you have a modular development environment, as shown in the following code. Chart.js integrates well with ES6 modules, <em>Angular</em>, <em>React</em>, and <em>Vue</em> applications:</p>
<pre><strong>npm install chart.js --save</strong><br/><strong>bower install chart.js --save</strong></pre>
<p>The simplest way to get started is to link to a library file provided by a <strong>Content Delivery Network</strong> (<strong>CDN</strong>). You can obtain a list at <kbd>cdnjs.com/libraries/Chart.js</kbd>, choose the version and CDN provider of your choice, and copy one of the links. Unless you want to inspect the code, use the minified link (that ends in <kbd>min.js).</kbd> It's best not to use the bundle version, since it includes some extra non-Chart.js libraries (a better practice is to include third-party libraries separately when needed).</p>
<p>Using any text or code editor, copy the link to the <kbd>src</kbd> attribute of a <kbd>script</kbd> tag placed somewhere in the <kbd>&lt;head&gt;</kbd> of your HTML file, as follows:</p>
<pre>&lt;script src="img/Chart.min.js"&gt;<br/>&lt;/script&gt;</pre>
<p>If you have a development environment, such as Visual Studio Code, PHPStorm, or Brackets, you may wish to set up a template file that includes the Chart.js CDN script tag for new pages.</p>
<p>Another way to explore Chart.js and follow the examples in this book, is to use an online code editor, such as <em>CodePen</em> or <em>JSFiddle</em>. It's also a great way to share your charts and code.</p>
<p>Using JSFiddle (<a href="https://jsfiddle.net/" target="_blank">https://jsfiddle.net/</a>), you just need to add the Chart.js CDN to the Resources tab, as shown in the following screenshot, and then you can use the tabs to write the HTML, CSS, and JavaScript code for your charts:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/59bcbb2a-4644-47f2-a7a3-2cbc139e3d88.png" width="1408" height="683"/></p>
<p>Using <em>JSFiddle</em> (<em>jsfiddle.net</em>) as an online code editor</p>
<p>To configure Chart.js in <em>CodePen</em> (<a href="https://codepen.io/" target="_blank">https://codepen.io/</a>), click the Settings menu and then the JavaScript tab. Search for Chart.js, and click the first option to add the CDN to your environment, as demonstrated in the following screenshot:</p>
<div><img src="img/95cb49bb-437f-4061-b5a6-de39ea8603d6.png" style="width:37.17em;height:36.92em;" width="516" height="513"/></div>
<p>Adding Chart.js support to <em>CodePen</em> (<em>codepen.io</em>)</p>
<p>You can now use the Chart.js library and see the results in real time, as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/98b04dce-db9c-4817-a4a3-3a3f7c2152bb.png" width="1021" height="684"/></p>
<p>Using CodePen (codepen.io) as an online code editor</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Creating a simple bar chart</h1>
                
            
            
                
<p class="NormalPACKT">Now that you have a working environment set up, let's get started and create a simple bar chart. You can type in the code as we go along, but you can also download the full working examples from the GitHub repository for this chapter. Each screenshot and code listing in this book contains a reference to the file used to produce it.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Setting up the graphics context</h1>
                
            
            
                
<p>Charts are displayed inside the graphics context provided by an HTML Canvas object. There are many ways to create one; the simplest way is to use plain HTML. Place a <kbd>&lt;canvas&gt;</kbd> element somewhere inside <kbd>&lt;body&gt;</kbd>. It should have an <kbd>ID</kbd> attribute, as follows:</p>
<pre>&lt;canvas id="my-bar-chart" width="200" height="200"&gt;&lt;/canvas&gt;</pre>
<p>Chart.js graphics are responsive by default. The chart will fit in the available space: the <kbd>height</kbd> and <kbd>width</kbd> attributes won't affect the actual size of the chart (unless you change the defaults).</p>
<p>You can obtain a JavaScript handle to the <kbd>canvas</kbd> object using DOM (or JQuery) in any script block or file loaded by your HTML file, as shown in the following code snippet (the script block will be ignored in most JavaScript listings in this book):</p>
<pre>&lt;script&gt;<br/>    const canvas = document.getElementById("my-bar-chart");<br/>&lt;/script&gt;</pre>
<p>You can also dynamically create a <kbd>&lt;canvas&gt;</kbd> object using <strong>Document Object Model</strong> (<strong>DOM</strong>), or JQuery. In this case, an <kbd>ID</kbd> attribute is not strictly necessary, since the variable itself can be used as a handle, but it's good practice to define one, as follows:</p>
<pre>canvas canvas = document.createElement("canvas");<br/>canvas.setAttribute("id","my-bar-chart");<br/>document.body.appendChild(canvas);</pre>
<p>A chart is created using the <kbd>Chart()</kbd> constructor. It receives two arguments: the graphics <em>context</em> of the canvas where the chart will be displayed, and an <em>object</em> containing the chart data, as demonstrated in the following code:</p>
<pre>const chartObj = {…}; // the chart data is here<br/>const context = canvas.getContext("2d");<br/>new Chart(context, chartObj); // this will display the chart in the canvas</pre>
<p>If your <kbd>canvas</kbd> object has declared an <kbd>ID</kbd> attribute, you don't need a <kbd>context</kbd> object. You can simply use the <kbd>ID</kbd> attribute as the first argument, as follows:</p>
<pre>new Chart("my-bar-chart", chartObj);</pre>
<p>The object that contains the chart data requires at least two properties: <kbd>type</kbd>, which selects one of the eight different kinds of Chart.js charts; and <kbd>data</kbd>, which references an object containing the datasets and properties of the data to be displayed, as follows:</p>
<pre>const chartObj = {type: "bar", data: dataObj};</pre>
<p>Normally, the chart object is configured inside the constructor, as follows:</p>
<pre>new Chart("my-bar-chart", {type: "bar", data: dataObj});</pre>
<p>This is the basic setup for any chart created with Chart.js. It won't show any chart yet, because we didn't provide any data, but if your library loaded correctly, you should see an empty axis. The code is in the <kbd>Templates/BasicTemplate.html</kbd> file.</p>
<p>If nothing shows up in your screen, there may be a syntax error in your code. Check your browser's JavaScript console. It's always a good idea to keep it open when you are working with JavaScript, so that errors can be detected and fixed quickly.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Creating a bar chart</h1>
                
            
            
                
<p>A bar chart displays a list of categories associated with values represented by the length of the bars. To create a simple bar chart, we need a list of <em>categories</em>, as well as list of <em>values</em>.</p>
<p>Let's create a simple chart to display the volume of water in each ocean. We will need an array of categories, as follows:</p>
<pre>const labels = ["Arctic", "North Atlantic", "South Atlantic",<br/>                "Indian", "North Pacific", "South Pacific",<br/>                "Southern"];</pre>
<p>In addition, we will also need a corresponding array of values, as follows:</p>
<pre>const volumes = [18750,146000,160000,264000,341000,329000,71800]; // 10^3 km3</pre>
<p>The <kbd>data</kbd> object should contain a <kbd>labels</kbd> property, which will refer to the <kbd>categories</kbd> array, and a <kbd>datasets</kbd> property, which contains an array with at least one <kbd>dataset</kbd> object. Each <kbd>dataset</kbd> object has a <kbd>label</kbd> property, and a <kbd>data</kbd> property, which will receive the data for our chart (the <kbd>volumes</kbd> array), as follows:</p>
<pre>const dataObj = {<br/>     labels: labels,<br/>     datasets: [<br/>         {<br/>             label: "Volume",<br/>             data: volumes<br/>         }<br/>     ]<br/>}</pre>
<p>Charts already come preconfigured with scales, axes, default colors, fonts, animation, and tooltips. Include the <kbd>dataObj</kbd> object from the preceding code as the <kbd>data</kbd> property of the chart object (<kbd>chartObj</kbd>), and you will have an interactive and responsive bar chart similar to the one shown as follows:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/2272fab9-7c70-44e8-8d02-860ed62a8eb7.png" style="width:51.92em;height:51.83em;" width="656" height="655"/></p>
<p>A simple bar chart (code: <em>Pages/BarChart1.html)</em></p>
<p>Try resizing the window and see how the labels and scales adapt to the new display. Move your mouse over the bars and see how the tooltips display the chart's information. Click on the <kbd>dataset</kbd> label and toggle its visibility. In the following sections, we will configure some of its appearance and behavior.</p>
<p>The full listing is shown as follows:</p>
<pre> &lt;!DOCTYPE html&gt;<br/> &lt;html lang="en"&gt;<br/> &lt;head&gt;<br/> &lt;script src="img/Chart.min.js"&gt;<br/> &lt;/script&gt;<br/> &lt;/head&gt;<br/> &lt;body&gt;<br/> &lt;canvas id="ocean-volume-bar-chart" width="400" height="400"&gt;&lt;/canvas&gt;<br/> &lt;script&gt;<br/>   const labels = ["Arctic", "North Atlantic", "South Atlantic",<br/>                   "Indian", "North Pacific", "South Pacific", "Southern"];<br/>   const volumes = [18750,146000,160000,264000,341000,329000,71800];<br/> <br/>   const dataObj = {<br/>       labels: labels,<br/>       datasets: [<br/>           {<br/>               label: "Volume",<br/>               data: volumes<br/>           }<br/>       ]<br/>   }<br/>   new Chart("ocean-volume-bar-chart", {type: "bar", data: dataObj});<br/>  &lt;/script&gt;<br/> &lt;/body&gt;<br/> &lt;/html&gt;</pre>
<p class="mce-root">Try typing in the preceding code in your development environment, or download it from <kbd>Pages/BarChart1.html</kbd>.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Configuring colors, fonts, and responsiveness</h1>
                
            
            
                
<p class="NormalPACKT">Charts created with Chart.js are born responsive and fit nicely into your screen, but they are also born gray. In this section, you will discover how to change some style properties.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Dataset configuration for bar charts</h1>
                
            
            
                
<p>Besides the <kbd>data</kbd> and <kbd>label</kbd> properties, each dataset object can contain a number of optional configuration properties. Most of them are used to configure fill and border colors and widths. They are briefly described in the following table:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td style="width: 32.4077%">
<p><strong>Property</strong></p>
</td>
<td style="width: 17.5923%">
<p><strong>Value</strong></p>
</td>
<td style="width: 47%">
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>data</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>Number[]</kbd></p>
</td>
<td style="width: 47%">
<p>An array of numbers containing the data to display (this is mandatory)</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>label</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>String</kbd></p>
</td>
<td style="width: 47%">
<p>A label for the dataset</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>backgroundColor</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>String</kbd> or <kbd>String[]</kbd></p>
</td>
<td style="width: 47%">
<p>The fill color of the bar</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>borderColor</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>String</kbd> or <kbd>String[]</kbd></p>
</td>
<td style="width: 47%">
<p>The color of the border</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>borderWidth</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>Number</kbd> or <kbd>Number[]</kbd></p>
</td>
<td style="width: 47%">
<p>The width of the border</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>hoverBackgroundColor</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>String</kbd> or <kbd>String[]</kbd></p>
</td>
<td style="width: 47%">
<p>The fill when the mouse is over the bar</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>hoverBorderColor</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>String</kbd> or <kbd>String[]</kbd></p>
</td>
<td style="width: 47%">
<p>The border color when the mouse is over the bar</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>hoverBorderWidth</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>Number</kbd> or <kbd>Number[]</kbd></p>
</td>
<td style="width: 47%">
<p>The border width when the mouse is over the bar</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>borderSkipped</kbd></p>
</td>
<td style="width: 17.5923%">
<p><kbd>bottom</kbd>, <kbd>left</kbd>, <kbd>top</kbd>, <kbd>right</kbd></p>
</td>
<td style="width: 47%">
<p>Selects which edge of the bar with no border (the default is <kbd>bottom</kbd> for <kbd>bar</kbd>, and <kbd>left</kbd> for <kbd>horizontalBar</kbd> )</p>
</td>
</tr>
<tr>
<td style="width: 32.4077%">
<p><kbd>yAxisID</kbd> and <kbd>xAxisID</kbd></p>
</td>
<td style="width: 17.5923%">
<p>An Axis ID (see <a href="f3bca5ff-1e17-4cb4-bbb9-6d71b8847ed0.xhtml" target="_blank">Chapter 5</a>, <em>Scales and Grid Configuration</em>)</p>
</td>
<td style="width: 47%">
<p>Used in axis configuration</p>
</td>
</tr>
</tbody>
</table>
<p>Dataset properties for bar charts</p>
<p>You can change the gray colored bars by adding color properties in each <kbd>dataset</kbd> object, or by configuring global defaults that affect all charts. The <kbd>backgroundColor</kbd> property receives a string containing a color specified in a legal CSS format. For example, if you want to have solid red bars, you can use the following formats:</p>
<ul>
<li><kbd>red</kbd></li>
<li><kbd>rgb(255,0,0)</kbd></li>
<li><kbd>rgba(100%,0,0,1)</kbd></li>
<li><kbd>#ff0000</kbd>, <kbd>#f00</kbd></li>
<li><kbd>hsl(0,100%,50%)</kbd></li>
<li><kbd>hsla(0,100%,50%,1)</kbd></li>
</ul>
<p>The <kbd>borderColor</kbd> property controls the color of the label icon. It also configures the color of the bars if the <kbd>borderWidth</kbd> is specified with a value greater than zero, as follows:</p>
<pre> const dataObj = {<br/>     labels: labels,<br/>     datasets: [<br/>         {<br/>             label: "Volume",<br/>             data: volumes,<br/>             borderWidth: 2,<br/>             backgroundColor: "hsla(20,100%,80%,0.8)",<br/>             borderColor: "hsla(0,100%,50%,1)"<br/>         }<br/>     ]<br/> }<br/> new Chart("ocean-volume-bar-chart", {type: "bar", data: dataObj});</pre>
<p>The preceding code should produce the result shown as follows. The full code is available at <kbd>Pages/BarChart2.html</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/fd747d35-bf9d-450d-96d6-453c240c2b74.png" style="width:36.92em;height:36.00em;" width="612" height="595"/></p>
<p>Applying color attributes to a bar chart (code: <em>Pages/BarChart2.html)</em></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Options configuration</h1>
                
            
            
                
<p>Defaults are configured per chart with an options configuration object included in the <kbd>chart</kbd> object (the second parameter of the constructor), as demonstrated in the following block of code:</p>
<pre>new Chart("ocean-volume-bar-chart",<br/>        {<br/>            type: "bar",<br/>            data: dataObj,<br/>            options: {} // configure options here<br/>        });</pre>
<p>There are many defaults that you can change. You might, for example, wish to have more control over the size of your chart, which resizes automatically. That happens because charts are responsive by default. You can turn responsiveness off by overriding the <kbd>responsive</kbd> property, which has a default <kbd>true</kbd> value, as follows:</p>
<pre>options: {<br/>    responsive: false<br/>}</pre>
<p>Now, your chart no longer resizes automatically. However, what if you do want to undertake resizing, but don't care about the aspect ratio? Then, you can override the <kbd>maintainAspectRatio</kbd> property, as follows:</p>
<pre>options: {<br/>    maintainAspectRatio: false<br/>}</pre>
<p>You might want this if your <kbd>canvas</kbd> object is located inside a parent <kbd>&lt;div&gt;</kbd> container, which controls its size and is configured with CSS. In the following code (<kbd>Pages/BarChart4.html</kbd>), the canvas will occupy <kbd>80%</kbd> of the size of its parent container, as follows:</p>
<pre>&lt;style&gt;<br/>    #canvas-container {<br/>        position: relative;<br/>        height: 80%;<br/>        width: 80%;<br/>    }<br/>&lt;/style&gt;<br/>&lt;div id="canvas-container"&gt;<br/>  &lt;canvas id="ocean-volume-bar-chart" width="200" height="200"&gt;&lt;/canvas&gt;<br/>&lt;/div&gt;</pre>
<p class="CDPAlignLeft CDPAlign">If you try to resize the chart, it will, by default, maintain its aspect ratio (and no longer fit in the page), unless the <kbd>maintainAspectRatio</kbd> property is set to <kbd>false</kbd>, as follows:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/e45ebc88-1d4f-48cf-ab51-1320ecf5be09.png" width="697" height="228"/></p>
<p>Configuring the aspect ratio of a chart to make it fit in a canvas (code: <em>Pages/BarChart4.html)</em></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Text and fonts</h1>
                
            
            
                
<p>Text can be included in many different objects. Each data object can have a list of categories, each dataset can have a legend, the chart can have a title, and tooltips can have titles and other information. Some text is visible or invisible by default. You can configure the visibility, font families, font sizes, and colors of any text inside a chart.</p>
<p>Fonts can be applied globally (for all charts) using default configurations. Using the <kbd>options</kbd> configuration object, they can be applied locally to titles and legends, which are also configured as objects.</p>
<p>In our chart, we have a single dataset, which makes the legend superfluous. You can hide it by changing the <kbd>legend.display</kbd> property to <kbd>false</kbd>, as follows:</p>
<pre>options: { // configure options here<br/>    ...<br/>    legend: {<br/>        display: false<br/>    }<br/>}</pre>
<p>We can also give the chart a title and configure its font size, color, and family, as follows:</p>
<pre>options: { // configure options here<br/>     maintainAspectRatio: false,<br/>     legend: {<br/>         display: false<br/>     },<br/>     title: {<br/>         display: true,<br/>         text: ['Volume of the oceans','in thousands of cubic km'],<br/>         fontFamily: "TrebuchetMS",<br/>         fontSize: 24,<br/>         fontColor: 'rgb(0,120,0)',<br/>     }<br/> }</pre>
<p>It's not enough to simply add the title to the <kbd>text</kbd> property. Since the <kbd>display</kbd> property is <kbd>false</kbd> by default, you must explicitly define it to be <kbd>true</kbd> for the title to be displayed. With these changes, your chart should look similar to the following:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/e212da7a-0758-4ef1-b7c2-5f64a69aa42a.png" width="733" height="440"/></p>
<p>Adding a title and defining font properties (code: <em>Pages/BarChart5.html)</em></p>
<p class="NormalPACKT">You can configure the style of all of the text in the chart, including individual tooltip titles and bodies, scales, and major and minor ticks, as we will see in the following chapters.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Global defaults</h1>
                
            
            
                
<p>Local configuration options override global default configurations, which can be configured using the <kbd>Chart.defaults.global</kbd> object. You can configure properties, such as fonts, colors, axes, gridlines, ticks, animations, tooltips, and element properties, either globally (for all charts), or locally (for a specific chart).</p>
<p>To specify a global font family, you can use the following code:</p>
<pre>Chart.defaults.global.defaultFontFamily = "Helvetica Neue";</pre>
<p>This will affect all of the text in the chart. You can also define defaults for specific text elements by changing the properties, such as <kbd>Chart.defaults.global.legend</kbd>, <kbd>Chart.defaults.global.title</kbd>, and many more, as follows:</p>
<pre>Chart.defaults.global.legend.fontSize = 10; // all legend text will be size 10</pre>
<p>The default color used in charts is <kbd>rgba(0,0,0,0.1) (lightgray)</kbd>. You can change this using <kbd>Chart.defaults.global.defaultColor</kbd>.</p>
<p>Global properties are great to include in a separate <kbd>.js</kbd> file, so that your charts have a consistent look and field. You might also prefer to use them even when you have a single chart.</p>
<p>The following table lists specific configurations for bar charts that can be applied locally or globally. The global bar chart settings are stored in <kbd>Chart.defaults.bar</kbd> and <kbd>Charts.defaults.horizontalBar</kbd>. Local settings should be stored inside the <kbd>options</kbd> object under <kbd>scales.xAxes[]</kbd> or <kbd>scales.yAxes[]</kbd>, for vertical and horizontal bar charts, respectively. Try using some of these in your chart and see the results you get:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Property</strong></p>
</td>
<td>
<p><strong>Value</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>barPercentage</kbd></p>
</td>
<td rowspan="4">
<p><kbd>Number</kbd></p>
</td>
<td>
<p>The percentage of the category (all datasets) width taken by the bar (each dataset) width. The default is <kbd>0.9</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>categoryPercentage</kbd></p>
</td>
<td>
<p>The percentage of the sample width taken by the category width. The default is <kbd>0.8</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>barThickness</kbd></p>
</td>
<td>
<p>This manually sets the bar width (ignores <kbd>categoryPercentage</kbd> and <kbd>barPercentage</kbd>).</p>
</td>
</tr>
<tr>
<td>
<p><kbd>maxBarThickness</kbd></p>
</td>
<td>
<p>This limits the bar thickness to this number.</p>
</td>
</tr>
</tbody>
</table>
<p>Option configuration properties for charts</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Transitions, interactions, and tooltips</h1>
                
            
            
                
<p>All charts are also born with basic transitions, animations, and interactive tooltips. For a simple chart, you might not need to change anything; but in case you want more control, you can configure these behaviors with local and global properties.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Transition duration</h1>
                
            
            
                
<p>You can create charts that change the way they look on user interaction. They will automatically transition to the new values gracefully and smoothly. Transition animations are configured with default ease algorithms and durations, but you can change them by editing the properties of the <kbd>Chart.defaults.global.animation</kbd> object, or override any defaults locally by using the <kbd>options.animation</kbd> object.</p>
<p>For example, in the following chart code, all transitions last five seconds (<kbd>Pages/BarChart6.html</kbd>):</p>
<pre>new Chart("ocean-volume-bar-chart", {<br/>    type: "bar",<br/>    data: {...},<br/>    options: {<br/>        …<br/>        animation: {<br/>            duration: 5000<br/>        }<br/>    }<br/>});</pre>


            

            
        
    </div>



  
<div><h1 class="header-title">Updating charts</h1>
                
            
            
                
<p>You can use JavaScript functions and libraries to change your data dynamically, but the changes will not be reflected immediately in your chart. After changing data, you have to call <kbd>update()</kbd> in order to redraw it. For this, you will need a variable reference to the <kbd>chart</kbd> object, as follows:</p>
<pre>const ch = new Chart("ocean-volume-bar-chart", {...});</pre>
<p>The following example toggles the data in the chart, replacing the values in the dataset with a different array, and changing labels, titles, and colors. The <kbd>toggle()</kbd> function is registered as a click event listener on the canvas. Whenever you click anywhere in the canvas it will run, change the values of several properties, and call <kbd>update()</kbd>,which forces the chart to transition to the new data and appearance, as follows:</p>
<pre>const labels = ["Arctic", "North Atlantic", "South Atlantic", "Indian",<br/>                "North Pacific", "South Pacific", "Southern"];<br/> <br/> const area   = [15558,41900,40270,70560,84000,84750,21960];   // km2 * 10^3<br/> const volume = [18750,146000,160000,264000,341000,329000,71800];      //km3 * 10^3<br/> const canvas = document.getElementById("ocean-volume-bar-chart");<br/> const ctx = canvas.getContext("2d");<br/> const ch = new Chart(ctx, {<br/>     type: "bar",<br/>     data: {<br/>         labels: labels,<br/>         datasets: [<br/>             {<br/>                 label: "Volume",<br/>                 data: volume,<br/>                 borderWidth: 2,<br/>                 backgroundColor: "hsla(20,100%,80%,0.8)",<br/>                 borderColor: "hsla(0,100%,50%,1)"<br/>             }<br/>         ]<br/>     },<br/>     options: {<br/>         maintainAspectRatio: false,<br/>         title: {<br/>             display: true,<br/>             text: ['Volume of the oceans','in thousands of cubic km'],<br/>             fontFamily: "TrebuchetMS",<br/>             fontSize: 24<br/>         },<br/>         legend: {<br/>             display: false<br/>         }<br/>     }<br/> });<br/> <br/> canvas.addEventListener("click", toggle);<br/> <br/> function toggle(event) {<br/>     if(ch.data.datasets[0].label == "Volume") {<br/>         ch.data.datasets[0].data = area;<br/>         ch.data.datasets[0].label = "Area";<br/>         ch.data.datasets[0].borderColor = "hsla(120,100%,50%,1)";<br/>         ch.data.datasets[0].backgroundColor = "hsla(140,100%,80%,0.8)";<br/>         ch.options.title.text = ['Surface area of the oceans',<br/>                                  'in thousands of square km'];<br/>     } else {<br/>         ch.data.datasets[0].data = volume;<br/>         ch.data.datasets[0].label = "Volume";<br/>         ch.data.datasets[0].backgroundColor = "hsla(20,100%,80%,0.8)";<br/>         ch.data.datasets[0].borderColor = "hsla(0,100%,50%,1)";<br/>         ch.options.title.text = ['Volume of the oceans',<br/>                                  'in thousands of cubic km'];<br/>     }<br/>     ch.update();<br/> }</pre>
<p>The following screenshot shows the same chart before and after being clicked. The full code is available at <kbd>Pages/BarChart7.html</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/ad68d79b-4ceb-4e07-8ed0-895e58f8a507.png" width="1515" height="316"/></p>
<p>Screenshots of same chart after and before a click. Code: <em>Pages/BarChart7.html</em></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Tooltips</h1>
                
            
            
                
<p>The animation duration does not affect tooltips, which have their own configuration. Besides animation, you can configure colors, fonts, spacing, shape, and behaviors in tooltips. You can also declare callback functions that change the appearance and content at every interaction. If you need to add more information to a tooltip, Chart.js allows you to create sophisticated HTML tooltips containing images and text.</p>
<p>For example, the following configuration creates black tooltips that contain default title colors. The tooltip configuration options contain callbacks that set text colors that match the colors of the bars, as follows:</p>
<pre>options: {<br/>     …<br/>     title: {…},<br/>     legend: {…},<br/>     animation: {…},<br/>     tooltips: {<br/>       backgroundColor: 'rgba(200,200,255,.9)',<br/>       titleFontColor: 'black',<br/>       caretSize: 5,<br/>       callbacks: {<br/>           labelColor: function(tooltipItem, chart) {<br/>              return {<br/>                  borderColor: 'black',<br/>                  backgroundColor: <br/>                  chart.data.datasets[0].backgroundColor<br/>              }<br/>           },<br/>           labelTextColor:function(tooltipItem, chart){<br/>              return chart.data.datasets[0].borderColor;<br/>           }<br/>        }<br/>     }<br/> }</pre>
<p>You can run the preceding code in the <kbd>Pages/BarChart8.html</kbd> file.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Working with larger and multiple datasets</h1>
                
            
            
                
<p class="NormalPACKT">From what we have seen so far, you should already be able to create a simple bar chart. In this section, we will explore some configuration options related to large datasets, which you will probably load as an external file, and multiple datasets, which can be plotted on the same chart.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">Loading data</h1>
                
            
            
                
<p>Many times, your data will be available online and you may want to load it dynamically. It's also a good idea to keep your data and code in separate files. If you have data in a CSV file, you can load it into your JavaScript code and use it to generate the chart.</p>
<p>JavaScript loads data asynchronously using Ajax. You can use standard Ajax, JQuery, or the ES6 fetch function, which functions like a JavaScript promise. After you load the CSV file, you need to parse it. If you only need one set of category labels and values, you can handle it without a parser.</p>
<p>In this example, we will use a CSV file that contains the amount of plastic waste disposed of in the oceans by the 20 greatest pollutants. You can find the following code in the GitHub repository for this chapter in <kbd>Data/waste.csv</kbd>:</p>
<pre> Country,Tonnes<br/> China,8819717<br/> Indonesia,3216856<br/> Philippines,1883659<br/> ...<br/> United States,275424</pre>
<p>The following code loads and parses the file, splitting the data into rows, and then splitting each row by a comma to assemble a <kbd>labels</kbd> array and a <kbd>values</kbd> array (we could also have used a CSV parser). This process transforms the data into arrays in a format that can be used by Chart.js, as follows:</p>
<pre>fetch('../Data/waste.csv')<br/>  .then(response =&gt; response.text())<br/>  .then((data) =&gt; {<br/>    const labels = [],<br/>          values = [];<br/>    const rows = data.split("\n");<br/> <br/>    rows.forEach(r =&gt; {<br/>        const item = r.split(",");<br/>        labels.push(item[0]);<br/>        values.push(+item[1]);<br/>    });<br/> <br/>    labels.shift(); // remove the header<br/>    values.shift(); // remove the header<br/> <br/>    console.log(labels); // print to check if the arrays<br/>    console.log(values); // were generated correctly<br/> <br/>    draw(labels, values);<br/> <br/> });</pre>
<p>The <kbd>draw()</kbd> function contains the code to set up a canvas, and create and display the bar chart, as follows:</p>
<pre>function draw(labels, values) {<br/>   const canvas = document.getElementById("bar-chart");<br/>   const ctx = canvas.getContext("2d");<br/> <br/>   new Chart(ctx, {<br/>       type: "bar",<br/>       data: {<br/>           labels: labels, // the labels<br/>           datasets: [<br/>               {<br/>                   label: "Tonnes of plastic",<br/>                   data: values, // the data values<br/>                   borderWidth: 2,<br/>                   backgroundColor: "hsla(20,100%,80%,0.8)",<br/>                   borderColor: "hsla(0,100%,50%,1)"<br/>               }<br/>             ]<br/>         },<br/>         options: {<br/>             maintainAspectRatio: false,<br/>             title: {<br/>                 display: true,<br/>                 text: 'Tonnes of plastic waste',<br/>                 fontSize: 16<br/>             },<br/>             legend: {<br/>                 display: false<br/>             }<br/>         }<br/>     });<br/> }</pre>
<p>You can view the full code in <kbd>Pages/BarChart9.html</kbd>. The result is shown as follows:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/52adf5d3-3266-4afa-b365-eab2cbebf0a6.png" width="773" height="443"/></p>
<p>A bar chart created with data loaded from an external file (code: <em>Pages/BarChart9.html)</em></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Horizontal bar chart</h1>
                
            
            
                
<p>When you have a lot of data to display and compare, it might fit better in a horizontal bar chart. You can easily convert a vertical bar chart into a horizontal one by changing the <kbd>type</kbd> to <kbd>horizontalBar</kbd>, as follows:</p>
<pre>new Chart(ctx, {<br/>    type: "horizontalBar",<br/>    data: {…}<br/>}</pre>
<p>The preceding chart seems better as a horizontal chart, since the category labels don't have to be turned sideways. You can see the full code in <kbd>Pages/BarChart10.html</kbd>. The following screenshot shows what the chart looks like now:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/6725df78-0e5a-4433-9a00-fbd422213be2.png" width="736" height="444"/></p>
<p>A horizontal bar chart (code: <em>Pages/BarChart10.html)</em></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Adding extra datasets</h1>
                
            
            
                
<p>You can add more datasets to a bar chart, and configure it with a new legend label, colors, and data arrays. In the following example, we will load a larger <kbd>.csv</kbd> file, which contains the data for plastic waste disposal in <kbd>2010</kbd>, and a forecast for <kbd>2025</kbd>. It has one extra column, as follows:</p>
<pre> Country,2010,2025<br/> China,8819717,17814777<br/> Indonesia,3216856,7415202<br/> Philippines,1883659,5088394<br/> ...<br/> United States,275424,336819</pre>
<p>This time, the code will generate two <kbd>data</kbd> arrays and a single <kbd>labels</kbd> array. The data and labels that belong to the same category have the same index, as follows:</p>
<pre>fetch('../Data/waste2.csv')<br/> .then(response =&gt; response.text())<br/> .then((data) =&gt; {<br/>   const labels = [],<br/>         values2010 = [],<br/>         values2025 = [];<br/> <br/>   const rows = data.split("\n");<br/> <br/>   rows.forEach(r =&gt; {<br/>       const item = r.split(",");<br/>       labels.push(item[0]);<br/>       values2010.push(+item[1]/1000000); // divide by 1 million to make<br/>       values2025.push(+item[2]/1000000); // the chart easier to read<br/>    });<br/> <br/>    labels.shift();<br/>    values2010.shift();<br/>    values2025.shift();<br/> <br/>    draw(labels, [values2010, values2025]);<br/> <br/> });</pre>
<p>The new values will be included in a second dataset, in the <kbd>datasets</kbd> array, as follows.</p>
<pre>function draw(labels, values) {<br/>    const canvas = document.getElementById("bar-chart");<br/>    const ctx = canvas.getContext("2d");<br/> <br/>    new Chart(ctx, {<br/>        type: "horizontalBar",<br/>        data: {<br/>            labels: labels,<br/>            datasets: [<br/>                {  <br/>                    label: "2010",<br/>                    data: values[0],<br/>                    backgroundColor: "hsla(20,100%,50%,0.7)",<br/>                },{<br/>                    label: "2025",<br/>                    data: values[1],<br/>                    backgroundColor: "hsla(260,100%,50%,0.7)",<br/>                }<br/>            ]<br/>        },<br/>        options: {<br/>            maintainAspectRatio: false,<br/>            title: {<br/>                display: true,<br/>                text: 'Millions of tonnes of plastic waste',<br/>                fontSize: 16<br/>            }<br/>        }<br/>    });<br/> }</pre>
<p>The full code is in <kbd>Pages/BarChart12.html</kbd>. With two datasets, there are two bars for each category. There is also one legend item for each dataset. The result is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/e2eef614-efa6-4cee-84e2-e6fc1d5f45fa.png" width="742" height="439"/></p>
<p>A bar chart with two datasets (code: <em>Pages/BarChart12.html)</em></p>
<p>With two or more datasets, you may want to configure the width of the bars using the configuration option properties, <kbd>barPercentage</kbd> and <kbd>categoryPercentage</kbd>. The former controls the width of the individual bars for each category, and the latter determines the space taken by all of the bars in one category. These properties should be defined in <kbd>options.scales.xAxes[]</kbd> if you are using a bar chart, and <kbd>options.scales.yAxes[]</kbd> if it is a <kbd>horizontalBar</kbd> (see <kbd>Pages/BarChart12.html</kbd>), as follows:</p>
<pre>options: {<br/>    maintainAspectRatio: false,<br/>    title: {<br/>        display: true,<br/>        text: 'Tonnes of plastic waste',<br/>        fontSize: 16<br/>     },<br/>     scales: {<br/>         yAxes: [{<br/>             barPercentage: .3,<br/>             categoryPercentage: .5<br/>         }]<br/>     }<br/> }</pre>


            

            
        
    </div>



  
<div><h1 class="header-title">Stacking bars</h1>
                
            
            
                
<p>Bars are usually placed side-by-side for comparison. However, if the values are part of a whole, you can stack bars in different datasets to emphasize this relationship. We can stack the volumes of the world's oceans, since their sum reveals the total volume of ocean water in the world. The following data object places the volume of each ocean in a separate dataset, as follows:</p>
<pre>const dataObj = {<br/>    labels: ["Volume"], // there is only one category<br/>    datasets: [<br/>        {<br/>            label: "Arctic", data: [18750],<br/>            backgroundColor: "hsla(0,100%,50%,0.5)"<br/>        },{<br/>            label: "North Atlantic", data: [146000],<br/>            backgroundColor: "hsla(60,100%,50%,0.5)"<br/>        },{<br/>            label: "South Atlantic", data: [160000],<br/>            backgroundColor: "hsla(120,100%,50%,0.5)"<br/>        },{<br/>            label: "Indian", data: [264000],<br/>            backgroundColor: "hsla(180,100%,50%,0.5)"<br/>        },{<br/>            label: "North Pacific", data: [341000],<br/>            backgroundColor: "hsla(240,100%,50%,0.5)"<br/>        },{<br/>            label: "South Pacific", data: [329000],<br/>            backgroundColor: "hsla(300,100%,50%,0.5)"<br/>        },{<br/>            label: "Southern", data: [71800],<br/>            backgroundColor: "hsla(340,100%,50%,0.5)"<br/>        },<br/>    ]<br/> };</pre>
<p>To transform a bar chart into a stacked chart, you have to configure the settings for the <em>x</em> and <em>y</em> axes, enabling the stacked property as follows:</p>
<pre> const optionsObj = {<br/>    maintainAspectRatio: false,<br/>     title: {<br/>         display: true,<br/>         text: 'Volume of oceans (km3)',<br/>         fontSize: 16<br/>     },<br/>     legend: {<br/>         position: 'right'<br/>     },<br/>     scales: {<br/>         xAxes: [{<br/>             stacked: true<br/>         }],<br/>         yAxes: [{<br/>             stacked: true<br/>         }]<br/>     }<br/> }<br/> new Chart("ocean-volume-bar-chart",<br/>           {type: "bar", data: dataObj, options: optionsObj});</pre>
<p>The expected result is shown in the following screenshot. The full code is in <kbd>Pages/BarChart13.html</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/6686f468-f2dd-45af-acfe-5ca5465f0a7a.png" width="788" height="456"/></p>
<p>A stacked bar chart can be used to display data as parts of a whole (code: <em>Pages/BarChart13.html)</em></p>


            

            
        
    </div>



  
<div><h1 class="header-title">Summary </h1>
                
            
            
                
<p>In this chapter, we learned how to install Chart.js in a web application and how to quickly create a simple interactive and responsive bar chart, which can be included in a web page. We also learned how to configure the default look and feel of a chart, by changing basic properties, such as colors, fonts, responsiveness, animation duration, and tooltips. With this knowledge, you can already start using Chart.js to display simple data visualizations in your web pages.</p>
<p>This chapter also explored some real-world issues, such as loading external files, and how to deal with larger datasets, by filtering data and configuring the chart in order to display the information more efficiently.</p>
<p>In the following chapters, we will explore Chart.js in greater detail, create all eight different types of charts, learn how to configure several other properties, and deal with more complex datasets.</p>


            

            
        
    </div>



  
<div><h1 class="header-title">References</h1>
                
            
            
                
<p><strong>Books and websites</strong>:</p>
<ul>
<li>Chart.js official documentation and samples: <a href="https://www.chartjs.org/docs/latest/">https://www.chartjs.org/docs/latest/</a></li>
</ul>
<p><strong>Data sources</strong>:</p>
<ul>
<li>Volumes of the World’s Oceans (based on ETOPO1): <kbd>Chapter03/Pages/BarChart1.html</kbd> and others. <a href="https://www.ngdc.noaa.gov/mgg/global/etopo1_ocean_volumes.html">https://www.ngdc.noaa.gov/mgg/global/etopo1_ocean_volumes.html</a></li>
<li>Plastic waste: <kbd>Chapter03/Data/waste.csv</kbd>. Jambeck et al. <em>Plastic waste inputs from land into the ocean</em>. Science magazine. 13 February 2015</li>
</ul>


            

            
        
    </div>



  </body></html>