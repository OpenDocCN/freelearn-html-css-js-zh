<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Working with a Liferay User / User Group / Organization" id="aid-SJGS1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Working with a Liferay User / User Group / Organization</h1></div></div></div><p>In this chapter, we will cover the basic functionalities that will allow us to manage the structure and users of the intranet. In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Managing an organization structure</li><li class="listitem">Creating a new user group</li><li class="listitem">Adding a new user</li><li class="listitem">Assigning users to organizations</li><li class="listitem">Assigning users to user groups</li><li class="listitem">Exporting users</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec24"/>Introduction</h1></div></div></div><p>The first step in creating an intranet, beyond answering the question of who the users will be, is to determine its structure. The structure of the intranet is often a derivative of the organizational structure of the company or institution. Liferay Portal CMS provides several tools that allow mapping of a company's structure in the system. The hierarchy is built by organizations that match functional or localization departments of the company. Each organization represents one department or localization and assembles users who represent employees of these departments. However, sometimes, there are other groups of employees in the company. These groups exist beyond the company's organizational structure, and can be reflected in the system by the User Groups functionality.</p></div></div>
<div class="section" title="Managing an organization structure"><div class="titlepage" id="aid-TI1E2"><div><div><h1 class="title"><a id="ch03lvl1sec25"/>Managing an organization structure</h1></div></div></div><p>Building an <a id="id142" class="indexterm"/>organizational structure in Liferay resembles the process of managing folders on a computer drive. An organization may have its suborganizations and—except the first level organization—at the same time, it can be a suborganization of another one. This folder-similar mechanism allows you to create a tree structure of organizations.</p><p>Let's imagine<a id="id143" class="indexterm"/> that we are obliged to create an intranet for a software development company. The company's headquarter is located in London. There are also two other offices in Liverpool and Glasgow. The company is divided into finance, marketing, sales, IT, human resources, and legal departments. Employees from Glasgow and Liverpool belong to the IT department.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec62"/>How to do it…</h2></div></div></div><p>In order to create a structure described previously, these are the steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control Panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Add</strong></span> button.</li><li class="listitem">Choose the type of organization you want to create (in our example, it will be a regular organization called software development company, but it is also possible to choose a location):<div class="mediaobject"><img src="../Images/image00304.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Provide a name for the top-level organization.</li><li class="listitem">Choose the parent organization (if a top-level organization is created, this must be skipped).</li><li class="listitem">Click<a id="id144" class="indexterm"/> on the <span class="strong"><strong>Save</strong></span> button:<div class="mediaobject"><img src="../Images/image00305.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <span class="strong"><strong>Change</strong></span> button and upload a file, with a graphic representation of your company (for example, logo).</li><li class="listitem">Use the right column menu to navigate to data sections you want to fill in with the information.</li><li class="listitem">Click on the <span class="strong"><strong>Save</strong></span> button.</li><li class="listitem">Go back to the <span class="strong"><strong>Users and Organizations</strong></span> list by clicking on the back icon (the left-arrow icon next to the <span class="strong"><strong>Edit Software Development Company</strong></span> header).</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button, located near the name of the newly created organization.</li><li class="listitem">Choose the <span class="strong"><strong>Add Regular Organization</strong></span> option.</li><li class="listitem">Provide a name for the organization (in our example, it is IT).</li><li class="listitem">Click on the <span class="strong"><strong>Save</strong></span> button.</li><li class="listitem">Go back to the <span class="strong"><strong>Users and Organizations</strong></span> list by clicking on the back icon (left-arrow icon next to <span class="strong"><strong>Edit IT</strong></span> header).</li><li class="listitem">Click <a id="id145" class="indexterm"/>on the <span class="strong"><strong>Actions</strong></span> button, located near the name of the newly created organization (in our case, it is IT).</li><li class="listitem">Choose the <span class="strong"><strong>Add Location</strong></span> option.</li><li class="listitem">Provide a name for the organization (for instance, IT Liverpool).</li><li class="listitem">Provide a country.</li><li class="listitem">Provide a region (if available).</li><li class="listitem">Click on the <span class="strong"><strong>Save</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec63"/>How it works…</h2></div></div></div><p>Let's take a look at what we did throughout the previous recipe. In steps 1 through 6, we created a new top-level organization called software development company. With steps 7 through 9, we defined a set of attributes of the newly created organization. Starting from step 11, we created suborganizations: standard organization (IT) and its location (IT Liverpool).</p><div class="section" title="Creating an organization"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec18"/>Creating an organization</h3></div></div></div><p>There are two types of organizations: regular organizations and locations. The regular organization <a id="id146" class="indexterm"/>provides the possibility to create a multilevel structure, each <a id="id147" class="indexterm"/>unit of which can have parent organizations <a id="id148" class="indexterm"/>and suborganizations (there is one exception: the <a id="id149" class="indexterm"/>top-level organization cannot have any parent organizations). The localization is a special kind of organization that allows us to provide some additional data, such as country and region. However, it does not enable us to create suborganizations. When creating the tree of organizations, it is possible to combine regular organizations and locations, where, for instance, the top-level organization will be the regular organization and, both locations and regular organizations will be used as child organizations.</p><div class="note" title="Note"><h3 class="title"><a id="note12"/>Note</h3><p>When creating a new organization, it is very important to choose the organization type wisely, because it is the only organization parameter, which cannot be modified further.</p></div><p>As was described previously, organizations can be arranged in a tree structure. The position of the organization in a tree is determined by the parent organization parameter, which is set by creating a new organization or by editing an existing one. If the parent organization is not set, a top-level organization is always created.</p><p>There are two ways of creating a suborganization. It is possible to add a new organization by using the <span class="strong"><strong>Add</strong></span> button and choosing a parent organization manually. The other way is to go to a specific organization's action menu and choose the <span class="strong"><strong>Add Regular Organization</strong></span> action. While creating a new organization using this option, the parent organization parameter will be set automatically.</p></div><div class="section" title="Setting attributes"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec19"/>Setting attributes</h3></div></div></div><p>Similarly, just<a id="id150" class="indexterm"/> like its counterpart in reality, every organization in Liferay has a set of attributes that are grouped and can be modified through the organization profile form. This form is available after clicking on the <span class="strong"><strong>Edit</strong></span> button from the organization's action list (see the <span class="emphasis"><em>There's more…</em></span> section). All the available attributes are divided into the following groups:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>ORGANIZATION INFORMATION</strong></span> group, which contains the following sections:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>Details</strong></span> section, which allows us to change the organization name, parent organization, country, or region (available for locations only). The name of the organization is the only required organization parameter. It is used by the search mechanism to search for organizations. It is also a part of an URL address of the organization's sites.</li><li class="listitem">The <span class="strong"><strong>Organization Sites</strong></span> section, which allows us to enable the private and public pages of the organization's website.</li><li class="listitem">The <span class="strong"><strong>Categorization</strong></span> section, which provides tags and categories. They can be assigned to an organization (for more information about tags and categories, refer to the <span class="emphasis"><em>Tagging and categorizing content</em></span> recipe from <a class="link" title="Chapter 8. Search and Content Presentation Tools" href="part0059.xhtml#aid-1O8H61">Chapter 8</a>, <span class="emphasis"><em>Search and Content Presentation Tools</em></span>).</li></ul></div></li><li class="listitem"><span class="strong"><strong>IDENTIFICATION</strong></span>, which groups the <span class="strong"><strong>Addresses</strong></span>, <span class="strong"><strong>Phone Numbers</strong></span>, <span class="strong"><strong>Additional Email Addresses</strong></span>, <span class="strong"><strong>Websites</strong></span>, and <span class="strong"><strong>Services</strong></span> sections.</li><li class="listitem"><span class="strong"><strong>MISCELLANEOUS</strong></span>, which consists of:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>Comments</strong></span> section, which allows us to manage an organization's comments</li><li class="listitem">The <span class="strong"><strong>Reminder Queries</strong></span> section, in which reminder queries for different languages can be set</li><li class="listitem">The <span class="strong"><strong>Custom Fields</strong></span> section, which provides a tool to manage values of custom attributes defined for the organization</li></ul></div></li></ul></div></div><div class="section" title="Customizing an organization functionalities"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec20"/>Customizing an organization functionalities</h3></div></div></div><p>Liferay provides the possibility to customize an organization's functionality. In the <code class="literal">portal.properties</code> file located in the <code class="literal">portal-impl/src</code> folder, there is a section called <span class="strong"><strong>Organizations</strong></span>. All these settings can be overridden in the <code class="literal">portal-ext.properties</code> file. We mentioned that top-level organization cannot have any parent organizations. If <a id="id151" class="indexterm"/>we look deeper into portal settings, we can dig out the following properties:</p><div class="informalexample"><pre class="programlisting">organizations.rootable[regular-Organization]=true
organizations.rootable[location]=false</pre></div><p>These properties determine which type of organization can be created as a root organization.</p><p>In many cases, users want to add a new organization's type. To achieve this goal, it is necessary to set a few properties that describe a new type:</p><div class="informalexample"><pre class="programlisting">organizations.types=regular-Organization,location,<span class="strong"><strong>my-Organization</strong></span>
organizations.rootable[<span class="strong"><strong>my-organization</strong></span>]=false
organizations.children.types[<span class="strong"><strong>my-organization</strong></span>]=location
organizations.country.enabled[<span class="strong"><strong>my-organization</strong></span>]=false
organizations.country.required[<span class="strong"><strong>my-organization</strong></span>]=false</pre></div><p>The first property defines a list of available types. The second one denies the possibility to create an organization as a root. The next one specifies a list of types that we can create as children. In our case, this is only the location type. The last two properties turn off the country list in the creation process. This option is useful when the location is not important.</p><p>Another interesting feature is the ability to customize an organization's profile form. It is possible to indicate which sections are available on the creation form and which are available on the modification form. The following properties aggregate this feature:</p><div class="informalexample"><pre class="programlisting">organizations.form.<span class="strong"><strong>add</strong></span>.main=details,organization-site
organizations.form.<span class="strong"><strong>add</strong></span>.identification=
organizations.form.<span class="strong"><strong>add</strong></span>.miscellaneous=

organizations.form.<span class="strong"><strong>update</strong></span>.main=details,organization-site,categorization
organizations.form.<span class="strong"><strong>update</strong></span>.identification=addresses,phone-numbers,additional-email-addresses,websites,services
organizations.form.<span class="strong"><strong>update</strong></span>.miscellaneous=comments,reminder-queries,custom-fields</pre></div></div></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec64"/>There's more…</h2></div></div></div><p>It is also possible to modify an existing organization and its attributes and to manage its members using actions available in the organization <span class="strong"><strong>Actions</strong></span> menu.</p><p>There are several <a id="id152" class="indexterm"/>possible actions that can be performed on an organization:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>Edit</strong></span> action allows us to modify the attributes of an organization.</li><li class="listitem">The <span class="strong"><strong>Manage Site</strong></span> action redirects the user to the <span class="strong"><strong>Site Settings</strong></span> section in <span class="strong"><strong>Control Panel</strong></span> and allows us to manage the organization's public and private sites (if the organization site has been already created).</li><li class="listitem">The <span class="strong"><strong>Assign Organization Roles</strong></span> action allows us to set organization roles to members of an organization.</li><li class="listitem">The <span class="strong"><strong>Assign Users</strong></span> action allows us to assign users already existing in the Liferay database to the specific organization.</li><li class="listitem">The <span class="strong"><strong>Add User</strong></span> action allows us to create a new user, who will be automatically assigned to this specific organization.</li><li class="listitem">The <span class="strong"><strong>Add Regular Organization </strong></span>action enables us to create a new child regular organization (the current organization will be automatically set as a parent organization of a new one).</li><li class="listitem">The <span class="strong"><strong>Add Location</strong></span> action enables us to create a new location (the current organization will be automatically set as a parent organization of a new one).</li><li class="listitem">The <span class="strong"><strong>Delete</strong></span> action allows us to remove an organization. While removing an organization, all pages with portlets and content are also removed.</li></ul></div><div class="note" title="Note"><h3 class="title"><a id="note13"/>Note</h3><p>An organization cannot be removed if there are suborganizations or users assigned to it.</p></div><p>In order to edit an organization, assign or add users, create a new suborganization (regular organization or location) or delete an organization. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as <a id="id153" class="indexterm"/>an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button, located near the name of the organization you want to modify:<div class="mediaobject"><img src="../Images/image00306.jpeg" alt="There's more…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the<a id="id154" class="indexterm"/> name of the chosen action.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec65"/>See also</h2></div></div></div><p>For information on Organization Sites, refer to the <span class="emphasis"><em>Creating an organization and a stand alone site</em></span> and the <span class="emphasis"><em>Site configuration</em></span> recipes from <a class="link" title="Chapter 4. Liferay Site Configuration" href="part0037.xhtml#aid-1394Q1">Chapter 4</a>, <span class="emphasis"><em>Liferay Site Configuration</em></span>.</p></div></div>
<div class="section" title="Creating a new user group"><div class="titlepage" id="aid-UGI02"><div><div><h1 class="title"><a id="ch03lvl1sec26"/>Creating a new user group</h1></div></div></div><p>Sometimes, in <a id="id155" class="indexterm"/>addition to the hierarchy, within the company, there are other groups of people linked by common interests or occupations, such as people working on a specific project, people occupying the same post, and so on. Such groups in Liferay are represented by user groups. This functionality is similar to the LDAP users group where it is possible to set group permissions. One user can be assigned into many user groups.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec66"/>How to do it…</h2></div></div></div><p>In order to create a new user group, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>User Groups</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Add</strong></span> button.</li><li class="listitem">Provide <span class="strong"><strong>Name</strong></span> (required) and <span class="strong"><strong>Description</strong></span> of the user group.</li><li class="listitem">Leave<a id="id156" class="indexterm"/> the default values in the <span class="strong"><strong>User Group Site</strong></span> section.<div class="mediaobject"><img src="../Images/image00307.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <span class="strong"><strong>Save</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec67"/>How it works…</h2></div></div></div><p>The user groups functionality allows us to create a collection of users and provide them with a public and/or private site, which contain a bunch of tools for collaboration. Unlike the organization, the user group cannot be used to produce a multilevel structure. It enables us to create non-hierarchical groups of users, which can be used by other functionalities. For example, a user group can be used as an additional information targeting tool for the announcements portlet, which presents short messages sent by authorized users (the announcements portlet allows us to direct a message to all users from a specific organization or user group).</p><p>It is also possible to set permissions to a user group and decide which actions can be performed by which roles within this particular user group.</p><p>It is worth <a id="id157" class="indexterm"/>noting that user groups can assemble users who are already members of organizations. This mechanism is often used when, aside from the company organizational structure, there exist other groups of people who need a common place to store data or for information exchange.</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec68"/>There's more…</h2></div></div></div><p>It is also possible to modify an existing user group and its attributes and to manage its members using actions available in the user group <span class="strong"><strong>Actions</strong></span> menu.</p><p>There are <a id="id158" class="indexterm"/>several possible actions that can be performed on a user group. They are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>Edit</strong></span> action allows us to modify attributes of a user group</li><li class="listitem">The <span class="strong"><strong>Permissions</strong></span> action allows us to decide which roles can assign members of this user group, delete the user group, manage announcements, set permissions, and update or view the user group</li><li class="listitem">The <span class="strong"><strong>Manage Site Pages</strong></span> action redirects the user to the site settings section in <span class="strong"><strong>Control Panel</strong></span> and allows us to manage the user group's public and private sites</li><li class="listitem">The <span class="strong"><strong>Go to the Site's Public Pages</strong></span> action opens the user group's public pages in a new window (if any public pages of User Group Site has been created)</li><li class="listitem">The <span class="strong"><strong>Go to the Site's Private Pages</strong></span> action opens the user group's private pages in a new window (if any public pages of User Group Site has been created)</li><li class="listitem">The <span class="strong"><strong>Assign Members</strong></span> action allows us to assign users already existing in the Liferay database to this specific user group</li><li class="listitem">The <span class="strong"><strong>Delete</strong></span> action allows us to delete a user group</li></ul></div><div class="note" title="Note"><h3 class="title"><a id="note14"/>Note</h3><p>A user group cannot be removed if there are users assigned to it.</p></div><p>In order to edit a user group, set permissions, assign members, manage site pages, or delete a user group, perform these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>User Groups</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button, located near the name of the user group you want to modify:<div class="mediaobject"><img src="../Images/image00308.jpeg" alt="There's more…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on<a id="id159" class="indexterm"/> the name of the chosen action.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec69"/>See also</h2></div></div></div><p>For information on user group sites, refer to the <span class="emphasis"><em>Creating an organization and a stand alone site</em></span> and the <span class="emphasis"><em>Site configuration</em></span> recipes from <a class="link" title="Chapter 4. Liferay Site Configuration" href="part0037.xhtml#aid-1394Q1">Chapter 4</a>, <span class="emphasis"><em>Liferay Site Configuration</em></span>.</p></div></div>
<div class="section" title="Adding a new user"><div class="titlepage" id="aid-VF2I2"><div><div><h1 class="title"><a id="ch03lvl1sec27"/>Adding a new user</h1></div></div></div><p>Each system is created for users. Liferay Portal CMS provides a few different ways of adding users to <a id="id160" class="indexterm"/>the system that can be enabled or disabled depending on the requirements, as seen in <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <span class="emphasis"><em>Authentication and Registration Process</em></span>. The first way is to enable users by creating their own accounts via the <span class="strong"><strong>Create Account</strong></span> form. This functionality allows all users who can enter the site containing the form to register and gain access to the designated content of the website. In this case, the system automatically assigns the default user account parameters, which indicate the range of activities that may be carried by them in the system. The second solution (which we presented in this recipe) is to reserve the users' account creation to the administrators, who will decide what parameters should be assigned to each account.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec70"/>How to do it…</h2></div></div></div><p>To add a new user, you need to follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Add</strong></span> button.</li><li class="listitem">Choose the <span class="strong"><strong>User</strong></span> option.</li><li class="listitem">Fill in the <a id="id161" class="indexterm"/>form by providing the user's details in the <span class="strong"><strong>Email Address (Required)</strong></span>, <span class="strong"><strong>Title</strong></span>, <span class="strong"><strong>First Name (Required)</strong></span>, <span class="strong"><strong>Middle Name</strong></span>, <span class="strong"><strong>Last Name</strong></span>, <span class="strong"><strong>Suffix</strong></span>, <span class="strong"><strong>Birthday</strong></span>, and <span class="strong"><strong>Job Title</strong></span> fields (if the <span class="strong"><strong>Autogenerated User Screen Names</strong></span> option in the <span class="strong"><strong>Portal Settings</strong></span> | <span class="strong"><strong>Users</strong></span> section is disabled, the screen name field will be available):<div class="mediaobject"><img src="../Images/image00309.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <span class="strong"><strong>Save</strong></span> button:<div class="mediaobject"><img src="../Images/image00310.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Using the <a id="id162" class="indexterm"/>right column menu, navigate to the data sections you want to fill in with the information.</li><li class="listitem">Click on the <span class="strong"><strong>Save</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec71"/>How it works…</h2></div></div></div><p>In steps 1 through 5, we created a new user. With steps 6 and 7, we defined a set of attributes <a id="id163" class="indexterm"/>of the newly created user. This user is active and can already perform activities according to their memberships and roles. To understand all the mechanisms that influence the user's possible behavior in the system, we have to take a deeper look at these attributes.</p><div class="section" title="User as a member of organizations, user groups, and sites"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec21"/>User as a member of organizations, user groups, and sites</h3></div></div></div><p>The first and most important thing to know about users is that they can be members of organizations, user groups, and sites. The range of activities performed by users within each <a id="id164" class="indexterm"/>organization, user group, or site they belong to is<a id="id165" class="indexterm"/> determined by the roles assigned to<a id="id166" class="indexterm"/> them. All the roles must be assigned for each user of an organization and site individually. This means it is possible, for instance, to make a user the administrator of one organization and only a power user of another.</p></div><div class="section" title="User attributes"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec22"/>User attributes</h3></div></div></div><p>Each user in Liferay has a set of attributes that are grouped and can be modified through the user profile form. This form is available after clicking on the <span class="strong"><strong>Edit</strong></span> button from the user's actions list (see, the <span class="emphasis"><em>There's more…</em></span> section).</p><p>All the available <a id="id167" class="indexterm"/>attributes are divided into the following groups:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>USER INFORMATION</strong></span>, which contains the following sections:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>Details</strong></span> section enables us to provide basic user information, such as <span class="strong"><strong>Screen Name</strong></span>, <span class="strong"><strong>Email Address</strong></span>, <span class="strong"><strong>Title</strong></span>, <span class="strong"><strong>First Name</strong></span>, <span class="strong"><strong>Middle Name</strong></span>, <span class="strong"><strong>Last Name</strong></span>, <span class="strong"><strong>Suffix</strong></span>, <span class="strong"><strong>Birthday</strong></span>, <span class="strong"><strong>Job Title</strong></span>, and <span class="strong"><strong>Avatar</strong></span></li><li class="listitem">The <span class="strong"><strong>Password</strong></span> section allows us to set a new password or force a user to change their current password</li><li class="listitem">The <span class="strong"><strong>Organizations</strong></span> section enables us to choose the organizations of which the user is a member</li><li class="listitem">The <span class="strong"><strong>Sites</strong></span> section enables us to choose the sites of which the user is a member</li><li class="listitem">The <span class="strong"><strong>User Groups</strong></span> section enables us to choose user groups of which the user is a member</li><li class="listitem">The <span class="strong"><strong>Roles</strong></span> tab allows us to assign user roles</li><li class="listitem">The <span class="strong"><strong>Personal Site</strong></span> section helps direct the public and private sites to the user</li><li class="listitem">The <span class="strong"><strong>Categorization</strong></span> section provides tags and categories, which can be assigned to a user</li></ul></div></li><li class="listitem"><span class="strong"><strong>IDENTIFICATION</strong></span> allows us to to set additional user information, such as <span class="strong"><strong>Addresses</strong></span>, <span class="strong"><strong>Phone Numbers</strong></span>, <span class="strong"><strong>Additional Email Addresses</strong></span>, <span class="strong"><strong>Websites</strong></span>, <span class="strong"><strong>Instant Messenger</strong></span>, <span class="strong"><strong>Social Network</strong></span>, <span class="strong"><strong>SMS</strong></span>, and <span class="strong"><strong>OpenID</strong></span></li><li class="listitem"><span class="strong"><strong>MISCELLANEOUS</strong></span>, which contains the following sections:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>Announcements</strong></span> section allows us to set the delivery options<a id="id168" class="indexterm"/> for alerts and announcements</li><li class="listitem">The <span class="strong"><strong>Display Settings</strong></span> section covers the <span class="strong"><strong>Language</strong></span>, <span class="strong"><strong>Time Zone</strong></span>, and <span class="strong"><strong>Greeting text</strong></span> options</li><li class="listitem">The <span class="strong"><strong>Comments</strong></span> section allows us to manage the user's comments</li><li class="listitem">The <span class="strong"><strong>Custom Fields</strong></span> section provides a tool to manage values of custom attributes defined for the user</li></ul></div></li></ul></div></div><div class="section" title="User site"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec23"/>User site</h3></div></div></div><p>As it was mentioned earlier, each user in Liferay may have access to different kinds of sites: organization sites, user group sites, and standalone sites. In addition to these, however, users <a id="id169" class="indexterm"/>may also have their own public and private sites, which can be managed by them. The user's public and private sites can be reached from the user's menu located on the dockbar (the <span class="strong"><strong>My Profile</strong></span> and <span class="strong"><strong>My Dashboard</strong></span> links). It is also possible to enter these sites using their addresses, which are <code class="literal">/web/username/home</code> and <code class="literal">/user/username/home</code>, respectively.</p></div><div class="section" title="Customizing users"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec24"/>Customizing users</h3></div></div></div><p>Liferay<a id="id170" class="indexterm"/> gives us a whole bunch of settings in <code class="literal">portal.properties</code> under the <span class="strong"><strong>Users</strong></span> section. If you want to override some of the properties, put them into the <code class="literal">portal-ext.properties</code> file.</p><p>It is possible to deny deleting a user by setting the following property:</p><div class="informalexample"><pre class="programlisting">users.delete=false</pre></div><p>As in the case of organizations, there is a functionality that lets us customize sections on the creation or modification form:</p><div class="informalexample"><pre class="programlisting">users.form.<span class="strong"><strong>add</strong></span>.main=details,Organizations,personal-site
users.form.<span class="strong"><strong>add</strong></span>.identification=
users.form.<span class="strong"><strong>add</strong></span>.miscellaneous=

users.form.<span class="strong"><strong>update</strong></span>.main=details,password,Organizations,sites,user-groups,roles,personal-site,categorization
users.form.<span class="strong"><strong>update</strong></span>.identification=addresses,phone-numbers,additional-email-addresses,websites,instant-messenger,social-network,sms,open-id
users.form.<span class="strong"><strong>update</strong></span>.miscellaneous=announcements,display-settings,comments,custom-fields</pre></div><p>There are<a id="id171" class="indexterm"/> many other properties, but we will not discuss all of them. In <code class="literal">portal.properties</code>, located in the <code class="literal">portal-impl/src</code> folder, under the <span class="strong"><strong>Users</strong></span> section, it is possible to find all the settings, and every line is documented by comment.</p></div></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec72"/>There's more…</h2></div></div></div><p>Each user in the system can be active or inactive. An active user can log into their user account and use all resources available for them within their roles and memberships. Inactive user cannot enter his account, access places and perform activities, which are reserved for authorized and authenticated users only.</p><p>It is worth noticing that active users cannot be deleted. In order to remove a user from Liferay, you need to to deactivate them first.</p><p>To deactivate<a id="id172" class="indexterm"/> a user, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button located near the name of the user.</li><li class="listitem">Go to the <span class="strong"><strong>All Users</strong></span> tab.</li><li class="listitem">Find the active user you want to deactivate.</li><li class="listitem">Click on the <span class="strong"><strong>Deactivate</strong></span> button.</li><li class="listitem">Confirm this action by clicking on the <span class="strong"><strong>Ok</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div><p>To activate<a id="id173" class="indexterm"/> a user, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Go to the <span class="strong"><strong>All Users</strong></span> tab.</li><li class="listitem">Find the inactive user you want to activate.</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button located near the name of the user.</li><li class="listitem">Click on the <span class="strong"><strong>Activate</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div><p>Sometimes, when using the system, users report some irregularities or get a little confused and require assistance. You need to look at the page through the user's eyes. Liferay provides a very useful functionality that allows authorized users to impersonate another user. In<a id="id174" class="indexterm"/> order to use this functionality, perform these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Control Panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button located near the name of the user.</li><li class="listitem">Click on the <span class="strong"><strong>Impersonate user</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec73"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">For more information on actions that users can perform, refer to the <span class="emphasis"><em>Assigning user roles</em></span> recipe from <a class="link" title="Chapter 5. Roles and Permissions" href="part0045.xhtml#aid-1AT9A1">Chapter 5</a>, <span class="emphasis"><em>Roles and Permissions</em></span> and <span class="emphasis"><em>The Single Approver workflow for the user creation process</em></span> recipe from <a class="link" title="Chapter 9. Liferay Workflow Capability" href="part0065.xhtml#aid-1TVKI1">Chapter 9</a>, <span class="emphasis"><em>Liferay Workflow Capability</em></span></li><li class="listitem">For information on how to customize and use user registration form, refer to the <span class="emphasis"><em>Customizing the registration form</em></span> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <span class="emphasis"><em>Authentication and Registration Process</em></span></li><li class="listitem">For more information on managing users, refer to the following recipes<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="emphasis"><em>Exporting users</em></span> recipe from this chapter</li><li class="listitem">The <span class="emphasis"><em>Assigning user roles</em></span> recipe from <a class="link" title="Chapter 5. Roles and Permissions" href="part0045.xhtml#aid-1AT9A1">Chapter 5</a>, <span class="emphasis"><em>Roles and Permissions</em></span></li><li class="listitem">The <span class="emphasis"><em>Customizing the registration form</em></span> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <span class="emphasis"><em>Authentication and Registration Process</em></span></li></ul></div></li></ul></div></div></div>
<div class="section" title="Assigning users to organizations" id="aid-10DJ41"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec28"/>Assigning users to organizations</h1></div></div></div><p>There are<a id="id175" class="indexterm"/> several ways a user can be assigned to an organization. It can be done by editing the user account that has already been created (see the <span class="emphasis"><em>User attributes</em></span> section in <span class="emphasis"><em>Adding a new user</em></span> recipe) or using the <span class="strong"><strong>Assign Users</strong></span> action from the<a id="id176" class="indexterm"/> organization actions menu. In this recipe, we will show you how to assign a user to an organization using the option available in the organization actions menu.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec74"/>Getting ready</h2></div></div></div><p>To go through this recipe, you will need an organization and a user (refer to <span class="emphasis"><em>Managing an organization structure</em></span> and <span class="emphasis"><em>Adding a new user</em></span> recipes from this chapter).</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec75"/>How to do it…</h2></div></div></div><p>In order to assign a user to an organization from the organization menu, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button located near the name of the organization to which you want to assign the user.</li><li class="listitem">Choose<a id="id177" class="indexterm"/> the <span class="strong"><strong>Assign Users</strong></span> option.</li><li class="listitem">Click on<a id="id178" class="indexterm"/> the <span class="strong"><strong>Available</strong></span> tab.</li><li class="listitem">Mark a user or group of users you want to assign.<div class="mediaobject"><img src="../Images/image00311.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <span class="strong"><strong>Update Associations</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec76"/>How it works…</h2></div></div></div><p>Each user in Liferay can be assigned to as many regular organizations as required and to exactly one location. When a user is assigned to the organization, they appear on the list of users of the organization. They become members of the organization and gain access to the organization's public and private pages according to the assigned roles and permissions. As was shown in the previous recipe, while editing the list of assigned users in the organization menu, it is possible to assign multiple users.</p><p>It is worth noting that an administrator can assign the users of the organizations and suborganizations tasks that she or he can manage. To allow any administrator of an organization to be able to assign any user to that organization, set the following property in the <code class="literal">portal-ext.properties</code> file:</p><div class="informalexample"><pre class="programlisting">Organizations.assignment.strict=true</pre></div><p>In many cases, when our organizations have a tree structure, it is not necessary that a member of a child organization has access to the ancestral ones. To disable this structure set the following property:</p><div class="informalexample"><pre class="programlisting">Organizations.membership.strict=true</pre></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec77"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">For<a id="id179" class="indexterm"/> information on how to create user<a id="id180" class="indexterm"/> accounts, refer to<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="emphasis"><em>Adding a new user</em></span> recipe from this chapter</li><li class="listitem"><span class="emphasis"><em>Customizing the registration form</em></span> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <span class="emphasis"><em>Authentication and Registration Process</em></span></li></ul></div></li><li class="listitem">For information on assigning users to user groups, refer to the <span class="emphasis"><em>Assigning users to a user group</em></span> recipe from this chapter</li></ul></div></div></div>
<div class="section" title="Assigning users to a user group" id="aid-11C3M1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec29"/>Assigning users to a user group</h1></div></div></div><p>In addition to being a member of the organization, each user can be a member of one or more user groups. As a member of a user group, a user can profit by getting access to the user group's <a id="id181" class="indexterm"/>sites or other information directed exclusively to its <a id="id182" class="indexterm"/>members, for instance, messages sent by the Announcements portlet. A user becomes a member of the group when they are assigned to it. This assignment can be done by editing the user account that has already been created (see the <span class="emphasis"><em>User attributes</em></span> description in <span class="emphasis"><em>Adding a new user</em></span> recipe) or using the <span class="strong"><strong>Assign Members</strong></span> action from the <span class="strong"><strong>User Groups</strong></span> actions menu. In this recipe, we will show you how to assign a user to a user group using the option available in the <span class="strong"><strong>User Groups</strong></span> actions menu.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec78"/>Getting ready</h2></div></div></div><p>To step through this recipe, first, you have to create a user group and a user (see the <span class="emphasis"><em>Creating a new user group</em></span> and <span class="emphasis"><em>Adding a new user</em></span> recipes).</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec79"/>How to do it…</h2></div></div></div><p>In order to assign a user to a user group from the <span class="strong"><strong>User Groups</strong></span> menu, perform these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>User Groups</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Actions</strong></span> button located near the name of the user group to which you want to assign the user.</li><li class="listitem">Click on the <span class="strong"><strong>Assign Members</strong></span> button.</li><li class="listitem">Click on the <span class="strong"><strong>Available</strong></span> tab.<div class="mediaobject"><img src="../Images/image00312.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Mark a user or group of users you want to assign.</li><li class="listitem">Click on the <span class="strong"><strong>Update Associations</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec80"/>How it works…</h2></div></div></div><p>As was<a id="id183" class="indexterm"/> shown in this recipe, one or more users can be <a id="id184" class="indexterm"/>assigned to a user group by editing the list of assigned users in the user group menu. Each user assigned to a user group becomes a member of this group and gains access to the user group's public and private pages according to assigned roles and permissions.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec81"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">For information on how to create user accounts, refer to<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="emphasis"><em>Adding a new user</em></span> recipe from this chapter</li><li class="listitem">The <span class="emphasis"><em>Customizing the registration form</em></span> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <span class="emphasis"><em>Authentication and Registration Process</em></span></li></ul></div></li><li class="listitem">For information about assigning users to organization, refer to the <span class="emphasis"><em>Assigning users to organizations</em></span> recipe from this chapter</li></ul></div></div></div>
<div class="section" title="Exporting users" id="aid-12AK81"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec30"/>Exporting users</h1></div></div></div><p>Liferay Portal CMS provides a simple export mechanism, which allows us to export a list of all the users <a id="id185" class="indexterm"/>stored in the database or a list of all the users from a specific organization to a file.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec82"/>How to do it…</h2></div></div></div><p>In order to export the list of all users from the database to a file, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control Panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>Export Users</strong></span> button.<div class="mediaobject"><img src="../Images/image00313.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div><p>In order to export the list of all users from the specific organization to a file, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control Panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</li><li class="listitem">Click on the <span class="strong"><strong>All Organizations</strong></span> tab.</li><li class="listitem">Click on the name of an organization to which the users are supposed to be exported.</li><li class="listitem">Click on the <span class="strong"><strong>Export Users</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec83"/>How it works…</h2></div></div></div><p>As mentioned previously, Liferay allows us to export users from a particular organization to a <code class="literal">.csv</code> file. The <code class="literal">.csv</code> file contains a list of user names and corresponding e-mail addresses. It is also possible to export all the users by clicking on the <span class="strong"><strong>Export Users</strong></span> button located on the <span class="strong"><strong>All Users</strong></span> tab. You will find this tab by going to <span class="strong"><strong>Admin</strong></span> | <span class="strong"><strong>Control panel</strong></span> | <span class="strong"><strong>Users</strong></span> | <span class="strong"><strong>Users and Organizations</strong></span>.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec84"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">For information <a id="id186" class="indexterm"/>on how to create user accounts, refer to<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="emphasis"><em>Adding a new user</em></span> recipe from this chapter</li><li class="listitem">The <span class="emphasis"><em>Customizing the registration form</em></span> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <span class="emphasis"><em>Authentication and Registration Process</em></span></li></ul></div></li><li class="listitem">For information on how to assign users to organizations, refer to the <span class="emphasis"><em>Assigning users to organizations</em></span> recipe from this chapter</li></ul></div></div></div></body></html>