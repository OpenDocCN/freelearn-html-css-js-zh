<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Working with a Liferay User / User Group / Organization</h1></div></div></div><p>In this chapter, we will cover the basic functionalities that will allow us to manage the structure and users of the intranet. In this chapter, we will cover the following topics:</p><div><ul class="itemizedlist"><li class="listitem">Managing an organization structure</li><li class="listitem">Creating a new user group</li><li class="listitem">Adding a new user</li><li class="listitem">Assigning users to organizations</li><li class="listitem">Assigning users to user groups</li><li class="listitem">Exporting users</li></ul></div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec24"/>Introduction</h1></div></div></div><p>The first step in creating an intranet, beyond answering the question of who the users will be, is to determine its structure. The structure of the intranet is often a derivative of the organizational structure of the company or institution. Liferay Portal CMS provides several tools that allow mapping of a company's structure in the system. The hierarchy is built by organizations that match functional or localization departments of the company. Each organization represents one department or localization and assembles users who represent employees of these departments. However, sometimes, there are other groups of employees in the company. These groups exist beyond the company's organizational structure, and can be reflected in the system by the User Groups functionality.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec25"/>Managing an organization structure</h1></div></div></div><p>Building an <a id="id142" class="indexterm"/>organizational structure in Liferay resembles the process of managing folders on a computer drive. An organization may have its suborganizations and—except the first level organization—at the same time, it can be a suborganization of another one. This folder-similar mechanism allows you to create a tree structure of organizations.</p><p>Let's imagine<a id="id143" class="indexterm"/> that we are obliged to create an intranet for a software development company. The company's headquarter is located in London. There are also two other offices in Liverpool and Glasgow. The company is divided into finance, marketing, sales, IT, human resources, and legal departments. Employees from Glasgow and Liverpool belong to the IT department.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec62"/>How to do it…</h2></div></div></div><p>In order to create a structure described previously, these are the steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control Panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>Add</strong> button.</li><li class="listitem">Choose the type of organization you want to create (in our example, it will be a regular organization called software development company, but it is also possible to choose a location):<div><img src="img/image00304.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Provide a name for the top-level organization.</li><li class="listitem">Choose the parent organization (if a top-level organization is created, this must be skipped).</li><li class="listitem">Click<a id="id144" class="indexterm"/> on the <strong>Save</strong> button:<div><img src="img/image00305.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <strong>Change</strong> button and upload a file, with a graphic representation of your company (for example, logo).</li><li class="listitem">Use the right column menu to navigate to data sections you want to fill in with the information.</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Go back to the <strong>Users and Organizations</strong> list by clicking on the back icon (the left-arrow icon next to the <strong>Edit Software Development Company</strong> header).</li><li class="listitem">Click on the <strong>Actions</strong> button, located near the name of the newly created organization.</li><li class="listitem">Choose the <strong>Add Regular Organization</strong> option.</li><li class="listitem">Provide a name for the organization (in our example, it is IT).</li><li class="listitem">Click on the <strong>Save</strong> button.</li><li class="listitem">Go back to the <strong>Users and Organizations</strong> list by clicking on the back icon (left-arrow icon next to <strong>Edit IT</strong> header).</li><li class="listitem">Click <a id="id145" class="indexterm"/>on the <strong>Actions</strong> button, located near the name of the newly created organization (in our case, it is IT).</li><li class="listitem">Choose the <strong>Add Location</strong> option.</li><li class="listitem">Provide a name for the organization (for instance, IT Liverpool).</li><li class="listitem">Provide a country.</li><li class="listitem">Provide a region (if available).</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec63"/>How it works…</h2></div></div></div><p>Let's take a look at what we did throughout the previous recipe. In steps 1 through 6, we created a new top-level organization called software development company. With steps 7 through 9, we defined a set of attributes of the newly created organization. Starting from step 11, we created suborganizations: standard organization (IT) and its location (IT Liverpool).</p><div><div><div><div><h3 class="title"><a id="ch03lvl3sec18"/>Creating an organization</h3></div></div></div><p>There are two types of organizations: regular organizations and locations. The regular organization <a id="id146" class="indexterm"/>provides the possibility to create a multilevel structure, each <a id="id147" class="indexterm"/>unit of which can have parent organizations <a id="id148" class="indexterm"/>and suborganizations (there is one exception: the <a id="id149" class="indexterm"/>top-level organization cannot have any parent organizations). The localization is a special kind of organization that allows us to provide some additional data, such as country and region. However, it does not enable us to create suborganizations. When creating the tree of organizations, it is possible to combine regular organizations and locations, where, for instance, the top-level organization will be the regular organization and, both locations and regular organizations will be used as child organizations.</p><div><h3 class="title"><a id="note12"/>Note</h3><p>When creating a new organization, it is very important to choose the organization type wisely, because it is the only organization parameter, which cannot be modified further.</p></div><p>As was described previously, organizations can be arranged in a tree structure. The position of the organization in a tree is determined by the parent organization parameter, which is set by creating a new organization or by editing an existing one. If the parent organization is not set, a top-level organization is always created.</p><p>There are two ways of creating a suborganization. It is possible to add a new organization by using the <strong>Add</strong> button and choosing a parent organization manually. The other way is to go to a specific organization's action menu and choose the <strong>Add Regular Organization</strong> action. While creating a new organization using this option, the parent organization parameter will be set automatically.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec19"/>Setting attributes</h3></div></div></div><p>Similarly, just<a id="id150" class="indexterm"/> like its counterpart in reality, every organization in Liferay has a set of attributes that are grouped and can be modified through the organization profile form. This form is available after clicking on the <strong>Edit</strong> button from the organization's action list (see the <em>There's more…</em> section). All the available attributes are divided into the following groups:</p><div><ul class="itemizedlist"><li class="listitem">The <strong>ORGANIZATION INFORMATION</strong> group, which contains the following sections:<div><ul class="itemizedlist"><li class="listitem">The <strong>Details</strong> section, which allows us to change the organization name, parent organization, country, or region (available for locations only). The name of the organization is the only required organization parameter. It is used by the search mechanism to search for organizations. It is also a part of an URL address of the organization's sites.</li><li class="listitem">The <strong>Organization Sites</strong> section, which allows us to enable the private and public pages of the organization's website.</li><li class="listitem">The <strong>Categorization</strong> section, which provides tags and categories. They can be assigned to an organization (for more information about tags and categories, refer to the <em>Tagging and categorizing content</em> recipe from <a class="link" title="Chapter 8. Search and Content Presentation Tools" href="part0059.xhtml#aid-1O8H61">Chapter 8</a>, <em>Search and Content Presentation Tools</em>).</li></ul></div></li><li class="listitem"><strong>IDENTIFICATION</strong>, which groups the <strong>Addresses</strong>, <strong>Phone Numbers</strong>, <strong>Additional Email Addresses</strong>, <strong>Websites</strong>, and <strong>Services</strong> sections.</li><li class="listitem"><strong>MISCELLANEOUS</strong>, which consists of:<div><ul class="itemizedlist"><li class="listitem">The <strong>Comments</strong> section, which allows us to manage an organization's comments</li><li class="listitem">The <strong>Reminder Queries</strong> section, in which reminder queries for different languages can be set</li><li class="listitem">The <strong>Custom Fields</strong> section, which provides a tool to manage values of custom attributes defined for the organization</li></ul></div></li></ul></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec20"/>Customizing an organization functionalities</h3></div></div></div><p>Liferay provides the possibility to customize an organization's functionality. In the <code class="literal">portal.properties</code> file located in the <code class="literal">portal-impl/src</code> folder, there is a section called <strong>Organizations</strong>. All these settings can be overridden in the <code class="literal">portal-ext.properties</code> file. We mentioned that top-level organization cannot have any parent organizations. If <a id="id151" class="indexterm"/>we look deeper into portal settings, we can dig out the following properties:</p><div><pre class="programlisting">organizations.rootable[regular-Organization]=true
organizations.rootable[location]=false</pre></div><p>These properties determine which type of organization can be created as a root organization.</p><p>In many cases, users want to add a new organization's type. To achieve this goal, it is necessary to set a few properties that describe a new type:</p><div><pre class="programlisting">organizations.types=regular-Organization,location,<strong>my-Organization</strong>
organizations.rootable[<strong>my-organization</strong>]=false
organizations.children.types[<strong>my-organization</strong>]=location
organizations.country.enabled[<strong>my-organization</strong>]=false
organizations.country.required[<strong>my-organization</strong>]=false</pre></div><p>The first property defines a list of available types. The second one denies the possibility to create an organization as a root. The next one specifies a list of types that we can create as children. In our case, this is only the location type. The last two properties turn off the country list in the creation process. This option is useful when the location is not important.</p><p>Another interesting feature is the ability to customize an organization's profile form. It is possible to indicate which sections are available on the creation form and which are available on the modification form. The following properties aggregate this feature:</p><div><pre class="programlisting">organizations.form.<strong>add</strong>.main=details,organization-site
organizations.form.<strong>add</strong>.identification=
organizations.form.<strong>add</strong>.miscellaneous=

organizations.form.<strong>update</strong>.main=details,organization-site,categorization
organizations.form.<strong>update</strong>.identification=addresses,phone-numbers,additional-email-addresses,websites,services
organizations.form.<strong>update</strong>.miscellaneous=comments,reminder-queries,custom-fields</pre></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec64"/>There's more…</h2></div></div></div><p>It is also possible to modify an existing organization and its attributes and to manage its members using actions available in the organization <strong>Actions</strong> menu.</p><p>There are several <a id="id152" class="indexterm"/>possible actions that can be performed on an organization:</p><div><ul class="itemizedlist"><li class="listitem">The <strong>Edit</strong> action allows us to modify the attributes of an organization.</li><li class="listitem">The <strong>Manage Site</strong> action redirects the user to the <strong>Site Settings</strong> section in <strong>Control Panel</strong> and allows us to manage the organization's public and private sites (if the organization site has been already created).</li><li class="listitem">The <strong>Assign Organization Roles</strong> action allows us to set organization roles to members of an organization.</li><li class="listitem">The <strong>Assign Users</strong> action allows us to assign users already existing in the Liferay database to the specific organization.</li><li class="listitem">The <strong>Add User</strong> action allows us to create a new user, who will be automatically assigned to this specific organization.</li><li class="listitem">The <strong>Add Regular Organization </strong>action enables us to create a new child regular organization (the current organization will be automatically set as a parent organization of a new one).</li><li class="listitem">The <strong>Add Location</strong> action enables us to create a new location (the current organization will be automatically set as a parent organization of a new one).</li><li class="listitem">The <strong>Delete</strong> action allows us to remove an organization. While removing an organization, all pages with portlets and content are also removed.</li></ul></div><div><h3 class="title"><a id="note13"/>Note</h3><p>An organization cannot be removed if there are suborganizations or users assigned to it.</p></div><p>In order to edit an organization, assign or add users, create a new suborganization (regular organization or location) or delete an organization. Perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as <a id="id153" class="indexterm"/>an administrator and go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>Actions</strong> button, located near the name of the organization you want to modify:<div><img src="img/image00306.jpeg" alt="There's more…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the<a id="id154" class="indexterm"/> name of the chosen action.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec65"/>See also</h2></div></div></div><p>For information on Organization Sites, refer to the <em>Creating an organization and a stand alone site</em> and the <em>Site configuration</em> recipes from <a class="link" title="Chapter 4. Liferay Site Configuration" href="part0037.xhtml#aid-1394Q1">Chapter 4</a>, <em>Liferay Site Configuration</em>.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec26"/>Creating a new user group</h1></div></div></div><p>Sometimes, in <a id="id155" class="indexterm"/>addition to the hierarchy, within the company, there are other groups of people linked by common interests or occupations, such as people working on a specific project, people occupying the same post, and so on. Such groups in Liferay are represented by user groups. This functionality is similar to the LDAP users group where it is possible to set group permissions. One user can be assigned into many user groups.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec66"/>How to do it…</h2></div></div></div><p>In order to create a new user group, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>User Groups</strong>.</li><li class="listitem">Click on the <strong>Add</strong> button.</li><li class="listitem">Provide <strong>Name</strong> (required) and <strong>Description</strong> of the user group.</li><li class="listitem">Leave<a id="id156" class="indexterm"/> the default values in the <strong>User Group Site</strong> section.<div><img src="img/image00307.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec67"/>How it works…</h2></div></div></div><p>The user groups functionality allows us to create a collection of users and provide them with a public and/or private site, which contain a bunch of tools for collaboration. Unlike the organization, the user group cannot be used to produce a multilevel structure. It enables us to create non-hierarchical groups of users, which can be used by other functionalities. For example, a user group can be used as an additional information targeting tool for the announcements portlet, which presents short messages sent by authorized users (the announcements portlet allows us to direct a message to all users from a specific organization or user group).</p><p>It is also possible to set permissions to a user group and decide which actions can be performed by which roles within this particular user group.</p><p>It is worth <a id="id157" class="indexterm"/>noting that user groups can assemble users who are already members of organizations. This mechanism is often used when, aside from the company organizational structure, there exist other groups of people who need a common place to store data or for information exchange.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec68"/>There's more…</h2></div></div></div><p>It is also possible to modify an existing user group and its attributes and to manage its members using actions available in the user group <strong>Actions</strong> menu.</p><p>There are <a id="id158" class="indexterm"/>several possible actions that can be performed on a user group. They are as follows:</p><div><ul class="itemizedlist"><li class="listitem">The <strong>Edit</strong> action allows us to modify attributes of a user group</li><li class="listitem">The <strong>Permissions</strong> action allows us to decide which roles can assign members of this user group, delete the user group, manage announcements, set permissions, and update or view the user group</li><li class="listitem">The <strong>Manage Site Pages</strong> action redirects the user to the site settings section in <strong>Control Panel</strong> and allows us to manage the user group's public and private sites</li><li class="listitem">The <strong>Go to the Site's Public Pages</strong> action opens the user group's public pages in a new window (if any public pages of User Group Site has been created)</li><li class="listitem">The <strong>Go to the Site's Private Pages</strong> action opens the user group's private pages in a new window (if any public pages of User Group Site has been created)</li><li class="listitem">The <strong>Assign Members</strong> action allows us to assign users already existing in the Liferay database to this specific user group</li><li class="listitem">The <strong>Delete</strong> action allows us to delete a user group</li></ul></div><div><h3 class="title"><a id="note14"/>Note</h3><p>A user group cannot be removed if there are users assigned to it.</p></div><p>In order to edit a user group, set permissions, assign members, manage site pages, or delete a user group, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>User Groups</strong>.</li><li class="listitem">Click on the <strong>Actions</strong> button, located near the name of the user group you want to modify:<div><img src="img/image00308.jpeg" alt="There's more…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on<a id="id159" class="indexterm"/> the name of the chosen action.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec69"/>See also</h2></div></div></div><p>For information on user group sites, refer to the <em>Creating an organization and a stand alone site</em> and the <em>Site configuration</em> recipes from <a class="link" title="Chapter 4. Liferay Site Configuration" href="part0037.xhtml#aid-1394Q1">Chapter 4</a>, <em>Liferay Site Configuration</em>.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec27"/>Adding a new user</h1></div></div></div><p>Each system is created for users. Liferay Portal CMS provides a few different ways of adding users to <a id="id160" class="indexterm"/>the system that can be enabled or disabled depending on the requirements, as seen in <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <em>Authentication and Registration Process</em>. The first way is to enable users by creating their own accounts via the <strong>Create Account</strong> form. This functionality allows all users who can enter the site containing the form to register and gain access to the designated content of the website. In this case, the system automatically assigns the default user account parameters, which indicate the range of activities that may be carried by them in the system. The second solution (which we presented in this recipe) is to reserve the users' account creation to the administrators, who will decide what parameters should be assigned to each account.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec70"/>How to do it…</h2></div></div></div><p>To add a new user, you need to follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>Add</strong> button.</li><li class="listitem">Choose the <strong>User</strong> option.</li><li class="listitem">Fill in the <a id="id161" class="indexterm"/>form by providing the user's details in the <strong>Email Address (Required)</strong>, <strong>Title</strong>, <strong>First Name (Required)</strong>, <strong>Middle Name</strong>, <strong>Last Name</strong>, <strong>Suffix</strong>, <strong>Birthday</strong>, and <strong>Job Title</strong> fields (if the <strong>Autogenerated User Screen Names</strong> option in the <strong>Portal Settings</strong> | <strong>Users</strong> section is disabled, the screen name field will be available):<div><img src="img/image00309.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <strong>Save</strong> button:<div><img src="img/image00310.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Using the <a id="id162" class="indexterm"/>right column menu, navigate to the data sections you want to fill in with the information.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec71"/>How it works…</h2></div></div></div><p>In steps 1 through 5, we created a new user. With steps 6 and 7, we defined a set of attributes <a id="id163" class="indexterm"/>of the newly created user. This user is active and can already perform activities according to their memberships and roles. To understand all the mechanisms that influence the user's possible behavior in the system, we have to take a deeper look at these attributes.</p><div><div><div><div><h3 class="title"><a id="ch03lvl3sec21"/>User as a member of organizations, user groups, and sites</h3></div></div></div><p>The first and most important thing to know about users is that they can be members of organizations, user groups, and sites. The range of activities performed by users within each <a id="id164" class="indexterm"/>organization, user group, or site they belong to is<a id="id165" class="indexterm"/> determined by the roles assigned to<a id="id166" class="indexterm"/> them. All the roles must be assigned for each user of an organization and site individually. This means it is possible, for instance, to make a user the administrator of one organization and only a power user of another.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec22"/>User attributes</h3></div></div></div><p>Each user in Liferay has a set of attributes that are grouped and can be modified through the user profile form. This form is available after clicking on the <strong>Edit</strong> button from the user's actions list (see, the <em>There's more…</em> section).</p><p>All the available <a id="id167" class="indexterm"/>attributes are divided into the following groups:</p><div><ul class="itemizedlist"><li class="listitem"><strong>USER INFORMATION</strong>, which contains the following sections:<div><ul class="itemizedlist"><li class="listitem">The <strong>Details</strong> section enables us to provide basic user information, such as <strong>Screen Name</strong>, <strong>Email Address</strong>, <strong>Title</strong>, <strong>First Name</strong>, <strong>Middle Name</strong>, <strong>Last Name</strong>, <strong>Suffix</strong>, <strong>Birthday</strong>, <strong>Job Title</strong>, and <strong>Avatar</strong></li><li class="listitem">The <strong>Password</strong> section allows us to set a new password or force a user to change their current password</li><li class="listitem">The <strong>Organizations</strong> section enables us to choose the organizations of which the user is a member</li><li class="listitem">The <strong>Sites</strong> section enables us to choose the sites of which the user is a member</li><li class="listitem">The <strong>User Groups</strong> section enables us to choose user groups of which the user is a member</li><li class="listitem">The <strong>Roles</strong> tab allows us to assign user roles</li><li class="listitem">The <strong>Personal Site</strong> section helps direct the public and private sites to the user</li><li class="listitem">The <strong>Categorization</strong> section provides tags and categories, which can be assigned to a user</li></ul></div></li><li class="listitem"><strong>IDENTIFICATION</strong> allows us to to set additional user information, such as <strong>Addresses</strong>, <strong>Phone Numbers</strong>, <strong>Additional Email Addresses</strong>, <strong>Websites</strong>, <strong>Instant Messenger</strong>, <strong>Social Network</strong>, <strong>SMS</strong>, and <strong>OpenID</strong></li><li class="listitem"><strong>MISCELLANEOUS</strong>, which contains the following sections:<div><ul class="itemizedlist"><li class="listitem">The <strong>Announcements</strong> section allows us to set the delivery options<a id="id168" class="indexterm"/> for alerts and announcements</li><li class="listitem">The <strong>Display Settings</strong> section covers the <strong>Language</strong>, <strong>Time Zone</strong>, and <strong>Greeting text</strong> options</li><li class="listitem">The <strong>Comments</strong> section allows us to manage the user's comments</li><li class="listitem">The <strong>Custom Fields</strong> section provides a tool to manage values of custom attributes defined for the user</li></ul></div></li></ul></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec23"/>User site</h3></div></div></div><p>As it was mentioned earlier, each user in Liferay may have access to different kinds of sites: organization sites, user group sites, and standalone sites. In addition to these, however, users <a id="id169" class="indexterm"/>may also have their own public and private sites, which can be managed by them. The user's public and private sites can be reached from the user's menu located on the dockbar (the <strong>My Profile</strong> and <strong>My Dashboard</strong> links). It is also possible to enter these sites using their addresses, which are <code class="literal">/web/username/home</code> and <code class="literal">/user/username/home</code>, respectively.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec24"/>Customizing users</h3></div></div></div><p>Liferay<a id="id170" class="indexterm"/> gives us a whole bunch of settings in <code class="literal">portal.properties</code> under the <strong>Users</strong> section. If you want to override some of the properties, put them into the <code class="literal">portal-ext.properties</code> file.</p><p>It is possible to deny deleting a user by setting the following property:</p><div><pre class="programlisting">users.delete=false</pre></div><p>As in the case of organizations, there is a functionality that lets us customize sections on the creation or modification form:</p><div><pre class="programlisting">users.form.<strong>add</strong>.main=details,Organizations,personal-site
users.form.<strong>add</strong>.identification=
users.form.<strong>add</strong>.miscellaneous=

users.form.<strong>update</strong>.main=details,password,Organizations,sites,user-groups,roles,personal-site,categorization
users.form.<strong>update</strong>.identification=addresses,phone-numbers,additional-email-addresses,websites,instant-messenger,social-network,sms,open-id
users.form.<strong>update</strong>.miscellaneous=announcements,display-settings,comments,custom-fields</pre></div><p>There are<a id="id171" class="indexterm"/> many other properties, but we will not discuss all of them. In <code class="literal">portal.properties</code>, located in the <code class="literal">portal-impl/src</code> folder, under the <strong>Users</strong> section, it is possible to find all the settings, and every line is documented by comment.</p></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec72"/>There's more…</h2></div></div></div><p>Each user in the system can be active or inactive. An active user can log into their user account and use all resources available for them within their roles and memberships. Inactive user cannot enter his account, access places and perform activities, which are reserved for authorized and authenticated users only.</p><p>It is worth noticing that active users cannot be deleted. In order to remove a user from Liferay, you need to to deactivate them first.</p><p>To deactivate<a id="id172" class="indexterm"/> a user, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>Actions</strong> button located near the name of the user.</li><li class="listitem">Go to the <strong>All Users</strong> tab.</li><li class="listitem">Find the active user you want to deactivate.</li><li class="listitem">Click on the <strong>Deactivate</strong> button.</li><li class="listitem">Confirm this action by clicking on the <strong>Ok</strong> button.</li></ol><div></div><p>To activate<a id="id173" class="indexterm"/> a user, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Go to the <strong>All Users</strong> tab.</li><li class="listitem">Find the inactive user you want to activate.</li><li class="listitem">Click on the <strong>Actions</strong> button located near the name of the user.</li><li class="listitem">Click on the <strong>Activate</strong> button.</li></ol><div></div><p>Sometimes, when using the system, users report some irregularities or get a little confused and require assistance. You need to look at the page through the user's eyes. Liferay provides a very useful functionality that allows authorized users to impersonate another user. In<a id="id174" class="indexterm"/> order to use this functionality, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Control Panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>Actions</strong> button located near the name of the user.</li><li class="listitem">Click on the <strong>Impersonate user</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec73"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem">For more information on actions that users can perform, refer to the <em>Assigning user roles</em> recipe from <a class="link" title="Chapter 5. Roles and Permissions" href="part0045.xhtml#aid-1AT9A1">Chapter 5</a>, <em>Roles and Permissions</em> and <em>The Single Approver workflow for the user creation process</em> recipe from <a class="link" title="Chapter 9. Liferay Workflow Capability" href="part0065.xhtml#aid-1TVKI1">Chapter 9</a>, <em>Liferay Workflow Capability</em></li><li class="listitem">For information on how to customize and use user registration form, refer to the <em>Customizing the registration form</em> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <em>Authentication and Registration Process</em></li><li class="listitem">For more information on managing users, refer to the following recipes<div><ul class="itemizedlist"><li class="listitem">The <em>Exporting users</em> recipe from this chapter</li><li class="listitem">The <em>Assigning user roles</em> recipe from <a class="link" title="Chapter 5. Roles and Permissions" href="part0045.xhtml#aid-1AT9A1">Chapter 5</a>, <em>Roles and Permissions</em></li><li class="listitem">The <em>Customizing the registration form</em> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <em>Authentication and Registration Process</em></li></ul></div></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec28"/>Assigning users to organizations</h1></div></div></div><p>There are<a id="id175" class="indexterm"/> several ways a user can be assigned to an organization. It can be done by editing the user account that has already been created (see the <em>User attributes</em> section in <em>Adding a new user</em> recipe) or using the <strong>Assign Users</strong> action from the<a id="id176" class="indexterm"/> organization actions menu. In this recipe, we will show you how to assign a user to an organization using the option available in the organization actions menu.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec74"/>Getting ready</h2></div></div></div><p>To go through this recipe, you will need an organization and a user (refer to <em>Managing an organization structure</em> and <em>Adding a new user</em> recipes from this chapter).</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec75"/>How to do it…</h2></div></div></div><p>In order to assign a user to an organization from the organization menu, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>Actions</strong> button located near the name of the organization to which you want to assign the user.</li><li class="listitem">Choose<a id="id177" class="indexterm"/> the <strong>Assign Users</strong> option.</li><li class="listitem">Click on<a id="id178" class="indexterm"/> the <strong>Available</strong> tab.</li><li class="listitem">Mark a user or group of users you want to assign.<div><img src="img/image00311.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the <strong>Update Associations</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec76"/>How it works…</h2></div></div></div><p>Each user in Liferay can be assigned to as many regular organizations as required and to exactly one location. When a user is assigned to the organization, they appear on the list of users of the organization. They become members of the organization and gain access to the organization's public and private pages according to the assigned roles and permissions. As was shown in the previous recipe, while editing the list of assigned users in the organization menu, it is possible to assign multiple users.</p><p>It is worth noting that an administrator can assign the users of the organizations and suborganizations tasks that she or he can manage. To allow any administrator of an organization to be able to assign any user to that organization, set the following property in the <code class="literal">portal-ext.properties</code> file:</p><div><pre class="programlisting">Organizations.assignment.strict=true</pre></div><p>In many cases, when our organizations have a tree structure, it is not necessary that a member of a child organization has access to the ancestral ones. To disable this structure set the following property:</p><div><pre class="programlisting">Organizations.membership.strict=true</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec77"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem">For<a id="id179" class="indexterm"/> information on how to create user<a id="id180" class="indexterm"/> accounts, refer to<div><ul class="itemizedlist"><li class="listitem"><em>Adding a new user</em> recipe from this chapter</li><li class="listitem"><em>Customizing the registration form</em> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <em>Authentication and Registration Process</em></li></ul></div></li><li class="listitem">For information on assigning users to user groups, refer to the <em>Assigning users to a user group</em> recipe from this chapter</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec29"/>Assigning users to a user group</h1></div></div></div><p>In addition to being a member of the organization, each user can be a member of one or more user groups. As a member of a user group, a user can profit by getting access to the user group's <a id="id181" class="indexterm"/>sites or other information directed exclusively to its <a id="id182" class="indexterm"/>members, for instance, messages sent by the Announcements portlet. A user becomes a member of the group when they are assigned to it. This assignment can be done by editing the user account that has already been created (see the <em>User attributes</em> description in <em>Adding a new user</em> recipe) or using the <strong>Assign Members</strong> action from the <strong>User Groups</strong> actions menu. In this recipe, we will show you how to assign a user to a user group using the option available in the <strong>User Groups</strong> actions menu.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec78"/>Getting ready</h2></div></div></div><p>To step through this recipe, first, you have to create a user group and a user (see the <em>Creating a new user group</em> and <em>Adding a new user</em> recipes).</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec79"/>How to do it…</h2></div></div></div><p>In order to assign a user to a user group from the <strong>User Groups</strong> menu, perform these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>User Groups</strong>.</li><li class="listitem">Click on the <strong>Actions</strong> button located near the name of the user group to which you want to assign the user.</li><li class="listitem">Click on the <strong>Assign Members</strong> button.</li><li class="listitem">Click on the <strong>Available</strong> tab.<div><img src="img/image00312.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Mark a user or group of users you want to assign.</li><li class="listitem">Click on the <strong>Update Associations</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec80"/>How it works…</h2></div></div></div><p>As was<a id="id183" class="indexterm"/> shown in this recipe, one or more users can be <a id="id184" class="indexterm"/>assigned to a user group by editing the list of assigned users in the user group menu. Each user assigned to a user group becomes a member of this group and gains access to the user group's public and private pages according to assigned roles and permissions.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec81"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem">For information on how to create user accounts, refer to<div><ul class="itemizedlist"><li class="listitem">The <em>Adding a new user</em> recipe from this chapter</li><li class="listitem">The <em>Customizing the registration form</em> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <em>Authentication and Registration Process</em></li></ul></div></li><li class="listitem">For information about assigning users to organization, refer to the <em>Assigning users to organizations</em> recipe from this chapter</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec30"/>Exporting users</h1></div></div></div><p>Liferay Portal CMS provides a simple export mechanism, which allows us to export a list of all the users <a id="id185" class="indexterm"/>stored in the database or a list of all the users from a specific organization to a file.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec82"/>How to do it…</h2></div></div></div><p>In order to export the list of all users from the database to a file, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control Panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>Export Users</strong> button.<div><img src="img/image00313.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>In order to export the list of all users from the specific organization to a file, follow these steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Log in as an administrator and go to <strong>Admin</strong> | <strong>Control Panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</li><li class="listitem">Click on the <strong>All Organizations</strong> tab.</li><li class="listitem">Click on the name of an organization to which the users are supposed to be exported.</li><li class="listitem">Click on the <strong>Export Users</strong> button.</li></ol><div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec83"/>How it works…</h2></div></div></div><p>As mentioned previously, Liferay allows us to export users from a particular organization to a <code class="literal">.csv</code> file. The <code class="literal">.csv</code> file contains a list of user names and corresponding e-mail addresses. It is also possible to export all the users by clicking on the <strong>Export Users</strong> button located on the <strong>All Users</strong> tab. You will find this tab by going to <strong>Admin</strong> | <strong>Control panel</strong> | <strong>Users</strong> | <strong>Users and Organizations</strong>.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec84"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem">For information <a id="id186" class="indexterm"/>on how to create user accounts, refer to<div><ul class="itemizedlist"><li class="listitem">The <em>Adding a new user</em> recipe from this chapter</li><li class="listitem">The <em>Customizing the registration form</em> recipe from <a class="link" title="Chapter 2. Authentication and Registration Process" href="part0020.xhtml#aid-J2B81">Chapter 2</a>, <em>Authentication and Registration Process</em></li></ul></div></li><li class="listitem">For information on how to assign users to organizations, refer to the <em>Assigning users to organizations</em> recipe from this chapter</li></ul></div></div></div></body></html>