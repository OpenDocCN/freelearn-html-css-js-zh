<html><head></head><body>
<div id="_idContainer028">
<h1 class="chapter-number" id="_idParaDest-125"><a id="_idTextAnchor125"/><span class="koboSpan" id="kobo.1.1">10</span></h1>
<h1 id="_idParaDest-126"><a id="_idTextAnchor126"/><span class="koboSpan" id="kobo.2.1">Managing Static Assets</span></h1>
<p><span class="koboSpan" id="kobo.3.1">When it comes to managing static assets, SvelteKit has little to do with the process. </span><span class="koboSpan" id="kobo.3.2">In fact, the entire process is handed over to the bundling tool Vite. </span><span class="koboSpan" id="kobo.3.3">By leveraging Vite for the management of static assets, we as developers don’t have to learn yet another framework-specific strategy. </span><span class="koboSpan" id="kobo.3.4">Instead, we can lean on Vite’s highly performant bundling and build processes. </span><span class="koboSpan" id="kobo.3.5">Because Vite automatically manages imported assets, we don’t have to worry about hashing files for caches. </span><span class="koboSpan" id="kobo.3.6">In this chapter, we’ll look at how we can leverage Vite to manage static assets such as images, fonts, audio, video, and CSS files. </span><span class="koboSpan" id="kobo.3.7">Once we examine </span><em class="italic"><span class="koboSpan" id="kobo.4.1">how</span></em><span class="koboSpan" id="kobo.5.1"> this is done, we’ll discuss some of the finer points surrounding </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">static assets.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">This chapter will be divided into the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">following sections:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.9.1">Importing Assets</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.10.1">Additional Information</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.11.1">By the time we’re done, we’ll have a firm grasp of the best practices to use when including files that can be served </span><em class="italic"><span class="koboSpan" id="kobo.12.1">as is</span></em><span class="koboSpan" id="kobo.13.1"> within </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">SvelteKit applications.</span></span></p>
<h1 id="_idParaDest-127"><a id="_idTextAnchor127"/><span class="koboSpan" id="kobo.15.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.16.1">The complete code for this chapter is available on GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">at: </span></span><a href="https://github.com/PacktPublishing/SvelteKit-Up-and-Running/tree/main/chapters/chapter10"><span class="No-Break"><span class="koboSpan" id="kobo.18.1">https://github.com/PacktPublishing/SvelteKit-Up-and-Running/tree/main/chapters/chapter10</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.19.1">.</span></span></p>
<h1 id="_idParaDest-128"><a id="_idTextAnchor128"/><span class="koboSpan" id="kobo.20.1">Importing Assets</span></h1>
<p><span class="koboSpan" id="kobo.21.1">If you have worked in web development</span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.22.1"> for the past decade, then you’ll remember a time when</span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.23.1"> styles were written either inline or in a </span><strong class="bold"><span class="koboSpan" id="kobo.24.1">Cascading Style Sheet</span></strong><span class="koboSpan" id="kobo.25.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.26.1">CSS</span></strong><span class="koboSpan" id="kobo.27.1">). </span><span class="koboSpan" id="kobo.27.2">These </span><strong class="bold"><span class="koboSpan" id="kobo.28.1">CSS</span></strong><span class="koboSpan" id="kobo.29.1"> files are helpful for creating a consistent look and feel for an application. </span><span class="koboSpan" id="kobo.29.2">Of course, their centralized nature comes with its own drawbacks. </span><span class="koboSpan" id="kobo.29.3">They often become large and difficult to navigate, which can lead to the inclusion of unused style rules. </span><span class="koboSpan" id="kobo.29.4">When precious milliseconds can mean the difference between converting a user or losing a sale, it’s important not to ship unused assets to clients. </span><span class="koboSpan" id="kobo.29.5">Besides, if we’re building a web application with SvelteKit, we really should use the Svelte approach and keep styles isolated within each component. </span><span class="koboSpan" id="kobo.29.6">But there are times when it’s useful to keep a style sheet that applies some global styles. </span><span class="koboSpan" id="kobo.29.7">For instance, imagine having to apply a specific style to each and every paragraph element. </span><span class="koboSpan" id="kobo.29.8">Incorporating the same simple style rule into every component across the application could lead to repetitive code. </span><span class="koboSpan" id="kobo.29.9">There may even be instances where we forget to include a rule, leading</span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.30.1"> to inconsistent styles across</span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.31.1"> the app. </span><span class="koboSpan" id="kobo.31.2">And while projects such as </span><strong class="bold"><span class="koboSpan" id="kobo.32.1">Tailwind CSS</span></strong><span class="koboSpan" id="kobo.33.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.34.1">Bootstrap</span></strong><span class="koboSpan" id="kobo.35.1"> are wonderful, they may not be appropriate for every project, which is why we’re going to cover how to include a global style sheet in our </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">SvelteKit application.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">To begin, we’ll need some styles. </span><span class="koboSpan" id="kobo.37.2">Keep</span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.38.1"> in mind that these styles will apply to the entirety of the application. </span><span class="koboSpan" id="kobo.38.2">Normally, when creating styles within Svelte components, those styles are isolated to that specific component, meaning they are not applied to parent or child components. </span><span class="koboSpan" id="kobo.38.3">Many modern browsers apply their own default styles to HTML elements, and so, to unify the experience of an application, it’s common practice to create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.39.1">reset.css</span></strong><span class="koboSpan" id="kobo.40.1"> file. </span><span class="koboSpan" id="kobo.40.2">This file ensures the experience is consistent across different browsers by resetting the styles applied by browsers of common elements to something predictable. </span><span class="koboSpan" id="kobo.40.3">For our example, we’ll use</span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.41.1"> a slightly modified version of the concise yet thorough </span><strong class="bold"><span class="koboSpan" id="kobo.42.1">Custom CSS Reset</span></strong><span class="koboSpan" id="kobo.43.1"> by </span><em class="italic"><span class="koboSpan" id="kobo.44.1">Josh W. </span><span class="koboSpan" id="kobo.44.2">Comeau</span></em><span class="koboSpan" id="kobo.45.1">. </span><span class="koboSpan" id="kobo.45.2">See the resources at the end of this chapter for links to the article explaining exactly how </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">it works:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.47.1">src/reset.css</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.48.1">
/* https://www.joshwcomeau.com/css/custom-css-reset/ */
*, *::before, *::after {
  box-sizing: border-box;
}
* {
  margin: 0;
}
html, body {
  height: 100%;
  font-family: sans-serif;
}
body {
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}
img, picture, video, canvas, svg {
  display: block;
  max-width: 100%;
}
input, button, textarea, select {
  font: inherit;
}
p, h1, h2, h3, h4, h5, h6 {
  overflow-wrap: break-word;
}</span></pre>
<p><span class="koboSpan" id="kobo.49.1">In essence, the rules of this CSS file are setting more sane and predictable default styles for various HTML elements. </span><span class="koboSpan" id="kobo.49.2">For instance, </span><strong class="source-inline"><span class="koboSpan" id="kobo.50.1">box-sizing</span></strong><span class="koboSpan" id="kobo.51.1"> is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.52.1">border-box</span></strong><span class="koboSpan" id="kobo.53.1">, which applies to all elements, as well as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.54.1">::before</span></strong><span class="koboSpan" id="kobo.55.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.56.1">::after</span></strong><span class="koboSpan" id="kobo.57.1"> pseudo-elements. </span><span class="koboSpan" id="kobo.57.2">This rule means that the padding of elements will be included when calculating that element’s width. </span><span class="koboSpan" id="kobo.57.3">These CSS rules</span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.58.1"> allow a consistent and reliable experience across browsers. </span><span class="koboSpan" id="kobo.58.2">Of course, we’re free to make any additions to this CSS. </span><span class="koboSpan" id="kobo.58.3">To make our changes slightly more noticeable, we’ve also set </span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">font-family: sans-serif;</span></strong><span class="koboSpan" id="kobo.60.1"> on both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">html</span></strong><span class="koboSpan" id="kobo.62.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">body</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.64.1"> elements.</span></span></p>
<p><span class="koboSpan" id="kobo.65.1">To include this CSS in our application, we’ll open </span><strong class="source-inline"><span class="koboSpan" id="kobo.66.1">src/routes/+layout.svelte</span></strong><span class="koboSpan" id="kobo.67.1"> and import it just as we would a JS module. </span><span class="koboSpan" id="kobo.67.2">If you remember back to </span><a href="B19024_02_Final_AM.xhtml#_idTextAnchor032"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.68.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.69.1">, we used the same method to import an </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">image path!</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.71.1">src/routes/+layout.svelte</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.72.1">
&lt;script&gt;
  import '/src/reset.css';
  import Nav from '$lib/Nav.svelte';
  import Notify from '$lib/Notify.svelte';
  export let data;
&lt;/script&gt;
...</span></pre>
<p><span class="koboSpan" id="kobo.73.1">Noticeably, the only change we need to make in this file is the very first line where we import </span><strong class="source-inline"><span class="koboSpan" id="kobo.74.1">reset.css</span></strong><span class="koboSpan" id="kobo.75.1">. </span><span class="koboSpan" id="kobo.75.2">The remaining code has been omitted from the file for the sake of brevity. </span><span class="koboSpan" id="kobo.75.3">After importing the CSS file, notice that our styles are immediately applied. </span><span class="koboSpan" id="kobo.75.4">We don’t need to create </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">&lt;link&gt;</span></strong><span class="koboSpan" id="kobo.77.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">&lt;style&gt;</span></strong><span class="koboSpan" id="kobo.79.1"> tags as Vite recognizes the style sheet for what it is and automatically applies it for us. </span><span class="koboSpan" id="kobo.79.2">Conveniently, the file import path can be relative or absolute as Vite makes no distinction between </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">the two.</span></span></p>
<p><span class="koboSpan" id="kobo.81.1">To highlight the benefits of importing</span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.82.1"> a stylesheet with this method, let’s compare it with another method for including global style sheets. </span><span class="koboSpan" id="kobo.82.2">This method was applied to pre-1.0 releases of SvelteKit and worked by manually adding a </span><strong class="source-inline"><span class="koboSpan" id="kobo.83.1">&lt;link&gt;</span></strong><span class="koboSpan" id="kobo.84.1"> tag to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.85.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.86.1"> section of </span><strong class="source-inline"><span class="koboSpan" id="kobo.87.1">src/app.html</span></strong><span class="koboSpan" id="kobo.88.1">. </span><span class="koboSpan" id="kobo.88.2">It then referenced a file within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.89.1">static/</span></strong><span class="koboSpan" id="kobo.90.1"> directory using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.91.1">%sveltekit.assets%</span></strong><span class="koboSpan" id="kobo.92.1"> placeholder. </span><span class="koboSpan" id="kobo.92.2">This method is ill-advised but let’s analyze it to consider </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">its faults:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.94.1">src/app.html</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.95.1">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;link rel="icon" href="%sveltekit.assets%/favicon.png" /&gt;
    &lt;meta name="viewport" content="width=device-width" /&gt;
    &lt;link rel="stylesheet" href="%sveltekit.assets%/global.css" /&gt;
      %sveltekit.head%
  &lt;/head&gt;
  &lt;body data-sveltekit-preload-data="hover"&gt;
    &lt;div style="display: contents"&gt;%sveltekit.body%&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</span></pre>
<p><span class="koboSpan" id="kobo.96.1">As we can see, this method includes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1">static/global.css</span></strong><span class="koboSpan" id="kobo.98.1"> file inside the head tag of </span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">src/app.html</span></strong><span class="koboSpan" id="kobo.100.1">, the application entry point. </span><span class="koboSpan" id="kobo.100.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.101.1">app.html</span></strong><span class="koboSpan" id="kobo.102.1"> file works as scaffolding for the rest of the application to build off of, so it stands to reason that we could include any extraneous scripts or external assets here, just as the favicon is included. </span><span class="koboSpan" id="kobo.102.2">This method relies on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">%sveltekit.assets%</span></strong><span class="koboSpan" id="kobo.104.1"> placeholder to include the CSS file from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">static/</span></strong><span class="koboSpan" id="kobo.106.1"> directory. </span><span class="koboSpan" id="kobo.106.2">However, this method fails to consider Vite’s HMR features. </span><span class="koboSpan" id="kobo.106.3">Whenever changes are made to </span><strong class="source-inline"><span class="koboSpan" id="kobo.107.1">static/global.css</span></strong><span class="koboSpan" id="kobo.108.1">, the entire development server will need to be restarted to reflect those changes as Vite does not process any of the files included in the static assets. </span><span class="koboSpan" id="kobo.108.2">Also consider the common scenario of applying minification to </span><strong class="source-inline"><span class="koboSpan" id="kobo.109.1">.css</span></strong><span class="koboSpan" id="kobo.110.1"> and preprocessing to </span><strong class="source-inline"><span class="koboSpan" id="kobo.111.1">.scss</span></strong><span class="koboSpan" id="kobo.112.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.113.1">.sass</span></strong><span class="koboSpan" id="kobo.114.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.115.1">.less</span></strong><span class="koboSpan" id="kobo.116.1"> files. </span><span class="koboSpan" id="kobo.116.2">In each of these instances, we would need Vite to take a more hands-on approach than it does for files included from SvelteKit’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.117.1">static/</span></strong><span class="koboSpan" id="kobo.118.1"> directory. </span><span class="koboSpan" id="kobo.118.2">And because Vite can manage cached files by appending hashes to the filenames of static assets, it is clear that importing files just as we would import a JS module is in our </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">best interest.</span></span></p>
<p><span class="koboSpan" id="kobo.120.1">In </span><a href="B19024_02_Final_AM.xhtml#_idTextAnchor032"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.121.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.122.1">, we saw how we could import</span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.123.1"> an image URL. </span><span class="koboSpan" id="kobo.123.2">We’ve now also seen how Vite allows us to import a global CSS file directly into our Svelte components. </span><span class="koboSpan" id="kobo.123.3">Now that we’ve shown how to best utilize static assets dynamically with our applications, let’s discuss some more of the details surrounding </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">this process.</span></span></p>
<h1 id="_idParaDest-129"><a id="_idTextAnchor129"/><span class="koboSpan" id="kobo.125.1">Additional Information</span></h1>
<p><span class="koboSpan" id="kobo.126.1">We now know </span><em class="italic"><span class="koboSpan" id="kobo.127.1">how</span></em><span class="koboSpan" id="kobo.128.1"> we can import static files, but there are a few details to keep in mind when doing so. </span><span class="koboSpan" id="kobo.128.2">Here’s a breakdown of the various items we still need </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">to cover:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.130.1">Images </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">versus Styles</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.132.1">Customizing Imports</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.133.1">File Paths</span></span></li>
<li><span class="koboSpan" id="kobo.134.1">SvelteKit </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">Configuration Options</span></span></li>
<li><span class="koboSpan" id="kobo.136.1">Vite </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">Configuration Options</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.138.1">Now let’s go over some important information about what went on behind the scenes with each of </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">our imports.</span></span></p>
<h2 id="_idParaDest-130"><a id="_idTextAnchor130"/><span class="koboSpan" id="kobo.140.1">Images versus Styles</span></h2>
<p><span class="koboSpan" id="kobo.141.1">When we imported an image in </span><a href="B19024_02_Final_AM.xhtml#_idTextAnchor032"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.142.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.143.1">, we received the URL, which</span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.144.1"> we then referenced</span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.145.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">src</span></strong><span class="koboSpan" id="kobo.147.1"> attribute of an </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">&lt;img&gt;</span></strong><span class="koboSpan" id="kobo.149.1"> tag. </span><span class="koboSpan" id="kobo.149.2">When we imported the CSS file, we only needed to import it to apply the styles. </span><span class="koboSpan" id="kobo.149.3">This is because Vite is pre-configured to automatically inject the styles from CSS files into the component performing the import. </span><span class="koboSpan" id="kobo.149.4">Hence why the import was performed in the root </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">+layout.svelte</span></strong><span class="koboSpan" id="kobo.151.1"> file. </span><span class="koboSpan" id="kobo.151.2">Vite also supports CSS </span><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">@import</span></strong><span class="koboSpan" id="kobo.153.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.154.1">url()</span></strong><span class="koboSpan" id="kobo.155.1"> statements as well as CSS modules. </span><span class="koboSpan" id="kobo.155.2">CSS modules can be useful for importing style rules as objects within code whereas </span><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">@import</span></strong><span class="koboSpan" id="kobo.157.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">url()</span></strong><span class="koboSpan" id="kobo.159.1"> allow developers to build a central CSS file that can reference smaller CSS files located elsewhere. </span><span class="koboSpan" id="kobo.159.2">When importing a CSS file, no other action needs to be taken other than the import. </span><span class="koboSpan" id="kobo.159.3">When importing other media such as fonts, audio, or video files, we’ll need to set the imported asset URL as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">src</span></strong><span class="koboSpan" id="kobo.161.1"> attribute on the appropriate </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">HTML element.</span></span></p>
<h2 id="_idParaDest-131"><a id="_idTextAnchor131"/><span class="koboSpan" id="kobo.163.1">Customizing Imports</span></h2>
<p><span class="koboSpan" id="kobo.164.1">When importing static assets</span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.165.1"> from Vite, we can customize how they are imported by appending the appropriate suffix to the file import names. </span><span class="koboSpan" id="kobo.165.2">For instance, to import a file as a string, we can append </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">?raw</span></strong><span class="koboSpan" id="kobo.167.1"> to the filename. </span><span class="koboSpan" id="kobo.167.2">As expected, this will give us the raw content of the imported file. </span><span class="koboSpan" id="kobo.167.3">For the </span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1">reset.css</span></strong><span class="koboSpan" id="kobo.169.1"> example shown earlier, it could be included via </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">import reset from '/src/reset.css?raw';</span></strong><span class="koboSpan" id="kobo.171.1"> where the reset variable contains the content from </span><strong class="source-inline"><span class="koboSpan" id="kobo.172.1">reset.css</span></strong><span class="koboSpan" id="kobo.173.1">. </span><span class="koboSpan" id="kobo.173.2">We would then need to find a way to include that content inside of </span><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">&lt;style&gt;</span></strong><span class="koboSpan" id="kobo.175.1"> tags. </span><span class="koboSpan" id="kobo.175.2">In a similar fashion, if we want to import a file as a URL that is not found in the standard media types, we can append </span><strong class="source-inline"><span class="koboSpan" id="kobo.176.1">?url</span></strong><span class="koboSpan" id="kobo.177.1"> to the file import</span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.178.1"> statement. </span><span class="koboSpan" id="kobo.178.2">This can be helpful for including files served from a </span><strong class="bold"><span class="koboSpan" id="kobo.179.1">Content Delivery Network</span></strong><span class="koboSpan" id="kobo.180.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.181.1">CDN</span></strong><span class="koboSpan" id="kobo.182.1">). </span><span class="koboSpan" id="kobo.182.2">We can even import scripts as web workers</span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.183.1"> by appending </span><strong class="source-inline"><span class="koboSpan" id="kobo.184.1">?worker</span></strong><span class="koboSpan" id="kobo.185.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">the filename!</span></span></p>
<h2 id="_idParaDest-132"><a id="_idTextAnchor132"/><span class="koboSpan" id="kobo.187.1">File Paths</span></h2>
<p><span class="koboSpan" id="kobo.188.1">When running Vite’s development</span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.189.1"> server, we can observe the network requests in our browser’s developer tools and notice that imported files are served from their location within the project source code. </span><span class="koboSpan" id="kobo.189.2">For example, the image from </span><a href="B19024_02_Final_AM.xhtml#_idTextAnchor032"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.190.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.191.1"> is located at </span><strong class="source-inline"><span class="koboSpan" id="kobo.192.1">src/lib/images/demo.svg</span></strong><span class="koboSpan" id="kobo.193.1"> and is also served from that very same location. </span><span class="koboSpan" id="kobo.193.2">However, when we run </span><strong class="source-inline"><span class="koboSpan" id="kobo.194.1">npm run build</span></strong><span class="koboSpan" id="kobo.195.1"> followed by </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">npm run preview</span></strong><span class="koboSpan" id="kobo.197.1">, we’ll observe that the path has changed. </span><span class="koboSpan" id="kobo.197.2">It is given the path </span><strong class="source-inline"><span class="koboSpan" id="kobo.198.1">_app/immutable/assets/demo.dd76856a.svg</span></strong><span class="koboSpan" id="kobo.199.1">. </span><span class="koboSpan" id="kobo.199.2">This path is specific to the built SvelteKit application and, normally, we won’t edit it after the application has been built. </span><span class="koboSpan" id="kobo.199.3">But take a moment to notice that a hash has been included in the filename. </span><span class="koboSpan" id="kobo.199.4">Should the file contents change, we’ll notice the built asset will include a different hash appended to the </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">file’s name.</span></span></p>
<p><span class="koboSpan" id="kobo.201.1">We can also take this moment to observe the included favicon file. </span><span class="koboSpan" id="kobo.201.2">We’ll see that in both </span><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">dev</span></strong><span class="koboSpan" id="kobo.203.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">build</span></strong><span class="koboSpan" id="kobo.205.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">preview</span></strong><span class="koboSpan" id="kobo.207.1">, it is served from the domain root directory </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">/</span></strong><span class="koboSpan" id="kobo.209.1">. </span><span class="koboSpan" id="kobo.209.2">This is because it was located in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">static/</span></strong><span class="koboSpan" id="kobo.211.1"> directory and Vite serves and builds the application so that any files located there will be served from the root level of </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">the application.</span></span></p>
<h2 id="_idParaDest-133"><a id="_idTextAnchor133"/><span class="koboSpan" id="kobo.213.1">SvelteKit Configuration Options</span></h2>
<p><span class="koboSpan" id="kobo.214.1">These options can be customized </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.216.1">svelte.config.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.218.1">files.assets</span></strong><span class="koboSpan" id="kobo.219.1"> – This option specifies the directory for which static assets will be stored. </span><span class="koboSpan" id="kobo.219.2">SvelteKit</span><a id="_idIndexMarker243"/><span class="koboSpan" id="kobo.220.1"> automatically sets this option to </span><strong class="source-inline"><span class="koboSpan" id="kobo.221.1">static</span></strong><span class="koboSpan" id="kobo.222.1"> and overrides the Vite sibling setting specified as </span><strong class="source-inline"><span class="koboSpan" id="kobo.223.1">publicDir</span></strong><span class="koboSpan" id="kobo.224.1"> (which defaults to </span><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">public</span></strong><span class="koboSpan" id="kobo.226.1">). </span><span class="koboSpan" id="kobo.226.2">Files that normally fit here are </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">robots.txt</span></strong><span class="koboSpan" id="kobo.228.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">favicon.ico</span></strong><span class="koboSpan" id="kobo.230.1"> as they rarely change. </span><span class="koboSpan" id="kobo.230.2">To reference files located here in the source code, simply prefix the filename with </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">/</span></strong><span class="koboSpan" id="kobo.232.1">. </span><span class="koboSpan" id="kobo.232.2">For instance, we can show the default favicon by adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">&lt;img src='/favicon.png' /&gt;</span></strong><span class="koboSpan" id="kobo.234.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">any component.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">paths.assets</span></strong><span class="koboSpan" id="kobo.237.1"> – This option takes a string that specifies</span><a id="_idIndexMarker244"/><span class="koboSpan" id="kobo.238.1"> the absolute path from where application files are served. </span><span class="koboSpan" id="kobo.238.2">It defaults to an </span><span class="No-Break"><span class="koboSpan" id="kobo.239.1">empty string.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">paths.base</span></strong><span class="koboSpan" id="kobo.241.1"> – This option also defaults to an empty</span><a id="_idIndexMarker245"/><span class="koboSpan" id="kobo.242.1"> string. </span><span class="koboSpan" id="kobo.242.2">If your application is being served from a sub-directory, you can specify the root-relative path here. </span><span class="koboSpan" id="kobo.242.3">Then, you may use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">base</span></strong><span class="koboSpan" id="kobo.244.1"> module imported from </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">$app/paths</span></strong><span class="koboSpan" id="kobo.246.1"> to modify hardcoded </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">paths appropriately.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">paths.relative</span></strong><span class="koboSpan" id="kobo.249.1"> – This option accepts a Boolean</span><a id="_idIndexMarker246"/><span class="koboSpan" id="kobo.250.1"> value. </span><span class="koboSpan" id="kobo.250.2">When </span><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">true</span></strong><span class="koboSpan" id="kobo.252.1">, the values provided by </span><strong class="source-inline"><span class="koboSpan" id="kobo.253.1">base</span></strong><span class="koboSpan" id="kobo.254.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.255.1">assets</span></strong><span class="koboSpan" id="kobo.256.1"> from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">$app/paths</span></strong><span class="koboSpan" id="kobo.258.1"> module will be relative to built assets. </span><span class="koboSpan" id="kobo.258.2">When </span><strong class="source-inline"><span class="koboSpan" id="kobo.259.1">false</span></strong><span class="koboSpan" id="kobo.260.1">, those same values with </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">be root-relative.</span></span></li>
</ul>
<h2 id="_idParaDest-134"><a id="_idTextAnchor134"/><span class="koboSpan" id="kobo.262.1">Vite Configuration Options</span></h2>
<p><span class="koboSpan" id="kobo.263.1">This option can be customized in a </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">project’s </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">vite.config.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">assetsInclude</span></strong><span class="koboSpan" id="kobo.268.1"> – Many common media types</span><a id="_idIndexMarker247"/><span class="koboSpan" id="kobo.269.1"> are automatically handled by Vite but this option can be useful if a project needs to extend the default list to treat uncommon file types as assets. </span><span class="koboSpan" id="kobo.269.2">This option allows for the customization</span><a id="_idIndexMarker248"/><span class="koboSpan" id="kobo.270.1"> of allowable static asset file types. </span><span class="koboSpan" id="kobo.270.2">It can be a string, regular expression, or </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.271.1">picomatch</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.272.1"> pattern.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.273.1">We’ve just seen how we can customize the importing of static assets. </span><span class="koboSpan" id="kobo.273.2">If we need to force an asset to be imported as a URL, we know that we append </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">?url</span></strong><span class="koboSpan" id="kobo.275.1"> to the end of the imported file. </span><span class="koboSpan" id="kobo.275.2">We’ve also learned how CSS files are automatically injected into the component they are imported to. </span><span class="koboSpan" id="kobo.275.3">Along with a few configuration options, these details provide insight into how we can make the management of static assets stress-free in our </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">SvelteKit applications.</span></span></p>
<h1 id="_idParaDest-135"><a id="_idTextAnchor135"/><span class="koboSpan" id="kobo.277.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.278.1">When including images, CSS files, or other media types in SvelteKit applications, it is clear that we should leverage Vite to import the asset just as we would import a JS module. </span><span class="koboSpan" id="kobo.278.2">Doing so comes with the advantage of being simple but also allowing for optimized caches. </span><span class="koboSpan" id="kobo.278.3">It keeps our development experience smooth as Vite’s HMR will automatically show changes in the browser. </span><span class="koboSpan" id="kobo.278.4">It’s also flexible in that it allows for various media types to be imported either by URL or </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">raw content.</span></span></p>
<p><span class="koboSpan" id="kobo.280.1">Now that we know how to manage static assets, we should circle back to how we manage secrets. </span><span class="koboSpan" id="kobo.280.2">If you recall the previous chapter, we added a personal access token to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.281.1">.env</span></strong><span class="koboSpan" id="kobo.282.1"> file, which allowed us to authenticate with the GitHub API. </span><span class="koboSpan" id="kobo.282.2">In the next chapter, we’ll explore this further and cover the various modules that make managing secrets </span><span class="No-Break"><span class="koboSpan" id="kobo.283.1">a breeze.</span></span></p>
<h1 id="_idParaDest-136"><a id="_idTextAnchor136"/><span class="koboSpan" id="kobo.284.1">Resources</span></h1>
<ul>
<li><span class="koboSpan" id="kobo.285.1">Tailwind CSS – </span><a href="https://tailwindcss.com/"><span class="No-Break"><span class="koboSpan" id="kobo.286.1">https://tailwindcss.com/</span></span></a></li>
<li><span class="koboSpan" id="kobo.287.1">Bootstrap – </span><a href="https://getbootstrap.com/"><span class="No-Break"><span class="koboSpan" id="kobo.288.1">https://getbootstrap.com/</span></span></a></li>
<li><span class="koboSpan" id="kobo.289.1">Josh W. </span><span class="koboSpan" id="kobo.289.2">Comeau’s Custom CSS Reset – </span><a href="https://www.joshwcomeau.com/css/custom-css-reset/"><span class="No-Break"><span class="koboSpan" id="kobo.290.1">https://www.joshwcomeau.com/css/custom-css-reset/</span></span></a></li>
<li><span class="koboSpan" id="kobo.291.1">Vite Configuration Options – </span><a href="https://vitejs.dev/config/"><span class="No-Break"><span class="koboSpan" id="kobo.292.1">https://vitejs.dev/config/</span></span></a></li>
<li><span class="koboSpan" id="kobo.293.1">CSS Modules – </span><a href="https://github.com/css-modules/css-modules"><span class="No-Break"><span class="koboSpan" id="kobo.294.1">https://github.com/css-modules/css-modules</span></span></a></li>
<li><span class="koboSpan" id="kobo.295.1">picomatch – </span><a href="https://github.com/micromatch/picomatch"><span class="No-Break"><span class="koboSpan" id="kobo.296.1">https://github.com/micromatch/picomatch</span></span></a></li>
</ul>
</div>
</body></html>