<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch02"/>Chapter 2. The Dialog Widget</h1></div></div></div><p>The dialog widget is in the Wijmo Open set. It is an enhancement of the jQuery UI dialog with more features. Wijmo dialogs can be maximized, minimized, pinned to a location, and display external content from a URL in the dialog window. This chapter discusses the options, methods, and events that are added in Wijmo, and how to use them to change the appearance and behavior of the dialog.</p><div><div><div><div><h1 class="title"><a id="ch02lvl1sec11"/>Wijmo additions to the dialog widget at a glance</h1></div></div></div><p>By default, the dialog window includes the pin, toggle, minimize, maximize, and close buttons. Pinning<a id="id30" class="indexterm"/> the dialog to a location on the screen<a id="id31" class="indexterm"/> disables the dragging feature on the title bar. The dialog can still be resized. Maximizing the dialog makes it take up the area inside the browser window. Toggling it expands or collapses it so that the dialog contents are shown or hidden with the title bar remaining visible. If these buttons cramp your style, they can be turned off with the <code class="literal">captionButtons</code> option. You can see how the dialog is <a id="id32" class="indexterm"/>presented in the browser from the following screenshot:</p><div><img src="img/6067OT_2_01.jpg" alt="Wijmo additions to the dialog widget at a glance"/></div><p>Wijmo features additional API compared to jQuery UI for changing the behavior of the dialog. The new API is mostly for the buttons in the title bar and managing window stacking. Window stacking determines which windows are drawn on top of other ones. Clicking <a id="id33" class="indexterm"/>on a dialog raises it above other dialogs and <a id="id34" class="indexterm"/>changes their window stacking settings. The following table shows the options added in Wijmo.</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Options</p>
</th><th style="text-align: left" valign="bottom">
<p>Events</p>
</th><th style="text-align: left" valign="bottom">
<p>Methods</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">captionButtons</code>
</p>
<p>
<code class="literal">contentUrl</code>
</p>
<p>
<code class="literal">disabled</code>
</p>
<p>
<code class="literal">expandingAnimation</code>
</p>
<p>
<code class="literal">stack</code>
</p>
<p>
<code class="literal">zIndex</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">blur</code>
</p>
<p>
<code class="literal">buttonCreating</code>
</p>
<p>
<code class="literal">stateChanged</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">disable</code>
</p>
<p>
<code class="literal">enable</code>
</p>
<p>
<code class="literal">getState</code>
</p>
<p>
<code class="literal">maximize</code>
</p>
<p>
<code class="literal">minimize</code>
</p>
<p>
<code class="literal">pin</code>
</p>
<p>
<code class="literal">refresh</code>
</p>
<p>
<code class="literal">reset</code>
</p>
<p>
<code class="literal">restore</code>
</p>
<p>
<code class="literal">toggle</code>
</p>
<p>
<code class="literal">widget</code>
</p>
</td></tr></tbody></table></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">contentUrl</code> option<a id="id35" class="indexterm"/> allows you to specify a URL to load within the window.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">expandingAnimation</code> option<a id="id36" class="indexterm"/> is applied when the dialog is toggled from a collapsed state to an expanded state.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">stack</code><a id="id37" class="indexterm"/> and <code class="literal">zIndex</code> options determine whether the dialog<a id="id38" class="indexterm"/> sits on top of other dialogs.</li><li class="listitem" style="list-style-type: disc">Similar to the <code class="literal">blur</code> event<a id="id39" class="indexterm"/> on input elements, the <code class="literal">blur</code> event for dialog is fired when the dialog loses focus.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">buttonCreating</code> method<a id="id40" class="indexterm"/> is called when buttons are created and can modify the buttons on the title bar.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">disable</code> method<a id="id41" class="indexterm"/> disables the event handlers for the dialog. It prevents the default button actions and disables dragging and resizing.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">widget</code> method<a id="id42" class="indexterm"/> returns the dialog HTML element.</li><li class="listitem" style="list-style-type: disc">The <a id="id43" class="indexterm"/>methods <code class="literal">maximize</code>, <code class="literal">minimize</code><a id="id44" class="indexterm"/>, <code class="literal">pin</code><a id="id45" class="indexterm"/>, <code class="literal">refresh</code><a id="id46" class="indexterm"/>, <code class="literal">reset</code><a id="id47" class="indexterm"/>, <a id="id48" class="indexterm"/><code class="literal">restore</code>, and <code class="literal">toggle</code><a id="id49" class="indexterm"/>, are available as buttons on the title bar. The best way to see what they do is play around with them.</li><li class="listitem" style="list-style-type: disc">In addition, the <code class="literal">getState</code> method<a id="id50" class="indexterm"/> is used to find the dialog state and returns either maximized, minimized, or normal.</li><li class="listitem" style="list-style-type: disc">Similarly, the <code class="literal">stateChanged</code> event<a id="id51" class="indexterm"/> is fired when the state of the dialog changes.</li></ul></div><p>The methods <a id="id52" class="indexterm"/>are called as a parameter to the <code class="literal">wijdialog</code> method. To disable button interactions, pass the string <code class="literal">disable</code>:</p><div><pre class="programlisting">$("#dialog").wijdialog ("disable");</pre></div><p>Many of the methods come as pairs, and <code class="literal">enable</code> and <code class="literal">disable</code> are one of them. Calling <code class="literal">enable</code> enables the buttons again. Another pair is <code class="literal">restore</code>/<code class="literal">minimize</code>. <code class="literal">minimize</code> hides the dialog in a tray on the left bottom of the screen. <code class="literal">restore</code> sets the dialog back to its normal size and displays it again.</p><p>The most<a id="id53" class="indexterm"/> important option for usability is the <code class="literal">captionButtons</code> option. Although users are likely familiar with the minimize, resize, and close buttons; the pin and toggle buttons are not<a id="id54" class="indexterm"/> featured in common desktop environments. Therefore, you will want to choose the buttons<a id="id55" class="indexterm"/> that are visible depending on your use of the dialog box in your project. To turn off a button on the title bar, set the <code class="literal">visible</code> option<a id="id56" class="indexterm"/> to <code class="literal">false</code>. A default jQuery UI dialog window with only the close button can be created with:</p><div><pre class="programlisting">$("#dialog").wijdialog({captionButtons: {
  pin: { visible: false },
  refresh: { visible: false },
  toggle: { visible: false },
  minimize: { visible: false },
  maximize: { visible: false }
  }
});</pre></div><p>The other options for each button are <code class="literal">click</code>, <code class="literal">iconClassOff</code>, and <code class="literal">iconClassOn</code>. The <code class="literal">click</code> option<a id="id57" class="indexterm"/> specifies an event handler for the button. Nevertheless, the buttons come with default actions and you will want to use different icons for custom actions. That's where <code class="literal">iconClass</code> comes in. <code class="literal">iconClassOn</code> defines the CSS class for the button when it is loaded. <code class="literal">iconClassOff</code> is the class for the button icon after clicking. For a list of available jQuery UI icons<a id="id58" class="indexterm"/> and their classes, see <a class="ulink" href="http://jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html">http://jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html</a>.</p><div><img src="img/6067OT_2_02.jpg" alt="Wijmo additions to the dialog widget at a glance"/></div><p>Our next example uses <code class="literal">ui-icon-zoomin</code>, <code class="literal">ui-icon-zoomout</code>, and <code class="literal">ui-icon-lightbulb</code>. They can be found by toggling the text for the icons on the web page as shown<a id="id59" class="indexterm"/> in the<a id="id60" class="indexterm"/> preceding screenshot.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec09"/>Adding custom buttons</h2></div></div></div><p>jQuery UI's dialog API lacks an option for configuring the buttons shown on the title bar. Wijmo not only <a id="id61" class="indexterm"/>comes with useful default buttons, but <a id="id62" class="indexterm"/>also lets you override them easily.</p><div><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  ...
  &lt;style&gt;
    .plus {
      font-size: 150%;
    }
  &lt;/style&gt;
  &lt;script id="scriptInit" type="text/javascript"&gt;
    $(document).ready(function () {
      $('#dialog').wijdialog({
        autoOpen: true,
        captionButtons: {
        pin: { visible: false },
        refresh: { visible: false },
        toggle: {visible: true, click: function () {
          $('#dialog').toggleClass('plus')
        }, <strong>iconClassOn: 'ui-icon-zoomin', iconClassOff:</strong>  <strong>        'ui-icon-zoomout'}</strong>,
        minimize: { visible: false },
        maximize: {visible: true, click: function () {
        alert('To enloarge text, click the zoom icon.')
        }, <strong>iconClassOn: 'ui-icon-lightbulb'</strong>},
        close: {visible: true, click: self.close, iconClassOn:'ui-icon-close'}
        }
      });
    });
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="dialog" title="Basic dialog"&gt;
    &lt;p&gt;Loremipsum dolor sitamet, consectetueradipiscingelit. Aeneancommodo ligula eget dolor.Aeneanmassa. Cum sociisnatoquepenatibusetmagnis dis parturient montes, nasceturridiculus mus. Donec quam felis, ultriciesnec, pellentesqueeu, pretiumquis, sem. Nullaconsequatmassaquisenim. Donecpedejusto, fringillavel, aliquetnec, vulputate&lt;/p&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>We create<a id="id63" class="indexterm"/> a dialog window passing in the <code class="literal">captionButtons</code> option<a id="id64" class="indexterm"/>. The<a id="id65" class="indexterm"/> pin, refresh, and minimize buttons have <code class="literal">visible</code> set to <code class="literal">false</code> so that the title bar is initialized without them. The final output looks as shown in the following screenshot:</p><div><img src="img/6067OT_2_03.jpg" alt="Adding custom buttons"/></div><p>In addition, the toggle and maximize buttons are modified and given custom behaviors. The toggle button toggles the font size of the text by applying or removing a CSS class. Its default icon, set with <code class="literal">iconClassOn</code>, indicates that clicking on it will zoom in on the text. Once clicked, the icon changes to a zoom out icon. Likewise, the behavior and appearance of the maximize button have been changed. In the position where the maximize icon was displayed in the title bar previously, there is now a lightbulb icon with a tip.</p><p>Although this method of adding new buttons to the title bar seems clumsy, it is the only option that Wijmo<a id="id66" class="indexterm"/> currently offers. Adding buttons<a id="id67" class="indexterm"/> in the content area is much simpler. The <code class="literal">buttons</code> option specifies the buttons to be displayed in the dialog window content area below the title bar. For example, to display a simple confirmation button:</p><div><pre class="programlisting">$('#dialog').wijdialog({buttons: {ok: function () {
  $(this).wijdialog('close')
}}});</pre></div><p>The text displayed on the button is <code class="literal">ok</code> and clicking on the button hides the dialog. Calling <code class="literal">$('#dialog').wijdialog('open')</code> will show the dialog again.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec10"/>Configuring the dialog widget's appearance</h2></div></div></div><p>Wijmo offers<a id="id68" class="indexterm"/> several options that change the dialog's <a id="id69" class="indexterm"/>appearance including title, height, width, and position. The title of the dialog can be changed either by setting the <code class="literal">title</code> attribute<a id="id70" class="indexterm"/> of the <code class="literal">div</code> element<a id="id71" class="indexterm"/> of the dialog, or by using the <code class="literal">title</code> option<a id="id72" class="indexterm"/>. To change the dialog's theme, you can use CSS styling on the <code class="literal">wijmo-wijdialog</code> and <code class="literal">wijmo-wijdialog-captionbutton</code> classes:</p><div><pre class="programlisting">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  ...
  &lt;style&gt;
    .wijmo-wijdialog {

      /*rounded corners*/
      -webkit-border-radius: 12px;
      border-radius: 12px;
      background-clip: padding-box;

      /*shadow behind dialog window*/
      -moz-box-shadow: 3px 3px 5px 6px #ccc;
      -webkit-box-shadow: 3px 3px 5px 6px #ccc;
      box-shadow: 3px 3px 5px 6px #ccc;

      /*fade contents from dark gray to gray*/
      background-image: -webkit-gradient(linear, left top, left bottom, from(#444444), to(#999999));
      background-image: -webkit-linear-gradient(top, #444444, #999999);
      background-image: -moz-linear-gradient(top, #444444, #999999);
      background-image: -o-linear-gradient(top, #444444, #999999);
      background-image: linear-gradient(to bottom, #444444, #999999);

      background-color: transparent;

      text-shadow: 1px 1px 3px #888;

    }
  &lt;/style&gt;
  &lt;script id="scriptInit" type="text/javascript"&gt;
    $(document).ready(function () {
      $('#dialog').wijdialog({width: 350});
    });
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="dialog" title="Subtle gradients"&gt;
    &lt;p&gt;Loremipsum dolor sitamet, consectetueradipiscingelit. Aeneancommodo ligula eget dolor.Aeneanmassa. Cum sociisnatoquepenatibusetmagnis dis parturient montes, nasceturridiculus mus. Donec quam felis, ultriciesnec, pellentesqueeu, pretiumquis, sem. Nullaconsequatmassaquisenim. Donecpedejusto, fringillavel, aliquetnec, vulputate
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>We now add <a id="id73" class="indexterm"/>rounded boxes, a box shadow, and a<a id="id74" class="indexterm"/> text shadow to the dialog box. This is done with the <code class="literal">.wijmo-wijdialog</code> class<a id="id75" class="indexterm"/>. Since many of the CSS3 properties have different names on different browsers, the browser specific properties are used. For example, <code class="literal">-webkit-box-shadow</code> is necessary on Webkit-based browsers. The dialog width is set to 350 px when initialized so that the title text and buttons all fit on one line.</p><div><img src="img/6067OT_2_04.jpg" alt="Configuring the dialog widget's appearance"/></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec11"/>Loading external content</h2></div></div></div><p>Wijmo <a id="id76" class="indexterm"/>makes it easy to load content in an iFrame. Simply <a id="id77" class="indexterm"/>pass<a id="id78" class="indexterm"/> a URL with the <code class="literal">contentUrl</code> option:</p><div><pre class="programlisting">$(document).ready(function () {
  $("#dialog").wijdialog({captionButtons: {
    pin: { visible: false },
    refresh: { visible: true },
    toggle: { visible: false },
    minimize: { visible: false },
    maximize: { visible: true },
    close: { visible: false }
    },
  contentUrl: "http://wijmo.com/demo/themes/"
  });
});</pre></div><p>This will load the Wijmo theme explorer in a dialog window with refresh and maximize/restore buttons. This output can be seen in the following screenshot:</p><div><img src="img/6067OT_2_05.jpg" alt="Loading external content"/></div><p>The <a id="id79" class="indexterm"/>refresh button reloads the content in the iFrame, which<a id="id80" class="indexterm"/> is useful for dynamic content. The maximize button resizes the dialog window.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec12"/>Summary</h1></div></div></div><p>The Wijmo dialog widget is an extension of the jQuery UI dialog. In this chapter, the features unique to Wijmo's dialog widget are explored and given emphasis. I showed you how to add custom buttons, how to change the dialog appearance, and how to load content from other URLs in the dialog.</p></div></body></html>