<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Building Web Applications with React</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will cover the following recipes:</p>
<ul>
<li>Understanding React elements and React components</li>
<li>Composing components</li>
<li>Stateful components and life cycle methods</li>
<li>Working with React.PureComponent</li>
<li>React event handlers</li>
<li>Conditional rendering of components</li>
<li>Rendering lists with React</li>
<li>Working with forms and inputs in React</li>
<li>Understanding refs and how to use them</li>
<li>Understanding React portals</li>
<li>Catching errors with error boundary components</li>
<li>Type checking properties with PropTypes</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>You will be required to know Go programming language, also basics of web application framework. You will also need to install Git, in order use the Git repository of this book. And finally, ability to develop with an IDE on the command line.</p>
<p>The code files of this chapter can be found on GitHub:<br/>
<a href="https://github.com/PacktPublishing/MERN-Quick-Start-Guide/tree/master/Chapter06">https://github.com/PacktPublishing/MERN-Quick-Start-Guide/tree/master/Chapter06</a></p>
<p>Check out the following video to see the code in action:<br/>
<a href="https://goo.gl/J7d7Ag">https://goo.gl/J7d7Ag</a></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p>React is a JavaScript library for building <strong>user interfaces</strong> (<strong>UI</strong>). React is component-based, which means that each component can live separately from others and manage its own state. Complex UIs can be created by composing components.</p>
<p>Components are usually created using JSX syntax, which has an XML-like syntax, or using the <kbd>React.createElement</kbd> method. However, JSX is what makes React special for building web applications in a declarative way.</p>
<div class="packt_infobox">In the MVC pattern, React is usually associated with the View.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Understanding React elements and React components</h1>
                </header>
            
            <article>
                
<p><strong>React elements</strong> can be created using JSX syntax:</p>
<pre>const element = &lt;h1&gt;Example&lt;/h1&gt; </pre>
<p>This is transformed to:</p>
<pre>const element = React.createElement('h1', null, 'Example') </pre>
<p>JSX is a language extension on top of JavaScript that allows you to create complex UIs with ease. For example, consider the following:</p>
<pre>const element = ( 
    &lt;details&gt; 
        &lt;summary&gt;React Elements&lt;/summary&gt; 
        &lt;p&gt;JSX is cool&lt;/p&gt; 
    &lt;/details&gt; 
) </pre>
<p>The previous example could be written without JSX syntax as:</p>
<pre>const element = React.createElement( 
    'details', 
    null, 
    React.createElement('summary', null, 'React Elements'), 
    React.createElement('p', null, 'JSX is cool'), 
  ) </pre>
<p>React elements can be any HTML5 tag and any JSX tag can be self-closed. For instance, the following will create a paragraph React element with an empty content within:</p>
<pre>const element = &lt;p /&gt; </pre>
<p>The same way as you would do with HTML5, you can provide attributes to React elements, called properties or props in React:</p>
<pre>const element = ( 
    &lt;input type="text" value="Example" readOnly /&gt; 
) </pre>
<p><strong>React components</strong> allow you to isolate parts of your web application as re-usable pieces of code or components. They can be defined in several ways. For instance:</p>
<ul>
<li><strong>Functional components</strong>: These are plain JavaScript functions that accept properties as the first argument and return React elements:</li>
</ul>
<pre>      const InputText = ({ name, children }) =&gt; ( 
          &lt;input 
              type="text" 
              name={name} 
              value={children} 
              readOnly 
          /&gt;Â­ 
      ) </pre>
<ul>
<li><strong>Class components</strong>: Using ES6 classes allows you to define life cycle methods and create stateful components. They render React elements from the <kbd>render</kbd> method:</li>
</ul>
<pre><strong>      </strong>class InputText extends React.Component { 
    <strong>      </strong>render() { 
              const { name, children } = this.props 
              return ( 
                  &lt;input 
                      type="text" 
                      name={name} 
                      value={children} 
                      readOnly 
                  /&gt; 
              ) 
          } 
      } </pre>
<ul>
<li><strong>Expressions</strong>: These keep a reference to an instance of a React element or component:</li>
</ul>
<pre><strong>      </strong>const InstanceInputText = ( 
          &lt;InputText name="username"&gt; 
              Huang Jx 
          &lt;/InputText&gt; 
      ) </pre>
<p>There are a few properties that are unique and are only part of React. For instance, the <kbd>children</kbd> property refers to the elements contained within the tag:</p>
<pre>&lt;MyComponent&gt; 
    &lt;span&gt;Example&lt;/span&gt; 
&lt;/MyComponent&gt; </pre>
<p>The <kbd>children</kbd> property received in <kbd>MyComponent</kbd>, in the previous example, will be an instance of a <kbd>span</kbd> React element. If multiple React elements or components are passed as children, the <kbd>children</kbd> property will be an array. However, if no children are passed, the <kbd>children</kbd> property will be <kbd>null</kbd>. The <kbd>children</kbd> property doesn't necessarily need to be a React element or component; it can also be a JavaScript function, or a JavaScript primitive:</p>
<pre>&lt;MyComponent&gt; 
    {() =&gt; { 
        console.log('Example!') <br/>        return null
    }} 
&lt;/MyComponent&gt; </pre>
<p>React also considers functional components and class components that return or render a string, a valid React component. For instance:</p>
<pre>const SayHi = ({ to }) =&gt; ( 
    `Hello ${to}` 
) 
const element = ( 
    &lt;h1&gt; 
        &lt;SayHi to="John" /&gt;, how are you? 
    &lt;/h1&gt; 
) </pre>
<div class="packt_infobox">React components' names must start with an uppercase letter. Otherwise, React will treat lowercased JSX tags as React elements</div>
<p><strong>Rendering components</strong> to the DOM in React is not a complicated task. React provides several methods for rendering a React component to the DOM using the <kbd>ReactDOM</kbd> library. React uses JSX or <kbd>React.createElement</kbd> to create a tree or a representation of the DOM tree. It does so by using a virtual DOM, which allows React to transform React elements to DOM nodes and update only the nodes that have changed.</p>
<p>This is how you usually render your application using the <kbd>render</kbd> method from the <kbd>ReactDOM</kbd> library:</p>
<pre>import * as ReactDOM from 'react-dom' 
import App from './App' 
ReactDOM.render( 
   &lt;App /&gt;, 
   document.querySelector('[role="main"]'), 
) </pre>
<p>The first argument provided to the <kbd>render</kbd> method is a React component or a React element. The second argument tells you where in the DOM to render the application. In the previous example, we use the <kbd>querySelector</kbd> method from the document object to look for a DOM node with an attribute of <kbd>role</kbd> set to <kbd>"main"</kbd>.</p>
<p>React also allows you to render React components as an HTML string, which is useful for generating content on the server side and sending the content directly to the browser as an HTML file:</p>
<pre>import * as React from 'react' 
import * as ReactDOMServer from 'react-dom/server' 
const OrderedList = ({ children }) =&gt; ( 
   &lt;ol&gt; 
      {children.map((item, indx) =&gt; ( 
         &lt;li key={indx}&gt;{item}&lt;/li&gt; 
      ))} 
   &lt;/ol&gt; 
) 
console.log( 
   ReactDOMServer.renderToStaticMarkup( 
      &lt;OrderedList&gt; 
         {['One', 'Two', 'Three']} 
      &lt;/OrderedList&gt; 
   ) 
) </pre>
<p>It will output the following in the console:</p>
<pre>&lt;ol&gt; 
   &lt;li&gt;One&lt;/li&gt; 
   &lt;li&gt;Two&lt;/li&gt; 
   &lt;li&gt;Three&lt;/li&gt; 
&lt;/ol&gt; </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will create a simple React application using the concepts that you have learned about React components and React elements. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>npm install</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Create a React application that will display a welcome message writing functional, class, and expression components:</p>
<ol>
<li>Create a new file named <kbd>basics.js.</kbd></li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a new functional component that will render a <kbd>span</kbd> React element with <kbd>color</kbd> set to red in its style attributes:</li>
</ol>
<pre>      const RedText = ({ text }) =&gt; ( 
          &lt;span style={{ color: 'red' }}&gt; 
              {text} 
          &lt;/span&gt; 
      ) </pre>
<ol start="4">
<li>Define another functional component that will render an <kbd>h1</kbd> React element and the <kbd>RedText</kbd> functional component as part of its <kbd>children</kbd>:</li>
</ol>
<pre>      const Welcome = ({ to }) =&gt; ( 
          &lt;h1&gt;Hello, &lt;RedText text={to}/&gt;&lt;/h1&gt; 
      ) </pre>
<ol start="5">
<li>Define an expression that will contain a reference to a React element:</li>
</ol>
<pre>      const TodoList = ( 
          &lt;ul&gt; 
              &lt;li&gt;Lunch at 14:00 with Jenny&lt;/li&gt; 
              &lt;li&gt;Shower&lt;/li&gt; 
          &lt;/ul&gt; 
      ) </pre>
<ol start="6">
<li>Define a class component named <kbd>Footer</kbd> that will display the current date:</li>
</ol>
<pre>      class Footer extends React.Component { 
          render() { 
              return ( 
                  &lt;footer&gt; 
                      {new Date().toDateString()} 
                  &lt;/footer&gt; 
              ) 
          } 
      } </pre>
<ol start="7">
<li>Render the application to the DOM:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;div&gt; 
              &lt;Welcome to="John" /&gt; 
              {TodoList} 
              &lt;Footer /&gt; 
          &lt;/div&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="8">
<li>Save the file.</li>
</ol>
<p>Then, create an <kbd>index.html</kbd> file where you will render the React application:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;MyApp&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./basics.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To see the previous work in action:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre>      http://localhost:1337/</pre>
<ol start="3">
<li>You should be able to see the React application rendered to the DOM</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Composing components</h1>
                </header>
            
            <article>
                
<p>In React, all components can be isolated and complex UIs can be built by composing components which enables their re-usability.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will work with re-usable components to generate a home page containing three sections: a header, a paragraph with a description, and a footer. These three sections will be written as three separate components that will be composed later to build a home page. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc,</kbd> adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>npm install</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Create a new folder named <kbd>component</kbd> in the root directory of your project. Then, create the following three files in order:</p>
<ol>
<li><kbd>Header.js</kbd></li>
<li><kbd>Footer.js</kbd></li>
<li><kbd>Description.js</kbd></li>
</ol>
<p>The <kbd>Header</kbd> component will generate an <kbd>h1</kbd> React element that represents the heading of the page. It expects to receive a <kbd>title</kbd> property:</p>
<ol>
<li>Create a new file named <kbd>Header.js</kbd> in the <kbd>component</kbd> directory</li>
<li>Add the following code:</li>
</ol>
<pre>      import * as React from 'react' 
<strong>      </strong>import * as ReactDOM from 'react-dom' 
      export default ({ title }) =&gt; ( 
          &lt;h1&gt;{title}&lt;/h1&gt; 
      ) </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>The <kbd>Footer</kbd> component will generate a <kbd>footer</kbd> React element that will be placed at the end of the page. It will expect to receive a <kbd>date</kbd> property:</p>
<ol>
<li>Create a new file named <kbd>Footer.js</kbd> in the <kbd>component</kbd> directory</li>
<li>Add the following code:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' 
      export default ({ date }) =&gt; ( 
          &lt;footer&gt;{date}&lt;/footer&gt; 
      ) </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>The <kbd>Description</kbd> component will generate a paragraph that will display a description of the page:</p>
<ol>
<li>Create a new file named <kbd>Description.js</kbd> in the <kbd>component</kbd> directory</li>
<li>Add the following code:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' 
      export default () =&gt; ( 
          &lt;p&gt;This is a cool website designed with ReactJS&lt;/p&gt; 
      ) </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Next, move back out of the <kbd>component</kbd> directory to the root directory of your project where <kbd>package.json</kbd> is located and create the following file:</p>
<ol>
<li>Create a new file named <kbd>composing-react.js</kbd></li>
<li>Import the React and <kbd>ReactDOM</kbd> libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Import the previously defined components:</li>
</ol>
<pre>      import Header from './component/Header' 
      import Footer from './component/Footer' 
      import Description from './component/Description' </pre>
<ol start="4">
<li>Define a <kbd>App</kbd> component that will render your previously defined components:</li>
</ol>
<pre>      const App = () =&gt; ( 
          &lt;React.Fragment&gt; 
              &lt;Header title="Simple React App" /&gt; 
              &lt;Description /&gt; 
              &lt;Footer date={new Date().toDateString()} /&gt; 
          &lt;/React.Fragment&gt; 
      ) </pre>
<ol start="5">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;App /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="6">
<li>Save the file</li>
</ol>
<p>Then, create an <kbd>index.html</kbd> file where you will render the React application:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Composing Components&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./composing-react.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To see the previous work in action, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre>      http://localhost:1337/ </pre>
<ol start="3">
<li>If you inspect the DOM tree in your browser's developer tools, you should be able to see the following DOM structure:</li>
</ol>
<pre>      &lt;div role="app"&gt; 
      &lt;h1&gt;React App&lt;/h1&gt; 
      &lt;p&gt;This is a cool website designed with ReactJS&lt;/p&gt; 
      &lt;footer&gt;Tue May 22 2018&lt;/footer&gt; 
      &lt;/div&gt; </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Each React component is written in a separate file. Then, we import the components in the main application file, <kbd>composing-react.js</kbd>, and use composition to generate a virtual DOM tree. Each component is re-usable because it can be used again in other parts of your application or in other components by just importing the files. Then, the <kbd>render</kbd> method from the <kbd>ReactDOM</kbd> library is used to generate a DOM representation of the virtual DOM tree.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Did you notice that we used <kbd>React.Fragment</kbd>? This is a new feature introduced in React v16. It allows you to return multiple elements without creating an extra DOM node. A component cannot return multiple React components or elements in the following way:</p>
<pre>const Example = () =&gt; ( 
   &lt;span&gt;One&lt;/span&gt; 
   &lt;span&gt;Two&lt;/span&gt; 
) // &lt; will trow an error </pre>
<p>However, using <kbd>React.Fragment</kbd>, it's possible to do the following:</p>
<pre>const Example = () =&gt; ( 
   &lt;React.Fragment&gt; 
      &lt;span&gt;One&lt;/span&gt; 
      &lt;span&gt;Two&lt;/span&gt; 
   &lt;/React.Fragment&gt; 
) </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Stateful components and life cycle methods</h1>
                </header>
            
            <article>
                
<p>React components can manage their own state and update only when the state has changed. Stateful React components are written using ES6 classes:</p>
<pre>class Example extends React.Component { 
   render() { 
      &lt;span&gt;This is an example&lt;/span&gt; 
   } 
} </pre>
<p>React class components have a <kbd>state</kbd> instance property to access their internal state and a <kbd>props</kbd> property to access properties passed to the component:</p>
<pre>class Example extends React.Component {  
    state = { title: null } 
    render() { 
        return ( 
            &lt;React.Fragment&gt;  
                &lt;span&gt;{this.props.title}&lt;/span&gt;  
                &lt;span&gt;{this.state.title}&lt;/span&gt;  
            &lt;/React.Fragment&gt;  
        ) 
    } 
} </pre>
<p>And their state can be mutated by using the <kbd>setState</kbd> instance method:</p>
<pre>class Example extends React.Component { 
    state = { 
        title: "Example", 
        date: null, 
    } 
    componentDidMount() { 
        this.setState((prevState) =&gt; ({ 
            date: new Date().toDateString(), 
        })) 
    } 
    render() { 
        return ( 
            &lt;React.Fragment&gt;  
                &lt;span&gt;{this.state.title}&lt;/span&gt;  
                &lt;span&gt;{this.state.date}&lt;/span&gt;  
            &lt;/React.Fragment&gt;  
        ) 
    } 
} </pre>
<p>The state is initialized once. Then, when the component is mounted, the state should only be mutated using the <kbd>setState</kbd> method. This way, React is able to detect changes in the state and update the component.</p>
<p>The <kbd>setState</kbd> method accepts a callback function as the first argument which will be executed passing the current state (<kbd>prevState</kbd> for convention) as the first argument to the callback function and the current <kbd>props</kbd> as the second argument. This is so because <kbd>setState</kbd> works asynchronously and the state could be mutated while you are performing other actions in different parts of your component.</p>
<p>If you don't need access to the current state while updating the state, you can directly pass an object as the first argument. For instance, the previous example could have been written as:</p>
<pre>componentDidMount() { 
   this.setState({ 
      date: new Date().toDateString(), 
   }) 
} </pre>
<p><kbd>setState</kbd> also accepts an optional callback function as a second argument that gets called once the state has been updated. Because <kbd>setState</kbd> is asynchronous, you may want to use the second callback to perform an action only once the state has been updated:</p>
<pre>componentDidMount() { 
   this.setState({ 
      date: new Date().toDateString(), 
   }, () =&gt; { 
      console.log('date has been updated!') 
   }) 
   console.log(this.state.date) // null 
} </pre>
<p>Once the component is mounted, the console will first output <kbd>null</kbd> even though we used <kbd>setState</kbd> before it; that's because the state is set asynchronously. However, once the state is updated, the console will display "date has been updated".</p>
<div class="packt_infobox">When using the <kbd>setState</kbd> method, React merges the previous state with the current given state. Internally, it's similar to doing:</div>
<pre>currentState = Object.assign({}, currentState, nextState) </pre>
<p>Every class component has <em>life cycle methods</em> that give you control over the life of your component since its creation until it's destroyed, as well as giving you control over other properties, such as knowing when the component has received new properties and if the component should be updated or not. These are the life cycle methods present in all class components:</p>
<ul>
<li><kbd>constructor(props)</kbd>: This is invoked when initializing a new instance of the component, before the component is mounted. <kbd>props</kbd> must be passed to the super class using <kbd>super(props)</kbd> to let React set the <kbd>props</kbd> correctly. The <kbd>constructor</kbd> method is useful as well to initialize the initial state of the component.</li>
<li><kbd>static getDerivedStateFromProps(nextProps, nextState)</kbd>: This is invoked when the component has been instantiated and when the component will receive new <kbd>props</kbd>. This method is useful when the state or part of it depends on values received from the <kbd>props</kbd> passed to the component. It must return an object which will be merged with the current state or <kbd>null</kbd> if the state doesn't need to be updated after receiving new <kbd>props</kbd>.</li>
<li><kbd>componentDidMount()</kbd>: This is invoked after the component has been mounted and after the first <kbd>render</kbd> call. It's useful for integrating with third-party libraries, accessing the DOM, or making HTTP requests to an endpoint.</li>
<li><kbd>shouldComponentUpdate(nextProps, nextState)</kbd>: This is invoked when the component has updated the state or new props have been received. This method allows React to know if it should update the component or not. If you don't implement this method in your component, it defaults to returning <kbd>true</kbd>, which means the component should be updated every time the state has changed or new props have been received. If implementing this method and returning <kbd>false</kbd>, it will tell React not to update the component.</li>
<li><kbd>componentDidUpdate(prevProps, prevState, snapshot)</kbd>: This is invoked after the render method or when an update occurs, except for the first rendering.</li>
<li><kbd>getSnapshotBeforeUpdate(prevProps, prevState)</kbd>: This is invoked after the render method or when an update occurs but before the <kbd>componentDidUpdate</kbd> life cycle method. The returned value of this method is passed as the third argument of <kbd>componentDidUpdate</kbd>.</li>
<li><kbd>componentWillUnmount()</kbd>: This is invoked before a component is unmounted and its instance destroyed. If using third-party libraries, this method is helpful for cleaning up. For instance, clearing timers or cancelling network requests.</li>
<li><kbd>componentDidCatch(error, info)</kbd> : This is a new feature of React v16 for error handling. We will look at this in more detail in the following recipes.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will build a component using all the life cycle methods that we have learned about. First, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>npm install</strong>  </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Build a <kbd>LifeCycleTime</kbd> component whose only purpose would be to display the current time. The component will be updated every 100 ms to keep the component in sync with the time change. We will use the life cycle methods in this component for the following purposes:</p>
<ul>
<li><kbd>constructor(props)</kbd>: To initialize the component's initial state.</li>
<li><kbd>static getDerivedStateFromProps(nextProps, nextState)</kbd>: To merge the <kbd>props</kbd> with the state.</li>
<li><kbd>componentDidMount()</kbd>: To set a function that will be executed every 100 ms using <kbd>setInterval</kbd>, which will update the state with the current time.</li>
<li><kbd>shouldComponentUpdate(nextProps, nextState)</kbd>:To decide if the component should be rendered or not. Check if <kbd>props</kbd> have a property <kbd>dontUpdate</kbd> set to <kbd>true</kbd>, which means the component shouldn't be updated on a <kbd>state</kbd> or <kbd>props</kbd> change.</li>
<li><kbd>componentDidUpdate(prevProps, prevState, snapshot)</kbd>: To simply log in the console that the component has been updated displaying the <kbd>snapshot</kbd>'s value.</li>
<li><kbd>getSnapshotBeforeUpdate(prevProps, prevState)</kbd>: To illustrate the functionality of this method, simply return a string that will be passed as the third argument to <kbd>componentDidUpdate</kbd>.</li>
<li><kbd>componentWillUnmount()</kbd>: When the component is destroyed or unmounted, clear the interval defined in <kbd>componentDidMount</kbd>. Otherwise, after the component is unmounted, you will see an error being displayed.</li>
</ul>
<p>First, create an <kbd>index.html</kbd> file where you will render the React application:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Life cycle methods&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./stateful-react.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Next, perform the following steps to build the <kbd>LifeCycleTime</kbd> component:</p>
<ol>
<li>Create a new file named <kbd>stateful-react.js</kbd></li>
<li>Import the React and <kbd>ReactDOM</kbd> libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a <kbd>LifeCycleTime</kbd> class component and use the life cycle methods as previously described:</li>
</ol>
<pre>      class LifeCycleTime extends React.Component { 
          constructor(props) { 
              super(props) 
              this.state = { 
                  time: new Date().toTimeString(), 
                  color: null, 
                  dontUpdate: false, 
              } 
          } 
          static getDerivedStateFromProps(nextProps, prevState) { 
              return nextProps 
          } 
          componentDidMount() { 
              this.intervalId = setInterval(() =&gt; { 
                  this.setState({ 
                      time: new Date().toTimeString(), 
                  }) 
              }, 100) 
          } 
          componentWillUnmount() { 
              clearInterval(this.intervalId) 
          } 
          shouldComponentUpdate(nextProps, nextState) { 
              if (nextState.dontUpdate) { 
                  return false 
              } 
              return true 
          } 
          getSnapshotBeforeUpdate(prevProps, prevState) { 
              return 'snapshot before update' 
          } 
          componentDidUpdate(prevProps, prevState, snapshot) { 
              console.log( 
                  'Component did update and received snapshot:', 
                  snapshot, 
              ) 
          } 
          render() { 
              return ( 
                  &lt;span style={{ color: this.state.color }}&gt; 
                      {this.state.time} 
                  &lt;/span&gt; 
              ) 
          } 
      } </pre>
<ol start="4">
<li>Then, define an <kbd>App</kbd> class component, which will be used for testing your previously created component. Add three buttons: one that will toggle the color property between red and blue and pass it as a prop to the <kbd>LifeCycleTime</kbd> component, another button for toggling the <kbd>dontUpdate</kbd> property in the state between true and false, which will then be passed as a prop to the <kbd>LifeCycleTime</kbd>, and finally, a button that when clicked will either mount or unmount the <kbd>LifeCycleTime</kbd> component:</li>
</ol>
<pre>      class App extends React.Component { 
          constructor(props) { 
              super(props) 
              this.state = { 
                  color: 'red', 
                  dontUpdate: false, 
                  unmount: false, 
              } 
              this.toggleColor = this.toggleColor.bind(this) 
              this.toggleUpdate = this.toggleUpdate.bind(this) 
              this.toggleUnmount = this.toggleUnmount.bind(this) 
          } 
          toggleColor() { 
              this.setState((prevState) =&gt; ({ 
                  color: prevState.color === 'red' 
                      ? 'blue' 
                      : 'red', 
              })) 
          } 
          toggleUpdate() { 
              this.setState((prevState) =&gt; ({ 
                  dontUpdate: !prevState.dontUpdate, 
              })) 
          } 
          toggleUnmount() { 
              this.setState((prevState) =&gt; ({ 
                  unmount: !prevState.unmount, 
              })) 
          } 
          render() { 
              const { 
                  color, 
                  dontUpdate, 
                  unmount, 
              } = this.state 
              return ( 
                  &lt;React.Fragment&gt; 
                      {unmount === false &amp;&amp; &lt;LifeCycleTime 
                          color={color} 
                          dontUpdate={dontUpdate} 
                      /&gt;} 
                      &lt;button onClick={this.toggleColor}&gt; 
                          Toggle color 
                          {JSON.stringify({ color })} 
                      &lt;/button&gt; 
                      &lt;button onClick={this.toggleUpdate}&gt; 
                          Should update? 
                          {JSON.stringify({ dontUpdate })} 
                      &lt;/button&gt; 
                      &lt;button onClick={this.toggleUnmount}&gt; 
                          Should unmount? 
                          {JSON.stringify({ unmount })} 
                      &lt;/button&gt; 
                  &lt;/React.Fragment&gt; 
              ) 
          } 
      } </pre>
<ol start="5">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;App /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="6">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To see the previous work in action, perform the following steps::</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre><strong>      http://localhost:1337/</strong></pre>
<ol start="3">
<li>Use the buttons to toggle the state of the component and understand how the life cycle methods affect the component's functionality.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Working with React.PureComponent</h1>
                </header>
            
            <article>
                
<p><kbd>React.PureComponent</kbd> is similar to <kbd>React.Component</kbd>. The difference is that <kbd>React.Component</kbd> implements the <kbd>shouldComponentUpdate</kbd> life cycle method internally to make a shallow comparison of the <kbd>state</kbd> and <kbd>props</kbd> to decide if the component should update or not.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will write two components, one extending <kbd>React.PureComponent</kbd>, and another extending <kbd>React.Component,</kbd> in order to see how they behave when the same properties are passed to them. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>npm install</strong>  </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Build a React application to illustrate and understand better how <kbd>React.PureComponent</kbd> works. Create two components: one will extend <kbd>React.Component</kbd> while the other will extend <kbd>React.PureComponent</kbd>. Both components will be placed inside another React component named <kbd>App</kbd> that will update its state around every second. Using the life cycle method,<kbd>componentDidUpdate,</kbd> in both components, we will log on the console which one of them gets updated when the parent component <kbd>App</kbd> updates.</p>
<p>First, create an <kbd>index.html</kbd> file where the react application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;React.PureComponent&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./pure-component.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Then, follow the next steps to build the React application:</p>
<ol>
<li>Create a new file named <kbd>pure-component.js.</kbd></li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a <kbd>Button</kbd> class component extending the <kbd>React.PureComponent</kbd> class:</li>
</ol>
<pre>      class Button extends React.PureComponent { 
          componentDidUpdate() { 
              console.log('Button Component did update!') 
          } 
          render() { 
              return ( 
                  &lt;button&gt;{this.props.children}&lt;/button&gt; 
              ) 
          } 
      } </pre>
<ol start="4">
<li>Define a <kbd>Text</kbd> class component extending the <kbd>React.Component</kbd> class:</li>
</ol>
<pre>      class Text extends React.Component { 
          componentDidUpdate() { 
              console.log('Text Component did update!') 
          } 
          render() { 
              return this.props.children 
          } 
      } </pre>
<ol start="5">
<li>Define a simple <kbd>App</kbd> component that will render both components. The <kbd>App</kbd> component will set a timer once it's mounted and update the state around every second:</li>
</ol>
<pre>      class App extends React.Component { 
          state = { 
              counter: 0, 
          } 
          componentDidMount() { 
              this.intervalId = setInterval(() =&gt; { 
                  this.setState(({ counter }) =&gt; ({ 
                      counter: counter + 1, 
                  })) 
              }, 1000) 
          } 
          componentWillUnmount() { 
              clearInterval(this.intervalId) 
          } 
          render() { 
              const { counter } = this.state 
              return ( 
                  &lt;React.Fragment&gt; 
                      &lt;h1&gt;Counter: {counter}&lt;/h1&gt; 
                      &lt;Text&gt;I'm just a text&lt;/Text&gt; 
                      &lt;Button&gt;I'm a button&lt;/Button&gt; 
                  &lt;/React.Fragment&gt; 
              ) 
          } 
      } </pre>
<ol start="6">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;App /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="7">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To see the previous work in action, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre><strong>     </strong> http://localhost:1337/  </pre>
<ol start="3">
<li>The counter will increase by one around every second. Open the developer tools in your browser and check the console output. You should see the following:</li>
</ol>
<pre>      [N] Text Component did update! </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Because <kbd>React.PureComponent</kbd> implements the <kbd>shouldComponentUpdate</kbd><strong>life cycle method</strong> internally, it doesn't update the <kbd>Button</kbd> component because its <kbd>state</kbd> or <kbd>props</kbd> have not changed. It does, however, update the <kbd>Text</kbd> component because <kbd>shouldComponentUpdate</kbd> returns <kbd>true</kbd> by default, telling React to update the component, even though its props or state have not changed.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">React event handlers</h1>
                </header>
            
            <article>
                
<p>React's event system uses internally a wrapper, called <kbd>SyntheticEvent</kbd>, around the native HTML DOM events for cross-browser support. React events follow the W3C spec, which can be found at <a href="https://www.w3.org/TR/DOM-Level-3-Events/"><span class="URLPACKT">https://www.w3.org/TR/DOM-Level-3-Events/</span></a><span class="URLPACKT">.</span><a href="https://www.w3.org/TR/DOM-Level-3-Events/"/></p>
<p>React event names are camel-cased as opposed to HTML DOM events, which are lowercased. For instance, the HTML DOM event <kbd>onclick</kbd> would be called <kbd>onClick</kbd> in React. For a complete list of supported events, visit the React official documentation about events: <a href="https://reactjs.org/docs/events.html">https://reactjs.org/docs/events.html</a></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will write a component to see how it is defined and how it works. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>npm install</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Firstly, create an <kbd>index.html</kbd> file where the React application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;React Events Handlers&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./events.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Next, write a component defining an event handler for the <kbd>onClick</kbd> event:</p>
<ol>
<li>Create a new file named <kbd>events.js.</kbd></li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a class component that will render a <kbd>h1</kbd> React element and a <kbd>button</kbd> React element, which will trigger the <kbd>onBtnClick</kbd> method whenever it's clicked:</li>
</ol>
<pre>      class App extends React.Component { 
          constructor(props) { 
              super(props) 
              this.state = { 
                  title: 'Untitled', 
              } 
              this.onBtnClick = this.onBtnClick.bind(this) 
          } 
          onBtnClick() { 
              this.setState({ 
                  title: 'Hello there!', 
              }) 
          } 
          render() { 
              return ( 
                  &lt;section&gt; 
                      &lt;h1&gt;{this.state.title}&lt;/h1&gt; 
                      &lt;button onClick={this.onBtnClick}&gt; 
                          Click me to change the title 
                      &lt;/button&gt; 
                  &lt;/section&gt; 
              ) 
          } 
      } </pre>
<ol start="4">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;App /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="5">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To see the application working, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre>       <strong>npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre>      http://localhost:1337/</pre>
<ol start="3">
<li>Click on the button to change the title.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>React events are passed to React elements as <kbd>props</kbd>. For instance, we passed the <kbd>onClick</kbd> prop to the <kbd>button</kbd> React element and a reference to a callback function that we expect to be called when the user clicks on the button.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Did you notice that we have been using the <kbd>bind</kbd> very often? When a method is passed as a prop to a child component, it loses the context of <kbd>this</kbd>, so binding to the context is necessary. Take the following example:</p>
<pre>class Example { 
    fn() { return this } 
} 
const examp = new Example() 
const props = examp.fn 
const bound = examp.fn.bind(examp) 
console.log('1:', typeof examp.fn()) 
console.log('2:', typeof props()) 
console.log('3:', typeof bound()) </pre>
<p>The output displayed will be:</p>
<pre><strong>1: object 
2: undefined 
3: object</strong> </pre>
<p>Even though the constant <kbd>props</kbd> has a reference to the <kbd>fn</kbd> method of the <kbd>examp</kbd> instance of the <kbd>Example</kbd> class, it loses the context of <kbd>this</kbd>. That's why binding allows you to keep the original context. In React, we bind a method to the original context of <kbd>this</kbd> to be able to use our own instance methods, such as <kbd>setState,</kbd> when passing the function down to child components. Otherwise, the context of <kbd>this</kbd> will be <kbd>undefined</kbd> and the function will fail.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Conditional rendering of components</h1>
                </header>
            
            <article>
                
<p>Usually when building complex UIs, you would need to render a component or a React element according to the state or props received.</p>
<p>React components allow JavaScript to be executed within curly brackets and it can be used with the conditional ternary operator to decide which component or React element to render. For instance:</p>
<pre>const Meal = ({ timeOfDay }) =&gt; (  
    &lt;span&gt;{timeOfDay === 'noon' 
        ? 'Pizza' 
        : 'Sandwich' 
    }&lt;/span&gt;  
) </pre>
<p>This also could have been written as:</p>
<pre>const Meal = ({ timeOfDay }) =&gt; (  
    &lt;span children={timeOfDay === 'noon' 
        ? 'Pizza' 
        : 'Sandwich' 
    } /&gt;  
) </pre>
<p>If passing <kbd>"noon"</kbd> as the <kbd>timeOfDay</kbd> property value, it will generate the following HTML content:</p>
<pre>&lt;span&gt;Pizza&lt;/span&gt; </pre>
<p>Or the following when the <kbd>timeOfDay</kbd> property is not set to <kbd>"noon"</kbd>:</p>
<pre>&lt;span&gt;Sandwich&lt;/span&gt; </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will build a component that that renders one of its children according to a given condition. Firstly, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc,</kbd> adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>npm install</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Write a React component that will decide which of two different React elements, given as <kbd>children</kbd> to your component, will be displayed according to a <kbd>condition</kbd> passed as a property. If the condition is true, then the first child is displayed. Otherwise, the second child should be displayed.</p>
<p>First, create an <kbd>index.html</kbd> file where the React application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Conditional Rendering&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./conditions.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Then, create a new file containing the logic of the React application and your component:</p>
<ol>
<li>Create a new file named <kbd>conditions.js</kbd></li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a functional component named <kbd>Toggle</kbd> that will receive a <kbd>condition</kbd> property that will be evaluated to define which React element to render. It expects to receive two React elements as children:</li>
</ol>
<pre>      const Toggle = ({ condition, children }) =&gt; ( 
          condition 
              ? children[0] 
              : children[1] 
      ) </pre>
<ol start="4">
<li>Define a class component named <kbd>App</kbd> that will render a React element based on the defined condition. When the button is clicked, it will toggle the <kbd>color</kbd> state:</li>
</ol>
<pre>      class App extends React.Component { 
          constructor(props) { 
              super(props) 
              this.state = { 
                  color: 'blue', 
              } 
              this.onClick = this.onClick.bind(this) 
          } 
          onClick() { 
              this.setState(({ color }) =&gt; ({ 
                  color: (color === 'blue') ? 'lime' : 'blue' 
              })) 
          } 
          render() { 
              const { color } = this.state 
              return ( 
                  &lt;React.Fragment&gt; 
                      &lt;Toggle condition={color === 'blue'}&gt; 
                          &lt;p style={{ color }}&gt;Blue!&lt;/p&gt; 
                          &lt;p style={{ color }}&gt;Lime!&lt;/p&gt; 
                      &lt;/Toggle&gt; 
                      &lt;button onClick={this.onClick}&gt; 
                          Toggle Colors 
                      &lt;/button&gt; 
                  &lt;/React.Fragment&gt; 
              ) 
          } 
      } </pre>
<ol start="5">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;App /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="6">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To run and test the application, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre>      http://localhost:1337/</pre>
<ol start="3">
<li>Click on the button to toggle which React element is displayed</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Because the <kbd>children</kbd> property can be an array of React elements, we can access each individual React element and decide which one to render. We used the <kbd>condition</kbd> property to evaluate if the given condition is truthy to render the first React element. Otherwise, if the value is falsy, then the second React element is rendered.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Rendering lists with React</h1>
                </header>
            
            <article>
                
<p>React allows you to pass a collection of React elements or components as <kbd>children</kbd> in the form of an array. For instance:</p>
<pre>   &lt;ul&gt; 
      {[ 
         &lt;li key={0}&gt;One&lt;/li&gt;, 
         &lt;li key={1}&gt;Two&lt;/li&gt;, 
      ]} 
   &lt;/ul&gt; </pre>
<p>Collections of React elements or components must be given a special props property named <kbd>key</kbd>. This property lets React know which of the elements in the collection have changed, moved, or been removed in/from the array when an update occurs.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will build a utility component that will map each item of an array to a component's props and render them as a list. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>      npm install</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Create a React component named <kbd>MapArray,</kbd> which will do the job of mapping the items of an array to a React component.</p>
<p>First, create an <kbd>index.html</kbd> file where the React application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Rendering Lists&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
         &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./lists.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Then, perform the following steps to build the React application:</p>
<ol>
<li>Create a new file named <kbd>lists.js</kbd>.</li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a functional component called <kbd>MapArray</kbd> that will expect to receive three properties: <kbd>from,</kbd> which is expected to be an array of values, <kbd>mapToProps,</kbd> which is expected to be a callback function for mapping values to properties, and lastly, <kbd>children,</kbd> which is expected to receive a React component where the values of the array will be mapped to:</li>
</ol>
<pre>      const MapArray = ({ 
          from, 
          mapToProps, 
          children: Child, 
      }) =&gt; ( 
          &lt;React.Fragment&gt; 
              {from.map((item) =&gt; ( 
                  &lt;Child {...mapToProps(item)} /&gt; 
              ))} 
          &lt;/React.Fragment&gt; 
      ) </pre>
<ol start="4">
<li>Define a <kbd>TodoItem</kbd> component that expects to receive two properties, <kbd>done</kbd> and <kbd>label</kbd>:</li>
</ol>
<pre>      const TodoItem = ({ done, label }) =&gt; ( 
          &lt;li&gt; 
              &lt;input type="checkbox" checked={done} readOnly /&gt; 
              &lt;label&gt;{label}&lt;/label&gt; 
          &lt;/li&gt; 
      ) </pre>
<ol start="5">
<li>Define an array that contains a to-do list of object values:</li>
</ol>
<pre>      const list = [ 
          { id: 1, done: true, title: 'Study for Chinese exam' }, 
          { id: 2, done: false, title: 'Take a shower' }, 
          { id: 3, done: false, title: 'Finish chapter 6' }, 
      ] </pre>
<ol start="6">
<li>Define a callback function that will map the array's object values to the expected properties of the <kbd>TodoItem</kbd> component. Rename the <kbd>id</kbd> property as <kbd>key</kbd>, and the <kbd>title</kbd> property as <kbd>label</kbd>:</li>
</ol>
<pre>      const mapToProps = ({ id: key, done, title: label }) =&gt; ({ 
          key, 
          done, 
          label, 
      }) </pre>
<ol start="7">
<li>Define a <kbd>TodoListApp</kbd> component that will make use of the <kbd>MapArray</kbd> component to create an instance of <kbd>TodoItem</kbd> for every item in the to-do list array:</li>
</ol>
<pre>      const TodoListApp = ({ items }) =&gt; ( 
          &lt;ol&gt; 
              &lt;MapArray from={list} mapToProps={mapToProps}&gt; 
                  {TodoItem} 
              &lt;/MapArray&gt; 
          &lt;/ol&gt; 
      ) </pre>
<ol start="8">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;TodoListApp items={list} /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="9">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To run and test the application, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre>      http://localhost:1337/</pre>
<ol start="3">
<li>A list of to-do items should be displayed:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="Images/171e72df-e830-48e0-b055-a25647d630d9.png" style="width:17.83em;height:7.08em;" width="438" height="174"/></div>
<div class="packt_figure packt_figref CDPAlignCenter CDPAlign">List of to-do items</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Look at the following code:</p>
<pre>&lt;ol&gt; 
   &lt;MapArray from={list} mapToProps={mapToProps}&gt; 
      {TodoItem} 
   &lt;/MapArray&gt; 
&lt;/ol&gt; </pre>
<p>This works pretty much the same as writing:</p>
<pre>&lt;ol&gt; 
   &lt;React.Fragment&gt; 
      {from.map((item) =&gt; ( 
         &lt;TodoItem {...mapToProps(item) } /&gt; 
      ))} 
   &lt;/React.Fragment&gt; 
&lt;/ol&gt; </pre>
<p>However, <kbd>MapArray</kbd> acts as a helper component to do the same job while keeping the code more readable.</p>
<p>Have you noticed that the <kbd>TodoItem</kbd> component expects only two properties? However, we're also passing the <kbd>id</kbd> of the items as <kbd>key</kbd>. If the <kbd>key</kbd> property is not passed, then while rendering the components, a warning will be displayed.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Working with forms and inputs in React</h1>
                </header>
            
            <article>
                
<p><strong>Form-associated elements,</strong> such as <kbd>&lt;input&gt;</kbd> and <kbd>&lt;textarea&gt;</kbd>, usually maintain their own internal state and update it according to the user input. In React, when the input of a <strong>form-associated element</strong> is managed using the React state, it's called a <strong>controlled component</strong>.</p>
<p>By default, in React, if the <kbd>value</kbd> property of an input is not set, then the input internal state can be mutated by the user input. However, if the <kbd>value</kbd> property is set, then the input is read-only and it expects React to manage the user input by using the <kbd>onChange</kbd> React event and manage the input's state using the React state to update it if necessary. For example, this <kbd>input</kbd> React element will be rendered as read-only:</p>
<pre>&lt;input type="text" value="Ms.Huang Jx" /&gt; </pre>
<p>However, because React expects to find an <kbd>onChange</kbd> event handler, the previous code will output a warning message on the console. To fix this, we can provide to the <kbd>onChange</kbd> property a callback function to handle the user input:</p>
<pre>&lt;input type="text" value="Ms.Huang Jx" onChange={event =&gt; null} /&gt; </pre>
<p>Because the user input is handled by React and, in the previous example, we don't update the input's value, then the input will appear to be read-only. The previous code is similar to just setting a <kbd>readOnly</kbd> property instead of providing a useless <kbd>onChange</kbd> property.</p>
<p>React also allows you to define <strong>uncontrolled components,</strong> which basically keep out of React's control what or input how the input is updated. For instance, when a third-party library is used instead to act over the input, <strong>uncontrolled components</strong> have a property called <kbd>defaultValue,</kbd> which is similar to the <kbd>value</kbd> property. However, it lets the input control its internal state by the user input and not by React. That means a <strong>form-associated element</strong> with a <kbd>defaultValue</kbd> property allows its state to be mutated by the user input:</p>
<pre>&lt;input type="text" defaultValue="Ms.Huang Jx" /&gt; </pre>
<p>As opposed to using the <kbd>value</kbd> property, you can now type in the input box to change its value because the internal state of the input is mutable.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will build a simple login form component. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>      npm install</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Define a class component named <kbd>LoginForm</kbd> that will handle <kbd>username</kbd> input and <kbd>password</kbd> input.</p>
<p>Firstly, create an <kbd>index.html</kbd> file where the React application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Forms and Inputs&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./forms.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Next, build the <kbd>LoginForm</kbd> component and use the power given to you by React <em>controlled components</em> over the input's state to also disallow numbers on the <kbd>username</kbd> input:</p>
<ol>
<li>Create a new file named <kbd>forms.js</kbd>.</li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a class component named <kbd>LoginForm</kbd>. Within the class, define an event handler for the input change, and check the <kbd>username</kbd> input's value to disallow introducing numbers:</li>
</ol>
<pre>      class LoginForm extends React.Component { 
          constructor(props) { 
              super(props) 
              this.state = { 
                  username: '', 
                  password: '', 
              } 
              this.onChange = this.onChange.bind(this) 
          } 
          onChange(event) { 
              const { name, value } = event.target 
              this.setState({ 
                  [name]: name === 'username' 
                      ? value.replace(/d/gi, '') 
                      : value 
              }) 
          } 
          render() { 
              return ( 
                  &lt;form&gt; 
                      &lt;input 
                          type="text" 
                          name="username" 
                          placeholder="Username" 
                          value={this.state.username} 
                          onChange={this.onChange} 
                      /&gt; 
                      &lt;input 
                          type="password" 
                          name="password" 
                          placeholder="Password" 
                          value={this.state.password} 
                          onChange={this.onChange} 
                      /&gt; 
                      &lt;pre&gt; 
                          {JSON.stringify(this.state, null, 2)} 
                      &lt;/pre&gt; 
                  &lt;/form&gt; 
              ) 
          } 
      } </pre>
<ol start="4">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;LoginForm /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="5">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To run and test the application, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre><strong>      </strong>http://localhost:1337/</pre>
<ol start="3">
<li>Try to introduce a number in the <kbd>username</kbd> input to see how the validation against numbers is working</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>We define an <kbd>onChange</kbd> event handler used in both input elements. However, we check if the input's name is <kbd>username</kbd> to decide if the validation should be applied. <kbd>RegExp</kbd> is used to test for numbers in the input and replace them with an empty string. That's why numbers are not displayed while typing on the <kbd>username</kbd> input.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Understanding refs and how to use them</h1>
                </header>
            
            <article>
                
<p>In the usual workflow, React components communicate with their children by passing <kbd>props</kbd>. However, there are a few cases where it's needed to access the instance of a child to communicate or modify its behavior. React uses <kbd>refs</kbd> to allow us to access the instance of a child.</p>
<p>It's important to understand that React components' instances give you access to their instance methods and properties. However, an instance of a React element is an instance of an HTML DOM element. Refs are accessed by giving a <kbd>ref</kbd> attribute to the React component or React element. It expects the value to be a callback function that will be invoked once the instance is created, providing a reference to the instance in the first argument passed to the callback function.</p>
<p>React provides a helper function named <kbd>createRef</kbd> to define function callbacks for setting refs correctly. Take, for example, the following code, which obtains a reference of a React component and a React element:</p>
<pre>class Span extends React.Component { 
    render() { 
        return &lt;span&gt;{this.props.children}&lt;/span&gt; 
    } 
} 
class App extends React.Component { 
    rf1 = React.createRef() 
    rf2 = React.createRef() 
    componentDidMount() { 
        const { rf1, rf2 } = this 
        console.log(rf1.current instanceof HTMLSpanElement) 
        console.log(rf2.current instanceof Span) 
    } 
    render() { 
        return ( 
            &lt;React.Fragment&gt; 
                &lt;span ref={this.rf1} /&gt; 
                &lt;Span ref={this.rf2} /&gt; 
            &lt;/React.Fragment&gt; 
        ) 
    } 
} </pre>
<p>In this example, the console will output <kbd>true</kbd> twice:</p>
<pre>true // rf1.current instanceof HTMLSpanElement 
true // rf2.current instanceof Span </pre>
<p>This proves what we have just learned.</p>
<div class="packt_infobox">Functional components do not have <kbd>refs</kbd>. Thus, giving a <kbd>ref</kbd> property to a functional component will display a warning in the console and fail.</div>
<p><strong>Refs</strong> are especially useful for working with <em>uncontrolled components</em> in the following cases:</p>
<ul>
<li>Integration with third-party libraries</li>
<li>Accessing an HTML DOM element's native methods that are otherwise inaccessible from React, such as the <kbd>HTMLElement.focus()</kbd> method</li>
<li>Using certain web APIs, such as the Selection Web API, the Web Animations API, and media playback methods</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will work with uncontrolled components and use refs to send a custom event to a form HTML element. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc,</kbd> adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>      npm install</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Define a <kbd>LoginForm</kbd> class component that will render a form with two inputs: one for a username and the other for a password. Include a button outside of the form React element, which will be used for triggering the <kbd>onSubmit</kbd> event on the form React element.</p>
<p>Firstly, create an <kbd>index.html</kbd> file where the React application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Refs&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./refs.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p class="mce-root">Now, start building the React application:</p>
<ol>
<li>Create a new file named <kbd>refs.js</kbd>.</li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a class component named <kbd>LoginForm</kbd> that will render the form and a button that will trigger the <kbd>onSubmit</kbd> form event, using <kbd>refs</kbd>, when clicked:</li>
</ol>
<pre>      class LoginForm extends React.Component { 
          refForm = React.createRef() 
          constructor(props) { 
              super(props) 
              this.state = {} 
              this.onSubmit = this.onSubmit.bind(this) 
              this.onClick = this.onClick.bind(this) 
          } 
          onSubmit(event) { 
              const form = this.refForm.current 
              const data = new FormData(form) 
              this.setState({ 
                  user: data.get('user'), 
                  pass: data.get('pass'), 
              }) 
              event.preventDefault() 
          } 
          onClick(event) { 
              const form = this.refForm.current 
              form.dispatchEvent(new Event('submit')) 
          } 
          render() { 
              const { onSubmit, onClick, refForm, state } = this 
              return ( 
                  &lt;React.Fragment&gt; 
                      &lt;form onSubmit={onSubmit} ref={refForm}&gt; 
                          &lt;input type="text" name="user" /&gt; 
                          &lt;input type="text" name="pass" /&gt; 
                      &lt;/form&gt; 
                      &lt;button onClick={onClick}&gt;LogIn&lt;/button&gt; 
                      &lt;pre&gt;{JSON.stringify(state, null, 2)}&lt;/pre&gt; 
                  &lt;/React.Fragment&gt; 
              ) 
          } 
      } </pre>
<ol start="4">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;LoginForm /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="5">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To run and test the application, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre><strong>      </strong>http://localhost:1337/</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<ol>
<li>Click on the <kbd>LogIn</kbd> button to test that the form <kbd>onSubmit</kbd> events gets triggered.</li>
<li>First, a reference to the instance of the form DOM element is kept in an instance property called <kbd>reform</kbd>.</li>
<li>Then, once the button is submitted, we use the <kbd>EventTarget</kbd> web API <kbd>dispatchEvent</kbd> method to dispatch a custom event <kbd>submit</kbd> on the form DOM element.</li>
<li>Then, the dispatched <kbd>submit</kbd> method is caught by the React <kbd>SyntheticEvent</kbd>.</li>
<li>Finally, React triggers the callback method passed to the form's <kbd>onSubmit</kbd> property.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Understanding React portals</h1>
                </header>
            
            <article>
                
<p>React portals allow us to render child components in a different DOM element outside of the DOM tree generated by the parent component while keeping the React tree as if the component is inside the DOM tree generated by the parent component. For instance, even though child components are located in a different DOM node, the events generated in a child component bubble up to the React parent component.</p>
<p>React portals are created using the ReactDOM library's <kbd>createPortal</kbd> method and it has the same signature as the <kbd>render</kbd> method:</p>
<pre>ReactDOM.createPortal(  
    ReactComponent, 
    DOMNode,  
) </pre>
<p>However, the difference between <kbd>render</kbd> and <kbd>createPortal</kbd> is that the latter returns a special tag that is used in the React tree to identify this element as a React portal and to use it as if it were a React element. For instance:</p>
<pre>&lt;article&gt; 
   {ReactDOM.createPortal( 
      &lt;h1&gt;Example&lt;/h1&gt;, 
      document.querySelector('[id="heading"]'), 
   )} 
&lt;/article&gt; </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>      npm install</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>First, create an <kbd>index.html</kbd> file where the React application will be rendered, containing as well an HTML <kbd>header</kbd> tag where a React portal element will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Portals&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;header id="heading"&gt;&lt;/header&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./portals.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Next, build a React application that will render a paragraph and an <kbd>h1</kbd> HTML element outside of the tree to a <kbd>header</kbd> HTML element:</p>
<ol>
<li>Create a new file named <kbd>portals.js</kbd>.</li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define a functional component named <kbd>Header</kbd> and create a portal to render the <kbd>children</kbd> to a different DOM element:</li>
</ol>
<pre>      const Header = () =&gt; ReactDOM.createPortal( 
          &lt;h1&gt;React Portals&lt;/h1&gt;, 
          document.querySelector('[id="heading"]'), 
      ) </pre>
<ol start="4">
<li>Define a functional component named <kbd>App</kbd> that will render a React element and the <kbd>Header</kbd> React component:</li>
</ol>
<pre>      const App = () =&gt; ( 
          &lt;React.Fragment&gt; 
              &lt;p&gt;Hello World!&lt;/p&gt; 
              &lt;Header /&gt; 
          &lt;/React.Fragment&gt; 
      ) </pre>
<ol start="5">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;App /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="6">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To run and test the application, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre><strong>      </strong>http://localhost:1337/</pre>
<ol start="3">
<li>The generated HTML DOM tree would look similar to this:</li>
</ol>
<pre>      &lt;header id="heading"&gt; 
         &lt;h1&gt;React Portals&lt;/h1&gt; 
      &lt;/header&gt; 
      &lt;section role="main"&gt; 
         &lt;p&gt;Hello World!&lt;/p&gt; 
      &lt;/section&gt; </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Even though in the React tree the <kbd>Header</kbd> component appears to be rendered after the paragraph <kbd>p</kbd> HTML tag, the rendered <kbd>Header</kbd> component renders before it. That's because the <kbd>Header</kbd> component is actually rendered on a <kbd>header</kbd> HTML tag that appears before the <kbd>section</kbd> HTML tag where the main application is rendered.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Catching errors with error boundary components</h1>
                </header>
            
            <article>
                
<p><strong>Error boundary components</strong> are just React components that implement the <kbd>componentDidCatch</kbd>Â <strong>life cycle method</strong> to catch errors in their children. They catch errors in <kbd>constructor</kbd> methods when a class component is initialized but fails, in life cycle methods, and while rendering. Errors that cannot be caught are from asynchronous code, event handlers, and errors in the error component boundary itself.</p>
<p>The <kbd>componentDidCatch</kbd>Â life cycle method receives two arguments: the first one is an <kbd>error</kbd> object while the second received argument is an object containing a <kbd>componentStack</kbd> property with a friendly stack trace that describes where in the React tree a component failed.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will build an error boundary component and provide a fallback UI when there is an error while rendering. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "babel-core": "6.26.3", 
    "parcel-bundler": "1.8.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>      npm install</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>First, create an <kbd>index.html</kbd> file where the React application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Catching Errors&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./error-boundary.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Next, define an error boundary component that will catch errors and render a fallback UI displaying information where the error happened and the error message. Define as well an <kbd>App</kbd> component and create a <kbd>button</kbd> React element that when clicked will cause the application to fail while setting the state:</p>
<ol>
<li>Create a new file named <kbd>error-boundary.js</kbd>.</li>
<li>Import the React and ReactDOM libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' </pre>
<ol start="3">
<li>Define an <kbd>ErrorBoundary</kbd> component that will display a fallback message when the application fails to render:</li>
</ol>
<pre>      class ErrorBoundary extends React.Component { 
          constructor(props) { 
              super(props) 
              this.state = { 
                  hasError: false, 
                  message: null, 
                  where: null, 
              } 
          } 
          componentDidCatch(error, info) { 
              this.setState({ 
                  hasError: true, 
                  message: error.message, 
                  where: info.componentStack, 
              }) 
          } 
          render() { 
              const { hasError, message, where } = this.state 
              return (hasError 
                  ? &lt;details style={{ whiteSpace: 'pre-wrap' }}&gt; 
                      &lt;summary&gt;{message}&lt;/summary&gt; 
                      &lt;p&gt;{where}&lt;/p&gt; 
                  &lt;/details&gt; 
                  : this.props.children 
              ) 
          } 
      } </pre>
<ol start="4">
<li>Define a class component named <kbd>App</kbd> that will render a <kbd>button</kbd> React element. Once the button is clicked, it will purposely throw an error:</li>
</ol>
<pre>      class App extends React.Component { 
          constructor(props) { 
              super(props) 
              this.onClick = this.onClick.bind(this) 
          } 
          onClick() { 
              this.setState(() =&gt; { 
                  throw new Error('Error while setting state.') 
              }) 
          } 
          render() { 
              return ( 
                  &lt;button onClick={this.onClick}&gt; 
                      Buggy button! 
                  &lt;/button&gt; 
              ) 
          } 
      } </pre>
<ol start="5">
<li>Render the application wrapping the <kbd>App</kbd> within the <kbd>ErrorBoundary</kbd> component:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;ErrorBoundary&gt; 
              &lt;App /&gt; 
          &lt;/ErrorBoundary&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="6">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To run and test the application, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre>      http://localhost:1337/</pre>
<ol start="3">
<li>Click on the <kbd>button</kbd> to cause the application to fail</li>
<li>A fallback UI is displayed showing the following error:</li>
</ol>
<pre>      <strong>Error while setting state.  
          in App 
          in ErrorBoundary</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Type checking properties with PropTypes</h1>
                </header>
            
            <article>
                
<p>React allows you to implement runtime type checking of components' properties. It's useful to catch bugs and make sure that your components are receiving <kbd>props</kbd> correctly. This can be easily done by just setting a static <kbd>propType</kbd> property on your components. For instance:</p>
<pre>class MyComponent extends React.Component { 
   static propTypes = { 
      children: propTypes.string.isRequired, 
   } 
   render() { 
      return&lt;span&gt;{this.props.children}&lt;/span&gt; 
   } 
} </pre>
<p>The previous code will require <kbd>MyComponent</kbd>'s <kbd>children</kbd> property to be a <kbd>string</kbd>. Otherwise, if a different property type is given, React will display a warning in the console.</p>
<p><kbd>propTypes'</kbd> methods are functions that get triggered when the component's instance is created to check if the given <kbd>props</kbd> match the <kbd>propTypes</kbd> schema.</p>
<p><kbd>propTypes</kbd> have an extensive list of methods that can be used for the validation of properties. You can find the complete list in the React official documentation: <span class="URLPACKT"><a href="https://reactjs.org/docs/typechecking-with-proptypes.html">https://reactjs.org/docs/typechecking-with-proptypes.html</a>.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In this recipe, you will see and write custom validation rules for checking property types. Before you start, create a new <kbd>package.json</kbd> file with the following content:</p>
<pre>{ 
  "scripts": { 
    "start": "parcel serve -p 1337 index.html" 
  }, 
  "devDependencies": { 
    "babel-core": "6.26.3", 
    "babel-plugin-transform-class-properties": "6.24.1", 
    "babel-preset-env": "1.6.1", 
    "babel-preset-react": "6.24.1", 
    "parcel-bundler": "1.8.1", 
    "prop-types": "15.6.1", 
    "react": "16.3.2", 
    "react-dom": "16.3.2" 
  } 
} </pre>
<p>Next, create a babel configuration file as <kbd>.babelrc</kbd>, adding the following content:</p>
<pre>{ 
    "presets": ["env","react"], 
    "plugins": ["transform-class-properties"] 
} </pre>
<p>Then, install the dependencies by opening a Terminal and running:</p>
<pre><strong>npm install</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>First, create an <kbd>index.html</kbd> file where the React application will be rendered:</p>
<ol>
<li>Create a new file named <kbd>index.html</kbd></li>
<li>Add the following HTML code:</li>
</ol>
<pre>      &lt;!DOCTYPE html&gt; 
      &lt;html lang="en"&gt; 
      &lt;head&gt; 
          &lt;meta charset="UTF-8"&gt; 
          &lt;title&gt;Type Checking&lt;/title&gt; 
      &lt;/head&gt; 
      &lt;body&gt; 
          &lt;div role="main"&gt;&lt;/div&gt; 
          &lt;script src="./type-checking.js"&gt;&lt;/script&gt; 
      &lt;/body&gt; 
      &lt;/html&gt; </pre>
<ol start="3">
<li>Save the file</li>
</ol>
<p>Next, define a <kbd>Toggle</kbd> class component that expects to receive two React elements as <kbd>children</kbd>. Use <kbd>PropTypes</kbd> to create a custom validation rule to check that the <kbd>children</kbd> property is an array of React elements and the component is receiving exactly two React elements:</p>
<ol>
<li>Create a new file named <kbd>type-checking.js</kbd>.</li>
<li>Import the React, ReactDOM, and <kbd>PropTypes</kbd> libraries:</li>
</ol>
<pre>      import * as React from 'react' 
      import * as ReactDOM from 'react-dom' 
      import * as propTypes from 'prop-types' </pre>
<ol start="3">
<li>Define a class component named <kbd>Toggle</kbd>. Use <kbd>propTypes</kbd> for type-checking the <kbd>condition</kbd> and <kbd>children</kbd> properties. Use a custom <kbd>propType</kbd> to check if <kbd>children</kbd> is an array of React elements and that it contains exactly two React elements:</li>
</ol>
<pre>      class Toggle extends React.Component { 
          static propTypes = { 
              condition: propTypes.any.isRequired, 
              children: (props, propName, componentName) =&gt; { 
                  const customPropTypes = { 
                      children: propTypes 
                          .arrayOf(propTypes.element) 
                          .isRequired 
                  } 
                  const isArrayOfElements = propTypes 
                      .checkPropTypes( 
                          customPropTypes, 
                          props, 
                          propName, 
                          componentName, 
                  ) 
                  const children = props[propName] 
                  const count = React.Children.count(children) 
                  if (isArrayOfElements instanceof Error) { 
                      return isArrayOfElements 
                  } else if (count !== 2) { 
                      return new Error( 
                          `"${componentName}"` + 
                          ` expected ${propName}` + 
                          ` to contain exactly 2 React elements` 
                      ) 
                  } 
              } 
          } 
          render() { 
              const { condition, children } = this.props 
              return condition ? children[0] : children[1] 
          } 
      } </pre>
<ol start="4">
<li>Define a class component named <kbd>App</kbd> that will render the <kbd>Toggle</kbd> component. Provide three React elements as its <kbd>children</kbd> and a <kbd>button</kbd> that when clicked will toggle the <kbd>value</kbd> property of state from <kbd>true</kbd> to <kbd>false</kbd> and vice versa:</li>
</ol>
<pre>      class App extends React.Component { 
          constructor(props) { 
              super(props) 
              this.state = { value: false } 
              this.onClick = this.onClick.bind(this) 
          } 
          onClick() { 
              this.setState(({ value }) =&gt; ({ 
                  value: !value, 
              })) 
          } 
          render() { 
              const { value } = this.state 
              return ( 
                  &lt;React.Fragment&gt; 
                      &lt;Toggle condition={value}&gt; 
                          &lt;p style={{ color: 'blue' }}&gt;Blue!&lt;/p&gt; 
                          &lt;p style={{ color: 'lime' }}&gt;Lime!&lt;/p&gt; 
                          &lt;p style={{ color: 'pink' }}&gt;Pink!&lt;/p&gt; 
                      &lt;/Toggle&gt; 
                      &lt;button onClick={this.onClick}&gt; 
                          Toggle Colors 
                      &lt;/button&gt; 
                  &lt;/React.Fragment&gt; 
              ) 
          } 
      } </pre>
<ol start="5">
<li>Render the application:</li>
</ol>
<pre>      ReactDOM.render( 
          &lt;App /&gt;, 
          document.querySelector('[role="main"]'), 
      ) </pre>
<ol start="6">
<li>Save the file.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Let's test it...</h1>
                </header>
            
            <article>
                
<p>To run and test the application, perform the following steps:</p>
<ol>
<li>Open a Terminal at the root of your project directory and run:</li>
</ol>
<pre><strong>      npm start</strong></pre>
<ol start="2">
<li>Then, open a new tab in your web browser and go to:</li>
</ol>
<pre>      http://localhost:1337/</pre>
<ol start="3">
<li>The console in your browser will display the following warning:</li>
</ol>
<pre>      <strong>Warning: Failed prop type: "Toggle" expected children to contain exactly 2 React       elements 
          in Toggle (created by App) 
          in App</strong> </pre>
<ol start="4">
<li>Clicking the <kbd>button</kbd> will toggle between the first two React elements while the third React element will be ignored</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>We define a custom function validator for the <kbd>children</kbd> property. Inside the function, we first use the built-in <kbd>propTypes</kbd> functions to check if <kbd>children</kbd> is an array of React elements. If the result of the validation is not an instance of <kbd>Error</kbd>, then we use the React <kbd>Children</kbd>'s <kbd>count</kbd> utility method to know how many React elements were given and we return an error if the number of React elements in children is not <kbd>2</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Did you notice that we used the <kbd>propTypes.checkPropTypes</kbd> method? It's a utility function that allows us to check for <kbd>propTypes</kbd> even outside React. For instance:</p>
<pre>const pTypes = { 
   name: propTypes.string.isRequired, 
   age: propTypes.number.isRequired, 
} 
const props = { 
   name: 'Huang Jx', 
   age: 20, 
} 
propTypes.checkPropTypes(pTypes, props, 'property', 'props') </pre>
<p>The <kbd>pTypes</kbd> object works as a schema providing validation functions from <kbd>propTypes</kbd>. The <kbd>props</kbd> constant is just a plain object containing properties defined in <kbd>pTypes</kbd>.</p>
<p>Running the previous example won't output any warning in the console since all properties in <kbd>props</kbd> are valid. However, change the <kbd>props</kbd> object to:</p>
<pre>const props = { 
   name: 20, 
   age: 'Huang Jx', 
} </pre>
<p>Then we will see the following warning in the console output:</p>
<pre>Warning: Failed property type: Invalid property `name` of type `number` supplied to `props`, expected `string`. 
Warning: Failed property type: Invalid property `age` of type `string` supplied to `props`, expected `number`. </pre>
<p>The <kbd>checkPropTypes</kbd> utility method has the following signature:</p>
<pre>checkPropTypes(typeSpecs, values, location, componentName, getStack) </pre>
<p>Here, <kbd>typeSpecs</kbd> refers to an object containing <kbd>propTypes</kbd> function validators. The <kbd>values</kbd> argument expects to receive an object whose values need to be validated against <kbd>typeSpecs</kbd>. <kbd>componentName</kbd> refers to the source's name, which usually is a component's name that is used in the warning message to display where the <kbd>Error</kbd> was originated. The last argument, <kbd>getStack,</kbd> is optional and it's expected to be a callback function that should return a <kbd>Stack Trace</kbd> that is added at the end of the warning message to better describe where exactly the error was originated.</p>
<p><kbd>propTypes</kbd> are used only in development and for using the production build of React, you must set up the bundler to replace <kbd>process.env.NODE_ENV</kbd> with <kbd>"production"</kbd>. This way, <kbd>propTypes</kbd> are removed in the production build of your application.</p>


            </article>

            
        </section>
    </div>



  </body></html>