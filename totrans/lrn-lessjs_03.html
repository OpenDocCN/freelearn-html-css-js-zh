<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;3.&#xA0;Getting Started with Less"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03" class="calibre1"/>Chapter 3. Getting Started with Less</h1></div></div></div><p class="calibre7">In the first two chapters of this book, <a class="calibre1" title="Chapter 1. Introducing Less" href="part0018_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre9">Introducing Less</em></span>, and <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre9">Building a Less Development Toolkit</em></span>, we learned what Less is, some of its benefits, and the reasons why you should get to grips with a preprocessor that is rapidly gaining serious traction in the development world.</p><p class="calibre7">In this chapter, we're going to start by downloading and installing Less and then setting up our base project that we can reuse throughout this book, which is already set to our preferences. While it might seem a little mundane, it is nevertheless an essential part of working with Less! Once we have our base project ready, we will then delve into a whistle-stop tour of some of the main code features of Less, before looking at how you can compile your Less code into valid CSS and seeing the effects of any changes made to the Less code.</p><p class="calibre7">In this chapter, we will delve a little deeper into Less by covering the following topics:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Incorporating Less into your website</li><li class="listitem">The dangers of using Less on the client side</li><li class="listitem">Exploring the syntax used by Less</li><li class="listitem">Creating some basic styles</li><li class="listitem">Compiling the code and viewing the results</li><li class="listitem">Altering the Less code and viewing the effects of changes</li></ul></div><p class="calibre7">Ready? As they say in temperal mechanics, there's no time like the present to get started...!</p></div>

<div class="book" title="Chapter&#xA0;3.&#xA0;Getting Started with Less">
<div class="book" title="Creating the foundation page"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch03lvl1sec25" class="calibre1"/>Creating the foundation page</h1></div></div></div><p class="calibre7">Now<a id="id186" class="calibre1"/> that we have downloaded the library, the next stage is to set up our base project that we can reuse throughout this book. This is going to be a simple HTML5 document, which will contain the basic skeleton we will need for our projects.</p><p class="calibre7">For my code editor, I will be using Sublime Text 2, for which we set up support for Less back in <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre9">Building a Less Development Toolkit</em></span>. This is available for download from Sublime Text's website at <a class="calibre1" href="http://www.sublimetext.com/2">http://www.sublimetext.com/2</a>, although you can use whichever editor you are most comfortable with.</p><p class="calibre7">Let's start by<a id="id187" class="calibre1"/> creating our base project file. In a new folder<a id="id188" class="calibre1"/> called <code class="email">lessjs</code>, create a new file and add the following code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCType html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Untitled&lt;/title&gt;
  &lt;link rel="stylesheet/less" href="css/project.less"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip05" class="calibre1"/>Tip</h3><p class="calibre7">
<span class="strong"><strong class="calibre8">Downloading the example code</strong></span>
</p><p class="calibre7">You can download the example code files for all Packt books you have purchased from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p class="calibre7">Save this as <code class="email">project.html</code>. We'll make reference to this throughout the book and it will be the basis for each of our projects when using Less.</p></div></div>
<div class="book" title="Downloading and installing Less"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec26" class="calibre1"/>Downloading and installing Less</h1></div></div></div><p class="calibre7">Now <a id="id189" class="calibre1"/>that we have a test page created, it's time to download the Less <a id="id190" class="calibre1"/>library. The latest version of the library is 1.7.3, which we will reference throughout this book.</p><p class="calibre7">To obtain a copy of the library, there are two main options available: downloading the latest release as a standalone library or compiling code using Node. We'll start with downloading the standalone library.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Installing Less on the client side"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec27" class="calibre1"/>Installing Less on the client side</h1></div></div></div><p class="calibre7">To use Less <a id="id191" class="calibre1"/>in our code, we can download it from the Less site by browsing to <a class="calibre1" href="http://lesscss.org/#download-options-browser-downloads">http://lesscss.org/#download-options-browser-downloads</a> and then clicking on the <span class="strong"><strong class="calibre8">Download Less.js v.1.7.3</strong></span> button.</p><p class="calibre7">Save the contents of the file, displayed in the browser window as <code class="email">less.min.js</code>, in a subfolder called <code class="email">js</code>, under the main <code class="email">lessjs</code> project folder; you will end up with something like this screenshot (this shows the files you will create later in this chapter):</p><div class="mediaobject"><img src="../images/00028.jpeg" alt="Installing Less on the client side" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In a<a id="id192" class="calibre1"/> copy of the <code class="email">project.html</code> file we created at the start of this chapter, add the code as highlighted:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCType html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Untitled&lt;/title&gt;
  &lt;link rel="stylesheet/less" type="text/css" href="css/project.less"&gt;
<span class="strong"><strong class="calibre8">  &lt;script src="js/less.min.js"&gt;&lt;/script&gt;</strong></span>
&lt;/head&gt;
&lt;body&gt;</pre></div><p class="calibre7">That's it—once this has been added, Less will compile the styles into valid CSS dynamically and render the results in the browser. The key point to note is that for Less to compile the styles correctly, the reference to the Less style sheet file must be included in your code first, before the reference to the Less library.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip06" class="calibre1"/>Tip</h3><p class="calibre7">
<span class="strong"><strong class="calibre8">Can I get the source code for Less?</strong></span>
</p><p class="calibre7">If you want to delve into the Less library and examine the code in more detail, then you might like to download a copy of the uncompressed version of the library, which is available at <a class="calibre1" href="https://github.com/less/less.js/archive/master.zip">https://github.com/less/less.js/archive/master.zip</a>.</p></div></div>

<div class="book" title="Installing Less on the client side">
<div class="book" title="Using a CDN"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec23" class="calibre1"/>Using a CDN</h2></div></div></div><p class="calibre7">Although<a id="id193" class="calibre1"/> we could download a copy of the library, we <a id="id194" class="calibre1"/>don't need to when hosting it in a production environment. Less is available on a content delivery network hosted by CDNJS. You can instead link to this version in your code.</p><p class="calibre7">If you host an international site with a lot of network traffic, using a <span class="strong"><strong class="calibre8">Content Delivery Network</strong></span> (<span class="strong"><strong class="calibre8">CDN</strong></span>) hosted file will help ensure that the library is downloaded to a visitor's computer from a server that is geographically close to them. This helps in making the response quicker, as the browser will use a cached version on subsequent visits to the page, which saves on bandwidth. This is <span class="strong"><em class="calibre9">not</em></span> recommended for development however!</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note10" class="calibre1"/>Note</h3><p class="calibre7">If you<a id="id195" class="calibre1"/> want to use a CDN link, then it can be found at <a class="calibre1" href="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js">http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js</a>.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Installing Less on the server side"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec28" class="calibre1"/>Installing Less on the server side</h1></div></div></div><p class="calibre7">As an <a id="id196" class="calibre1"/>alternative to compiling code on the fly, we can always use the command line to perform the same function—Less comes with a built-in command-line compiler that requires the JavaScript-based Node platform to operate.</p></div>

<div class="book" title="Installing Less on the server side">
<div class="book" title="Installing Less using Node"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec24" class="calibre1"/>Installing Less using Node</h2></div></div></div><p class="calibre7">We <a id="id197" class="calibre1"/>took a look at how you can install Node<a id="id198" class="calibre1"/> in <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre9">Building a Less Development Toolkit</em></span>; I will assume<a id="id199" class="calibre1"/> that you have installed it using the defaults, as outlined in that chapter. At this point, we now need to install the Less compiler, so bring up a command prompt, change to the location of the project folder we created earlier, and enter the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">npm install -g less</strong></span>
</pre></div><p class="calibre7">You will see it run through a download and install of Less at the command prompt:</p><div class="mediaobject"><img src="../images/00029.jpeg" alt="Installing Less using Node" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Once <a id="id200" class="calibre1"/>the installation is complete, we can enter the<a id="id201" class="calibre1"/> following command to compile a Less file, which<a id="id202" class="calibre1"/> uses this syntax:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">lessc srcfile [dstfile]</strong></span>
</pre></div><p class="calibre7">Less will compile the output to <code class="email">stdout</code>; if we want to use a different one, then we can redirect the output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">lessc srcfile &gt; dstfile</strong></span>
</pre></div><p class="calibre7">We're now ready to compile Less files at the command prompt—we will see this in action, later in this chapter.</p></div></div>

<div class="book" title="Installing Less on the server side">
<div class="book" title="Installing Less using Bower"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec25" class="calibre1"/>Installing Less using Bower</h2></div></div></div><p class="calibre7">Using <a id="id203" class="calibre1"/>Node with the command line is not the <a id="id204" class="calibre1"/>only option we have—we can also install Less<a id="id205" class="calibre1"/> using the cross-platform Bower package manager <a id="id206" class="calibre1"/>system, available at <a class="calibre1" href="http://www.bower.io">http://www.bower.io</a>.</p><p class="calibre7">Based on Node, Bower is designed to help with the installation of packages for the web, such as jQuery, AngularJS, the Font Awesome icon library, and of course, Less. Let's take a look at how to install it for Windows, as this has an added dependency of Git for Windows, which must also be installed if we are to use this platform.</p><p class="calibre7">To get the full benefit from this demonstration, you will find it better to use a local web server, such as WAMP. For the purposes of this book, I will assume this has been installed with the default settings.</p><p class="calibre7">Start by visiting <a class="calibre1" href="http://msysgit.github.io">http://msysgit.github.io</a> and downloading the latest installer, which is <code class="email">Git-1.8.5.2-preview20131230.exe</code> at the time of writing. Double-click on the installer and click on <span class="strong"><strong class="calibre8">Next</strong></span> to accept all defaults, until you get to this screen:</p><div class="mediaobject"><img src="../images/00030.jpeg" alt="Installing Less using Bower" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Change <a id="id207" class="calibre1"/>the selected option to <span class="strong"><strong class="calibre8">Run Git from the Windows Command Prompt</strong></span>, then continue by clicking on <span class="strong"><strong class="calibre8">Next</strong></span> to accept the defaults<a id="id208" class="calibre1"/> for the remaining settings. The Git installer will<a id="id209" class="calibre1"/> install and configure the client, and once completed, it will display the installation notes for reading if desired.</p><p class="calibre7">In a command prompt, enter the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">npm install -g bower</strong></span>
</pre></div><p class="calibre7">This will download and install the various packages that make up Bower—it will display a confirmation if the installation has been successful:</p><div class="mediaobject"><img src="../images/00031.jpeg" alt="Installing Less using Bower" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Once the Bower installation has been completed, change to the <code class="email">www</code> folder within your web space and enter the following command to install the Less package for Bower:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">bower install less</strong></span>
</pre></div><p class="calibre7">This <a id="id210" class="calibre1"/>will perform a similar process to download<a id="id211" class="calibre1"/> and install the Less package for Bower, as <a id="id212" class="calibre1"/>shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00032.jpeg" alt="Installing Less using Bower" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">At this point, Bower is now installed and available for use.</p><div class="book" title="Using the Bower package"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec03" class="calibre1"/>Using the Bower package</h3></div></div></div><p class="calibre7">Now <a id="id213" class="calibre1"/>that Bower is installed, we can use it in our code—the major difference though is that it doesn't contain a version of <code class="email">lessc</code>, so we are limited to only using it to compile dynamically in our code, and that developing code, which relies on using Node, is not supported.</p><p class="calibre7">With this in mind, we can still use it in a development capacity, to at least prove that our code works—for this, we only need to make one change to our code. If we open a copy of <code class="email">project.html</code>, we can change the highlighted line to use the Bower version of Less, instead of the original version:</p><div class="informalexample"><pre class="programlisting">&lt;link rel="stylesheet/less" href="include.less"&gt;
<span class="strong"><strong class="calibre8">&lt;script src="http://localhost/chapter3/bower_components/less/dist/le</strong></span>
<span class="strong"><strong class="calibre8">ss-1.7.3.js"&gt;&lt;/script&gt;</strong></span>
  &lt;script type="text/javascript"&gt;
  &lt;/script&gt;</pre></div><p class="calibre7">We can, of <a id="id214" class="calibre1"/>course, take this much further—Bower operates very much in the same manner as Node, allowing us to produce <code class="email">.json</code> packages, just as we did for Node in the previous chapter.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note11" class="calibre1"/>Note</h3><p class="calibre7">If you want to learn more about producing packages for Bower, then Bob Yexley has a useful article at <a class="calibre1" href="http://bob.yexley.net/creating-and-maintaining-your-own-bower-package/">http://bob.yexley.net/creating-and-maintaining-your-own-bower-package/</a>.</p></div><p class="calibre7">Let's now turn our attention to getting accustomed to the Less syntax. Before we do so, there is one important point we need to be aware of that concerns the dangers of using Less on the client side.</p></div></div></div>
<div class="book" title="The dangers of using Less on the client side"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec29" class="calibre1"/>The dangers of using Less on the client side</h1></div></div></div><p class="calibre7">So far, we've worked through how you can install Less in your code and use it to compile code into valid CSS, as each page is displayed.</p><p class="calibre7">Surely we <a id="id215" class="calibre1"/>should be good to start using Less, right? After all, we have the library in place, we know how to add it in, and know something of what to expect when styles have been compiled...or perhaps not. There is one critical point we've missed; let me explain.</p><p class="calibre7">When Less first came out, it was originally written using Ruby; this meant code had to be compiled first, before including the results in website pages, as valid CSS. Although this was a perfectly valid procedure, it made development slower, as extra steps were required in order to compile the Less code and include it in web pages.</p><p class="calibre7">The rebasing of the library in JavaScript led to a 30 to 40 percent increase in speed—this led to the temptation to include the library directly in code, along with the raw Less code. This worked well enough, while removing the need to compile the code separately.</p><p class="calibre7">This, however, is no longer deemed good practice, at least for production sites, for a number of reasons:</p><div class="book"><ul class="itemizedlist"><li class="listitem">JavaScript can be turned off—a reliance on JavaScript to control the styling for a site means that it will break, resulting in a messy site!</li><li class="listitem">A reliance on a JavaScript-based library means that another HTTP request has to be made to the server, which can result in increased loading times, particularly for script-heavy sites.</li><li class="listitem">On a content-heavy site, with a lot of styles, this can lead to a noticeable increase in rendering times, as the styles have to be compiled dynamically before content is rendered on.</li><li class="listitem">Most mobile platforms cannot handle the compilation of Less (nor the associated JavaScript file) dynamically and will just abort the execution, which will result in a mess.</li></ul></div><p class="calibre7">This<a id="id216" class="calibre1"/> doesn't mean compiling on client side is a complete no-no, it should just be limited to working in development environments, or in instances where it is beneficial to store the library locally, such as within an HTML5 application.</p><p class="calibre7">You will note that many of the examples throughout this book will use Less client-side. This is to ensure that you, as the reader, are exposed to the whole experience; as we are working in a development/demonstration capacity, this is not an issue. When working on production sites, the Less code should always be precompiled first, before adding it to the site.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Exploring the syntax used by Less"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec30" class="calibre1"/>Exploring the syntax used by Less</h1></div></div></div><p class="calibre7">Enough theory about installing! Let's move on and take a look at the syntax that makes up Less. Over <a id="id217" class="calibre1"/>the next few chapters, we will explore each part of the library in depth; before doing so, we will start with a whistle-stop tour through some of the more important parts of the library, beginning with variables.</p></div>

<div class="book" title="Exploring the syntax used by Less">
<div class="book" title="Working with variables"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec26" class="calibre1"/>Working with variables</h2></div></div></div><p class="calibre7">If we <a id="id218" class="calibre1"/>need to write CSS styles, it's likely that we will include <a id="id219" class="calibre1"/>one or more styles that appear in multiple places. A great example is a number of shapes, where we might need to use the same value for borders or foreground colors:</p><div class="informalexample"><pre class="programlisting">.shape1 {
  color: #5cb100;
  border: 1px solid #5cb100;
}

.shape2 {
  background: #fff;
  color: #5cb100;
}
.shape3 {
  border: 1px solid #5cb100;
}</pre></div><p class="calibre7">We could, as web designers, simply use the same color values throughout our code, and where <a id="id220" class="calibre1"/>appropriate, this is a perfectly valid option. However, what<a id="id221" class="calibre1"/> happens if we've set up a specific set of colors, only to find they all need to be changed?</p><p class="calibre7">Each style can be changed individually, although this assumes we manage to change every instance—on a style-heavy site, and with the best will in the world, there will always be one that we miss!</p><p class="calibre7">We can solve this easily by using variables to store a constant value for each color, and use it throughout the style sheet:</p><div class="informalexample"><pre class="programlisting">@my-color: #5cb100;

.shape1 { color: @my-color; border: 1px solid @my-color; }
.shape2 { background: #fff; color: @my-color; }
.shape3 { border: 1px solid @my-color; }</pre></div><p class="calibre7">This means that if we choose to change the original color for something else, then all we need to do is change the color value assigned to the relevant variable, and Less will automatically update each instance of the variable throughout the rest of the code.</p><p class="calibre7">In our example, we set up a variable to store the color value of <code class="email">#5cb100</code>—if we wanted to change this, then we will only need to change the assigned variable at the start. Less will then handle the updating of every instance where the variable has been used, so we can be confident that the change has taken effect throughout our code.</p><p class="calibre7">We will explore more of variables in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <span class="strong"><em class="calibre9">Working with Variables, Mixins, and Functions</em></span>.</p></div></div>

<div class="book" title="Exploring the syntax used by Less">
<div class="book" title="Changing variables programmatically"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec27" class="calibre1"/>Changing variables programmatically</h2></div></div></div><p class="calibre7">Although<a id="id222" class="calibre1"/> we can set variables as static values, we might come<a id="id223" class="calibre1"/> across instances where it will be beneficial to programmatically change a value assigned to a Less variable, from within our code.</p><p class="calibre7">Hopefully, this is not something you will have to do too often, but it is useful to at least know how it works. Let's take a quick look at how this works, using an example form that has a couple of input fields and a simple <span class="strong"><strong class="calibre8">Submit</strong></span> button.</p><p class="calibre7">In a new file, open a copy of the <code class="email">project.html</code> file we created earlier, then alter the code as shown:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre8">&lt;link rel="stylesheet/less" href="css/object.less"&gt;</strong></span>
&lt;script src="js/less.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
  less.modifyVars({
    '@ button-color': '#61783F'
  });
&lt;/script&gt;</pre></div><p class="calibre7">Next, add<a id="id224" class="calibre1"/> the following code in between the <code class="email">&lt;body&gt;</code> tags:</p><div class="informalexample"><pre class="programlisting">  &lt;form action="demo_form.aspx"&gt;
    First name: &lt;input type="text" name="fname"&gt;&lt;br&gt;
    Last name: &lt;input type="text" name="lname"&gt;&lt;br&gt;
    &lt;input type="submit" value="Submit" id="submitbtn"&gt;
  &lt;/form&gt;</pre></div><p class="calibre7">Finally, add<a id="id225" class="calibre1"/> the following Less styles to a new file, saving it as <code class="email">object.less</code>:</p><div class="informalexample"><pre class="programlisting">@button-color: #4D926F;

input { margin-top: 10px; }

#submitbtn {
  background-color: @button-color;
  margin-top: 10px;
  padding: 3px;    
  color: #fff;
}</pre></div><p class="calibre7">In our example, we've added a reference to the Less object, then used the <code class="email">modifyVars</code> method to <a id="id226" class="calibre1"/>change the color of the <code class="email">@button-color</code> variable, which we specified in <code class="email">object.less</code>, to <code class="email">#61783F</code>. We will cover variables in more detail in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <span class="strong"><em class="calibre9">Working with Variables, Mixins, and Functions</em></span>.</p></div></div>

<div class="book" title="Exploring the syntax used by Less">
<div class="book" title="Creating mixins"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch03lvl2sec28" class="calibre1"/>Creating mixins</h2></div></div></div><p class="calibre7">The next <a id="id227" class="calibre1"/>key element of Less is the creation of mixins, or<a id="id228" class="calibre1"/> predefined blocks of Less code that we can reuse from one ruleset, as part of another ruleset. So, we take the following block of CSS as an example:</p><div class="informalexample"><pre class="programlisting">.green-gradient {
  background: #5cb100;  
  background: linear-gradient(to top, #5cb100, #305d00);
  background: -o-linear-gradient(top, #5cb100, #305d00);
  background: -webkit-linear-gradient(top, #5cb100, #305d00);
}</pre></div><p class="calibre7">Here, we've added a gradient color of dark green to a preset style rule called <code class="email">.green-gradient</code>. So far so good; this will produce a perfectly usable gradient that fades from green to very dark green.</p><p class="calibre7">We could<a id="id229" class="calibre1"/> repeat this block of code for each instance where <a id="id230" class="calibre1"/>an object needs a similar style, but that would quickly lead to a lot of unnecessary code bloat. Instead, we can include the block of code as a mixin, within another style:</p><div class="informalexample"><pre class="programlisting">.shape1 {
  .green-gradient;
  border: 1px solid #ccc;
  border-radius: 5px;
}</pre></div><p class="calibre7">This produces the following valid CSS—the mixin code is highlighted:</p><div class="informalexample"><pre class="programlisting">.shape1 {
  background: #5cb100;background: linear-gradient(to top, #5cb100, #305d00);
  background: -o-linear-gradient(top, #5cb100, #305d00);
  background: -webkit-linear-gradient(top, #5cb100, #305d00);
  border: 1px solid #ccc;
  border-radius: 5px;
}</pre></div><p class="calibre7">Using this method means that we can cut down on the code we need to write and still produce the same results. As you will see in <a class="calibre1" title="Chapter 4. Working with Variables, Mixins, and Functions" href="part0041_split_000.html#page">Chapter 4</a>, <span class="strong"><em class="calibre9">Working with Variables, Mixins, and Functions</em></span>, we will take this a step further—with some careful planning, we can begin to build up a library of mixins that we can reuse in future projects. The key to this is creating mixins that are sufficiently generic, which can then be reused as needed. Others have already created such libraries and made them available online—we will use some of the more well-known ones, such as <span class="strong"><strong class="calibre8">3L, More or Less</strong></span> and <span class="strong"><strong class="calibre8">LESSHat</strong></span>, in our code examples.</p><p class="calibre7">The great thing about Less is that when we include these mixin libraries, Less will only include those mixins from the libraries where they are being referenced in our code. While it might initially seem like we're including a lot of extra code, the reality is that only a fraction of the code is used—it all comes down to careful planning as to how much we need to use!</p></div></div>

<div class="book" title="Exploring the syntax used by Less">
<div class="book" title="Nesting styles in Less"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch03lvl2sec29" class="calibre1"/>Nesting styles in Less</h2></div></div></div><p class="calibre7">Moving on, let's turn our focus to another key part of the Less library: the ability to nest styles. No, I'm not talking about bird habits (if you excuse the pun!), but a way to reduce repetition <a id="id231" class="calibre1"/>when creating your styles. Let me explain more.</p><p class="calibre7">Imagine you <a id="id232" class="calibre1"/>have a block of code similar to the following code, where a number of CSS styles have been created for child elements against their parent element:</p><div class="informalexample"><pre class="programlisting">#header { color: black; }
#header .navigation { font-size: 12px; }
#header .logo { width: 300px; }</pre></div><p class="calibre7">On the face <a id="id233" class="calibre1"/>of it, this would appear normal code, right? Absolutely, there's nothing wrong with it. However, we can do better than this—as part of defining the class styles for each child element, there is a necessary degree of repetition in each style rule.</p><p class="calibre7">Using Less, we can embed or nest our styles more effectively. Our code will appear as this:</p><div class="informalexample"><pre class="programlisting">#header {
  color: black;
  .navigation {
    font-size: 12px;
  }
  .logo { width: 300px; }
}</pre></div><p class="calibre7">Granted that it might not always reduce the number of lines required when writing code in your editor. However, this is not necessarily the aim of the exercise—the key here is to make the code more readable, as styles that relate to a specific element are grouped together, so it is clearer what role they play. You will find, particularly on larger sites, that this can sometimes mean a reduction in the number of lines we need to write—it all comes down to careful planning! We will cover nesting in more detail in <a class="calibre1" title="Chapter 5. Inheritance, Overriding, and Nesting in Less" href="part0050_split_000.html#page">Chapter 5</a>, <span class="strong"><em class="calibre9">Inheritance, Overriding, and Nesting in Less</em></span>.</p></div></div>

<div class="book" title="Exploring the syntax used by Less">
<div class="book" title="Calculating values using operations"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch03lvl2sec30" class="calibre1"/>Calculating values using operations</h2></div></div></div><p class="calibre7">So far, our <a id="id234" class="calibre1"/>whistle-stop preview has taken<a id="id235" class="calibre1"/> us through creating variables, basic mixins, and reordering our code through the use of nesting. We're now going to step things up a little and have a look at the use of operators in our code.</p><p class="calibre7">Operators? Suprised? I am sure you are. Let's see what happens when we use them in our code. Imagine we have a number of shapes on screen, which are perfectly sized and positioned. We could use individual style rules for each element, but it would require careful calculations to ensure we had everything in the right place, particularly if any element needed repositioning.</p><p class="calibre7">Instead, we can use simple maths to work out the size and position of each element automatically, based on one or more given values:</p><div class="informalexample"><pre class="programlisting">@basic-width: 100px;

.shape1 { width: @basic-width; }
.shape2 { width: @basic-width * 2; }</pre></div><p class="calibre7">It will, of <a id="id236" class="calibre1"/>course, require that each<a id="id237" class="calibre1"/> calculation be worked out, but once this is done, then all we need to do is change the initial value set, and it will automatically update every other value.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note12" class="calibre1"/>Note</h3><p class="calibre7">It's worth <a id="id238" class="calibre1"/>noting that a strict math option is available in Less, which only calculates math that is encapsulated in parentheses, such as this code:</p><div class="informalexample"><pre class="programlisting">.class {
  height: calc(100% - 10px);
}</pre></div><p class="calibre7">You can read more about this option at <a class="calibre1" href="http://lesscss.org/usage/#command-line-usage-strict-math">http://lesscss.org/usage/#command-line-usage-strict-math</a>.</p></div><p class="calibre7">In our example, we've set an initial variable, <code class="email">@basic-width</code>, of 100 px, then used it to double the width of <code class="email">shape2</code>. Once the code is compiled, it will produce the following CSS:</p><div class="informalexample"><pre class="programlisting">.shape1 { width: 100px; }
.shape2 { width: 200px; }</pre></div><p class="calibre7">If we were to change the value for <code class="email">.shape1</code> to <code class="email">75px</code> for example, then the width of <code class="email">.shape2</code> will be recalculated as 2 x 75px, or <code class="email">150px</code>. We'll be exploring more on the use of operators later in this book.</p></div></div>

<div class="book" title="Exploring the syntax used by Less">
<div class="book" title="Extending existing styles in Less"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_6"><a id="ch03lvl2sec31" class="calibre1"/>Extending existing styles in Less</h2></div></div></div><p class="calibre7">This is <a id="id239" class="calibre1"/>a relatively <a id="id240" class="calibre1"/>new <a id="id241" class="calibre1"/>feature in Less and works almost as a direct opposite to a normal mixin. It takes a little time to get used to it, so let's examine a simple example—imagine you have a <code class="email">div</code> tag that uses the following style rule:</p><div class="informalexample"><pre class="programlisting">div { background-color: #e0e0e0; }</pre></div><p class="calibre7">The <code class="email">div</code> tag produces a very light gray color as its background color. We can use this to extend another <a id="id242" class="calibre1"/>element:</p><div class="informalexample"><pre class="programlisting">p:extend(div) { color: #101010; }</pre></div><p class="calibre7">This compiles to the following code:</p><div class="informalexample"><pre class="programlisting">div, p { background-color: #e0e0e0; }
p { color: #101010; }</pre></div><p class="calibre7">Instead of adding a whole bunch of properties of a mixin class to an existing class, it adds the extending selector to the existing selector so that the output of the extended class includes both sets of styles.</p><p class="calibre7">The beauty<a id="id243" class="calibre1"/> of this is that it results in a similar effect to <a id="id244" class="calibre1"/>using mixins, but without the associated bloat that you<a id="id245" class="calibre1"/> sometimes get when using mixins. It works by taking the contents of the existing selector, in this instance <code class="email">background-color: #e0e0e0</code>, and assigning it to the new selector, <code class="email">p</code>. This way, we can be more selective about reusing styles from existing elements, without the need to introduce new mixins.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip07" class="calibre1"/>Tip</h3><p class="calibre7">Note that extend will not check for duplicates. If you extend the same selector twice, it will add the selector twice. For more details, see <a class="calibre1" href="http://lesscss.org/features/#extend-featureduplication-detection">http://lesscss.org/features/#extend-featureduplication-detection</a>.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Compiling the code and viewing results"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec31" class="calibre1"/>Compiling the code and viewing results</h1></div></div></div><p class="calibre7">Now that <a id="id246" class="calibre1"/>we've seen something of the syntax of Less, let's change tack<a id="id247" class="calibre1"/> and focus on how to compile our Less styles to produce valid CSS. There are several ways to achieve this, of which we touched on some back in <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre9">Building a Less Development Toolkit</em></span>. For the moment, we're going to concentrate on using Crunch! to compile our code; we will switch to using the command line later in this section.</p></div>

<div class="book" title="Compiling the code and viewing results">
<div class="book" title="Using a standalone compiler"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec32" class="calibre1"/>Using a standalone compiler</h2></div></div></div><p class="calibre7">We will <a id="id248" class="calibre1"/>start with the variable example shown earlier in this <a id="id249" class="calibre1"/>chapter. Let's begin by starting up Crunch! and then clicking on the <span class="strong"><strong class="calibre8">New LESS file</strong></span> button in the main code window. By default, it will create a new placeholder file called <code class="email">new.less</code>; paste in the code from our example.</p><p class="calibre7">Press <span class="strong"><em class="calibre9">Ctrl</em></span> + <span class="strong"><em class="calibre9">S</em></span> to save the file, then save it in the <code class="email">lessjs</code> project folder we created earlier, as <code class="email">variables.less</code>:</p><div class="mediaobject"><img src="../images/00033.jpeg" alt="Using a standalone compiler" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Click<a id="id250" class="calibre1"/> on <span class="strong"><strong class="calibre8">Crunch File</strong></span> to view the results of the compiled<a id="id251" class="calibre1"/> code—it will prompt you to assign a filename, so give it the default, which is the same name of the Less file, or in this instance, <code class="email">variables.css</code>:</p><div class="mediaobject"><img src="../images/00034.jpeg" alt="Using a standalone compiler" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">That was easy, huh? Any time we make a change to our Less file, all we need to do is save it, then <a id="id252" class="calibre1"/>click on <span class="strong"><strong class="calibre8">Crunch File</strong></span> and the file is automatically<a id="id253" class="calibre1"/> updated. Let's test this by changing the color value assigned to the <code class="email">@my-color</code> variable.</p><p class="calibre7">In the <code class="email">variable.less</code> file, alter the value shown against <code class="email">@my-color</code> as follows:</p><div class="informalexample"><pre class="programlisting">@my-color: #3f004b;</pre></div><p class="calibre7">Resave the file, then click on <span class="strong"><strong class="calibre8">Crunch File</strong></span>—the <code class="email">variable.css</code> tab will flash momentarily to indicate that it has been updated. Click on it to view the changes:</p><div class="mediaobject"><img src="../images/00035.jpeg" alt="Using a standalone compiler" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">As we can see, Crunch! has successfully updated the changes to our code—if there had been an error, it would flag an error message at the foot of our code, such as this one, to indicate a missing <code class="email">}</code> at the end of our code:</p><div class="mediaobject"><img src="../images/00036.jpeg" alt="Using a standalone compiler" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Adding the missing <code class="email">}</code> in this instance will fix the issue and allow Crunch! to recompile our code <a id="id254" class="calibre1"/>without any issue. Let's switch tack now and focus on performing the same operation, but this time using the command line instead.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Using the command-line compiler"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec32" class="calibre1"/>Using the command-line compiler</h1></div></div></div><p class="calibre7">So far, we've used a standalone editor to compile (or Crunch!—pun intended!) our code. It has <a id="id255" class="calibre1"/>successfully produced some valid CSS for us, which can be used in a normal HTML page if desired. This works well, but might not be the preferred choice for everyone!</p><p class="calibre7">Instead of having to use a standalone compiler, we can achieve the same result by using the command line instead. Granted that this is a little bit more of a manual process, but it does give us the opportunity to hook in the compilation process as a command that we can run directly from most text editors.</p></div>

<div class="book" title="Using the command-line compiler">
<div class="book" title="Compiling Less files using the command line"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec33" class="calibre1"/>Compiling Less files using the command line</h2></div></div></div><p class="calibre7">The <a id="id256" class="calibre1"/>process to<a id="id257" class="calibre1"/> compile Less files via the command line is <a id="id258" class="calibre1"/>very easy. Start by bringing up a command prompt and changing the location to your project folder, which is the <code class="email">lessjs</code> folder we created earlier. At the command prompt, type in the following command and then press <span class="strong"><em class="calibre9">Enter</em></span>:</p><div class="informalexample"><pre class="programlisting">lessc variables.less variables.css</pre></div><p class="calibre7">That's all that is required for a basic compilation. Less will now compile the <code class="email">variables.less</code> file and save the results as <code class="email">variables.css</code> in the same folder. It means that you can leave this session open in the background and rerun the command each time you want to make a change to the code.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note14" class="calibre1"/>Note</h3><p class="calibre7">Less has a number of other options available when using <code class="email">lessc</code> via the command line. To view them, type in <code class="email">lessc</code> at a command prompt to display the full list.</p></div></div></div>
<div class="book" title="Watching for changes in Watch mode"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec33" class="calibre1"/>Watching for changes in Watch mode</h1></div></div></div><p class="calibre7">In this <a id="id259" class="calibre1"/>exercise, we're going to take a look at a simple, but useful feature called the Watch mode. This allows us to make changes to any Less file while still in development, and for us to reload the page without having to force a complete reload of the page from the server. It is worth noting that the Watch mode can be used with the local filesystem, or with a web server—both will produce the same effect. For the purposes of the book, we will assume the use of the latter; in this case, we will use WampServer, which we covered back in <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre9">Building a Less Development Toolkit</em></span>. If you are a Mac user, then you can use something such as MAMP; Linux users will have a selection<a id="id260" class="calibre1"/> of local web servers available within their distro.</p><p class="calibre7">We're going to test it by creating a simple form with the username and password fields.</p><p class="calibre7">Assuming that we have installed WAMP, or have web space available, start by opening up your text editor, then add the following code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCType html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Adding watch support&lt;/title&gt;
    &lt;link rel="stylesheet/less" href="include.less"&gt;
    &lt;script src="less.min.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript"&gt;
      less.env = "development";
      less.watch();
    &lt;/script&gt;
  &lt;/head&gt;
&lt;body&gt;
  &lt;form action="demo_form.aspx"&gt;
    Name: &lt;input type="text" class="input" /&gt;
    Password: &lt;input type="password" class="input" /&gt;
    &lt;input type="submit" id="submitfrm" value="This is a button" /&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note15" class="calibre1"/>Note</h3><p class="calibre7">Notice how <code class="email">less.env = "development"</code> has been added. This sets Less to work in the development mode—this is one of several options we can set in this mode. For more details, it is worth reading the documentation on Less' site at <a class="calibre1" href="http://lesscss.org/usage/#using-less-in-the-browser">http://lesscss.org/usage/#using-less-in-the-browser</a>.</p></div><p class="calibre7">Save it as <code class="email">watchr.html</code> in the <code class="email">www</code> folder, which should be <code class="email">c:\wamp\www</code> by default. Next, in a separate file, add the following and save it as <code class="email">include.less</code>:</p><div class="informalexample"><pre class="programlisting">@color-button: #556644;
#submitfrm {
    color: #fff;
    background: @color-button;
    border: 1px solid @color-button - #222;
    padding: 5px 12px;
}</pre></div><p class="calibre7">Fire up your browser, then navigate to it by entering the appropriate URL into your browser; if all<a id="id261" class="calibre1"/> is well, you will see something like this:</p><div class="mediaobject"><img src="../images/00037.jpeg" alt="Watching for changes in Watch mode" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Keep your browser window open. Now, let's make a change to our Less code; in the Less file, change the <code class="email">@color-button</code> value to <code class="email">#334466</code>:</p><div class="informalexample"><pre class="programlisting">@color-button: #334466;
#submitfrm {
    color: #fff;
    background: @color-button;
    border: 1px solid @color-button - #222;
    padding: 5px 12px;
}</pre></div><p class="calibre7">Save the change to the Less file. Within a few moments, we will see the color of our button change from dark green to dark blue, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00038.jpeg" alt="Watching for changes in Watch mode" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">When working with Less, compiled styles are stored in the <span class="strong"><strong class="calibre8">localStorage</strong></span> area of the browser, and they remain there until the <span class="strong"><strong class="calibre8">localStorage</strong></span> area is cleared. We can see this by pressing <span class="strong"><em class="calibre9">F12</em></span>, then clicking on <span class="strong"><strong class="calibre8">DOM</strong></span>, and scrolling down to the <span class="strong"><strong class="calibre8">localStorage</strong></span> entry—assuming Firebug is installed:</p><div class="mediaobject"><img src="../images/00039.jpeg" alt="Watching for changes in Watch mode" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">To view<a id="id262" class="calibre1"/> any changes, we have to force a refresh from the server—using the watch facility forces the browser into the development mode, which prevents the browser from caching the generated CSS files.</p><p class="calibre7">It is worth noting that there are other methods you can use to watch for changes, such as using Grunt or Gulp. Two <a id="id263" class="calibre1"/>great examples include observr, which is available at <a class="calibre1" href="https://github.com/kevinburke/observr">https://github.com/kevinburke/observr</a>, or lessc-bash, downloadable from<a id="id264" class="calibre1"/> <a class="calibre1" href="https://github.com/pixelass/lessc-bash">https://github.com/pixelass/lessc-bash</a>. We covered using Grunt to watch for changes in <a class="calibre1" title="Chapter 2. Building a Less Development Toolkit" href="part0025_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre9">Building a Less Development Toolkit</em></span>.</p></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec34" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">We're now ready to start exploring the Less syntax in more detail. Before we do so, let's recap what we learned throughout this chapter.</p><p class="calibre7">We began with how you can download and install Less; we first covered how you can download this as a standalone library, before incorporating it into our pages. We also took a brief look at how you can use a CDN link instead of downloading the code; while this isn't recommended for development purposes, it nevertheless is worthwhile for production sites, where the browser can cache the library if a visitor has already accessed the library on a previous site.</p><p class="calibre7">Moving on, we then took a look at how you install Less server-side, using the Node platform. We saw how easy it is to compile Less files, using a single command, and that we can perform this as many times as we like, by rerunning the command when needed. We discussed how to install Less by taking a look at the dangers of using it client side and how this should really be limited to use in a development environment only, due to the extra demands placed on the hosting server.</p><p class="calibre7">We then changed focus and took a whistle-stop tour on some of the key parts of the Less syntax, as a precursor to exploring it in more detail in later chapters. We covered the use of variables, mixins, nesting, operations, and extending in Less before switching to compiling some basic code to see how the compilation process works. We examined how you can use either a standalone compiler or the command line to perform the same operation. We finished the chapter with a look at how to use the <code class="email">watch()</code> function within Less—this can be set to watch for any changes in the Less file and force the browser to automatically refresh the page, without the need for manual intervention.</p><p class="calibre7">We've now covered the basics of how to install Less and get it up and running in our code. Let's move on and begin our journey through the functionality of Less, starting with a look at mixins, functions, and variables.</p></div></body></html>