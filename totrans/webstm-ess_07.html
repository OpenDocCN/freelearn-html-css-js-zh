<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch07" class="calibre1"/>Chapter 7. Analyzing and Debugging Your Code</h1></div></div></div><p class="calibre7">In the previous chapter, we learned how to use web technologies to create native mobile applications, and how to create projects quickly with the help of templates. In this chapter, we are going to see how WebStorm can help us analyze and debug our code.</p><p class="calibre7">We will now focus on code quality tools like Code Inspector, Code Style, and Code Linters that will help us write quality code. We will also learn to debug our code directly inside the IDE. In this chapter, we will cover the following topics:</p><div><ul class="itemizedlist"><li class="listitem">Understanding code inspection</li><li class="listitem">What is Code Style?</li><li class="listitem">Using different code quality tools</li><li class="listitem">Debugging your code</li></ul></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch07lvl1sec42" class="calibre1"/>Code inspection</h1></div></div></div><p class="calibre7">WebStorm is <a id="id203" class="calibre1"/>equipped with a powerful, fast, and versatile code analysis tool. This tool detects not only the compiler and runtime errors, but also the different code inefficiencies. It suggests corrections and enhancements while you code. Some of the common errors it can detect are: unreachable code, unused code, non-localized strings, unresolved methods, memory leaks, and spelling problems.</p><p class="calibre7">The inspection is performed in multiple ways:</p><div><ul class="itemizedlist"><li class="listitem">Analyzing all opened files, all the code issues are highlighted directly in the editor. The status is visible on the right side of the editor. At the top of the file and on the scroll bar is a summary that takes you to the line of code when clicked.<div><img src="img/00097.jpeg" alt="Code inspection" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem">Running the <a id="id204" class="calibre1"/>analysis in bulk mode runs the inspector in a specified scope. The scope can be any set of files, from the currently selected ones to the whole project. To run the bulk mode, select <strong class="calibre8">Code</strong> | <strong class="calibre8">Inspect Code…</strong>, and specify the scope in the opened dialog.<div><img src="img/00098.jpeg" alt="Code inspection" class="calibre10"/></div><p class="calibre14"> </p><p class="calibre21">In the Specify <a id="id205" class="calibre1"/>Inspection dialog, we can also specify the <strong class="calibre8">Inspection profile</strong> that we want to use. The profiles represent a set of rules that we want our code to be checked against. For now, we are going to leave it to the default one, and click on <strong class="calibre8">OK</strong>. WebStorm will run the inspection, and then present us with a summary dialog, as seen in the following screenshot:</p><div><img src="img/00099.jpeg" alt="Code inspection" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem">Running a single code inspection in a specified scope—in this mode, WebStorm allows us <a id="id206" class="calibre1"/>to check for a specific problem in the selected scope. To access the dialog, open <strong class="calibre8">Code</strong> | <strong class="calibre8">Run Inspection By Name</strong>, and select the inspection that you want to run in this dialog, as seen in the following screenshot:<div><img src="img/00100.jpeg" alt="Code inspection" class="calibre10"/></div><p class="calibre14"> </p><p class="calibre21">This opens the scope dialog, where we can select the code on which this inspection is to be applied. WebStorm then takes us to the summary page, similar to the bulk section.</p></li></ul></div><p class="calibre7">WebStorm works with profiles when inspecting the code, so you can specify the type of problems that you want to search and report. It also allows you to define profiles at the application or project level, and to share the created profiles with the rest of the team. All the profile settings can be <a id="id207" class="calibre1"/>found in the <strong class="calibre8">Preferences</strong> | <strong class="calibre8">Editor</strong> | <strong class="calibre8">Inspections</strong> page.</p><div><img src="img/00101.jpeg" alt="Code inspection" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">In this section, we focused on the way your code performs and executes; in the next section, we are going to focus on the looks of code.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec43" class="calibre1"/>Code Style</h1></div></div></div><p class="calibre7">The <strong class="calibre8">Code </strong>
<a id="id208" class="calibre1"/>
<strong class="calibre8">Style</strong> can be seen as a set of specific rules that dictate the layout of the source code. It includes the indentation, use of white space, the style used for variable names, keywords, and so on. WebStorm allows you to manage the scheme to be applied to specific files type. To access the dialog, go to <strong class="calibre8">Preferences</strong> | <strong class="calibre8">Editor</strong> | <strong class="calibre8">Code Style</strong>.</p><div><img src="img/00102.jpeg" alt="Code Style" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">The first page that is <a id="id209" class="calibre1"/>displayed is for setting the general styles, like the following, for the current project:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre8">Line separator</strong> for columns and wrapping</li><li class="listitem"><strong class="calibre8">Default Indent Options</strong></li><li class="listitem"><strong class="calibre8">Formatter Control</strong> for using comments to turn the Code Style on/off</li><li class="listitem"><strong class="calibre8">EditorConfig</strong> for controlling the styles through a general <code class="email">.editorconfig</code> file that can be shared with the project</li></ul></div><p class="calibre7">We can also set language-specific code styles to make the editor fit our needs. To change these settings, we need to select the desired language from the menu in the previews screen.</p><p class="calibre7">WebStorm also allows you to quickly apply the code style to an open file by selecting <strong class="calibre8">Code</strong> | <strong class="calibre8">Reformat code</strong>. It applies the necessary rules based on the file extension.</p><p class="calibre7">These tools help in giving a consistent look to your code, and with the help of  the <strong class="calibre8">EditorConfig</strong> files, you can share your styles across multiple members of your team. It is considered a good practice to include these files in the Git repository of your project.</p></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec44" class="calibre1"/>Code quality tools</h1></div></div></div><p class="calibre7">WebStorm allows <a id="id210" class="calibre1"/>us to use various code quality tools to make sure that our code is free from common mistakes and discrepancies. WebStorm 10 supports integration with the following:</p><div><ul class="itemizedlist"><li class="listitem">JSLint</li><li class="listitem">JSHint</li><li class="listitem">Closure Linter</li><li class="listitem">JSCS</li><li class="listitem">ESLint</li></ul></div><p class="calibre7">It comes bundled with JSLint and JSHint, but the rest need to be installed through NPM or other installers. We are going to focus on JSCS and the first two tools in the preceding list, since these are the most common ones, and the workflow is very similar between the different tools.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec40" class="calibre1"/>JSLint</h2></div></div></div><p class="calibre7">To use the JSLint tool, enable <a id="id211" class="calibre1"/>it in the <strong class="calibre8">Settings</strong> | <strong class="calibre8">Languages &amp; Frameworks</strong> | <strong class="calibre8">JavaScript</strong> | <strong class="calibre8">Code Quality Tools</strong> | <strong class="calibre8">JSLint</strong> page, and select the desired settings. A <a id="id212" class="calibre1"/>good practice, when navigating to the complex settings page, is to use the built-in search.</p><div><img src="img/00103.jpeg" alt="JSLint" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Once we enable and configure JSLint, it automatically checks all the open JS files with the specified settings, and <a id="id213" class="calibre1"/>the errors are displayed like the code inspection messages.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec41" class="calibre1"/>JSHint</h2></div></div></div><p class="calibre7">JSHint is another code <a id="id214" class="calibre1"/>quality tool that comes bundled with WebStorm. The <a id="id215" class="calibre1"/>settings page can be found at <strong class="calibre8">Settings</strong> | <strong class="calibre8">Languages &amp; Frameworks</strong> | <strong class="calibre8">JavaScript</strong> | <strong class="calibre8">Code Quality Tools</strong> | <strong class="calibre8">JSHint</strong>.</p><div><img src="img/00104.jpeg" alt="JSHint" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">The JSHint settings can be configured either through the settings page, or by using a special <code class="email">.jshintrc</code> configuration file. Again, it is a good practice to include such a file in your repository.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec42" class="calibre1"/>JSCS</h2></div></div></div><p class="calibre7">JSCS is one of the <a id="id216" class="calibre1"/>popular code linters used by some of the big frameworks <a id="id217" class="calibre1"/>like jQuery, Bootstrap, and Angular. It doesn't come bundled with WebStorm like the previous tools, so the first thing we have to do is to install it. We are going to use the build in NPM installer, and perform the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Open the <strong class="calibre8">Preferences</strong> | <strong class="calibre8">Languages &amp; Frameworks</strong> | <strong class="calibre8">Node.js and NPM page</strong> | <strong class="calibre8">Packages Install</strong> <a id="id218" class="calibre1"/>dialog, search for <code class="email">jscs,</code> and install it globally.<div><img src="img/00105.jpeg" alt="JSCS" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Once the installation is ready, the settings page can be found at <strong class="calibre8">Settings</strong> | <strong class="calibre8">Languages &amp; Frameworks</strong> | <strong class="calibre8">JavaScript</strong> | <strong class="calibre8">Code Quality Tools</strong> | <strong class="calibre8">JSCS</strong>.</li><li class="listitem" value="3">On this page, select the package from the global node folder and the configuration file used for the rules or a preset. There is no option to define the rules individually like the previous tools.<div><img src="img/00106.jpeg" alt="JSCS" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div></div><p class="calibre7">For this demonstration, we are going to use one of the popular set of rules, the one defined by <strong class="calibre8">Airbnb</strong>.</p><p class="calibre7">Now that you have learned how to check the code before it even runs, we are going to dive into the world of debugging and see how WebStorm can help us understand and fix our code while it is running.</p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec45" class="calibre1"/>Debugging your code</h1></div></div></div><p class="calibre7">One of the first things <a id="id219" class="calibre1"/>that we need to do before starting is to install and configure the browser extension for Chrome. This extension enables WebStorm to communicate with the browser, so we can debug our application directly inside the IDE.</p><p class="calibre7">The Chrome browser extension is available at the <strong class="calibre8">chrome web store</strong> as <strong class="calibre8">JetBrains IDE Support</strong>. So, we need to add it from there, as shown in the following screenshot:</p><div><img src="img/00107.jpeg" alt="Debugging your code" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Now that we have the <a id="id220" class="calibre1"/>extension installed, we can start  learning to debug our code. To be able to debug the code while it is running, we need to start a debugging session. There are several ways to start a debug session. In this section, we are going to see some of the ways of debugging in WebStorm.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec43" class="calibre1"/>Initializing a debug session from the browser</h2></div></div></div><p class="calibre7">First we need to <a id="id221" class="calibre1"/>open the project inside WebStorm, and set some breakpoints. Before we start, we need do import a a project created for this purpose from GitHub.  So, using the instructions given in the previous section, create <a id="id222" class="calibre1"/>a project from the Git repository at <a class="calibre1" href="https://github.com/srosca/webstorm_essentials_debugging.git">https://github.com/srosca/webstorm_essentials_debugging.git</a>. After you have downloaded and opened the project, run <code class="email">npm install</code> to install all the required dependencies.</p><div><h3 class="title2"><a id="note11" class="calibre1"/>Note</h3><p class="calibre7">Once everything is installed, make sure that you start the sever by using the Grunt task runner or typing <code class="email">grunt serve</code> inside the terminal.</p></div><p class="calibre7">Open the <code class="email">fib.js</code> file and you can click on the right-hand side to set a breakpoint; this will look like a red dot. We are going to set a breakpoint on line 58 inside the <code class="email">fib</code> function to check what happens inside.</p><div><img src="img/00108.jpeg" alt="Initializing a debug session from the browser" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Execute the following steps:</p><div><ol class="orderedlist"><li class="listitem" value="1">Open the Chrome browser and point it to <code class="email">http://localhost:9000/index.html</code> to open the file.</li><li class="listitem" value="2">In the <a id="id223" class="calibre1"/>browser, select <strong class="calibre8">inspect</strong> in WebStorm from the <strong class="calibre8">context</strong> menu. This creates a temporal debugging session, and links Chrome with WebStorm.</li><li class="listitem" value="3">You will now see a message <strong class="calibre8">JetBrains IDE Support is debugging this tab</strong>, in the browser, and the debugging section with the message, <strong class="calibre8">Connected to JetBrains Chrome Extension</strong> in WebStorm.<div><img src="img/00109.jpeg" alt="Initializing a debug session from the browser" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div></div><p class="calibre7">The debug section is split into four tabs:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre8">Debugger</strong>: This tab shows information relevant to the debugging section like <strong class="calibre8">Frames</strong>, <strong class="calibre8">Variables</strong>, and <strong class="calibre8">Watches</strong></li><li class="listitem"><strong class="calibre8">Console</strong>: This tab displays the console output</li><li class="listitem"><strong class="calibre8">Elements</strong>: The DOM tree is displayed in this tab</li><li class="listitem"><strong class="calibre8">Scripts</strong>: This tab shows the loaded scripts</li></ul></div><p class="calibre7">Now that we have WebStorm and Chrome linked, we need to refresh the page in Chrome so that it stops at our <a id="id224" class="calibre1"/>breakpoints. The browser now shows that our page has paused inside the debugger:</p><div><img src="img/00110.jpeg" alt="Initializing a debug session from the browser" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">The WebStorm IDE will now jump to the line that the execution has been paused, and display the relevant information in the <strong class="calibre8">Debugger</strong> section. The <strong class="calibre8">Frames</strong> panel will show the call stack that leads to the current point. The <strong class="calibre8">Variables</strong> panel allows you to examine the value stored in your application, on the local scope as well as the global one. In the <strong class="calibre8">Watches</strong> panel, we can evaluate various variables and expressions in the current context. The information displayed in these panels is updated with each step throughout the application.</p><div><img src="img/00111.jpeg" alt="Initializing a debug session from the browser" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">While the execution is paused, we can navigate through the program execution. Navigation can be <a id="id225" class="calibre1"/>controlled from the <strong class="calibre8">Run</strong> menu, or by using the following shortcuts:</p><div><ul class="itemizedlist"><li class="listitem"><strong class="calibre8">Step over (F8)</strong>: Step to the next line in the current file</li><li class="listitem"><strong class="calibre8">Step into (F7)</strong>: Step to the next executed line, which can be in a separate file</li><li class="listitem"><strong class="calibre8">Step out (Shift + F8)</strong>: Step to the first executed line after returning from the current method</li><li class="listitem"><strong class="calibre8">Run to cursor (Alt + F9)</strong>: Run to the line where the caret is located</li><li class="listitem"><strong class="calibre8">Resume program (F9)</strong>: Resume program execution</li></ul></div><p class="calibre7">While temporary debug sessions are useful for quick debugging, sometimes we need to save the debug run as a configuration so that it is easier to run. Go to <strong class="calibre8">Run</strong> | <strong class="calibre8">Edit Configuration</strong> to open the <strong class="calibre8">Run/Debug Configuration</strong> screen and click on the plus sign. Then select <strong class="calibre8">JavaScript Debug</strong>. Set a name for your configuration, enter the URL: <code class="email">http://localhost:9000/index.html</code>, and then click on <strong class="calibre8">OK</strong>.</p><div><img src="img/00112.jpeg" alt="Initializing a debug session from the browser" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">This creates a <a id="id226" class="calibre1"/>configuration that can be easily run by selecting the debug icon from the run toolbar, as seen in the following screenshot:</p><div><img src="img/00113.jpeg" alt="Initializing a debug session from the browser" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Once we run this, the debugging session is controlled exactly like the previous section.</p><p class="calibre7">We can also debug our code inside Node.js, so we need to create a debug configuration for the Node.js environment. To do that, select <strong class="calibre8">Node.js</strong> from the <strong class="calibre8">Run/Debug Configuration</strong> screen, and then select the JavaScript file that you want to debug.</p><div><img src="img/00114.jpeg" alt="Initializing a debug session from the browser" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Now we can run the debugging session against the node environment. The rest of the display and controls remain the same as in the previous examples.</p><p class="calibre7">Debugging is one of the most powerful ways to understand the execution of the code, and WebStorm's ability <a id="id227" class="calibre1"/>to debug the code directly in the environment in which it is created, the IDE, is an extremely valuable benefit.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec46" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">In this chapter, you have learned to analyze and debug your code. You installed and configured some of the most-used code quality tools and used them on your code. You have also learned to debug your code and find problems quickly. These are the basic steps that will allow you to better understand how your code is being executed, and by following some simple rules, you can be sure that the code is performing and looking great.</p><p class="calibre7">In the next chapter, we are going to see how WebStorm can help you in testing your code so that we are sure that whatever changes we make will not break our code. We are going to dive into some of the most-used development practices of the moment: TDD and BDD.</p></div></body></html>