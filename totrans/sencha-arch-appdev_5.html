<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Working with Resources"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Working with Resources</h1></div></div></div><p>In this chapter we will learn how to use the Resources toolbox and the Resources package from the project inspector. So in this chapter we will cover:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Changing the Ext JS and Sencha Touch SDK path</li><li class="listitem" style="list-style-type: disc">The debugging mode and the production mode</li><li class="listitem" style="list-style-type: disc">Creating new CSS files</li><li class="listitem" style="list-style-type: disc">Working with Google Maps</li><li class="listitem" style="list-style-type: disc">Working with theme files</li><li class="listitem" style="list-style-type: disc">Working with additional JavaScript files</li></ul></div><div class="section" title="The Library resource"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec41"/>The Library resource</h1></div></div></div><p>When we create a <a id="id188" class="indexterm"/>Sencha Touch or Ext JS project on Sencha Architect, we will be able to see a Resources package with a Library resource inside it. Depending on the version of the SDK you use to create the project, the options can be a little bit different.</p><p>For example, if we create an Ext JS 4.1 project, we will have the default <span class="strong"><strong>Library</strong></span> options such as <span class="strong"><strong>Debug</strong></span>, <span class="strong"><strong>Include CSS</strong></span>, <span class="strong"><strong>Include</strong></span> <span class="strong"><strong>JavaScript</strong></span>, and <span class="strong"><strong>Library</strong></span> <span class="strong"><strong>Base</strong></span> <span class="strong"><strong>Path</strong></span>. When we create an Ext JS 4.2 project, we will see all the options already mentioned plus the <span class="strong"><strong>theme</strong></span> property as demonstrated by the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_05_01.jpg" alt="The Library resource"/></div><p>The same thing happens<a id="id189" class="indexterm"/> with Sencha Touch 2.1 projects and Sencha Touch 2.2 projects:</p><div class="mediaobject"><img src="graphics/9819OS_05_02.jpg" alt="The Library resource"/></div><p>This is because Sencha added the capability to change the themes for Sencha Touch 2.2 and later and Ext JS 4.2 and later versions.</p><p>So what does each option mean (<span class="strong"><strong>Debug</strong></span>, <span class="strong"><strong>Include CSS</strong></span>, <span class="strong"><strong>Include JavaScript</strong></span>, <span class="strong"><strong>Library Base Path</strong></span>)?</p><p>The <span class="strong"><strong>Debug</strong></span> option <a id="id190" class="indexterm"/>means, if we want to use the debug or the production version of the SDK. By default, Sencha Architect will use the <code class="literal">ext-all.js</code> and <code class="literal">sencha-touch-all.js</code> SDK files. If we check the <span class="strong"><strong>Debug</strong></span> checkbox, Sencha Architect will use the <code class="literal">ext-all-debug.js</code> and <code class="literal">sencha-touch-debug.js</code> SDK files instead.</p><p>By default, Sencha Architect also has the <span class="strong"><strong>Include CSS</strong></span> property<a id="id191" class="indexterm"/> checked. This means that Sencha Architect will automatically add the Ext JS and Sencha Touch CSS files (<code class="literal">ext-theme-classic-all.css</code> and <code class="literal">sencha-touch.css</code>) to the <code class="literal">app.html</code> file. But if we need the CSS to have the beautiful look provided by Ext JS and Sencha Touch frameworks, why does Sencha Architect offer the developer the option to add the CSS file? We will answer this question later in this chapter.</p><p>The <span class="strong"><strong>Include JavaScript</strong></span> option<a id="id192" class="indexterm"/> is also checked. When this option is checked, Sencha Architect includes<a id="id193" class="indexterm"/> the <code class="literal">ext-all.js</code> and <code class="literal">sencha-touch-all.js</code> SDK files in <code class="literal">app.html</code>. Again, the same question: if we need Ext JS or Sencha Touch SDK to have an Ext JS or Sencha Touch application, why does Sencha Architect offer the possibility to remove these files from <code class="literal">app.html</code>? If you already generated a Sencha Touch or Ext JS project using Sencha Cmd, you will notice that in the <code class="literal">index.html</code> file, it was included a different file as <code class="literal">bootstrap.js</code> file, and inside this <code class="literal">bootstrap.js</code> file we have the logic to add production or debug file. So if we uncheck the<a id="id194" class="indexterm"/> <span class="strong"><strong>Include JavaScript</strong></span> property, we can have a <code class="literal">bootstrap.js</code> file included by adding a new JS resource. Sencha Architect is very flexible when it comes to choosing what files you want to include in your <code class="literal">app.html</code> file.</p><div class="section" title="Setting the local SDK"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec18"/>Setting the local SDK</h2></div></div></div><p>Another property that <a id="id195" class="indexterm"/>caught our attention is the <span class="strong"><strong>Library Base Path</strong></span>. When we create a Sencha Architect project, the <span class="strong"><strong>Library Base Path</strong></span> for an Ext JS 4.2 project is <a class="ulink" href="http://cdn.sencha.com/ext/gpl/4.2.0/">http://cdn.sencha.com/ext/gpl/4.2.0/</a>, and for a Sencha Touch 2.2 project it is <a class="ulink" href="http://cdn.sencha.com/touch/sencha-touch-2.2.0-rc/">http://cdn.sencha.com/touch/sencha-touch-2.2.0-rc/</a>. This means that every time you execute the application you are creating, your application will load the SDK JS file and the CSS file from the Sencha servers.</p><p>If you are testing your application locally, or you want to load the framework resources from a specific place, we need to change the <span class="strong"><strong>Library Base Path</strong></span>. For example, in the following screenshot we are loading the Ext SJ framework files from a local server:</p><div class="mediaobject"><img src="graphics/9819OS_05_03.jpg" alt="Setting the local SDK"/></div><p>This can also be useful in case you are on an airplane and want to continue coding your project, and you do not have access to Internet, so you can point to your local installation.</p></div><div class="section" title="Upgrading projects"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec19"/>Upgrading projects</h2></div></div></div><p>This is another <a id="id196" class="indexterm"/>scenario in which Sencha Architect helps us a lot. Developing a really big Ext JS or Sencha Touch project can take a while. We start developing the project with the latest version of the framework (most of the cases); however, Sencha releases new versions of the framework <a id="id197" class="indexterm"/>with fixes and new components. And we want to have those fixes, so for this reason we want to upgrade the project as well.</p><p>Sencha Architect also offers the feature of upgrading. To upgrade a project (as long Sencha Architect already supports this new version) we need to select the <span class="strong"><strong>Library</strong></span> and right-click on it. An <span class="strong"><strong>Upgrade</strong></span> option will appear. Once you click on it, we need to confirm that we really want to upgrade, because there is no turning back. Sencha Architect will also create an archive backup for the project's safety:</p><div class="mediaobject"><img src="graphics/9819OS_05_04.jpg" alt="Upgrading projects"/></div><p>In the preceding screenshot, we upgraded a project that was built with Ext JS 4.0. So we can first upgrade to Ext JS 4.1.x, or we can update directly to Ext JS 4.2.x. Also, in the previous screenshot we upgraded from Ext JS 4.0.x to Ext JS 4.1.x. If we try to upgrade it again, only the <span class="strong"><strong>Upgrade to Ext JS 4.2.x</strong></span> option<a id="id198" class="indexterm"/> will be available as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_05_05.jpg" alt="Upgrading projects"/></div><p>The same feature is available for Sencha Touch:</p><div class="mediaobject"><img src="graphics/9819OS_05_06.jpg" alt="Upgrading projects"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>For these examples, we used an existing Ext JS project (<code class="literal">arrayGrid</code>) that is available at <a class="ulink" href="https://github.com/loiane/sencha-extjs4-examples-architect/tree/master/grid/arrayGrid">https://github.com/loiane/sencha-extjs4-examples-architect/tree/master/grid/arrayGrid</a> and <code class="literal">Touch Twitter Search</code>
<a id="id199" class="indexterm"/> that is available at <a class="ulink" href="https://github.com/loiane/sencha-touch2-examples-architect/tree/master/TouchTwitterSearch">https://github.com/loiane/sencha-touch2-examples-architect/tree/master/TouchTwitterSearch</a>.</p></div></div></div><div class="section" title="Native themes"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec20"/>Native themes</h2></div></div></div><p>For Ext JS 4.2 and Sencha Touch 2.2 projects, the library also displays the <span class="strong"><strong>theme</strong></span> property. We can change<a id="id200" class="indexterm"/> to another available <span class="strong"><strong>theme</strong></span> (native theme) as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_05_07.jpg" alt="Native themes"/></div><p>And if we change the <span class="strong"><strong>theme</strong></span> on Sencha Architect, we will be able to see the changes right away on the <span class="strong"><strong>Design</strong></span> mode of the canvas:</p><div class="mediaobject"><img src="graphics/9819OS_05_08.jpg" alt="Native themes"/></div><p>The same will happen<a id="id201" class="indexterm"/> for Sencha Touch:</p><div class="mediaobject"><img src="graphics/9819OS_05_09.jpg" alt="Native themes"/></div><p>We will see how to handle custom themes at the end of this chapter.</p></div></div></div>
<div class="section" title="Creating/linking CSS and JavaScript files"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec42"/>Creating/linking CSS and JavaScript files</h1></div></div></div><p>Throughout this book, we learned how to create Sencha code using Sencha Architect. But an Ext JS or Sencha Touch project does not necessarily means we will have only Ext JS or Sencha Touch code. <a id="id202" class="indexterm"/>We can<a id="id203" class="indexterm"/> have additional JS and CSS files as well.</p><p>So let's see how to create<a id="id204" class="indexterm"/> new CSS and JS files (the logic is the same for both CSS and JS files). First we need to select <span class="strong"><strong>Resources</strong></span> from project inspector, and then <a id="id205" class="indexterm"/>go to the toolbox, locate <span class="strong"><strong>Resources</strong></span>, and double-click on the resource we want to create (<span class="emphasis"><em>Step 1</em></span>). Alternatively, we can also use the drag-and-drop feature that we learned in the previous chapters. Then, a new CSS or JS file will be displayed under the <span class="strong"><strong>Resources</strong></span> package. We need to select it and on the config panel we can give an <span class="strong"><strong>id</strong></span> (just to help<a id="id206" class="indexterm"/> us to identify the file) and its <span class="strong"><strong>url</strong></span> (<span class="emphasis"><em>Step 2</em></span>). Then, if we go<a id="id207" class="indexterm"/> to the canvas and open the code editor, we will be able to edit this file (<span class="emphasis"><em>Step 3</em></span>):</p><div class="mediaobject"><img src="graphics/9819OS_05_10.jpg" alt="Creating/linking CSS and JavaScript files"/></div><p>If the file does not exist, Sencha Architect will create it for us on the path set as the <span class="strong"><strong>url</strong></span> (if it is a local path). If the file already exists, Sencha Architect will load it for us as demonstrated by the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_05_11.jpg" alt="Creating/linking CSS and JavaScript files"/></div><p>As it is an existing file, it is going to be locked for <a id="id208" class="indexterm"/>changes. If you want to make changes on it, just <a id="id209" class="indexterm"/>click on <span class="strong"><strong>Unlock</strong></span>
<a id="id210" class="indexterm"/> and then you<a id="id211" class="indexterm"/> will have freedom to add, edit, or delete the code you want.</p></div>
<div class="section" title="Working with Google Maps"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec43"/>Working with Google Maps</h1></div></div></div><p>For Sencha Touch projects, it is possible to add a Google Maps API resource to the project. This resource<a id="id212" class="indexterm"/> will only add a new JavaScript file declaration in the <code class="literal">app.html</code> file pointing to the Google Maps API URL.</p><p>To add it, select <span class="strong"><strong>Resources</strong></span>
<a id="id213" class="indexterm"/> from the project inspector, go to the toolbox, locate <span class="strong"><strong>Resources</strong></span>, and double-click on the <span class="strong"><strong>Google Maps API</strong></span> resource. It is going to be added on the project inspector under the <span class="strong"><strong>Resources</strong></span> package. We do not need to change anything on the config panel.</p><div class="mediaobject"><img src="graphics/9819OS_05_12.jpg" alt="Working with Google Maps"/></div><p>Only Sencha Touch projects have this resource option. But if we want to add the Google Maps API on an Ext JS project, we can simply add a new JS resource pointing to the same URL as demonstrated previously.</p></div>
<div class="section" title="Working with custom themes"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec44"/>Working with custom themes</h1></div></div></div><p>We already learned how to work with native themes on Sencha Architect. But creating and customizing themes is fun and we also want to use custom themes in our Sencha Architect projects. And<a id="id214" class="indexterm"/> it is possible!</p><p>Remember we asked why Sencha Architect allows us to disable the <span class="strong"><strong>Include CSS</strong></span> option on the Library? This is one of the reasons. So if we want to use custom themes, we need to disable the <a id="id215" class="indexterm"/>
<span class="strong"><strong>Include CSS</strong></span> option and add our own theme. Adding a custom theme is very similar to adding an existing CSS resource to the project. First we select the <span class="strong"><strong>Resources</strong></span> from the project inspector. Then we need to go to the toolbox, locate the <a id="id216" class="indexterm"/>
<span class="strong"><strong>Resources</strong></span> option, and then double-click on the <span class="strong"><strong>CSS resource</strong></span>. The CSS file that represents the custom theme must be already present in the projects' directory. So we go to the config panel of this new CSS resource and add the relative path of the <code class="literal">my-theme.css</code> file. </p><p>Finally, the theme is included on the <code class="literal">app.html</code> file.</p><div class="mediaobject"><img src="graphics/9819OS_05_13.jpg" alt="Working with custom themes"/></div><p>When we reload the <a id="id217" class="indexterm"/>
<span class="strong"><strong>Design</strong></span> view <a id="id218" class="indexterm"/>of the canvas, the CSS will be applied to the project and we can immediately see how it looks, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9819OS_05_14.jpg" alt="Working with custom themes"/></div><p>Just remember that we need to generate the theme first. Sencha Architect is not a tool that will help us to create the theme; we need to use Sencha Cmd (along with Sass and Compass) to do it.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>For more information about creating themes for Ext JS please visit <a class="ulink" href="http://docs.sencha.com/extjs/4.2.1/#!/guide/theming">http://docs.sencha.com/extjs/4.2.1/#!/guide/theming</a> and for Sencha Touch please visit <a class="ulink" href="http://docs.sencha.com/touch/2.2.1/#!/guide/theming">http://docs.sencha.com/touch/2.2.1/#!/guide/theming</a>.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec45"/>Summary</h1></div></div></div><p>In this chapter we learned how to add some extra resources to a Sencha Architect project, such as a new CSS (or existing one), a new JavaScript file (or existing one), how to change themes, and how to apply a custom theme created by you or any other developer, how to upgrade the Ext JS or Sencha Touch SDK version, and also how to work with Google Maps. With all these resources we can enhance our projects.</p><p>In the next chapter, we will learn how to build, package, and deploy Sencha Architect projects.</p></div></body></html>