<html><head></head><body>
  <div id="_idContainer025">
   <h1 class="chapter-number" id="_idParaDest-140">
    <a id="_idTextAnchor139">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     5
    </span>
   </h1>
   <h1 id="_idParaDest-141">
    <a id="_idTextAnchor140">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Developing Node.js Modules
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     One of the main attractions of Node.js is the massive ecosystem of external third-party libraries.
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      Node.js modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     are
    </span>
    <a id="_idIndexMarker261">
    </a>
    <span class="koboSpan" id="kobo.6.1">
     libraries or a set of functions you want to include in your application.
    </span>
    <span class="koboSpan" id="kobo.6.2">
     Most modules will provide an API to expose functionality.
    </span>
    <span class="koboSpan" id="kobo.6.3">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.7.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.8.1">
     registry is where most Node.js modules are stored, where there are over a million Node.js
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.9.1">
      modules available.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.10.1">
     This chapter will first cover how to consume existing Node.js modules from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.11.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.12.1">
     registry for use within your applications using
    </span>
    <a id="_idIndexMarker262">
    </a>
    <span class="koboSpan" id="kobo.13.1">
     the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.14.1">
      npm
     </span>
    </strong>
    <strong class="bold">
     <span class="koboSpan" id="kobo.15.1">
      command-line
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.16.1">
       interface
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.17.1">
      (
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.18.1">
       CLI
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.19.1">
      ).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.20.1">
     Later in this chapter, you’ll learn how to develop and publish your own Node.js module to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.21.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.22.1">
     registry.
    </span>
    <span class="koboSpan" id="kobo.22.2">
     There will also be an introduction to using the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.23.1">
      ECMAScript Modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.24.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.25.1">
      ESM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.26.1">
     ) syntax, which
    </span>
    <a id="_idIndexMarker263">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     is available in all currently supported versions of Node.js.
    </span>
    <span class="koboSpan" id="kobo.27.2">
     The recipes in this chapter build upon each other, so it’s recommended you work through them
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      in order.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.29.1">
     This chapter will cover the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.30.1">
      following recipes:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.31.1">
      Consuming
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.32.1">
       Node.js modules
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.33.1">
      Scaffolding
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.34.1">
       a module
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.35.1">
      Writing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.36.1">
       module code
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.37.1">
      Publishing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.38.1">
       a module
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.39.1">
       Using ESM
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-142">
    <a id="_idTextAnchor141">
    </a>
    <span class="koboSpan" id="kobo.40.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.41.1">
     This chapter will require you to have Node.js, preferably the most recent Node.js 22 release, installed.
    </span>
    <span class="koboSpan" id="kobo.41.2">
     You should also have the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.42.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.43.1">
     CLI installed, which comes bundled with Node.js.
    </span>
    <span class="koboSpan" id="kobo.43.2">
     Both
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.44.1">
      node
     </span>
    </strong>
    <span class="koboSpan" id="kobo.45.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.46.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.47.1">
     should be in your path in your shell (
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.48.1">
      or terminal).
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.49.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.50.1">
     It is recommended to install Node.js
    </span>
    <a id="_idIndexMarker264">
    </a>
    <span class="koboSpan" id="kobo.51.1">
     with
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.52.1">
      Node Version Manager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.53.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.54.1">
      nvm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.55.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.55.2">
     It is a tool that enables you to easily switch Node.js versions on most Unix-like platforms.
    </span>
    <span class="koboSpan" id="kobo.55.3">
     If you’re using Windows, you can install Node.js
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.56.1">
      from
     </span>
    </span>
    <a href="https://nodejs.org/en/">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.57.1">
       https://nodejs.org/en/
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.58.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.59.1">
     You can confirm which versions of Node.js and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.60.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.61.1">
     are installed by typing the following command into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.62.1">
      your terminal:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.63.1">
$ node --version
v22.9.0
$ npm --version
10.8.3</span></pre>
   <p>
    <span class="koboSpan" id="kobo.64.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.65.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.66.1">
     CLI is the default package manager bundled with Node.js, and we’ll be using the bundled
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.67.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.68.1">
     CLI in this chapter to install and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.69.1">
      publish modules.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.70.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.71.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.72.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.73.1">
     CLI is bundled with Node.js as the default package manager.
    </span>
    <span class="koboSpan" id="kobo.73.2">
     npm, Inc.
    </span>
    <span class="koboSpan" id="kobo.73.3">
     is also the name of the company that owns the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.74.1">
      npm
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.75.1">
      registry (
     </span>
    </span>
    <a href="https://npmjs.org/">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.76.1">
       https://npmjs.org/
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.77.1">
      ).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.78.1">
     Note that as we will be downloading and publishing modules to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.79.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.80.1">
     registry, this chapter will require
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.81.1">
      internet access.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-143">
    <a id="_idTextAnchor142">
    </a>
    <span class="koboSpan" id="kobo.82.1">
     Consuming Node.js modules
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.83.1">
     In this recipe, we are
    </span>
    <a id="_idIndexMarker265">
    </a>
    <span class="koboSpan" id="kobo.84.1">
     going to learn how to consume
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.85.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.86.1">
     modules from the public
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.87.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.88.1">
     registry using the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.89.1">
       npm
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.90.1">
      CLI.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.91.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <strong class="bold">
     <span class="koboSpan" id="kobo.92.1">
      Yarn
     </span>
    </strong>
    <span class="koboSpan" id="kobo.93.1">
     is a popular
    </span>
    <a id="_idIndexMarker266">
    </a>
    <span class="koboSpan" id="kobo.94.1">
     alternative package manager for JavaScript and was created as an alternative to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.95.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.96.1">
     CLI in 2016.
    </span>
    <span class="koboSpan" id="kobo.96.2">
     When Yarn was released,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.97.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.98.1">
     did not have the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.99.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.100.1">
     feature to guarantee consistency of which specific versions of modules would be installed.
    </span>
    <span class="koboSpan" id="kobo.100.2">
     This was one of the key features of Yarn.
    </span>
    <span class="koboSpan" id="kobo.100.3">
     At the time of writing, the Yarn CLI offers a similar user experience to what the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.101.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.102.1">
     CLI provides.
    </span>
    <span class="koboSpan" id="kobo.102.2">
     Yarn maintains a registry that is a reverse proxy to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.103.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.104.1">
     registry.
    </span>
    <span class="koboSpan" id="kobo.104.2">
     For more information about Yarn, check out their
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.105.1">
      Get Started
     </span>
    </em>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.106.1">
      guide:
     </span>
    </span>
    <span class="No-Break">
    </span>
    <a href="https://yarnpkg.com/getting-started">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.107.1">
       https://yarnpkg.com/getting-started
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.108.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-144">
    <a id="_idTextAnchor143">
    </a>
    <span class="koboSpan" id="kobo.109.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.110.1">
     To get started, we first need to create a new directory to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.111.1">
      work in:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.112.1">
$ mkdir consuming-modules
$ cd consuming-modules</span></pre>
   <p>
    <span class="koboSpan" id="kobo.113.1">
     We will also need a file where we can attempt to execute the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.114.1">
      imported module:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.115.1">
$ touch require-express.js</span></pre>
   <h2 id="_idParaDest-145">
    <a id="_idTextAnchor144">
    </a>
    <span class="koboSpan" id="kobo.116.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.117.1">
     In this section, we’re
    </span>
    <a id="_idIndexMarker267">
    </a>
    <span class="koboSpan" id="kobo.118.1">
     going to set up a project and install the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.119.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.120.1">
     module, a commonly used web framework for Node.js and often one of the first modules newcomers to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.121.1">
      runtime learn.
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.122.1">
      First, we’ll need to initialize a new project.
     </span>
     <span class="koboSpan" id="kobo.122.2">
      Do this by typing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.123.1">
       the following:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.124.1">$ npm init</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.125.1">
      You will need to step through the utility to answer the questions in the command-line utility.
     </span>
     <span class="koboSpan" id="kobo.125.2">
      If you are unsure, you can just hit
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.126.1">
       Enter
      </span>
     </em>
     <span class="koboSpan" id="kobo.127.1">
      to accept
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.128.1">
       the defaults.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.129.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.130.1">
       npm init
      </span>
     </strong>
     <span class="koboSpan" id="kobo.131.1">
      command should have generated a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.132.1">
       package.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.133.1">
      file in your project directory.
     </span>
     <span class="koboSpan" id="kobo.133.2">
      It should look
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.134.1">
       like this:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.135.1">
{
  "name": "consuming-modules",
  "version": "1.0.0",
  "main": "require-express.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp;
      exit 1"
  },
  "author": "",
  "license": "ISC",
  "description": ""
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.136.1">
      Now, we can install our module.
     </span>
     <span class="koboSpan" id="kobo.136.2">
      To install the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.137.1">
       express
      </span>
     </strong>
     <span class="koboSpan" id="kobo.138.1">
      module, type the following command
     </span>
     <a id="_idIndexMarker268">
     </a>
     <span class="koboSpan" id="kobo.139.1">
      while in your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.140.1">
       project directory:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.141.1">$ npm install express</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.142.1">
      If we look at the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.143.1">
       package.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.144.1">
      file again, we should see that the module has been added to a
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.145.1">
        dependencies
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.146.1">
       field:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.147.1">{</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.148.1">  "name": "consuming-modules",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.149.1">  "version": "1.0.0",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.150.1">  "description": "",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.151.1">  "main": "require-express.js",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.152.1">  "scripts": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.153.1">    "test": "echo \"Error: no test specified\" &amp;&amp;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.154.1">      exit 1"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.155.1">  },</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.156.1">  "author": "",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.157.1">  "license": "ISC",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.158.1">  "dependencies": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.159.1">    "express": "^4.18.2"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.160.1">  }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.161.1">}</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.162.1">
       Also, observe that both a
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.163.1">
        node_modules
       </span>
      </strong>
      <span class="koboSpan" id="kobo.164.1">
       directory and a
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.165.1">
        package-lock.json
       </span>
      </strong>
      <span class="koboSpan" id="kobo.166.1">
       file have now been created in your
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.167.1">
        project directory.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.168.1">
      Now, we can open our
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.169.1">
       require-express.js
      </span>
     </strong>
     <span class="koboSpan" id="kobo.170.1">
      file.
     </span>
     <span class="koboSpan" id="kobo.170.2">
      We only need to add the following line to test whether we can import and use
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.171.1">
       the module:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.172.1">
const express = require('express');</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.173.1">
      It is expected that the program executes and immediately terminates after requiring the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.174.1">
       express
      </span>
     </strong>
     <span class="koboSpan" id="kobo.175.1">
      module.
     </span>
     <span class="koboSpan" id="kobo.175.2">
      Should the module not have been installed successfully, we would have seen an error like
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.176.1">
       the following:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.177.1">$ node require-express.js</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.178.1">internal/modules/cjs/loader.js:979</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.179.1">  throw err;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.180.1">  ^</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.181.1">Error: Cannot find module 'express'</span></strong></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.182.1">
     We’ve now successfully
    </span>
    <a id="_idIndexMarker269">
    </a>
    <span class="koboSpan" id="kobo.183.1">
     downloaded a third-party module from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.184.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.185.1">
     registry and imported it into our application so that it can
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.186.1">
      be used.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-146">
    <a id="_idTextAnchor145">
    </a>
    <span class="koboSpan" id="kobo.187.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.188.1">
     The recipe made use of both
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.189.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.190.1">
     , the CLI bundled with Node.js, and the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.191.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.192.1">
     public registry to download the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.193.1">
      express
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.194.1">
      third-party module.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.195.1">
     The first command of the recipe was
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.196.1">
      npm init
     </span>
    </strong>
    <span class="koboSpan" id="kobo.197.1">
     .
    </span>
    <span class="koboSpan" id="kobo.197.2">
     This command initializes a new project in the current working directory.
    </span>
    <span class="koboSpan" id="kobo.197.3">
     By default, running this command will open a CLI utility that will ask for some properties about your project.
    </span>
    <span class="koboSpan" id="kobo.197.4">
     The following table defines the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.198.1">
      requested properties:
     </span>
    </span>
   </p>
   <table class="No-Table-Style _idGenTablePara-1" id="table001-3">
    <colgroup>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.199.1">
           Property
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.200.1">
           Definition
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.201.1">
          Package name
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.202.1">
         Specifies the name
        </span>
        <a id="_idIndexMarker270">
        </a>
        <span class="koboSpan" id="kobo.203.1">
         of the project.
        </span>
        <span class="koboSpan" id="kobo.203.2">
         It must be unique when publishing to the
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.204.1">
          npm
         </span>
        </strong>
        <span class="koboSpan" id="kobo.205.1">
         registry.
        </span>
        <span class="koboSpan" id="kobo.205.2">
         A name can be prefixed by a scope; for
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.206.1">
          example,
         </span>
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.207.1">
           @organization/package
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.208.1">
          .
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.209.1">
          Version
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.210.1">
         The initial version of the project.
        </span>
        <span class="koboSpan" id="kobo.210.2">
         It is typical of Node.js modules to follow the Semantic Versioning standard.
        </span>
        <span class="koboSpan" id="kobo.210.3">
         The default value
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.211.1">
          is
         </span>
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.212.1">
           1.0.0
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.213.1">
          .
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.214.1">
          Description
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.215.1">
         A brief description of your project to help users understand what your project does and
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.216.1">
          its purpose.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.217.1">
          Entry point
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.218.1">
         The entry point file of your Node.js application or module.
        </span>
        <span class="koboSpan" id="kobo.218.2">
         It’s the path to the main file that will be executed when your module is required by another application.
        </span>
        <span class="koboSpan" id="kobo.218.3">
         The default value
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.219.1">
          is
         </span>
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.220.1">
           index.js
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.221.1">
          .
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.222.1">
          Test command
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.223.1">
         Used to define the command to be run when executing
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.224.1">
          npm test
         </span>
        </strong>
        <span class="koboSpan" id="kobo.225.1">
         or
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.226.1">
          npm run test
         </span>
        </strong>
        <span class="koboSpan" id="kobo.227.1">
         .
        </span>
        <span class="koboSpan" id="kobo.227.2">
         Typically, this will be the command that executes your
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.228.1">
          test suite.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.229.1">
          Git repository
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.230.1">
         Specifies the location of your project’s source code repository.
        </span>
        <span class="koboSpan" id="kobo.230.2">
         This is helpful for contributors and users who want to access the code, report issues,
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.231.1">
          or contribute.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.232.1">
          Keywords
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.233.1">
         Keywords relating to
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.234.1">
          your project.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.235.1">
          Author
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.236.1">
         A list of the author(s) of
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.237.1">
          the project.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.238.1">
          License
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.239.1">
         Indicates the license type under which the project is distributed.
        </span>
        <span class="koboSpan" id="kobo.239.2">
         This is important for users to understand how they are permitted to use and share
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.240.1">
          your project.
         </span>
        </span>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.241.1">
     Table 5.1 – Table detailing default properties of the package.json file
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.242.1">
     The only properties
    </span>
    <a id="_idIndexMarker271">
    </a>
    <span class="koboSpan" id="kobo.243.1">
     that are mandatory are the package name and version.
    </span>
    <span class="koboSpan" id="kobo.243.2">
     It is also possible to skip the CLI utility and accept all defaults by typing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.244.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.245.1">
$ npm init --yes</span></pre>
   <p>
    <span class="koboSpan" id="kobo.246.1">
     It is possible to configure default answers using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.247.1">
      npm config
     </span>
    </strong>
    <span class="koboSpan" id="kobo.248.1">
     command.
    </span>
    <span class="koboSpan" id="kobo.248.2">
     This can be achieved with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.249.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.250.1">
$ npm config set init.author.name "Your Name"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.251.1">
     Once the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.252.1">
      npm init
     </span>
    </strong>
    <span class="koboSpan" id="kobo.253.1">
     command completes, it will generate a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.254.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.255.1">
     file in your current working directory.
    </span>
    <span class="koboSpan" id="kobo.255.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.256.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.257.1">
     file does
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.258.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.259.1">
      It lists the packages that your project depends on, acting as a
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.260.1">
       blueprint
      </span>
     </em>
     <span class="koboSpan" id="kobo.261.1">
      or set of instructions as to which dependencies need to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.262.1">
       be installed
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.263.1">
      Provides a mechanism for you to specify the versions of a package that your project can use – based on the Semantic
     </span>
     <a id="_idIndexMarker272">
     </a>
     <span class="koboSpan" id="kobo.264.1">
      Versioning
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.265.1">
       specification (
      </span>
     </span>
     <a href="https://semver.org/">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.266.1">
        https://semver.org/
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.267.1">
       )
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.268.1">
     In the next step of the recipe, we used the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.269.1">
      npm install express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.270.1">
     command to install the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.271.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.272.1">
     module.
    </span>
    <span class="koboSpan" id="kobo.272.2">
     The command reaches out to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.273.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.274.1">
     registry to download the latest
    </span>
    <a id="_idIndexMarker273">
    </a>
    <span class="koboSpan" id="kobo.275.1">
     version of the module with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.276.1">
      express
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.277.1">
      name identifier.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.278.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.279.1">
     By default, when supplying a module name, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.280.1">
      npm install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.281.1">
     command will look for a module with that name and download it from the public
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.282.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.283.1">
     registry.
    </span>
    <span class="koboSpan" id="kobo.283.2">
     But it is also possible to pass the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.284.1">
      npm install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.285.1">
     command other parameters, such as a GitHub URL, and the command will install the content available at the URL.
    </span>
    <span class="koboSpan" id="kobo.285.2">
     For more information, refer to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.286.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.287.1">
     CLI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.288.1">
      documentation:
     </span>
    </span>
    <a href="https://docs.npmjs.com/cli/v10/commands/npm-install">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.289.1">
       https://docs.npmjs.com/cli/v10/commands/npm-install
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.290.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.291.1">
     When the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.292.1">
      install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.293.1">
     command completes, it will put the module contents into a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.294.1">
      node_modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.295.1">
     directory.
    </span>
    <span class="koboSpan" id="kobo.295.2">
     If there isn’t one in the current project, but there is
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.296.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.297.1">
     , the command will also create a
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.298.1">
       node_modules
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.299.1">
      directory.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.300.1">
     If you look at the contents of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.301.1">
      node_modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.302.1">
     directory, you will notice that more than just the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.303.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.304.1">
     module is present.
    </span>
    <span class="koboSpan" id="kobo.304.2">
     This is because
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.305.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.306.1">
     has dependencies, and their dependencies may also
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.307.1">
      have dependencies.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.308.1">
     When installing a module, you’re potentially, and often, installing a whole tree of modules.
    </span>
    <span class="koboSpan" id="kobo.308.2">
     The following output shows a snippet of the structure of a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.309.1">
      node_modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.310.1">
     directory from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.311.1">
      the recipe:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.312.1">$ ls node_modules</span></strong><span class="koboSpan" id="kobo.313.1">
     |-- accepts
     |-- escape-html
     |-- ipaddr.js
     |-- raw-body
     |-- array-flatten
     |-- etag
     |-- media-typer
     |-- safe-buffer
     |-- ...</span></pre>
   <p>
    <span class="koboSpan" id="kobo.314.1">
     You can also use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.315.1">
      npm list
     </span>
    </strong>
    <span class="koboSpan" id="kobo.316.1">
     command to list the contents of your
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.317.1">
       node_modules
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.318.1">
      directory.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.319.1">
     You may also notice that a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.320.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.321.1">
     file has been created.
    </span>
    <span class="koboSpan" id="kobo.321.2">
     Files of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.322.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.323.1">
     type were introduced in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.324.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.325.1">
     version 5.
    </span>
    <span class="koboSpan" id="kobo.325.2">
     The difference between
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.326.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.327.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.328.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.329.1">
     is that a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.330.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.331.1">
     file defines specific versions of all modules in the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.332.1">
       node_modules
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.333.1">
      tree.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.334.1">
     Due to the way dependencies are installed, two developers with the same
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.335.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.336.1">
     file may experience different results when running
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.337.1">
      npm install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.338.1">
     .
    </span>
    <span class="koboSpan" id="kobo.338.2">
     This is mainly because a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.339.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.340.1">
     file can specify acceptable
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.341.1">
      module ranges.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.342.1">
     For example, in our
    </span>
    <a id="_idIndexMarker274">
    </a>
    <span class="koboSpan" id="kobo.343.1">
     recipe, we installed the latest version of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.344.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.345.1">
     , and this resulted in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.346.1">
      following range:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.347.1">
"express": "^4.18.2"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.348.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.349.1">
      ^
     </span>
    </strong>
    <span class="koboSpan" id="kobo.350.1">
     character indicates that it will allow all versions above v4.18.2 to be installed, but not v5.x.x.
    </span>
    <span class="koboSpan" id="kobo.350.2">
     If v4.18.3 were to be released in the time between when developer A and developer B run the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.351.1">
      npm install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.352.1">
     command, then it is likely that developer A will get v4.18.2 and developer B will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.353.1">
      get v4.18.3.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.354.1">
     If the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.355.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.356.1">
     file is shared between the developers, they will be guaranteed the installation of the same version of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.357.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.358.1">
     and the same versions of all the dependencies
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.359.1">
      of
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.360.1">
       express
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.361.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.362.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.363.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.364.1">
     CLI can also generate a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.365.1">
      npm-shrinkwrap.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.366.1">
     file using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.367.1">
      npm shrinkwrap
     </span>
    </strong>
    <span class="koboSpan" id="kobo.368.1">
     command.
    </span>
    <span class="koboSpan" id="kobo.368.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.369.1">
      npm-shrinkwrap.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.370.1">
     file is identical in structure and serves a similar purpose to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.371.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.372.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.372.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.373.1">
      package-lock.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.374.1">
     file cannot be published to the registry, whereas the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.375.1">
      npm-shrinkwrap.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.376.1">
     can.
    </span>
    <span class="koboSpan" id="kobo.376.2">
     Typically, when publishing an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.377.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.378.1">
     module, you’ll want to not include the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.379.1">
      npm-shrinkwrap.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.380.1">
     file as it would prevent the module from receiving transitive
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.381.1">
      dependency updates.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.382.1">
     The presence of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.383.1">
      npm-shrinkwrap.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.384.1">
     in a package means that all installs of that package will generate the same dependencies.
    </span>
    <span class="koboSpan" id="kobo.384.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.385.1">
      npm-shrinkwrap.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.386.1">
     file is useful for ensuring consistency across installations in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.387.1">
      production environments.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.388.1">
     In the final step of the recipe, we imported the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.389.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.390.1">
     module to test whether it was installed
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.391.1">
      and accessible:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.392.1">
const express = require('express');</span></pre>
   <p>
    <span class="koboSpan" id="kobo.393.1">
     Note that this is the same way in which you import Node.js core modules.
    </span>
    <span class="koboSpan" id="kobo.393.2">
     The module-loading algorithm will first check to see whether you’re requiring a core Node.js module; it will then look in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.394.1">
      node_modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.395.1">
     folder to find the module with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.396.1">
      that name.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.397.1">
     It is also possible
    </span>
    <a id="_idIndexMarker275">
    </a>
    <span class="koboSpan" id="kobo.398.1">
     to use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.399.1">
      require()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.400.1">
     to import files by passing a path, such as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.401.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.402.1">
const file = require('./file.j</span><a id="_idTextAnchor146"/><span class="koboSpan" id="kobo.403.1">s');</span></pre>
   <h2 id="_idParaDest-147">
    <a id="_idTextAnchor147">
    </a>
    <span class="koboSpan" id="kobo.404.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.405.1">
     Now that we’ve learned a bit about consuming Node.js modules, we’re going to look at development dependencies, global modules, and the considerations you should make when consuming
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.406.1">
      Node.js modules.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.407.1">
     Understanding development dependencies
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.408.1">
     In
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.409.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.410.1">
     , you
    </span>
    <a id="_idIndexMarker276">
    </a>
    <span class="koboSpan" id="kobo.411.1">
     can distinguish between development
    </span>
    <a id="_idIndexMarker277">
    </a>
    <span class="koboSpan" id="kobo.412.1">
     dependencies and regular dependencies.
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.413.1">
      Development dependencies
     </span>
    </strong>
    <span class="koboSpan" id="kobo.414.1">
     are typically used for tooling that supports you in developing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.415.1">
      your application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.416.1">
     Development dependencies should not be required to run your application.
    </span>
    <span class="koboSpan" id="kobo.416.2">
     Having a distinction between dependencies that are required for your application to run and dependencies that are required to develop your application is particularly useful when it comes to deploying your application.
    </span>
    <span class="koboSpan" id="kobo.416.3">
     Your production application deployment can omit development dependencies, which makes the resulting production application smaller.
    </span>
    <span class="koboSpan" id="kobo.416.4">
     A very common use of development dependencies is for linting
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.417.1">
      and formatting.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.418.1">
     To install a development dependency, you need to supply the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.419.1">
      install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.420.1">
     command with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.421.1">
      --save-dev
     </span>
    </strong>
    <span class="koboSpan" id="kobo.422.1">
     parameter.
    </span>
    <span class="koboSpan" id="kobo.422.2">
     For example, to install
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.423.1">
      semistandard
     </span>
    </strong>
    <span class="koboSpan" id="kobo.424.1">
     , we can use
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.425.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.426.1">
$ npm install --save-dev --save-exact semistandard</span></pre>
   <p>
    <span class="koboSpan" id="kobo.427.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.428.1">
      --save-exact
     </span>
    </strong>
    <span class="koboSpan" id="kobo.429.1">
     parameter pins the exact version in your
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.430.1">
       package.json
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.431.1">
      file.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.432.1">
     Observe that there is a separate
    </span>
    <a id="_idIndexMarker278">
    </a>
    <span class="koboSpan" id="kobo.433.1">
     section for development
    </span>
    <a id="_idIndexMarker279">
    </a>
    <span class="koboSpan" id="kobo.434.1">
     dependencies that have been created
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.435.1">
      in
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.436.1">
       package.json
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.437.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.438.1">
{
  "name": "consuming-modules",
  "version": "1.0.0",
  "description": "",
  "main": "require-express.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.18.2"
  },
</span><strong class="bold"><span class="koboSpan" id="kobo.439.1">  "devDependencies": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.440.1">    "semistandard": "17.0.0"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.441.1">  }</span></strong><span class="koboSpan" id="kobo.442.1">
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.443.1">
     You can then execute
    </span>
    <a id="_idIndexMarker280">
    </a>
    <span class="koboSpan" id="kobo.444.1">
     the installed
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.445.1">
      semistandard
     </span>
    </strong>
    <span class="koboSpan" id="kobo.446.1">
     executable with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.447.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.448.1">
$ ./node_modules/semistandard/bin/cmd.js</span></pre>
   <h3>
    <span class="koboSpan" id="kobo.449.1">
     Installing global modules
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.450.1">
     It is possible to globally
    </span>
    <a id="_idIndexMarker281">
    </a>
    <span class="koboSpan" id="kobo.451.1">
     install Node.js modules.
    </span>
    <span class="koboSpan" id="kobo.451.2">
     Typically, the
    </span>
    <a id="_idIndexMarker282">
    </a>
    <span class="koboSpan" id="kobo.452.1">
     type of modules you’ll install globally are binaries or a program that you want to be accessible in your terminal.
    </span>
    <span class="koboSpan" id="kobo.452.2">
     To globally install a module, you pass the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.453.1">
      --global
     </span>
    </strong>
    <span class="koboSpan" id="kobo.454.1">
     command to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.455.1">
      install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.456.1">
     command
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.457.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.458.1">
$ npm install --global lolcatjs</span></pre>
   <p>
    <span class="koboSpan" id="kobo.459.1">
     This will not install
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.460.1">
      lolcatjs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.461.1">
     into your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.462.1">
      node_modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.463.1">
     folder.
    </span>
    <span class="koboSpan" id="kobo.463.2">
     Instead, it will be installed into the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.464.1">
      bin
     </span>
    </strong>
    <span class="koboSpan" id="kobo.465.1">
     directory of your Node.js installation.
    </span>
    <span class="koboSpan" id="kobo.465.2">
     To see where it was installed, you can use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.466.1">
      which
     </span>
    </strong>
    <span class="koboSpan" id="kobo.467.1">
     command (or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.468.1">
      where
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.469.1">
      on Windows):
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.470.1">
$ which lolcatjs
/Users/bgriggs/.nvm/versions/node/v20.11.0/bin/lolcatjs</span></pre>
   <p>
    <span class="koboSpan" id="kobo.471.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.472.1">
      bin
     </span>
    </strong>
    <span class="koboSpan" id="kobo.473.1">
     directory is likely to already be in your path because that is where the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.474.1">
      node
     </span>
    </strong>
    <span class="koboSpan" id="kobo.475.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.476.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.477.1">
     binaries are stored.
    </span>
    <span class="koboSpan" id="kobo.477.2">
     Therefore, any executable program that is globally installed will also be made available in your shell.
    </span>
    <span class="koboSpan" id="kobo.477.3">
     Now, you should be able to call the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.478.1">
      lolcatjs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.479.1">
     module from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.480.1">
      your shell:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.481.1">
$ lolcatjs --help</span></pre>
   <p>
    <span class="koboSpan" id="kobo.482.1">
     In
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.483.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.484.1">
     v5.2,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.485.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.486.1">
     added the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.487.1">
      npx
     </span>
    </strong>
    <span class="koboSpan" id="kobo.488.1">
     command to their CLI.
    </span>
    <span class="koboSpan" id="kobo.488.2">
     This command allows you to execute a global module without having it globally installed on your system.
    </span>
    <span class="koboSpan" id="kobo.488.3">
     You could execute the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.489.1">
      lolcatjs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.490.1">
     module without storing it with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.491.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.492.1">
$ npx lolcatjs</span></pre>
   <p>
    <span class="koboSpan" id="kobo.493.1">
     In general,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.494.1">
      npx
     </span>
    </strong>
    <span class="koboSpan" id="kobo.495.1">
     should be sufficient for most modules that you wish to execute.
    </span>
    <span class="koboSpan" id="kobo.495.2">
     Using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.496.1">
      npx
     </span>
    </strong>
    <span class="koboSpan" id="kobo.497.1">
     can be preferable as it enables you to run packages without polluting your global namespace.
    </span>
    <span class="koboSpan" id="kobo.497.2">
     It can also help when you need to execute different versions of a package on a per-project basis as it avoids any global
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.498.1">
      version conflicts.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.499.1">
     Responsibly consuming modules
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.500.1">
     You’ll likely want to
    </span>
    <a id="_idIndexMarker283">
    </a>
    <span class="koboSpan" id="kobo.501.1">
     leverage the Node.js module ecosystem in your applications.
    </span>
    <span class="koboSpan" id="kobo.501.2">
     Modules provide solutions and implementations of common problems and tasks, so reusing existing code can save you time when developing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.502.1">
      your applications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.503.1">
     As you saw in the recipe, simply pulling in the web framework,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.504.1">
      express
     </span>
    </strong>
    <span class="koboSpan" id="kobo.505.1">
     pulled in over 80 other modules.
    </span>
    <span class="koboSpan" id="kobo.505.2">
     Pulling in this number of modules adds risk, especially if you’re using these modules for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.506.1">
      production workloads.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.507.1">
     There are many considerations you should make when choosing a Node.js module to include in your
    </span>
    <a id="_idIndexMarker284">
    </a>
    <span class="koboSpan" id="kobo.508.1">
     application.
    </span>
    <span class="koboSpan" id="kobo.508.2">
     The following three considerations should be made
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.509.1">
      in particular:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.510.1">
       Security
      </span>
     </strong>
     <span class="koboSpan" id="kobo.511.1">
      : Can you depend on the module to fix security vulnerabilities?
     </span>
     <a href="B19212_09.xhtml#_idTextAnchor274">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.512.1">
         Chapter 9
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.513.1">
      will go into more detail about how to check for known security issues in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.514.1">
       your modules.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.515.1">
       Licenses
      </span>
     </strong>
     <span class="koboSpan" id="kobo.516.1">
      : If you link with open source libraries and then distribute the software, your software needs to be compliant with the licenses of the linked libraries.
     </span>
     <span class="koboSpan" id="kobo.516.2">
      Licenses can vary from restrictive/protective to permissive.
     </span>
     <span class="koboSpan" id="kobo.516.3">
      In GitHub, you can navigate to the license file, and it will give you a basic overview of what the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.517.1">
       license permits:
      </span>
     </span>
    </li>
   </ul>
   <div>
    <div class="IMG---Figure" id="_idContainer022">
     <span class="koboSpan" id="kobo.518.1">
      <img alt="Figure 5.1 – GitHub license information" src="image/B19212_05_01.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.519.1">
     Figure 5.1 – GitHub license information
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.520.1">
       Maintenance
      </span>
     </strong>
     <span class="koboSpan" id="kobo.521.1">
      : You’ll also need to consider how well maintained the module is.
     </span>
     <span class="koboSpan" id="kobo.521.2">
      Many modules publish their source code to GitHub and have their bug reports viewable as GitHub issues.
     </span>
     <span class="koboSpan" id="kobo.521.3">
      From viewing their issues and how/when the maintainers are responding to bug reports, you should be able to get some insight into how
     </span>
     <a id="_idIndexMarker285">
     </a>
     <span class="koboSpan" id="kobo.522.1">
      maintained the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.523.1">
       module is.
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-148">
    <a id="_idTextAnchor148">
    </a>
    <span class="koboSpan" id="kobo.524.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.525.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.526.1">
       Scaffolding a module
      </span>
     </em>
     <span class="koboSpan" id="kobo.527.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.528.1">
       this chapter
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.529.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.530.1">
       Writing module code
      </span>
     </em>
     <span class="koboSpan" id="kobo.531.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.532.1">
       this chapter
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.533.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.534.1">
       Publishing a module
      </span>
     </em>
     <span class="koboSpan" id="kobo.535.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.536.1">
       this chapter
      </span>
     </span>
    </li>
    <li>
     <em class="italic">
      <span class="koboSpan" id="kobo.537.1">
       Chapters 6
      </span>
     </em>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.538.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.539.1">
        9
       </span>
      </em>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-149">
    <a id="_idTextAnchor149">
    </a>
    <span class="koboSpan" id="kobo.540.1">
     Scaffolding a module
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.541.1">
     In this recipe, we’ll be
    </span>
    <a id="_idIndexMarker286">
    </a>
    <span class="koboSpan" id="kobo.542.1">
     scaffolding our first module; that is, we will set up a typical file and directory structure for our module and learn how to initialize our project with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.543.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.544.1">
     CLI.
    </span>
    <span class="koboSpan" id="kobo.544.2">
     We’ll also create a GitHub repository to store our module code.
    </span>
    <span class="koboSpan" id="kobo.544.3">
     GitHub is a hosting provider that allows users to store
    </span>
    <a id="_idIndexMarker287">
    </a>
    <span class="koboSpan" id="kobo.545.1">
     their
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.546.1">
      Git
     </span>
    </strong>
    <span class="koboSpan" id="kobo.547.1">
     -based repositories, where
    </span>
    <a id="_idIndexMarker288">
    </a>
    <span class="koboSpan" id="kobo.548.1">
     Git is a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.549.1">
      version control
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.550.1">
       system
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.551.1">
      (
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.552.1">
       VCS
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.553.1">
      ).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.554.1">
     The module we’re going to make will expose an API that converts the temperature in Fahrenheit to Celsius and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.555.1">
      vice versa.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-150">
    <a id="_idTextAnchor150">
    </a>
    <span class="koboSpan" id="kobo.556.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.557.1">
     This recipe will require you to have a GitHub account (
    </span>
    <a href="https://github.com/join">
     <span class="koboSpan" id="kobo.558.1">
      https://github.com/join
     </span>
    </a>
    <span class="koboSpan" id="kobo.559.1">
     ) to publish source code and an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.560.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.561.1">
     account (
    </span>
    <a href="https://www.npmjs.com/signup">
     <span class="koboSpan" id="kobo.562.1">
      https://www.npmjs.com/signup
     </span>
    </a>
    <span class="koboSpan" id="kobo.563.1">
     ) to publish
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.564.1">
      your module.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-151">
    <a id="_idTextAnchor151">
    </a>
    <span class="koboSpan" id="kobo.565.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.566.1">
     In this recipe, we’ll be using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.567.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.568.1">
     CLI to initialize our
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.569.1">
       temperature-converter
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.570.1">
      module.
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.571.1">
      Let’s create a GitHub repository to store our module code.
     </span>
     <span class="koboSpan" id="kobo.571.2">
      To do this, you can click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.572.1">
       +
      </span>
     </strong>
     <span class="koboSpan" id="kobo.573.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.574.1">
       New repository
      </span>
     </strong>
     <span class="koboSpan" id="kobo.575.1">
      from the GitHub navigation bar or navigate to
     </span>
     <a href="https://github.com/new">
      <span class="koboSpan" id="kobo.576.1">
       https://github.com/new
      </span>
     </a>
     <span class="koboSpan" id="kobo.577.1">
      .
     </span>
     <span class="koboSpan" id="kobo.577.2">
      Specify the repository name as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.578.1">
       temperature-converter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.579.1">
      .
     </span>
     <span class="koboSpan" id="kobo.579.2">
      Note that the repository name does not have to match the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.580.1">
       module name.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.581.1">
      While you’re here, it’s also recommended to add the default
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.582.1">
       .gitignore
      </span>
     </strong>
     <span class="koboSpan" id="kobo.583.1">
      file for Node.js and add the license file that matches the license field in
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.584.1">
       package.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.585.1">
      .
     </span>
     <span class="koboSpan" id="kobo.585.2">
      You should expect to see the following GitHub
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.586.1">
       user interface
      </span>
     </strong>
     <span class="koboSpan" id="kobo.587.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.588.1">
       UI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.589.1">
      ) for
     </span>
     <a id="_idIndexMarker289">
     </a>
     <span class="koboSpan" id="kobo.590.1">
      creating a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.591.1">
       new repository:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer023">
     <span class="koboSpan" id="kobo.592.1">
      <img alt="Figure 5.2 – The GitHub Create a new repository interface" src="image/B19212_05_02.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.593.1">
     Figure 5.2 – The GitHub Create a new repository interface
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.594.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.595.1">
     A
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.596.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.597.1">
     file informs Git which files to omit, or ignore, in a project.
    </span>
    <span class="koboSpan" id="kobo.597.2">
     GitHub provides a default
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.598.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.599.1">
     file per language or runtime.
    </span>
    <span class="koboSpan" id="kobo.599.2">
     GitHub’s default
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.600.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.601.1">
     file for Node.js is visible at
    </span>
    <a href="https://github.com/github/gitignore/blob/master/Node.gitignore">
     <span class="koboSpan" id="kobo.602.1">
      https://github.com/github/gitignore/blob/master/Node.gitignore
     </span>
    </a>
    <span class="koboSpan" id="kobo.603.1">
     .
    </span>
    <span class="koboSpan" id="kobo.603.2">
     Note that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.604.1">
      node_modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.605.1">
     is automatically added to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.606.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.607.1">
     .
    </span>
    <span class="koboSpan" id="kobo.607.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.608.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.609.1">
     file instructs which modules need to be installed for a project, and it is typically expected that each developer would run the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.610.1">
      npm install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.611.1">
     command on their development environment rather than have the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.612.1">
      node_modules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.613.1">
     directory committed to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.614.1">
      source control.
     </span>
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.615.1">
      Now the repository is initialized, we can clone the repository using the Git CLI in our shell.
     </span>
     <span class="koboSpan" id="kobo.615.2">
      Enter the
     </span>
     <a id="_idIndexMarker290">
     </a>
     <span class="koboSpan" id="kobo.616.1">
      following command to clone the repository, substituting the reference to the repository with your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.617.1">
       GitHub username:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.618.1">$ git clone git@github.com:username/temperature-converter.git</span></strong><span class="koboSpan" id="kobo.619.1">
Cloning into 'temperature-converter'...
</span><span class="koboSpan" id="kobo.619.2">remote: Enumerating objects: 5, done.
</span><span class="koboSpan" id="kobo.619.3">remote: Counting objects: 100% (5/5), done.
</span><span class="koboSpan" id="kobo.619.4">remote: Compressing objects: 100% (5/5), done.
</span><span class="koboSpan" id="kobo.619.5">remote: Total 5 (delta 0), reused 0 (delta 0), pack-reused 0
Receiving objects: 100% (5/5), done.</span></pre>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.620.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.621.1">
     It’s preferred to
    </span>
    <a id="_idIndexMarker291">
    </a>
    <span class="koboSpan" id="kobo.622.1">
     use
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.623.1">
      Secure Shell
     </span>
    </strong>
    <span class="koboSpan" id="kobo.624.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.625.1">
      SSH
     </span>
    </strong>
    <span class="koboSpan" id="kobo.626.1">
     ) to clone the repository.
    </span>
    <span class="koboSpan" id="kobo.626.2">
     If you have not set up your SSH keys for GitHub, then you should follow the steps
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.627.1">
      at
     </span>
    </span>
    <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.628.1">
       https://docs.github.com/en/authentication/connecting-to-github-with-ssh
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.629.1">
      .
     </span>
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.630.1">
      Change into the newly cloned directory and observe the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.631.1">
       files present:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.632.1">$ cd temperature-converter</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.633.1">$ ls</span></strong><span class="koboSpan" id="kobo.634.1">
LICENSE   README.md</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.635.1">
      You can also run the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.636.1">
       git status
      </span>
     </strong>
     <span class="koboSpan" id="kobo.637.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.638.1">
       git log
      </span>
     </strong>
     <span class="koboSpan" id="kobo.639.1">
      commands to see what state
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.640.1">
       we’re in:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.641.1">$ git status</span></strong><span class="koboSpan" id="kobo.642.1">
On branch main
Your branch is up to date with 'origin/main'.
</span><span class="koboSpan" id="kobo.642.2">nothing to commit, working tree clean</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.643.1">
      Now we’ve created our repository and have a copy locally to work from, we can initialize
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.644.1">
       our module:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.645.1">$ npm init</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.646.1">
      You can use
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.647.1">
       Enter
      </span>
     </em>
     <span class="koboSpan" id="kobo.648.1">
      to accept defaults or complete the values as follows.
     </span>
     <span class="koboSpan" id="kobo.648.2">
      The command will
     </span>
     <a id="_idIndexMarker292">
     </a>
     <span class="koboSpan" id="kobo.649.1">
      create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.650.1">
       package.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.651.1">
      file for you.
     </span>
     <span class="koboSpan" id="kobo.651.2">
      Open the file and expect to see output like
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.652.1">
       the following:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.653.1">
{
  "name": "temperature-converter",
  "version": "0.1.0",
  "description": "Converts temperatures between Fahrenheit and Celsius.",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "keywords": [
    "temperature",
    "converter",
    "utility"
  ],
  "author": "Beth Griggs",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/BethGriggs/temperature-converter.git"
  },
  "bugs": {
    "url": "https://github.com/BethGriggs/temperature-converter/issues"
  },
  "homepage": "https://github.com/BethGriggs/temperature-converter#readme"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.654.1">
      Open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.655.1">
       README.md
      </span>
     </strong>
     <span class="koboSpan" id="kobo.656.1">
      file and add, and then save, some simple text.
     </span>
     <span class="koboSpan" id="kobo.656.2">
      For example, you
     </span>
     <a id="_idIndexMarker293">
     </a>
     <span class="koboSpan" id="kobo.657.1">
      can
     </span>
     <a id="_idIndexMarker294">
     </a>
     <span class="koboSpan" id="kobo.658.1">
      add a simple heading in
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.659.1">
       Markdown
      </span>
     </strong>
     <span class="koboSpan" id="kobo.660.1">
      format:
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.661.1">
       #
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.662.1">
        temperature-converter
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.663.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.664.1">
      Now, we’re going to commit these changes with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.665.1">
       following commands:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.666.1">$ git add package.json README.md</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.667.1">$ git commit --message "first commit"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.668.1">$ git push origin main</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.669.1">
       When this is successful, you should see output like
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.670.1">
        the following:
       </span>
      </span>
     </p>
     <pre class="source-code"><span class="koboSpan" id="kobo.671.1">Enumerating objects: 6, done.
</span><span class="koboSpan" id="kobo.671.2">Counting objects: 100% (6/6), done.
</span><span class="koboSpan" id="kobo.671.3">Delta compression using up to 10 threads
Compressing objects: 100% (4/4), done.
</span><span class="koboSpan" id="kobo.671.4">Writing objects: 100% (4/4), 1020 bytes | 1020.00 KiB/s, done.
</span><span class="koboSpan" id="kobo.671.5">Total 4 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
</span><span class="koboSpan" id="kobo.671.6">To github.com:username/temperature-converter.git
   c0f53ef..6d27a2a  main -&gt; main</span></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.672.1">
     We’ve now seen how to use the Git and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.673.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.674.1">
     CLI to initialize our
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.675.1">
       temperature-converter
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.676.1">
      module.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-152">
    <a id="_idTextAnchor152">
    </a>
    <span class="koboSpan" id="kobo.677.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.678.1">
     To kick off our project, we
    </span>
    <a id="_idIndexMarker295">
    </a>
    <span class="koboSpan" id="kobo.679.1">
     begin by setting up a GitHub repository, which serves as a central hub for storing and managing our code base.
    </span>
    <span class="koboSpan" id="kobo.679.2">
     This involves creating a new repository on GitHub, where we’ll store our module code under a specified name – in this case,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.680.1">
      temperature-converter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.681.1">
     .
    </span>
    <span class="koboSpan" id="kobo.681.2">
     Additionally, we take the opportunity to include a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.682.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.683.1">
     file, which informs Git of files to exclude from version control and add a license file, defining how others can use
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.684.1">
      our code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.685.1">
     Once our repository is established, we clone it locally using the Git CLI.
    </span>
    <span class="koboSpan" id="kobo.685.2">
     Cloning creates a copy of the repository on our local machine, allowing us to work on the code base offline and push changes back to the remote repository when ready.
    </span>
    <span class="koboSpan" id="kobo.685.3">
     We navigate into the cloned directory to inspect its contents and review the repository’s status and history using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.686.1">
      git status
     </span>
    </strong>
    <span class="koboSpan" id="kobo.687.1">
     and
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.688.1">
       git log
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.689.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.690.1">
     With our local setup ready, we initialize our module using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.691.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.692.1">
     .
    </span>
    <span class="koboSpan" id="kobo.692.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.693.1">
      npm init
     </span>
    </strong>
    <span class="koboSpan" id="kobo.694.1">
     command guides us through creating a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.695.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.696.1">
     file, which contains essential metadata about our project, such as its name, version, and dependencies.
    </span>
    <span class="koboSpan" id="kobo.696.2">
     This file serves as a blueprint for our module and ensures consistency across
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.697.1">
      different environments.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.698.1">
     To finalize our initial setup, we commit our changes to the repository.
    </span>
    <span class="koboSpan" id="kobo.698.2">
     This involves staging the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.699.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.700.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.701.1">
      README.md
     </span>
    </strong>
    <span class="koboSpan" id="kobo.702.1">
     files, committing them with a descriptive message, and pushing the changes to the remote repository on GitHub.
    </span>
    <span class="koboSpan" id="kobo.702.2">
     This step ensures that our
    </span>
    <a id="_idIndexMarker296">
    </a>
    <span class="koboSpan" id="kobo.703.1">
     project’s history is well documented and that our latest changes
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.704.1">
      are published.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.705.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.706.1">
     Git is a powerful tool that is commonly used for source control of software.
    </span>
    <span class="koboSpan" id="kobo.706.2">
     If you’re unfamiliar with Git, GitHub provides an interactive guide for you to learn
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.707.1">
      at
     </span>
    </span>
    <a href="https://guides.github.com/introduction/flow/">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.708.1">
       https://guides.github.
      </span>
      <span id="_idTextAnchor153">
      </span>
      <span class="koboSpan" id="kobo.709.1">
       com/introduction/flow/
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.710.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-153">
    <a id="_idTextAnchor154">
    </a>
    <span class="koboSpan" id="kobo.711.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.712.1">
     In the recipe, we specified the module version as v0.1.0 to adhere to Semantic Versioning.
    </span>
    <span class="koboSpan" id="kobo.712.2">
     Let’s look at this in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.713.1">
      more detail.
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.714.1">
      Semantic Versioning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.715.1">
     , often
    </span>
    <a id="_idIndexMarker297">
    </a>
    <span class="koboSpan" id="kobo.716.1">
     abbreviated to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.717.1">
      SemVer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.718.1">
     , is a well-known standard for versioning.
    </span>
    <span class="koboSpan" id="kobo.718.2">
     Node.js itself tries to adhere to Semantic Versioning as much
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.719.1">
      as possible.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.720.1">
     Semantic version numbers are in the form of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.721.1">
      X.Y.Z
     </span>
    </strong>
    <span class="koboSpan" id="kobo.722.1">
     , where the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.723.1">
      following applies:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.724.1">
       X
      </span>
     </strong>
     <span class="koboSpan" id="kobo.725.1">
      represents the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.726.1">
       major version
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.727.1">
       Y
      </span>
     </strong>
     <span class="koboSpan" id="kobo.728.1">
      represents the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.729.1">
       minor version
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.730.1">
       Z
      </span>
     </strong>
     <span class="koboSpan" id="kobo.731.1">
      represents the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.732.1">
       patch version
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.733.1">
     Briefly, Semantic Versioning states that you increment the major version, the first value, when you make breaking API changes.
    </span>
    <span class="koboSpan" id="kobo.733.2">
     The second number, the minor version, is incremented when new features have been added in a backward-compatible (or non-breaking) manner.
    </span>
    <span class="koboSpan" id="kobo.733.3">
     The patch version, or the third number, is for bug fixes and non-breaking and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.734.1">
      non-additive updates.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.735.1">
     The major version 0 is reserved for initial development, and it is acceptable to make breaking changes up until v1 is released.
    </span>
    <span class="koboSpan" id="kobo.735.2">
     It is often disputed what the initial version should be.
    </span>
    <span class="koboSpan" id="kobo.735.3">
     In the recipe, we started with version v0.1.0 to allow us the freedom to make breaking changes in early development without having to increment the major
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.736.1">
      version number.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.737.1">
     Following Semantic Versioning is commonplace in the Node.js module ecosystem.
    </span>
    <span class="koboSpan" id="kobo.737.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.738.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.739.1">
     CLI takes this into account by allowing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.740.1">
      semver
     </span>
    </strong>
    <span class="koboSpan" id="kobo.741.1">
     ranges in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.742.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.743.1">
     – refer to the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.744.1">
      There’s more…
     </span>
    </em>
    <span class="koboSpan" id="kobo.745.1">
     section of the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.746.1">
      Consuming Node.js modules
     </span>
    </em>
    <span class="koboSpan" id="kobo.747.1">
     recipe or visit
    </span>
    <a href="https://docs.npmjs.com/files/package.json#dependencies">
     <span class="koboSpan" id="kobo.748.1">
      https://docs.npmjs.com/files/package.json#dependencies
     </span>
    </a>
    <span class="koboSpan" id="kobo.749.1">
     for more information on
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.750.1">
      npm
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.751.1">
      version ranges.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.752.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.753.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.754.1">
     CLI provides an API to support Semantic Versioning.
    </span>
    <span class="koboSpan" id="kobo.754.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.755.1">
      npm version
     </span>
    </strong>
    <span class="koboSpan" id="kobo.756.1">
     command can be supplied with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.757.1">
      major
     </span>
    </strong>
    <span class="koboSpan" id="kobo.758.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.759.1">
      minor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.760.1">
     , or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.761.1">
      patch
     </span>
    </strong>
    <span class="koboSpan" id="kobo.762.1">
     to increment the appropriate version numbers in your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.763.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.764.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.764.2">
     There are further arguments that can be passed
    </span>
    <a id="_idIndexMarker298">
    </a>
    <span class="koboSpan" id="kobo.765.1">
     to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.766.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.767.1">
     version command, including support for pre-versions – refer to
    </span>
    <a href="https://docs.npmjs.com/cli/version">
     <span class="koboSpan" id="kobo.768.1">
      https://docs.npmjs.com/cli/version
     </span>
    </a>
    <span class="koboSpan" id="kobo.769.1">
     for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.770.1">
      more information.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-154">
    <a id="_idTextAnchor155">
    </a>
    <span class="koboSpan" id="kobo.771.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.772.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.773.1">
       Writing module code
      </span>
     </em>
     <span class="koboSpan" id="kobo.774.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.775.1">
       this chapter
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.776.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.777.1">
       Publishing a module
      </span>
     </em>
     <span class="koboSpan" id="kobo.778.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.779.1">
       this chapter
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-155">
    <a id="_idTextAnchor156">
    </a>
    <span class="koboSpan" id="kobo.780.1">
     Writing module code
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.781.1">
     In this recipe, we’re
    </span>
    <a id="_idIndexMarker299">
    </a>
    <span class="koboSpan" id="kobo.782.1">
     going to start writing our module code.
    </span>
    <span class="koboSpan" id="kobo.782.2">
     The module we will write will expose two APIs that will be used to convert the supplied temperature from Fahrenheit to Celsius and vice versa.
    </span>
    <span class="koboSpan" id="kobo.782.3">
     We’ll also install a popular code formatter to keep our module code consistent and add some simple
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.783.1">
      test cases.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-156">
    <a id="_idTextAnchor157">
    </a>
    <span class="koboSpan" id="kobo.784.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.785.1">
     Ensure you’re in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.786.1">
      temperature-converter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.787.1">
     folder and that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.788.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.789.1">
     is present, indicating that we have an initialized
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.790.1">
      project directory.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.791.1">
     We’ll also need to create the first JavaScript file for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.792.1">
      our module:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.793.1">
$ touch index.js</span></pre>
   <p>
    <span class="koboSpan" id="kobo.794.1">
     Later, we’ll try testing importing and using the module, so let’s create two files ready
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.795.1">
      for that:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.796.1">
$ touch test.js</span></pre>
   <h2 id="_idParaDest-157">
    <a id="_idTextAnchor158">
    </a>
    <span class="koboSpan" id="kobo.797.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.798.1">
     We’re going to start this recipe by installing a code formatter to keep our module code styling consistent.
    </span>
    <span class="koboSpan" id="kobo.798.2">
     By the end of this recipe, we will have created our first
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.799.1">
      Node.js module.
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.800.1">
      First, let’s add
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.801.1">
       semistandard
      </span>
     </strong>
     <span class="koboSpan" id="kobo.802.1">
      as a code formatter for our module.
     </span>
     <span class="koboSpan" id="kobo.802.2">
      When we know that other users are going to be consuming or contributing to our modules, it’s important to have consistently formatted code
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.803.1">
       for consistency:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.804.1">$ npm install --save-dev --save-exact semistandard</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.805.1">
      For the initial implementation of this module, we will expose two APIs – one to be used to convert from Fahrenheit to Celsius which we will name
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.806.1">
       fahrenheitToCelsius()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.807.1">
      , and another to be used for the opposite conversion named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.808.1">
       celsiusToFahrenheit()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.809.1">
      .
     </span>
     <span class="koboSpan" id="kobo.809.2">
      We’ll be using the known mathematical formula for converting between the two temperature measures.
     </span>
     <span class="koboSpan" id="kobo.809.3">
      Start by
     </span>
     <a id="_idIndexMarker300">
     </a>
     <span class="koboSpan" id="kobo.810.1">
      opening
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.811.1">
       index.js
      </span>
     </strong>
     <span class="koboSpan" id="kobo.812.1">
      and adding the following to define the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.813.1">
        fahrenheitToCelsius()
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.814.1">
       function:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.815.1">
// Convert Fahrenheit to Celsius
function fahrenheitToCelsius(fahrenheit) {
    return (fahrenheit - 32) * 5 / 9;
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.816.1">
      Now, we can add the accompanying
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.817.1">
       celsiusToFahrenheit()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.818.1">
      function to do the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.819.1">
       reverse conversion:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.820.1">
// Convert Celsius to Fahrenheit
function celsiusToFahrenheit(celsius) {
    return (celsius * 9 / 5) + 32;
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.821.1">
      Next, we’ll add the key line to the bottom of our file that makes the two
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.822.1">
       functions available:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.823.1">
// Export the conversion functions
module.exports = {
    fahrenheitToCelsius,
    celsiusToFahrenheit
};</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.824.1">
      Now, we can test if our small program works from the command line with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.825.1">
       following commands:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.826.1">$ node --print "require('./').fahrenheitToCelsius(100)"</span></strong><span class="koboSpan" id="kobo.827.1">
37.77777777777778
</span><strong class="bold"><span class="koboSpan" id="kobo.828.1">$ node --print "require('./').celsiusToFahrenheit(37)"</span></strong><span class="koboSpan" id="kobo.829.1">
98.6</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.830.1">
      Now, let’s create a simple test file for our module.
     </span>
     <span class="koboSpan" id="kobo.830.2">
      We’ll use the core
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.831.1">
       assert
      </span>
     </strong>
     <span class="koboSpan" id="kobo.832.1">
      module to
     </span>
     <a id="_idIndexMarker301">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.833.1">
       implement this:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.834.1">
const assert = require('assert');
const { fahrenheitToCelsius, celsiusToFahrenheit }
  = require('./index');
// Test fahrenheitToCelsius
assert.strictEqual(fahrenheitToCelsius(32), 0, '32°F should be 0');
assert.strictEqual(fahrenheitToCelsius(212), 100, '212°F should be 100');
// Test celsiusToFahrenheit
assert.strictEqual(celsiusToFahrenheit(0), 32, '0°C should be 32');
assert.strictEqual(celsiusToFahrenheit(100), 212, '100°C should be 212');
console.log('All tests passed!');</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.835.1">
       Observe that we are requiring the module and testing the two temperature
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.836.1">
        conversion functions.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.837.1">
      Now, we can run our
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.838.1">
       test file:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.839.1">$ node test.js</span></strong><span class="koboSpan" id="kobo.840.1">
All tests passed!</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.841.1">
      Now, let’s define
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.842.1">
       npm run lint
      </span>
     </strong>
     <span class="koboSpan" id="kobo.843.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.844.1">
       npm run test
      </span>
     </strong>
     <span class="koboSpan" id="kobo.845.1">
      scripts to run our linter and tests respectively.
     </span>
     <span class="koboSpan" id="kobo.845.2">
      Open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.846.1">
       package.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.847.1">
      file and replace the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.848.1">
       scripts
      </span>
     </strong>
     <span class="koboSpan" id="kobo.849.1">
      property with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.850.1">
       the following:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.851.1">
  "scripts": {
    "lint": "semistandard *.js",
    "test": "node test.js"
  },</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.852.1">
      We can now
     </span>
     <a id="_idIndexMarker302">
     </a>
     <span class="koboSpan" id="kobo.853.1">
      run the linter with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.854.1">
       npm
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.855.1">
        run lint
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.856.1">
       :
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.857.1">$ npm run lint</span></strong><span class="koboSpan" id="kobo.858.1">
&gt; temperature-converter@0.1.0 lint
&gt; semistandard *.js</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.859.1">
       If you had any lint issues,
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.860.1">
        semistandard
       </span>
      </strong>
      <span class="koboSpan" id="kobo.861.1">
       would alert you to these.
      </span>
      <span class="koboSpan" id="kobo.861.2">
       They can be fixed by running
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.862.1">
        the following:
       </span>
      </span>
     </p>
     <pre class="source-code"><strong class="bold"><span class="koboSpan" id="kobo.863.1">$ npm run lint -- --fix</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.864.1">
      We can also run our tests with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.865.1">
       npm
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.866.1">
        test
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.867.1">
       command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.868.1">$ npm test</span></strong><span class="koboSpan" id="kobo.869.1">
&gt; temperature-converter@0.1.0 test
&gt; node test.js
All tests passed!</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.870.1">
      Now we’ve implemented, linted, and tested our code, we can commit the updates with Git and push our module code
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.871.1">
       to GitHub:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.872.1">$ git add package.json package-lock.json index.js test.js</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.873.1">$ git commit --message 'implement temperature converter, add tests'</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.874.1">$ git push origin main</span></strong></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.875.1">
     We’ve now created our first module that exposes two APIs and added a test case for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.876.1">
      good measure.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-158">
    <a id="_idTextAnchor159">
    </a>
    <span class="koboSpan" id="kobo.877.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.878.1">
     To ensure consistency
    </span>
    <a id="_idIndexMarker303">
    </a>
    <span class="koboSpan" id="kobo.879.1">
     and readability in our module’s code base, we begin by incorporating a popular code formatter,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.880.1">
      semistandard
     </span>
    </strong>
    <span class="koboSpan" id="kobo.881.1">
     , as part of our development workflow.
    </span>
    <span class="koboSpan" id="kobo.881.2">
     This ensures that our code follows a standardized style, making it easier for other developers to understand and collaborate on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.882.1">
      our project.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.883.1">
     With
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.884.1">
      semistandard
     </span>
    </strong>
    <span class="koboSpan" id="kobo.885.1">
     installed as a development dependency, we proceed to implement the core functionality of our module.
    </span>
    <span class="koboSpan" id="kobo.885.2">
     We define two conversion functions,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.886.1">
      fahrenheitToCelsius()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.887.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.888.1">
      celsiusToFahrenheit()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.889.1">
     , leveraging well-known mathematical formulas for temperature conversion.
    </span>
    <span class="koboSpan" id="kobo.889.2">
     These functions are encapsulated within our
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.890.1">
      index.js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.891.1">
     file, making them accessible for use within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.892.1">
      our module.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.893.1">
     To expose these conversion functions externally, we add an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.894.1">
      export
     </span>
    </strong>
    <span class="koboSpan" id="kobo.895.1">
     statement at the bottom of our file, allowing other modules to import and utilize them as needed.
    </span>
    <span class="koboSpan" id="kobo.895.2">
     This establishes a clear interface for interacting with our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.896.1">
      module’s functionality.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.897.1">
     To validate the correctness of our implementation, we create a simple test file,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.898.1">
      test.js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.899.1">
     , using Node.js’s built-in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.900.1">
      assert
     </span>
    </strong>
    <span class="koboSpan" id="kobo.901.1">
     module.
    </span>
    <span class="koboSpan" id="kobo.901.2">
     This file contains test cases for each conversion function, ensuring that they produce the expected results under various
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.902.1">
      input conditions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.903.1">
     Upon running the test file, we confirm that all tests pass, indicating that our module’s functionality behaves as intended.
    </span>
    <span class="koboSpan" id="kobo.903.2">
     We then enhance our development workflow by defining
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.904.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.905.1">
     scripts for linting and testing, streamlining the process of code formatting
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.906.1">
      and validation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.907.1">
     Running
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.908.1">
      npm run lint
     </span>
    </strong>
    <span class="koboSpan" id="kobo.909.1">
     checks our code base for adherence to coding standards, while
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.910.1">
      npm test
     </span>
    </strong>
    <span class="koboSpan" id="kobo.911.1">
     executes our test suite to verify the correctness of our implementation.
    </span>
    <span class="koboSpan" id="kobo.911.2">
     Any deviations from the coding standards or failing tests are highlighted for resolution.
    </span>
    <span class="koboSpan" id="kobo.911.3">
     It is possible to create as many custom scripts as is suitable for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.912.1">
      your project.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.913.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.914.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.915.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.916.1">
     CLI supports many shortcuts.
    </span>
    <span class="koboSpan" id="kobo.916.2">
     For example,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.917.1">
      npm install
     </span>
    </strong>
    <span class="koboSpan" id="kobo.918.1">
     can be shortened to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.919.1">
      npm i
     </span>
    </strong>
    <span class="koboSpan" id="kobo.920.1">
     .
    </span>
    <span class="koboSpan" id="kobo.920.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.921.1">
      npm test
     </span>
    </strong>
    <span class="koboSpan" id="kobo.922.1">
     command can be shortened to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.923.1">
      npm t
     </span>
    </strong>
    <span class="koboSpan" id="kobo.924.1">
     .
    </span>
    <span class="koboSpan" id="kobo.924.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.925.1">
      npm run-script
     </span>
    </strong>
    <span class="koboSpan" id="kobo.926.1">
     command can be shortened to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.927.1">
      npm run
     </span>
    </strong>
    <span class="koboSpan" id="kobo.928.1">
     .
    </span>
    <span class="koboSpan" id="kobo.928.2">
     For more details, refer to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.929.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.930.1">
     CLI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.931.1">
      documentation:
     </span>
    </span>
    <a href="https://docs.npmjs.com/cli-documentation/cli">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.932.1">
       https://docs.npmjs.com/cli-documentation/cli
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.933.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.934.1">
     Finally, with our
    </span>
    <a id="_idIndexMarker304">
    </a>
    <span class="koboSpan" id="kobo.935.1">
     code base implemented, validated, and organized, we commit our changes using Git and push them to our GitHub repository.
    </span>
    <span class="koboSpan" id="kobo.935.2">
     This ensures that our project’s history is well documented and that our latest updates are available
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.936.1">
      to collaborators.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-159">
    <a id="_idTextAnchor160">
    </a>
    <span class="koboSpan" id="kobo.937.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.938.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.939.1">
       Publishing a module
      </span>
     </em>
     <span class="koboSpan" id="kobo.940.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.941.1">
       this chapter
      </span>
     </span>
    </li>
    <li>
     <a href="B19212_08.xhtml#_idTextAnchor243">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.942.1">
         Chapter 8
        </span>
       </em>
      </span>
     </a>
    </li>
   </ul>
   <h1 id="_idParaDest-160">
    <a id="_idTextAnchor161">
    </a>
    <span class="koboSpan" id="kobo.943.1">
     Publishing a module
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.944.1">
     This recipe will walk you
    </span>
    <a id="_idIndexMarker305">
    </a>
    <span class="koboSpan" id="kobo.945.1">
     through how to prepare and publish your module to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.946.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.947.1">
     registry.
    </span>
    <span class="koboSpan" id="kobo.947.2">
     Publishing your module to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.948.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.949.1">
     registry will make it available for other developers to find and include in their applications.
    </span>
    <span class="koboSpan" id="kobo.949.2">
     This is how the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.950.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.951.1">
     ecosystem operates: developers will author and publish modules to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.952.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.953.1">
     for other developers to consume and reuse in their
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.954.1">
      Node.js application.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.955.1">
     In the recipe, we will be publishing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.956.1">
      temperature-converter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.957.1">
     module that we created in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.958.1">
      Writing module code
     </span>
    </em>
    <span class="koboSpan" id="kobo.959.1">
     recipe of this chapter to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.960.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.961.1">
     registry.
    </span>
    <span class="koboSpan" id="kobo.961.2">
     Specifically, we’ll be publishing our module to a scoped namespace, so you can expect your module to be available
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.962.1">
      at
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.963.1">
       @npmusername/temperature-converter
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.964.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-161">
    <a id="_idTextAnchor162">
    </a>
    <span class="koboSpan" id="kobo.965.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.966.1">
     This recipe relies on the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.967.1">
      Writing module code
     </span>
    </em>
    <span class="koboSpan" id="kobo.968.1">
     recipe of this chapter.
    </span>
    <span class="koboSpan" id="kobo.968.2">
     We will be publishing the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.969.1">
      temperature-converter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.970.1">
     module that we created in that recipe to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.971.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.972.1">
     registry.
    </span>
    <span class="koboSpan" id="kobo.972.2">
     You can obtain the module code from the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.973.1">
      Writing module code
     </span>
    </em>
    <span class="koboSpan" id="kobo.974.1">
     recipe from the GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.975.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Node.js-Cookbook-Fifth-Edition/tree/main/Chapter05/temperature-converter">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.976.1">
       https://github.com/PacktPublishing/Node.js-Cookbook-Fifth-Edition/tree/main/Chapter05/temperature-converter
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.977.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.978.1">
     This recipe also will require you to have an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.979.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.980.1">
     account.
    </span>
    <span class="koboSpan" id="kobo.980.2">
     Go to
    </span>
    <a href="https://www.npmjs.com/signup">
     <span class="koboSpan" id="kobo.981.1">
      https://www.npmjs.com/signup
     </span>
    </a>
    <span class="koboSpan" id="kobo.982.1">
     to sign up for an account.
    </span>
    <span class="koboSpan" id="kobo.982.2">
     Keep note of your
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.983.1">
       npm
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.984.1">
      username.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-162">
    <a id="_idTextAnchor163">
    </a>
    <span class="koboSpan" id="kobo.985.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.986.1">
     This recipe will
    </span>
    <a id="_idIndexMarker306">
    </a>
    <span class="koboSpan" id="kobo.987.1">
     walk through the process of publishing a module to the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.988.1">
       npm
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.989.1">
      registry.
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.990.1">
      Once you have signed up for an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.991.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.992.1">
      account, you can authorize your
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.993.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.994.1">
      client with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.995.1">
       following command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.996.1">$ npm login</span></strong><span class="koboSpan" id="kobo.997.1">
npm notice Log in on https://registry.npmjs.org/
Login at:
https://www.npmjs.com/login?next=/login/cli/{UUID}
Press ENTER to open in the browser...
</span><span class="koboSpan" id="kobo.997.2">Logged in on https://registry.npmjs.org/.</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.998.1">
      Let’s update the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.999.1">
       README.md
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1000.1">
      file that was automatically created for us when we initialized the GitHub repository in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1001.1">
       Scaffolding a module
      </span>
     </em>
     <span class="koboSpan" id="kobo.1002.1">
      recipe.
     </span>
     <span class="koboSpan" id="kobo.1002.2">
      Having an appropriate and clear
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1003.1">
       README.md
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1004.1">
      file is important so that users who stumble upon the module can understand what it does and whether it suits their use case.
     </span>
     <span class="koboSpan" id="kobo.1004.2">
      Open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1005.1">
       README.md
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1006.1">
      file in your editor and update the following, remembering
     </span>
     <a id="_idIndexMarker307">
     </a>
     <span class="koboSpan" id="kobo.1007.1">
      to change the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1008.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1009.1">
      username to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1010.1">
       your own:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1011.1">
# Temperature Converter Module
 A simple Node.js module for converting temperatures between Fahrenheit and Celsius.
</span><span class="koboSpan" id="kobo.1011.2"># Example usage
```js
const { fahrenheitToCelsius, celsiusToFahrenheit }
  = require('@npmusername/temperature-converter');
const celsius = fahrenheitToCelsius(100);
console.log(`100°F is ${celsius}°C`);
const fahrenheit = celsiusToFahrenheit(37);
console.log(`37°C is ${fahrenheit}°F`);
```
# Running Tests
 To run tests and ensure the module is working as expected, navigate to the module's root directory and execute:
```sh
$ npm run test
```
# License
This project is licensed under the MIT License.</span></pre>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1012.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1013.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1014.1">
      README
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1015.1">
     file we’ve just created is written using Markdown.
    </span>
    <span class="koboSpan" id="kobo.1015.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1016.1">
      .md
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1017.1">
     or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1018.1">
      .MD
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1019.1">
     ending indicates that it is a Markdown file.
    </span>
    <span class="koboSpan" id="kobo.1019.2">
     Markdown is a documentation syntax that is commonly used across GitHub.
    </span>
    <span class="koboSpan" id="kobo.1019.3">
     To learn more about Markdown, check out GitHub’s guide at
    </span>
    <a href="https://guides.github.com/features/mastering-markdown/">
     <span class="koboSpan" id="kobo.1020.1">
      https://guides.github.com/features/mastering-markdown/
     </span>
    </a>
    <span class="koboSpan" id="kobo.1021.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1021.2">
     Many of the popular editors have plugins available so that you can render Markdown in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1022.1">
      your editor.
     </span>
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.1023.1">
      Now, we need to update the name of our module in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1024.1">
       package.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1025.1">
      file to match our scoped module name.
     </span>
     <span class="koboSpan" id="kobo.1025.2">
      Let’s also make this version
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1026.1">
       1.0.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1027.1">
      of the module.
     </span>
     <span class="koboSpan" id="kobo.1027.2">
      You can either manually edit
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1028.1">
       package.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1029.1">
      or rerun the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1030.1">
       npm init
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1031.1">
      command to
     </span>
     <a id="_idIndexMarker308">
     </a>
     <span class="koboSpan" id="kobo.1032.1">
      overwrite it with any new values.
     </span>
     <span class="koboSpan" id="kobo.1032.2">
      Remember to change the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1033.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1034.1">
      username to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1035.1">
       your own:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1036.1">
{
  "name": "@npmusername/temperature-converter",
  "version": "1.0.0",
  "description": "Converts temperatures between Fahrenheit and Celsius.",
  "main": "index.js",
  "scripts": {
    "lint": "semistandard *.js",
    "test": "node test.js"
  },
  "keywords": [
    "temperature",
    "converter",
    "utility"
  ],
  "author": "Forename Surname",
  "license": "MIT",
  "devDependencies": {
    "semistandard": "17.0.0"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/username/temperature-converter.git"
  },
  "bugs": {
    "url": "https://github.com/username/te</span><a id="_idTextAnchor164"/><span class="koboSpan" id="kobo.1037.1">mperature-converter/issues"
  },
  „homepage": „https://github.com/username/temperature-converter#readme"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1038.1">
      It is ideal to keep
     </span>
     <a id="_idIndexMarker309">
     </a>
     <span class="koboSpan" id="kobo.1039.1">
      your public GitHub repository up to date.
     </span>
     <span class="koboSpan" id="kobo.1039.2">
      Typically, module authors will create a tag on GitHub that matches the version that is pushed to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1040.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1041.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1041.2">
      This can act as an audit trail for users wishing to see the source code of the module at a particular version, without having to download it via
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1042.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1043.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1043.2">
      However, please note that nothing is enforcing that the code you publish to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1044.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1045.1">
      must match the code you publish
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1046.1">
       to GitHub:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1047.1">$ git add .</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1048.1">$ git commit --message "v1.0.0"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1049.1">$ git push origin main</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1050.1">$ git tag v1.0.0</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1051.1">$ git push origin v1.0.0</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1052.1">
      Now, we’re ready to publish our module to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1053.1">
       npm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1054.1">
      registry using the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1055.1">
       following command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1056.1">$ npm publish --access=public</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1057.1">
      You can check that your publish was successful by navigating to
     </span>
     <a href="https://www.npmjs.com/package/@npmusername/temperature-converter">
      <span class="koboSpan" id="kobo.1058.1">
       https://www.npmjs.com/package/@npmusername/temperature-converter
      </span>
     </a>
     <span class="koboSpan" id="kobo.1059.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1059.2">
      Expect to see
     </span>
     <a id="_idIndexMarker310">
     </a>
     <span class="koboSpan" id="kobo.1060.1">
      the following information about
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1061.1">
       your module:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer024">
     <span class="koboSpan" id="kobo.1062.1">
      <img alt="Figure 5.3 – npm module information on npmjs.com" src="image/B19212_05_03.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1063.1">
     Figure 5.3 – npm module information on npmjs.com
    </span>
   </p>
   <h2 id="_idParaDest-163">
    <a id="_idTextAnchor165">
    </a>
    <span class="koboSpan" id="kobo.1064.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1065.1">
     We first authenticated our local
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1066.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1067.1">
     client using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1068.1">
      npm login
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1069.1">
     command.
    </span>
    <span class="koboSpan" id="kobo.1069.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1070.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1071.1">
     client provides the ability to set up access controls so that certain users can publish to specific modules
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1072.1">
      or scopes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1073.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1074.1">
      npm login
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1075.1">
     command identifies who you are and where you’re entitled to publish.
    </span>
    <span class="koboSpan" id="kobo.1075.2">
     It is also possible to log out using
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1076.1">
       npm logout
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1077.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1078.1">
     The command that did the actual publishing to the registry was
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1079.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1080.1">
$ npm publish --access=public</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1081.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1082.1">
      npm publish
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1083.1">
     command attempts to publish the package at the location identified by the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1084.1">
      name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1085.1">
     field in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1086.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1087.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1087.2">
     In the recipe, we published it to a scoped package – specifically, we used our own username’s scope.
    </span>
    <span class="koboSpan" id="kobo.1087.3">
     Scoped packages help to avoid naming conflicts.
    </span>
    <span class="koboSpan" id="kobo.1087.4">
     It is possible to publish your package to the global scope by not passing it a named scope – but you’re likely to run into name conflicts if your package has a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1088.1">
      common name.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1089.1">
     We also passed the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1090.1">
      --access=public
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1091.1">
     flag.
    </span>
    <span class="koboSpan" id="kobo.1091.2">
     When publishing to a scoped package, we explicitly need
    </span>
    <a id="_idIndexMarker311">
    </a>
    <span class="koboSpan" id="kobo.1092.1">
     to indicate that we want the module to be public.
    </span>
    <span class="koboSpan" id="kobo.1092.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1093.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1094.1">
     CLI allows you to publish your modules as either public or private for scoped packages.
    </span>
    <span class="koboSpan" id="kobo.1094.2">
     To publish a module privately, you need to have a paid
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1095.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1096.1">
     account.
    </span>
    <span class="koboSpan" id="kobo.1096.2">
     Note that the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1097.1">
      --access=public
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1098.1">
     flag is not required when publishing to the global scope because all modules in the global namespace
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1099.1">
      are public.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1100.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1101.1">
      npm publish
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1102.1">
     command packaged up our module code and uploaded it to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1103.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1104.1">
     registry.
    </span>
    <span class="koboSpan" id="kobo.1104.2">
     Because the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1105.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1106.1">
     file generated from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1107.1">
      npm init
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1108.1">
     command is generated with consistent properties,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1109.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1110.1">
     can extract and render that information on the module’s page.
    </span>
    <span class="koboSpan" id="kobo.1110.2">
     As shown in the recipe,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1111.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1112.1">
     automatically populated the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1113.1">
      README
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1114.1">
     file, version, and GitHub links in the UI based on the
    </span>
    <a id="_idTextAnchor166">
    </a>
    <span class="koboSpan" id="kobo.1115.1">
     information in our
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1116.1">
       package.json
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1117.1">
      file.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-164">
    <a id="_idTextAnchor167">
    </a>
    <span class="koboSpan" id="kobo.1118.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1119.1">
     Next, we’ll consider prepublish scripts and the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1120.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1121.1">
     file and look at how to publish to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1122.1">
      private registries.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1123.1">
     Using prepublish scripts
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1124.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1125.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1126.1">
     CLI
    </span>
    <a id="_idIndexMarker312">
    </a>
    <span class="koboSpan" id="kobo.1127.1">
     supports a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1128.1">
      prepublishOnly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1129.1">
     script.
    </span>
    <span class="koboSpan" id="kobo.1129.2">
     This script will only run before the module is packaged
    </span>
    <a id="_idIndexMarker313">
    </a>
    <span class="koboSpan" id="kobo.1130.1">
     and published.
    </span>
    <span class="koboSpan" id="kobo.1130.2">
     This is useful for catching mistakes before publishing.
    </span>
    <span class="koboSpan" id="kobo.1130.3">
     Should a mistake be made, it may be necessary to publish a second version to correct this mistake, causing potentially avoidable inconvenience to your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1131.1">
      module consumers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1132.1">
     Let’s add a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1133.1">
      prepublishOnly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1134.1">
     script to our module.
    </span>
    <span class="koboSpan" id="kobo.1134.2">
     Our
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1135.1">
      prepublishOnly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1136.1">
     script will just run our
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1137.1">
      lint
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1138.1">
     script for now.
    </span>
    <span class="koboSpan" id="kobo.1138.2">
     Add a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1139.1">
      prepublishOnly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1140.1">
     script
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1141.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1142.1">
  "scripts": {
    "prepublishOnly": "npm run lint",
    "lint": "semistandard *.js",
    "test": "node test.js"
  }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1143.1">
     Typically, module authors will include rerunning their test suite in their
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1144.1">
       prepublishOnly
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1145.1">
      scripts:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1146.1">
"prepublishOn</span><a id="_idTextAnchor168"/><span class="koboSpan" id="kobo.1147.1">ly": "npm run lint &amp;&amp; npm test",</span></pre>
   <h3>
    <span class="koboSpan" id="kobo.1148.1">
     Using .npmignore and package.json “files” properties
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1149.1">
     As with a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1150.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1151.1">
     file, which
    </span>
    <a id="_idIndexMarker314">
    </a>
    <span class="koboSpan" id="kobo.1152.1">
     specifies
    </span>
    <a id="_idIndexMarker315">
    </a>
    <span class="koboSpan" id="kobo.1153.1">
     which files
    </span>
    <a id="_idIndexMarker316">
    </a>
    <span class="koboSpan" id="kobo.1154.1">
     should not
    </span>
    <a id="_idIndexMarker317">
    </a>
    <span class="koboSpan" id="kobo.1155.1">
     be tracked or committed to a repository,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1156.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1157.1">
     omits the files listed in it from the package.
    </span>
    <span class="koboSpan" id="kobo.1157.2">
     Files of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1158.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1159.1">
     type are not mandatory, and if you do not have one but do have a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1160.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1161.1">
     file, then
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1162.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1163.1">
     will omit the files and directories matched by the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1164.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1165.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1165.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1166.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1167.1">
     file will override
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1168.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1169.1">
     if such a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1170.1">
      file exists.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1171.1">
     The types of files and directories that are often added to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1172.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1173.1">
     files are test files.
    </span>
    <span class="koboSpan" id="kobo.1173.2">
     If you have a particular large test suite in terms of size, then you should consider excluding these files by adding them to your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1174.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1175.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1175.2">
     Users consuming your module do not tend to need the test suite bundled into their applications – excluding these and other superfluous files reduces the size of your module for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1176.1">
      all consumers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1177.1">
     A
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1178.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1179.1">
     file that excludes just the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1180.1">
      test
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1181.1">
     directory would look
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1182.1">
      like this:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1183.1">
# Dependency directories
test/</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1184.1">
     Remember that once the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1185.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1186.1">
     file is created, it will be considered the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1187.1">
      source of truth
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1188.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1189.1">
      SOT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1190.1">
     ) of which files
    </span>
    <a id="_idIndexMarker318">
    </a>
    <span class="koboSpan" id="kobo.1191.1">
     should be ignored from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1192.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1193.1">
     package.
    </span>
    <span class="koboSpan" id="kobo.1193.2">
     It’s worth going through your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1194.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1195.1">
     file and ensuring items that you’ve added there are also added
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1196.1">
      to
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1197.1">
       .npmignore
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1198.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1199.1">
     In the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1200.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1201.1">
     file, you can also define a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1202.1">
      "files"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1203.1">
     property that allows you to specify an array of file paths or patterns that should be included when the package is published.
    </span>
    <span class="koboSpan" id="kobo.1203.2">
     Rather than an exclusion list, this acts as an inclusion list for what
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1204.1">
      is published.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1205.1">
     For instance, if you have a Node.js module containing various utility functions, but you only want to expose the main functionality and documentation, you can specify “
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1206.1">
      files": ["lib/", "docs/", "README.md"]
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1207.1">
     in your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1208.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1209.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1209.2">
     This ensures that only the files within the specified directories and the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1210.1">
      README.md
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1211.1">
     file are included when users install your package, while all other internal files or directories are excluded from the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1212.1">
      published package.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1213.1">
     Providing an allow list by defining
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1214.1">
      "files"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1215.1">
     in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1216.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1217.1">
     file rather than an exclusion list with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1218.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1219.1">
     may be preferable as it removes the risk of forgetting to exclude a file in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1220.1">
      .
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1221.1">
       npmignore
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1222.1">
      file.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1223.1">
     To ensure
    </span>
    <a id="_idIndexMarker319">
    </a>
    <span class="koboSpan" id="kobo.1224.1">
     that
    </span>
    <a id="_idIndexMarker320">
    </a>
    <span class="koboSpan" id="kobo.1225.1">
     your
    </span>
    <a id="_idIndexMarker321">
    </a>
    <span class="koboSpan" id="kobo.1226.1">
     package
    </span>
    <a id="_idIndexMarker322">
    </a>
    <span class="koboSpan" id="kobo.1227.1">
     includes only the desired files upon publication, you can execute the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1228.1">
      npm pack
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1229.1">
     command in your local environment.
    </span>
    <span class="koboSpan" id="kobo.1229.2">
     This command creates a tarball in your current working directory, mirroring the process used
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1230.1">
      for publishing.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1231.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1232.1">
     While TypeScript and other transpilers are not covered in detail in this book, it is typical when publishing to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1233.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1234.1">
     to only publish the output files, such as JavaScript files, and not the source files, such as TypeScript files.
    </span>
    <span class="koboSpan" id="kobo.1234.2">
     This practice ensures that the package consumers receive only the necessary files to run the module.
    </span>
    <span class="koboSpan" id="kobo.1234.3">
     To achieve this, you can use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1235.1">
      .npmignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1236.1">
     file or the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1237.1">
      "files"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1238.1">
     property in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1239.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1240.1">
     to exclude source files and include only the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1241.1">
      compiled output.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1242.1">
     Private registries
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1243.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1244.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1245.1">
     CLI supports
    </span>
    <a id="_idIndexMarker323">
    </a>
    <span class="koboSpan" id="kobo.1246.1">
     being configured to point to a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1247.1">
      private registry
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1248.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1248.2">
     A private
    </span>
    <a id="_idIndexMarker324">
    </a>
    <span class="koboSpan" id="kobo.1249.1">
     registry is a registry that has been set up with some form of access control.
    </span>
    <span class="koboSpan" id="kobo.1249.2">
     Typically, these are set up by businesses and organizations that wish to keep some of their code off the public registry, potentially due to policy restrictions determined by their business.
    </span>
    <span class="koboSpan" id="kobo.1249.3">
     This enables the business to share its modules among members of the same organization while adhering to the business policy.
    </span>
    <span class="koboSpan" id="kobo.1249.4">
     Equally, a private registry can be used as a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1250.1">
      caching mechanism.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1251.1">
     You can change which registry you’re pointing to with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1252.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1253.1">
$ npm config set registry https://registry.your-registry.npme.io/</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1254.1">
     You can see which registry you’re pointing to with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1255.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1256.1">
$ npm config get registry
https://registry.npmjs.org/</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1257.1">
     Note that these both use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1258.1">
      npm config
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1259.1">
     command.
    </span>
    <span class="koboSpan" id="kobo.1259.2">
     You can list all your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1260.1">
      npm config
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1261.1">
     settings with
    </span>
    <a id="_idIndexMarker325">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1262.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1263.1">
$ npm config list
; "user" config from /Users/bgriggs/.npmrc
; node bin location = /Users/bgriggs/.nvm/versions/node/v22.9.0/bin/node
; node version = v22.9.0
; npm local prefix = /Users/bgriggs/Node.js-Cookbook/Chapter05/temperature-converter
; npm version = 10.2.4
; cwd = /Users/bgriggs/Node.js-Cookbook/Chapter05/temperature-converter
; HOME = /Users/bgriggs
; Run `npm config ls -l` to show all defaults</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1264.1">
     A
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1265.1">
      .npmrc
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1266.1">
     file is a configuration file for
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1267.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1268.1">
     that can be used to set various
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1269.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1270.1">
     configurations globally or on a per-project basis.
    </span>
    <span class="koboSpan" id="kobo.1270.2">
     This file allows you to persistently configure
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1271.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1272.1">
     settings, such as registry URLs and authentication tokens.
    </span>
    <span class="koboSpan" id="kobo.1272.2">
     For example, to point
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1273.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1274.1">
     to a private registry, you can add the following line to a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1275.1">
      .
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1276.1">
       npmrc
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1277.1">
      file:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1278.1">
registry= https://registry.your-registry.npme.io/</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1279.1">
     There are many other configurable settings and customizations in this file; refer to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1280.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1281.1">
     documentation
    </span>
    <a id="_idIndexMarker326">
    </a>
    <span class="koboSpan" id="kobo.1282.1">
     for
    </span>
    <a id="_idIndexMarker327">
    </a>
    <span class="koboSpan" id="kobo.1283.1">
     more
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1284.1">
      information:
     </span>
    </span>
    <a href="https://docs.npmjs.com/cli/v10/configuring-npm/npmrc">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1285.1">
       https://docs.npmjs.com/cli/v10/configuring-npm/npmrc
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1286.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-165">
    <a id="_idTextAnchor169">
    </a>
    <span class="koboSpan" id="kobo.1287.1">
     Using ECMAScript modules
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1288.1">
     ESM represents
    </span>
    <a id="_idIndexMarker328">
    </a>
    <span class="koboSpan" id="kobo.1289.1">
     the official standard for packaging JavaScript code for reuse.
    </span>
    <span class="koboSpan" id="kobo.1289.2">
     ESM was introduced in
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1290.1">
      ECMAScript 2015
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1291.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1292.1">
      ES6
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1293.1">
     ) to bring
    </span>
    <a id="_idIndexMarker329">
    </a>
    <span class="koboSpan" id="kobo.1294.1">
     a unified module system to the JavaScript language, a featu
    </span>
    <a id="_idTextAnchor170">
    </a>
    <span class="koboSpan" id="kobo.1295.1">
     re that was absent and in much demand for years.
    </span>
    <span class="koboSpan" id="kobo.1295.2">
     Unlike
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1296.1">
      CommonJS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1297.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1298.1">
      CJS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1299.1">
     ) modules, which were adopted by Node.js for server-side
    </span>
    <a id="_idIndexMarker330">
    </a>
    <span class="koboSpan" id="kobo.1300.1">
     development, ESM provides a way to statically analyze code for imports and exports, allowing for optimizations such as tree shaking, which eliminates
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1301.1">
      unused code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1302.1">
     The introduction of ESM into the Node.js ecosystem marked a significant milestone, offering developers the benefits of a standardized module system that is compatible across different environments, including browsers, where modules can be natively loaded without the need for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1303.1">
      bundling tools.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1304.1">
     Configuring Node.js to use ESM involves understanding and setting up project structures to accommodate the new syntax and module resolution strategy.
    </span>
    <span class="koboSpan" id="kobo.1304.2">
     By default, Node.js treats
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1305.1">
      .js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1306.1">
     files as CJS modules, but with the inclusion of a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1307.1">
      "type": "module"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1308.1">
     entry in a project’s
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1309.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1310.1">
     file, Node.js switches to treating files with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1311.1">
      .js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1312.1">
     extension
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1313.1">
      as ESM.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1314.1">
     Alternatively, developers can use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1315.1">
      .mjs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1316.1">
     extension for JavaScript files intended to be treated as modules.
    </span>
    <span class="koboSpan" id="kobo.1316.2">
     This setup phase is crucial as it lays the foundation for importing and exporting modules using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1317.1">
      import
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1318.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1319.1">
      export
     </span>
    </strong>
    <a id="_idTextAnchor171">
    </a>
    <span class="koboSpan" id="kobo.1320.1">
     keywords, respectively, moving away from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1321.1">
      require
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1322.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1323.1">
      module.exports
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1324.1">
     syntax of CJS.
    </span>
    <span class="koboSpan" id="kobo.1324.2">
     The enablement of ESM in Node.js not only aligns server-side development with frontend practices but also opens new possibilities for code sharing and modularization across the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1325.1">
      JavaScript ecosystem.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-166">
    <a id="_idTextAnchor172">
    </a>
    <span class="koboSpan" id="kobo.1326.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1327.1">
     The core ESM support is enabled by default and designated with stable status in all currently supported Node.js versions.
    </span>
    <span class="koboSpan" id="kobo.1327.2">
     However, some individual ESM capabilities
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1328.1">
      remain experimental.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1329.1">
     In this recipe, we will create a mini-project that calculates various geometric shapes’ areas and perimeters.
    </span>
    <span class="koboSpan" id="kobo.1329.2">
     This recipe will serve as an introduction to using ESM in Node.js and demonstrate the use of named and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1330.1">
      default exports.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1331.1">
     To get started, ensure you’re using Node.js 22 and create a directory to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1332.1">
      work in:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1333.1">
$ mkdir ecmascript-modules
$ cd ecmascript-modules</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1334.1">
     We will also prepare some files for our geometric
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1335.1">
      shape modules:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.1336.1">
$ touch index.js circle.js rectangle.js</span></pre>
   <h2 id="_idParaDest-167">
    <a id="_idTextAnchor173">
    </a>
    <span class="koboSpan" id="kobo.1337.1">
     How to do it…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1338.1">
     In this recipe, we’ll
    </span>
    <a id="_idIndexMarker331">
    </a>
    <span class="koboSpan" id="kobo.1339.1">
     create modules for calculating the area and perimeter of geometric shapes such as circles and rectangles.
    </span>
    <span class="koboSpan" id="kobo.1339.2">
     We will also create a utility
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1340.1">
      for rounding.
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1341.1">
      First, we need to initialize our module.
     </span>
     <span class="koboSpan" id="kobo.1341.2">
      For this recipe, we’ll just accept
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1342.1">
       the defaults:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1343.1">$ npm init --yes</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1344.1">
      Now, as we plan to use ESM syntax throughout, we should set the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1345.1">
       "type": "module"
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1346.1">
      entry in the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1347.1">
        package.json
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1348.1">
       file:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1349.1">
{
  "name": "ecmascript-modules",
  "version": "1.0.0",
  "description": "",
  "type": "module",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1350.1">
      Now, let’s create a
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1351.1">
       circle module
      </span>
     </em>
     <span class="koboSpan" id="kobo.1352.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1352.2">
      This module will use a default
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1353.1">
       export
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1354.1">
      statement for the main function – which is to calculate the area.
     </span>
     <span class="koboSpan" id="kobo.1354.2">
      It will also expose a function to calculate the circumference of the circle as a named export.
     </span>
     <span class="koboSpan" id="kobo.1354.3">
      Add the following
     </span>
     <a id="_idIndexMarker332">
     </a>
     <span class="koboSpan" id="kobo.1355.1">
      code
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1356.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1357.1">
        circle.js
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1358.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1359.1">
const PI = Math.PI;
function area(radius) {
  return PI * radius * radius;
}
function circumference(radius) {
  return 2 * PI * radius;
}
export default area;
export { circumference };</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1360.1">
       Note that we are making use of the
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1361.1">
        Math
       </span>
      </strong>
      <span class="koboSpan" id="kobo.1362.1">
       namespace object for the value
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1363.1">
        of Pi.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1364.1">
      Next, we’ll create a
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1365.1">
       rectangle module
      </span>
     </em>
     <span class="koboSpan" id="kobo.1366.1">
      (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1367.1">
       rectangle.js
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1368.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.1368.2">
      This module will export area and perimeter functions but this time using only named exports.
     </span>
     <span class="koboSpan" id="kobo.1368.3">
      Add the following code
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1369.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1370.1">
        rectangle.js
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1371.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1372.1">
function area(length, width) {
  return length * width;
}
function perimeter(length, width) {
  return 2 * (length + width);
}
export { area, perimeter };</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1373.1">
      Next, we’ll implement a small
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1374.1">
       mathematical utility
      </span>
     </em>
     <span class="koboSpan" id="kobo.1375.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1375.2">
      We’ll just add one function that rounds
     </span>
     <a id="_idIndexMarker333">
     </a>
     <span class="koboSpan" id="kobo.1376.1">
      values.
     </span>
     <span class="koboSpan" id="kobo.1376.2">
      Create a file
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1377.1">
       called
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1378.1">
        mathUtils.js
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1379.1">
       :
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1380.1">$ touch mathUtils.js</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1381.1">
      Add the following code
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1382.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1383.1">
        mathUtils.js
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1384.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1385.1">
export function round(number, precision) {
  const factor = Math.pow(10, precision);
  return Math.round(number * factor) / factor;
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1386.1">
      Finally, we’ll implement the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1387.1">
       main module
      </span>
     </em>
     <span class="koboSpan" id="kobo.1388.1">
      (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1389.1">
       index.js
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1390.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.1390.2">
      This module will import and use the functions from the geometry modules and the utility module.
     </span>
     <span class="koboSpan" id="kobo.1390.3">
      This module will demonstrate the various ways in which we
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1391.1">
       can import:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1392.1">
import circleArea, { circumference } from './circle.js';
import * as rectangle from './rectangle.js';
import { round } from './mathUtils.js';
function calculateCircleMetrics(radius) {
  console.log(`Circle with radius ${radius}:`);
  console.log(`Area: ${round(circleArea(radius),
    2)}`);
  console.log(`Circumference:
    ${round(circumference(radius), 2)}`);
}
function calculateRectangleMetrics(length, width) {
  console.log(`\nRectangle with length ${length}
    and width ${width}:`);
  console.log(`Area: ${round(rectangle.area(length,
    width), 2)}`);
  console.log(`Perimeter:
    ${round(rectangle.perimeter(length, width),
    2)}`);
}
calculateCircleMetrics(5);
calculateRectangleMetrics(10, 5);</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1393.1">
       This module demonstrates
      </span>
      <a id="_idIndexMarker334">
      </a>
      <span class="koboSpan" id="kobo.1394.1">
       importing a default export without braces, named exports with braces, and importing all named exports from a module as an object using the
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1395.1">
        import *
       </span>
      </strong>
      <span class="No-Break">
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.1396.1">
         as
        </span>
       </strong>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1397.1">
        syntax.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1398.1">
      Execute your application by running
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1399.1">
       the following:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1400.1">$ node index.js</span></strong><span class="koboSpan" id="kobo.1401.1">
Circle with radius 5:
Area: 78.54
Circumference: 31.42
Rectangle with length 10 and width 5:
Area: 50
Perimeter: 30</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1402.1">
       You should see calculated metrics for a circle and a rectangle, showcasing how to use both default and named exports in a modular
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1403.1">
        Node.js application.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.1404.1">
     This project illustrates the flexibility and efficiency of using ESM for organizing and structuring JavaScript code in Node.js projects.
    </span>
    <span class="koboSpan" id="kobo.1404.2">
     Through the example of calculating geometric shapes’ metrics, we’ve seen how to properly use default and named exports to make our code
    </span>
    <a id="_idIndexMarker335">
    </a>
    <span class="koboSpan" id="kobo.1405.1">
     modular
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1406.1">
      and reusable.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-168">
    <a id="_idTextAnchor174">
    </a>
    <span class="koboSpan" id="kobo.1407.1">
     How it works…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1408.1">
     The tutorial is structured around the concept of modular programming using ESM in a Node.js environment.
    </span>
    <span class="koboSpan" id="kobo.1408.2">
     The primary goal of the recipe is to demonstrate how ESM can be leveraged to build a well-organized, maintainable, and scalable project.
    </span>
    <span class="koboSpan" id="kobo.1408.3">
     We achieve this through the development of a small application designed to calculate the area and perimeter of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1409.1">
      geometric shapes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1410.1">
     The project is initiated as a standard Node.js application with a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1411.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1412.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1412.2">
     By setting
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1413.1">
      "type": "module"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1414.1">
     in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1415.1">
      package.json
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1416.1">
     file, we instruct Node.js to treat files with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1417.1">
      .js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1418.1">
     extension as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1419.1">
      ESM files.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1420.1">
     The geometry calculations are divided into separate modules for each shape.
    </span>
    <span class="koboSpan" id="kobo.1420.2">
     This modular approach demonstrates the concept of single responsibility, where each module is tasked with a specific set of functionalities related to a particular geometric shape.
    </span>
    <span class="koboSpan" id="kobo.1420.3">
     This approach will be familiar to those who have worked with other
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1421.1">
      object-oriented programming
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1422.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1423.1">
      OOP
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1424.1">
     ) languages
    </span>
    <a id="_idIndexMarker336">
    </a>
    <span class="koboSpan" id="kobo.1425.1">
     such
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1426.1">
      as Java.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1427.1">
     For the circle module (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1428.1">
      circle.js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1429.1">
     ), we implemented functions to calculate the area (exposed as the default export) and circumference (exposed as a named export) of a circle.
    </span>
    <span class="koboSpan" id="kobo.1429.2">
     The use of a default export for the primary function illustrates how to expose a module’s main functionality, while named exports tend to be used for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1430.1">
      secondary functions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1431.1">
     For the rectangle module (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1432.1">
      rectangle.js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1433.1">
     ), we only included named exports for functions calculating the area and perimeter of a rectangle.
    </span>
    <span class="koboSpan" id="kobo.1433.2">
     The use of named exports highlights how multiple related functionalities can be grouped within a single module and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1434.1">
      exported individually.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1435.1">
     We introduced a utility module (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1436.1">
      mathUtils.js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1437.1">
     ) to perform rounding operations.
    </span>
    <span class="koboSpan" id="kobo.1437.2">
     This module’s existence emphasizes the utility of having shared functionalities abstracted into their modules, making them reusable across
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1438.1">
      a project.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1439.1">
     The main module,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1440.1">
      index.js
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1441.1">
     , serves as the entry point to the application.
    </span>
    <span class="koboSpan" id="kobo.1441.2">
     It dynamically imports the geometry modules and the utility module, using their functionalities to perform calculations based on user input or predefined values.
    </span>
    <span class="koboSpan" id="kobo.1441.3">
     While a simplified example, it
    </span>
    <a id="_idIndexMarker337">
    </a>
    <span class="koboSpan" id="kobo.1442.1">
     demonstrates how to import both default and named exports from modules, highli
    </span>
    <a id="_idTextAnchor175">
    </a>
    <span class="koboSpan" id="kobo.1443.1">
     ghting the versatility of ESM in handling various
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1444.1">
      export types.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-169">
    <a id="_idTextAnchor176">
    </a>
    <span class="koboSpan" id="kobo.1445.1">
     There’s more…
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1446.1">
     CJS remains widely used in Node.js applications due to its long history in the vast ecosystem of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1447.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1448.1">
     modules.
    </span>
    <span class="koboSpan" id="kobo.1448.2">
     ESM is being increasingly adopted for new projects due to its native browser support, module optimization capabilities, and alignment with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1449.1">
      ECMAScript standard.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1450.1">
     Understanding these differences is critical for developers navigating the Node.js and wider JavaScript ecosystem, especially when working on applications and projects that may require integrating both
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1451.1">
      module types.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1452.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1453.1">
     In the current state of Node.js development, developers often have to navigate both module systems.
    </span>
    <span class="koboSpan" id="kobo.1453.2">
     Therefore, some recipes in subsequent chapters of this book will utilize the ESM syntax.
    </span>
    <span class="koboSpan" id="kobo.1453.3">
     In some cases, this is required due to certain
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1454.1">
      npm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1455.1">
     modules now exclusively
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1456.1">
      supporting ESM.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1457.1">
     Differences between CJS and ESM
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1458.1">
     The differences
    </span>
    <a id="_idIndexMarker338">
    </a>
    <span class="koboSpan" id="kobo.1459.1">
     between CJS and ESM in Node.js are
    </span>
    <a id="_idIndexMarker339">
    </a>
    <span class="koboSpan" id="kobo.1460.1">
     foundational to
    </span>
    <a id="_idIndexMarker340">
    </a>
    <span class="koboSpan" id="kobo.1461.1">
     understanding how to effectively use modules in JavaScript applications.
    </span>
    <span class="koboSpan" id="kobo.1461.2">
     Let’s take a closer look
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1462.1">
      at these:
     </span>
    </span>
   </p>
   <table class="No-Table-Style _idGenTablePara-1" id="table002-1">
    <colgroup>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.1463.1">
           CJS
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.1464.1">
           ESM
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1465.1">
         Uses
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1466.1">
          require()
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1467.1">
         for importing modules and
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1468.1">
          module.exports
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1469.1">
         or
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1470.1">
          exports
         </span>
        </strong>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1471.1">
          for exporting.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1472.1">
         Uses the
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1473.1">
          import
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1474.1">
         and
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1475.1">
          export
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1476.1">
         statements for importing and
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1477.1">
          exporting modules.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1478.1">
         Loads
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1479.1">
          modules synchronously.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1480.1">
         Supports asynchronous loading, allowing for dynamic
        </span>
        <span class="No-Break">
         <strong class="source-inline">
          <span class="koboSpan" id="kobo.1481.1">
           import()
          </span>
         </strong>
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1482.1">
          statements.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1483.1">
         Supports non-static, runtime module resolution allowing for conditional imports based on
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1484.1">
          runtime conditions.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1485.1">
         Static structure enables
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1486.1">
          import
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1487.1">
         /
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1488.1">
          export
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1489.1">
         statements to be analyzed at compile time, leading to potential optimizations by
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1490.1">
          JavaScript engines.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1491.1">
         CJS modules can use ESM through dynamic
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1492.1">
          import()
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1493.1">
         statements or by creating wrapper modules, but attention is required to avoid issues such as the dual
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1494.1">
          package hazard.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1495.1">
         ESM can import CJS modules using
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1496.1">
          default imports.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1497.1">
         Exports are copied upon import, meaning changes to the exported value after import are not reflected in the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1498.1">
          importing module.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1499.1">
         Supports live bindings, allowing imported values to update if they change in the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1500.1">
          exporting module.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1501.1">
         Does not support
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.1502.1">
          top-level await
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1503.1">
         as it relies on synchronous
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1504.1">
          module loading.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1505.1">
         Enables Top-level Await, enabling modules to wait for asynchronous operations
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1506.1">
          before proceeding.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1507.1">
         Typically uses the
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1508.1">
          .js
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1509.1">
         extension, although an explicit
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1510.1">
          .cjs
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1511.1">
         extension may
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1512.1">
          be used.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1513.1">
         While
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1514.1">
          .js
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1515.1">
         can be used (with
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1516.1">
          "type": "module"
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1517.1">
         in
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1518.1">
          package.json
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1519.1">
         ), the
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.1520.1">
          .mjs
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1521.1">
         extension can be used to explicitly mark files
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1522.1">
          as ESM.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1523.1">
         Modules have their
        </span>
        <a id="_idIndexMarker341">
        </a>
        <span class="koboSpan" id="kobo.1524.1">
         own scope but share a
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1525.1">
          global object.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.1526.1">
         Modules are executed
        </span>
        <a id="_idIndexMarker342">
        </a>
        <span class="koboSpan" id="kobo.1527.1">
         in
        </span>
        <strong class="bold">
         <span class="koboSpan" id="kobo.1528.1">
          strict mode
         </span>
        </strong>
        <span class="koboSpan" id="kobo.1529.1">
         by default
        </span>
        <a id="_idIndexMarker343">
        </a>
        <span class="koboSpan" id="kobo.1530.1">
         and have their own scope, with a more
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.1531.1">
          isolated environment.
         </span>
        </span>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1532.1">
     Table 5.2 – Key differences between CJS and ESM modules
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1533.1">
     Interoperability with CJS modules
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1534.1">
     One of the crucial
    </span>
    <a id="_idIndexMarker344">
    </a>
    <span class="koboSpan" id="kobo.1535.1">
     aspects of adopting
    </span>
    <a id="_idIndexMarker345">
    </a>
    <span class="koboSpan" id="kobo.1536.1">
     ESM modules in Node.js projects is understanding how they can interoperate with the traditional CJS module system.
    </span>
    <span class="koboSpan" id="kobo.1536.2">
     Given the vast ecosystem of existing Node.js packages and applications that use CJS, it is essential to grasp how to work with both module systems in a single project.
    </span>
    <span class="koboSpan" id="kobo.1536.3">
     This section explores the mechanisms and practices for achieving interoperability between ESM and CJS modules, ensuring a smooth transition and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1537.1">
      integration process.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1538.1">
     ESM can import CJS modules using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1539.1">
      import
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1540.1">
     statement, thanks to Node.js’s built-in interoperability support.
    </span>
    <span class="koboSpan" id="kobo.1540.2">
     However, because CJS modules are not statically analyzable in the same way as ESM, there are some nuances to be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1541.1">
      aware of:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1542.1">
       Default imports
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1543.1">
      : When importing a CJS module in an ESM file, the entire module’s exports are treated as a single default export.
     </span>
     <span class="koboSpan" id="kobo.1543.2">
      This means you cannot use named imports directly from a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1544.1">
       CJS module:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1545.1">
// Importing a CommonJS module in ESM
import cjsModule from './module.cjs';
console.log(cjsModule.someFunction());</span></pre>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1546.1">
       Dynamic imports
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1547.1">
      : You can dynamically import CJS modules using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1548.1">
       import()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1549.1">
      function.
     </span>
     <span class="koboSpan" id="kobo.1549.2">
      This approach returns a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1550.1">
       Promise
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1551.1">
      that resolves with the CJS module’s exports, allowing for asynchronous
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1552.1">
       module loading:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1553.1">
// Dynamically importing a CommonJS module
import('./module.cjs').then((cjsModule) =&gt; {
  console.log(cjsModule.someFunction());
});</span></pre>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1554.1">
       Exporting ESM modules for use in CJS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1555.1">
      : When it comes to using ESM modules in CJS code, the process is somewhat more constrained due to the synchronous nature of CJS’s
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1556.1">
       require()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1557.1">
      function, which does not support ESM’s asynchronous module loading.
     </span>
     <span class="koboSpan" id="kobo.1557.2">
      However, there
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1558.1">
       are workarounds.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1559.1">
     One common approach is
    </span>
    <a id="_idIndexMarker346">
    </a>
    <span class="koboSpan" id="kobo.1560.1">
     to create a CJS wrapper module that dynamically imports the ESM module and then exports its functionalities.
    </span>
    <span class="koboSpan" id="kobo.1560.2">
     This requires using asynchronous patterns such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1561.1">
      async
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1562.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1563.1">
      await
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1564.1">
     ,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1565.1">
      or promises:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.1566.1">
// CJS wrapper for an ESM module
const esmModule = await import('./module.mjs');
module.exports = esmModule.default;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.1567.1">
     Projects that offer both ESM and CJS entry points need to be aware of the dual package hazard, where a single package loaded in both formats might lead to state issues or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1568.1">
      duplicated instances.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1569.1">
     When producing a module, it is recommended that you document if your package or application supports both ESM and CJS, with guidance on how consumers can import it into their projects.
    </span>
    <span class="koboSpan" id="kobo.1569.2">
     Should
    </span>
    <a id="_idIndexMarker347">
    </a>
    <span class="koboSpan" id="kobo.1570.1">
     you dual publish, it is
    </span>
    <a id="_idIndexMarker348">
    </a>
    <span class="koboSpan" id="kobo.1571.1">
     also recommended that you thoroughly test your module in both ESM and CJS environments to catch any
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1572.1">
      interoperability issues.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1573.1">
     Important Note:
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1574.1">
     Node.js now offers Experimental support for loading ES modules using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1575.1">
      require()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1576.1">
     with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1577.1">
      --experimental-require-module
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1578.1">
     flag.
    </span>
    <span class="koboSpan" id="kobo.1578.2">
     This feature enables CommonJS modules to load ES modules under specific conditions, such as when the file has a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1579.1">
      .mjs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1580.1">
     extension or when
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1581.1">
      "type": "module"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1582.1">
     is set in the nearest package.json.
    </span>
    <span class="koboSpan" id="kobo.1582.2">
     However, if the module or its dependencies contain top-level await, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1583.1">
      ERR_REQUIRE_ASYNC_MODULE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1584.1">
     error will be thrown, requiring
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1585.1">
      import()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1586.1">
     for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1587.1">
      asynchronous modules.
     </span>
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1588.1">
     This functionality is designed to improve interoperability between CommonJS and ES modules, but as an experimental feature, it may change in future Node.js versions.
    </span>
    <span class="koboSpan" id="kobo.1588.2">
     For more information,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1589.1">
      visit:
     </span>
    </span>
    <a href="https://nodejs.org/api/modules.html#loading-ecmascript-modules-using-require">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1590.1">
       https://nodejs.org/api/modules.html#loading-ecmascript-modules-using-require
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1591.1">
      .
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1592.1">
     Advanced topics in ECMAScript Modules
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1593.1">
     Advancing your
    </span>
    <a id="_idIndexMarker349">
    </a>
    <span class="koboSpan" id="kobo.1594.1">
     understanding of ESM within Node.js involves exploring more complex features and strategies that can optimize and enhance the functionality of your applications.
    </span>
    <span class="koboSpan" id="kobo.1594.2">
     There are some further advanced topics you can explore for benefits and considerations for developers working
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1595.1">
      with ESM:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1596.1">
       Dynamic import expressions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1597.1">
      : Dynamic
     </span>
     <a id="_idIndexMarker350">
     </a>
     <span class="koboSpan" id="kobo.1598.1">
      imports allow you to load modules on an as-needed basis, using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1599.1">
       import()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1600.1">
      function that returns a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1601.1">
       Promise
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1602.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1602.2">
      This feature is particularly useful for reducing initial load times and optimizing resource utilization in applications by splitting the code into smaller chunks that are loaded only
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1603.1">
       when required.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1604.1">
       Module caching and preloading
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1605.1">
      : Node.js caches imported modules to avoid reloading them each time they are required in the application, enhancing performance.
     </span>
     <span class="koboSpan" id="kobo.1605.2">
      Preloading modules involves loading modules before they are needed, potentially speeding up application startup by reducing delays associated with loading modules
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1606.1">
       at runtime.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1607.1">
       Tree shaking
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1608.1">
      : Tree shaking is a term commonly associated with static code analysis tools and bundlers (such
     </span>
     <a id="_idIndexMarker351">
     </a>
     <span class="koboSpan" id="kobo.1609.1">
      as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1610.1">
       Webpack
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1611.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.1611.2">
      It refers to the elimination of unused code from a final bundle.
     </span>
     <span class="koboSpan" id="kobo.1611.3">
      For tree shaking to be effective, modules must use static
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1612.1">
       import
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1613.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1614.1">
       export
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1615.1">
      statements, as this allows the bundler to determine which exports are used and which can be safely removed, leading to smaller and more
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1616.1">
       efficient bundles.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1617.1">
       Module resolution customization
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1618.1">
      : It is also possible to customize module resolution by configuring how import specifiers are resolved to actual module files.
     </span>
     <span class="koboSpan" id="kobo.1618.2">
      Node.js provides an experimental feature named
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1619.1">
       customization hooks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1620.1">
      , which allows you to
     </span>
     <a id="_idIndexMarker352">
     </a>
     <span class="koboSpan" id="kobo.1621.1">
      customize module resolution and loading by registering a file that exports
     </span>
     <a id="_idIndexMarker353">
     </a>
     <span class="koboSpan" id="kobo.1622.1">
      hooks.
     </span>
     <span class="koboSpan" id="kobo.1622.2">
      For more information, refer to the Node.js API documentation for the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1623.1">
       feature:
      </span>
     </span>
     <a href="https://nodejs.org/api/module.html#customization-hooks">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1624.1">
        https://nodejs.org/api/module.html#customization-hooks
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1625.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-170">
    <a id="_idTextAnchor177">
    </a>
    <span class="koboSpan" id="kobo.1626.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1627.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1628.1">
       Scaffolding a module
      </span>
     </em>
     <span class="koboSpan" id="kobo.1629.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1630.1">
       this chapter
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1631.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1632.1">
       Writing module code
      </span>
     </em>
     <span class="koboSpan" id="kobo.1633.1">
      recipe in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1634.1">
       this chapter
      </span>
     </span>
    </li>
    <li>
     <a href="B19212_08.xhtml#_idTextAnchor243">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.1635.1">
         Chapter 8
        </span>
       </em>
      </span>
     </a>
    </li>
   </ul>
  </div>
 </body></html>