<html><head></head><body>
		<div id="_idContainer011">
			<h1 id="_idParaDest-16" class="chapter-number"><a id="_idTextAnchor015"/>1</h1>
			<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/>Becoming Functional – Several Questions</h1>
			<p><strong class="bold">Functional programming</strong> (or <strong class="bold">FP</strong>) has <a id="_idIndexMarker000"/>been around since the earliest days of computing and is going through a sort of revival because of its increased use with several frameworks and libraries, most <a id="_idIndexMarker001"/>particularly <span class="No-Break">in </span><span class="No-Break"><strong class="bold">JavaScript</strong></span><span class="No-Break">.</span></p>
			<p>In this chapter, we shall do <span class="No-Break">the following:</span></p>
			<ul>
				<li>Introduce some concepts of FP to give a small taste of what <span class="No-Break">it means</span></li>
				<li>Show the benefits (and problems) implied by the usage of FP and why we should <span class="No-Break">use it</span></li>
				<li>Start thinking about why JavaScript can be considered an appropriate language <span class="No-Break">for FP</span></li>
				<li>Go over the language features and tools that you should be aware of to fully take advantage of everything in <span class="No-Break">this book</span></li>
			</ul>
			<p>By the end of this chapter, you’ll have the basic tools that we’ll be using throughout this book, so let’s get started by learning <span class="No-Break">about FP.</span></p>
			<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/>What is functional programming?</h1>
			<p>If you go back <a id="_idIndexMarker002"/>in computer history, you’ll find that the second oldest programming language still in use, Lisp, is based on FP. Since then, there have been many more functional languages, and FP has been applied more widely. But even so, if you ask people what FP is, you’ll probably get two widely <span class="No-Break">dissimilar answers.</span></p>
			<p class="callout-heading">A bit of trivia</p>
			<p class="callout">For trivia or history buffs, the oldest programming language still in use is Fortran, which appeared in 1957, a year before Lisp. Quite shortly after Lisp came another long-lived language, COBOL, for <span class="No-Break">business-oriented programming.</span></p>
			<p>Depending on whom you ask, you’ll either learn that it’s a modern, advanced, enlightened <a id="_idIndexMarker003"/>approach to programming that leaves every other paradigm behind or that it’s mainly a theoretical thing, with more complications than benefits, that’s practically impossible to implement in the real world. And, as usual, the real answer is not in the extremes, but somewhere in between. Let’s start by looking at the theory versus practice and see how we plan to <span class="No-Break">use FP.</span></p>
			<h2 id="_idParaDest-19"><a id="_idTextAnchor018"/>Theory versus practice</h2>
			<p>In this book, we won’t be going about FP in a theoretical way. Instead, our point is to show you how <a id="_idIndexMarker004"/>some of its techniques and tenets can be successfully applied to common, everyday JavaScript programming. But – and this is important – we won’t be going about this dogmatically, but in a very practical way. We won’t dismiss useful JavaScript constructs simply because they don’t happen to fulfill the academic expectations of FP. Similarly, we won’t avoid practical <a id="_idIndexMarker005"/>JavaScript features just to fit the FP paradigm. We could almost say that we’ll be doing <strong class="bold">Sorta Functional Programming</strong> (<strong class="bold">SFP</strong>) because our code will be a mixture of FP features, more classical imperative <a id="_idIndexMarker006"/>ones, and <strong class="bold">object-oriented </strong><span class="No-Break"><strong class="bold">programming</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">OOP</strong></span><span class="No-Break">).</span></p>
			<p>Be careful, though: what we just said doesn’t mean that we’ll be leaving all the theory by the side. We’ll be picky, and just touch the main theoretical points, learn some vocabulary and definitions, and explain core FP concepts, but we’ll always be keeping in sight the idea of producing actual, useful JavaScript code, rather than trying to meet some mystical, dogmatic <span class="No-Break">FP criteria.</span></p>
			<p>OOP has been a way to solve the inherent complexity of writing large programs and systems, and developing clean, extensible, scalable application architectures; however, because of the scale of today’s web applications, the complexity of all code bases is continuously growing. Also, the newer features of JavaScript make it possible to develop applications that wouldn’t even have been possible just a few years ago; think of mobile (hybrid) apps that are made with Ionic, Apache Cordova, or React Native or desktop apps that are made with Electron, Tauri, or NW.js, for example. JavaScript has also migrated to the backend with Node.js or Deno, so today, the scope of usage for the language has grown in a serious way that deals with all the added complexity of <span class="No-Break">modern designs.</span></p>
			<h2 id="_idParaDest-20"><a id="_idTextAnchor019"/>A different way of thinking</h2>
			<p>FP is a different way of writing programs and can sometimes be difficult to learn. In most languages, programming is done imperatively: a program is a sequence of statements, executed in a prescribed fashion, and the desired result is achieved by creating <a id="_idIndexMarker007"/>objects and manipulating them, which usually means modifying the objects themselves. FP is based on producing the desired result by evaluating expressions built out of functions that are composed together. In FP, it’s common to pass functions around (such as passing parameters to other functions or returning functions as the result of a calculation), not use loops (opting for recursion instead), and skip side effects (such as modifying objects or <span class="No-Break">global variables).</span></p>
			<p>In other words, FP focuses on <em class="italic">what</em> should be done, rather than on <em class="italic">how</em> it should be done. Instead of worrying about loops or arrays, you work at a higher level, considering what needs to be done. After becoming accustomed to this style, you’ll find that your code becomes simpler, shorter, and more elegant, and can be easily tested and debugged. However, don’t fall into the trap of considering FP as the goal! Think of FP only as a means to an end, as with all software tools. Functional code isn’t good just for being functional, and writing bad code is just as possible with FP as with any <span class="No-Break">other technique!</span></p>
			<h2 id="_idParaDest-21"><a id="_idTextAnchor020"/>FP and other programming paradigms</h2>
			<p>Programming paradigms classify programming languages according to their features. However, some <a id="_idIndexMarker008"/>languages may be classified into multiple paradigms – as is the case of <span class="No-Break">JavaScript itself!</span></p>
			<p>A primary division is <em class="italic">imperative</em> versus <em class="italic">declarative</em> languages. In the former, developers must instruct the machine on how to do its work, step by step. Programming may be <em class="italic">procedural</em> (if instructions are grouped into procedures) or <em class="italic">object-oriented</em> (if instructions are grouped with a <span class="No-Break">related state).</span></p>
			<p>In declarative languages, in opposition, developers just declare properties that the sought result must satisfy, but not how to calculate it. Declarative languages may be <em class="italic">logic-based</em> (based on logic rules and constraints), <em class="italic">reactive</em> (based on data and event streams), or <em class="italic">functional</em> (based on the application and combination of functions). In a sense, we could say that imperative languages focus on <em class="italic">how</em>, while declarative languages focus <span class="No-Break">on </span><span class="No-Break"><em class="italic">what</em></span><span class="No-Break">.</span></p>
			<p>JavaScript is multi-paradigm: it’s imperative (both procedural and object-oriented) but also allows <a id="_idIndexMarker009"/>declarative programming, both functional (like almost everything in this book! In particular, we will devote <a href="B19301_05.xhtml#_idTextAnchor084"><span class="No-Break"><em class="italic">Chapter 5</em></span></a>, <em class="italic">Programming Declaratively</em>, to this topic) and reactive (we’ll see reactive FP in <a href="B19301_11.xhtml#_idTextAnchor204"><span class="No-Break"><em class="italic">Chapter 11</em></span></a>, <em class="italic">Implementing </em><span class="No-Break"><em class="italic">Design Patterns</em></span><span class="No-Break">).</span></p>
			<p>Just to give you a basic example of the difference between imperative and declarative ways of solving a problem, let’s solve a simple problem: assume you have an array of personal data of people, <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
// imperative.js
const data = [
  { name: "John", age: 23, other: "xxx" },
  { name: "Paul", age: 18, other: "yyy" },
  { name: "George", age: 16, other: "zzz" },
  { name: "Ringo", age: 25, other: "ttt" },
];</pre>
			<p>Imagine you want to extract the data for adults (at least 21 years old). Imperatively, you would do something like <span class="No-Break">the following:</span></p>
			<pre class="source-code">
// continued...
const result1 = [];
for (let i = 0; i &lt; data.length; i++) {
  if (data[i].age &gt;= 21) {
    result1.push(data[i]);
  }
}</pre>
			<p>You have to initialize the output array (<strong class="source-inline">result1</strong>) for the selected people. Then, you must specify a loop, saying how the index variable (<strong class="source-inline">i</strong>) is to be initialized, tested, and updated. On each pass of the loop, you check the corresponding person’s age, and if the person is an adult, you push the data to the output array. In other terms, you specify, step by step, everything that the code will have <span class="No-Break">to do.</span></p>
			<p>Working declaratively, you’d rather write something <span class="No-Break">like this:</span></p>
			<pre class="source-code">
// declarative.js
const <strong class="bold">isAdult</strong> = (person) =&gt; person.age &gt;= 21;
const result2 = <strong class="bold">data.filter(isAdult)</strong>;</pre>
			<p>The first line declares how to test if a person is an adult; the second line says that the result is the <a id="_idIndexMarker010"/>result of filtering the data array, picking those elements that satisfy the given predicate. (For <strong class="source-inline">isAdult()</strong>, we’re using an arrow function; we’ll see more on that in the <em class="italic">Arrow functions</em> section, later in this chapter.) You don’t have to initialize the output array, specify how to loop, or ensure that your array index doesn’t go beyond the array’s length, and so on – all those details are taken care of by the language, so you don’t <span class="No-Break">need to.</span></p>
			<p>Reading and understanding the imperative version requires knowledge of both the programming language and algorithms or techniques for looping; the declarative version is shorter to write, easier to maintain, and much <span class="No-Break">more readable.</span></p>
			<h2 id="_idParaDest-22"><a id="_idTextAnchor021"/>What FP is not</h2>
			<p>Since we’ve <a id="_idIndexMarker011"/>been talking quite a bit about what FP is, let’s also clear up some common misconceptions, and look at what FP <span class="No-Break">is not:</span></p>
			<ul>
				<li><em class="italic">FP isn’t just an academic ivory tower thing</em>: The lambda calculus upon which it is based was developed by Alonzo Church in 1936 as a tool to prove an important result in theoretical computer science (which preceded modern computer languages by more than 20 years!); however, FP languages are being used today for all kinds <span class="No-Break">of systems.</span></li>
				<li><em class="italic">FP isn’t the opposite of OOP</em>: It isn’t a case of choosing declarative or imperative ways of programming. You can mix and match as best suits you, and we’ll be doing this throughout this book, bringing together the best of <span class="No-Break">all worlds.</span></li>
				<li><em class="italic">FP isn’t overly complex to learn</em>: Some of the FP languages are rather different from JavaScript, but the differences are mostly syntactic. Once you learn the basic concepts, you’ll see that you can get the same results in JavaScript as with <span class="No-Break">FP languages.</span></li>
			</ul>
			<p>It may also be relevant to mention that several modern frameworks, such as the React and Redux combination, include <span class="No-Break">FP ideas.</span></p>
			<p>For example, in React, it’s said that the view (whatever the user gets to see at a given moment) is a function of the current state. You use a function to compute what HTML and CSS must be <a id="_idIndexMarker012"/>produced at each moment, thinking in a <span class="No-Break">black-box fashion.</span></p>
			<p>Similarly, in Redux, you have the concept of actions that are processed by reducers. An action provides some data, and a reducer is a function that produces the new state for the application in a functional way out of the current state and the <span class="No-Break">provided data.</span></p>
			<p>So, both because of the theoretical advantages (we’ll be getting to those in the following section) and the practical ones (such as getting to use the latest frameworks and libraries), it makes sense to consider FP coding. Let’s get on <span class="No-Break">with it.</span></p>
			<h1 id="_idParaDest-23"><a id="_idTextAnchor022"/>Why use FP?</h1>
			<p>Throughout <a id="_idIndexMarker013"/>the years, there have been many programming styles and fads. However, FP has proven quite resilient and is of great interest today. Why would you want to use FP? Rather, the first question to ask should be, what do you need? And only then, does FP get you that? We’ll answer these important questions in the <span class="No-Break">following sections.</span></p>
			<h2 id="_idParaDest-24"><a id="_idTextAnchor023"/>What we need</h2>
			<p>We can certainly <a id="_idIndexMarker014"/>agree that the following list of concerns is universal. Our code should have the <span class="No-Break">following qualities:</span></p>
			<ul>
				<li><strong class="bold">Modular</strong>: The <a id="_idIndexMarker015"/>functionality of your program should be divided into independent modules, each of which contains a part of the solution. Changes in a module or function shouldn’t affect the rest of <span class="No-Break">the code.</span></li>
				<li><strong class="bold">Understandable</strong>: A reader <a id="_idIndexMarker016"/>of your program should be able to discern its components, functions, and relationships without undue effort. This is closely linked with the <strong class="bold">maintainability</strong> of the code; your code will have to be maintained in the future, whether to be changed or to have new <span class="No-Break">functionality added.</span></li>
				<li><strong class="bold">Testable</strong>: <strong class="bold">Unit tests</strong> try out small parts of your program, verifying their behavior <a id="_idIndexMarker017"/>independently of the rest of the code. Your programming style should favor writing code that simplifies the job of writing unit tests. Unit tests are also like documentation in that they can help readers understand what the code is supposed <span class="No-Break">to do.</span></li>
				<li><strong class="bold">Extensible</strong>: It’s a <a id="_idIndexMarker018"/>fact that your program will someday require maintenance, possibly to add new functionality. Those changes should impact the structure and data flow of the original code only minimally (if at all). Small changes shouldn’t imply large, serious refactoring of <span class="No-Break">your code.</span></li>
				<li><strong class="bold">Reusable</strong>: Code <a id="_idIndexMarker019"/>reuse has the goal of saving resources, time, and money, and reducing redundancy by taking advantage of previously written code. Some characteristics help with this goal, such as <strong class="bold">modularity</strong> (which we <a id="_idIndexMarker020"/>already mentioned), <strong class="bold">high cohesion</strong> (all the <a id="_idIndexMarker021"/>pieces in a module belong together), <strong class="bold">low coupling</strong> (modules <a id="_idIndexMarker022"/>are independent of each other), <strong class="bold">separation of concerns</strong> (the <a id="_idIndexMarker023"/>parts of a program should overlap in functionality as little as possible), and <strong class="bold">information hiding</strong> (internal <a id="_idIndexMarker024"/>changes in a module shouldn’t affect the rest of <span class="No-Break">the system).</span></li>
			</ul>
			<h2 id="_idParaDest-25"><a id="_idTextAnchor024"/>What we get</h2>
			<p>So, does FP give <a id="_idIndexMarker025"/>you the five characteristics we just listed in the <span class="No-Break">previous section?</span></p>
			<ul>
				<li>In FP, the goal is to write separate independent functions that are joined together to produce the <span class="No-Break">final results.</span></li>
				<li>Programs that are written in a functional style usually tend to be cleaner, shorter, and easier <span class="No-Break">to understand.</span></li>
				<li>Functions can be tested on their own, and FP code has advantages in <span class="No-Break">achieving this.</span></li>
				<li>You can reuse <a id="_idIndexMarker026"/>functions in other programs because they stand on their own, not depending on the rest of the system. Most functional programs share common functions, several of which we’ll be considering in <span class="No-Break">this book.</span></li>
				<li>Functional code is free from side effects, which means you can understand the objective of a function by studying it without having to consider the rest of <span class="No-Break">the program.</span></li>
			</ul>
			<p>Finally, once you get used to the FP style of programming, code becomes more understandable and easier to extend. So, it seems that all five characteristics can be achieved <span class="No-Break">with FP!</span></p>
			<p class="callout-heading">Why use FP?</p>
			<p class="callout">For a well-balanced look at the reasons to use FP, I’d suggest reading <em class="italic">Why Functional Programming Matters</em>, by John Hughes; it’s available online at <a href="http://www.cs.kent.ac.uk/people/staff/dat/miranda/whyfp90.pdf">www.cs.kent.ac.uk/people/staff/dat/miranda/whyfp90.pdf</a>. It’s not geared toward JavaScript, but the arguments are <span class="No-Break">easily understandable.</span></p>
			<h2 id="_idParaDest-26"><a id="_idTextAnchor025"/>Not all is gold</h2>
			<p>However, let’s strive for a bit of balance. Using FP isn’t a silver bullet that will automagically <a id="_idIndexMarker027"/>make your code better. Some FP solutions are tricky, and some developers greatly enjoy writing code and then asking, what does this do? If you aren’t careful, your code may become write-only and practically impossible to maintain; there goes understandable, extensible, and reusable out <span class="No-Break">the door!</span></p>
			<p>Another disadvantage is that you may find it harder to find FP-savvy developers. (Quick question: how many <em class="italic">FP-sought</em> job ads have you ever seen?) The vast majority of today’s web code is written in imperative, non-functional ways, and most coders are used to that way of working. For some, having to switch gears and start writing programs differently may prove an <span class="No-Break">unpassable barrier.</span></p>
			<p>Finally, if you <a id="_idIndexMarker028"/>try to go fully functional, you may find yourself at odds with JavaScript, and simple tasks may become hard to do. As we said at the beginning, we’ll opt for <strong class="bold">SFP</strong>, so we won’t be drastically rejecting any language features that aren’t 100% functional. After all, we want to use FP to simplify our coding, not to make it <span class="No-Break">more complex!</span></p>
			<p>So, while I’ll strive to show you the advantages of going functional in your code, as with any change, there will always be some difficulties. However, I’m fully convinced that you’ll be able to surmount them and that your organization will develop better code by applying FP. Dare to change! So, given that you accept that FP may apply to your problems, let’s consider the other question: can we use JavaScript in a functional way and is <span class="No-Break">it appropriate?</span></p>
			<h1 id="_idParaDest-27"><a id="_idTextAnchor026"/>Is JavaScript functional?</h1>
			<p>At about this time, there is another important question that you should be asking: <em class="italic">is JavaScript a functional language?</em> Usually, when thinking about FP, the list of languages that <a id="_idIndexMarker029"/>are mentioned does not include JavaScript, but does include less common options, such as Clojure, Erlang, Haskell, and Scala; however, there is no precise definition for FP languages or a precise set of features that such languages should include. The main point is that you can consider a language to be functional if it supports the common programming style associated with FP. Let’s start by learning about why we would want to use JavaScript at all and how the language has evolved to its current version, and then see some of the key features that we’ll be using to work in a <span class="No-Break">functional way.</span></p>
			<h2 id="_idParaDest-28"><a id="_idTextAnchor027"/>JavaScript as a tool</h2>
			<p>What is JavaScript? If you <a id="_idIndexMarker030"/>consider popularity indices, such as the ones at <a href="http://www.tiobe.com/tiobe-index/">www.tiobe.com/tiobe-index/</a> or <a href="http://pypl.github.io/PYPL.html">pypl.github.io/PYPL.html</a>, you’ll find that JavaScript is consistently in the top 10 most popular languages. From a more academic point of view, the language is sort of a mixture, borrowing features from several different languages. Several libraries helped the growth of the language by providing features that weren’t so easily available, such as classes and inheritance (today’s version of the language does support classes, but that was not the case not too long ago), that otherwise had to be achieved by doing some <span class="No-Break">prototype tricks.</span></p>
			<p class="callout-heading">What’s in a name?</p>
			<p class="callout">The name <em class="italic">JavaScript</em> was chosen to take advantage of the popularity of Java – just as a marketing ploy! Its first name was <em class="italic">Mocha</em>, then, <em class="italic">LiveScript</em>, and only <span class="No-Break">then </span><span class="No-Break"><em class="italic">JavaScript</em></span><span class="No-Break">.</span></p>
			<p>JavaScript has grown <a id="_idIndexMarker031"/>to be incredibly powerful. But, as with all power tools, it gives you a way to not only produce great solutions but also to do great harm. FP could be considered as a way to reduce or leave aside some of the worst parts of the language and focus on working in a safer, better way; however, due to the immense amount of existing JavaScript code, you cannot expect it to facilitate large reworkings of the language that would cause most sites to fail. You must learn to live with the good and the bad, and simply avoid the <span class="No-Break">latter part.</span></p>
			<p>In addition, the language has a broad variety of available libraries that complete or extend the language in many ways. In this book, we’ll be focusing on using JavaScript on its own, but we will make references to existing, <span class="No-Break">available code.</span></p>
			<p>If we ask whether JavaScript is functional, the answer will be, once again, “sorta”. It can be seen as functional because of several features, such as first-class functions, anonymous functions, recursion, and closures – we’ll get back to this later. On the other hand, it also has plenty of non-FP aspects, such as side effects (impurity), mutable objects, and practical limits to recursion. So, when programming in a functional way, we’ll be taking advantage of all the relevant, appropriate language features, and we’ll try to minimize the problems caused by the more conventional parts of the language. In this sense, JavaScript will or won’t be functional, depending on your <span class="No-Break">programming style!</span></p>
			<p>If you want to use FP, you should decide which language to use; however, opting for fully functional languages may not be so wise. Today, developing code isn’t as simple as just using a language; you will surely require frameworks, libraries, and other sundry tools. If we can take advantage of all the provided tools but at the same time introduce FP ways of working in our code, we’ll be getting the best of both worlds, regardless of whether JavaScript <span class="No-Break">is functional!</span></p>
			<h2 id="_idParaDest-29"><a id="_idTextAnchor028"/>Going functional with JavaScript</h2>
			<p>JavaScript has <a id="_idIndexMarker032"/>evolved through the years, and the version we’ll be using is (informally) called JS13, and (formally) ECMAScript 2022, usually shortened to ES2022 or ES13; this version was finalized in June 2022. The previous versions were <span class="No-Break">as follows:</span></p>
			<ul>
				<li>ECMAScript 1, <span class="No-Break">June 1997</span></li>
				<li>ECMAScript 2, June 1998, which was the same as the previous version, ECMAScript 3, December 1999, with several <span class="No-Break">new functionalities</span></li>
				<li>ECMAScript 5, December 2009 (and no, there never was an ECMAScript 4, because it <span class="No-Break">was abandoned)</span></li>
				<li>ECMAScript 5.1, <span class="No-Break">June 2011</span></li>
				<li>ECMAScript 6 (or ES6; later renamed ES2015), June 2015 ECMAScript 7 (also ES7, or ES2016), June 2016 ECMAScript 8 (ES8 or ES2017), <span class="No-Break">June 2017</span></li>
				<li>ECMAScript 9 (ES9 or ES2018), <span class="No-Break">June 2018</span></li>
				<li>ECMAScript 10 (ES10 or ES2019), <span class="No-Break">June 2019</span></li>
				<li>ECMAScript 11 (ES11 or ES2020), <span class="No-Break">June 2020</span></li>
				<li>ECMAScript 12 (ES12 or ES2021), <span class="No-Break">June 2021</span></li>
			</ul>
			<p class="callout-heading">What’s ECMA?</p>
			<p class="callout">ECMA <a id="_idIndexMarker033"/>originally stood for European Computer Manufacturers Association, but nowadays, the name isn’t considered an acronym anymore. The organization is responsible for standards other than <a id="_idIndexMarker034"/>JavaScript as well, including JSON, C#, Dart, and others. For more details, go to its site <span class="No-Break">at </span><a href="http://www.ecma-international.org/"><span class="No-Break">www.ecma-international.org/</span></a><span class="No-Break">.</span></p>
			<p>You <a id="_idIndexMarker035"/>can read the standard language specification at <a href="http://www.ecma-international.org/publications-and-standards/standards/ecma-262/">www.ecma-international.org/publications-and-standards/standards/ecma-262/</a>. Whenever we refer to JavaScript in the text without further specification, ES13 (ES2022) is what is being referred to; however, in terms of the language features that are used in this book, if you were just to use ES2015, then you’d mostly have no problems with <span class="No-Break">this book.</span></p>
			<p>No browsers fully implement ES13; most provide an older version, JavaScript 5 (from 2009), with an (always growing) smattering of features from ES6 up to ES13. This will prove to be <a id="_idIndexMarker036"/>a problem, but fortunately, a solvable one; we’ll get to this shortly. We’ll be using ES13 throughout <span class="No-Break">this book.</span></p>
			<p class="callout-heading">Differences, differences…</p>
			<p class="callout">There are only a few differences between ES2016 and ES2015, such as the <strong class="source-inline">Array.prototype.includes</strong> method and the exponentiation operator, <strong class="source-inline">**</strong>. There are more differences between ES2017 and ES2016 – such as <strong class="source-inline">async</strong> and <strong class="source-inline">await</strong>, some string padding functions, and more – but they won’t impact our code. We will also be looking at alternatives for even more modern additions, such as <strong class="source-inline">flatMap()</strong>, in <span class="No-Break">later chapters.</span></p>
			<p>As we are going to work with JavaScript, let’s start by considering its most important features that pertain to our <span class="No-Break">FP goals.</span></p>
			<h2 id="_idParaDest-30"><a id="_idTextAnchor029"/>Key features of JavaScript</h2>
			<p>JavaScript <a id="_idIndexMarker037"/>isn’t a purely functional language, but it has all the features that we need for it to work as if it were. The main features of the language that we will be using are <span class="No-Break">as follows:</span></p>
			<ul>
				<li>Functions as <span class="No-Break">first-class objects</span></li>
				<li><span class="No-Break">Recursion</span></li>
				<li><span class="No-Break">Closures</span></li>
				<li><span class="No-Break">Arrow functions</span></li>
				<li><span class="No-Break">Spread</span></li>
			</ul>
			<p>Let’s see some examples of each one and find out why they will be useful to us. Keep in mind, though, that there are more features of JavaScript that we will be using; the upcoming sections just highlight the most important features in terms of what we will be using <span class="No-Break">for FP.</span></p>
			<h3>Functions as first-class objects</h3>
			<p>Saying <a id="_idIndexMarker038"/>that functions are <strong class="bold">first-class objects</strong> (also called <strong class="bold">first-class entities</strong> or <strong class="bold">first-class citizens</strong>) means that you can do everything <a id="_idIndexMarker039"/>with <a id="_idIndexMarker040"/>functions that you can do <a id="_idIndexMarker041"/>with other objects. For example, you can store a function in a variable, you can pass it to a function, you can print it out, and so on. This is really the key to doing FP; we will often be passing functions as parameters (to other functions) or returning a function as the result of a <span class="No-Break">function call.</span></p>
			<p>If you have been doing async Ajax calls, then you have already been using this feature: a <strong class="bold">callback</strong> is a <a id="_idIndexMarker042"/>function that will be called after the Ajax call finishes and is passed as a parameter. Using jQuery, you could write something like <span class="No-Break">the following:</span></p>
			<pre class="source-code">
$.get("some/url", someData, function(result, status) {
  // check status, and do something
  // with the result
});</pre>
			<p>The <strong class="source-inline">$.get()</strong> function receives a callback function as a parameter and calls it after the result <span class="No-Break">is obtained.</span></p>
			<p class="callout-heading">The way to go</p>
			<p class="callout">This is better solved, in a more modern way, by using promises or <strong class="source-inline">async</strong>/<strong class="source-inline">await</strong>, but for the sake of our example, the old way is enough. We’ll be getting back to promises, though, in <a href="B19301_12.xhtml#_idTextAnchor221"><span class="No-Break"><em class="italic">Chapter 12</em></span></a>, <em class="italic">Building Better Containers</em>, when we discuss monads; in particular, see the <em class="italic">Unexpected monads – </em><span class="No-Break"><em class="italic">promises</em></span><span class="No-Break"> section.</span></p>
			<p>Since functions can be stored in variables, you could also write something like the following. Pay attention to how we use the <strong class="source-inline">doSomething</strong> variable in the <strong class="source-inline">$.</strong><span class="No-Break"><strong class="source-inline">get(...)</strong></span><span class="No-Break"> call:</span></p>
			<pre class="source-code">
var doSomething = function(result, status) {
  // check status, and do something
  // with the result
};
$.get("some/url", someData, <strong class="bold">doSomething</strong>);</pre>
			<p>We’ll be <a id="_idIndexMarker043"/>seeing more examples of this in <a href="B19301_06.xhtml#_idTextAnchor107"><span class="No-Break"><em class="italic">Chapter 6</em></span></a>, <span class="No-Break"><em class="italic">Producing Functions</em></span><span class="No-Break">.</span></p>
			<h3>Recursion</h3>
			<p><strong class="bold">Recursion</strong> is the <a id="_idIndexMarker044"/>most potent tool for developing algorithms and a great aid <a id="_idIndexMarker045"/>for solving large classes of problems. The idea is that a function can, at a certain point, call itself and, when <em class="italic">that</em> call is done, continue working with whatever result it has received. This is usually quite helpful for certain classes of problems or definitions. The most often quoted example is the factorial function (the factorial of <em class="italic">n</em> is written as <em class="italic">n!</em>), as defined for nonnegative <span class="No-Break">integer values:</span></p>
			<ul>
				<li>If <em class="italic">n</em> is 0, then <em class="italic">n</em>! = 1</li>
				<li>If <em class="italic">n</em> is greater than 0, then <em class="italic">n</em>! = <em class="italic">n</em> * (<span class="No-Break"><em class="italic">n</em></span><span class="No-Break">-1)!</span></li>
			</ul>
			<p class="callout-heading">Arranging things</p>
			<p class="callout">The value of <em class="italic">n!</em> is the number of ways that you can arrange <em class="italic">n</em> different elements in a row. For example, if you want to place five books in line, you can pick any of the five for the first place, and then order the other four in every possible way, so 5! = 5*4!. To order those four, you can pick any of them for the first place, and then order the other three in every way, so 4! = 4*3!. If you continue to work on this example, you’ll end up with 5! = 5*4*3*2*1=120, and in general, <em class="italic">n</em>! is the product of all numbers up <span class="No-Break">to </span><span class="No-Break"><em class="italic">n</em></span><span class="No-Break">.</span></p>
			<p>This can be immediately turned <span class="No-Break">into code:</span></p>
			<pre class="source-code">
// factorial.js
function fact(n) {
  if (n === 0) {
    return 1;
  } else {
    return n * fact(n - 1);
  }
}
console.log(fact(5)); // 120</pre>
			<p>Recursion <a id="_idIndexMarker046"/>will be a great aid for designing algorithms. By using recursion, you could <a id="_idIndexMarker047"/>do without any <strong class="source-inline">while</strong> or <strong class="source-inline">for</strong> loops – not that we want to do that, but it’s interesting that we can! We’ll be devoting the entirety of <a href="B19301_09.xhtml#_idTextAnchor172"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>, <em class="italic">Designing Functions</em>, to designing algorithms and writing <span class="No-Break">functions recursively.</span></p>
			<h3>Closures</h3>
			<p>Closures are a <a id="_idIndexMarker048"/>way to implement data hiding (with private variables), which leads <a id="_idIndexMarker049"/>to modules and other nice features. The key concept of closures is that when you define a function, it can refer to not only its local variables but also to everything outside of the context of the function. We can write a counting function that will keep its <strong class="source-inline">count</strong> using <span class="No-Break">a closure:</span></p>
			<pre class="source-code">
// closure.js
function newCounter() {
  let count = 0;
  return function () {
    count++;
    return count;
  };
}
const nc = newCounter();
console.log(nc()); // 1
console.log(nc()); // 2
console.log(nc()); // 3</pre>
			<p>Even after <strong class="source-inline">newCounter()</strong> exits, the inner function still has access to <strong class="source-inline">count</strong>, but that variable is not accessible to any other parts of <span class="No-Break">your code.</span></p>
			<p>This isn’t a very good example of FP – a function (<strong class="source-inline">nc()</strong>, in this case) isn’t expected to return different results when called with the <span class="No-Break">same parameters!</span></p>
			<p>We’ll find several uses for <a id="_idIndexMarker050"/>closures, such as <strong class="bold">memoization</strong> (see <a href="B19301_04.xhtml#_idTextAnchor069"><span class="No-Break"><em class="italic">Chapter 4</em></span></a>, <em class="italic">Behaving Properly</em>, and <a href="B19301_06.xhtml#_idTextAnchor107"><span class="No-Break"><em class="italic">Chapter 6</em></span></a>, <em class="italic">Producing Functions</em>) and <a id="_idIndexMarker051"/>the <strong class="bold">module pattern</strong> (see <a href="B19301_03.xhtml#_idTextAnchor054"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>, <em class="italic">Starting Out with Functions</em>, and <a href="B19301_11.xhtml#_idTextAnchor204"><span class="No-Break"><em class="italic">Chapter 11</em></span></a>, <em class="italic">Implementing Design Patterns</em>), <span class="No-Break">among others.</span></p>
			<h3>Arrow functions</h3>
			<p><strong class="bold">Arrow functions</strong> are just <a id="_idIndexMarker052"/>a shorter, more succinct way of creating an (unnamed) function. Arrow functions can be used almost everywhere a classical function <a id="_idIndexMarker053"/>can be used, except that they cannot be used as constructors. The syntax is either <strong class="source-inline">(parameter, anotherparameter, ...etc) =&gt; { statements }</strong> or <strong class="source-inline">(parameter, anotherparameter, ...etc) =&gt; expression</strong>. The first allows you to write as much code as you want, while the second is short for <strong class="source-inline">{ return expression }</strong>. </p>
			<p>We could rewrite our earlier Ajax example <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
$.get("some/url", data, (result, status) =&gt; {
// check status, and do something
// with the result
});</pre>
			<p>A new version of the factorial code could be like the following code – the only difference is the usage of an <span class="No-Break">arrow function:</span></p>
			<pre class="source-code">
// factorial.js, continued...
const fact2 = (n) =&gt; {
  if (n === 0) {
    return 1;
  } else {
    return n * fact2(n – 1);
  }
};</pre>
			<p class="callout-heading">Functions, anonymous</p>
			<p class="callout">Arrow functions are usually <a id="_idIndexMarker054"/>called anonymous functions because of their lack of a name. If you need to refer to an arrow function, you’ll have to assign it to a variable or object attribute, as we did here; otherwise, you won’t be able to use it. We’ll learn more about this in the <em class="italic">Arrow functions – the modern way</em> section of <a href="B19301_03.xhtml#_idTextAnchor054"><span class="No-Break"><em class="italic">Chapter 3</em></span></a><em class="italic">, Starting Out </em><span class="No-Break"><em class="italic">with Functions</em></span><span class="No-Break">.</span></p>
			<p>You would probably write <strong class="source-inline">fact2()</strong> as a one-liner – can you see the equivalence to our earlier code? Using a ternary operator instead of <strong class="source-inline">if</strong> is <span class="No-Break">quite common:</span></p>
			<pre class="source-code">
// continued...
const fact3 = (n) =&gt; (n === 0 ? 1 : n * fact3(n - 1));</pre>
			<p>With this <a id="_idIndexMarker055"/>shorter form, you don’t have to write <strong class="source-inline">return</strong> – <span class="No-Break">it’s implied.</span></p>
			<p class="callout-heading">Functions – the lambda way</p>
			<p class="callout">In lambda calculus, a function such as <em class="italic">x</em> =&gt; 2*<em class="italic">x</em> would be represented as λ<em class="italic">x.</em>2*<em class="italic">x</em>. Although there are syntactical differences, the definitions are analogous. Functions with more parameters are a bit more complicated; (<em class="italic">x,y</em>)=&gt;<em class="italic">x</em>+<em class="italic">y</em> would be expressed as λ<em class="italic">x</em>.λ<em class="italic">y</em>.<em class="italic">x</em>+<em class="italic">y</em>. We’ll learn more about this in the <em class="italic">Of lambdas and functions</em> section of <a href="B19301_03.xhtml#_idTextAnchor054"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>, <em class="italic">Starting Out with Functions</em>, and in the <em class="italic">Currying</em> section of <a href="B19301_07.xhtml#_idTextAnchor128"><span class="No-Break"><em class="italic">Chapter 7</em></span></a><em class="italic">, </em><span class="No-Break"><em class="italic">Transforming Functions</em></span><span class="No-Break">.</span></p>
			<p>There’s one <a id="_idIndexMarker056"/>other small thing to bear in mind: when the arrow function has a single parameter, you can omit the parentheses around it. I usually prefer leaving them, but I’ve applied a JavaScript beautifier, <em class="italic">Prettier</em>, to the code, which removes them. It’s really up to you whether to include them or not! (For more on this tool, check out <a href="http://github.com/prettier/prettier">github.com/prettier/prettier</a>.) By the way, my options for formatting were <strong class="source-inline">--print-width 75 -- tab-width </strong><span class="No-Break"><strong class="source-inline">2 --no-bracket-spacing</strong></span><span class="No-Break">.</span></p>
			<h3>Spread</h3>
			<p>The spread <strong class="source-inline">...</strong> operator (see <a href="http://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator">developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator</a>) lets you <a id="_idIndexMarker057"/>expand an expression in places where you <a id="_idIndexMarker058"/>would otherwise require multiple arguments, elements, or variables. For example, you can replace arguments in a function call, as shown in the <span class="No-Break">following code:</span></p>
			<pre class="source-code">
// sum3.js
function sum3(a, b, c) {
  return a + b + c;
}
const x  = [1, 2, 3];
const y = sum3(...x); // equivalent to sum3(1,2,3)</pre>
			<p>You can <a id="_idIndexMarker059"/>also create or join arrays, as shown in the <span class="No-Break">following code:</span></p>
			<pre class="source-code">
// continued...
const f = [1, 2, 3];
const g = [4, ...f, 5]; // [4,1,2,3,5]
const h = [...f, ...g]; // [1,2,3,4,1,2,3,5]</pre>
			<p>It works <a id="_idIndexMarker060"/>with <span class="No-Break">objects too:</span></p>
			<pre class="source-code">
// continued…
const p = { some: 3, data: 5 };
const q = { more: 8, ...p }; // { more:8, some:3, data:5 }</pre>
			<p>You can also use it to work with functions that expect separate parameters instead of an array. Common examples of this would be <strong class="source-inline">Math.min()</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">Math.max()</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
// continued...
const numbers = [2, 2, 9, 6, 0, 1, 2, 4, 5, 6];
const minA = Math.min(<strong class="bold">...numbers</strong>); // 0
const maxArray = (arr) =&gt; Math.max(<strong class="bold">...arr</strong>);
const maxA = maxArray(numbers); // 9</pre>
			<p>We are specifying that <strong class="source-inline">maxArray()</strong> shall receive an array of numbers as <span class="No-Break">an argument.</span></p>
			<p>You can also write the following equality since the <strong class="source-inline">.apply()</strong> method requires an array of arguments, but <strong class="source-inline">.call()</strong> expects individual arguments, which you can get <span class="No-Break">by spreading:</span></p>
			<pre class="source-code">
someFn.apply(thisArg, arr) === someFn.call(thisArg, ...arr)</pre>
			<p class="callout-heading">A mnemonic for arguments</p>
			<p class="callout">If you have <a id="_idIndexMarker061"/>problems remembering what arguments are required by <strong class="source-inline">.apply()</strong> and <strong class="source-inline">.call()</strong>, this mnemonic <a id="_idIndexMarker062"/>may help: <em class="italic">A is for Array, and C is for Comma</em>. See <a href="http://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply</a> and <a href="http://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call</a> for <span class="No-Break">more information.</span></p>
			<p>Using the <a id="_idIndexMarker063"/>spread operator helps with writing shorter, more <a id="_idIndexMarker064"/>concise code, and we will be taking advantage of it. We have seen all of the most important JavaScript features that we will be using. Let’s round off this chapter by looking at some tools that we’ll be <span class="No-Break">working with.</span></p>
			<h1 id="_idParaDest-31"><a id="_idTextAnchor030"/>How do we work with JavaScript?</h1>
			<p>This is all well and good, but as we mentioned before, it so happens that the JavaScript version available <a id="_idIndexMarker065"/>almost everywhere isn’t ES13, but rather the earlier JS5. An exception to this is Node.js. It is based on Chrome’s V8 high-performance JavaScript engine, which already has several ES13 features available. Nonetheless, at the time of writing, ES13 coverage isn’t 100% complete, and there are features that you <a id="_idIndexMarker066"/>will miss. (Check out <a href="http://nodejs.org/en/docs/es6/">nodejs.org/en/docs/es6/</a> for more on Node.js and v8.) This is surely changing since Internet Explorer is fading away (support for it ended in June 2022), having been replaced with Microsoft’s Edge browser, which shares Chrome’s engine. In any case, we must still deal with older, less <span class="No-Break">powerful engines.</span></p>
			<p>If you want to be sure of your choices before using any given new feature, check out the compatibility table at <a href="http://kangax.github.io/compat-table/es6/">kangax.github.io/compat-table/es6/</a> (see <span class="No-Break"><em class="italic">Figure 1</em></span><span class="No-Break"><em class="italic">.1</em></span><span class="No-Break">):</span></p>
			<div>
				<div id="_idContainer005" class="IMG---Figure">
					<img src="image/Figure_1.1_B19301.jpg" alt="Figure 1.1 – The latest JavaScript features may not be widely and fully supported, so you’ll have to check before using them"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – The latest JavaScript features may not be widely and fully supported, so you’ll have to check before using them</p>
			<p>For Node.js <a id="_idIndexMarker067"/>specifically, check out <a href="http://node.green/">node.green/</a>, which takes its data from the Kangax table; see <span class="No-Break"><em class="italic">Figure 1</em></span><span class="No-Break"><em class="italic">.2</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer006" class="IMG---Figure">
					<img src="image/Figure_1.2_B19301.jpg" alt="Figure 1.2 – Compatibility table specifically for Node.js"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Compatibility table specifically for Node.js</p>
			<p>So, what can <a id="_idIndexMarker068"/>you do if you want to code using the latest version, but the available one is an earlier, poorer one? Or what happens if most of your users are using older browsers, which don’t support the fancy features you’re keen on using? Let’s see some solutions <span class="No-Break">for this.</span></p>
			<h2 id="_idParaDest-32"><a id="_idTextAnchor031"/>Using transpilers</h2>
			<p>To get out of <a id="_idIndexMarker069"/>this availability and compatibility problem, there are a couple of transpilers that you can use. Transpilers take your original ES13 code, which <a id="_idIndexMarker070"/>might use the most modern JavaScript features, and transforms it into equivalent JS5 code. It’s a source-to-source transformation, instead of source-to-object code that would be used in compilation. You can code using advanced ES13 features, but the user’s browsers will receive JS5 code. A transpiler will also let you keep up with upcoming versions of the language, despite the time needed by browsers to adopt new standards across desktop and <span class="No-Break">mobile devices.</span></p>
			<p class="callout-heading">On word origins</p>
			<p class="callout">If you wonder where the word <em class="italic">transpiler</em> came from, it is a portmanteau of <em class="italic">translate</em> and <em class="italic">compiler</em>. There are many such combinations in technological speak: <em class="italic">email</em> (<em class="italic">electronic</em> and <em class="italic">mail</em>), <em class="italic">emoticon</em> (<em class="italic">emotion</em> and <em class="italic">icon</em>), <em class="italic">malware</em> (<em class="italic">malicious</em> and <em class="italic">software</em>), <em class="italic">alphanumeric</em> (<em class="italic">alphabetic</em> and <em class="italic">numeric</em>), and <span class="No-Break">many more.</span></p>
			<p>Currently, the most <a id="_idIndexMarker071"/>common transpiler for JavaScript is <strong class="bold">Babel</strong> (<a href="http://babeljs.io/">babeljs.io/</a>); years ago, we also had <strong class="bold">Traceur</strong> (<a href="http://github.com/google/traceur-compiler">github.com/google/traceur-compiler</a>), but that’s not maintained any longer. Two other possibilities are <strong class="bold">SWC</strong> (<a href="http://swc.rs/">swc.rs/</a>) and <strong class="bold">Sucrase</strong> (<a href="http://sucrase.io/">sucrase.io/</a>); in particular, the latter boasts a much faster <span class="No-Break">transpilation speed.</span></p>
			<p>With tools <a id="_idIndexMarker072"/>such as <strong class="bold">npm</strong> or <strong class="bold">webpack</strong>, it’s <a id="_idIndexMarker073"/>fairly easy to configure things so that your code will get automatically transpiled and provided to end users. You can also <a id="_idIndexMarker074"/>carry out transpilation online; see <span class="No-Break"><em class="italic">Figure 1</em></span><em class="italic">.3</em> for an example of Babel’s <span class="No-Break">online environment:</span></p>
			<div>
				<div id="_idContainer007" class="IMG---Figure">
					<img src="image/Figure_1.3_B19301.jpg" alt="Figure 1.3 – The Babel transpiler converts ES13 code into compatible JS5 code"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – The Babel transpiler converts ES13 code into compatible JS5 code</p>
			<p>There are specific ways of installing these tools for your programming environment, and usually, you won’t have to do it by hand; check out <a href="http://www.typescriptlang.org/download">www.typescriptlang.org/download</a> for <span class="No-Break">more information.</span></p>
			<h2 id="_idParaDest-33"><a id="_idTextAnchor032"/>Working online</h2>
			<p>There are <a id="_idIndexMarker075"/>some more online tools that you can <a id="_idIndexMarker076"/>use to <a id="_idIndexMarker077"/>test out your JavaScript code. Check out <strong class="bold">JSFiddle</strong> (<a href="http://jsfiddle.net/">jsfiddle.net/</a>), <strong class="bold">CodePen</strong> (<a href="http://codepen.io/">codepen.io/</a>), and <strong class="bold">JSBin</strong> (<a href="http://jsbin.com/">jsbin.com/</a>), among <a id="_idIndexMarker078"/>others. You can see an example of CodePen in <span class="No-Break"><em class="italic">Figure 1</em></span><span class="No-Break"><em class="italic">.4</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer008" class="IMG---Figure">
					<img src="image/Figure_1.4_B19301.jpg" alt="Figure 1.4 – CodePen lets you try out modern JavaScript code (plus HTML and CSS) without requiring any other tools"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – CodePen lets you try out modern JavaScript code (plus HTML and CSS) without requiring any other tools</p>
			<p>Using these tools provides a very quick way to try out code or do small experiments – and I can truly vouch for this since I’ve tested much of the code in this book in <span class="No-Break">this way!</span></p>
			<h2 id="_idParaDest-34"><a id="_idTextAnchor033"/>A step further – TypeScript</h2>
			<p>In the previous <a id="_idIndexMarker079"/>editions of this book, we went with straight JavaScript. Still, in the <a id="_idIndexMarker080"/>years since, Microsoft’s <strong class="bold">TypeScript</strong> (<a href="http://www.typescriptlang.org/">www.typescriptlang.org/</a>), a superset of the language that is itself compiled into JavaScript, has gained a lot of following, is now standard with many frameworks, and you can use both for frontend and <span class="No-Break">backend code.</span></p>
			<p>The main advantage of TypeScript is the ability to add (optional) static type checks to JavaScript, which helps detect programming errors at compile time. But beware: as with Babel, not all of ES13 will be available. However, it’s entirely sufficient for our purposes, allowing us to be more careful <span class="No-Break">with coding.</span></p>
			<p>Most statistics about <a id="_idIndexMarker081"/>programming language popularity rank TypeScript in the top 10; <span class="No-Break"><em class="italic">Figure 1</em></span><em class="italic">.5</em> (from <a href="http://spectrum.ieee.org/top-programming-languages-2022">spectrum.ieee.org/top-programming-languages-2022</a>) <span class="No-Break">confirms this:</span></p>
			<div>
				<div id="_idContainer009" class="IMG---Figure">
					<img src="image/Figure_1.5_B19301.jpg" alt="Figure 1.5 – Programming language popularity in 2022 according to IEEE Spectrum"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – Programming language popularity in 2022 according to IEEE Spectrum</p>
			<p class="callout-heading">Going to the source</p>
			<p class="callout">Despite using TypeScript, in the rest of this book, we’ll keep referring to JavaScript, which is, after all, the language that <span class="No-Break">is executed.</span></p>
			<p>You can also perform type checks by using Facebook’s <strong class="bold">Flow</strong> (<a href="http://flow.org/">flow.org/</a>). However, there’s more support for using external libraries with TypeScript than with Flow. Also, the tooling and installation for development are simpler <span class="No-Break">for TypeScript.</span></p>
			<p class="callout-heading">Ignoring types?</p>
			<p class="callout">There’s a proposal (that may go nowhere – be warned!) to allow JavaScript to process (by ignoring) types, so you would be able to run TypeScript directly, with no preprocessing or transpiling of any kind. For more on this, go <span class="No-Break">to </span><a href="http://tc39.es/proposal-type-annotations/"><span class="No-Break">tc39.es/proposal-type-annotations/</span></a><span class="No-Break">.</span></p>
			<p>It should be made <a id="_idIndexMarker082"/>clear that TypeScript is more than just a type checker; it’s a language on its own (OK, it's very similar to JavaScript, but still…). For example, it adds interfaces, decorators, enumerated types, and more to the language, so you can use such features that are typical in other languages. In any case, if you don’t care for TypeScript, you can just ignore the types-related syntax, and then you’ll have <span class="No-Break">plain JavaScript.</span></p>
			<p>TypeScript is available via online tools, and you can also test it online on their playground (<a href="http://www.typescriptlang.org/play/">www.typescriptlang.org/play/</a>). You can set options to be more or less strict with data type checks, and you can also run your code on the spot; see <span class="No-Break"><em class="italic">Figure 1</em></span><em class="italic">.6</em> for <span class="No-Break">more details:</span></p>
			<div>
				<div id="_idContainer010" class="IMG---Figure">
					<img src="image/Figure_1.6_B19301.jpg" alt="Figure 1.6 – You can check and transpile your code online, on TypeScript’s website"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.6 – You can check and transpile your code online, on TypeScript’s website</p>
			<p>Later in this book, in the <em class="italic">Specifying data types</em> section of <a href="B19301_12.xhtml#_idTextAnchor221"><span class="No-Break"><em class="italic">Chapter 12</em></span></a>, <em class="italic">Building Better Containers</em>, we will consider a formal type <a id="_idIndexMarker083"/>system for FP languages (not just JavaScript) and we’ll find out that our TypeScript work has allayed <span class="No-Break">most difficulties.</span></p>
			<p>A final admission: at times, TypeScript may seem more of a hindrance than a help when you have to deal with complex data typing expressions. (Updating all the code in this book to TypeScript sometimes led me to doubt my sanity in using it!) However, in the long run, code written in TypeScript is less prone to bugs, because its static type checks detect and avoid many <span class="No-Break">common errors.</span></p>
			<h2 id="_idParaDest-35"><a id="_idTextAnchor034"/>Testing</h2>
			<p>We will also <a id="_idIndexMarker084"/>touch on testing, which is, after all, one of FP’s main advantages. In previous editions of this book, we went with <strong class="bold">Jasmine</strong> (<a href="http://jasmine.github.io/">jasmine.github.io/</a>), but now, we’ve changed to Facebook’s <strong class="bold">Jest</strong> (<a href="http://jestjs.io/">jestjs.io/</a>) – which is built on top <span class="No-Break">of Jasmine!</span></p>
			<p>Jest has grown in popularity due to its ease of use and broad applicability: you can test frontend and backend code equally well, with little configuration. (See <a href="http://jestjs.io/docs/getting-started">jestjs.io/docs/getting-started</a> for its installation and configuration.) We won’t be writing tests for <a id="_idIndexMarker085"/>every single piece of code in this book, but while following the ideas of <strong class="bold">test-driven development</strong> (<strong class="bold">TDD</strong>), we’ll often <span class="No-Break">do so.</span></p>
			<h1 id="_idParaDest-36"><a id="_idTextAnchor035"/>Summary</h1>
			<p>In this chapter, we have seen the basics of FP, a bit of its history, its advantages (and also some possible disadvantages, to be fair), why we can apply it in JavaScript (which isn’t usually considered a functional language), and what tools we’ll need to go through the rest of <span class="No-Break">this book.</span></p>
			<p>In <a href="B19301_02.xhtml#_idTextAnchor037"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, <em class="italic">Thinking Functionally</em>, we’ll go over an example of a simple problem, look at it in common ways, and end by solving it in a functional manner and analyzing the advantages of <span class="No-Break">our method.</span></p>
			<h1 id="_idParaDest-37"><a id="_idTextAnchor036"/>Questions</h1>
			<p>1.1 <strong class="bold">TypeScript, please!</strong> Let’s keep our promise: convert the JavaScript examples provided in this chapter <span class="No-Break">into TypeScript.</span></p>
			<p>1.2 <strong class="bold">Classes as first-class objects</strong>: We learned that functions are first-class objects, but did you know that classes also are? (Though, of course, speaking of classes as objects does sound weird.) Look at the following example and see what makes it tick! Be careful: there’s some purposefully weird code <span class="No-Break">in it:</span></p>
			<pre class="source-code">
const makeSaluteClass = (term) =&gt;
  class {
    constructor(x) {
      this.x = x;
    }
    salute(y) {
      console.log(`${this.x} says "${term}" to ${y}`);
    }
  };
const Spanish = makeSaluteClass("HOLA");
new Spanish("ALFA").salute("BETA");
// ALFA says "HOLA" to BETA
new (makeSaluteClass("HELLO"))("GAMMA").salute("DELTA");
// GAMMA says "HELLO" to DELTA
const fullSalute = (c, x, y) =&gt; new c(x).salute(y);
const French = makeSaluteClass("BON JOUR");
fullSalute(French, "EPSILON", "ZETA");
// EPSILON says "BON JOUR" to ZETA</pre>
			<p>1.3 <strong class="bold">Climbing factorial</strong>: Our implementation of a factorial starts by multiplying by <em class="italic">n</em>, then by <em class="italic">n</em>-1, then <em class="italic">n</em>-2, and so on in what we could call a downward fashion. Can you write a new version of the factorial function that will <span class="No-Break">loop upwards?</span></p>
			<p>1.4 <strong class="bold">Factorial errors</strong>: Factorials, as we defined them, should only be calculated for non-negative integers. However, the function that we wrote in the <em class="italic">Recursion</em> section doesn’t check whether its argument is valid. Can you add the necessary checks? Try to avoid repeated, <span class="No-Break">redundant tests!</span></p>
			<p>1.5 <strong class="bold">Factorial testing</strong>: Write complete tests for the function in the previous question. Try to achieve <span class="No-Break">100% coverage.</span></p>
			<p>1.6 <strong class="bold">Code squeezing</strong>: Not that it’s a goal in itself, but by using arrow functions and some other JavaScript features, you can shorten <strong class="source-inline">newCounter()</strong> to half its length. Can you <span class="No-Break">see how?</span></p>
			<p>1.7 <strong class="bold">What type is it?</strong>: What is the type of the <span class="No-Break"><strong class="source-inline">newCounter()</strong></span><span class="No-Break"> function?</span></p>
		</div>
	</body></html>