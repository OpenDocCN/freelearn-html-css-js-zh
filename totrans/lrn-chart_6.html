<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Configuring Styles and Interactivity</h1>
                </header>
            
            <article>
                
<p>In this chapter, you will learn how to configure the look and feel of a chart so it will reflect a desired layout or style, follow good practices of chart design, and tune its interactive and responsive behavior. This includes configuring colors, gradients, patterns and fonts, setting margins, padding, borders, fills, backgrounds, line widths, dashes, positioning titles and legends, and configuring the behavior of transitions and animations. Some of these properties are easily configured using Chart.js configuration options, but others require plugins and extensions, which will also be introduced in this chapter.</p>
<p>In this chapter, you will learn the following:</p>
<ul>
<li>Default configuration</li>
<li>Fonts</li>
<li>Colors, gradients, patterns, and shadows</li>
<li>Adding text elements and labels</li>
<li>Interactions, data updates, and animation</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Default configuration</h1>
                </header>
            
            <article>
                
<p>Every chart created in Chart.js comes previously configured with default properties. You can always override these properties in the <kbd>options</kbd> object when creating a new Chart instance, but you can also override them for all or for many of your charts, by setting the properties directly in the <kbd>Chart.defaults</kbd> object.</p>
<p class="mce-root"/>
<p>For example, the default line tension is <kbd>0.4</kbd> for any kind of chart. If you want all your charts to use only straight lines and have scales beginning at zero, you can make all pages load a <kbd>defaults.js</kbd> file that declares the following defaults:</p>
<pre>Charts.defaults.global.elements.line.tension = 0;<br/>Charts.defaults.scales.ticks.beginAtZero = true;</pre>
<p>If you want to have only curved lines in the radar charts, you can override the property for all radar charts (but not any other kind of chart) using the following:</p>
<pre>Charts.defaults.radar.elements.line.tension = 0.4;</pre>
<p>Then, if you have a specific line chart where you would prefer to use curved lines, you can again override the property when you create the chart instance, using its <kbd>options</kbd> configuration object:</p>
<pre>const chart = new Chart("my-chart", {     type: 'line', data: {...},<br/>   options: {<br/>     elements: {<br/>       line: {<br/>         tension: 0<br/>         //overrides Charts.defaults.global.elements.line.tension<br/>       }<br/>     }<br/>   }<br/> });</pre>
<p>Some options can even be configured for a specific dataset within a chart, which is the case with line tension. If you use <kbd>lineTension: 0.3</kbd> for a specific dataset in the <kbd>datasets</kbd> array, only the line corresponding to that dataset will exhibit the new tension:</p>
<pre>datasets: [{<br/>    data: [1,2,1],<br/>    lineTension: 0.3<br/>}]</pre>
<p>The order is significant, and so is the hierarchy. Properties set in a more specific context will almost always override the values set in a more general context. And any global properties should be set <em>before</em> instantiating a chart. In the next sections, we will explore options that can be defined at different configuration levels, their object structure, and their default values.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Global defaults</h1>
                </header>
            
            <article>
                
<p>Properties in <kbd>Chart.defaults.global</kbd> contain configuration options for all types of charts, including graphical elements, titles and captions, layout properties, animation, tooltips, events, and plugins. But it doesn't include grids and scales, which are configured in the <kbd>Chart.defaults.scale</kbd> object. The options available in <kbd>Chart.defaults.global</kbd> are listed as follows. All these properties, except the default font and color settings, are also available as properties in the options configuration object of any chart instance:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td style="width: 28.7879%">
<p><strong>Object</strong></p>
</td>
<td style="width: 35.124%">
<p><strong>Value</strong></p>
</td>
<td style="width: 34.8485%">
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>defaultColor</kbd></p>
</td>
<td style="width: 35.124%">
<p>CSS color</p>
</td>
<td style="width: 34.8485%">
<p>The default color for all chart elements. This property is overriden in several chart elements, so it's not really very useful. The default is <kbd>'rgba(0,0,0,0.1)'</kbd>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>defaultFontColor</kbd></p>
</td>
<td style="width: 35.124%">
<p>CSS color (examples: <kbd>'lightblue'</kbd>, <kbd>'#9cf'</kbd>, <kbd>'#ff0000'</kbd>, <kbd>'rgb(100%,50%,25%)'</kbd>, <kbd>'hsl(60,100%,50%)'</kbd>, <kbd>'rgba(100%,50%,25%,0.6)'</kbd>, <kbd>'hsla(60,100%,50%,0.1)'</kbd>)</p>
</td>
<td style="width: 34.8485%">
<p>The default color for all text (unless overridden with a more specific font color property). The default is <kbd>'#666'</kbd>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>defaultFontFamily</kbd></p>
</td>
<td style="width: 35.124%">
<p>CSS font-family name or list (example: <kbd>'Helvetica</kbd>, <kbd>"Helvetica Neue"</kbd>, <kbd>sans-serif'</kbd>)</p>
</td>
<td style="width: 34.8485%">
<p>The default family for all text (unless overridden with a more specific font color property). The default is <kbd>'Helvetica Neue'</kbd>, <kbd>'Helvetica'</kbd>, <kbd>'Arial'</kbd>, <kbd>sans-serif</kbd>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>defaultFontSize</kbd></p>
</td>
<td style="width: 35.124%">
<p>Font size in pixels</p>
</td>
<td style="width: 34.8485%">
<p>The default size in pixels for all text (unless overridden with a more specific font size property). The default is 12.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>defaultFontStyle</kbd></p>
</td>
<td style="width: 35.124%">
<p>CSS font-style (ex: <kbd>'bold'</kbd>, <kbd>'italic'</kbd>, <kbd>'normal'</kbd>) or any style available with the font that is being used (ex: <kbd>'condensed bold'</kbd>, <kbd>'light'</kbd>, and so on)</p>
</td>
<td style="width: 34.8485%">
<p>The default style for all text (unless overridden with a more specific font style property). The default is <kbd>'normal'</kbd>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>layout.padding</kbd></p>
</td>
<td style="width: 35.124%">
<p>The number or object with numerical properties for <kbd>top</kbd>, <kbd>left</kbd>, <kbd>right</kbd>, <kbd>bottom</kbd></p>
</td>
<td style="width: 34.8485%">
<p>If the value is a number, the padding in pixels is applied to all sides of a chart. If it's an object, the individual values can be applied to different sides of the chart.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>maintainAspectRatio</kbd></p>
</td>
<td style="width: 35.124%">
<p><kbd>true</kbd> or <kbd>false</kbd></p>
</td>
<td style="width: 34.8485%">
<p>Maintains the aspect ratio of the canvas element.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>responsive</kbd></p>
</td>
<td style="width: 35.124%">
<p><kbd>true</kbd> or <kbd>false</kbd></p>
</td>
<td style="width: 34.8485%">
<p>Resizes the chart when the canvas is resized. The default is <kbd>true</kbd>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>showLines</kbd></p>
</td>
<td style="width: 35.124%">
<p><kbd>true</kbd> or <kbd>false</kbd></p>
</td>
<td style="width: 34.8485%">
<p>If <kbd>true</kbd>, shows lines between point values. Default is <kbd>true</kbd>, but is overridden to <kbd>false</kbd> in scatter charts.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>title</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See the <em>Legends and labels</em> section in this chapter.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>legend</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See the <em>Legends and labels</em> section in this chapter.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>tooltips</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See<em> </em><a href="6a377615-9cab-4346-817a-cecda0a2d90c.xhtml" target="_blank">Chapter 7</a>, <em>Advanced Chart.js</em>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>hover</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See <a href="6a377615-9cab-4346-817a-cecda0a2d90c.xhtml" target="_blank"/><a href="6a377615-9cab-4346-817a-cecda0a2d90c.xhtml" target="_blank">Chapter 7</a><em>, Advanced Chart.js</em>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>elements</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See the <em>Chart elements</em> section in this chapter.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>events</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See the <em>Animation</em> section in this chapter.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>plugins</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See <a href="6a377615-9cab-4346-817a-cecda0a2d90c.xhtml" target="_blank">Chapter 7</a>, <em>Advanced Chart.js</em>.</p>
</td>
</tr>
<tr>
<td style="width: 28.7879%">
<p><kbd>animation</kbd></p>
</td>
<td style="width: 35.124%">
<p>Object</p>
</td>
<td style="width: 34.8485%">
<p>See the <em>Animation</em> section in this chapter.</p>
</td>
</tr>
</tbody>
</table>
<p> </p>
<div class="packt_figref CDPAlignCenter CDPAlign">Configurable options in Charts.defaults.global that can be configured for all charts. Callbacks are not listed.</div>
<p class="mce-root"/>
<p>For example, the following configuration will turn off-line rendering between value points for any charts. Since this property is not overridden in line or radar charts, if you create a line chart, it won't have any lines. Only the points will be visible:</p>
<pre>Chart.defaults.global.showLines = false;</pre>
<p>This other configuration will turn off the legends for all charts (very useful for single-dataset charts):</p>
<pre>Chart.defaults.global.legend.display = false;</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Scale defaults</h1>
                </header>
            
            <article>
                
<p>Scales and grids can be globally configured in the <kbd>Charts.defaults.scale</kbd> object. The following table lists the top-level properties and some of the default properties of this object. Some of these defaults are overridden in specific charts. In these cases, changing them in this context may not have any effect:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Object</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
<td>
<p><strong>Default properties</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>display</kbd></p>
</td>
<td>
<p>Displays (<kbd>true</kbd>) or not (<kbd>false</kbd>) the scales for this chart.</p>
</td>
<td>
<p>The default is <kbd>true</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>offset</kbd></p>
</td>
<td>
<p>Adds extra space to left and right edges of the chart.</p>
</td>
<td>
<p>The default is <kbd>false</kbd> (overridden to <kbd>true</kbd> in bar charts).</p>
</td>
</tr>
<tr>
<td>
<p><kbd>gridLines</kbd></p>
</td>
<td>
<p>Default properties and callbacks for all scales (some are overridden in specific chart types). See <a href="f3bca5ff-1e17-4cb4-bbb9-6d71b8847ed0.xhtml"/><a href="f3bca5ff-1e17-4cb4-bbb9-6d71b8847ed0.xhtml" target="_blank">Chapter 5</a>, <em>Scales and Grid Configuration</em>.</p>
</td>
<td>
<pre>display = true<br/>color = 'rgba(0,0,0,0.1)<br/>lineWidth = 1<br/>drawTicks: true<br/>drawOnChartArea = true<br/>offsetGridLines = false</pre></td>
</tr>
<tr>
<td>
<p><kbd>scaleLabel</kbd></p>
</td>
<td>
<p>The default properties and callbacks for all scales (some are overridden in specific chart types). See <a href="f3bca5ff-1e17-4cb4-bbb9-6d71b8847ed0.xhtml" target="_blank"/><a href="f3bca5ff-1e17-4cb4-bbb9-6d71b8847ed0.xhtml" target="_blank">Chapter 5</a><em>, Scales and Grid Configuration,</em> for details.</p>
</td>
<td>
<pre>display = false,<br/>labelString = ''<br/>lineHeight = 1.2<br/>padding: {top: 4, bottom: 4}</pre></td>
</tr>
<tr>
<td>
<p><kbd>ticks</kbd></p>
</td>
<td>
<p>The default properties and callbacks for all scales (some are overriden in specific chart types). See <a href="f3bca5ff-1e17-4cb4-bbb9-6d71b8847ed0.xhtml" target="_blank">Chapter 5</a><em>, Scales and Grid Configuration,</em> for details.</p>
</td>
<td>
<pre>display = true<br/>beginAtZero = false<br/>autoSkip = true<br/>reverse = false</pre></td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref">Options in Charts.defaults.scales that can be configured for scales of all charts.</div>
<p class="mce-root"/>
<p class="mce-root"/>
<p>For example, the following code will place the same labels on all axes in any charts that use Cartesian axes (<kbd>bar</kbd>, <kbd>horizontalBar</kbd>, <kbd>line</kbd>, <kbd>scatter</kbd>, <kbd>bubble</kbd>):</p>
<pre>Chart.defaults.scale.scaleLabel.display = true;<br/>Chart.defaults.scale.scaleLabel.labelString = 'default';</pre>
<p>The <kbd>display</kbd> property is available in all scale components. With <kbd>display: false</kbd>, you can globally remove ticks, labels, gridlines, and other non-chart information from your default charts, overriding these properties in specific charts only when necessary. This is a good practice and will maximize the data-to-ink ratio of your charts.</p>
<p>The code fragments in this section are from <kbd>Config/defaults-1-global-config.html</kbd>, in the GitHub repository for this chapter.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Graphical elements</h1>
                </header>
            
            <article>
                
<p><strong>Graphical elements</strong> are the primitives used to render visualizations of datasets in different types of charts. You can define defaults for them configuring the four objects in the <kbd>Chart.defaults.global.elements</kbd> context, listed as follows. Some of these properties are overridden in the defaults for certain charts, so changing them at this level may not cause any effect:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Object</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
<td>
<p><strong>Default properties</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>arc</kbd></p>
<p> </p>
</td>
<td>
<p>The default properties for Canvas arcs, which are used in pie, doughnut, and polar area charts.</p>
</td>
<td>
<pre>backgroundColor:"rgba(0,0,0,0.1)"<br/>borderColor:"#fff"<br/>borderWidth:2</pre></td>
</tr>
<tr>
<td>
<p><kbd>line</kbd></p>
</td>
<td>
<p>The default properties for Canvas lines, which are used in line and radar charts. See <a href="25edc904-3528-40cc-8865-75ccf1fc78eb.xhtml">Chapter 2</a>, <em>Technology</em> <em>Fundamentals,</em> for Canvas properties used in <kbd>borderCapStyle</kbd> and <kbd>borderJoinStyle</kbd>. See <a href="9c3dd8a3-6dde-42ba-9e93-ae1e2884cc57.xhtml" target="_blank">Chapter 4</a>, C<em>reating Charts</em>, for <kbd>fill</kbd> strategies.</p>
</td>
<td>
<pre>backgroundColor:"rgba(0,0,0,0.1)"<br/>borderCapStyle:"butt"<br/>//(see Chapter 2)<br/> borderColor:"rgba(0,0,0,0.1)"<br/> borderDash:[]<br/> borderDashOffset:0<br/> borderJoinStyle:"miter"<br/>//(see Chapter 2)<br/> borderWidth:3<br/> capBezierPoints:true<br/> fill:true //(see Chapter 4)<br/> tension:0.4<br/> stepped: false</pre></td>
</tr>
<tr>
<td>
<p><kbd>Point</kbd></p>
</td>
<td>
<p>Value points are actually circles drawn with Canvas arcs. This object contains default properties for points in line, radar, scatter, or bubble charts. See <a href="9c3dd8a3-6dde-42ba-9e93-ae1e2884cc57.xhtml" target="_blank">Chapter 4</a>,<em> Creating Charts,</em> for more point styles.</p>
</td>
<td>
<pre>backgroundColor:"rgba(0,0,0,0.1)"<br/>borderColor:"rgba(0,0,0,0.1)"<br/>borderWidth:1<br/>hitRadius:1<br/>hoverBorderWidth:1<br/>hoverRadius:4<br/>pointStyle:"circle"<br/>//(see Chapter 4)<br/>radius:3</pre></td>
</tr>
<tr>
<td>
<p><kbd>Rectangle</kbd></p>
</td>
<td>
<p>The default properties for Canvas rectangles used in bar and <kbd>horizontalBar</kbd> charts. One of the borders is not drawn (skipped).</p>
</td>
<td>
<pre>backgroundColor:"rgba(0,0,0,0.1)"<br/>borderColor:"rgba(0,0,0,0.1)"<br/>borderSkipped:"bottom" ("left"in horizontalBar)<br/>borderWidth:0</pre></td>
</tr>
</tbody>
</table>
<div class="packt_figref CDPAlignCenter CDPAlign">Options in Charts.defaults.global.elements that apply to elements in all charts</div>
<p>The following code will make all line and radar charts use <span>red</span> dashed 5-pixel lines as the default, unless they are overridden in their default configuration or <kbd>options</kbd> object. See <kbd>Config/defaults-2-global-elements.html</kbd>, as follows:</p>
<pre>const line = Chart.defaults.global.elements.line;<br/>line.borderDash = [5,5];<br/>line.borderWidth = 5;<br/>line.borderColor = 'red';</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Chart defaults</h1>
                </header>
            
            <article>
                
<p>The <kbd>Chart.default</kbd> context contains an object for each chart type supported in Chart.js. The types are in the following table, which also lists some of the properties previously configured in each one. These properties may override the global defaults for chart styles and elements (<kbd>Chart.default.global</kbd>) and the default properties for scales (<kbd>Chart.default.scales</kbd>). You can define new defaults by changing these properties in the <kbd>Chart.default</kbd> context, or locally inside an options object:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Object</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
<td>
<p><strong>Default properties (selection)</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>bar</kbd></p>
</td>
<td>
<p>The default properties for bar charts</p>
</td>
<td>
<pre>hover.mode = 'label'<br/>scales.xAxes[0].type = 'category'<br/>scales.yAxes[0].type = 'linear'<em><br/> <br/></em></pre></td>
</tr>
<tr>
<td>
<p><kbd>horizontalBar</kbd></p>
</td>
<td>
<p>The default properties for horizontal bar charts</p>
</td>
<td>
<pre>hover.mode = 'index'<br/>scales.xAxes[0].type = 'linear'<br/>scales.yAxes[0].type = 'category'<br/>elements.rectangle.borderSkipped = 'left'</pre></td>
</tr>
<tr>
<td>
<p><kbd>pie</kbd></p>
</td>
<td>
<p>The default properties and callbacks for pie charts</p>
</td>
<td>
<pre>circumference = 2 * Math.PI<br/>cutoutPercentage = 0<br/>hover.mode = 'single'</pre></td>
</tr>
<tr>
<td>
<p><kbd>doughnut</kbd></p>
</td>
<td>
<p>The default properties and callbacks for doughnut charts</p>
</td>
<td>
<pre>circumference = 2 * Math.PI<br/>cutoutPercentage = 50<br/>hover.mode = 'single'</pre></td>
</tr>
<tr>
<td>
<p><kbd>line</kbd></p>
</td>
<td>
<p>The default properties and callbacks for line charts</p>
</td>
<td>
<pre>hover.mode = 'label'<br/>scales.xAxes[0] = {type: 'category', id: 'x-axis-0'}<br/>scales.yAxes[0] = {type: 'linear', id: 'y-axis-0'}<br/>showLines = true,<br/>spanGaps = false</pre></td>
</tr>
<tr>
<td>
<p><kbd>radar</kbd></p>
</td>
<td>
<p>The default properties for radar charts</p>
</td>
<td>
<pre>elements.line.tension = 0<br/>scale.type = 'radialLinear'</pre></td>
</tr>
<tr>
<td>
<p><kbd>polarArea</kbd></p>
</td>
<td>
<p>The default properties for polar area charts</p>
</td>
<td>
<pre>angleLines.display = false<br/>gridLines.circular = true<br/>pointLabels.display = false<br/>ticks.beginAtZero = true<br/>type = "radialLinear"<br/>startAngle = Math.PI / 2</pre></td>
</tr>
<tr>
<td>
<p><kbd>scatter</kbd></p>
</td>
<td>
<p>The default properties for scatter charts</p>
</td>
<td>
<pre>hover.mode = 'single'<br/>showLines = false<br/>scales.xAxes[0] = {type: 'linear', id: 'x-axis-1'}<br/>scales.yAxes[0] = {type: 'linear', id: 'y-axis-1'}</pre></td>
</tr>
<tr>
<td>
<p><kbd>bubble</kbd></p>
</td>
<td>
<p>The default properties for bubble charts</p>
</td>
<td>
<pre>hover.mode = 'single'<br/>scales.xAxes[0] = {type: 'linear', id: 'x-axis-0'}<br/>scales.yAxes[0] = {type: 'linear', id: 'y-axis-0'}</pre></td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref"> Default options in Charts.defaults for different types of charts</div>
<p>You can check the current values of your default properties by printing them to your JavaScript console and inspecting the object tree, with <kbd>console.log()</kbd>. The following code will print the context root:</p>
<pre>console.log(Chart.defaults);</pre>
<p>You can also inspect (and modify the properties of) the chart instance. In this case, you need to assign the new chart to a variable handle (see <kbd>Config/defaults-1-global-config.html</kbd>):</p>
<pre>const chart = new Chart(…);<br/>console.log("Chart Data, chart.config.data);<br/>console.log("Chart Options, chart.options);</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Fonts</h1>
                </header>
            
            <article>
                
<p>Chart.js uses Canvas to select and display local and installed fonts. The font configuration involves setting up to four font properties: family, size, style, and color. A <kbd>fontFamily</kbd> is a string containing a list of font-family names, a <kbd>fontStyle</kbd> contains a string with the name of a style supported by the corresponding font-family, a <kbd>fontColor</kbd> is any valid CSS-compatible color string, and the <kbd>fontSize</kbd> is a number that represents the size in pixels. You can configure font attributes in any object that includes text: titles, tick captions, legend labels, or tooltips, or you can set global defaults that will be inherited by text elements that don't explicitly set font attributes.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Selecting standard fonts</h1>
                </header>
            
            <article>
                
<p>The basic font properties are named <kbd>fontFamily</kbd>, <kbd>fontSize</kbd>, <kbd>fontStyle</kbd>, and <kbd>fontColor</kbd>. Some objects have prefixed versions of these same properties. These objects are listed as follows:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td><strong>Object containing text element</strong></td>
<td><strong>Description</strong></td>
<td><strong>Font properties</strong></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.global</span></kbd></td>
<td><span>Global defaults</span></td>
<td><kbd>defaultFontFamily</kbd><span>, </span><kbd>defaultFontSize</kbd><span>, </span><kbd>defaultFontStyle, defaultFontColor</kbd></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.global.title</span></kbd></td>
<td><span>Chart title</span></td>
<td rowspan="5"><kbd>fontFamily</kbd><span>,</span><br/>
<kbd>fontSize</kbd><span>,</span><br/>
<kbd>fontStyle</kbd><span>,</span><br/>
<kbd>fontColor</kbd></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.scale.ticks</span></kbd></td>
<td><span>Axis label</span></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.scale.ticks.minor</span></kbd></td>
<td><span>Minor tick label</span></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.scale.ticks.major</span></kbd></td>
<td><span>Major tick label</span></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.global.legend</span></kbd></td>
<td><span>Legend label</span></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.global.tooltips</span></kbd></td>
<td><span>Tooltip header</span></td>
<td><kbd>titleFontFamily</kbd><span>, </span><kbd>titleFontSize</kbd><span>, </span><kbd>titleFontStyle</kbd><span>, </span><kbd>titleFontColor</kbd></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.global.tooltips</span></kbd></td>
<td><span>Tooltip body</span></td>
<td><kbd>bodyFontFamily</kbd><span>, </span><kbd>bodyFontSize</kbd><span>, </span><kbd>bodyFontStyle</kbd><span>, </span><kbd>bodyFontColor</kbd></td>
</tr>
<tr>
<td><kbd><span>Chart.defaults.global.tooltips</span></kbd></td>
<td><span>Tooltip footer</span></td>
<td><kbd>footerFontFamily</kbd><span>, </span><kbd>footerFontSize, footerFontStyle</kbd><span>, </span><kbd>footerFontColor</kbd></td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref">Objects that have font configuration properties</div>
<p>Since it's usually good practice to avoid using more than one font family for the whole chart, global options are the best place to configure this property. You can also set other font defaults:</p>
<pre>Chart.defaults.global.defaultFontFamily =<br/>     'Courier, "Courier New", "Lucida Console", monospace';Chart.defaults.global.defaultFontSize = 12;<br/>Chart.defaults.global.defaultFontStyle= 'normal';<br/>Chart.defaults.global.defaultFontColor = '#333';</pre>
<p>You can always choose to override specific properties where appropriate, such as the font size of a chart title:</p>
<pre>Chart.defaults.global.title.fontSize = 24;</pre>
<p>And you can override it again, setting a different value in the chart instance, if necessary:</p>
<pre>const chart = new Chart("my-chart", {type: 'line', data: {…},<br/>    options: {<br/>        title: {<br/>            display: true,<br/>            text: "Very large title that doesn't fit in the default space",<br/>            fontSize: 20<br/>           }<br/>        }<br/>});</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using Web fonts</h1>
                </header>
            
            <article>
                
<p>Chart.js can use any fonts that are available for your website. Besides the standard fonts supported by all browsers (<em>serif</em>, <em>sans-serif</em>, <em>monospace</em>), you can also use online fonts loaded by a style sheet.</p>
<p>In the following example, we are using a free web font (OFL license), called <em>Yanone</em> Kaffeesatz<em>,</em> obtained from Google Fonts. To install it, simply load the CSS by adding the following link to the <kbd>&lt;head&gt;</kbd> of your HTML page:</p>
<pre>&lt;link href="https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz"<br/>       rel="stylesheet"&gt;</pre>
<p>Now you can use the Yanone Kaffeesatz font family in CSS and HTML. Canvas can set it as the context font, using the <kbd>font</kbd> property. The simplest way to use it in Chart.js is to declare it as the default global font. You can also configure any font styles if this feature is available:</p>
<pre>Chart.defaults.global.defaultFontFamily = '"Yanone Kaffesatz", sans-serif';</pre>
<p>In the following example, we changed several font properties (<kbd>family</kbd>, <kbd>color</kbd>, <kbd>size</kbd>, and <kbd>style</kbd>), using global options from one of the pie/doughnut charts that were created in the last chapter:</p>
<pre>Chart.defaults.global.defaultFontColor = 'black';<br/>Chart.defaults.global.defaultFontFamily =<br/>      '"Yanone Kaffesatz", "Helvetica Narrow", "Arial Narrow", sans-serif';<br/>Chart.defaults.global.defaultFontSize = 24;<br/>Chart.defaults.global.defaultFontStyle = 'normal';<br/>Chart.defaults.global.title.fontSize = 40;<br/>Chart.defaults.global.title.fontColor = 'hsla(240,50%,70%,1)';<br/>Chart.defaults.global.legend.labels.fontColor = 'hsla(120,20%,60%,1)';</pre>
<p>The result is shown in the following diagram. The code is available in <kbd>Fonts/fonts-1.html</kbd> and requires the installing of the Yanone Kaffesatz font (or any other font, if you edit the code):</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/7ec029b4-5357-401c-9c23-90ca210ef25f.png" style="width:30.25em;height:15.75em;" width="754" height="393"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">A doughnut chart using a web font for titles and labels. Code: <em>Fonts/fonts-1.html.</em></div>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Colors, gradients, patterns, and shadows</h1>
                </header>
            
            <article>
                
<p>Choosing an effective color scheme for data visualization is no easy task. Colors aren't simply used to make a chart look nicer. Besides distinguishing and suggesting associations between sets of data, they may also communicate information through aspects such as hue, contrast, saturation, or lightness. They can even influence the mood of the viewer. The choice of colors is never neutral. It may attract or repel the viewer from relevant information.</p>
<p>Other aspects may be important, depending on your audience. You may want to use gradients, bevels, and shadows for purely aesthetic reasons, but if your audience requires maximum accessibility, you may also need to consider the use of color-blind-safe palettes or patterns.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Configuring colors</h1>
                </header>
            
            <article>
                
<p>Chart.js supports standard HTML/CSS color names and codes (see <a href="25edc904-3528-40cc-8865-75ccf1fc78eb.xhtml">Chapter 2</a>, <em>Technology Fundamentals</em>), which are assigned to properties that control fonts, strokes (lines, and borders), and fills. You can select a color by its name (for example, red), hexadecimal code (<kbd>#f00</kbd>, <kbd>#ff0000</kbd>), or three-argument generator functions that receive RGB or HSL components (<kbd>rgb(255,0,0)</kbd>, or <kbd>hsl(0,100%,50%)</kbd>). CSS color generator functions also include a four-argument version that controls transparency with the alpha component (<kbd>'rgba(255,0,0,1)'</kbd>, or <kbd>'hsla(0,100%,50%,1)'</kbd>).</p>
<p>The <kbd>Chart.defaults.global.defaultColor</kbd> property sets a default color for all the chart components, but it is mostly overridden by the default configurations for fonts, scales, graphical elements, and charts that default to monochromatic tones. These properties occur in different chart elements. They have different names, but they all end with the <kbd>Color</kbd> suffix. The basic configuration properties (used in <kbd>Chart.defaults.global</kbd> or the <kbd>options</kbd> object) contain a single color, but they may also be an array of colors when applied to a single dataset.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Color schemes and palettes</h1>
                </header>
            
            <article>
                
<p>Chart.js does not include a native color palette generator. In our examples so far, we have either assigned explicit colors, created color palettes with no more than six colors, or used random color-generator functions. But colors are an important means of communicating information in a chart, and should be chosen carefully. If not used with care, your chart may suggest nonexistent relationships among data, deceiving the viewer. Colors that vary in lightness and saturation suggest a sequential relationship (stronger/weaker or hotter/colder). Opposing data can be better represented using divergent color palettes, where extremes are represented by complementary colors. If your data represents different categories, it will be better visualized with a qualitative color scheme. Depending on your audience and the purpose of your chart, you may also need to consider accessibility issues, such as color blindness or rendering in color-limited devices, when selecting colors. All these tasks are facilitated by the use of a specially-designed color palette or scheme.</p>
<p>A color palette is a fixed-size sequence of colors and is usually represented as an array in JavaScript. A <strong>scheme</strong> represents a collection of color palettes and is usually a function (or an object) in JavaScript. You can use a scheme to generate a palette containing an arbitrary sequence of colors.</p>
<p>You can write your own palettes, schemes, and color generators, but it's much easier to generate carefully-selected palettes and schemes using popular services and JavaScript libraries.</p>
<p>ColorBrewer, by Cynthia Brewer, is a website where you can generate an array string containing a palette of colors carefully designed to not only look nice on your page, but to also consider the type of data you are using (qualitative, diverging, and sequential) and its accessibility (color blindness, display/print, and grayscale). You can select and view the effects in real time, configure accessibility and data properties, and generate a color string in different formats (including JavaScript arrays and CSS):</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/e0680ce4-5cb7-45f8-992c-1ed4513ac502.png" style="width:45.67em;height:32.08em;" width="1038" height="730"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Using ColorBrewer to select and generate a small color-blind-safe palette</div>
<p>Let's try it out with a simple bar chart containing a single dataset listed in the code, as follows:</p>
<pre>&lt;body&gt;<br/>&lt;canvas id="canvas" width="200" height="100"&gt;&lt;/canvas&gt;<br/>&lt;script&gt;<br/>    const data = {<br/>        labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],<br/>        datasets: [<br/>            {<br/>                data: [10, 5, 2, 20, 30, 41],<br/>            }<br/>        ]<br/>    };<br/>    new Chart('canvas', { type: 'bar', data: data, <br/>                          options: {legend: {display: false}} });<br/>&lt;/script&gt;<br/>&lt;/body&gt;</pre>
<p class="mce-root"/>
<p>When you load the page, it should display a monochromatic bar chart, where all the bars share the same tone of gray.</p>
<p>Using the <em>ColorBrewer</em> site, choose a six-color palette, configure any properties you wish, and then copy the JavaScript array to your clipboard. Paste it as the <kbd>backGroundColor</kbd> property for the dataset:</p>
<pre>datasets: [{<br/>   data: [10, 5, 2, 20, 30, 41],<br/>   backgroundColor:['#d73027','#fc8d59','#fee090','#e0f3f8','#91bfdb','#4575b4']<br/>}]</pre>
<p>Then load your chart and see the result. It should be similar to the following bar chart. The full code is in <kbd>Colors/colors-1-brewer.html</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/ebed7c63-3e10-495e-864b-fd6e887e5dea.png" width="781" height="398"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Chart using colors from a ColorBrewer six-color diverging palette. Code: <em>Colors/colors-1-brewer.html.</em></div>
<p>The <em>ColorBrewer</em> palettes are limited to nine colors (or even fewer, depending on the settings you choose). If you need more colors, you can choose them from <em>Paul Tol's schemes page</em>, which is also very popular, or use other generators (there are many).</p>
<p class="mce-root"/>
<p>Another option is to use the Google <kbd>palette.js</kbd> library, which contains color palette-generating functions. It supports all schemes from ColorBrewer and <em>Paul Tol's color schemes page</em>, and includes additional generators for HSV, RGB, and Solarized schemes. To use it, you need to include the <kbd>palette.js</kbd> file on your page. You can download it from the GitHub site or use a CDN:</p>
<pre>&lt;script src="https://cdn.jsdelivr.net/npm/palette.min.js"&gt;&lt;/script&gt;</pre>
<p>Now you can generate palettes by calling one of the color scheme functions listed in the demo page located at <kbd>google.github.io/palette.js</kbd>, shown as follows:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/bbbd9882-3b6d-4ca6-9e70-0db6ad989fbd.png" width="849" height="507"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Page with a list of color schemes supported by the palette.js generator (see the full demo page at google.github.io/palette.js)</div>
<p>The demo page allows you to experiment with different schemes, check how many colors you can include in a palette, and simulate different levels of color blindness. The following code will generate a palette for our bar chart containing six colors from Paul Tol's qualitative color scheme:</p>
<pre>const colorsArray = palette('tol', 6);</pre>
<p class="mce-root"/>
<p>The colors array contains the hexadecimal codes of the colors, but Canvas (and Chart.js) will not show the colors unless there is a hash character before the number. The following code fixes this:</p>
<pre>const colorsArray = palette('tol', 6).map(n=&gt;'#'+n);</pre>
<p>Now just set the <kbd>backgroundColor</kbd> property as the colors array:</p>
<pre>backgroundColor: colorsArray</pre>
<p>The result is shown as follows. The code is in <kbd>Colors/colors-2-palettejs.html</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/b67e3af8-314b-4b52-9a35-52c585cf3421.png" width="845" height="432"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Chart using colors from a generated palette. Code: <em>Colors/colors-2-palettejs.html</em></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Gradients</h1>
                </header>
            
            <article>
                
<p>There is no native support in Chart.js for gradients, but they are fairly easy to generate with Canvas. The problem is that a gradient has an absolute position in a Canvas object, while your chart may be responsive. If the chart is resized, the gradient has to be recalculated and the chart updated.</p>
<p class="mce-root"/>
<p>One way to deal with this is to call a gradient function as soon as the chart is created and every time the window is resized, feeding the Canvas gradient function with the dimensions of the area where the gradient will be applied. We can do this with a callback and the Chart.js <kbd>update()</kbd> function.</p>
<p>A gradient in Canvas is created with the following function:</p>
<pre>canvasContext.createLinearGradient(x0, y0, x1, y1);</pre>
<p>The gradient contains the equation of a perpendicular line. To create a linear gradient that varies along the <em>y </em>axis, we need to draw the line from the bottom of the chart to the top. That means that <kbd>x0</kbd> = <kbd>x1</kbd> = <kbd>0</kbd>, <kbd>y1</kbd> is the bottom of the chart, and <kbd>y0</kbd> is the top. If we write a function that receives a chart instance, we can retrieve that information from <kbd>scales["y-axis-0"].top</kbd> and <kbd>scales["y-axis-0"].bottom</kbd>. Here is a function for drawing gradients for the background colors and a line chart with two datasets (<kbd>Colors/colors-3-gradient.html</kbd>):</p>
<pre>function drawGradient(chart) {<br/>     const x0 = 0;<br/>     const y0 = chart.scales["y-axis-0"].top;<br/>     const x1 = 0;<br/>     const y1 = chart.scales["y-axis-0"].bottom;<br/><br/>     const gradient1 = chart.ctx.createLinearGradient(x0, y0, x1, y1);<br/>     gradient1.addColorStop(0, 'hsla(60,100%,70%,.4)');<br/>     gradient1.addColorStop(1, 'hsla(0,100%,25%,.8)');<br/><br/>     const gradient2 = chart.ctx.createLinearGradient(x0, y0, x1, y1);<br/>     gradient2.addColorStop(0, 'hsla(300,100%,70%,.4)');<br/>     gradient2.addColorStop(1, 'hsla(240,100%,25%,.8)');<br/><br/>     chart.data.datasets[0].backgroundColor = gradient1;<br/>     chart.data.datasets[1].backgroundColor = gradient2;<br/> }</pre>
<p>You have to call that function as soon as the chart is created and then invoke <kbd>update()</kbd> to redraw the chart. After each resize, call it again. This can be done automatically using the <kbd>onComplete()</kbd> animation callback, as shown in the following code:</p>
<pre>const data = {<br/>    labels: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],<br/>    datasets: [<br/>        {<br/>            label: 'Week 1',<br/>            data: [2, 5, 2, 0, 20, 48, 51],<br/>            borderColor: 'red'<br/>        },{<br/>            label: 'Week 2',<br/>            data: [44, 36, 13, 40, 40, 9, 3],<br/>            borderColor: 'blue'<br/>        }<br/>    ]<br/>};<br/> <br/>const chart = new Chart('canvas', {<br/>    type: 'line',<br/>    data: data,<br/>    options: {<br/>        animation: {<br/>            onComplete: function(context) {<br/>               drawGradient(context.chart);<br/>            }<br/>        }<br/>    }<br/>});<br/>drawGradient(chart);<br/>chart.update();</pre>
<p>The final result is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/597d2447-ec50-41c1-9152-f741e920b687.png" width="1006" height="505"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Line chart using gradients as backgroundColor for each dataset. Code: <em>Colors/colors-3-gradient.html.</em></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Patterns</h1>
                </header>
            
            <article>
                
<p>Patterns are a great way to create charts that don't depend on color-coding, and they can be used in color or monochromatic devices or print media. And they are, of course, color-blind safe. You can create patterns using HTML Canvas commands somewhat similar to the ones used for gradients, but it's much easier to use a plugin, such as the Patternomaly plugin, listed in the Chart.js official documentation.</p>
<p>You can obtain Patternomaly by downloading the JavaScript library from its GitHub repository (<a href="http://github.com/ashiguruma/patternomaly">github.com/ashiguruma/patternomaly</a>) or by using a CDN link:</p>
<pre>&lt;script src="https://cdn.jsdelivr.net/npm/patternomaly@1.3.0/dist/patternomaly.min.js"&gt;<br/>&lt;/script&gt;</pre>
<p>To generate a pattern, all you have to do is choose a color and call <kbd>pattern.generate()</kbd>, which will randomly select 1 of the 21 patterns available:</p>
<pre>pattern.generate('rgb(50%,20%,10%');</pre>
<p>You can also choose a specific pattern as the first argument of <kbd>pattern.draw()</kbd>:</p>
<pre>pattern.draw('triangle', 'lightblue');</pre>
<p>A list of the supported patterns is shown as follows (<kbd>Colors/colors-4-patternomaly.html</kbd>):</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/9ecaa54d-2018-4ed4-8079-033dfb3f3e60.png" style="width:43.75em;height:29.00em;" width="909" height="603"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Patterns available in the patternomaly.js plugin. Code: <em>Colors/colors-4-patternomaly.html.</em></div>
<p>The <kbd>generate()</kbd> function also accepts an array of colors as an argument. You can include the palette obtained for the Color Brewer example and generate patterns based on them:</p>
<pre>let patternArray = ['#d73027','#fc8d59','#fee090','#e0f3f8','#91bfdb','#4575b4'];<br/>pattern.generate(patternArray);</pre>
<p>Let's use patterns to color our bar chart. For this example (<kbd>Colors/colors-5-pattern.html</kbd>), we will pass a call to the <kbd>pallete()</kbd> function from the <kbd>palette.js</kbd> library (which returns an array of colors) as the parameter for <kbd>generate()</kbd>, and assign it to the <kbd>backgroundColor</kbd> property for the bars:</p>
<pre>backgroundColor: pattern.generate( palette('tol', 6).map(n=&gt;'#'+n) ),</pre>
<p>The result is shown as follows:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/9425654e-25ad-4945-b8ea-5ed38dd58542.png" width="973" height="497"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">A color-blind-safe chart using generated patterns and colors. Code: <em>Colors/colors-5-pattern.html.</em></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Shadows and bevels</h1>
                </header>
            
            <article>
                
<p>There are several third-party plugins listed in the official Chart.js documentation, and one of them, called <kbd>chartjs-plugin-style</kbd>, adds a few styling options for charts; these options include bevels, shadows, and glows. To use it, you can install the plugin via <kbd>npm</kbd> or download the JavaScript file from <kbd>nagix.github.io/chartjs-plugin-style</kbd> that can be imported on to your page:</p>
<pre>&lt;script src="../JavaScript/chartjs-plugin-style.min.js"&gt;&lt;/script&gt;</pre>
<p>Now you can use new properties in your datasets to add bevels, shadows, and glows. The following example configures bevels and adds shadows to a simple bar chart. The names of the properties should be self-explanatory:</p>
<pre>const data = {<br/>    labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],<br/>    datasets: [<br/>        {<br/>            label: 'Week 1',<br/>            data: [20, 5, 2, 20, 30, 51],<br/>            backgroundColor: ['yellow','red','blue','green','orange', <br/>            'cyan'],<br/>            bevelWidth: 3,<br/>            bevelHighlightColor: 'rgba(255, 255, 255, 0.75)',<br/>            bevelShadowColor: 'rgba(0, 0, 0, 0.5)',<br/>            shadowOffsetX: 5,<br/>            shadowOffsetY: 5,<br/>            shadowBlur: 10,<br/>            shadowColor: 'rgba(0, 0, 0, 0.5)',<br/>        }<br/>    ]<br/>};<br/> <br/>new Chart('canvas', { type: 'bar', data: data,<br/>                      options: {legend: {display: false}} });</pre>
<p>The final result is shown next. You can also mix it with generated colors, palette functions, and patterns. Try it out with different types of charts! The code is in <kbd>Colors/colors-6-shadows.html</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/10df36f7-a8c6-40ba-bc70-1bd811a37e99.png" style="width:53.67em;height:27.83em;" width="1000" height="519"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">A bar chart enhanced with bevels and shadows. Code: <em>Colors/colors-6-shadows.html.</em></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding text elements and labels</h1>
                </header>
            
            <article>
                
<p>You can always add captions and titles outside your chart, using plain HTML or JavaScript. However, Chart.js also includes properties that draw and configure text elements inside the canvas as part of the chart. If the properties don't give you enough flexibility, you can use callbacks to filter or generate labels. If tooltips, titles, and legends aren't enough, you can also use plugins to add labels to bars, slices, and lines. You can even draw over the chart using plain HTML Canvas. This section will explore some of these techniques.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Legends and labels</h1>
                </header>
            
            <article>
                
<p>Legends are displayed by default in bar, line, pie and doughnut charts. They appear as a list of labeled, colored boxes that relate to the color of the lines, bars, or slices represented by a dataset, and they are rendered on the screen even when there is a single dataset. In such cases, you may wish to hide them. You can also tune several other properties and callbacks. The most important properties are listed as follows:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Property</strong></p>
</td>
<td>
<p><strong>Value</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>Display</kbd></p>
</td>
<td>
<p><kbd>true</kbd> or <kbd>false</kbd></p>
</td>
<td>
<p>Shows or hides the legend of the chart. The default is <kbd>true</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Position</kbd></p>
</td>
<td>
<p><kbd>'top'</kbd>, <kbd>'bottom'</kbd>, <kbd>'left'</kbd>, <kbd>'right'</kbd></p>
</td>
<td>
<p>Selects the position of the label in relation to the chart. The default is <kbd>'top'</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Reverse</kbd></p>
</td>
<td>
<p><kbd>true</kbd> or <kbd>false</kbd></p>
</td>
<td>
<p>Reverses the order of the labels in the legend. The default is <kbd>false</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Labels</kbd></p>
</td>
<td>
<p>Object</p>
</td>
<td>
<p>Configures the text and the colored box for each label.</p>
</td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref">Main properties of the legend object</div>
<p>There are also two callbacks you can attach to legends:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Property</strong></p>
</td>
<td>
<p><strong>Parameters</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>onClick</kbd></p>
</td>
<td>
<p>(event,label): the <kbd>label.text</kbd> property contains the text of the label; the <kbd>label.datasetIndex</kbd> contains the index of the array.</p>
</td>
<td>
<p>Reacts to a <kbd>'click'</kbd> event. The default implementation toggles the label and associated dataset on and off.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>onHover</kbd></p>
</td>
<td>
<p><span>(event,label): the </span><kbd>label.text</kbd><span> property contains the text of the label; the </span><kbd>label.datasetIndex</kbd><span> contains the index of the array.</span></p>
</td>
<td><span>Reacts to a </span><kbd>'hover'</kbd><span> event. This callback is not implemented by default.</span></td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref">Callbacks for the legends object</div>
<p>The following example contains a simple three-dataset line chart. Instead of hiding the dataset, the <kbd>onClick</kbd> callback for the legends was overridden to change the color of the selected dataset to gray. Note that the dataset index is obtained from the callback parameters, but the dataset properties are changed in the object tree for the current chart (<kbd>this.chart.data.datasets</kbd>):</p>
<pre>const data = [[12,19,3,5,2,3],[6,5,33,2,7,11],[2,3,5,16,0,1]],<br/>   strokes = ['rgba(54,162,235,1)','rgba(255,99,132,1)', <br/>              'rgba(132,255,99,1)'],<br/>   fills =  <br/>   ['rgba(54,162,235,.2)','rgba(255,99,132,.2)','rgba(132,200,99,.2)']; const grayFill = 'rgb(0,0,0,.2)';<br/>const grayStroke = 'rgb(0,0,0,.8)';<br/> <br/>const datasets = [];<br/>for(const i = 0; i &lt; data.length; i++) {<br/>     datasets.push({<br/>         label: 'Dataset ' + (i+1),<br/>         data: data[i],<br/>         backgroundColor: fills[i],<br/>         borderColor: strokes[i],<br/>         borderWidth: 1<br/>     });<br/> }<br/> <br/> const myChart = new Chart("myChart", {<br/>     type: 'line',<br/>     data: {<br/>         labels: ['Day 1','Day 2','Day 3','Day 4','Day 5','Day 6'],<br/>         datasets: datasets,<br/>     },<br/>     options: {<br/>         legend: {<br/>             position: 'left',<br/>             reverse: true,<br/>             onClick: function(event, label) {<br/>                 const index = label.datasetIndex;<br/>                 const dataset = this.chart.data.datasets[index];<br/>                 if(dataset.backgroundColor == fills[index]) {<br/>                     dataset.backgroundColor = grayFill;<br/>                     dataset.borderColor = grayStroke;<br/>                 } else {<br/>                     dataset.backgroundColor = fills[index];<br/>                     dataset.borderColor = strokes[index];<br/>                 }<br/>                 this.chart.update();<br/>             }<br/>         }<br/>     }<br/> })</pre>
<p>The following screenshots show the chart before and after clicking on a dataset. See the full code in <kbd>Text/text-1-legend-callback.html</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/2de4b741-68e9-4e8c-98d2-24daab945b03.png" width="1532" height="394"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Implementing an onClick callback to change the color of a dataset. Code: <em>Text/text-1-legend-callback.html.</em></div>
<p>The <kbd>legend.labels</kbd> property is used to configure the appearance of the individual legend labels. The following table shows the properties you are most likely to use:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Property</strong></p>
</td>
<td>
<p><strong>Value</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>fontSize</kbd>, <kbd>fontStyle</kbd>, <kbd>fontColor</kbd>, <kbd>fontFamily</kbd></p>
</td>
<td>
<p>Number and string</p>
</td>
<td>
<p>Font properties inherit global font.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>boxWidth</kbd></p>
</td>
<td>
<p>Number</p>
</td>
<td>
<p>The width of the colored box. The default is 40.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Padding</kbd></p>
</td>
<td>
<p>Number</p>
</td>
<td>
<p>The padding between rows of colored boxes.</p>
</td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref">Main properties of the legend.labels object</div>
<p>There is no property to set the color of the colored box. It will normally inherit from the global <kbd>defaultColor</kbd> if no colors are assigned to the datasets. You can change this behavior with the <kbd>generateLabels</kbd> callback property. You can also filter out unwanted labels by assigning a function to the filter <kbd>callback</kbd> property. These are listed as follows:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Property</strong></p>
</td>
<td>
<p><strong>Parameters</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>generateLabels</kbd></p>
</td>
<td>
<p><kbd>(chart)</kbd>: The current chart. This is the same as <kbd>this.chart</kbd>.</p>
</td>
<td>
<p>The default implementation returns the dataset label as text and a rectangular colored box that matches the dataset's colors.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>filter</kbd></p>
</td>
<td>
<p><kbd>(label, item)</kbd>: <kbd>label.text</kbd> contains the text of the label; <kbd>label.datasetIndex</kbd> contains the index of the array; <kbd>item.datasets</kbd> contains the dataset array; and <kbd>item.labels</kbd> contains the <em>x</em> axis labels or pie slice labels.</p>
</td>
<td>
<p>This contains a filtering function that returns <kbd>true</kbd> for labels that should be displayed. The default implementation returns <kbd>true</kbd>. This property only filters out labels, not datasets (the lines or slices will still be displayed).</p>
</td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref">Callback properties for the legend.labels object</div>
<p>Label styles can be configured inside the <kbd>options</kbd> object, in each chart instance, or for all charts using the <kbd>Global.defaults.legend</kbd> object, for example:</p>
<pre>    Chart.defaults.global.legend.labels.fontSize = 16;<br/>    Chart.defaults.global.legend.labels.boxWidth = 20;</pre>
<p>The following filter configuration will only show the labels for datasets that have a maximum value below <kbd>20</kbd>. All three datasets will be shown, but only two labels will be displayed (<kbd>Text/text-2-legend-label.html</kbd>):</p>
<pre>labels: {<br/>    filter: function(label, item) {<br/>      return Math.max(...item.datasets[label.datasetIndex].data) &lt;= 20;<br/>    }<br/>}</pre>
<p>The <kbd>generateLabels</kbd> callback should only be implemented if you want to create your own legend. If you have a very complex legend, you can generate an HTML legend implementing a callback function for the <kbd>Chart.defaults.global.legendCallback</kbd> property or in each chart using the <kbd>legendCallback</kbd> property in options. This will be explored in <a href="6a377615-9cab-4346-817a-cecda0a2d90c.xhtml" target="_blank">Chapter 7</a><em>,</em> <em>Advanced Chart.js</em>.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Titles</h1>
                </header>
            
            <article>
                
<p>The default in Chart.js is to have the title turned off, since you can also create your title with greater flexibility in HTML. If you still want to have a title in your chart, you need to set at least set two properties: <kbd>display</kbd> (with the value <kbd>true</kbd>) and <kbd>text</kbd> (with the text of your title). Other properties you might want to configure are listed as follows:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Property</strong></p>
</td>
<td>
<p><strong>Value</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>display</kbd></p>
</td>
<td>
<p><kbd>true</kbd> or <kbd>false</kbd></p>
</td>
<td>
<p>Displays the title. The default is <kbd>false</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>text</kbd></p>
</td>
<td>
<p><kbd>String</kbd> or <kbd>String[]</kbd></p>
</td>
<td>
<p>A string containing the text of the title or an array of strings, for a multi-line title.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>fontStyle,</kbd> <kbd>fontFamily</kbd>, <kbd>fontSize</kbd>, <kbd>fontColor</kbd></p>
</td>
<td>
<p><kbd>String</kbd> and <kbd>Number</kbd></p>
</td>
<td>
<p>Font attributes. The default <kbd>fontStyle</kbd> is bold, but the others are inherited.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>lineHeight</kbd></p>
</td>
<td>
<p><kbd>Number</kbd></p>
</td>
<td>
<p>The default line height is 1.2.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>padding</kbd></p>
</td>
<td>
<p><kbd>Number</kbd></p>
</td>
<td>
<p>The default padding is 10.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>position</kbd></p>
</td>
<td>
<p><kbd>'top'</kbd>, <kbd>'bottom'</kbd>, <kbd>'left'</kbd> or <kbd>'right'</kbd></p>
</td>
<td>
<p>This is where the title should be placed. The default is <kbd>'top'</kbd>. The titles' places on the sides will be rotated 90 degrees counterclockwise.</p>
</td>
</tr>
</tbody>
</table>
<p class="CDPAlignCenter CDPAlign"><sub>Main properties of the options.title object</sub></p>
<p>You can configure the title using <kbd>Chart.defaults.global.title</kbd> for all charts, or in the <kbd>options</kbd> object for a new chart instance. You can also change the title at any time after updating a chart or responding to events.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding labels to lines, bars, and slices</h1>
                </header>
            
            <article>
                
<p>In <a href="9c3dd8a3-6dde-42ba-9e93-ae1e2884cc57.xhtml">Chapter 4</a>, <em>Creating Charts</em>, we used a simple plugin to add labels to pie slices. In this section, we will show you two others that allow a lot more customization. They are listed in the official documentation for Chart.js but are developed by third parties and should be installed or downloaded from their own repositories.</p>
<p>The <kbd>chart-plugin-datalabels</kbd> plugin offers the highly customizable labeling of values in all types of charts, with support for scripting and event handling. You can see several samples in <kbd>chartjs-plugin-datalabels.netlify.com/samples/</kbd>, where there is also a link to the documentation and the GitHub repository. The easiest way install it is with a CDN. Include the following code in your page:</p>
<pre> &lt;script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"&gt;  <br/> &lt;/script&gt;</pre>
<p>Configurations can be made per dataset, per chart, or globally, using one of the three contexts as follows:</p>
<ul>
<li>In datasets: <kbd>dataset.datalabels.*</kbd></li>
<li>In a chart instance: <kbd>options.plugins.datalabels.*</kbd></li>
<li>Globally, for all charts: <kbd>Chart.defaults.global.plugins.datalabels.*</kbd></li>
</ul>
<p>The local settings override the global ones. Details are beyond the scope of this chapter, but the plugin is very well documented. The following is a simple example, using the line chart we used in the previous sections. All the configuration was done in the <kbd>options.plugins.datalabels</kbd> object, which adds nice labels inside rounded rectangles over the data points (see <kbd>Text/text-4-datalabels.html</kbd>):</p>
<pre>options: {<br/>    plugins: {<br/>        datalabels: {<br/>            backgroundColor: function(context) {<br/>                return context.dataset.borderColor;<br/>           },<br/>          borderRadius: 4,<br/>          color: 'white',<br/>          font: { weight: 'bold'},<br/>          formatter: Math.round<br/>     }<br/> },<br/>}</pre>
<p>The result is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/9a4a3283-094d-4652-aa5b-d9056ccd08c0.png" width="930" height="459"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Using the chartjs-datalabels plugin to add value labeling to a line chart. Code: The code is in <em>Text/text-4-datalabels.html.</em></div>
<p>There's a lot more that can be done with this plugin. Try it on other charts and check out the samples.</p>
<p>A second labeling plugin is <kbd>chart-plugin-outlabels</kbd><em>.</em> It allows for better visualization of the data values in pie and doughnut charts, displaying the labels outside the slices. You can see a sample in <kbd>piechart-outlabels.netlify.com/sample/</kbd>, where you will also find a link to the documentation and the GitHub repository. To use it on your page, include the following:</p>
<pre>&lt;script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-piechart-<br/> outlabels"&gt; &lt;/script&gt;</pre>
<p>As in many other plugins, configurations can be made per dataset, per chart, or globally, using one of the three contexts as follows:</p>
<ul>
<li>In datasets: <kbd>dataset.outlabels.*</kbd></li>
<li>In a chart instance: <kbd>options.plugins.outlabels.*</kbd></li>
<li>Globally, for all charts: <kbd>Chart.defaults.global.plugins.outlabels.*</kbd></li>
</ul>
<p>The plugin also introduces a new chart type: <kbd>outlabeledPie</kbd>. It can be used in place of <kbd>pie</kbd> or <kbd>doughnut</kbd> and is simpler to configure.</p>
<p>The following is a simple example of the doughnut chart we used in previous examples, using an <kbd>outlabeledPie</kbd> (see <kbd>Text/text-5-outlabels.html</kbd> for the full code):</p>
<pre> const data = {<br/>     labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],<br/>     datasets: [<br/>         {<br/>             label: 'Week 1',<br/>             data: [20, 5, 2, 20, 30, 51],<br/>             backgroundColor: palette('tol', 6).map(n=&gt;'#'+n),<br/>         }<br/>     ]<br/> };<br/> <br/> new Chart('canvas', {<br/>     type: 'outlabeledPie',<br/>     data: data,<br/>     options: {<br/>         zoomOutPercentage: 30,<br/>         plugins: {<br/>             legend: false,<br/>             outlabels: {<br/>                 text: '%l %p',<br/>                 color: 'white',<br/>                 stretch: 45,<br/>                 font: {<br/>                     resizable: true,<br/>                     minSize: 12,<br/>                     maxSize: 18<br/>                 }<br/>             }<br/>         }<br/>     }<br/> });</pre>
<p>The result is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/bba25ea9-854f-4161-9f5f-f58d68402450.png" style="width:35.42em;height:28.67em;" width="522" height="422"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">A pie chart with values labeled by the chartjs-outlabels plugin. Code: <em>Text/text-5-outlabels.html.</em></div>
<p>Check the documentation for more options, and try to use this plugin in other charts.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Interactions, data updates, and animations</h1>
                </header>
            
            <article>
                
<p>Unless configuration options are changed, all charts come pre-configured with default behaviors and transitions, which are animated. Animations are triggered by events, such as window resizing, data updates, or user interaction. The default pre-configured chart interactions include hovering the mouse over or near value points (used to trigger the appearance of tooltips containing details) and clicking or touching legends. This provides basic interactivity with smooth data transitions, but you may still want to fine-tune it by writing callbacks for different events or animation stages, changing animation properties such as duration or ease algorithms, or even turn the animations off completely. If you need more control, you can extend much of this functionality using plugins or standard JavaScript.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Data updates</h1>
                </header>
            
            <article>
                
<p>An interactive chart may display data that is changing periodically. A web page might contain an algorithm that changes data automatically; it may download new data files with new data, or it may allow the user to enter or request changes in the source-data values. In any of these cases, as soon as the new data is available, the chart should be updated. Data updates can occur automatically inside callback functions or can be explicitly called using the <kbd>update()</kbd> command. To use it, you will need to save a variable handle to the chart object:</p>
<pre>const chart = new Chart(…);<br/> // make changes<br/> chart.update();</pre>
<p>When using callbacks, you can usually refer to the current instance of the chart, using the <kbd>this</kbd> keyword:</p>
<pre>callback: function() {<br/>     // make changes<br/>     this.chart.update();<br/>}</pre>
<p>Changes usually involve properties in datasets and options of a chart instance. Let's see an example. In the following code, the <kbd>square()</kbd> function will square all the data values in a chart and change the <em>x</em> axis to a <em>logarithmic</em> scale. The <kbd>squareRoot()</kbd> function does the opposite. After updating the grid (with the undocumented <kbd>scaleMerge()</kbd> function), the chart is updated:</p>
<pre>function square(chart) {<br/>    const datasets = chart.config.data.datasets;<br/>    for(let i = 0; i &lt; datasets.length; i++) {<br/>        for(let j = 0; j &lt; datasets[i].data.length; j++) {<br/>            let value = datasets[i].data[j];<br/>            datasets[i].data[j] = value * value;<br/>        }<br/>    }<br/>    chart.options.scales.yAxes = <br/>        Chart.helpers.scaleMerge(Chart.defaults.scale, <br/>                                 {yAxes: [{type: 'logarithmic'}]}).yAxes; <br/>    chart.update();<br/>}<br/><br/>function squareRoot(chart) {<br/>    const datasets = chart.config.data.datasets;<br/>    for(let i = 0; i &lt; datasets.length; i++) {<br/>        for(let j = 0; j &lt; datasets[i].data.length; j++) {<br/>            let value = datasets[i].data[j];<br/>            datasets[i].data[j] = Math.sqrt(value);<br/>        }<br/>    }<br/>    chart.options.scales.yAxes = <br/>        Chart.helpers.scaleMerge(Chart.defaults.scale, <br/>                                 {yAxes: [{type: 'linear'}]}).yAxes; <br/>    chart.update();<br/>}</pre>
<p>The HTML button is registered as an event listener that calls one of the two functions, depending on the current <em>y</em> axis type, and updates the chart:</p>
<pre> let button = document.getElementById("toggle");<br/> button.addEventListener('click', function() {<br/>     const type = myChart.options.scales.yAxes[0].type;<br/>     if(type == 'linear') {<br/>         square(myChart);<br/>     } else {<br/>         squareRoot(myChart);<br/>     }<br/> });</pre>
<p>Try it out. The full code is in <kbd>Animation/animation-1-update.html</kbd>, and the following screenshots show the chart in the two different states:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/1842e841-245a-41d0-a652-316b2654e102.png" width="1627" height="427"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Updating a chart after changing values and scales. Code: <em>Animation/animation-1-update.html.</em></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Events</h1>
                </header>
            
            <article>
                
<p>You can select which events your chart will respond to by locally configuring the <kbd>options.events</kbd> property, or globally using <kbd>Chart.defaults.global.events</kbd>. The default configuration includes an array with six event names:</p>
<pre>events: ["mousemove", "mouseout", "click", "touchstart", "touchmove", "touchend"]</pre>
<p>These are the events the browser will listen to when the cursor is within the canvas context. They control the behavior of clickable items such as legend labels and tooltips. If you are writing your own handlers, you may wish to turn off some events by redefining the property to include an array containing fewer events. For example, if you want to disable hovering and touch events in a chart, allowing only the <kbd>click</kbd> event, you can add the following to your options configuration:</p>
<pre>options: {<br/>   events: ['click']<br/>}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Configuring animations</h1>
                </header>
            
            <article>
                
<p>You should have noted that when you click the button, the lines don't move to their new positions immediately. The chart transitions smoothly, and it takes about a second. Transitions triggered by calling <kbd>update()</kbd> will automatically use standard animation configurations.</p>
<p>There are two animation properties you can easily change. They are listed as follows:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Property</strong></p>
</td>
<td>
<p><strong>Values</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p>Duration</p>
</td>
<td>
<p><kbd>Number</kbd></p>
</td>
<td>
<p>The duration of the animation in milliseconds. The default is 1,000 (one second).</p>
</td>
</tr>
<tr>
<td>
<p>Easing</p>
</td>
<td>
<p><kbd>'linear'</kbd>, <kbd>'easeInQuad'</kbd>, <kbd>'easeOutQuad', 'easeInOutQuad'</kbd>, <kbd>'easeInCubic'</kbd>, <kbd>'easeOutCubic'</kbd>, <kbd>'easeInOutCubic'</kbd>, <kbd>'easeInQuart'</kbd>, <kbd>'easeOutQuart'</kbd>, <kbd>'easeInOutQuart'</kbd>, <kbd>'easeInQuint'</kbd>, <kbd>'easeOutQuint'</kbd>, <kbd>'easeInOutQuint'</kbd>, <kbd>'easeInSine'</kbd>, <kbd>'easeOutSine'</kbd>, <kbd>'easeInOutSine'</kbd>, <kbd>'easeInExpo'</kbd>, <kbd>'easeOutExpo'</kbd>, <kbd>'easeInOutExpo'</kbd>, <kbd>'easeInCirc'</kbd>, <kbd>'easeOutCirc'</kbd>, <kbd>'easeInOutCirc'</kbd>, <kbd>'easeInElastic'</kbd>, <kbd>'easeOutElastic'</kbd>, <kbd>'easeInOutElastic'</kbd>, <kbd>'easeInBack'</kbd>, <kbd>'easeOutBack'</kbd>, <kbd>'easeInOutBack'</kbd>, <kbd>'easeInBounce'</kbd>, <kbd>'easeOutBounce'</kbd>, <kbd>'easeInOutBounce'</kbd></p>
</td>
<td>
<p>The easing function to use for the animation. These are based on <em>Robert Penner's Easing Functions</em> (<a href="http://robertpenner.com/easing">robertpenner.com/easing</a>). They are easier to choose if you look at a graphical representation of each one, which is available at <a href="http://easings.net">http://easings.net</a>.</p>
</td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign packt_figref">Properties for the options.animation object</div>
<p>To make an instant transition to the new values (without any animations), you should include an object containing <kbd>duration:0</kbd>:</p>
<pre>options: {<br/>    animation: {<br/>        duration: 0<br/>    }<br/>}</pre>
<p>Now the change will happen instantly.</p>
<p>Properties can be configured per chart, in the options object, or globally in <kbd>Chart.defaults.global</kbd>.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>There are two <kbd>callback</kbd> properties for configuring animations, listed as follows. One allows you to hook on to each step of the animation, and the other allows you to run code after the animation is complete:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td style="width: 16.9421%">
<p><strong>Property</strong></p>
</td>
<td style="width: 49.0358%">
<p><strong>Parameters</strong></p>
</td>
<td style="width: 32.7824%">
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td style="width: 16.9421%">
<p><kbd>onProgress</kbd></p>
</td>
<td style="width: 49.0358%">
<p>(<kbd>animation</kbd>): The main properties are <kbd>animation.chart</kbd> (the current chart), <kbd>animation.currentStep</kbd>, and <kbd>animation.numSteps</kbd> (<kbd>currentStep</kbd>/<kbd>numSteps</kbd> returns a percentage of the animation so far)</p>
</td>
<td style="width: 32.7824%">
<p>Called after each step of an animation.</p>
</td>
</tr>
<tr>
<td style="width: 16.9421%">
<p><kbd>onComplete</kbd></p>
</td>
<td style="width: 49.0358%">
<p><span>(</span><kbd>animation</kbd><span>): The main properties are</span> <kbd>animation.chart</kbd><span> (the current chart), </span><kbd>animation.currentStep</kbd><span>, and </span><kbd>animation.numSteps</kbd><span> </span></p>
<p><span>(</span><kbd>currentStep</kbd><span>/</span><kbd>numSteps</kbd> <span>returns a</span> <span>percentage of the animation so far)</span></p>
</td>
<td style="width: 32.7824%"><span>Called at the end of an animation. Any changes to be applied after the chart is rendered (such as a Canvas overlay) should be called in this cont</span>ext.</td>
</tr>
</tbody>
</table>
<div class="packt_figref CDPAlignCenter CDPAlign">Callback properties for options.animation</div>
<p>We added an HTML progress bar to the web page of the previous example and configured the line chart animation to last five seconds in the following code. At each step, the progress bar is updated by the <kbd>onProgress</kbd> callback function. Each callback also prints the current step to the JavaScript console each time it is called:</p>
<pre>&lt;body&gt;<br/>&lt;canvas id="myChart" width="400" height="200"&gt;&lt;/canvas&gt;<br/>&lt;form&gt;&lt;button type="button" id="toggle"&gt;Square/Unsquare&lt;/button&gt;&lt;/form&gt;<br/>&lt;progress id="progress" max="1" value="0"&gt;&lt;/progress&gt;<br/>&lt;script&gt;<br/>    ...<br/>    const progress = document.getElementById("progress");<br/>    ...<br/>    const myChart = new Chart("myChart", { type: 'line', data: {…},<br/>        options: {<br/>           animation: {<br/>                 duration: 5000,<br/>                onProgress: function(animation) {<br/>                    console.log(animation.currentStep /  <br/>                                animation.numSteps);<br/>                    progress.value = animation.currentStep / <br/>                                     animation.numSteps;<br/>                },<br/>                onComplete: function(animation) {<br/>                    console.log(animation.currentStep);<br/>               }<br/>            }<br/>      }<br/>})<br/>    let button = document.getElementById("toggle");<br/>    button.addEventListener('click', function() {…});<br/>&lt;/script&gt;</pre>
<p>The full code is in <kbd>Animation/animation-2.html</kbd>. Here is a screenshot showing the animation halfway through:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/3c0745ed-f7b5-47e2-b9b1-f845be453449.png" width="930" height="459"/></p>
<div class="CDPAlignCenter CDPAlign packt_figref">Using a progress bar during a five-second animation, after updating the chart. Code: <em>Animation/animation-2.html.</em></div>
<p>In this example, the <kbd>onComplete</kbd> callback is simply printing to the console, but it is one of the most important callbacks if you need to update or change anything after the chart is rendered on the screen. If you draw something to a Canvas outside a callback, Chart.js will erase it. In <a href="9c3dd8a3-6dde-42ba-9e93-ae1e2884cc57.xhtml" target="_blank">Chapter 4</a>, <em>Creating Charts</em>, we used it to draw text, using the Canvas API over a doughnut chart. In this chapter, we added a gradient color to the chart, after every resizing event.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we explored several ways to configure the look and feel of interactive charts created with Chart.js, using native properties, as well as some extensions and plugins.</p>
<p>We first learned how to set global defaults, which can be inherited by multiple charts and used to set a consistent theme across different charts, sharing basic layout, fonts, and color schemes. We also explored some online services, tools, extensions, and plugins for styling charts and adding labels. Then we configured the behavior of a chart after updates and user interactions, tinkering with animation algorithms and callbacks.</p>
<p>You already know enough Chart.js to create any chart. In the next chapter, we will dive deeper into some of these topics, configure tooltips, learn how to program the Chart.js API, and you will learn how to create your own plugins.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">References</h1>
                </header>
            
            <article>
                
<p><strong>Books and websites</strong>:</p>
<ul>
<li>Chart.js official documentation and samples: <a href="https://www.chartjs.org/docs/latest/">https://www.chartjs.org/docs/latest/</a></li>
</ul>
<p><strong>Data sources</strong>:</p>
<ul>
<li>Volumes of the World’s Oceans (based on ETOPO1): <kbd>Chapter03/Pages/BarChart1.html</kbd> and others. <a href="https://www.ngdc.noaa.gov/mgg/global/etopo1_ocean_volumes.html">https://www.ngdc.noaa.gov/mgg/global/etopo1_ocean_volumes.html</a></li>
<li>World population: <kbd>Chapter04/WPP2017_UN.csv</kbd>. <em>United Nations World Population Prospects 2017</em>. <a href="https://www.un.org">https://www.un.org</a></li>
</ul>


            </article>

            
        </section>
    </div>



  </body></html>