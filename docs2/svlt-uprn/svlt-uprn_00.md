# 前言

你好，欢迎来到 *SvelteKit 入门*！这本书旨在成为一本易于阅读的指南，介绍你了解名为 SvelteKit 的清新简单 **JavaScript**（**JS**）框架的核心概念。它被写成了一本旨在突出我认为框架的核心概念的书。由于 JS 生态系统变化非常频繁，因此不应将本文视为 SvelteKit 的权威指南。相反，这本书背后的意图是提供一个资源，我希望在我学习这个有希望的新框架时就能得到。因为我经常发现自己先想学习高级概念，然后再转向更细致的细节，所以这本书也是如此。然而，在我们开始之前，我们必须先覆盖一些高级概念。

# 什么是 SvelteKit？

SvelteKit 是一个使用 Svelte 组件开发 Web 应用程序的一站式解决方案。如果你熟悉 React，那么你很可能听说过 **Create React App**。虽然 Svelte 和 React 都可以用来创建用 JS 构建的可重用组件，但每种方法在提供了利用这些组件的手段时更有用。

默认情况下，SvelteKit 提供了处理路由的机制；**服务器端渲染**（**SSR**）支持 TypeScript，并通过诸如 **热模块替换**（**HMR**）等特性丰富了开发体验，这些特性会在检测到应用程序中的更改时自动刷新浏览器。这个特性以及许多其他特性都是通过 SvelteKit 与 Vite 的紧密耦合实现的。

# Vite 如何简化开发？

没有 Vite，SvelteKit 以及像 HMR 这样的功能将无法实现，而 Vite 本身也离不开 **Rollup** 和 **esbuild**。Vite 通过提供一个利用现代网络浏览器中本地的 **ECMAScript 模块**（**ESM**）可用性的闪电般的开发服务器来将自己与其他打包工具区分开来。Vite 通过将应用程序代码分为两部分——依赖项和源代码来实现这一点。

## 依赖项

Vite 可以通过预先使用 esbuild 将每个项目依赖项打包成其自己的 ES 模块来提供一个快速的开发服务器。这些依赖项是 **CommonJS**、**通用模块定义**（**UMD**）还是 ESM 格式，对 Vite 来说无关紧要，因为它会在应用程序的初始构建中将它们全部转换为 ESM。这样做意味着浏览器只需为每个依赖项发出一个 HTTP 请求，而不是为每个导入语句发出请求。这可以大大提高开发服务器的性能，尤其是在考虑依赖项密集型应用程序中请求如何快速累积的情况下。

## 源代码

与依赖项不同，源代码在开发过程中经常发生变化。为了使源代码的开发者（你）保持满意，Vite 采用了一些巧妙的方法。由于现代浏览器支持原生的 ES 模块，Vite 可以将打包工作卸载到浏览器上，并且只需要在将其提供给浏览器之前将源代码转换成原生 ES 模块。适当的源代码只有在必要时才会被浏览器加载 – 也就是说，如果它在当前显示的屏幕上被使用。

为了避免每次源代码更改时重新打包整个应用程序的低效，Vite 支持热模块替换（HMR）。本质上，HMR 是只替换更改过的 ES 模块的做法。这保持了开发服务器的快速响应，无论应用程序是单页还是数千页。

到目前为止，我们已经讨论了 Vite 及其使用 esbuild 的方式，但 **Rollup** 是如何融入其中的呢？Vite 在构建过程中使用 Rollup – 也就是说，我们不是直接发送源代码，而是将我们的 Svelte 组件转换成纯 JavaScript，这使得浏览器可以轻松读取。Rollup 通过树摇（只包含模块中使用的部分）、代码拆分（将代码拆分成块）和懒加载（仅在需要时加载资源）等特性来管理项目中可能包含的数千个模块。这些特性的使用导致了更小、性能更好的网络应用程序。

# 这本书是为谁准备的？

*SvelteKit Up and Running* 旨在帮助那些希望通过学习下一个流行的基于 JS 的框架来提升技能的网页开发者。无论你是决定学习哪个 JS 框架，还是想通过在简历中添加另一种流行的技术来在求职者中脱颖而出，这本书都将帮助你获得开始成为 SvelteKit 大师旅程所需的所有基本知识。要最大限度地发挥这些资料的价值，需要具备 HTML、CSS、JS 和 Svelte 的工作知识。

# 这本书涵盖了哪些内容？

*第一章*，*初始设置和项目结构*，解释了如何安装新的 SvelteKit 项目并设置开发环境。它还涵盖了 SvelteKit 项目的逻辑结构以及组织源代码的最佳实践。

*第二章*，*配置和选项*，介绍了如何通过 SvelteKit 和 Vite 的配置选项来自定义应用程序。

*第三章*，*与现有标准的兼容性*，详细介绍了 SvelteKit 如何与现代网络标准（如 Fetch、FormData 和 URL 应用程序编程接口（APIs））协同工作。

*第四章*, *有效路由技术*，讨论了基本路由技术。这些技术对于创建从最简单的页面和 API 端点到动态 URL（随内容变化）的一切都是必不可少的。它还涵盖了如何使用布局为应用程序创建一个统一的用户界面。

*第五章*, *深入数据加载*，详细解释了如何通过使用 SvelteKit 的`load()`函数将数据加载到我们的页面和组件中。它还分解了在该函数中开发者可用的数据。

*第六章*, *表单和数据提交*，涵盖了开发者如何通过使用 HTML 表单元素从用户那里接收数据。从那里，它解释了如何使用操作来分割与表单相关的逻辑，以及如何增强这些表单以减少用户经常遇到的反感。

*第七章*, *高级路由技术*，讨论了 SvelteKit 路由机制中一些较少使用但更强大的功能的细节。它涵盖了开发者在路由中处理可选参数、处理具有未知数量参数的路由以及遇到冲突时路由的优先级。

*第八章*, *构建和适配器*，解释了开发者如何为不同的环境准备应用程序。它提供了示例，说明如何为部署到 Cloudflare Pages、Node.js 环境以及静态托管解决方案准备 SvelteKit 应用程序。

*第九章*, *钩子和错误处理*，涵盖了服务器钩子和共享钩子之间的区别，以及它们如何被用来操纵流入和流出应用程序的数据。此外，它还解释了开发者如何管理预期的错误以及如何处理那些从未预料到的错误。

*第十章*, *管理静态资源*，详细说明了如何最好地管理图像或全局 CSS 文件等资源。它解释了 Vite 在这一过程中的核心作用以及最佳实践。

*第十一章*, *模块与秘密*，讨论了本书其他部分未涉及的一些模块。它为您提供了 SvelteKit 附带的一些其他工具和功能的一般概述。它还涵盖了负责管理 API 密钥或数据库密码等秘密的模块。

*第十二章*, *增强可访问性和优化 SEO*，将展示如何使应用程序更容易对更广泛的受众开放。不仅将这些实践纳入应用程序可以使它们与屏幕阅读器等技术更兼容，而且还能提供增强搜索引擎提供商排名的额外好处。

*附录*: *示例和支持*，为您提供访问官方和非官方社区维护资源的途径。所提供的如何将其他前端技术集成到 SvelteKit 中的示例展示了这有多么简单，尤其是在利用社区项目来加快开发过程时。本节提供的资源对于解决问题和在 SvelteKit 社区中交朋友都非常有价值。

# 为了充分利用这本书

为了充分利用这本书并确保提供的信息被保留，建议您在阅读时与材料一起工作。在您的设备上键入命令和代码，但也请随意在过程中实验和玩弄代码。为了充分利用这本书，您需要具备 Svelte、JS、HTML 和 CSS 的工作知识，因为它专注于 SvelteKit。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| SvelteKit 1.16.3 或更高版本 | Windows、macOS 或 Linux |
| JS |  |
| HTML 和 CSS |  |

**如果您使用的是本书的数字版，我们建议您自己键入代码或从本书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将有助于您避免与代码的复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件：[`github.com/PacktPublishing/SvelteKit-Up-and-Running`](https://github.com/PacktPublishing/SvelteKit-Up-and-Running)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还提供我们丰富的图书和视频目录中的其他代码包，可在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 获取。查看它们！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图和图表的彩色 PDF 文件。您可以从这里下载：[`packt.link/1zRGE`](https://packt.link/1zRGE)。

# 使用约定

本书使用了多种文本约定。

`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。以下是一个示例：“在这个新版本中，我们仍然导入了 `bcrypt` 模块，但我们还添加了 `user.json` 的导入。”

代码块设置如下：

```js
import bcrypt from 'bcrypt';
export const actions = {
  login: async ({request}) => {
    const form = await request.formData();
    const hash = bcrypt.hashSync(form.get('password'), 10);
    console.log(hash);
    console.log(crypto.randomUUID());
  }
}
```

任何命令行输入或输出都按以下方式编写：

```js
npm install bcrypt
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词以**粗体**显示。以下是一个示例：“在 Firefox 中，您可以在**存储** | **会话存储**下找到它。”

小贴士或重要注意事项

它看起来像这样。

# 联系我们

我们读者的反馈始终受到欢迎。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误表**：尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在此书中发现错误，我们将不胜感激，如果您能向我们报告此错误。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

`copyright@packt.com` 并附有材料链接。

**如果您有兴趣成为作者**：如果您在某个主题上具有专业知识，并且您有兴趣撰写或为本书做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

读完 *SvelteKit Up and Running* 后，我们非常希望听到您的想法！请点击此处直接进入此书的亚马逊评论页面并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走？

您的电子书购买是否与您选择的设备不兼容？

别担心，现在，您每购买一本 Packt 书籍，都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠不止于此，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件。

按照以下简单步骤获取优惠：

1.  扫描二维码或访问以下链接

![](img/QR_Code.jpg)

[`packt.link/free-ebook/9781804615485`](https://packt.link/free-ebook/9781804615485)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他优惠发送到您的电子邮件。

# 第一部分 – SvelteKit 入门

在这部分，我们将通过快速安装向您介绍 SvelteKit，然后是我们都喜欢和欣赏的标准“Hello, World!”示例，这将帮助您熟悉项目结构。然后，我们将探讨可用的各种配置选项，以进一步自定义 SvelteKit 应用程序。从那里，我们将探讨 SvelteKit 如何利用现有标准来提供一个小巧而强大的框架。

本部分包含以下章节：

+   *第一章*，*初始设置和项目结构*

+   *第二章*, *配置和选项*

+   *第三章*, *与现有标准的兼容性*
