# 前言

微服务是构建可扩展、健壮和适应性强应用的流行架构风格。它们允许开发者将复杂系统分解为更小、独立且松散耦合的服务，这些服务通过定义良好的接口进行通信。微服务使交付更快、测试更容易，并在选择每个服务的技术方面提供了更大的灵活性。

Node.js 是一个用于构建微服务的强大且多功能的平台。它提供了一个快速且轻量级的运行环境，丰富的库和框架集，以及一个充满活力和支持性的社区。Node.js 允许开发者使用 JavaScript 编写微服务，这是一种无处不在且表达力强的语言，可以在任何平台上运行。Node.js 还支持异步和事件驱动编程，这对于处理并发请求和构建响应式系统至关重要。

本书是使用 Node.js 构建微服务的全面指南。它涵盖了微服务架构的概念、原则和最佳实践，以及设计、开发、测试、部署和监控 Node.js 微服务的工具和技术。它还提供了使用 Node.js 构建的实战示例和真实世界微服务应用的案例研究。

# 本书面向的对象

本书旨在为有一定 Node.js 经验的开发者编写，他们想学习如何使用 Node.js 构建 microservice 应用程序。它假设您熟悉 Node.js 的基础知识，例如模块、回调、承诺和事件。它还假设您对 Web 开发有一定的了解，例如 HTTP、REST、JSON 和 HTML。然而，您不需要在这些主题中成为专家，因为本书将在需要时解释它们。

# 本书涵盖的内容

*第一章*，*介绍微服务*，将向您介绍微服务架构。您将探索微服务的各种优势以及一些挑战。最后，您将了解成功实施微服务所需具备的条件。

*第二章*，*探索微服务的核心原则*，将带您了解这种架构风格背后的核心原则和思维方式，以便学习如何在微服务中思考，从传统的单体思维模式转变过来。

*第三章*，*理解 Node.js 基础：构建块和关键概念*，将带您了解 Node.js 的基础知识，为您开发服务器端应用程序、命令行工具和其他基于 Node.js 运行时的 JavaScript 解决方案提供坚实的基础。

*第四章*, *利用 JavaScript 和 Node.js 生态系统进行微服务开发*，将教你使用 JavaScript 和 Node.js 生态系统在微服务开发中的重要性，以赋予开发者能力、推动创新、提供广泛资源并促进协作。

*第五章*, *了解 Node.js 中微服务的架构*，将向你介绍 Node.js 中微服务的架构。你将学习构建、部署和管理使用 Node.js 的微服务架构所需的基础组件和技术。你还将学习如何根据你的具体要求仔细选择和集成这些组件和工具。最后，你将了解在设计实现你的微服务架构基础设施时的一些重要考虑因素。

*第六章*, *在 Node.js 中设计微服务架构*，将展示如何通过将单体应用程序分解成更小、独立的微服务来设计 Node.js 中的微服务。设计微服务涉及在粒度和复杂性之间找到合适的平衡。精心规划和评估你的需求对于确保微服务在可扩展性、可维护性和敏捷性方面提供实际效益至关重要。

*第七章*, *在 Node.js 应用程序中集成微服务*，将教你如何在 Node.js 中集成微服务。你将学习如何在不同服务之间建立通信和协调，以创建一个统一且功能齐全的系统。最后，你将探讨你系统的具体要求、最适合你需求的通信模式，以及 Node.js 生态系统中的工具和库。

*第八章*, *在 Node.js 中调试微服务*，将探讨如何在 Node.js 中调试微服务，由于它们的分布式特性和与其他服务的交互，这被认为是一项具有挑战性的任务。你将学习如何使用系统性和方法性的方法，结合适当的工具和技术，来识别和解决服务内部发生的问题或错误。

*第九章*, *使用 Node.js 在微服务中进行数据库操作*，将带你了解在微服务中对数据库或数据存储系统执行的**创建、读取、更新、删除**（**CRUD**）操作，以在微服务中操作数据。你将了解基于你的微服务需求和合规标准的数据安全最佳实践。通过实施这些步骤，你可以在 Node.js 微服务中有效地操作数据，并确保与底层数据库或数据存储系统的适当交互。

*第十章*, *微服务中的 API 通信和数据合约*，将教会您如何为数据交换建立清晰的合约，并通过 API 定义服务在微服务通信中相互交互的接口。通过遵循探索的实践，您可以使用 API 在微服务之间建立有效的通信，从而实现架构中的解耦、可扩展性和灵活性，允许单个服务独立演进，同时保持无缝交互。

*第十一章*, *微服务中的缓存和异步消息传递*，将向您介绍在微服务架构中用于提高性能、可扩展性和解耦的两个重要技术：缓存和异步消息传递。您将了解如何将频繁访问的数据存储在缓存中，以及通过消息队列或通过异步消息的发布/订阅模式解耦服务，从而在微服务中实现松散耦合和可扩展性。

*第十二章*, *使用 Saga 模式、加密和安全措施确保数据安全*，将向您介绍在设计实现微服务时需要考虑的一些基本方面：Saga 模式、数据加密和安全措施。

*第十三章*, *在 Node.js 中监控微服务*，将向您介绍在 Node.js 中监控微服务的重要性，以维护其健康状态、识别性能问题、检测错误并确保整体系统可靠性。您将了解提供关于微服务行为和性能的定量数据的指标。您还将了解警报，它确保您能够及时收到微服务中关键问题或异常行为的通知。最后，您将探索一些可以帮助诊断和解决微服务中问题的跟踪和调试工具。

*第十四章*, *使用 Node.js 进行微服务登录*，将向您介绍微服务架构中的一个关键方面：日志记录，它有助于捕捉您 Node.js 服务中的重要信息和事件。通过在您的 Node.js 微服务中实施有效的日志记录实践，您可以提高调试效率。

*第十五章*, *解释微服务监控数据*，将向您展示如何通过分析指标、日志和其他监控信息来解释微服务中的监控数据，以深入了解您的 Node.js 微服务的健康、性能和行为。

*第十六章*，*使用 Node.js 分析微服务日志数据*，将探讨在微服务架构中解释日志，这涉及到分析由您的 Node.js 微服务生成的日志数据，以深入了解其行为、解决问题和监控其健康状态。

# 为了充分利用本书

您需要了解 Windows、Linux 或 macOS 等操作系统，以及 Node.js 的知识。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Node.js | Windows, macOS, 或 Linux |
| Visual Studio Code | Windows, macOS, 或 Linux |
| ECMAScript 11 |  |

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件，网址为 [`github.com/PacktPublishing/Building-Microservices-with-Node.js`](https://github.com/PacktPublishing/Building-Microservices-with-Node.js)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他丰富的图书和视频资源代码包，可在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 找到。去看看吧！

# 代码实战

本书代码实战视频可在 ([`packt.link/oBs87`](https://packt.link/oBs87)) 查看。

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。以下是一个示例：“`/debug/health` 端点负责提供微服务的健康状态。”

代码块设置如下：

```js
// Import required modules
const express = require('express');
const app = express();
// Debug endpoint to get the health status of the microservice
app.get('/debug/health', (req, res) => {
```

任何命令行输入或输出都按以下方式编写：

```js
npm install winston
```

**粗体**: 表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以 **粗体** 显示。以下是一个示例：“您可以从 **Monitors** 页面查看和管理您的监视器……”

小贴士或重要注意事项

看起来像这样。

# 联系我们

欢迎读者反馈。

`customercare@packtpub.com` 并在邮件主题中提及书名。

**勘误表**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将非常感激您向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

`copyright@packt.com` 并附上材料链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且有兴趣撰写或为本书做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《使用 Node.js 构建微服务》，我们非常乐意听到您的想法！请[点击此处直接进入此书的 Amazon 评论页面](https://packt.link/r/1-838-98593-X)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走吗？

您选择的设备是否与您的电子书购买不兼容？

不要担心，现在每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止于此，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件访问。

按照以下简单步骤获取这些好处：

1.  扫描二维码或访问以下链接

![](img/B14980_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781838985936`](https://packt.link/free-ebook/9781838985936)

1.  提交您的购买证明

1.  就这些！我们将直接将您的免费 PDF 和其他好处发送到您的电子邮件。

# 第一部分：理解微服务和 Node.js

在本部分中，您将了解微服务和 Node.js 的概述。我们将从理解微服务理论开始。然后，我们将探讨 Node.js 的环境及其核心原则。

本部分包含以下章节：

+   *第一章*，*介绍微服务*

+   *第二章*，*探索微服务核心原则*

+   *第三章*，*理解 Node.js 基础知识：构建块和关键概念*

+   *第四章*，*利用 JavaScript 和 Node.js 生态系统进行微服务开发*
