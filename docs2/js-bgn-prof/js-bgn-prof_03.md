

# 第三章：JavaScript 多值

基本数据类型在前一章中已经处理过了。现在是时候看看一个稍微复杂一点的主题：数组和对象。在前一章中，你看到了只包含单个值的变量。为了允许更复杂的编程，对象和数组可以包含多个值。

你可以将对象视为属性和方法的集合。属性可以被视为变量。它们可以是简单的数据结构，如数字和字符串，也可以是其他对象。方法执行操作；它们包含一定数量的代码行，当方法被调用时将执行这些代码行。我们将在本书的后面部分更详细地解释方法，并专注于属性。一个对象的例子可以是现实生活中的对象，例如，一只狗。它有属性，如名字、重量、颜色和品种。

我们还将讨论数组。数组是一种对象类型，它允许你存储多个值。它们有点像列表。所以，你可以有一个包含以下值的购物清单数组：苹果、鸡蛋和面包。这个列表将以单个变量的形式呈现，包含多个值。

在此过程中，我们将涵盖以下主题：

+   数组和它们的属性

+   数组方法

+   多维数组

+   JavaScript 中的对象

+   与对象和数组一起工作

让我们从数组开始。

注意：练习、项目和自我检查测验的答案可以在*附录*中找到。

# 数组和它们的属性

数组是值的列表。这些值可以是所有数据类型，一个数组甚至可以包含不同的数据类型。在单个变量中存储多个值通常非常有用；例如，学生名单、购物清单或测试分数。一旦你开始编写脚本，你会发现你需要经常编写数组；例如，当你想要跟踪所有用户输入时，或者当你想要向用户展示选项列表时。

## 创建数组

到现在为止，你可能已经相信数组很棒了，那么让我们看看我们如何创建它们。实际上，有正确和错误的方法来做这件事。这里都有。你认为哪个是正确的？

```js
arr1 = new Array("purple", "green", "yellow");
arr2 = ["black", "orange", "pink"]; 
```

如果你猜对了第二个选项，使用方括号，你是正确的。这是创建新数组的最佳和最可读的方式。另一方面，第一个选项可能会做意想不到的事情。看看这两行代码。你认为它们会做什么？

```js
arr3 = new Array(10);
arr4 = [10]; 
```

很可能，你在这里感觉到有些不对劲。它们并不都创建一个包含一个值`10`的数组。第二个，`arr4`，确实创建了。第一个选项创建了一个包含 10 个未定义值的数组。如果我们这样记录值：

```js
console.log(arr3);
console.log(arr4); 
```

这里是它记录的内容：

```js
[ <10 empty items> ]
[ 10 ] 
```

谢谢，JavaScript！这非常有帮助。所以，除非你需要这样做，请使用方括号！

如我之前提到的，我们可以有混合数组，数组可以存储任何类型的变量。数组的值不会被转换为单一的数据类型或类似的东西。JavaScript 简单地将所有变量及其数据类型和值存储在数组中：

```js
let arr = ["hi there", 5, true];
console.log(typeof arr[0]);
console.log(typeof arr[1]);
console.log(typeof arr[2]); 
```

这将在控制台输出：

```js
string
number
boolean 
```

我们在这里要讨论的最后一个数组有趣的事实是，如果你使用 `const` 定义数组会发生什么。你可以改变常量数组的值，但不能改变数组本身。以下是一段演示代码：

```js
const arr = ["hi there"];
arr[0] = "new value";
console.log(arr[0]);

arr = ["nope, now you are overwriting the array"]; 
```

数组第一个元素的新的值一切正常，但你不能为整个数组分配一个新的值。以下是它将输出的内容：

```js
new value
TypeError: Assignment to constant variable. 
```

## 访问元素

我们刚刚创建的这个漂亮的数组，如果我们能够访问其元素，将会变得更有力量。我们可以通过引用数组的索引来实现这一点。这是我们在创建数组时没有指定的事情，我们也不需要指定。JavaScript 会为数组的每个值分配一个索引。第一个值被分配为位置 0，第二个为 1，第三个为 2，以此类推。如果我们想根据其在数组中的位置调用一个特定的值，我们可以使用我们的数组名，在末尾添加方括号，并在方括号中放置我们想要访问的索引，如下所示：

```js
cars = ["Toyota", "Renault", "Volkswagen"];
console.log(cars[0]); 
```

这条日志语句将把 `Toyota` 写入控制台，因为我们调用了数组的第 0 个位置，它输出了列表中的第一个值。

```js
console.log(cars[1]); 
```

调用索引位置 1 给我们的是数组中的第二个元素，它是 `Renault`。这将记录到控制台。

```js
console.log(cars[2]); 
```

我们数组中的第三个元素索引为 2，所以这将记录 `Volkswagen`。你认为如果我们使用负索引或高于我们得到的值的索引会发生什么？

```js
console.log(cars[3]);
console.log(cars[-1]); 
```

我们没有为负数或不存在的索引分配值，所以当我们请求它时，其值是未定义的。因此，日志输出将是未定义的。JavaScript 由于这个原因不会抛出错误。

## 覆盖元素

数组中的元素可以被覆盖。这可以通过使用索引访问某个元素并分配新值来完成：

```js
cars[0] = "Tesla";
console.log(cars[0]); 
```

这条日志的输出是 `Tesla`，因为它覆盖了旧值 `Toyota`。如果我们输出整个数组：

```js
console.log(cars); 
```

它将输出以下内容：

```js
[ 'Tesla', 'Renault', 'Volkswagen' ] 
```

如果你尝试覆盖一个不存在的元素会发生什么？

```js
cars[3] = "Kia"; 
```

或者甚至是负索引？

```js
cars[-1] = "Fiat"; 
```

让我们看看当我们尝试将值写入控制台时会发生什么：

```js
console.log(cars[3]);
console.log(cars[-1]); 
```

然后，输出如下：

```js
Kia
Fiat 
```

哈哈！它们突然出现了。你可能想知道这是怎么回事？我们将在下一节中讨论这个问题。现在，只需记住，这不是向数组添加值的正确方法。当我们解释 *Array methods* 部分时，我们将讨论正确的方法。

## 内置长度属性

数组有一个非常有用的内置属性：长度。这将返回数组中的值的数量：

```js
colors = ["black", "orange", "pink"]
booleans = [true, false, false, true];
emptyArray = [];
console.log("Length of colors:", colors.length);
console.log("Length of booleans:", booleans.length);
console.log("Length of empty array:", emptyArray.length); 
```

第一次调用`console.log`返回`3`，表示颜色数组包含 3 个值。第二次调用返回`4`，最后一次调用返回一个长度为`0`的空数组：

```js
Length of colors: 3 
Length of booleans: 4 
Length of empty array: 0 
```

因此，请注意，长度比最大索引多 1，因为数组的索引从 0 开始，但在确定长度时，我们查看元素的数量，这里有四个独立的元素。这就是为什么长度为 4 时，最大索引是 3。因此，数组中最后一个元素的位置值将比元素总数少 1。

花点时间想想你如何使用长度来访问数组的最后一个元素：

```js
lastElement = colors[colors.length - 1]; 
```

你可以通过从长度中减去 1 来得到最高索引，因为你知道，数组是零索引的。所以，数组中最后一个元素的位置值将比元素总数少 1。

所以，这看起来可能很简单。记得我们在上一节中调用的不存在的索引位置吗？让我们看看这个例子会发生什么：

```js
numbers = [12, 24, 36];
numbers[5] = 48;
console.log(numbers.length); 
```

数组的长度只计算从 0 开始的整数，直到最高填充索引。如果序列中间有未设置值的元素，它们仍然会被计算。在这种情况下，长度变为 6。如果我们记录数组，我们可以看到原因：

```js
console.log("numbers", numbers); 
```

输出将如下所示：

```js
numbers [ 12, 24, 36, <2 empty items>, 48 ] 
```

因为我们已经在索引 5 处添加了一个元素，48，它也在索引位置 3 和 4 创建了包含空值的 2 个元素。现在，让我们看看数组方法，并找出正确添加到数组中的方法。

## 练习 3.1

1.  创建一个包含 3 个项目的数组作为你的购物清单：“牛奶”、“面包”和“苹果。”

1.  在控制台中检查你的列表长度。

1.  将“面包”更新为“香蕉。”

1.  将整个列表输出到控制台。

# 数组方法

我们刚刚看到了内置的 length 属性。我们还有一些内置的方法。方法是在某个对象上的函数。与属性不同，它们执行操作。我们将在*第六章*，*函数*中深入讨论函数。现在，你需要知道的是，你可以调用方法和函数，当你这样做时，函数内部指定的某些代码会被执行。

我们只是意外地看到我们可以使用新的索引添加元素。这不是正确的做法，因为它很容易出错，意外地覆盖某个值或跳过某个索引。正确的方法是使用特殊的方法来做这件事。同样，我们也可以删除数组中的元素并对数组中的元素进行排序。

## 添加和替换元素

我们可以使用`push()`方法添加元素：

```js
favoriteFruits = ["grapefruit", "orange", "lemon"];
favoriteFruits.push("tangerine"); 
```

值被添加到数组的末尾。`push`方法返回数组的新的长度，在这个例子中是 4。你可以将这个长度存储在一个变量中，如下所示：

```js
let lengthOfFavoriteFruits = favoriteFruits.push("lime"); 
```

值 5 被存储在`lengthOfFavoriteFruits`变量中。如果我们像这样记录我们的数组`favoriteFruits`：

```js
console.log(favoriteFruits); 
```

这是新的数组：

```js
[ 'grapefruit', 'orange', 'lemon', 'tangerine', 'lime' ] 
```

这很简单，对吧？但如果你想在某个索引处添加元素呢？你可以使用 `splice()` 方法。这个稍微有点难：

```js
let arrOfShapes = ["circle", "triangle", "rectangle", "pentagon"];
arrOfShapes.splice(2, 0, "square", "trapezoid");
console.log(arrOfShapes); 
```

之后，包含数组的输出如下：

```js
[
  'circle',
  'triangle',
  'square',
  'trapezoid',
  'rectangle',
  'pentagon'
] 
```

首先，让我们指出这个输出的不同布局。这可能会取决于你使用的解释器，但最终它将决定单行显示太长，并自动应用格式化使数组更易读。这不会改变数组的值；这只是相同值的另一种表示形式，如果它们在单行上显示的话。

如你所见，正方形和梯形被插入到索引 2 处。数组的其余部分向右移动。`splice()` 方法接受多个参数。第一个参数，在我们的例子中是 2，是我们想要开始插入的数组索引。第二个参数，在我们的例子中是 0，是从先前定义的起始索引开始删除的元素数量。这些第一个参数之后的参数，在我们的例子中是 `square` 和 `trapezoid`，是应该从起始索引开始插入的内容。

所以，如果我们说的是这个：

```js
arrOfShapes.splice(2, 2, "square", "trapezoid");
console.log(arrOfShapes); 
```

因此，如果我们替换了元素 `rectangle` 和 `pentagon` 并用 `square` 和 `trapezoid` 取代它们，结果如下：

```js
[ 'circle', 'triangle', 'square', 'trapezoid' ] 
```

如果你将第二个参数增加到比我们的数组更大的数字，它不会影响结果，因为 JavaScript 会一遇到没有值可以删除就停止。尝试以下代码：

```js
arrOfShapes.splice(2, 12, "square", "trapezoid");
console.log(arrOfShapes); 
```

这也会得到以下输出：

```js
[ 'circle', 'triangle', 'square', 'trapezoid' ] 
```

你也可以将另一个数组添加到你的数组中。这可以通过 `concat()` 方法完成。这样，你可以创建一个新的数组，它由两个数组的连接组成。第一个数组的元素将首先出现，然后是 `concat()` 参数的元素，它们将连接到末尾：

```js
let arr5 = [1, 2, 3];
let arr6 = [4, 5, 6];
let arr7 = arr5.concat(arr6);
console.log(arr7); 
```

这是输出：

```js
[ 1, 2, 3, 4, 5, 6 ] 
```

这个 `concat()` 方法还能做更多！我们可以用它来添加值。我们可以添加单个值，或者我们可以用逗号分隔多个值：

```js
let arr8 = arr7.concat(7, 8, 9);
console.log(arr8); 
```

数组的新值如下：

```js
[ 1, 2, 3, 4, 5, 6, 7, 8, 9 ] 
```

## 删除元素

删除数组中的元素有几种方法。移除最后一个元素使用 `pop()`：

```js
arr8.pop(); 
```

执行 `pop()` 后记录数组的结果如下：

```js
[ 1, 2, 3, 4,  5, 6, 7, 8 ] 
```

删除第一个元素可以使用 `shift()`。这会导致所有其他索引减少 1：

```js
arr8.shift(); 
```

新数组将是：

```js
[ 2, 3, 4, 5,  6, 7, 8 ] 
```

记得 `splice()` 吗？这是一个非常特殊的方法，因为我们也可以用它来删除值。我们指定从哪里开始删除的索引，然后是我们想要删除的元素数量。

```js
arr8.splice(1, 3); 
```

之后，数组的值如下：

```js
[ 2, 6, 7, 8 ] 
```

如你所见，从第二个位置索引开始的 3 个元素已被删除。值 3、4 和 5 都不见了。如果你不想改变后面的任何索引，你也可以使用 `delete` 操作符。这不是一个方法，但你可以用它来将数组中某个位置上的值改为 `undefined`：

```js
delete arr8[0]; 
```

数组随后变为：

```js
[ <1 empty item>, 6, 7, 8 ] 
```

这在需要依赖索引或长度的某些情况下很有用。例如，如果你正在保存用户输入，并且你想根据用户推送到数组的数组来确定用户输入的数量，删除会减少输入的数量，而这可能不是你想要的。

## 查找元素

如果你想检查一个值是否存在于数组中，你可以使用`find()`方法。`find()`方法中要放入的内容略有不同。实际上，它是一个函数。这个函数将在数组的每个元素上执行，直到找到匹配项，如果没有找到，则返回`undefined`。

不要担心现在这太难了；很快就会变得清晰。在下面的代码片段中，我们以两种不同的方式编写函数。它们实际上是在做同样的事情，只是第一个是检查元素是否等于 6，而第二个是检查元素是否等于 10：

```js
arr8 = [ 2, 6, 7, 8 ];
let findValue = arr8.find(function(e) { return e === 6});
let findValue2 = arr8.find(e => e === 10);
console.log(findValue, findValue2); 
```

日志语句将记录`6`和`undefined`，因为它可以找到匹配`6`的元素，但不能找到匹配`10`的元素。

函数可以接受某些输入。在这种情况下，它接受数组的元素作为输入。当数组的元素等于 6（`findValue`）或 10（`findValue2`）时，它返回该元素。在*第六章*，*函数*中，我们将更详细地介绍函数。这对于初学者来说是一大挑战，所以如果你现在还不清楚，可以稍后复习。

通常，你不仅想要找到元素，还想知道它在什么位置。这可以通过`indexOf()`方法实现。此方法返回找到值的索引。如果值在数组中多次出现，它将返回第一次出现的位置。如果找不到值，它将返回`-1`：

```js
arr8 = [ 2, 6, 7, 8 ];
let findIndex = arr8.indexOf(6);
let findIndex2 = arr8.indexOf(10);
console.log(findIndex, findIndex2); 
```

因此，第一个将返回 1，因为这是数组中 6 的索引位置。第二个将返回-1，因为数组中不包含 10。

如果你想要找到指定数字的下一个出现位置，你可以向`indexOf()`添加一个第二个参数，指定从哪个位置开始搜索：

```js
arr8 = [ 2, 6, 7, 8 ];
let findIndex3 = arr8.indexOf(6, 2); 
```

在这种情况下，`findIndex3`的值将是-1，因为从索引 2 开始找不到 6。

最后一次出现的位置也可以找到。这是通过`lastIndexOf()`方法实现的：

```js
let animals = ["dog", "horse", "cat", "platypus", "dog"];
let lastDog = animals.lastIndexOf("dog"); 
```

`lastDog`的值将是 4，因为这是数组中`dog`的最后一个出现位置。

## 排序

此外，还有一个用于排序数组的内置方法。它将数字从小到大排序，并将字符串按字母顺序排序。你可以在数组上调用`sort()`方法，数组的值顺序将变为排序顺序：

```js
let names = ["James", "Alicia", "Fatiha", "Maria", "Bert"];
names.sort(); 
```

排序后的`names`值如下：

```js
[ 'Alicia', 'Bert', 'Fatiha', 'James', 'Maria' ] 
```

如你所见，数组现在已按字母顺序排序。对于数字，它按升序排序，如下面的代码片段所示：

```js
let ages = [18, 72, 33, 56, 40];
ages.sort(); 
```

执行此`sort()`方法后，`ages`的值如下：

```js
[ 18, 33, 40, 56, 72 ] 
```

## 反转

可以通过在数组上调用内置方法`reverse()`来反转数组的元素。它将最后一个元素放在最前面，第一个元素放在最后。不管数组是否排序，它只是反转顺序。

反转之前`names`的值如下：

```js
[ 'Alicia', 'Bert', 'Fatiha', 'James', 'Maria' ] 
```

现在我们将调用`reverse()`方法：

```js
names.reverse(); 
```

新的顺序将是：

```js
[ 'Maria', 'James', 'Fatiha', 'Bert', 'Alicia' ] 
```

## 练习题 3.2

1.  创建一个空数组作为购物清单。

1.  将`Milk`、`Bread`和`Apples`添加到你的列表中。

1.  将`Bread`更新为`Bananas`和`Eggs`。

1.  从数组中移除最后一个元素并将其输出到控制台。

1.  按字母顺序排序列表。

1.  查找并输出`Milk`的索引值。

1.  在`Bananas`之后添加`Carrots`和`Lettuce`。

1.  创建一个包含`Juice`和`Pop`的新列表。

1.  将两个列表合并，将新列表两次添加到第一个列表的末尾。

1.  获取`Pop`的最后一个索引值并将其输出到控制台。

1.  你的最终列表应该看起来像这样：

    ```js
    ["Bananas", "Carrots", "Lettuce", "Eggs", "Milk", "Juice", "Pop", "Juice", "Pop"] 
    ```

# 多维数组

之前我们已经确定数组可以包含任何数据类型。这意味着数组也可以包含其他数组（反过来，也可以包含...其他数组！）。这被称为多维数组。听起来很复杂，但它只是数组的数组：列表的列表：

```js
let someValues1 = [1, 2, 3];
let someValues2 = [4, 5, 6];
let someValues3 = [7, 8, 9];
let arrOfArrays = [someValues1, someValues2, someValues3]; 
```

因此，我们可以创建一个包含已存在数组的数组。这被称为二维数组。我们可以这样写：

```js
let arrOfArrays2 = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]; 
```

如果你想访问内部数组的元素，你必须指定两次索引：

```js
let value1 = arrOfArrays[0][1]; 
```

这个语句将获取第一个数组，因为它有一个索引位置`0`。从这个第一个数组中，它将获取第二个值，因为它有一个索引位置`1`。然后它将这个值存储在`value1`中。这意味着`value1`的值将是 2。你能猜出下一个值是多少吗？

```js
let value2 = arrOfArrays[2][2]; 
```

它获取第三个数组，并从这个第三个数组中获取第三个值。因此，9 将被存储在`value2`中。而且它不会停止在这里；它可以深入很多层级。让我们通过创建一个包含我们的数组数组的数组来展示这一点。我们只是简单地将这个数组存储在另一个数组中三次：

```js
arrOfArraysOfArrays = [arrOfArrays, arrOfArrays, arrOfArrays]; 
```

这是数组在值方面的样子：

```js
[
  [ [ 1, 2, 3 ], [ 4, 5, 6 ], [ 7, 8, 9 ] ],
  [ [ 1, 2, 3 ], [ 4, 5, 6 ], [ 7, 8, 9 ] ],
  [ [ 1, 2, 3 ], [ 4, 5, 6 ], [ 7, 8, 9 ] ]
] 
```

让我们获取这个数组的中间元素，即属于第二个数组数组的值 5。这样做：

```js
let middleValue = arrOfArraysOfArrays[1][1][1]; 
```

第一步是获取数组的第二维数组，因此索引为 1。然后我们需要获取这个数组的第二维数组，这同样也是索引 1。现在我们达到了值的层级，我们需要第二个值，所以再次使用索引 1。这在很多情况下都很有用，例如，当你想处理矩阵时。

## 练习题 3.3

1.  创建一个包含三个值：1、2 和 3 的数组。

1.  将原始数组嵌套到新数组中三次。

1.  将数组中的一个值 2 输出到控制台。

# JavaScript 中的对象

现在是时候看看另一种可以包含多个值的复杂数据结构了：对象！对象非常有用，可以用来描述现实生活中的对象，以及更复杂的抽象概念，这可以让你的代码更加灵活。

暗中，你已经接触到了对象，因为数组是一种非常特殊类型的对象。数组是具有索引属性的对象。所有其他对象，以及我们在这里将要看到的对象，都是具有命名属性的对象。这意味着我们不会提供一个自动生成的索引号，而是会提供一个自定义的描述性名称。

从以下代码中我们可以看出，JavaScript 将数组定义为对象类型：

```js
let arr = [0, 1, 2];
console.log(typeof arr); 
```

上述代码的输出如下：

```js
Object 
```

对象与现实世界中的对象并不太相似。它们 **有** 属性，它们 **可以** 执行动作，方法。在这里，我们只处理属性。我们将在 **第七章**，**类** 中介绍方法，在看过函数之后。对象是将多个变量组合成一个的机会。这是通过大括号 `{` 和 `}` 来完成的。让我们看看这个狗的对象：

```js
let dog = { dogName: "JavaScript", 
            weight: 2.4, 
            color: "brown", 
            breed: "chihuahua", 
            age: 3, 
            burglarBiter: true 
          }; 
```

我们创建了一个变量 `dog`，并给它赋了一个对象作为值。我们可以通过看到 { 和 } 来识别这是一个对象。在大括号之间，我们看到一堆属性及其值。

如果你曾经想过某个东西是否应该是一个属性，只需在你的脑海中尝试以下模板句子：

**对象名** 有一个 **属性名**

例如，一只狗有一个名字，一只狗有一个颜色，一只狗有一个重量。对于布尔属性来说，情况略有不同，你可以使用 "is" 或 "is not" 而不是 "has"。

我们可以用非常类似的方式访问这个对象的属性，就像访问数组一样。这次，我们不是使用索引号，而是使用属性名来获取值：

```js
let dogColor1 = dog["color"]; 
```

还有另一种方法来做这件事。而不是使用方括号，属性名也可以通过中间的点添加到对象名中：

```js
let dogColor2 = dog.color; 
```

这可能看起来很熟悉。你还记得我们是如何使用内置属性 length 获取数组长度的吗？是的——同样的方式！属性和方法之间的区别是属性没有括号。

## 更新对象

我们可以更改对象的属性值。同样，这和数组类似，因为数组也是一个对象，但对于属性，我们有两种选择：

```js
dog["color"] = "blue";
dog.weight = 2.3; 
```

这已经改变了我们的吉娃娃 JavaScript 的属性。颜色更新为蓝色，并且由于新重量降低了 0.1，它失去了一点点重量。所以如果我们记录我们的狗：

```js
console.log(dog); 
```

我们将得到以下：

```js
{
  dogName: 'JavaScript',
  weight: 2.3,
  color: 'blue',
  breed: 'chihuahua',
  age: 3,
  burglarBiter: true
} 
```

有必要注意的是，如果我们更改我们属性之一的数据类型，例如：

```js
dog["age"] = "three"; 
```

这不是问题。JavaScript 只会将整个值和数据类型更改为新的情况。

另一个需要注意的元素是，我们现在使用字面字符串值来引用对象的属性，但我们也可以使用变量来实现这一点。所以，例如：

```js
let variable = "age";
console.log(dog[variable]); 
```

这仍然会输出`three`，因为我们刚刚将年龄的值更改为三。如果我们将变量的值更改为另一个狗属性，我们将访问另一个属性，如下所示：

```js
variable = "breed";
console.log(dog[variable]); 
```

这将打印`chihuahua`。当我们以这种方式更新值时，它与使用字面字符串访问的方式完全相同：

```js
dog[variable] = "dachshund";
console.log(dog["breed"]); 
```

因此，这将在控制台记录`dachshund`。

## 练习 3.4

1.  为一辆车创建一个新的`myCar`对象。添加一些属性，包括但不限于`make`和`model`，以及典型汽车或您汽车的值。您可以自由使用布尔值、字符串或数字。

1.  创建一个可以存储字符串值`color`的变量。这个包含字符串值`color`的变量现在可以用来引用`myCar`中的属性名称。然后，使用方括号符号中的变量来为`myCar`中的颜色属性分配新值。

1.  使用相同的变量并为其分配一个新的属性字符串值，例如`forSale`。再次使用方括号符号来为`forSale`属性分配新值，以表示汽车是否可供购买。

1.  将`make`和`model`的值输出到控制台。

1.  将`forSale`的值输出到控制台。

# 与对象和数组一起工作

当与对象和数组一起工作时，您会经常看到它们结合使用。在本章的最后部分，我们将处理对象和数组的组合，以及对象中的对象。

## 对象中的对象

假设我们想要有一个公司对象。这个公司将有一个地址。而地址本身也是一个对象。如果我们给公司一个地址，我们就是在使用对象中的对象：

```js
let company = { companyName: "Healthy Candy",
                activity: "food manufacturing",
                address: {
                  street: "2nd street",
                  number: "123",
                  zipcode: "33116",
                  city: "Miami",
                  state: "Florida"
                },
                yearOfEstablishment: 2021 
              }; 
```

如您所见，我们的公司对象有一个包含值的地址对象。如果需要，它可以非常深入地分层。

要访问或修改地址中的某个属性，我们可以使用两种方法：

```js
company.address.zipcode = "33117";
company["address"]["number"] = "100"; 
```

如您所见，这与数组非常相似。我们首先需要选择地址，然后对想要更改的属性执行相同操作以访问它。

## 对象中的数组

我们的公司可能有一系列活动而不是一个。我们可以简单地用数组替换之前的示例中的活动：

```js
company = { companyName: "Healthy Candy",
                activities: ["food manufacturing", 
"improving kids' health", "manufacturing toys"],
                address: {
                  street: "2nd street",
                  number: "123",
                  zipcode: "33116",
                  city: "Miami",
                  state: "Florida"
                },
                yearOfEstablishment: 2021 
              }; 
```

我们现在已经在公司对象中使用了数组。您可以直接在属性后面使用方括号来使用数组。检索单个值的方式非常相似。可以使用以下语句获取活动数组的第二个值：

```js
let activity = company.activities[1]; 
```

在这里，我们称我们感兴趣的为`company`，然后是相关的数组`activities`，以及我们正在数组中寻找的变量的索引位置，即`1`。

## 数组中的对象

很可能，我们的公司不是只有一个地址，而是一系列地址。我们可以通过创建地址对象数组来实现这一点。在这种情况下，我们将创建一个包含两个对象的数组：

```js
let addresses = [{
    street: "2nd street",
    number: "123",
    zipcode: "33116",
    city: "Miami",
    state: "Florida"
  },
  {
    street: "1st West avenue",
    number: "5",
    zipcode: "75001",
    city: "Addison",
    state: "Texas"
  }]; 
```

因此，数组可以通过方括号识别，对象可以通过花括号识别。第一个对象的街道名称可以通过以下语句获取：

```js
let streetName = addresses[0].street; 
```

在这里，我们用 `addresses` 来调用我们感兴趣的数组，根据我们在数组中寻找的对象的索引位置 `0`，然后是对象内的所需变量，即 `street`。这可能看起来很复杂，但你可能会注意到，这实际上只是反转了从上一节中获取对象内部数组变量的语法。练习从嵌套的数组和对象中调用变量直到你感到舒适是值得的！

## 在对象中的数组对象

只为了展示这可以像我们需要的那么多层次，我们将给我们的公司对象添加一个地址对象数组。所以，让我们将这个地址对象数组添加到我们的公司对象中。这样，我们的公司就有了一个地址数组：

```js
 company = { companyName: "Healthy Candy",
                    activities: [ "food manufacturing", 
"improving kids' health", 
"manufacturing toys"],
                    address: [{
                      street: "2nd street",
                      number: "123",
                      zipcode: "33116",
                      city: "Miami",
                      state: "Florida"
                    },
                    {
                      street: "1st West avenue",
                      number: "5",
                      zipcode: "75001",
                      city: "Addison",
                      state: "Texas"
                    }],
                    yearOfEstablishment: 2021 
                  }; 
```

要访问越来越嵌套的对象和数组中的元素，我们只需扩展你在前几节中看到的相同逻辑。要访问 Healthy Candy 的第一个地址的街道名称，我们可以使用以下代码：

```js
let streetName = company.address[0].street; 
```

如你所见，我们可以无限地堆叠对象和数组元素请求。

目前我们不会让它比这更复杂。每次你需要一个列表时，你都会使用数组。每次你想用具有描述性名称的属性表示某物时，最好使用对象。只需记住，对象的属性可以是任何类型。

## 练习题 3.5

1.  创建一个名为 `people` 的对象，其中包含一个名为 `friends` 的空数组。

1.  创建三个变量，每个变量包含一个对象，其中包含你一个朋友的姓氏、名字和 ID 值。

1.  将三个朋友添加到 `friend` 数组中。

1.  将其输出到控制台。

# 章节项目

## 操作数组

取以下数组：

```js
const theList = ['Laurence', 'Svekis', true, 35, null, undefined, {test: 'one', score: 55}, ['one', 'two']]; 
```

使用各种方法操作数组，例如 `pop()`、`push()`、`shift()` 和 `unshift()`，将其转换为以下形式：

```js
["FIRST", "Svekis", "MIDDLE", "hello World", "LAST"] 
```

你可以采取以下步骤，或者采用你自己的方法：

+   移除第一个和最后一个项目。

+   将 `FIRST` 添加到数组的开头。

+   将 `hello World` 分配给第四个项目值。

+   将 `MIDDLE` 分配给第三个索引值。

+   将 `LAST` 添加到数组的最后一个位置。

+   将其输出到控制台。

## 公司产品目录

在这个项目中，你将实现一个产品目录的数据结构并创建查询以检索数据。

1.  创建一个数组来存储商店商品的库存。

1.  创建三个项目，每个项目具有名称、型号、成本和数量属性。

1.  使用数组方法将所有三个对象添加到主数组中，然后将库存数组输出到控制台。

1.  访问您第三个项目的数量元素，并将其记录到控制台。通过在您的数据结构中添加和访问更多元素进行实验。

# 自我检查测验

1.  您可以使用`const`并在数组中更新值吗？

1.  数组中的哪个属性给出了数组中包含的项目数量？

1.  控制台中的输出是什么？

    ```js
    const myArr1 = [1,3,5,6,8,9,15];
    console.log(myArr1.indexOf(0));
    console.log(myArr1.indexOf(3)); 
    ```

1.  您如何将数组`myArr = [1,3,5,6,8,9,15]`中的第二个元素替换为值 4？

1.  控制台中的输出是什么？

    ```js
    const myArr2 = [];
    myArr2[10] = 'test'
    console.log(myArr2);
    console.log(myArr2[2]); 
    ```

1.  控制台中的输出是什么？

    ```js
    const myArr3 = [3,6,8,9,3,55,553,434];
    myArr3.sort();
    myArr3.length = 0;
    console.log(myArr3[0]); 
    ```

# 摘要

因此，在本章中，我们看到了数组和对象。数组是一系列值。这些可以是相同类型的值，也可以是不同类型的值。数组的每个元素都有一个索引。第一个元素的索引是 0。我们可以使用这个索引来访问数组的元素。我们也可以使用这个索引来更改和删除元素。

然后，我们了解到也可以有包含其他数组的数组；这些是多维数组。要访问多维数组的元素，您需要使用与嵌套数组数量相同的索引。

然后，我们介绍了对象，并了解到数组是一种特殊类型的对象。对象包含属性和方法。我们研究了对象的属性，并看到这些属性被赋予一个名称，并且可以使用这个名称来访问和修改。

我们通过查看数组如何包含对象以及对象如何包含数组和更多内容来结束本模块。这使得我们能够创建复杂的对象结构，这在设计现实生活中的应用程序中将非常有用。
