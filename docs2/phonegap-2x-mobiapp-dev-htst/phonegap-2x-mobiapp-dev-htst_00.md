# 前言

为移动设备开发应用可以使用许多不同的方法和语言。许多应用都是原生开发的；这意味着它们是用 Java、Objective C 或某些其他语言开发的，这些语言是设备可用的 SDK 原生理解的。虽然原生开发提供了最大的灵活性和性能，但当你想将应用从一个平台迁移到另一个平台时，问题就出现了：你几乎需要从头开始编写应用。然后，如果你想要迁移到另一个平台，同样的事情会发生。一定有更好的方法！

所有当前移动平台都支持*网络应用*这一概念。这些应用完全使用 HTML 和 JavaScript 编写。对于简单的应用，或者不需要与设备功能交互的应用，这完全可行。但是，一旦你需要访问文件系统、使用摄像头等，你就开始需要更多对设备的访问权限。

这就是 PhoneGap 的作用。PhoneGap（基于 Cordova）仅用足够的原生应用来让你的网络应用在设备上感觉更舒适。这个包装器对每个平台都不同，但以一致的方式公开了常见功能。这有助于你在多个平台上编写更少的代码。

由于 PhoneGap 将你的 HTML 和 JavaScript 包裹在原生壳中，你也获得了将你的应用提交到平台应用商店的能力——这是仅使用简单网络应用所无法做到的。然而，请记住，大多数应用商店希望你的应用看起来和感觉像原生应用，有些在应用的外观和感觉方面要求更为严格。此外，不要只是将托管在其他服务器上的现有网站包裹起来——许多应用商店会拒绝这类应用。你的应用需要有支持 UI 并与设备交互的本地 HTML 和 JavaScript。

这本书的作用在哪里。虽然我们使用 PhoneGap 作为壳和访问一些有趣设备功能的接口，但我们并不是简单地重复 PhoneGap 的文档。相反，这里有完整的应用；每个应用都旨在利用设备的一个或多个功能，是的，但也是完全功能性的应用。

本书有望向你展示如何使用 PhoneGap 制作有趣甚至令人兴奋的应用，这些应用也是跨平台的。虽然我们只关注 iOS 和 Android，但本书中的技术可以很容易地通过少量修改扩展到 BlackBerry、Windows Phone 和其他平台。

# 本书涵盖的内容

项目 1，*让我们本地化！*，通过一个简单的问答游戏介绍了 PhoneGap。我们还将通过将游戏提供为英语和西班牙语来了解应用本地化。我们还将了解本书余下部分将使用的简单框架。

项目 2, *让我们社交吧！*，帮助我们开发一个简单的社交应用，显示选定 Twitter 账户的动态。我们将介绍将插件安装到 PhoneGap 中，以便在需要访问 PhoneGap 不提供的原生功能时使用。

项目 3, *提高效率*，向我们介绍了一个应用，就像大多数应用一样，它需要与文件系统协同工作以实现持久数据存储。这是一个简单的记事本应用，将允许我们全面探索创建、重命名、复制和删除文件。

项目 4, *一起去旅行*，帮助我们构建一个记录用户在给定时间段内位置的应用。这需要访问设备的 GPS 功能。我们还需要使用 Google Maps。我们将在项目 3 中引入的文件管理基础上进行构建。

项目 5, *与你的应用对话*，帮助我们创建一个可以记录语音备忘录的应用，并允许用户随时播放它们。在这个过程中，我们将集成 PhoneGap 的音频捕获和播放 API。

项目 6, *说 Cheese！*，涵盖了如何以内存高效的方式显示缩略图，因为显示和捕获媒体在大多数应用中至关重要。我们还将与设备的相机和照片库进行交互。

项目 7, *去看电影！*，与项目 6 非常相似，但在这里我们处理的是视频。我们将介绍在 iOS 和 Android（每个都非常不同）上播放视频，并且我们还将负责录制视频。最后，我们将编写我们的第一个插件，从视频中提取缩略图以在应用中显示。

项目 8, *玩耍一下*，向我们介绍了一个使用 HTML5 画布来玩简单游戏的简单游戏，因为有很多应用做了一些重要的事情，有时我们只是想找点乐子。我们还将与设备的加速度计一起工作。

项目 9, *融入其中*，将一个之前开发的应用应用于原生组件，使其看起来和感觉更像原生应用，因为有时我们只是想融入其中。虽然这个项目专门针对 iOS，但你也可以将这些概念应用于其他平台。

项目 10, *扩展应用*，向我们介绍了检测平板电脑的概念，因为到目前为止，本书中的每个应用都是针对手机尺寸的设备定制的，但平板电脑也非常普遍。我们还将熟悉用于将我们的应用扩展到平板电脑尺寸的常见设计模式。

附录 A, *快速设计模式参考*，涵盖了移动应用中使用的某些常见设计模式。

附录 B, *安装 ShareKit 2.0*，涵盖了将 ShareKit 2.0 集成到项目中所需的所有步骤，因为有时将其与 iOS 集成可能会有些痛苦。

# 您需要本书的内容

要构建/运行本书提供的代码，需要以下软件（根据平台适当划分）：

|  | Windows | Linux | OS X |
| --- | --- | --- | --- |
| **针对 iOS 应用** |  |  |  |
| IDE |  |  | XCode 4.5+ |
| OS |  |  | OS X 10.7+ |
| SDK |  |  | iOS 5+ |
| **针对 Android 应用** |  |  |  |
| IDE | Eclipse 4.x Classic | Eclipse 4.x Classic | Eclipse 4.x Classic |
| OS | XP 或更新版本 | 支持 Eclipse 和 Android SDK 的任何现代发行版——Ubuntu、RHEL 等。 | OS X 10.6+（可能适用于较低版本） |
| Java | 1.6 或更高版本 | 1.6 或更高版本 | 1.6 或更高版本 |
| SDK | 版本 15+ | 版本 15+ | 版本 15+ |
| **针对所有平台** |  |  |  |
| Apache Cordova / PhoneGap | 2.2 | 2.2 | 2.2 |
| 插件 | 当前版本 | 当前版本 | 当前版本 |
| 版本控制* | Git（附录 B） | Git（附录 B） | Git（附录 B） |

* 仅用于在附录 B 中安装 ShareKit 2.0 插件。

以下网站可能对下载有用：

+   Xcode: [`developer.apple.com/xcode/`](https://developer.apple.com/xcode/)

+   iOS SDK: [`developer.apple.com/devcenter/ios/index.action`](https://developer.apple.com/devcenter/ios/index.action)

+   Eclipse: [`www.eclipse.org/downloads/packages/eclipse-classic-421/junosr1`](http://www.eclipse.org/downloads/packages/eclipse-classic-421/junosr1)

+   Android SDK: [`developer.android.com/sdk/index.html`](http://developer.android.com/sdk/index.html)

+   Apache Cordova/PhoneGap: [`phonegap.com/download`](http://phonegap.com/download)

+   插件: [`github.com/phonegap/phonegap-plugins`](https://github.com/phonegap/phonegap-plugins)

+   Git: [`git-scm.com/downloads`](http://git-scm.com/downloads)

# 本书面向的对象

本书面向任何有良好 HTML 和 JavaScript 开发感觉的开发者，但希望进入移动应用开发领域。开发者应知道如何编写 HTML，并对 JavaScript 有合理的理解。开发者还应熟悉设置开发环境，如 Eclipse 或 Xcode。

本书也面向任何寻求创建可以跨多个平台运行且修改有限的原生开发者。PhoneGap 是一个强大的工具，您可以用它构建一个可以在多个平台上运行的单一 HTML/JavaScript 代码库。

本书中的示例特别使用 PhoneGap 2.2。

# 规范

在本书中，您会发现几个标题频繁出现。

为了清楚地说明如何完成一个程序或任务，我们使用：

## 我们要构建什么？

本节解释您将要构建的内容。

## 它做什么？

本节解释项目将实现的内容。

## 它为什么很棒？

本节解释了为什么这个项目很酷、独特、令人兴奋和有趣。它描述了项目将带给您的优势。

## 我们将如何做？

本节解释了完成您的项目所需的主要任务。

+   任务 1

+   任务 2

+   任务 3

+   任务 4，等等

## 我需要准备什么来开始？

本节解释了项目的先决条件，例如需要下载的资源或库等。

## 任务 1

本节解释您将要执行的任务。

## 准备工作

本节解释了在开始任务之前您可能需要做的任何初步工作。

## 继续前进

本节列出了完成任务所需的步骤。

## 我们做了什么？

本节解释了上一节中执行的操作步骤是如何帮助我们完成任务的。

## 我还需要了解什么

本节中的额外信息与任务相关。

在这本书中，您还会找到许多不同风格的文本，以区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词如下所示："`addTranslation`方法向特定区域添加翻译。"

代码块如下设置：

```js
    self.addAnswer = function( theAnswer )
    {
        self.answers.push ( theAnswer );
        return self;
    }
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
<div class="navigationBar">
  <div id="gameView_title"></div>
 <button class="barButton backButton" id="gameView_backButton" style="left:10px"></button>
</div>
```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的单词，例如在菜单或对话框中，在文本中如下所示："文本左侧有一个**返回**按钮。"

### 注意

警告或重要提示将以这样的框显示。

### 小贴士

小技巧和窍门如下所示。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正能从中获得最大收益的标题非常重要。

要发送给我们一般性的反馈，只需发送电子邮件到 `<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，您已经成为 Packt 书籍的骄傲所有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从您在[`www.packtpub.com`](http://www.packtpub.com)购买的 Packt 书籍的账户中下载所有示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 勘误

尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以避免其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的勘误部分下的现有勘误列表中。您可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)选择您的标题来查看任何现有勘误。

## 盗版

互联网上版权材料的盗版是一个跨所有媒体持续存在的问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上遇到我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并附上疑似盗版材料的链接。

我们感谢您在保护我们作者以及为我们带来有价值内容方面的帮助。

## 问题

如果您在本书的任何方面遇到问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决。
