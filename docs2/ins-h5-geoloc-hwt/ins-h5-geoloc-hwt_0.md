# 前言

欢迎来到 *Instant HTML5 Geolocation How-to*。本指南将帮助你快速轻松地使任何 Web 应用能够感知用户的位置。你将学习如何映射用户的地理位置，与流行的地图平台集成，并随着时间的推移跟踪用户。在这个过程中，你将创建一个简单的应用程序，该应用程序生成一个包含你选择保存的路径和点的 KML 文件（这些文件可以随后导入到 Google Maps 中）。

iPhone 改变了我们使用网络的方式。这是第一个将网页浏览作为主要功能的移动设备。突然之间，有了像 iPhone 这样的手机和移动数据，网络可以随身携带，无论你走到哪里。通过 HTML5 和 API，Web 应用可以真正地具有上下文敏感性；它们可以知道你的位置，如果你希望它们这样做的话，并相应地做出反应。

地理位置 API 不是 HTML5 的一部分，而是一个 JavaScript API 标准。然而，它作为现代 Web 开发工具包的重要组成部分，与不断发展的 HTML5 规范并列存在。

# 本书涵盖的内容

*理解地理位置 API（简单）* 讨论了 JavaScript 地理位置 API 的工作原理，何时应该使用它，以及它在不同浏览器和不同设备上的实现方式。

*设置应用程序（简单）* 解释了如何配置和设置一个适合运行简单地理位置感知 Web 应用程序的示例应用程序布局。每个步骤都以一种帮助你理解你的数据将如何存储的方式解释，这样你就可以在你准备好时扩展你的应用程序。

*获取用户的位置（中级）* 说明了如何检测用户 Web 浏览器的地理位置支持，使用 API 获取用户的坐标，并处理可能发生的任何错误。

*使用 Google Maps API 显示用户的位置（中级）* 讨论了如何以前一节中获得的坐标以可视化的方式使用 Google Maps 显示。

*使用 KML 源显示用户的位置（中级）* 解释了如何从你在前一节中保存的坐标创建 KML 源，并通过将其导入 Google Maps 来测试它。KML 源由 Google Maps 和 Google Earth 等流行的地图应用以及专业的 GIS 软件支持。

*跟踪和更新用户的位置（中级）* 说明了如何使用简单的 Web 技术跟踪用户并显示其路径。有时，跟踪用户的活动很重要。在这里，我们将使用`watchPosition()`和`clearPosition()`来跟踪用户的位置随时间的变化，并更改前一节中创建的地图。

# 为本书所需的资源

你需要能够访问运行 Apache Web 服务器、MySQL 和 PHP 的服务器或计算机。你还需要一个文本编辑器，一个主要 Web 浏览器的最新版本，以及可选的，一个具有 GPS 支持的网络设备。

# 本书面向的对象

《*Instant HTML5 Geolocation How-to*》适合希望将地理位置技术集成到其应用程序中的网络开发者。您不需要了解任何关于地理位置软件或标准的信息；每个部分都旨在帮助您从开始到结束理解 API 的工作原理。然而，本书假设您对网络技术有一般了解，特别是 JavaScript 和 jQuery。

# 术语约定

在本书中，您将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词将如下所示：“在本节中，我们将专注于`index.php`和`callback.php`。”

代码块将如下设置：

```js
[<?php

$server = '';      // Enter your database server here
$username = '';      // Enter your database username here
$password = '';      // Enter your database password here
$database = '';     // Enter your database name here

// Connect to the database
```

**新术语**和**重要词汇**将以粗体显示。您在屏幕上看到的单词，例如在菜单或对话框中，将以如下方式显示：“在您的网络浏览器中查看源时，选择**文件** | **保存**。”

### 注意

警告或重要提示将以这样的框显示。

### 小贴士

小贴士和技巧将以如下方式显示。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正能从中获得最大收益的标题非常重要。

要发送一般性反馈，请简单地将电子邮件发送到`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果您需要一本书并且希望我们出版，请通过[www.packtpub.com](http://www.packtpub.com)上的**建议一个标题**表单或通过电子邮件发送到`<suggest@packtpub.com>`。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您已经是 Packt 图书的骄傲拥有者，我们有一些事情可以帮助您从购买中获得最大收益。

## 下载示例代码

您可以从您在[`www.PacktPub.com`](http://www.PacktPub.com)的账户下载您购买的所有 Packt 图书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.PacktPub.com/support`](http://www.PacktPub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 错误清单

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问 [`www.packtpub.com/support`](http://www.packtpub.com/support)，选择您的书籍，点击**勘误****提交****表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的勘误部分下的现有勘误列表中。您可以通过从 [`www.packtpub.com/support`](http://www.packtpub.com/support) 选择您的标题来查看任何现有勘误。

## 盗版

在互联网上对版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

如果您怀疑有盗版材料，请通过 `<copyright@packtpub.com>` 联系我们并提供链接。

我们感谢您在保护我们作者和我们提供有价值内容的能力方面的帮助。

## 问题

如果您在本书的任何方面遇到问题，可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决。
