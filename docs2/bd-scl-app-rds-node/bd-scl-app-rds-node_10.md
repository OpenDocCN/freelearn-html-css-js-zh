# 第十一章

# 前方的旅程

# 简介

“*发现可能的极限的唯一方法就是超越它们进入不可能的领域*。” —— 亚瑟·C·克拉克

在整本书中，我们学习了利用 Node.Js 和 Express.Js 为项目管理软件所需 API 的重要概念和方法。通过这个单一示例，我们为用户、项目、任务等设计了必要的 API。如果你遵循了章节并完成了自己的 API 版本，你应该有一个功能齐全的项目管理软件的后端。

有很多更多的事情可以做，但这些都无法仅凭一本书来涵盖。本章将尝试涵盖可以进一步做的事情，以及可以遵循的最佳实践。在执行所有这些时，你应该手头有相当不错的软件。

旅程才刚刚开始。

# 结构

在本章中，我们将讨论以下主题：

+   到目前为止的故事

+   下一步

+   保持领先

+   进一步阅读

+   总结

# 到目前为止的故事

回顾 Ryan Dahl 在 2009 年 JSConf 上的 Node.js 演示，我们开始学习 Node.js。从 Node.js 的基础知识和其与事件循环的美妙工作方式开始，我们学习了它可以用在哪里，并讨论了一些优缺点。

我们学习了在多个平台上安装 Node.js，并使用和未使用模块集群创建了基本的 HTTP 和 HTTPS 服务器。集群模块有助于利用机器的能力，并显著提高性能。

人们一直以通常的方式用 JavaScript 编写 Node.js 应用程序的代码，但后来微软在 2012 年发布了 TypeScript。由于其开源、跨平台，并且支持具有强大类型检查的对象编程，它通过检测错误和错误使开发者的生活变得更轻松。因此，开发者开始适应 TypeScript。

考虑到这一点，*第二章，“TypeScript 简介”*专注于涵盖 TypeScript 的基础知识。在安装必要的包之后，一个基本的应用程序和一些小示例帮助我们理解了语言的关键概念。

接下来，我们学习了 Express.js 及其如何轻松创建 API 端点。我们安装了 Express.js 的必要包，并熟悉了核心概念，包括其优缺点。

通过离散的示例理解 Express.js 中的 Node.js 应用程序是可行的，但开发一个统一的应用程序可以更深入地了解应用程序规划、设计和执行。因此，我们开始编写一个应用程序来理解所有这些。在*第四章，规划应用程序*中，我们从规划应用程序——项目管理系统开始。我们设置了项目、必要的依赖项、目录结构，并创建了所需的数据库表以及路由框架。

我们打下了基础，以便我们可以开始构建 API，这是一个项目管理软件所必需的。

对于任何企业应用程序，无论是仅后端 API 还是全栈，访问管理都是一个必备的功能。这正是我们所做的——通过创建用户管理的 API，并在章节中添加了“*忘记密码*”功能。我们创建了一个基于令牌的认证系统，使用了`**jsonwebtoken**`包。

一旦我们将用户纳入系统中，我们就开始在*第六章，“项目与任务模块的 REST API”*中编写项目和任务模块。我们涵盖了项目实体和任务实体的基本 CRUD 操作，以及分配给用户。

*第七章，“API 缓存”*专注于对性能提升至关重要的缓存。我们实现了 Redis 进行数据缓存，并开发了 Cache Util 来管理 Redis 交互。

在以沟通为关键点的 Web 应用中，集成一个通知模块是必不可少的。我们不仅实现了这一功能，在*第八章，“通知模块”*中，还利用 Redis 队列来提高其效率。作为一个使用通知系统的例子，我们修改了代码，以便在创建新任务时自动向相关项目成员发送通知。

不必说单元测试的重要性，我们在*第九章，“测试 API”*中学习了单元测试的基础。在必要的配置之后，我们使用了 Mocha 框架和 Chai 来编写单元测试。

为了最后的润色，我们深入到*第十章，“构建和部署应用程序”*的关键方面，同时涵盖了代码混淆的显著概念。

到目前为止的旅程是对使用 Node.js 和 Express.js 构建强大应用程序的广泛探索，涵盖了从基础知识到更高级的主题，如缓存、单元测试和部署策略。这应该会为你提供创建、优化和部署高效、可扩展 Web 应用程序的技能和知识。

# 下一步

在这本书中，只能涵盖“*可能做到的*”一小部分内容。根据上下文，可以进一步开发。在本节中，我们将列出一些可以开发以进一步增强应用程序的功能。

正在讨论的点可以被视为——可以进一步添加的内容，以及如何做到最佳实践的要点。以下点不仅涵盖了可以增强应用程序的内容，还涵盖了使其可扩展和可维护的方法。

# 前端

项目管理软件通常是一个网络应用程序。桌面应用程序的时代已经过去。现在是协作、沟通以及最重要的是可用性的时代。一个网络应用程序可以在世界上的任何地方使用。它可以通过笔记本电脑或手机访问，这满足了需求。前端开发不在本书的范围内。然而，让我们讨论一下如何完成它的一些方面。

在撰写本书时，有许多流行的框架——React、Angular、Vue.js。所有这些都能够使其成为一个动态且响应式的用户界面。此外，Bootstrap 可以帮助实现统一和响应式的样式。

项目管理应用程序的用户界面可能包含以下页面：

+   **仪表板**：显示项目活动、分配任务的摘要、快速操作，如创建新任务、新项目等。所有项目、分配的项目、分配的任务的数量也可以以大数字的形式显示。

+   **项目**：所有分配的项目都可以列成表格。一些按钮可以执行一些操作，例如添加新项目、管理项目成员资格，也可以为项目经理角色显示。对于列表中的每个项目，用户应该能够打开所有问题的列表、未解决问题列表等。这些选项可以根据需要定制，以便为 QA 团队成员打开测试中的问题列表。

+   **用户**：管理员可以通过一个页面来管理用户。

+   **用户配置文件图标**：右上角的一个图标，打开用户配置文件页面，用户可以管理自己的配置文件，例如，姓名、时区设置、密码、通知设置等。

+   **报告**：对于项目经理来说，这可能是一个有用的页面来分析项目状态。

+   **服务器状态**：一个管理员页面，可以显示当前的 CPU、内存和存储状态。

根据项目需求和规模，可能会有更多。

# 报告

报告是项目管理应用程序的一个关键方面。它可能看起来像一项巨大的任务，但实际上实施并不困难。

分析我们寻求的报告类型很重要。一组简单的时序图，显示活跃和关闭问题的数量，以展示项目的进度，可能是有用的。在敏捷开发的情况下，以速度显示项目进度可能很重要。

可以显示每个阶段（待办事项、开发、测试和关闭）的问题数量饼图。关于已打开问题数与关闭问题数的报告也是一个衡量项目表现的好指标。

报告需要在前端和后端进行关键更改。在后台创建一个专门的模块来生成报告是明智的。一些报告可以通过调度器（例如，每天午夜生成报告）生成，以持久化存储，以避免对每个请求进行重复处理。一些报告将是按需和实时的。报告模块的抽象将提供清晰的实现。

需要一个数据可视化库来生成带有图表的报告。开源库如`**D3.js**`、`**Chart.js**`、`**Plotly**`、`**Vis**`等是不错的选择。如果成本不是问题，`**Highcharts**`和`**amCharts**`是可尝试的顶级工具之一。

# 应用机器学习

在 Web 应用程序中应用机器学习有很多机会。如果你跟踪用户流量，流量激增的检测可以在适当的时间采取适当的行动，有助于保持高可用性。

通过跟踪用户活动并应用机器学习，可以为用户提供定制化的用户界面，使其应用更加引人入胜。

跟踪用户活动还可以帮助分析哪些操作或哪些页面比其他页面访问得更多。后端操作，如缓存、数据库查询等，可以针对顶级操作进行优化。

可以预测项目完成日期或敏捷开发中的冲刺性能。有无数这样的应用可以实施。

# 服务器监控

随着流量的增长，资源使用量也会增长，跟踪服务器的 CPU、RAM 和存储，以及数据库和网络至关重要。有方法可以监控服务器。

+   **使用内置操作系统工具**：大多数操作系统，尤其是通常部署应用程序的服务器，提供用于监控资源如`**top**`、`**htop**`、`**vmstat**`等工具，适用于 Linux。

+   **应用程序内的独立模块**：应用程序可以被修改以创建一个模块，该模块定期跟踪并存储数据库中的资源使用情况。这些数据可以在前端显示，并可视化。可以创建一个单独的页面。此外，当资源使用量超过设定的阈值时，可以实施警报。例如，如果可用 RAM 为 16 GB，则可以将阈值设置为 12 GB。当 RAM 使用量超过 12 GB 时，可以向管理员发送通知警报，采取必要的行动。

+   **自定义脚本**：Python、Bash 或其他语言也可以用来编写脚本，这些脚本可以监控机器和服务器的外部资源使用情况，并将其与警报系统集成。

+   **其他工具**：Prometheus 配合 Grafana 可以用来查看服务器的实时统计数据。

根据部署，其他工具可能会有所帮助。对于云部署，有特定于云提供商的工具，例如 AWS Cloudwatch、Azure Monitor 和 Google Cloud 操作套件。

# 安全功能

目前，应用程序使用令牌系统为用户提供身份验证和授权。我们使用`**jsonwebtoken**`创建了`**access_token**`和`**refresh_token**`。前端可以为每个请求使用`**access_token**`，如果`**access_token**`过期，并且`**refresh_token**`可用，则可以使用它来生成新的`**access_token**`。

这可以通过其他授权类型和必要的`**OAuth2**`实现功能来改进。

# SSL/TLS 加密

应该提供必要的 SSL 支持。这意味着，如果我们需要使用类似于 HTTPS://的 URL 托管应用程序，这是可能的，尽管可以有一些策略来实现这一点。一种策略是使应用程序可配置，以便在 HTTPS 和 HTTP 之间进行选择。另一种策略是在前端使用`**nginx**`并使用认证机构（CA）的帮助下使用 SSL 证书。Let us Encrypt 是一个免费服务，并且被广泛认可。它易于设置，并为安全通信提供了必要的加密级别。

# 社交媒体登录

如果应用程序将要公开，那么实现通过社交媒体平台（如 Google、Facebook、Twitter 等）登录可能是个不错的选择，以提供无缝的用户注册和登录。

# 双因素认证

不时地，我们会看到来自基础设施不太安全的网站的密码和其他细节被黑客攻击。实施双因素认证（2FA）以增加额外的安全层变得必不可少。

# LDAP 集成

如果应用程序作为私有应用程序部署给一个组织，并且该组织已经部署了自己的 LDAP 服务器，那么创建一个与 LDAP 集成的应用程序用于用户管理将非常棒。它可以简化应用程序内的身份验证和授权过程。

# 基于容器的部署

有时，有必要将应用程序作为容器进行部署。使用 Docker 及其通过 Kubernetes 的帮助进行编排是可行的。它们一起提供了一个平滑且可扩展的部署。

要启用容器化部署，你需要创建：

+   **Dockerfile**：Docker 需要一个 Dockerfile 来指定基础镜像（运行应用程序所需的 Linux 版本和版本）、依赖项、变量、命令等。

+   `**docker-compose.yml**`：这是一个 YAML 文件，它定义了 Docker 容器在生产中的行为。这个文件与 Docker Compose 一起使用，Docker Compose 是一个用于运行多容器 Docker 应用程序的工具。使用此文件，我们还可以配置应用程序的服务。

+   **Kubernetes 配置**：我们需要编写部署、ConfigMaps 和其他文件的 Manifests 来配置 Kubernetes 以编排 Docker 容器。

通常，当需要这种专业知识时，组织内部会有专门的团队来完成这项工作。如果你愿意尝试，安装 Docker、编写简单的 Dockerfile 以及学习运行容器的基本命令是起点。

# Swagger UI

由于目前实施的应用程序提供了 API，因此提供 API 测试和文档非常重要。Swagger UI 提供了一个基于 Web 的用户界面，用户可以查看 API 端点，访问与每个端点关联的文档，并直接从浏览器中调用它。

Swagger UI 是由[`swagger.io`](https://swagger.io)提供的工具。它因其易用性、测试端点和访问文档的集中性、安全性以及实时准确性而受到欢迎。

这不是要向网站用户展示的内容，例如项目经理和成员，因为他们不需要了解底层端点。然而，对于开发人员和 QA 团队成员来说，这是一个必不可少的工具。

# 保持领先

在撰写本文时，有许多大型语言模型（LLMs）可用，例如 OpenAI 的 ChatGPT 和 Google 的 Gemini。这不再是传统的机器学习。这是一个生成式人工智能的时代。AI 不再只是预测一个值，例如房价，或将某物分类到类别中的工具。AI 还可以为我们生成内容。给定一个上下文，AI 可以立即提供一段文字、一页或一本书。AI 可以在代码中找到错误。令人印象深刻的是，它还可以编写代码。GitHub 的 co-pilot 能够提供与你的应用程序相关的即时代码片段。如果你愿意，AI 还可以教你一个主题。

考虑到所有这些，思考并记录下生成式 AI 如何帮助是非常重要的。以我们的主要示例项目管理系统为例，我们可以给出一个基本的想法，即我们试图管理什么，AI 可以帮助我们创建任务。如果我们向 AI 提供完整的软件需求规格说明书（SRS），它可以生成所有任务的详细信息。

生成式 AI 可以在以下关键领域（保持聚焦于 PMS）中使用：

+   **项目规划**：如果提供了输入目标，例如我们试图通过项目实现什么，资源数量、时间表和约束条件，GenAI 可以帮助制定全面的项目计划、冲刺或里程碑规划。

+   **风险评估**：如果项目状态不符合里程碑时间表，可以提供风险评估。

+   **资源分配**：如果要从资源池中选择资源，考虑到其他项目中资源的工作历史，可以为项目选择合适的资源做出决定。

+   **准备报告**：根据项目的当前状态，可以生成自动报告。

+   **任务优先级**：任务可以在项目开始时给予优先级，如果需要，可以根据项目状态进行更改。

+   **预测分析**：根据任务的复杂度、状态以及所处的阶段，可以预测下一个里程碑的完成日期。

+   **准备经验总结**：在项目结束时，可以准备一份经验总结列表，以避免下次犯错误。

+   **实时情感分析**：通常由开发者对任务进行评论。可以进行实时情感分析。

GenAI 可能有更多帮助的方式。

# 进一步阅读

本书涵盖了 Node.js、TypeScript、Express.js、Mocha、Chai、Redis 以及一些其他工具。一本涵盖众多方面的书只能触及基础知识到中等水平。为了进一步学习，这里有一些建议供您尝试。

# 高级 Node.js 开发

可以进一步学习诸如流、子进程、性能优化等高级主题。此外，使用装饰器和设计模式可以使代码整洁、几乎零缺陷且易于维护。

Node.js 也可以是需要重型、实时通信的应用程序的一个很好的选择。例如，Socket.io 和 websockets 等技术提供了必要的功能。

一种流行的架构是微服务。可以考虑进一步学习专注于微服务架构的资源。

# 全栈开发

浏览器只理解三件事——HTML、CSS 和 JavaScript。

由于底层语言 JavaScript 对于后端（例如 Node.js）和前端（例如 React、Angular、Vue 以及更多框架）都是相同的，因此成为一名全栈开发者变得相对容易。

在对 Node.js/TypeScript 有良好理解之后，熟悉 React 或 Angular 成为了一种常见的趋势，正如最近所见。

# 测试驱动开发

有许多书籍提供了使用测试驱动开发实施项目的指导。如果严格遵守 TDD 方法，将导致无 bug 的项目。这不仅允许你在早期阶段捕捉到 bug，还降低了开发和维护的成本。

在这种方法中，首先编写测试用例，然后编写代码以便测试通过。因此，编写涵盖所有可能输入的测试用例至关重要。

当你谈论 TDD 时，通常会有一种消极的心态。它主要关于编写测试用例所需的时间和学习。然而，当进行研究时，与没有 TDD 的项目相比，整体时间和成本要低得多。

# 性能调优

在生活中，你会有意识到应用程序中使用的查询比预期花费更多时间的时候。你尝试通过使用索引、增加 RAM 大小等方式优化数据库。然而，数据库管理和优化的内容远不止这些调整。

应用程序逻辑是进行优化的另一个地方。找到内存泄漏和占用 CPU 的逻辑至关重要。可怕的是，开发者往往在开发时忘记或没有注意优化。有时，压力测试也遵循相同的路径，因此它们没有涵盖代码的所有部分，因此一些问题仍未被发现。这些问题出现在生产实例中，那时，修复它们变得具有挑战性。

# 其他主题

除了上述主题之外，关于无服务器架构、DevOps 实践和 Node.js 中的函数式编程的资源也可以尝试。

AI/ML、数据分析与可视化库的集成是进入数据科学背景的关键。

另一个重要的方面是应用程序的安全性。尽管我们已经涵盖了 OAuth 和 JWT 等主题，但关于如何保护 Node.js 应用程序，还有更多可以学习的内容。

# 结语

当我们到达本书的结尾时，反思我们所走过的广阔领域是很重要的。从基础知识到构建具有身份验证、缓存和单元测试的 API，我们已经覆盖了大量的内容。

随着你进一步前进，你将见证 JavaScript 的力量，并意识到为什么它正在成为有史以来最受欢迎的语言。TypeScript 的引入通过提供类型安全和提高代码质量使其变得更加强大。

记住，网络开发的领域是不断变化的。技术不断发展。十年前，Java、Dot net 和 Python 是一切。今天，JavaScript 是最受欢迎的语言，对于许多开发者来说，它是不可或缺的。Stackoverlfow.com 在 2022 年的开发者调查中显示，67% 的开发者使用 JavaScript 进行工作。

随着你继续你的旅程，继续实验，继续创新，继续学习。最重要的是，保持你对编码、学习和尝试新事物的热情。毕竟，*旅程才刚刚开始*。
