- en: Chapter 5. Roles and Permissions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第5章。角色和权限
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Creating and configuring roles
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建和配置角色
- en: Assigning user roles
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分配用户角色
- en: Creating role-dependent portlet
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建基于角色的端口
- en: Checking permissions in a custom portlet
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在自定义小部件中检查权限
- en: Introduction
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: Just like employees of companies in the real world, users in the system can
    carry out different tasks. Some of them may deal with the management of the entire
    intranet—creating new organizations, locations, user groups, and sites; assigning
    users; and setting permissions. The others may be responsible for the configuration
    of specific sites and their pages, and managing portlets. There can also be a
    group of users who are responsible for creating and posting content. What is more,
    it is also possible that the same user can be an administrator of one of the sites,
    but at the same time, not be able to do anything except view the content of another.
    To enable the management of such a complex net of allowances, Liferay introduced
    the role functionality, which allows us to define what actions can be performed
    by which users in defined places.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 就像现实世界中的公司员工一样，系统中的用户可以执行不同的任务。其中一些人可能负责整个内联网的管理——创建新的组织、位置、用户组和站点；分配用户；以及设置权限。其他人可能负责特定站点及其页面的配置和管理小部件。也可能有一组用户负责创建和发布内容。更重要的是，同一个用户也可能同时是某个站点的管理员，但同时又无法执行除查看另一个站点内容之外的操作。为了能够管理这样一个复杂的权限网络，Liferay引入了角色功能，允许我们定义在定义的位置哪些用户可以执行哪些操作。
- en: 'A role is a collection of actions that can be performed by users assigned to
    that particular role. There are three types of roles defined at the portal level
    available in Liferay: regular roles, site roles, and organization roles. Regular
    roles define a list of actions that can be performed in areas (scopes) of the
    system specified in its definition. Using the regular role allows us to perform
    actions within one particular scope only. Site roles include actions performed
    within the site. Organization roles group actions that can be performed within
    an organization (for more information about organizations and sites, refer to
    [Chapter 3](part0030.xhtml#aid-SJGS1 "Chapter 3. Working with a Liferay User /
    User Group / Organization"), *Working with a Liferay User / User Group / Organization*,
    and [Chapter 4](part0037.xhtml#aid-1394Q1 "Chapter 4. Liferay Site Configuration"),
    *Liferay Site Configuration*).'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 角色是一组用户可以执行的动作集合。在Liferay门户级别定义了三种类型的角色可供使用：常规角色、站点角色和组织角色。常规角色定义了可以在其定义中指定的系统区域（范围）中执行的动作列表。使用常规角色允许我们在一个特定的范围内执行操作。站点角色包括在站点内执行的动作。组织角色将可以在组织内执行的动作分组（有关组织和个人站点的更多信息，请参阅[第3章](part0030.xhtml#aid-SJGS1
    "第3章。与Liferay用户/用户组/组织一起工作")，*与Liferay用户/用户组/组织一起工作*和[第4章](part0037.xhtml#aid-1394Q1
    "第4章。Liferay站点配置")，*Liferay站点配置*）。
- en: Creating and configuring roles
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建和配置角色
- en: Regardless of the type of the role with which we are dealing, the process of
    creating a new role consists of two steps—creating a new, empty role and defining
    a set of permissions for the role.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 无论我们处理的是哪种类型的角色，创建新角色的过程都包括两个步骤——创建一个新的空角色和为该角色定义一组权限。
- en: How to do it…
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: In this recipe, we will show you how to create a new regular site and organization
    roles and how to define a set of permissions for them.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们将向您展示如何创建新的常规站点和组织角色以及如何为它们定义一组权限。
- en: 'In order to create a new regular role, perform the following steps:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 为了创建一个新的常规角色，请执行以下步骤：
- en: Go to **Admin** | **Control Panel** | **Roles**.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往**管理** | **控制面板** | **角色**。
- en: Click on the **Add** button.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。
- en: Choose the **Regular Role**, **Site Role** or **Organization Role** option.![How
    to do it…](img/image00325.jpeg)
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**常规角色**、**站点角色**或**组织角色**选项。![如何操作…](img/image00325.jpeg)
- en: Provide **Name (Required)**, **Title**, and **Description** for the role.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为角色提供**名称（必需）**、**标题**和**描述**。
- en: Click on the **Save** button, and you will come back to a list containing all
    the roles defined.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮，您将返回包含所有定义角色的列表。
- en: Click on the **Actions** button next to the newly created role.
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击新创建的角色旁边的**操作**按钮。
- en: Choose the **Edit** action.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**编辑**操作。
- en: Click on the **Define Permissions** tab.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**定义权限**选项卡。
- en: Using the left column navigation menu, choose the categories (such as **Site
    Administration** | **Pages** | **Site Pages**) for which you want to define permissions.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用左侧列导航菜单，选择您想要定义权限的类别（例如**网站管理** | **页面** | **网站页面**）。
- en: For each chosen category, mark the checkboxes next to the permissions for which
    you'd like to add the role.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于每个选定的类别，勾选您想要添加角色的权限旁边的复选框。
- en: Note
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you already know what categories you are searching for, then you could use
    the **Search** text field to filter functionalities accordingly.
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您已经知道您正在寻找哪些类别，那么您可以使用**搜索**文本字段相应地过滤功能。
- en: '![How to do it…](img/image00326.jpeg)'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/image00326.jpeg)'
- en: Note
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: When setting regular role permissions for categories within the **Site Administration**
    group, you additionally need to choose the list of sites for which this role will
    be able to perform the action.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当为**网站管理**组内的类别设置普通角色权限时，您还需要选择此角色将能够执行操作的网站列表。
- en: Click on the **Save** button.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: How it works…
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: In the first part of the recipe, we showed you how to create a new empty role.
    In the second part, we described how to define permissions for this newly created
    role.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在菜谱的第一部分，我们向您展示了如何创建一个新的空角色。在第二部分，我们描述了如何为此新创建的角色定义权限。
- en: Role parameters
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 角色参数
- en: Each role has a name, title, and description. The description identifies the
    role in the system and consists of permissions. These permissions define what
    actions can be performed by users assigned to this role. Regular roles also have
    a list of users assigned to them.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 每个角色都有一个名称、标题和描述。描述标识系统中的角色，并包含权限。这些权限定义了分配给此角色的用户可以执行哪些操作。普通角色还有分配给它们的用户列表。
- en: The regular role may contain permissions for the **Control Panel**, **Site Administration**,
    and **My Account** functionalities. The organization role consists of the **Users
    and Organizations** and **Site Administration** permissions. Site roles may only
    define the **Site Administration** permissions.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 普通角色可能包含对**控制面板**、**网站管理**和**我的账户**功能的权限。组织角色包括**用户和组织**以及**网站管理**权限。网站角色只能定义**网站管理**权限。
- en: Control Panel, Site Administration, and My Account permissions
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 控制面板、网站管理和我的账户权限
- en: 'The majority of **Control Panel** category permissions are divided into two
    groups: **General Permissions** and **Resource Permissions**. For example, when
    configuring permissions for the **Users and Organizations** functionality, we
    can define what actions can be performed for all applications in this group—whether
    they can be viewed, accessed in the **Control Panel**, configured, whether users
    assigned to the role can perform user export action or set permissions for the
    **Users and Organizations** functionality, and so on. All these are general permissions.
    Additionally, for the **Users and Organizations** functionality, it is also possible
    to set **Resource Permissions**. This defines which actions users having this
    role can perform on users and organizations, for instance, whether they can delete,
    impersonate, update, or view users; add organizations; assign members; manage
    suborganizations using the **Users and Organization** section; and so on.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数**控制面板**类别权限分为两组：**常规权限**和**资源权限**。例如，当配置**用户和组织**功能的权限时，我们可以定义该组中所有应用程序可以执行哪些操作——它们是否可以查看、在**控制面板**中访问、配置，以及分配给角色的用户是否可以执行用户导出操作或为**用户和组织**功能设置权限等。所有这些都是常规权限。此外，对于**用户和组织**功能，还可以设置**资源权限**。这定义了具有此角色的用户可以对用户和组织执行哪些操作，例如，他们是否可以删除、模拟、更新或查看用户；添加组织；分配成员；使用**用户和组织**部分管理子组织等。
- en: '**The Site Administration** permissions, in most cases, are also divided into
    **General Permissions** and **Resource Permissions**. However, in addition, when
    defining the **Site Administration** permissions, we can decide for which sites
    users having this role may perform actions. For example, it is possible to set
    the regular role, which allows users to manage pages or add content only for chosen
    sites.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**网站管理**权限，在大多数情况下，也分为**常规权限**和**资源权限**。然而，在定义**网站管理**权限时，我们还可以决定具有此角色的用户可以在哪些网站上执行操作。例如，可以设置允许用户仅管理所选网站页面或添加内容的普通角色。'
- en: The **My Account** permissions are concerned with application actions only.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**我的账户**权限仅与应用程序操作相关。'
- en: There's more…
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容…
- en: It is also possible to manage a role using actions available in the **Roles**
    actions menu.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 还可以通过 **角色** 动作菜单中的操作来管理角色。
- en: 'There are several possible actions that can be performed on a role:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在一个角色上可以执行几个可能的行为：
- en: The **Edit** action allows us to change the **Name**, **Title**, and **Description**
    of the role, define permissions, and assign members for the role.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**编辑** 操作允许我们更改角色的 **名称**、**标题** 和 **描述**，定义权限并为角色分配成员。'
- en: The **Permissions** action allows us to set permissions for actions that can
    be performed on this role.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**权限** 操作允许我们为此角色上可以执行的操作设置权限。'
- en: The **Define** permissions action allows us to define permissions for the role.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定义** 权限操作允许我们为角色定义权限。'
- en: The **Assign Members** action allows us to assign the role for users. It is
    available for regular roles only.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分配成员** 操作允许我们为用户分配角色。此操作仅适用于常规角色。'
- en: The **View Users** action opens the list of all users having this particular
    role. It is available for regular roles only.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查看用户** 操作打开具有此特定角色的所有用户的列表。此操作仅适用于常规角色。'
- en: The **Delete** action allows us to delete a role. Out-of-the-box Liferay roles
    cannot be deleted.
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**删除** 操作允许我们删除角色。默认的 Liferay 角色无法删除。'
- en: 'In order to perform one of the preceding actions, follow these steps:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 为了执行上述操作之一，请按照以下步骤操作：
- en: Go to **Control Panel** | **Roles**.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往 **控制面板** | **角色**。
- en: Click on the **Actions** button located near the name of the role you want to
    modify:![There's more…](img/image00327.jpeg)
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击想要修改的角色的名称附近的位置的 **操作** 按钮：![还有更多…](img/image00327.jpeg)
- en: Click on the name of the chosen action.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击所选操作的名称。
- en: See also
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: 'For more information on organizations and sites, refer to the following recipes:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 有关组织和站点的更多信息，请参阅以下配方：
- en: '*Managing an organization structure* recipe in [Chapter 3](part0030.xhtml#aid-SJGS1
    "Chapter 3. Working with a Liferay User / User Group / Organization"), *Working
    with a Liferay User / User Group / Organization*'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*管理组织结构* 的配方在 [第 3 章](part0030.xhtml#aid-SJGS1 "第 3 章。与 Liferay 用户/用户组/组织协作")，*与
    Liferay 用户/用户组/组织协作*'
- en: '*Creating an organization and a standalone site* in [Chapter 4](part0037.xhtml#aid-1394Q1
    "Chapter 4. Liferay Site Configuration"), *Liferay Site Configuration*'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*创建组织和独立站点* 在 [第 4 章](part0037.xhtml#aid-1394Q1 "第 4 章。Liferay 站点配置")，*Liferay
    站点配置*'
- en: Assigning user roles
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分配用户角色
- en: In order to define what users can do, you need to assign roles for them. Each
    user can have multiple roles, including regular, site, and organization roles.
    Each role assigned to a user is available in the roles section of the user account.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 为了定义用户可以执行的操作，您需要为他们分配角色。每个用户可以有多个角色，包括常规、站点和组织角色。分配给用户的每个角色都可在用户账户的角色部分中找到。
- en: How to do it…
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: In this recipe, we will show you how to assign members to regular roles.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在本配方中，我们将向您展示如何为常规角色分配成员。
- en: 'In order to assign members for a regular role, follow these steps:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 为了为常规角色分配成员，请按照以下步骤操作：
- en: Go to **Admin** | **Control Panel** | **Roles**.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往 **管理员** | **控制面板** | **角色**。
- en: Click on the **Actions** button located near the name of the role to which you
    want to assign users.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击想要分配用户的角色的名称附近的位置的 **操作** 按钮。
- en: Click on the **Assign Members** action, and you will see a list of the current
    members of this role.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **分配成员** 操作，您将看到该角色的当前成员列表。
- en: Click on the **Available** tab:![How to do it…](img/image00328.jpeg)
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **可用** 选项卡：![如何操作…](img/image00328.jpeg)
- en: Choose the **Users**, **Sites**, **Organizations**, or **User Groups** tab.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **用户**、**站点**、**组织** 或 **用户组** 选项卡。
- en: Mark users, sites, organizations, or user groups to which you want to assign
    the role.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 标记您想要分配角色的用户、站点、组织或用户组。
- en: Click on the **Update Associations** button.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **更新关联** 按钮。
- en: How it works…
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Regular roles can be assigned to users or collections of users, such as **Organizations**,
    **Sites**, and **User Groups**. If the role is assigned to a user, this user gains
    all the permissions defined for this role. You can see the role by going to **Roles**
    | **Regular Roles** in the edit user form (to enter the edit user form go to **Users
    and Organizations** | **All Users** and click on the name of the user whose account
    you want to see). If a role is assigned to a collection of users, each member
    of that site, organization, or user group inherits this role. You can see this
    information by navigating to **Roles** | **Inherited Roles** in the edit user
    form.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 常规角色可以分配给用户或用户集合，例如 **组织**、**站点** 和 **用户组**。如果角色分配给用户，则该用户将获得为此角色定义的所有权限。您可以通过访问编辑用户表单中的
    **角色** | **常规角色** 来查看角色（要进入编辑用户表单，请转到 **用户和组织** | **所有用户** 并点击您想查看账户的用户名称）。如果角色分配给用户集合，则该站点、组织或用户组的每个成员都将继承此角色。您可以通过在编辑用户表单中导航到
    **角色** | **继承角色** 来查看此信息。
- en: '![How it works…](img/image00329.jpeg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理…](img/image00329.jpeg)'
- en: The **Roles** section in **Control Panel** allows us to assign users or a collection
    of users to **Regular Roles** only. **Organization Roles** can be assigned using
    the **Assign Organization Roles** action available in the **Organization** action
    menu. **Site Roles** can be assigned in the **Site Membership** section of **Site
    Administration**. It is important to remember that it is not possible to assign
    organization and site roles to collections of users.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '**控制面板** 中的 **角色** 部分允许我们仅将用户或用户集合分配给 **常规角色**。**组织角色** 可以通过 **组织** 动作菜单中可用的
    **分配组织角色** 动作进行分配。**站点角色** 可以在 **站点管理** 的 **站点成员资格** 部分进行分配。重要的是要记住，无法将组织角色和站点角色分配给用户集合。'
- en: See also
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: 'For more information on assigning organization roles and site roles, refer
    to the following recipes:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 有关分配组织角色和站点角色的更多信息，请参阅以下食谱：
- en: '*Managing an organization structure* in [Chapter 3](part0030.xhtml#aid-SJGS1
    "Chapter 3. Working with a Liferay User / User Group / Organization"), *Working
    with a Liferay User / User Group / Organization*'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*管理组织结构* 在 [第 3 章](part0030.xhtml#aid-SJGS1 "第 3 章。与 Liferay 用户 / 用户组 / 组织一起工作")，*与
    Liferay 用户 / 用户组 / 组织一起工作*'
- en: '*Creating an organization and a standalone site* in [Chapter 4](part0037.xhtml#aid-1394Q1
    "Chapter 4. Liferay Site Configuration"), *Liferay Site Configuration*'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*创建组织和独立站点* 在 [第 4 章](part0037.xhtml#aid-1394Q1 "第 4 章。Liferay 站点配置")，*Liferay
    站点配置*'
- en: Creating a role-dependent portlet
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建基于角色的端口
- en: Liferay provides two ways to check permissions. The first mechanism implements
    the **Java Portlet Specification 2.0** (**JSR 286**) and provides an XML definition
    to map a Liferay role and portlet role. The second mechanism uses the Liferay
    permission checker to verify users and the actions that they perform. In this
    recipe, we will show you how the Java Portlet Specification and Liferay work together.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay 提供了两种检查权限的方法。第一种机制实现了 **Java 端口规范 2.0** （**JSR 286**）并提供了一个 XML 定义来映射
    Liferay 角色和端口角色。第二种机制使用 Liferay 权限检查器来验证用户及其执行的操作。在本食谱中，我们将向您展示 Java 端口规范和 Liferay
    如何协同工作。
- en: Getting ready…
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作…
- en: Generate or create an empty portlet using the Maven archetype generator. We
    described it in [Chapter 1](part0015.xhtml#aid-E9OE1 "Chapter 1. Installation
    and Basic Configuration"), *Installation and Basic Configuration*. It is not important
    which `PortletBridge` will be used. We will decide to use a simple one called
    `MVCPortlet`.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Maven 架构生成器生成或创建一个空的端口。我们已在 [第 1 章](part0015.xhtml#aid-E9OE1 "第 1 章。安装和基本配置")
    中描述了它，*安装和基本配置*。使用哪个 `PortletBridge` 并不重要。我们将决定使用一个简单的名为 `MVCPortlet` 的端口。
- en: Let's assume that our goal is to write a greeting portlet that can recognize
    whether the current user is logged in as a user or a guest. In every situation,
    our portlet should display the greeting, **Welcome Guest!** or **Welcome User**.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们的目标是编写一个问候端口，它可以识别当前用户是否以用户或访客的身份登录。在任何情况下，我们的端口都应该显示问候语，**欢迎访客！** 或 **欢迎用户**。
- en: How to do it…
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Our concept is based on the approach that every kind of greeting will be in
    a different `JSP` file and that our controller will decide which `JSP` file should
    be used. Follow these steps:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的概念基于以下方法：每种问候都将位于不同的 `JSP` 文件中，并且我们的控制器将决定应该使用哪个 `JSP` 文件。请按照以下步骤操作：
- en: 'Open `portlet.xml`, which is located in the `src/main/webapp/WEB-INF` folder,
    and add `init` parameters to it:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开位于 `src/main/webapp/WEB-INF` 文件夹中的 `portlet.xml`，并向其中添加 `init` 参数：
- en: '[PRE0]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Create the `src/main/webapp/html` folder and add two files, `user.jsp` and
    `guest.jsp`. In each file, define the greeting. In the `guest.jsp` file, add the
    following content:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建`src/main/webapp/html`文件夹并添加两个文件，`user.jsp`和`guest.jsp`。在每个文件中定义问候语。在`guest.jsp`文件中添加以下内容：
- en: '[PRE1]'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'In the `user.jsp` file, add this line:'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在`user.jsp`文件中添加以下行：
- en: '[PRE2]'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Define roles in the `<security-role-ref>` tag in `portlet.xml`:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`portlet.xml`中的`<security-role-ref>`标签中定义角色：
- en: '[PRE3]'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Note
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: We have changed the default role names on purpose to show you that the previous
    roles are different from the Liferay ones.
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们故意更改了默认的角色名称，以便向您展示之前的角色与Liferay中的角色不同。
- en: 'Open `liferay-portlet.xml` and map portlet roles into Liferay roles as follows:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开`liferay-portlet.xml`并将端口角色映射到Liferay角色如下：
- en: '[PRE4]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Define the portlet render method as follows:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按如下方式定义端口的渲染方法：
- en: '[PRE5]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Compile and deploy the portlet.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编译并部署端口。
- en: Put our portlet on the welcome site and test it. Our greeting should be on the
    site depending on whether the user is authenticated or not.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将我们的端口放在欢迎页面上并测试它。我们的问候语应取决于用户是否已认证。
- en: How it works…
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Portlet specification JSR-286 defines a set of the methods of the `PortletRequest`
    interface. These methods allow us to check the user''s principal name or role:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 端口规范JSR-286定义了`PortletRequest`接口的一组方法。这些方法允许我们检查用户的主体名称或角色：
- en: '`getUserPrincipal`'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getUserPrincipal`'
- en: '`getRemoteUser`'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getRemoteUser`'
- en: '`isUserInRole`'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`isUserInRole`'
- en: The `getUserPrincipal` method returns the principal name of the current authenticated
    user and returns the `java.security.Principal` object. Similarly, `getRemoteUser`
    returns the name of the logged-in user. As a matter of fact, both methods return
    the same value, which is the `userId`, in the Liferay implementation. If a user
    is not authenticated, both methods return null. The third method expects a string
    parameter with the role name that is defined in `portlet.xml`. It checks the current
    user role and returns a `boolean` value.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '`getUserPrincipal`方法返回当前认证用户的主体名称，并返回`java.security.Principal`对象。同样，`getRemoteUser`返回已登录用户的名称。实际上，这两个方法在Liferay实现中返回相同的值，即`userId`。如果用户未认证，这两个方法都返回null。第三个方法期望一个字符串参数，该参数是`portlet.xml`中定义的角色名称。它检查当前用户角色并返回一个`boolean`值。'
- en: 'The JSR-286 specification determines that every `security-role-ref` definition
    should be mapping into the internal system roles depending on the portlet container
    implementation. This mapping can be specified in `web.xml` as a pair of tags:
    `role-name` and `role-link`. Here is an example:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: JSR-286规范确定每个`security-role-ref`定义都应该映射到端口容器实现内部系统角色。这种映射可以在`web.xml`中以`role-name`和`role-link`标签对的形式指定。以下是一个示例：
- en: '[PRE6]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Liferay specifies these mappings in `liferay-portlet.xml`.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay在`liferay-portlet.xml`中指定了这些映射。
- en: 'However, this approach has a limitation. JSR-286 documents contain the following
    sentence:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这种方法有一个限制。JSR-286文档包含以下句子：
- en: '*"The developer must be aware that the use of this default mechanism may limit
    the flexibility in changing role-names in the application without having to recompile
    the portlet making the call."*'
  id: totrans-109
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*"开发者必须意识到使用此默认机制可能会限制在无需重新编译调用端口的端口的情况下更改应用程序中角色名称的灵活性。"*'
- en: See also
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: 'If you want to learn how to create new portlets or hooks, refer to these recipes:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想了解如何创建新的端口或钩子，请参考以下食谱：
- en: '*Creating a custom portlet* in [Chapter 1](part0015.xhtml#aid-E9OE1 "Chapter 1. Installation
    and Basic Configuration"), *Installation and Basic Configuration*'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在[第1章](part0015.xhtml#aid-E9OE1 "第1章。安装和基本配置")中创建自定义端口*，*安装和基本配置*'
- en: '*The language properties hook* in [Chapter 11](part0080.xhtml#aid-2C9D01 "Chapter 11. Quick
    Tricks and Advanced Knowledge"), *Quick Tricks and Advanced Knowledge*'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在[第11章](part0080.xhtml#aid-2C9D01 "第11章。快速技巧和高级知识")中的语言属性钩子*，*快速技巧和高级知识*'
- en: '*Using Liferay Service Bus for communication between portlets* in [Chapter
    11](part0080.xhtml#aid-2C9D01 "Chapter 11. Quick Tricks and Advanced Knowledge"),
    *Quick Tricks and Advanced Knowledge*'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在[第11章](part0080.xhtml#aid-2C9D01 "第11章。快速技巧和高级知识")中*使用Liferay服务总线进行端口之间的通信，*快速技巧和高级知识*'
- en: Checking permissions in a custom portlet
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在自定义端口中检查权限
- en: Permissions in Liferay are very flexible but very complex to understand. In
    this recipe, we will show you only the basic use of permissions, but we hope this
    tutorial will be a start-up to implement more complex permissions. Let's assume
    that our goal is extending the previous portlet to display a secret message only
    for the users who have a specific permission. This permission should be configurable
    in the portlet permissions.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay的权限非常灵活，但理解起来非常复杂。在这个菜谱中，我们将向您展示权限的基本用法，但我们希望这个教程将是实现更复杂权限的起点。让我们假设我们的目标是扩展之前的端口，只为具有特定权限的用户显示秘密消息。这个权限应该在端口权限中可配置。
- en: Getting ready…
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作...
- en: We assume that you have a ready-to-use Maven portlet generated from Maven archetypes.
    In [Chapter 1](part0015.xhtml#aid-E9OE1 "Chapter 1. Installation and Basic Configuration"),
    *Installation and Basic Configuration*, we described how to achieve this.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设您已经有一个由Maven原型生成的可用的Maven端口。在[第1章](part0015.xhtml#aid-E9OE1 "第1章。安装和基本配置")中，*安装和基本配置*，我们描述了如何实现这一点。
- en: How to do it…
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'To achieve our goal, we have to define and add a specific permission to our
    portlet from the previous recipe. Next, we should register our list of permissions.
    At the end, we will use those permissions to display the secret area in our portlet.
    Perform these steps:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现我们的目标，我们必须定义并添加一个特定的权限到我们之前的端口。接下来，我们应该注册我们的权限列表。最后，我们将使用这些权限在我们的端口中显示秘密区域。执行以下步骤：
- en: Create the `src/main/resources/resource-actions` folder.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建`src/main/resources/resource-actions`文件夹。
- en: 'Create a file called `roles.xml` in the `resource-actions` folder with the
    following content:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`resource-actions`文件夹中创建一个名为`roles.xml`的文件，内容如下：
- en: '[PRE7]'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Create the `default.xml` file in the `resource-actions` folder with the following
    content:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`resource-actions`文件夹中创建名为`default.xml`的文件，内容如下：
- en: '[PRE8]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Create the `portlet.properties` file in the `src/main/resources` folder (if
    it doesn''t exist yet) and set the following property:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`src/main/resources`文件夹中创建名为`portlet.properties`的文件（如果尚不存在），并设置以下属性：
- en: '[PRE9]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Edit `liferay-portlet.xml` and add the following tag in the `<portlet>` section:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑`liferay-portlet.xml`并在`<portlet>`部分添加以下标签：
- en: '[PRE10]'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Compile and deploy the portlet.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编译并部署端口。
- en: Put the portlet on the layout and go to **Options** | **Configuration menu**.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将端口放置在布局中，然后转到**选项** | **配置菜单**。
- en: Set the `action.ADD_SECTION` permission for **Power User**.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为**Power User**设置`action.ADD_SECTION`权限。
- en: 'Go back to the Eclipse IDE. In the portlet render method, add the following
    code:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回到Eclipse IDE。在端口渲染方法中，添加以下代码：
- en: '[PRE11]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Tip
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: In our example, the render method is placed in the `com.packtpub.portlet.RolesPortlet`
    class.
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在我们的例子中，渲染方法位于`com.packtpub.portlet.RolesPortlet`类中。
- en: 'Create the `secret.jspf` file in the `src/main/webapp/html` folder with the
    following content:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`src/main/webapp/html`文件夹中创建名为`secret.jspf`的文件，内容如下：
- en: '[PRE12]'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Include this file in `guest.jsp` and `user.jsp`:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将此文件包含在`guest.jsp`和`user.jsp`中：
- en: '[PRE13]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Compile, deploy, and run your portlet.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编译、部署并运行您的端口。
- en: Note
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You have to also define `c.tld` in both JSP files and in `liferay-plugin-package.properties`.
    A ready-to-use portlet is included in this book.
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您还必须在JSP文件和`liferay-plugin-package.properties`文件中定义`c.tld`。本书中包含一个可用的端口。
- en: How it works…
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In general, Liferay divides permissions as `portlet-resources` and `model-resources`.
    Portlet resources are connected with the portlet and possible operations on the
    portlet itself (for instance, view, configuration). Model resources describe the
    possible permissions on the specific model (for instance, create, update, and
    delete). In this example, we showed only the `portlet-resources` definition, but
    `model-resources` is similar.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，Liferay将权限分为`portlet-resources`和`model-resources`。端口资源与端口及其本身可能进行的操作（例如，查看、配置）相关联。模型资源描述了特定模型上的可能权限（例如，创建、更新和删除）。在这个例子中，我们只展示了`portlet-resources`定义，但`model-resources`类似。
- en: 'Portlet resources and model resources should be defined in the XML file and
    put in the classpath. In this recipe, we created two files: `default.xml` and
    `roles.xml`. This is the typical notation that Liferay applies in the core implementation.
    The first file lists all the resources where permissions are defined. The second
    one defines real permissions. It is possible to have just one file including the
    content of `roles.xml`. Typical resource action mapping consists of:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 端口资源和模型资源应在 XML 文件中定义，并放在类路径中。在这个菜谱中，我们创建了两个文件：`default.xml` 和 `roles.xml`。这是
    Liferay 在核心实现中应用的典型表示法。第一个文件列出了所有定义了权限的资源。第二个文件定义了实际的权限。可能只有一个文件包含 `roles.xml`
    的内容。典型的资源动作映射包括：
- en: The portlet name, whose definition should be the same as in the `portlet.xml`
    file
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口名称，其定义应该与 `portlet.xml` 文件中的定义相同
- en: The `portlet-resource` section, which specifies supported permissions in our
    portlet, default permissions for a specific role, and unsupported permissions
    for a specific role
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`portlet-resource` 部分，它指定了我们端口中支持的权限、特定角色的默认权限以及特定角色的不支持权限'
- en: The `model-resource` section, which was not used in this recipe
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model-resource` 部分，在这个菜谱中没有使用'
- en: 'A very useful option is `<add-default-resource>true</add-default-resource>`,
    which we added in `liferay-portlet.xml`. The Liferay DTD definition explains this
    tag as follows:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 一个非常有用的选项是 `<add-default-resource>true</add-default-resource>`，我们在 `liferay-portlet.xml`
    中添加了它。Liferay DTD 定义解释了这个标签如下：
- en: '*"If the add-default-resource value is set to false and the portlet does not
    belong to the page but has been dynamically added, then the user will not have
    permissions to view the portlet. If the add-default-resource value is set to true,
    the default portlet resources and permissions are added to the page, and the user
    can then view the portlet. This is useful (and necessary) for portlets that need
    to be dynamically added to a page. However, to prevent security loopholes, the
    default value is false."*'
  id: totrans-151
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*"如果将 add-default-resource 的值设置为 false，并且端口不属于页面但已被动态添加，则用户将没有权限查看端口。如果将 add-default-resource
    的值设置为 true，则默认端口资源和权限将被添加到页面，然后用户可以查看端口。这对于需要动态添加到页面的端口来说是有用（且必要）的。然而，为了防止安全漏洞，默认值是
    false。"*'
- en: 'The last thing is checking permissions. Liferay gives us a class called `PermissionChecker`,
    which is enabled in every portlet. `ThemeDisplay` aggregates this implementation.
    To check for permissions, Liferay provides a method that implements the `PermissionChecker`
    interface:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一件事情是检查权限。Liferay 给我们提供了一个名为 `PermissionChecker` 的类，它在每个端口中都是启用的。`ThemeDisplay`
    聚合了这个实现。为了检查权限，Liferay 提供了一个实现 `PermissionChecker` 接口的方法：
- en: '[PRE14]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Arguments of this method are as follows:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 此方法参数如下：
- en: '`groupId`: This is the primary key of the group containing the resource'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`groupId`：这是包含资源的组的主键'
- en: '`name`: This is the resource''s name, which can be either a class name or a
    portlet ID'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：这是资源的名称，可以是类名或端口 ID'
- en: '`primKey`: This is the primary key of the resource'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`primKey`：这是资源的主键'
- en: '`actionId`: This is the action ID'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`actionId`：这是动作 ID'
- en: It is possible to use this type of checking in a direct way or to invoke the
    permission checker from `PortletPermissionUtil`. The second way is recommended
    by Liferay. The utility class has at least nine static methods called `check`
    with many variations of arguments depending on the situation. The `check` method
    doesn't return any value. If there is no permission, the method throws `PrincipalException`.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 可以直接使用这种检查方式，或者从 `PortletPermissionUtil` 中调用权限检查器。第二种方式由 Liferay 推荐使用。这个实用工具类至少有九个名为
    `check` 的静态方法，根据具体情况，参数有很多变体。`check` 方法不返回任何值。如果没有权限，该方法会抛出 `PrincipalException`
    异常。
- en: The second static method is `contain`, which returns `true` if a specific permission
    is enabled or `false` if the permission is disabled.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个静态方法是 `contain`，如果特定权限被启用则返回 `true`，如果权限被禁用则返回 `false`。
- en: As a matter of fact, this recipe only touched upon the basics of permissions
    in Liferay. On the Internet, there are a lot of tutorials on how to use Liferay
    permissions and how to implement new functionalities. If we use a *service builder*
    mechanism with a Liferay-based model, it is quite simple to implement the correct
    permissions. Liferay adds many things by default.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，这个菜谱只涉及了 Liferay 中权限的基本知识。在互联网上，有很多关于如何使用 Liferay 权限以及如何实现新功能的教程。如果我们使用基于
    Liferay 模型的 *服务构建器* 机制，实现正确的权限相当简单。Liferay 默认添加了很多功能。
- en: See also
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: 'If you want to learn how to create new portlets or hooks, refer to these recipes:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想学习如何创建新的端口或钩子，请参考以下食谱：
- en: The *Creating a custom portlet* in [Chapter 1](part0015.xhtml#aid-E9OE1 "Chapter 1. Installation
    and Basic Configuration"), *Installation and Basic Configuration*
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第1章](part0015.xhtml#aid-E9OE1 "第1章。安装和基本配置")的*创建自定义端口*，*安装和基本配置*
- en: The *language properties hook* and *Using Liferay Service Bus for communication
    between portlets* in [Chapter 11](part0080.xhtml#aid-2C9D01 "Chapter 11. Quick
    Tricks and Advanced Knowledge"), *Quick Tricks and Advanced Knowledge*
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第11章](part0080.xhtml#aid-2C9D01 "第11章。快速技巧和高级知识")的*语言属性钩子*和*使用Liferay服务总线进行端口间的通信*，*快速技巧和高级知识*
