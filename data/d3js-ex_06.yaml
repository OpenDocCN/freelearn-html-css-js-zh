- en: Chapter 6. Creating Scatter and Bubble Plots
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章：创建散点图和气泡图
- en: In this chapter, we extend our examples of using D3.js for plotting data to
    explain how to create scatter and bubble plots. Scatter and bubble plots visualize
    multivariate data, as compared to univariate data that is visualized by bar charts.
    Multivariate data consists of two or more variables, and scatter plots allow us
    to visualize two variable, and bubble plots extend this to three or four variables.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们扩展了使用 D3.js 绘制数据的示例，以解释如何创建散点图和气泡图。与通过条形图可视化的单变量数据相比，散点图和气泡图可视化多变量数据。多变量数据由两个或更多变量组成，散点图使我们能够可视化两个变量，而气泡图将此扩展到三个或四个变量。
- en: We will begin by first creating a simple scatter plot with fixed symbols, based
    upon stock correlation data. We start with using solid circles for symbols, and
    will progress through several enhancements including the use of color, outlines,
    and opacity. We will wrap up scatter plots with an example of multiple, overlying
    sets of data, each using different symbols and colors.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先创建一个简单的散点图，使用固定符号，基于股票相关性数据。我们开始使用实心圆作为符号，并将通过几个增强功能进行进展，包括使用颜色、轮廓和不透明度。我们将通过一个示例结束散点图，该示例使用多个重叠的数据集，每个数据集使用不同的符号和颜色。
- en: When we've finished examining the of creation of a bubble plot, we will extend
    that example to change the size of the points based upon the data, and then to
    color the points based upon categorical information. This last example will demonstrate
    how we can visualize four different variables within a single visualization, and
    how the use of visuals can help us derive meaning from the underlying information.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们完成对气泡图创建的检查后，我们将扩展该示例以根据数据更改点的尺寸，然后根据分类信息着色点。最后一个示例将展示我们如何在单一的可视化中可视化四个不同的变量，以及视觉的使用如何帮助我们从底层信息中提取意义。
- en: 'Specifically, in this chapter we will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，在本章中，我们将涵盖以下主题：
- en: Creating a basic scatter plot using fixed-sized and solid points
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用固定大小和实心点创建基本散点图
- en: Using outlines instead of solid fills to make the plot more legible
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用轮廓而不是实心填充来使图表更易读
- en: Adding gridlines to help determine the location of points
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加网格线以帮助确定点的位置
- en: Extending the scatter plot code to create bubble plots
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将散点图代码扩展到创建气泡图
- en: Creating scatter plots
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建散点图
- en: Scatter plots consist of two axes, one for each variable. Each axis can be based
    on continuous or categorical variables. For each measurement (a **measurement**
    being the paired combination of *X* and *Y* values), a symbol is placed on the
    plot at the specified location. The end result is a plot that allows the person
    viewing it to determine how much one variable is affected by the other.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 散点图由两个轴组成，每个轴对应一个变量。每个轴可以是连续变量或分类变量。对于每个测量值（一个**测量值**是 *X* 和 *Y* 值的配对组合），在指定的位置在图上放置一个符号。最终结果是这样一个图，它允许观看者确定一个变量受另一个变量影响的程度。
- en: Underpinning our first few examples will be a data set that represents the correlation
    between the AAPL and MSFT stocks on a daily basis for the year 2014\. For purposes
    of creating a scatter plot, the meaning of this data is not important—it is just
    that it represents two dimensional data, where the value for each stock represents
    a location on the respective axis.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我们前几个示例的基础将是一个数据集，该数据集表示AAPL和MSFT股票在2014年的每日相关性。为了创建散点图，这些数据的意义并不重要——它只是代表二维数据，其中每个股票的价值代表相应轴上的一个位置。
- en: The data for this example is available at [https://goo.gl/BZkC8B](https://goo.gl/BZkC8B).
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本例的数据可在[https://goo.gl/BZkC8B](https://goo.gl/BZkC8B)找到。
- en: 'Opening this link in the browser, you will see the following as the first few
    lines of the data:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在浏览器中打开此链接，您将看到以下数据的前几行：
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Plotting points
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 绘制点
- en: Our first example will demonstrate the process of drawing points in a scatter
    plot. To keep it simple, it forgoes the axes and other stylistic elements (these
    will be added in the next example).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的第一个示例将演示在散点图中绘制点的过程。为了保持简单，它省略了轴和其他风格元素（这些将在下一个示例中添加）。
- en: 'The example is available at the following location:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 示例可在以下位置找到：
- en: Note
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'bl.ock (6.1): [http://goo.gl/Uv6aSj](http://goo.gl/Uv6aSj)'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 'bl.ock (6.1): [http://goo.gl/Uv6aSj](http://goo.gl/Uv6aSj)'
- en: 'The resulting plot is seen in the following image:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 结果图如下所示：
- en: '![Plotting points](img/B04320_06_01.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![绘制点](img/B04320_06_01.jpg)'
- en: 'Now let''s examine how this is created. The example starts by loading the data:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来检查这是如何创建的。示例首先加载数据：
- en: '[PRE1]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Note
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The entire URL has to be specified, as apparently, the data load functions do
    not follow redirects.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 整个URL必须指定，因为显然，数据加载函数不会遵循重定向。
- en: 'We need to convert the properties AAPL and MSFT from strings to numbers. We
    do this by creating a new array of objects with `X` and `Y` properties, with AAPL
    mapped into `X` and MSFT into `Y`, which also converts the data type:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要将AAPL和MSFT这两个属性从字符串转换为数字。我们通过创建一个新的包含`X`和`Y`属性的对象数组来实现这一点，其中AAPL映射到`X`，MSFT映射到`Y`，这也转换了数据类型：
- en: '[PRE2]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'To effectively scale a scatter plot, we need to know the extents of the data
    in both the `X` and `Y` series:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 为了有效地缩放散点图，我们需要知道`X`和`Y`系列中数据的范围：
- en: '[PRE3]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'These values will help us create the scales that are required for both dimensions
    of the graph. This plot will actually use the maximum absolute value of these
    four extents. We can determine this value with the following:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这些值将帮助我们创建图表两个维度所需的刻度。实际上，这个图表将使用这四个范围的最大绝对值。我们可以用以下方法确定这个值：
- en: '[PRE4]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'We are now ready to create the properties of the graph, including its width,
    height, and the size of the radius for the circles that will represent the points:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经准备好创建图表的属性，包括其宽度、高度以及代表点的圆的半径大小：
- en: '[PRE5]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Now we have all of the information required to create the scale needed to map
    the data into the locations in the rendering:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了创建将数据映射到渲染位置所需的刻度所需的所有信息：
- en: '[PRE6]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Note
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This example (and those in the remainder of this chapter) scale the data such
    that the domain is the negative and positive of the absolute values of the extents.
    In simple terms, this scale ensures that when rendering into a square canvas,
    all points are visible and any specific distance along the *X* dimension represents
    an identical change in the value of the data as the distance along the *Y* dimension.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这个示例（以及本章剩余的部分）将数据缩放，使得域是范围绝对值的负数和正数。简单来说，这个刻度确保了当渲染到正方形画布时，所有点都是可见的，并且沿*X*维度的任何特定距离代表与沿*Y*维度相同的数据值的变化。
- en: 'The rendering begins with the creation of the main SVG element:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 渲染开始于创建主要的SVG元素：
- en: '[PRE7]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Finally, we create a circle of the specified radius to represent each point:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们创建一个指定半径的圆来代表每个点：
- en: '[PRE8]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Congratulations, you have created your first scatter plot!
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜你，你已经创建了你的第一个散点图！
- en: Sprucing up the scatter plot
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 整理散点图
- en: There are several issues with the plot in the previous example. First, notice
    that there is a circle that is clipped towards the right boundary. With the code
    as it is, one point, the one at the maximum extent, will have half of its area
    clipped. This can easily be resolved by including margins that are at least half
    of the radius of the circles.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一个示例的图表中存在几个问题。首先，注意有一个圆被剪切到右侧边界。按照当前的代码，一个点，即最大范围的点，将有它面积的一半被剪切。这可以通过包括至少为圆半径一半的边距来轻松解决。
- en: Another issue is that there are a lot of circles that overlap, confusing the
    visual understanding of the data. A common means of addressing this issue in scatter
    plots is not to use a solid fill in the circles, and simply use an outline instead.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个问题是有很多圆重叠，这会混淆数据的视觉理解。在散点图中解决这个问题的常见方法是不在圆中使用实心填充，而是简单地使用轮廓。
- en: 'A final issue, which is really just a decision made to keep the previous example
    simple, is not to have any axes. The example at the following link addresses each
    of these concerns:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个问题，实际上是一个为了保持前一个示例简单而做出的决定，那就是不要有任何坐标轴。以下链接中的示例解决了这些关注点：
- en: Note
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'bl.ock (6.2): [http://goo.gl/4T1aGZ](http://goo.gl/4T1aGZ)'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 'bl.ock (6.2): [http://goo.gl/4T1aGZ](http://goo.gl/4T1aGZ)'
- en: 'The preceding example has the following output:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的示例有以下的输出：
- en: '![Sprucing up the scatter plot](img/B04320_06_02.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![整理散点图](img/B04320_06_02.jpg)'
- en: This result is a much more effective scatter plot. We can make sense of the
    previously obscured points, and the axes give us a sense of the values at each
    point.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 这个结果是一个更有效的散点图。我们可以理解之前被遮挡的点，坐标轴也给我们每个点的值提供了一个感觉。
- en: 'The changes to the code are relatively minor. Besides adding axes by using
    the code that we have seen in other examples (including grouping groups for the
    various main elements), and sizing the main SVG element to account for those axes,
    the only change is in the way the circles are created:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 代码的更改相对较小。除了使用我们在其他示例中看到的代码添加轴（包括为各种主要元素分组）以及调整主SVG元素的大小以适应这些轴之外，唯一的更改是在创建圆圈的方式上：
- en: '[PRE9]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Adding gridlines
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加网格线
- en: 'Our scatter plot would be more effective if it had gridlines. The way in which
    we add gridlines to a chart in D3.js is actually a little trick: gridlines are
    actually the ticks of an axis, the ticks being the width or height of the graphic
    with both the labels and main line of the axis hidden.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们的散点图有网格线，那么它将更加有效。在D3.js中添加网格线到图表的方式实际上是一个小技巧：网格线实际上是轴的刻度，刻度是图形的宽度和高度，其中轴的标签和主线都被隐藏了。
- en: To add gridlines to our plot, we will create two additional axes. The horizontal
    gridlines will be rendered by creating a left-oriented axis positioned in the
    right margin. We will set the labels on this axis to be empty and the line of
    the axis to be hidden. The ticks are then sized to extend all the way back to
    the other axis in the left margin. We will perform a similar process to create
    the vertical gridlines except with a bottom axis placed in the top margin.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 要在我们的图表中添加网格线，我们将创建两个额外的轴。水平网格线将通过创建一个位于右侧边距的左向轴来渲染。我们将设置这个轴的标签为空，并将轴的线隐藏。然后刻度的大小被设置为延伸到左侧边距的另一个轴。我们将执行一个类似的过程来创建垂直网格线，除了将底部轴放置在顶部边距。
- en: Note
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'bl.ock (6.3): [http://goo.gl/ZmrY4H](http://goo.gl/ZmrY4H)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 'bl.ock (6.3): [http://goo.gl/ZmrY4H](http://goo.gl/ZmrY4H)'
- en: 'And the resulting graph is shown in the following image:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 结果图如下所示：
- en: '![Adding gridlines](img/B04320_06_03.jpg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![添加网格线](img/B04320_06_03.jpg)'
- en: 'The only difference from the previous examples are the several lines for creating
    these new axes and a function to style them:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 与前一个示例的唯一区别是创建这些新轴的几行代码和一个用于样式化的函数：
- en: '[PRE10]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The code begins with creating a left-oriented axis, and then renders it in a
    group which is translated to the right margin.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 代码开始于创建一个左向轴，然后在一个被平移到右侧边距的组中渲染它。
- en: Instead of simply passing the axis object to `.call()`, we first call two of
    its functions. The first, `.tickSize()`, sets the size of the ticks to stretch
    across the entire area where the points will be rendered. Calling `.tickFormat("")`
    informs the axis that the labels should be empty.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不是简单地通过`.call()`传递轴对象，而是首先调用它的两个函数。第一个是`.tickSize()`，它设置刻度的大小以跨越将要渲染点的整个区域。调用`.tickFormat("")`通知轴标签应为空。
- en: 'Now we just need to perform a little styling on the axis. This is performed
    by the `styleGridLineNodes()` function:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们只需要对轴进行一点样式化。这是通过`styleGridLineNodes()`函数完成的：
- en: '[PRE11]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: This sets the fill and stroke of the main line of the axis so that it is not
    visible. It then makes the actual ticks light gray.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 这设置了轴主线的填充和描边，使其不可见。然后使实际的刻度变为浅灰色。
- en: 'The vertical gridlines are then created by a similar process:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 垂直网格线是通过一个类似的过程创建的：
- en: '[PRE12]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'A final point about this process is the sequence of the renderings: gridlines,
    then axes, then the points. This ensures that each of these appear on top of the
    others. It is most important for the points to be on top of the gridlines and
    axes, but the gridlines also being behind the visible axes is good practice. It
    gives you a little wiggle room to be a few pixels long on the gridlines.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 关于这个过程的最后一点是渲染的顺序：网格线，然后是轴，然后是点。这确保了这些元素中的每一个都出现在其他元素之上。最重要的是点要位于网格线和轴之上，但网格线也位于可见轴的后面是一种良好的实践。这给你在网格线上留出了一些微调的空间。
- en: Creating a bubble plot
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建气泡图
- en: Bubble plots help us to visualize three or four dimensions of data. Each datum
    in a bubble plot consists not only of two values used to plot against the *X*
    and *Y* axes, but also one or two additional values which are commonly represented
    by different size symbols and/or colors.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 气泡图帮助我们可视化三个或四个维度的数据。气泡图中的每个数据点不仅由用于与X轴和Y轴作图的两个值组成，还包括一个或两个额外的值，这些值通常通过不同大小的符号和/或颜色来表示。
- en: 'To demonstrate a bubble plot, the following image shows the result of our example:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示气泡图，以下图像显示了我们的示例结果：
- en: '![Creating a bubble plot](img/B04320_06_04.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![创建气泡图](img/B04320_06_04.jpg)'
- en: The data behind this chart is a data set that was pulled together from three
    different datasets from the World Bank. This data correlates life expectancy at
    birth relative to the fertility rate for all the countries in the World Bank data
    for the year 2013.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 此图表背后的数据是从世界银行的三个不同数据集中汇总而来的数据集。这些数据关联了2013年世界银行数据中所有国家的出生预期寿命与出生率。
- en: This chart plots age along the *X* axis and the birth rate along the *Y* axis.
    The relative population of a country is represented by the size of the circle,
    and the color of the circle represents the economic region of the country as categorized
    by the World Bank.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 此图表沿*X*轴绘制年龄，沿*Y*轴绘制出生率。一个国家的相对人口由圆圈的大小表示，圆圈的颜色代表由世界银行按类别划分的国家经济区域。
- en: We won't dive deeply into this data. It is available at [https://goo.gl/K3yuuy](https://goo.gl/K3yuuy).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会深入探讨这些数据。它们可在[https://goo.gl/K3yuuy](https://goo.gl/K3yuuy)找到。
- en: 'The first few lines of the data are the following:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 数据的前几行如下：
- en: '[PRE13]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Note
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'If you want to check out the original data, you can use the following links:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想查看原始数据，可以使用以下链接：
- en: 'Life expectancy (in years) at birth: [http://data.worldbank.org/indicator/SP.DYN.LE00.IN](http://data.worldbank.org/indicator/SP.DYN.LE00.IN)'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 出生时的预期寿命（年）：[http://data.worldbank.org/indicator/SP.DYN.LE00.IN](http://data.worldbank.org/indicator/SP.DYN.LE00.IN)
- en: 'Fertility rate: [http://data.worldbank.org/indicator/SP.DYN.TFRT.IN](http://data.worldbank.org/indicator/SP.DYN.TFRT.IN)'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 出生率：[http://data.worldbank.org/indicator/SP.DYN.TFRT.IN](http://data.worldbank.org/indicator/SP.DYN.TFRT.IN)
- en: 'Total population: [http://data.worldbank.org/indicator/SP.POP.TOTL](http://data.worldbank.org/indicator/SP.POP.TOTL)'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总人口：[http://data.worldbank.org/indicator/SP.POP.TOTL](http://data.worldbank.org/indicator/SP.POP.TOTL)
- en: 'The code for the example is available at the following link:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 示例的代码可在以下链接找到：
- en: Note
  id: totrans-86
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'bl.ock (6.4): [http://goo.gl/KQJceE](http://goo.gl/KQJceE)'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: bl.ock（6.4）：[http://goo.gl/KQJceE](http://goo.gl/KQJceE)
- en: 'The example starts with the loading of data and converting the data types:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 示例从加载数据和转换数据类型开始：
- en: '[PRE14]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Now we define several variables for defining the minimum and maximum bubble
    size and the margins, which we will set to be half of the radius of the largest
    bubble:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们定义了几个变量来定义最小和最大气泡大小以及边距，我们将它们设置为最大气泡半径的一半：
- en: '[PRE15]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'This particular plot requires three linear scales and one ordinal scale based
    upon the following four series of data:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 此特定图表需要基于以下四个数据系列的三条线性尺度和一个顺序尺度：
- en: '[PRE16]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The scale for the *X* axis will vary from the minimum to the maximum life expectancy:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '*X*轴的尺度将从最小预期寿命到最大预期寿命：'
- en: '[PRE17]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The *Y* axis will range from the maximum fertility rate at the top to `0` at
    the bottom:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '*Y*轴的范围将从顶部的最大出生率到底部的`0`：'
- en: '[PRE18]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The size of each bubble represents the population, and will range in radius
    from the minimum to the maximum values configured earlier:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 每个气泡的大小代表人口，半径范围将从之前配置的最小值到最大值：
- en: '[PRE19]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Each bubble will be colored based upon the value of the region. To do this,
    we set up a mapping between each of the unique names of the regions and a 10-color
    categorical scale:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 每个气泡的颜色将基于地区的值。为此，我们为每个独特的地区名称和10色分类尺度之间建立映射：
- en: '[PRE20]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Now we can start rendering the visuals, starting with the axes:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以开始渲染视觉效果，从轴开始：
- en: '[PRE21]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The final task is to render the bubbles:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 最终任务是渲染气泡：
- en: '[PRE22]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Summary
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we put together several examples of creating scatter and bubble
    plots. You learned a number of techniques for organizing data that represents
    between two and four distinct dimensions, using axes for two of the dimensions,
    and then using color and size-of-points as two more.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们汇集了创建散点图和气泡图的几个示例。你学习了使用轴来组织表示两个到四个不同维度的数据的技术，其中两个维度使用轴，然后使用颜色和点的大小作为另外两个。
- en: In the next chapter, we will begin with animation. We will start with the fundamentals
    of animation, and by the end of the chapter, we will extend this chapter's final
    example and use animation to represent an extra dimension, a fifth dimension—time.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将从动画开始。我们将从动画的基础开始，到本章结束时，我们将扩展本章的最终示例，并使用动画来表示一个额外的维度，第五维度——时间。
