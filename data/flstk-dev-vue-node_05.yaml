- en: Building the Real Application
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建真实应用程序
- en: We have covered the basic components that we need to have knowledge of in order
    to build a full-stack JavaScript application. From this point on, we will work
    on building a whole web application using all of these technologies.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经介绍了构建全栈JavaScript应用程序所需的基本组件。从这一点开始，我们将使用所有这些技术来构建一个完整的Web应用程序。
- en: 'We will be building a movie rating application that will have the following
    features throughout this book:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将构建一个电影评分应用程序，本书将在整个过程中介绍以下功能：
- en: A home page that lists all the movies with other attributes
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个列出所有电影及其他属性的主页
- en: There will be an admin section where the administrator will be able to add movies
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将有一个管理员部分，管理员可以添加电影
- en: The user will be able to log in and sign up
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户可以登录和注册
- en: The user will be able to rate a movie
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户可以对电影进行评分
- en: There will be a movie profile section where the logged-in user can rate the
    movie
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将有一个电影简介部分，用户可以对电影进行评分
- en: So, let's get started.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，让我们开始吧。
- en: Introducing Vue.js
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍Vue.js
- en: Vue.js is an open source, progressive JavaScript framework for building user
    interfaces. The rise of new JavaScript frameworks has been tremendous. With such
    growth, you might get confused about where to get started and how. There are hundreds
    of JavaScript frameworks today; among them, there are dozens of frameworks that
    stood out. But still, to choose from those dozens might be a daunting task.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.js是一个用于构建用户界面的开源、渐进式JavaScript框架。新的JavaScript框架的崛起是巨大的。随着这样的增长，你可能会困惑于从哪里开始以及如何开始。今天有数百种JavaScript框架；其中有几十种框架脱颖而出。但是，从这几十种中进行选择可能是一项艰巨的任务。
- en: There are quite a few popular frameworks today, such as React, Ember, and Angular.
    While these frameworks have their own advantages, there are some limitations to
    them as well. While building an application with React or Angular is good in itself,
    Vue.js helps eliminate some of the limitations associated with these frameworks.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 今天有一些相当受欢迎的框架，比如React、Ember和Angular。虽然这些框架各有优势，但它们也有一些局限性。在使用React或Angular构建应用程序本身是不错的，但Vue.js有助于消除这些框架所带来的一些局限性。
- en: Vue.js is **progressive.** With Vue.js, you can start with small and then progress
    gradually toward building bigger applications. This means that if you are just
    starting out, you might want to start with a very small application and scale
    slowly. Vue.js is perfect for such applications. It is lightweight and flexible
    as well. The learning curve is also very easy and super easy to get started.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.js是**渐进式**的。使用Vue.js，你可以从小处开始，逐渐向构建更大的应用程序发展。这意味着如果你刚开始，你可能想从一个非常小的应用程序开始，然后慢慢扩展。Vue.js非常适合这样的应用程序。它也很轻量灵活。学习曲线也非常简单，非常容易上手。
- en: Vue.js was invented by Evan You. It was first released in February 2014 and
    gained huge popularity around 2016\. He used to work for Google and in Angular
    projects. The motivation for this invention was mainly because he didn't want
    to use Angular for small projects, since Angular provides a lot of packages out
    of the box and, hence, is not lightweight and not suitable for small applications.
    Having said that, Vue.js does not only target the smaller applications. It definitely
    does not provide all the packages with it, but you can add them as you progress
    with your application. That is the beauty of Vue.js.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Vue.js是由Evan You发明的。它于2014年2月首次发布，并在2016年左右获得了巨大的流行。他曾在谷歌工作，并参与了Angular项目。这个发明的动机主要是因为他不想在小项目中使用Angular，因为Angular提供了很多开箱即用的包，因此不够轻量级，也不适合小型应用程序。话虽如此，Vue.js并不仅仅针对较小的应用程序。它确实不提供所有的包，但您可以随着应用程序的发展逐步添加它们。这就是Vue.js的美妙之处。
- en: Installing Vue.js
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Vue.js
- en: Let's get started with the installation of Vue.js. There are three ways to install
    and use Vue.js.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始安装Vue.js。有三种安装和使用Vue.js的方法。
- en: Including it in a script tag
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 包含在script标签中
- en: 'The easiest way to use Vue.js is to download it and include it in your `script`
    tag. You can download it from [https://cdn.jsdelivr.net/npm/vue](https://cdn.jsdelivr.net/npm/vue):'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Vue.js的最简单方法是下载并将其包含在您的`script`标签中。您可以从[https://cdn.jsdelivr.net/npm/vue](https://cdn.jsdelivr.net/npm/vue)下载它：
- en: '[PRE0]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Using Content Delivery Network (CDN) links directly
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用内容传送网络（CDN）直接链接
- en: 'CDN is a network of distributed servers. It stores the cached version of contents
    in different geographical locations so that the content loads faster when fetched.
    We can use the CDN link directly in our `script` tag:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: CDN是分布式服务器网络。它在不同的地理位置存储内容的缓存版本，以便在获取时加载内容更快。我们可以直接在我们的`script`标签中使用CDN链接：
- en: '[PRE1]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Using Vue.js as an npm package
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Vue.js作为npm包
- en: '`npm` also has a package for `vue`, which can be installed as follows:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '`npm`也有一个`vue`的包，可以按照以下方式安装：'
- en: '[PRE2]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Introducing vue-cli
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍vue-cli
- en: 'CLI stands for Command Line Interface. A `cli` runs one or multiple commands
    successively in a command line interface. Vue.js also has a `cli` which, when
    installed, makes it super easy to spin up a project. We will be using a `vue-cli`
    in this book to create the Vue.js application. Let''s install `vue-cli` with the
    following command. You can execute this command in your root folder:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: CLI代表命令行界面。`cli`在命令行界面上运行一个或多个命令。Vue.js也有一个`cli`，安装后可以轻松地启动一个项目。在本书中，我们将使用`vue-cli`来创建Vue.js应用程序。让我们使用以下命令安装`vue-cli`。您可以在根目录中执行此命令：
- en: '[PRE3]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Initializing projects with vue-cli
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用vue-cli初始化项目
- en: 'Let''s go ahead with creating a new project folder for our movie rating application.
    We will call it `movie_rating_app`. Go to the directory where you want to create
    your application in the Terminal and run the following:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续为我们的电影评分应用程序创建一个新的项目文件夹。我们将称之为`movie_rating_app`。在终端中转到您想要创建应用程序的目录，并运行以下命令：
- en: '[PRE4]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The preceding command initializes an application with all the dependencies
    that a Vue.js project requires. It will ask you a few questions about the project
    setup, to which you can answer either *y*, as in *yes*, or *n*, as in *no*:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令初始化了一个具有Vue.js项目所需的所有依赖项的应用程序。它会询问您关于项目设置的一些问题，您可以回答*y*，表示*是*，或*n*，表示*否*：
- en: '**Vue build**: You will find two options to build the Vue.js app: runtime +
    compiler, or runtime Only. This has to do with the template compiler:'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Vue构建**：您将找到两个选项来构建Vue.js应用程序：runtime + compiler，或者仅运行时。这与模板编译器有关：'
- en: '**Runtime only**: The runtime option is used to create the `vue` instances.
    This option does not include the template compiler.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仅运行时**：运行时选项用于创建`vue`实例。此选项不包括模板编译器。'
- en: '**Runtime + compiler**: This option includes the template compiler, which means
    the `vue` templates are compiled to the plain JavaScript render functions.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Runtime + compiler**：此选项包括模板编译器，这意味着`vue`模板被编译为普通的JavaScript渲染函数。'
- en: '**Vue-router**:Vue-router is the official router for Vue.js applications. This
    option is specially used when we want to make our application a **Single Page
    Application** (**SPA**). When using this option, the application makes all the
    necessary requests one time when the page initially loads and sends requests to
    the server when new data is needed. We will be talking more about Single Page
    and Multi-Page applications in future chapters as well. For now, we will be using
    the Vue-router.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Vue-router**：Vue-router是Vue.js应用程序的官方路由器。当我们想要将应用程序制作成**单页面应用**（**SPA**）时，特别使用此选项。使用此选项时，应用程序在页面初始加载时一次性进行所有必要的请求，并在需要新数据时向服务器发送请求。在未来的章节中，我们还将更多地讨论单页面和多页面应用程序。现在，我们将使用Vue-router。'
- en: '**ESLint**:ESLint is a JavaScript linter tool. It is a static code analysis
    tool used to find the errors or the mistakes in the code. It basically makes sure
    that the code follows the standard guidelines. There are two options for choosing
    the ESLint from as well: standard linting or the Airbnb linting. We will be going
    with Airbnb for this project.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ESLint**：ESLint是一个JavaScript代码检查工具。它是一个静态代码分析工具，用于查找代码中的错误或错误。它基本上确保代码遵循标准指南。选择ESLint也有两个选项：标准检查或Airbnb检查。对于这个项目，我们将选择Airbnb。'
- en: '**Setup test**:By setting up tests, the project creates a wrapper for the tests
    that we will be writing for our application. It creates the necessary structure
    and configuration for the tests codes to be able to be run. We will be using this
    option as well. For the test runner, we will be using Mocha and Karma, and for
    the end to end testing, we will be using Nightwatch, which we will learn about
    in further chapters.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设置测试**：通过设置测试，项目为我们将为应用程序编写的测试创建了一个包装器。它创建了测试代码的必要结构和配置，以便能够运行。我们也将使用此选项。对于测试运行器，我们将使用Mocha和Karma，对于端到端测试，我们将使用Nightwatch，这些将在后续章节中学习。'
- en: '**Dependency management**: Lastly, to manage the packages and the dependencies,
    here we have two options: `npm` and `Yarn`. We mostly talked about `npm` in previous
    chapters. `Yarn` is also a dependency management tool just like `npm`. Both Yarn
    and `npm` have their own benefits, but for this application, we are going to use
    `npm`. You can learn more about Yarn here ([https://yarnpkg.com/en/](https://yarnpkg.com/en/)).'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**依赖管理**：最后，为了管理包和依赖项，我们有两个选项：`npm`和`Yarn`。我们在之前的章节中主要讨论了`npm`。`Yarn`也是一种类似`npm`的依赖管理工具。Yarn和`npm`都有各自的好处，但对于这个应用程序，我们将使用`npm`。您可以在这里了解更多关于Yarn的信息（[https://yarnpkg.com/en/](https://yarnpkg.com/en/)）。'
- en: 'This will take some time as it will install all the dependencies. Here are
    the options that we selected for our application:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 这将需要一些时间，因为它将安装所有的依赖项。以下是我们为应用程序选择的选项：
- en: '![](img/e962ace9-cf14-44e2-b418-2df63afde539.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e962ace9-cf14-44e2-b418-2df63afde539.png)'
- en: 'When the command is successfully executed, you should be able to see the further
    steps on your Terminal:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 当命令成功执行时，您应该能在终端上看到进一步的步骤：
- en: '![](img/6eccf577-1893-40fd-8534-571db89ed658.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6eccf577-1893-40fd-8534-571db89ed658.png)'
- en: 'If the build is successful, we will be able to see the preceding output. Now,
    let''s do as it says in the Terminal:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果构建成功，我们将能够看到前面的输出。现在，让我们按照终端上的指示操作：
- en: '[PRE5]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This will start your application. The default port of the Vue.js application
    is 8080\. As you can see in your Terminal, it should say:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这将启动您的应用程序。Vue.js应用程序的默认端口是8080。如您在终端中所见，应该会显示：
- en: '![](img/027b2d37-1812-46ce-8cec-66e218227acb.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/027b2d37-1812-46ce-8cec-66e218227acb.png)'
- en: 'Go to the browser and open the URL `http://localhost:8080/#/`, and we should
    be able to see our application:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 转到浏览器，打开URL `http://localhost:8080/#/`，我们应该能看到我们的应用程序：
- en: '![](img/7ca9be13-5227-4432-910a-912a0037985a.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7ca9be13-5227-4432-910a-912a0037985a.png)'
- en: Great job! That was super easy. You have successfully created and run a Vue.js
    application.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 干得漂亮！这非常容易。您已成功创建并运行了一个Vue.js应用程序。
- en: Project folder structure
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 项目文件夹结构
- en: 'Now, if you have noticed, `vue-cli` commands add a bunch of dependencies to
    your application, which is listed in the `package.json` file. The `cli` command
    also sets up a folder structure that you can customize to your needs as well.
    Let''s review and understand the structure that the `cli` has made for us:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果您注意到了，`vue-cli`命令会向您的应用程序添加大量依赖项，这些依赖项在`package.json`文件中列出。`cli`命令还设置了一个文件夹结构，您也可以根据自己的需要进行自定义。让我们回顾并了解`cli`为我们创建的结构：
- en: '![](img/5ae64fa6-aa4e-4d02-87af-7244b258abf5.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5ae64fa6-aa4e-4d02-87af-7244b258abf5.png)'
- en: '`build` folder: This folder contains the `webpack` configuration files for
    different environments: development, test, and production'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`build`文件夹：此文件夹包含不同环境的`webpack`配置文件：开发、测试和生产'
- en: '`config` folder: All the configurations of the application would go here'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config`文件夹：应用程序的所有配置都将放在这里'
- en: '`node_modules`: All the `npm` packages that we install reside in this folder'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`node_modules`：我们安装的所有`npm`包都存放在这个文件夹中'
- en: '`src`:  This folder contains all the files related to rendering the components
    in the browser:'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`src`：这个文件夹包含与在浏览器中渲染组件相关的所有文件：'
- en: '`assets`: You can add your CSS and images for your application inside this
    folder.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`assets`：您可以在此文件夹中为应用程序添加CSS和图像。'
- en: '`components`: This folder will house all the frontend rendering files that
    will have a `.vue` extension.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`components`：此文件夹将包含所有具有 `.vue` 扩展名的前端呈现文件。'
- en: '`router`: This folder will take care of all the URL routes for different pages
    throughout the application.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`router`：此文件夹将负责应用程序中不同页面的所有URL路由。'
- en: '`App.vue`: You can think of `App.vue` as the main component for rendering the
    view files. Other files will extend the layout defined on this file to create
    different views.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`App.vue`：您可以将 `App.vue` 视为呈现视图文件的主要组件。其他文件将扩展此文件中定义的布局以创建不同的视图。'
- en: '`main.js`: This is the main entry point for any Vue.js application.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`main.js`：这是任何Vue.js应用程序的主入口点。'
- en: '`Static`: You can use this folder as well to keep your static files, such as
    CSS and images.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Static`：您也可以使用此文件夹来保存静态文件，例如CSS和图像。'
- en: '`Test`: This folder will be used to handle all the tests written for our application.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Test`：此文件夹将用于处理为我们的应用程序编写的所有测试。'
- en: Building a static application with Vue.js
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Vue.js构建静态应用程序
- en: Now that we have initialized a project, let's move ahead with creating a static
    web application. Don't forget to make a repository on GitHub and commit and push
    changes regularly.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经初始化了一个项目，让我们继续创建一个静态Web应用程序。不要忘记在GitHub上创建一个存储库，并定期提交和推送更改。
- en: When you visit the URL `http://localhost:8080/#/`, you will see a default page
    rendered.  This piece of code is written in `src/components/HelloWorld.vue`.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 当您访问URL `http://localhost:8080/#/` 时，您将看到默认页面被呈现。这段代码写在 `src/components/HelloWorld.vue`
    中。
- en: 'If you look into `build/webpack.base.conf.js`, you will see this line of code
    in the `module.exports` section:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你查看 `build/webpack.base.conf.js`，你会在 `module.exports` 部分看到这行代码：
- en: '[PRE6]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'This means, when you run the app, this `main.js` will be the entry point for
    the app. Everything will start from there. Let''s have a quick look at that `main.js`
    file inside `src`:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着当您运行应用程序时，`main.js` 将是应用程序的入口点。一切都将从那里开始。让我们快速查看一下 `src` 中的 `main.js` 文件：
- en: '[PRE7]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The first three lines import the necessary packages required for this app to
    run. `App.vue` is the main template layout for this app. All other `.vue` files
    will extend this layout.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 前三行导入了此应用程序运行所需的必要包。`App.vue` 是此应用程序的主模板布局。所有其他 `.vue` 文件将扩展此布局。
- en: 'The bottom block defines which component to render when you run the app. In
    this case, this is telling our app to take the template `<App>` and render it
    inside the `#app` element.  Now, if we look into `App.vue`:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 底部块定义了运行应用程序时要呈现的组件。在这种情况下，这告诉我们的应用程序获取模板 `<App>` 并在 `#app` 元素内呈现它。现在，如果我们查看
    `App.vue`：
- en: '[PRE8]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Here we have the template that has a `div` element with an ID `#app`. It means
    that the `vue` templates that we create will get rendered in this.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我们有一个模板，其中有一个带有ID `#app` 的 `div` 元素。这意味着我们创建的 `vue` 模板将在这里呈现。
- en: Redefining the home page
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重新定义主页
- en: 'Let''s make our own view page for the home. For this, we can just modify the
    `HelloWorld.vue` component. The `.vue` file should always start with a template.
    Hence, a basic template for this file is:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们为主页创建自己的视图页面。为此，我们可以修改 `HelloWorld.vue` 组件。`.vue` 文件应始终以模板开头。因此，该文件的基本模板如下：
- en: '[PRE9]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You can also include your style sheets and JavaScript codes definitions in this
    page, but it will be much cleaner if we separate these out somewhere else.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在此页面中包含样式表和JavaScript代码定义，但是如果我们将它们分开放在其他地方，代码会更加清晰。
- en: 'Let''s remove everything from `HelloWorld.vue` and add these lines of code:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从 `HelloWorld.vue` 中删除所有内容，并添加以下代码：
- en: '[PRE10]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'We also don''t need a Vue.js logo, so let''s delete that as well from `src/assets` and
    the line of code in `App.vue`:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也不需要Vue.js标志，所以让我们也从 `src/assets` 中删除它，并从 `App.vue` 中删除这行代码：
- en: '[PRE11]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Now, if you revisit the URL `http://localhost:8080/#/`, you will see `Hello
    World` rendered:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果您重新访问URL `http://localhost:8080/#/`，您将看到 `Hello World` 被呈现：
- en: '![](img/b3ba6aec-edc9-4c60-ad26-712c12a42a34.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b3ba6aec-edc9-4c60-ad26-712c12a42a34.png)'
- en: Segregating CSS
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分离CSS
- en: 'Time for segregating CSS. Let''s create a folder inside the `src/assets` folder
    called `stylesheets` and add a `main.css` file. Add the following line of code
    in `main.css`:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候分离CSS了。让我们在 `src/assets` 文件夹中创建一个名为 `stylesheets` 的文件夹，并添加一个 `main.css` 文件。在
    `main.css` 中添加以下代码：
- en: '[PRE12]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The `main.css` will be our main CSS file that includes all other CSS components.
    We can directly add all our style code here as well. But to maintain readability,
    we will be creating separate style sheets for different sections in our applications
    and importing them here.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '`main.css` 将是我们的主CSS文件，其中包含所有其他CSS组件。我们也可以直接在这里添加所有样式代码。但为了保持可读性，我们将为应用程序中的不同部分创建单独的样式表，并在这里导入它们。'
- en: 'Since we will be importing all the style sheets here, now we need to include
    only the `main.css` file in the main application so that it gets loaded. To do
    that, let''s add the following line of code in `src/App.vue`:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们将在这里导入所有样式表，现在我们只需要在主应用程序中包含 `main.css` 文件，以便加载它。为此，让我们在 `src/App.vue` 中添加以下代码：
- en: '[PRE13]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'We have imported a style sheet called `home.css` in `main.css` that does not
    yet exist. So let''s go ahead and create that in the same directory, which is `src/assets`.
    Also, let''s remove the following piece of code from `App.vue` and paste it into
    the `home.css` file: so that our component is clean:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在 `main.css` 中导入了一个名为 `home.css` 的样式表，但这个样式表还不存在。所以让我们继续在相同的目录 `src/assets`
    中创建它。另外，让我们从 `App.vue` 中删除以下代码，并将其粘贴到 `home.css` 文件中，以便我们的组件更加清晰：
- en: '[PRE14]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Introduction to Vuetify
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Vuetify简介
- en: Vuetify is a module that can be used to build materialistic web page designs
    for Vue.js applications. It provides several features that can be used as building
    blocks for our application. It is a UI framework like Bootstrap, but it mostly
    has the material components. For more details, you can go to this link [https://vuetifyjs.com](https://vuetifyjs.com).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Vuetify是一个可以用于构建Vue.js应用程序的物质化网页设计的模块。它提供了几个功能，可以用作我们应用程序的构建块。它是一个类似于Bootstrap的UI框架，但它主要有物质组件。有关更多详细信息，您可以访问此链接
    [https://vuetifyjs.com](https://vuetifyjs.com)。
- en: 'We will be using both Vuetify and Bootstrap combined when building the application. 
    The first step is to install the packages:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建应用程序时，我们将同时使用Vuetify和Bootstrap。第一步是安装这些包：
- en: '[PRE15]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'After these get installed, the next thing we need to do is require these packages
    in our main file. So, in the `src/main.js` file, add the following lines:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完这些之后，我们需要做的下一件事是在我们的主文件中引入这些包。因此，在`src/main.js`文件中，添加以下行：
- en: '[PRE16]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'We also need to use `vuetify.css`, which holds all the style sheets related
    to its design. We will need this as well. We can just simply link a style sheet
    for this. In the `index.html` file, add the following lines of code in your `head`
    section:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要使用`vuetify.css`，其中包含与其设计相关的所有样式表。我们也需要这个。我们可以简单地为此链接一个样式表。在`index.html`文件中，在`head`部分添加以下代码：
- en: '[PRE17]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Vuetify uses material icons well, so also import the fonts. Add the following
    line of code in `index.html` as well:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Vuetify很好地使用了材料图标，因此还要导入字体。在`index.html`中也添加以下代码：
- en: '[PRE18]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Redesigning pages with Vuetify
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Vuetify重新设计页面
- en: Now that we have Vuetify, let's move on to creating the pages for the application.
    provides us with some predefined themes as well. We will use a very simple and
    minimalistic theme for the app. Of course, we can also customize these according
    to our needs.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了Vuetify，让我们继续创建应用程序的页面。它还为我们提供了一些预定义的主题。我们将为应用程序使用非常简单和极简的主题。当然，我们也可以根据需要自定义这些。
- en: 'The outcome of this section will look as follows:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 此部分的结果如下：
- en: '![](img/9116e70e-d17b-43e5-a7dc-09da33118cde.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9116e70e-d17b-43e5-a7dc-09da33118cde.png)'
- en: Redesigning the home page
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重新设计主页
- en: 'In our `App.vue`, replace the file content with the following code:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的`App.vue`中，用以下代码替换文件内容：
- en: '[PRE19]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: This contains several tags that mostly start with `v-`. These are the tags given
    by Vuetify to define our blocks in UI. We have attached a `stylesheet` file with
    the preceding file called `main.css`. Let's add some styling to our `App.vue` page.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这包含了几个标签，大多以`v-`开头。这些是Vuetify给出的标签，用于定义我们UI中的块。我们已经附加了一个名为`main.css`的`stylesheet`文件。让我们为`App.vue`页面添加一些样式。
- en: 'Add the following code to `src/assets/stylesheets/home.css`:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下代码添加到`src/assets/stylesheets/home.css`：
- en: '[PRE20]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: We still have a `div` section with an ID app in it. This is the section where
    all our other `.vue` files will get rendered.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 我们仍然有一个带有ID app的`div`部分。这是我们所有其他`.vue`文件将呈现的部分。
- en: 'Now, in `HelloWorld.vue`, replace the content with this:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在`HelloWorld.vue`中，用以下内容替换内容：
- en: '[PRE21]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Now, if you visit `http://localhost:8080/#/`, you should be able to view the
    home page.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果您访问`http://localhost:8080/#/`，您应该能够查看主页。
- en: Redesigning the contact page
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重新设计联系页面
- en: 'Let''s go ahead with adding a new contact page. The first thing to do is add
    a route to our routes file. In `router/index.js`, add the following code:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续添加一个新的联系页面。要做的第一件事是在我们的路由文件中添加一个路由。在`router/index.js`中，添加以下代码：
- en: '[PRE22]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'What we did here is add a path for the contact page, the name of the component,
    which we did in our export module in the `.vue` file, and the actual name of the
    component. Now we need to build a view file. So let''s create a `Contact.vue` file
    in `src/components/` and add the following content to it:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里做的是为联系页面添加一个路径，组件的名称（我们在`.vue`文件中的导出模块中完成的），以及组件的实际名称。现在我们需要构建一个视图文件。因此，让我们在`src/components/`中创建一个`Contact.vue`文件，并向其中添加以下内容：
- en: '[PRE23]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Now, visit `http://localhost:8080/#/contact` and you should be able to view
    both pages.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，访问`http://localhost:8080/#/contact`，您应该能够查看两个页面。
- en: To make it usable and easily readable for our app, let's rename the `HelloWorld` component
    to the `Home` component. Rename the file `HelloWorld.vue` to `Home.vue`
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使其对我们的应用程序可用且易于阅读，让我们将`HelloWorld`组件重命名为`Home`组件。将文件`HelloWorld.vue`重命名为`Home.vue`
- en: 'Also, change the binding route from `HelloWorld` to `Home` in `App.vue`:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 还要在`App.vue`中将绑定路由从`HelloWorld`更改为`Home`：
- en: '[PRE24]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'In the `routes/index.js` as well, change the component name and the route to `Home` from `HelloWorld`:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在`routes/index.js`中，还要将组件名称和路由从`HelloWorld`更改为`Home`：
- en: '[PRE25]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'We should be able to see something like this when we visit the URL `http://localhost:8080/#/`:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们访问URL `http://localhost:8080/#/`时，应该能看到类似于这样的东西：
- en: '![](img/5a2bd1e8-a96b-49c0-95d8-499db0a047bd.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5a2bd1e8-a96b-49c0-95d8-499db0a047bd.png)'
- en: That's it. You have successfully created a basic static two-page web application!
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 就是这样。您已成功创建了一个基本的静态两页Web应用程序！
- en: Understanding Vue.js components
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解Vue.js组件
- en: The `vue` components are equivalent to the HTML files that you write in an application.
    You can write the plain HTML syntax in `.vue` files. The only thing that needs
    to be taken care of is to wrap all the content with `<template></template>`.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '`vue`组件相当于您在应用程序中编写的HTML文件。您可以在`.vue`文件中编写纯HTML语法。唯一需要注意的是将所有内容包装在`<template></template>`中。'
- en: Vue.js directives
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Vue.js指令
- en: 'Directives are used with a markup language to perform some functions on the
    DOM elements. For example, in HTML markup language, when we write:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 指令与标记语言一起用于执行DOM元素上的一些功能。例如，在HTML标记语言中，当我们写：
- en: '[PRE26]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The `class` used here is a directive for HTML language. Similarly, Vue.js also
    provides a lot of such directives to make application development easier, such
    as:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 这里使用的`class`是HTML语言的一个指令。同样，Vue.js还提供了许多这样的指令，以使应用程序开发更加轻松，例如：
- en: '`v-text`'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`v-text`'
- en: '`v-on`'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`v-on`'
- en: '`v-ref`'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`v-ref`'
- en: '`v-show`'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`v-show`'
- en: '`v-pre`'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`v-pre`'
- en: '`v-transition`'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`v-transition`'
- en: '`v-for`'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`v-for`'
- en: v-text
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: v-text
- en: 'You can use `v-text` when you want to display some variables that you have
    to define dynamically. Let''s see with an example. In `src/components/Home.vue`,
    let''s add the following:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 当您想要显示必须动态定义的一些变量时，可以使用`v-text`。让我们看一个例子。在`src/components/Home.vue`中，让我们添加以下内容：
- en: '[PRE27]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: The code inside the script tag is a data variable, which binds the data defined
    inside it to this component. When you change the value of that variable message,
    the `div` element with that directive also gets updated.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本标记内的代码是一个数据变量，它将其中定义的数据绑定到此组件。当您更改该变量message的值时，具有该指令的`div`元素也会更新。
- en: 'If we visit the URL (`http://localhost:8080/#/`), we can see the following:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们访问URL（`http://localhost:8080/#/`），我们可以看到以下内容：
- en: '![](img/3e7c450c-8772-441e-a681-a4e8e7392069.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3e7c450c-8772-441e-a681-a4e8e7392069.png)'
- en: v-on
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: v-on
- en: 'This directive is used for event handling. We can use this to trigger some
    logic in your application. For example, let''s say we want to reply to a question
    that we did in the last example, for that we can do the following. Change the
    code in `src/components/Home.vue` to the following:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 这个指令用于事件处理。我们可以使用它来触发应用程序中的一些逻辑。例如，假设我们想回答上一个示例中的问题，为此我们可以执行以下操作。将`src/components/Home.vue`中的代码更改为以下内容：
- en: '[PRE28]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The first screen will be as follows:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个屏幕将如下所示：
- en: '![](img/b7d00360-1b89-4930-b816-754317639f37.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b7d00360-1b89-4930-b816-754317639f37.png)'
- en: 'When you click REPLY, you will see the following:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 当您单击REPLY时，您将看到以下内容：
- en: '![](img/5cdf10ea-add8-45db-b66f-8ca237115802.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5cdf10ea-add8-45db-b66f-8ca237115802.png)'
- en: These are the directives that we will be using mostly in our app. There are
    a lot more other directives as well that we will explore on the way. If you want
    to learn more about each of these, you can visit `https://012.vuejs.org/api/directives.html`.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是我们将在应用程序中主要使用的指令。还有很多其他指令，我们将在途中探索。如果您想了解更多关于这些的信息，您可以访问`https://012.vuejs.org/api/directives.html`。
- en: Data binding
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据绑定
- en: '**Data binding** is the process of synchronizing data. For example, for the
    same example for what we did on `v-text`, we can do it with data binding with
    the mustaches, in other words using the `{{}}` operators.'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据绑定**是同步数据的过程。例如，对于我们在`v-text`上所做的相同示例，我们可以使用双大括号进行数据绑定，换句话说，使用`{{}}`操作符。'
- en: 'For example, we can use the `{{message}}` instead of using the Vue.js directive
    for the message. Let''s change the code in `src/components/Home.vue` to the following:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们可以使用`{{message}}`而不是使用Vue.js指令来显示消息。让我们将`src/components/Home.vue`中的代码更改为以下内容：
- en: '[PRE29]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: This will behave the same way as what we did with `v-text`.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 这将与我们在`v-text`中所做的方式相同。
- en: Handling forms with Vue.js
  id: totrans-163
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Vue.js处理表单
- en: Now that we have a basic idea of how Vue.js works, let's roll ahead with our
    first form, where we will be adding the details of movies and displaying those
    movies in the home page so that  users can view them.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们对Vue.js的工作原理有了基本的了解，让我们继续进行我们的第一个表单，我们将在其中添加电影的详细信息，并在主页上显示这些电影，以便用户可以查看它们。
- en: Creating a movies listing page
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建电影列表页面
- en: 'First of all, let''s start with creating static movie cards for our home page
    and we will make this data dynamic in the next step. In `Home.vue`, replace the
    content inside `template` with the following code:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们从为我们的主页创建静态电影卡开始，然后我们将在下一步中使这些数据变得动态。在`Home.vue`中，用以下代码替换`template`中的内容：
- en: '[PRE30]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Also, replace the content in `home.css` as follows:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 还要将`home.css`中的内容替换为以下内容：
- en: '[PRE31]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Also, in `App.vue`, replace the content with the following:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在`App.vue`中，用以下内容替换内容：
- en: '[PRE32]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Finally, replace the content in `src/main.js`:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，替换`src/main.js`中的内容：
- en: '[PRE33]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'With this, we should have a page like this on the home page:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这个，我们应该在主页上有一个像这样的页面：
- en: '![](img/4ca9ae33-37ba-4cb9-8cce-8760481f572b.png)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4ca9ae33-37ba-4cb9-8cce-8760481f572b.png)'
- en: We will be making these pages dynamic as we go.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 随着我们的进展，我们将使这些页面变得动态起来。
- en: Creating an Add movie form
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建一个添加电影表单
- en: 'First, we need to add a link that takes us to a form to add the movies. For
    that, we need to change the toolbar in `App.vue`.  So, let''s add a link to the
    toolbar in `App.vue`:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要添加一个链接，以便跳转到一个添加电影的表单。为此，我们需要更改`App.vue`中的工具栏。因此，让我们在`App.vue`中的工具栏中添加一个链接：
- en: '[PRE34]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Now that we have the link, we need to add a route to link it to the page. Just
    like we did for our `Contact` page, let''s add a route that will be used to add
    movies to our application. So, in `routes/index.js`:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了链接，我们需要添加一个路由将其链接到页面。就像我们为我们的`Contact`页面所做的那样，让我们添加一个路由，用于向我们的应用程序添加电影。因此，在`routes/index.js`中：
- en: '[PRE35]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Here, we added a route for `AddMovie`, which now means that we can access the
    add movie page at `http://localhost:8080/#/movies/add`.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们为`AddMovie`添加了一个路由，这意味着我们现在可以在`http://localhost:8080/#/movies/add`访问添加电影页面。
- en: The next thing we need to do now is to create the `vue` component file. For
    that, let's add a new `AddMovie.vue` file in `src/components`. Vuetify provides
    a very simple way to create forms and add validations as well. You can look for
    more information at [https://vuetifyjs.com/components/forms](https://vuetifyjs.com/components/forms).
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们需要做的下一件事是创建`vue`组件文件。为此，让我们在`src/components`中添加一个新的`AddMovie.vue`文件。Vuetify提供了一种非常简单的方法来创建表单并添加验证。您可以在[https://vuetifyjs.com/components/forms](https://vuetifyjs.com/components/forms)上查找更多信息。
- en: 'Let''s add the following content to `src/components/AddMovie.vue`:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将以下内容添加到`src/components/AddMovie.vue`中：
- en: '[PRE36]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: Vuetify also provides some basic validations to the form. Let's add some validation
    to it as well.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: Vuetify还为表单提供了一些基本验证。让我们也对其进行一些验证。
- en: 'Add the following code to `AddMovie.vue` inside the `script` tag:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下代码添加到`AddMovie.vue`的`script`标签内：
- en: '[PRE37]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'If we look into the form element in `AddMovie.vue`, the line that says:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们查看`AddMovie.vue`中的表单元素，其中有一行：
- en: '[PRE38]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: What `v-model="valid"` part does here is, it makes sure the form does not get
    submitted until it is true, which again ties back to the script that we have added
    in the bottom. Also, let's look into the validations that we have added to the
    form.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的`v-model="valid"`部分的作用是，它确保表单在为true之前不会被提交，这再次与我们在底部添加的脚本相关联。此外，让我们看看我们已经添加到表单中的验证。
- en: 'The first basic validation is the `required` validation:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个基本验证是`required`验证：
- en: '[PRE39]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: This adds a `required` validation in the `name` field.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 这在`name`字段中添加了一个`required`验证。
- en: 'Also, for the `release_year` field, we want it to be a dropdown of years, so,
    for that, we have added the following:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，对于`release_year`字段，我们希望它是一个年份的下拉菜单，因此，我们添加了以下内容：
- en: '[PRE40]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: This adds items to the select list dynamically through the script.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 这通过脚本动态向选择列表添加项目。
- en: As regards the last part, we have two buttons `Submit` and `Clear`, which call
    the methods `submit() `and `clear()`, respectively.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 至于最后一部分，我们有两个按钮`Submit`和`Clear`，分别调用方法`submit()`和`clear()`。
- en: 'Now, you should have a form like this when you visit the URL (`http://localhost:8080/#/movies/add`):'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当您访问URL（`http://localhost:8080/#/movies/add`）时，您应该有一个如下的表单：
- en: '![](img/51c30522-e0d2-4cb9-986b-ad482a9382be.png)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![](img/51c30522-e0d2-4cb9-986b-ad482a9382be.png)'
- en: The `*` in the **Movie Name** denotes that it is a required field.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '**电影名称**中的`*`表示它是一个必填字段。'
- en: 'If you have noticed, we have been adding a `#` to all the routes that we have
    added. That is because it is the default setting for the Vue.js router. We can
    remove that by adding `mode: ''history''` in `routes/index.js`:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '如果您注意到，我们一直在添加`#`到我们添加的所有路由。这是因为这是Vue.js路由器的默认设置。我们可以通过在`routes/index.js`中添加`mode:
    ''history''`来删除它：'
- en: '[PRE41]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'Now, we can all route without adding the `#` in the URL as follows:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以在URL中添加路由而不添加`#`，如下所示：
- en: '`http://localhost:8080/`'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`http://localhost:8080/`'
- en: '`http://localhost:8080/contact`'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`http://localhost:8080/contact`'
- en: '`http://localhost:8080/movies/add`'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`http://localhost:8080/movies/add`'
- en: Communicating with servers
  id: totrans-208
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与服务器通信
- en: We now have a movie listing page, we have an add movie page, so the next thing
    we have to do is save the data into the MongoDB when we submit the form.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了一个电影列表页面，我们有一个添加电影页面，所以接下来我们要做的是在提交表单时将数据保存到MongoDB中。
- en: Adding express to our application
  id: totrans-210
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将express添加到我们的应用程序
- en: Now that we have all the components in place, it's time to add the server layer
    to our application.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们所有的组件都就位了，是时候为我们的应用程序添加服务器层了。
- en: 'Let''s start by adding the express package with the following:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先添加express软件包，如下所示：
- en: '[PRE42]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: The next part is to create the necessary endpoints and models so that we can
    add the movies to the database.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是创建必要的端点和模型，以便我们可以将电影添加到数据库中。
- en: 'To do that, we first need to install the required packages:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 为了做到这一点，我们首先需要安装所需的软件包：
- en: '`body-parser`: To parse the incoming  requests'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`body-parser`：解析传入的请求'
- en: '`cors`: To handle cross-origin requests between frontend and backend'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cors`：处理前端和后端之间的跨域请求'
- en: '`morgan`: HTTP request logger'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`morgan`：HTTP请求记录器'
- en: '`mongoose`: Object modeling for MongoDB'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mongoose`：MongoDB的对象建模'
- en: 'Let''s install all of these packages by running the following command in the
    Terminal:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过在终端中运行以下命令来安装所有这些软件包：
- en: '[PRE43]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Adding a server file
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加服务器文件
- en: 'Now, we need to set up the server for our application. Let''s add a file called `server.js` in
    the root of the application and add the following content:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要为我们的应用程序设置服务器。让我们在应用程序的根目录中添加一个名为`server.js`的文件，并添加以下内容：
- en: '[PRE44]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: Here, we have set up a server that tells the express server to run on the 8081
    port. We will be using this server to handle all the API requests via express.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们设置了一个服务器，告诉express服务器在8081端口上运行。我们将使用此服务器通过express处理所有API请求。
- en: Also, we have required and used all the packages that we need in this `server.js` file.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们在`server.js`文件中需要的所有软件包都已被引入和使用。
- en: 'Also, for the mongoose connection, we have added a connection to our local
    database called `movie_rating_app` with the following code block:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，对于mongoose连接，我们已添加了一个连接到我们的名为`movie_rating_app`的本地数据库的连接，代码如下：
- en: '[PRE45]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: As I mentioned earlier, if the database does not exist yet, it will automatically
    get created when we add our very first Mongoose document to the DB.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我之前提到的，如果数据库尚不存在，当我们向DB添加我们的第一个Mongoose文档时，它将自动创建。
- en: 'The next thing is to run our MongoDB server. Let''s do that by running the
    following command in the Terminal:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来要做的是运行我们的MongoDB服务器。让我们通过在终端中运行以下命令来做到这一点：
- en: '[PRE46]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Once the Mongo server is up, let''s spin up our `node` server for this application
    using the following command:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦Mongo服务器启动，让我们使用以下命令为此应用程序启动我们的`node`服务器：
- en: '[PRE47]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Now, when we open `http://localhost:8081/`, you should be able to see the following
    message:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当我们打开`http://localhost:8081/`时，您应该能够看到以下消息：
- en: '![](img/51654a80-e1f1-452d-84aa-559b4711e2e1.png)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![](img/51654a80-e1f1-452d-84aa-559b4711e2e1.png)'
- en: 'Until now, we have our frontend server up and running on port 8080 with the
    following:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们的前端服务器在端口8080上运行：
- en: '[PRE48]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'The backend server running on port 8081 with the following:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 后端服务器在端口8081上运行，如下所示：
- en: '[PRE49]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'One important thing to remember is that whenever we change the code in `server.js`,
    we have to restart the server by running the following command:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 一个重要的事情要记住的是，每当我们更改`server.js`中的代码时，我们都必须通过运行以下命令来重新启动服务器：
- en: '[PRE50]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'This is a very tedious task. However, there is one good way to get rid of that.
    There is a package called `nodemon`, which, when installed, restarts the server
    automatically whenever the code gets updated and we don''t have to do it manually
    every time. So, let''s go ahead and install the package:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一项非常繁琐的任务。但是，有一种很好的方法可以摆脱它。有一个名为`nodemon`的软件包，安装后，每当代码更新时都会自动重新启动服务器，我们不必每次手动执行。因此，让我们继续安装该软件包：
- en: '[PRE51]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'With the package installed, now we can start our server with the following
    command:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了软件包后，现在我们可以使用以下命令启动我们的服务器：
- en: '[PRE52]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: Adding a Movie model
  id: totrans-246
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加一个Movie模型
- en: 'The next thing is to add the movies to the database when we submit the form.
    Let''s go ahead and create a folder called `models` in the root directory and
    add a `Movie.js` file in the `models` directory:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来要做的是在提交表单时将电影添加到数据库。让我们继续在根目录中创建一个名为`models`的文件夹，并在`models`目录中添加一个`Movie.js`文件：
- en: We will be using singular capitalized names for Models, and all lowercase plural
    names for `Controllers` files.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用大写的单数名称来命名模型，以及所有小写的复数名称来命名`Controllers`文件。
- en: 'The following code into the `Movie.js`:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 将以下代码添加到`Movie.js`中：
- en: '[PRE53]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: Here, we have created a Movie model that would take all the four attributes
    that we have added to our `AddMovie.vue` form earlier.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们创建了一个Movie模型，该模型将接受我们之前在`AddMovie.vue`表单中添加的所有四个属性。
- en: Adding movies controller
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加电影控制器
- en: 'Now, the last thing we need to set up is an endpoint to save the movie to the
    database. Let''s create a folder called `controllers` in the root directory and
    add a file called `movies.js` inside the directory and add the following code:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要设置的最后一件事是设置一个端点以将电影保存到数据库中。让我们在根目录中创建一个名为`controllers`的文件夹，并在该目录中添加一个名为`movies.js`的文件，并添加以下代码：
- en: '[PRE54]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: Here we have added an endpoint that takes the post requests with the given params
    and creates a Mongoose document in the database that we have configured.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们添加了一个端点，该端点接受具有给定参数的post请求，并在我们配置的数据库中创建一个Mongoose文档。
- en: 'Since these controllers have the routes, we need to include these files in
    our main entry point as well. For our backend, the main entry file is `server.js`.
    So, let''s add the following highlighted code block in `server.js`:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这些控制器有路由，我们也需要在我们的主入口点中包含这些文件。对于我们的后端，主入口文件是`server.js`。所以，让我们在`server.js`中添加以下突出显示的代码块：
- en: '[PRE55]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: This code block will include all our controllers' files and we don't have to
    add each of them manually.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 这个代码块将包括所有我们的控制器文件，我们不必手动添加每一个。
- en: Connecting frontend and backend
  id: totrans-259
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接前端和后端
- en: Now, we have the model and an endpoint. The next thing to do is to call this
    endpoint when we hit the Submit button in `AddMovie.vue`.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们有了模型和一个端点。接下来要做的是在`AddMovie.vue`中点击`提交`按钮时调用这个端点。
- en: This is the part where we need to communicate the frontend and the backend.
    For this, we need to use a separate package called axios.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们需要通信前端和后端的部分。为此，我们需要使用一个名为axios的单独包。
- en: The axios package helps us to make the HTTP requests from the Node.js. It helps
    to make the Ajax calls from the frontend. There are several alternatives for axios
    as well, such as fetch, and superagent. But axios has been successful enough to
    become the most popular among these. So we will be using the same as well.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: axios包帮助我们从Node.js发出HTTP请求。它有助于从前端发出Ajax调用。还有一些axios的替代方案，比如fetch和superagent。但axios已经成功地成为其中最受欢迎的。所以我们也将使用它。
- en: Installing axios
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装axios
- en: 'Now, in order to communicate between the client and the server, we will be
    using the `axios` library. So, let''s install the library first:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，为了在客户端和服务器之间通信，我们将使用`axios`库。所以，让我们首先安装这个库：
- en: '[PRE56]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: Connecting all the pieces
  id: totrans-266
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接所有的部分
- en: 'Now, we have all the things in place (movie model, movies controller, and axios)
    to communicate between the client and server. The last thing to do now is to connect
    these pieces when we click the submit button in the Movie Add form. If you remember,
    we added a placeholder before while submitting the button in `AddMovie.vue`:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经有了所有的东西（电影模型、电影控制器和axios）来在客户端和服务器之间通信。现在要做的最后一件事就是在点击电影添加表单中的提交按钮时连接这些部分。如果你记得的话，我们之前在`AddMovie.vue`中提交按钮之前添加了一个占位符：
- en: '[PRE57]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'This code tells us to execute the `submit()` method when the button is clicked.
    We also have it in the `script` section:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码告诉我们在点击按钮时执行`submit()`方法。我们也在`script`部分中有它：
- en: '[PRE58]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'All the methods that we will have will be added in this section. Now that we
    have our placeholder for `submit`, let''s modify this piece of code to incorporate
    the Movie Add form:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在这一部分添加所有的方法。现在我们有了`submit`的占位符，让我们修改这段代码以整合电影添加表单：
- en: '[PRE59]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: This should suffice. Now, let's go ahead and add a movie from the UI itself
    from the `http://localhost:8080/movies/add` endpoint. We should be able to save
    a movie's record in the MongoDB. Let me explain what we did here a little bit.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 这应该足够了。现在，让我们继续从UI本身添加一部电影到`http://localhost:8080/movies/add`端点。我们应该能够在MongoDB中保存一部电影的记录。让我稍微解释一下我们在这里做了什么。
- en: When we hit the `Submit` button, we made an AJAX request via axios to hit the
    post endpoint in the movies controller. The `post` method in movies controller,
    in turn, saves the record with the parameters that we gave according to the model
    schema we designed for the movies. And, when the process is complete, redirect
    the page back to the homepage.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们点击`提交`按钮时，我们通过axios发出了一个AJAX请求，以命中电影控制器中的post端点。电影控制器中的`post`方法，反过来，根据我们为电影设计的模型架构保存了记录。当过程完成时，将页面重定向回主页。
- en: 'To check whether the record was actually created or not, let''s look into MongoDB:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 为了检查记录是否真的被创建了，让我们查看一下MongoDB：
- en: '[PRE60]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'We can see the record being created with the parameters we provided in the
    form:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到记录是用我们在表单中提供的参数创建的：
- en: '![](img/c6be4e4e-6ffe-48c6-93ac-e9483534f9d7.png)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c6be4e4e-6ffe-48c6-93ac-e9483534f9d7.png)'
- en: Adding form validations
  id: totrans-279
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加表单验证
- en: 'We covered how to add the validations in the previous section as well. Let''s
    go ahead and add a few validations to our movie add form. We will add the following
    validations:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也在前面的部分中介绍了如何添加验证。让我们继续为我们的电影添加表单添加一些验证。我们将添加以下验证：
- en: '`Movie Name` cannot be empty'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`电影名称`不能为空'
- en: '`Movie Description` is optional'
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`电影描述`是可选的'
- en: '`Movie Release Year` cannot be blank'
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`电影发行年份`不能为空'
- en: The genre of the movie will be required and will be maxed to 80 characters
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电影的类型是必需的，最多80个字符
- en: 'In `AddMovie.vue`, let''s add the rules in input fields and bind the rules
    from the script:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 在`AddMovie.vue`中，让我们在输入字段中添加规则，并从脚本中绑定规则：
- en: '[PRE61]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'Now, if we try to submit the form with all the fields blank, and the field `Movie
    Genre` with more than 80 characters, we should not be able to submit the form.
    The form will display these error messages:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们尝试提交所有字段为空的表单，并且字段`电影类型`超过80个字符，我们应该无法提交表单。表单将显示这些错误消息：
- en: '![](img/b45e3b2c-8263-47e3-b40d-c0554d70fddb.png)'
  id: totrans-288
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b45e3b2c-8263-47e3-b40d-c0554d70fddb.png)'
- en: Adding a flash message
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加一个闪存消息
- en: 'We have covered the basics of app building. Now that we can add a movie, what
    would be really nice is to have a certain message when the movie is saved successfully
    in the DB or notify if something goes wrong. There are several `npm` packages
    to do just that. We can also build our own as well. For this application, we will
    be using a package called: `vue-swal(https://www.npmjs.com/package/vue-swal)`.
    Let''s add the package first:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经介绍了应用程序构建的基础知识。现在我们可以添加一部电影，当电影在数据库中成功保存时，有一个特定的消息会很好，或者在出现问题时通知。有几个`npm`包可以做到这一点。我们也可以自己构建。对于这个应用程序，我们将使用一个名为：`vue-swal(https://www.npmjs.com/package/vue-swal)`的包。让我们首先添加这个包：
- en: '[PRE62]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Now, let''s include the package in our `main.js` file:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们在我们的`main.js`文件中包含这个包：
- en: '[PRE63]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'Now, let''s modify our `AddMovie.vue` to display the flash message when the
    action is performed successfully or when it fails:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们修改我们的`AddMovie.vue`，以便在成功执行操作或失败时显示闪存消息：
- en: '[PRE64]'
  id: totrans-295
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Now, with this, when we submit a movie, we should be able to see a success
    message before redirecting to the homepage:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当我们提交一部电影时，我们应该能够在重定向到主页之前看到成功消息：
- en: '![](img/e379a65e-69c5-4a66-931b-ce8bf96ff61f.png)'
  id: totrans-297
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e379a65e-69c5-4a66-931b-ce8bf96ff61f.png)'
- en: There are also several other packages for the message alerting, such as `vue-flash`,
    `vuex-flash`, and `sweet-alert`.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些其他用于消息提醒的包，例如`vue-flash`、`vuex-flash`和`sweet-alert`。
- en: Loading dynamic content on the homepage
  id: totrans-299
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在主页上加载动态内容
- en: Currently, our homepage has all the static movies in the content. Let's fill
    the data with the data that we have added to the movies in our database. For that,
    the first thing to do is to add a few movies to the database, which we can do
    via the `http://localhost:8080/movies/add` endpoint from the UI.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们的主页上有所有静态电影的内容。让我们用我们已经添加到数据库中的数据填充数据。为此，首先要做的是向数据库中添加一些电影，我们可以通过UI的`http://localhost:8080/movies/add`端点来实现。
- en: API endpoint to fetch all movies
  id: totrans-301
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用于获取所有电影的API端点
- en: 'First, we need to add an endpoint to fetch all the movies from the Mongo database.
    So, let''s first add an endpoint to fetch all the movies in `controllers/movies.js`:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要添加一个端点，以从Mongo数据库中获取所有电影。因此，让我们首先在`controllers/movies.js`中添加一个端点，用于获取所有电影：
- en: '[PRE65]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'Now, if you hit the URL `http://localhost:8081/movies`, we should be able to
    see the entire movie list that we have added via UI or the mongo shell itself.
    Here is what I have:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果您访问URL`http://localhost:8081/movies`，我们应该能够看到我们通过UI或mongo shell添加的整个电影列表。这是我拥有的：
- en: '![](img/3d467d70-d506-4f39-98ec-370eb03e6d67.png)'
  id: totrans-305
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3d467d70-d506-4f39-98ec-370eb03e6d67.png)'
- en: Modifying Home.vue to display dynamic content
  id: totrans-306
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修改Home.vue以显示动态内容
- en: 'Now, let''s update our `Home.vue`, which will fetch the movies from our Mongo
    database and display the dynamic content. Replace the code in `Home.vue` with
    the following content:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们更新我们的`Home.vue`，它将从我们的Mongo数据库中获取电影并显示动态内容。用以下内容替换`Home.vue`中的代码：
- en: '[PRE66]'
  id: totrans-308
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'This code calls a method when the page loads, which is defined in the `mounted` method.
    The method fetches the movies using an axios request. Now we have pulled the data
    from the server to the client. Now, we will use the `vue` directive to loop through
    these movies and render in the home page. Replace the content of the `<template>`
    tag with the following code in `Home.vue`:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 此代码在页面加载时调用一个方法，该方法在`mounted`方法中定义。该方法使用axios请求获取电影。现在，我们已经从服务器端拉取了数据到客户端。现在，我们将使用`vue`指令循环遍历这些电影并在主页中呈现。在`Home.vue`中，用以下代码替换`<template>`标签的内容：
- en: '[PRE67]'
  id: totrans-310
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'As you can see, we have used the `vue` directive `for`. The key is used to
    assign a unique identity to each record. Now, when you visit `http://localhost:8080/`,
    you will see the following:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，我们使用了`vue`指令`for`。键用于为每个记录分配唯一标识。现在，当您访问`http://localhost:8080/`时，您将看到以下内容：
- en: '![](img/d00b295b-283b-4516-968f-b7a6db462c38.png)'
  id: totrans-312
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d00b295b-283b-4516-968f-b7a6db462c38.png)'
- en: We have successfully built an application where we can add the movies to the
    MongoDB and display the DB records on the home page.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已成功构建了一个应用程序，可以将电影添加到MongoDB并在主页上显示DB记录。
- en: Adding a movie profile page
  id: totrans-314
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加电影详情页面
- en: 'Now, we need a page where a logged-in user can go and rate the movie. To do
    that, let''s add a link to the title of the movie on the home page. In `Home.vue`,
    replace the template part with the following content:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要一个页面，用户可以在该页面上对电影进行评分。为此，让我们在主页上电影的标题旁添加一个链接。在`Home.vue`中，用以下内容替换模板部分：
- en: '[PRE68]'
  id: totrans-316
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: Here, we added a link to the title that will take the user to its corresponding
    detail page.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们添加了一个链接，用户可以点击该链接转到相应的详细页面。
- en: 'Let''s add a page for the detailed view of the movie page where a logged-in
    user can go and rate the movie. Create a file called `Movie.vue` inside the `src/components`
    directory and add the following content:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们添加一个详细查看电影页面的页面，用户可以在该页面上对电影进行评分。在`src/components`目录中创建一个名为`Movie.vue`的文件，并添加以下内容：
- en: '[PRE69]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: We have added an axios request here to fetch the movie when a user clicks on
    the title of the movie.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里添加了一个axios请求，以便在用户点击电影标题时获取电影。
- en: 'Now, we also need to define the routes to the page. So, in `routes/index.js`,
    replace the content with the following:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们还需要定义指向该页面的路由。因此，在`routes/index.js`中，用以下内容替换内容：
- en: '[PRE70]'
  id: totrans-322
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: Now, we need to add an endpoint for a GET request to fetch the movie with the
    specified ID.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要添加一个用于获取指定ID的电影的GET请求的端点。
- en: 'Replace the content in `controllers/movies.js` with the following:'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 将`controllers/movies.js`中的内容替换为以下内容：
- en: '[PRE71]'
  id: totrans-325
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'Now, when we click the link on the title of the movie, we should be able to
    see the following page:'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当我们点击电影标题上的链接时，我们应该能够看到以下页面：
- en: '![](img/6a91082a-2182-4be0-bba0-97d1b7418b1a.png)'
  id: totrans-327
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a91082a-2182-4be0-bba0-97d1b7418b1a.png)'
- en: Here, we have also added an area where a user can click on to Rate this Movie.
    Let's move ahead to add the functionality to rate the movie. For this, we will
    be using a package called `vue-star-rating`, which makes it easy to add the rating
    component. You can find this example on this link as well at `https://jsfiddle.net/anteriovieira/8nawdjs7/`.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们还添加了一个区域，用户可以点击以对电影进行评分。让我们继续添加对电影进行评分的功能。为此，我们将使用一个名为`vue-star-rating`的包，它可以轻松添加评分组件。您也可以在此链接上找到此示例：`https://jsfiddle.net/anteriovieira/8nawdjs7/`。
- en: 'Let''s first add the package:'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先添加该包：
- en: '[PRE72]'
  id: totrans-330
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'In `Movie.vue`, replace the content  with the following:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 在`Movie.vue`中，用以下内容替换内容：
- en: '[PRE73]'
  id: totrans-332
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'Let''s also update the code to call the `rate`  method when Rate this Movie
    is clicked. In `Movie.vue`, update the following line of code:'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们还更新代码，当点击“Rate this Movie”时调用`rate`方法。在`Movie.vue`中，更新以下代码行：
- en: '[PRE74]'
  id: totrans-334
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Now, the last thing we need to do is add the `rate` endpoint in `movies.js`:'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要做的最后一件事是在`movies.js`中添加`rate`端点：
- en: '[PRE75]'
  id: totrans-336
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'The endpoint saves the user ratings in a separate collection called `Rating`,
    which we haven''t created yet. Let''s go ahead and do that as well. Create a file
    called `Rating.js` inside the `models` directory and add the following content:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 该端点将用户评分保存在一个名为`Rating`的单独集合中，我们尚未创建。让我们继续做这件事。在`models`目录中创建一个名为`Rating.js`的文件，并添加以下内容：
- en: '[PRE76]'
  id: totrans-338
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'Include the same model in `movies.js` as well:'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 在`movies.js`中也包括相同的模型：
- en: '[PRE77]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'That''s it! Now a user should be able to rate a movie when logged-in. The user
    should get a popup when Rate this movie is clicked and display the rated score
    upon successful rating with a thank you message:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 就是这样！现在用户应该能够在登录后对电影进行评分。当点击“评分这部电影”时，用户应该收到一个弹出窗口，并在成功评分后显示评分分数和一条感谢消息。
- en: '![](img/7c9354a3-fa9a-4300-bc98-d2e691e29923.png)'
  id: totrans-342
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7c9354a3-fa9a-4300-bc98-d2e691e29923.png)'
- en: Summary
  id: totrans-343
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we covered what Vue.js is! We built a static application that
    lists the movies followed by adding the dynamic functionality to a movies listing
    via a form that stores the movies in the MongoDB. We also learned about Vue.js
    components, Data Binding, and Vue.js Directives.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了Vue.js是什么！我们构建了一个静态应用程序，列出了电影，然后通过一个存储电影在MongoDB中的表单，为电影列表添加了动态功能。我们还学习了Vue.js组件、数据绑定和Vue.js指令。
- en: We also added the functionality for users to be able to rate the movies.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还添加了用户能够对电影进行评分的功能。
- en: In the next chapter, we will add the users and sign in/sign up functionality
    in the same application.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将在同一个应用程序中添加用户和登录/注册功能。
