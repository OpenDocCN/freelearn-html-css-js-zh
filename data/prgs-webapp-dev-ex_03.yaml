- en: Making Your Website Secure
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使您的网站安全
- en: It's surprising that no website utilizes HTTPS today. Securing a website was
    difficult in the past, but most barriers to security have been erased in recent
    years. Some of those barriers included the price, technical requirements, and
    performance concerns.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在没有任何网站使用HTTPS，这令人惊讶。过去保护网站很困难，但近年来大多数安全障碍都已被消除。这些障碍包括价格、技术要求和性能担忧。
- en: To qualify as a progressive web application, a website must be served via HTTPS.
    Service workers are gated behind HTTPS because they run in the background and
    are designed to perform tasks that could compromise privacy if they are not protected.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 要成为渐进式网络应用，网站必须通过HTTPS提供服务。服务工作者位于HTTPS之后，因为它们在后台运行，旨在执行可能在不受保护的情况下损害隐私的任务。
- en: 'With reduced and eliminated barriers, search engines and browsers have increased
    HTTPS''s visibility to consumers because of improved search engine rankings, visual
    queues in the browser, and the gating APIs behind HTTPS:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 减少和消除障碍后，由于搜索引擎排名的提高、浏览器中的视觉提示以及HTTPS背后的门控API，搜索引擎和浏览器增加了HTTPS对消费者的可见性：
- en: '![](img/00028.jpeg)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00028.jpeg)'
- en: This means that every website now has incentives to migrate from HTTP to HTTPS.
    But there are still some issues that you will need to deal with for a successful
    HTTPS strategy.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着每个网站现在都有从HTTP迁移到HTTPS的激励措施。但仍然有一些问题您需要解决，以确保HTTPS策略的成功。
- en: 'In this chapter, you will learn the following topics:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习以下主题：
- en: What SSL/TLS and HTTPS are
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是SSL/TLS和HTTPS
- en: Common objections, reasons to migrate today HTTPS
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常见反对意见，迁移到HTTPS的理由
- en: An HTTPS migration strategy
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: HTTPS迁移策略
- en: SSL history
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SSL历史
- en: The **Secure Socket Layer** (**SSL**) certificates represent the underpinnings
    of trust in most web and internet transactions. Trust is the key word when it
    comes to SSL and HTTPS. When a website uses SSL, the communication between the
    browser and the server is encrypted, but to obtain an SSL certificate, you must
    establish a level of trust with an issuing authority.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**安全套接字层**（**SSL**）证书代表了大多数网络和互联网交易中信任的基础。当谈到SSL和HTTPS时，信任是关键词。当网站使用SSL时，浏览器和服务器之间的通信是加密的，但为了获得SSL证书，您必须与颁发机构建立一定程度的信任。'
- en: To enable SSL, you must install a certificate on your server. Certificates are
    issued by a **certificate authority** (**CA**). Today, there are many certificate
    authorities, and it would be difficult to list them all. You should search for
    the best provider for your needs. I will discuss a few in this chapter. You will
    also learn about the different types of certificates and the additional features
    that CAs *package* them with. In the not too distant past, Network Solutions was
    the only authority from which available to purchase a certificate.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用SSL，您必须在服务器上安装证书。证书由**证书颁发机构**（**CA**）颁发。如今，有许多证书颁发机构，很难一一列举。您应该寻找最适合您需求的最佳提供商。在本章中，我将讨论其中的一些。您还将了解不同类型的证书以及CA**打包**的附加功能。在不久的过去，Network
    Solutions是唯一一个可以购买证书的权威机构。
- en: Not only were they the only game in town, you had to navigate lots of red tape.
    If they did not like your paperwork, they would reject you. It was almost impossible
    for individuals to buy a certificate as domain ownership needed to be tied to
    a registered business.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 他们不仅是镇上唯一的游戏，您还得处理大量的繁琐手续。如果他们不喜欢您的文件，他们会拒绝您。个人购买证书几乎是不可能的，因为域名所有权需要与注册企业绑定。
- en: This limited availability led to high prices for annual certificates. The average
    blog, business, or organization never considered using SSL because of the cost.
    This limited SSL to sites that transferred sensitive information, such as credit
    card and bank account numbers, because of the original barriers.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这种有限的可用性导致了年度证书的高价。平均博客、企业或组织从未考虑过使用SSL，因为成本问题。这限制了SSL的使用，仅限于传输敏感信息（如信用卡和银行账户号码）的网站，因为这些原始障碍。
- en: The certificate cost was not limited to just the annual certificate cost—hosting
    a secure site was prohibitive. Because web technology had not evolved, SSL was
    limited to a single domain per IP address. This meant that sites needed to pay
    for a dedicated IP address and, often, a dedicated web server. $4.99-a-month shared-hosting
    plans were not an option if you wanted encryption.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 证书成本不仅限于年度证书成本——托管安全网站是昂贵的。因为网络技术尚未发展，SSL限制为每个IP地址一个域名。这意味着网站需要支付专用IP地址的费用，通常还需要支付专用Web服务器的费用。如果您想要加密，每月4.99美元的共享托管计划不是选项。
- en: The HTTPS story has changed since then. There are many free and low-cost certificate
    authorities, removing the annual cost barrier. HTTP protocol and web server technology
    has also advanced. Today, you can host multiple sites on the same IP address using
    different certificates and host headers (domains).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 自那时起，HTTPS的故事已经改变。有许多免费和低成本的证书授权机构，消除了年度成本障碍。HTTP协议和Web服务器技术也得到了发展。今天，您可以使用不同的证书和主机头（域名）在同一IP地址上托管多个网站。
- en: '**Server Name Indication** (**SNI**) was added to the TLS specification in
    2003 ([https://en.wikipedia.org/wiki/Server_Name_Indication](https://en.wikipedia.org/wiki/Server_Name_Indication)).
    This allows servers to host multiple domains on the same IP and port number using
    TLS. Originally, the server managed the host header name translation once the
    HTTP connection was established, or after the TLS handshake.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '**服务器名称指示**（**SNI**）于2003年被添加到TLS规范中（[https://en.wikipedia.org/wiki/Server_Name_Indication](https://en.wikipedia.org/wiki/Server_Name_Indication)）。这允许服务器在同一IP和端口号上使用TLS托管多个域名。最初，服务器在HTTP连接建立后或TLS握手后管理主机头名称的转换。'
- en: The 2003 TLS specification change has the client include the domain name as
    part of the TLS negotiation. Now, web servers can use their internal host header
    tables to determine the desired website.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 2003年的TLS规范变更使得客户端将域名作为TLS协商的一部分包含在内。现在，Web服务器可以使用它们的内部主机头表来确定所需的网站。
- en: How does TLS work?
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: TLS是如何工作的？
- en: TLS is an encryption protocol that works on top of TCP and sometimes UDP as
    well. Because it sits on top of the transport layer, it allows protocols higher
    in the chain to remain unchanged, such as HTTP, for example.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: TLS是一种加密协议，它建立在TCP之上，有时也建立在UDP之上。因为它位于传输层之上，它允许链中更高层的协议保持不变，例如HTTP。
- en: The protocol hides the actual data being sent across the wire. Attackers can
    only see what port, domain, and IP address are connected with it. They could also
    track how much data is being transferred.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 该协议隐藏了通过线路发送的实际数据。攻击者只能看到与之连接的端口、域名和IP地址。他们还可以跟踪传输的数据量。
- en: 'Once the TCP connection is established, the TLS handshake is started by the
    client (through the browser or another user agent client application). The client
    starts the TLS conversation by asking a series of questions:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦建立了TCP连接，客户端（通过浏览器或其他用户代理客户端应用程序）将启动TLS握手。客户端通过提出一系列问题开始TLS对话：
- en: Which version of SSL/TLS is it running?
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它运行的是SSL/TLS的哪个版本？
- en: What cipher suites does it want to use?
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它想使用哪些加密套件？
- en: What compression methods does it want to use?
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它想使用哪些压缩方法？
- en: The client chooses the highest level of the TLS protocol supported by both the
    client and server. The compression method is also selected.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端选择客户端和服务器都支持的TLS协议的最高级别。同时也会选择压缩方法。
- en: Once the initial TLS connection is established, the client requests the server's
    certificate. The certificate must be trusted by the client or an authority party
    that the client trusts. Examples of certificate authorities are Network Solutions,
    GeoTrust, Let's Encrypt, and Amazon.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦建立了初始的TLS连接，客户端会请求服务器的证书。证书必须得到客户端或客户端信任的权威机构的信任。证书授权机构的例子包括Network Solutions、GeoTrust、Let's
    Encrypt和Amazon。
- en: After the certificate is verified, an encryption key is exchanged. The key depends
    on the cipher that is chosen. Once the key is exchanged, the client and server
    are able to perform symmetric encryption.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 证书验证完成后，将交换加密密钥。密钥取决于所选择的加密方式。一旦密钥交换完成，客户端和服务器就可以执行对称加密。
- en: 'The client tells the server that all future communications are to be encrypted:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端通知服务器，所有未来的通信都将是加密的：
- en: '![](img/00029.jpeg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00029.jpeg)'
- en: The client and server perform a final verification in which the client's MAC
    address is verified by the server. The server receives an initial authentication
    message from the client that is decrypted and sent back to the client for verification.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端和服务器执行最终验证，其中客户端的MAC地址由服务器验证。服务器从客户端接收一个初始认证消息，该消息被解密并发送回客户端以进行验证。
- en: Encryption keys are generated uniquely for each connection, and are based on
    the authentication message. Assuming the handshake completes successfully, the
    client and the server can now communicate securely.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 加密密钥为每个连接生成，并基于认证消息。假设握手成功完成，客户端和服务器现在可以安全地通信。
- en: 'Secure TLS connections between the client and server have at least one of the
    following properties:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端和服务器之间的安全TLS连接至少具有以下属性之一：
- en: As symmetric cryptography is used to encrypt the transmitted data, it is the
    reason why the connection is secure. The negotiation of a shared secret is both
    secure and reliable ( the negotiated secret is unavailable to eavesdroppers and
    no attacker can modify the communications during the negotiation without being
    detected).
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于对称密码学用于加密传输的数据，这是连接安全的原因。共享密钥的协商既安全又可靠（协商的密钥对窃听者不可用，攻击者无法在协商过程中修改通信内容而不被检测到）。
- en: Public-key cryptography is used to authenticate the identity of the communicating
    parties. The authentication procedure could be made optional, but typically it
    is required for the server.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公钥密码学用于验证通信方的身份。认证过程可以是可选的，但通常对于服务器来说是必需的。
- en: To prevent the undetected loss or alteration of the data during transmission,
    each transmitted message includes message integrity check using a message authentication
    code
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了防止在传输过程中数据未被检测到的丢失或更改，每个传输的消息都包含使用消息认证码进行的信息完整性检查。
- en: What is HTTPS?
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是 HTTPS？
- en: '**HTTPS** is HTTP within SSL/TLS. TLS establishes a secure tunnel for bidirectional
    binary data communications between two hosts (the web server and browser). **HTTP**
    (**Hypertext Transport Text Protocol**) is the communications protocol that the
    client and server use to talk to each other:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**HTTPS** 是 SSL/TLS 中的 HTTP。TLS 为两个主机（Web 服务器和浏览器）之间的双向二进制数据通信建立了一个安全隧道。**HTTP**（**超文本传输文本协议**）是客户端和服务器之间用来互相通信的通信协议：'
- en: '![](img/00030.jpeg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00030.jpeg)'
- en: So, think of HTTP as water inside a pipe. The pipe is the TLS encryption and
    the water is the data. The primary difference between HTTPS and the water analogy
    is that HTTPS is bidirectional and plumbing isn't.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，可以将 HTTP 想象成管道内的水。管道是 TLS 加密，而水是数据。HTTPS 与水类比的主要区别在于 HTTPS 是双向的，而管道不是。
- en: There are other communication protocols that support TLS, such as web sockets
    (WSS), email (SMTPS), and FTP (FTPS).
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他通信协议支持 TLS，例如 WebSockets（WSS）、电子邮件（SMTPS）和 FTP（FTPS）。
- en: HTTPS advantages
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: HTTPS 优势
- en: The first, and often only, feature you will think of when someone asks about
    SSL or HTTPS is encryption. This is a good reason to use HTTPS, but it is not
    the only reason, and not even the most important reason.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 当有人询问 SSL 或 HTTPS 时，你首先想到的，通常是加密。这是使用 HTTPS 的一个很好的理由，但不是唯一的原因，甚至不是最重要的原因。
- en: 'HTTPS gives us three security properties:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: HTTPS 给我们提供了三个安全特性：
- en: '**Identity**: Certificate proves the server is the real server'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**身份**：证书证明服务器是真正的服务器'
- en: '**Confidentiality**: Only the browser and server can read the data being passed
    between them'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**机密性**：只有浏览器和服务器可以读取它们之间传递的数据'
- en: '**Integrity**: The sent data is what the other party receives'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**完整性**：发送的数据是对方接收到的数据'
- en: Identity
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 身份
- en: When you install an SSL certificate and enable HTTPS, you are telling the world
    that they can trust your site's identity. Once that secure channel of communication
    is opened between the client and server, both can have confidence that the conversation
    is to whom they expect.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 当你安装 SSL 证书并启用 HTTPS 时，你是在告诉全世界他们可以信任你的网站身份。一旦客户端和服务器之间建立了这个安全的通信通道，双方都可以确信对话是期望的对象。
- en: Both the client and the server establish a communication channel by verifying
    each other's identity. The certificate is used to verify this identify. Each part
    of the conversation requires a token, known only to the client and server.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端和服务器通过验证彼此的身份来建立通信通道。证书用于验证这个身份。每次对话都需要一个只有客户端和服务器知道的令牌。
- en: Confidentiality
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 机密性
- en: Without HTTPS, your connection could be hijacked via a man in the middle attack.
    The address in the browser may tell you that it is the domain you expect to have
    loaded, but in reality, it could be bad guy in the middle.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 没有HTTPS，你的连接可能会被中间人攻击所劫持。浏览器中的地址可能会告诉你它是你期望加载的域名，但实际上，它可能是中间的坏人。
- en: 'Let''s start by defining different scenarios:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先定义不同的场景：
- en: 'Normally when you connect to a website using HTTP, the conversation is in plain
    text. In general, the conversation contains nothing sensitive. But a bad person
    could snoop on your traffic and use the information they find to do bad things,
    as shown in the following image:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，当你使用 HTTP 连接到一个网站时，对话是明文的。一般来说，对话不包含任何敏感信息。但坏人可能会窃听你的流量，并利用他们找到的信息做坏事，如下面的图像所示：
- en: '![](img/00031.jpeg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00031.jpeg)'
- en: This is amplified when you use public Wi-Fi. These networks are great for connecting
    to the internet for free, but poor for personal security.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用公共 Wi-Fi 时，这种情况会加剧。这些网络对于免费连接到互联网来说很棒，但对于个人安全来说却很糟糕。
- en: 'Once the eavesdropping bad guy identifies your session, they could intercept
    the conversation and route you to their server. Now any information you share
    with the desired site is sent to the bad guy''s server instead, as shown in the
    following image:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦窃听者确定了你的会话，他们可能会拦截对话并将你重定向到他们的服务器。现在，你与目标网站共享的任何信息都会发送到坏家伙的服务器，如下面的图片所示：
- en: '![](img/00032.jpeg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00032.jpeg)'
- en: While somewhat sophisticated, it happens more times than you might think.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然有些复杂，但它发生的次数比你想象的要多。
- en: 'Let''s change the scenario so that all those involved are using HTTPS. Now
    all the communication is encrypted. The only thing the bad guy can see is what
    domain(s) you visit, not even the URLs on those domains, as shown in the following
    image:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们改变场景，让所有相关人员都在使用 HTTPS。现在所有通信都是加密的。坏家伙唯一能看到的是你访问的域名（s），甚至不是那些域名上的 URL，如下面的图片所示：
- en: '![](img/00033.jpeg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00033.jpeg)'
- en: The connection between the client and server cannot be hijacked. If a bad actor
    tries to hijack the session, both the client and server know there is a problem
    and the conversation ends.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端和服务器之间的连接无法被劫持。如果恶意行为者试图劫持会话，客户端和服务器都知道有问题，对话就会结束。
- en: Integrity
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完整性
- en: Because the connection is encrypted and third-party actors cannot tamper with
    data, each end knows the data is valid. This is because the man-in-the-middle
    attack is thwarted.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 因为连接是加密的，第三方演员无法篡改数据，所以每一端都知道数据是有效的。这是因为中间人攻击被阻止了。
- en: It is not just bad guys you need to worry about. Third-party content, such as
    ads, could be injected into a response anywhere along the way with HTTP. For example,
    an ISP or your local coffee shop could modify the request and response to reroute
    you to a different server or change the content you view.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 你不仅需要担心坏人。第三方内容，如广告，可能会在 HTTP 的任何地方注入响应中。例如，ISP 或你当地的咖啡馆可能会修改请求和响应，将你重定向到不同的服务器或更改你查看的内容。
- en: HTTPS gives both the customer and the server confidence that the conversation
    contains the real data. There is no guarantee that the data received by either
    the client or the server is correct when HTTP is used.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: HTTPS 保证了客户和服务器对会话包含真实数据的信心。当使用 HTTP 时，无法保证客户端或服务器接收到的数据是正确的。
- en: Browsers are going out of their way to indicate HTTPS to the customer
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 浏览器正不遗余力地向客户表明 HTTPS
- en: 'Have you noticed those padlocks in the browser address bar? Chances are you
    have, but that you don''t really think about it until you feel something is a
    little fishy. Browsers have gradually been stepping up the user experience for
    the average consumer in recent years:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 你有没有注意到浏览器地址栏中的那些挂锁？你可能注意到了，但你直到觉得有点不对劲时才真正考虑它。近年来，浏览器逐渐提高了普通消费者的用户体验：
- en: '![](img/00034.jpeg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00034.jpeg)'
- en: Soon, Chrome will start making it very apparent when a page contains either
    a password or credit card field. If those fields are present and not served via
    HTTPS, they will display a big red visual warning indicating to the customer that
    the page is not secure.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 很快，Chrome 将开始明确显示页面包含密码或信用卡字段的情况。如果这些字段存在且不是通过 HTTPS 提供的，它们将显示一个大红色的视觉警告，提示客户该页面不安全。
- en: 'Recently, Chrome started showing a warning when a site is loaded using HTTP
    when in Incognito mode, as shown in the following image:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，Chrome 在隐身模式下加载使用 HTTP 的网站时开始显示警告，如下面的图片所示：
- en: '![](img/00035.jpeg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00035.jpeg)'
- en: 'Chrome is not the only browser that is increasing visual prompting when a site
    is not served with HTTPS: Microsoft Edge, FireFox, and Opera have all announced
    plans to increase visual cues. This will, of course, lead to fewer and fewer scams
    succeeding, but will also cut into legitimate business conversions because they
    have neglected the application of HTTPS.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: Chrome 并非唯一在网站未使用 HTTPS 提供服务时增加视觉提示的浏览器：Microsoft Edge、FireFox 和 Opera 都已宣布计划增加视觉提示。这当然会导致越来越少诈骗成功，但也会减少合法的商业转化，因为它们忽视了
    HTTPS 的应用。
- en: Search engine optimization
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 搜索引擎优化
- en: Google and other search engines have publicly stated that they consider HTTPS
    sites to be more authoritative than nonsecure sites with the same information.
    The reason is twofold. First, the average web surfer will trust an HTTPS site
    more than a non-HTTPS site. It might just be a simple blog, or it could be a giant
    bank—whatever the site is, the perception of security goes a long way.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 谷歌和其他搜索引擎已经公开表示，他们认为HTTPS网站比信息相同但不安全的网站更具权威性。原因有两个。首先，普通网络冲浪者会更信任HTTPS网站而非非HTTPS网站。这可能只是一个简单的博客，也可能是一个巨大的银行——无论网站是什么，对安全的感知都至关重要。
- en: Independent surveys have shown a correlation between higher rankings and HTTPS
    (see [https://backlinko.com/search-engine-ranking](https://backlinko.com/search-engine-ranking)).
    This makes sense because search ranking signals highly correlate with better user
    experience. HTTPS is a user experience factor because it conveys trust to the
    consumer.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 独立调查显示，HTTPS与更高的排名之间存在关联（见[https://backlinko.com/search-engine-ranking](https://backlinko.com/search-engine-ranking)）。这很有道理，因为搜索排名信号与更好的用户体验高度相关。HTTPS是一个用户体验因素，因为它向消费者传达了信任。
- en: So even if your site does not handle *sensitive *information, you should still
    implement HTTPS to boost your visitor's confidence in your brand and your search
    engine rankings.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，即使你的网站不处理*敏感*信息，你也应该实施HTTPS，以增强访客对你品牌和搜索引擎排名的信心。
- en: The second reason search engines are pushing businesses and organizations to
    implement HTTPS is to verify ownership. You cannot install a legitimate TLS certificate
    without some sort of ownership verification. A certificate issuer will send an
    email to trigger a verification process based on the domain's WHOIS record. When
    you register your domain, you must supply real contact information, including
    an active email address.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个原因是，搜索引擎推动企业和组织实施HTTPS是为了验证所有权。没有某种所有权验证，你无法安装合法的TLS证书。证书颁发者会发送一封电子邮件，根据域名的WHOIS记录触发验证过程。当你注册域名时，你必须提供真实的联系信息，包括一个有效的电子邮件地址。
- en: Bad guys tend to register domains with fake or false contact information so
    they cannot be traced. By requiring HTTPS, search engines are showing that there
    is a modicum of trust in the site's ownership.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 恶意分子倾向于使用虚假或错误的联系信息注册域名，这样他们就无法被追踪。通过要求HTTPS，搜索引擎表明对网站所有权有一定的信任。
- en: As the web moves toward HTTPS as the default, there will be fewer and fewer
    SPAM websites. Bad guys won't get SSL certificates, at least not easily.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 随着网络向HTTPS作为默认方式发展，垃圾网站将越来越少。恶意分子不会轻易获得SSL证书。
- en: No longer cost-prohibitive
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 已不再具有成本障碍
- en: Since the beginning of SSL, certificates have come with a cost. Typically, this
    was an annual cost. In the past (around 15 years ago), certificates typically
    cost between $100 and $500 a year. You can think about it like an annual business
    license. In fact, to complete a certificate request, you often needed a proof
    of business or organization. The issuing process was also time-prohibitive. It
    often took 3–14 days to get a certificate. The issuing authority had a staff that
    evaluated every certificate request and the accompanying paperwork. A very archaic
    process for a digital platform.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 自从SSL开始以来，证书就伴随着成本。通常，这是一个年度成本。在过去（大约15年前），证书通常每年花费100到500美元。你可以把它想象成年度营业执照。事实上，为了完成证书请求，你通常需要提供业务或组织的证明。颁发过程也是耗时耗力的。通常需要3-14天才能获得证书。颁发机构有一支评估每个证书请求及其相关文件的员工。对于一个数字平台来说，这是一个非常古老的过程。
- en: While enterprises do not blink at a $100-a-year fee for their web site, the
    average small business does. There are thousands of small businesses for every
    enterprise. As well as traditional small businesses, there are millions of businesses,
    blogs, forums, and other entities that make little to no revenue from their site.
    They can barely justify their hosting overhead. HTTPS is just not viable at those
    rates.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然企业对每年100美元的网站费用并不在意，但普通小型企业却会感到压力。对于每一家企业，都有成千上万家小型企业。除了传统的小型企业，还有数百万的企业、博客、论坛和其他实体，它们的网站几乎没有或没有收入。它们几乎无法证明其托管费用的合理性。以那样的价格，HTTPS根本不可行。
- en: Another cost you might not think about is IP addresses. In the beginning, SSL
    required a dedicated IP address. Despite millions of possible IP addresses, there
    were not enough, not even close. The limited supply of IP addresses also raised
    the price of HTTPS. This could have added another $100 or more a year to the cost
    of hosting a site. Today, this has changed. Now a certificate maps to a domain.
    This eliminates this tax.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个你可能没有考虑到的成本是IP地址。最初，SSL需要一个专用的IP地址。尽管有数百万个可能的IP地址，但仍然不够，甚至远远不够。IP地址的有限供应也提高了HTTPS的价格。这可能会给托管一个网站的成本每年增加100美元或更多。今天，这种情况已经改变。现在，证书映射到域名。这消除了这种税收。
- en: Today, HTTPS requirements and costs have all relaxed. There are many low-cost
    certificate providers. In fact, you can obtain a certificate for free from Amazon
    or Let's Encrypt ([https://letsencrypt.org](https://letsencrypt.org)). The latest
    stats Let's Encrypt shares are over 50 million certificates issued.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 今天，HTTPS的要求和成本都已经放宽。有许多低成本证书提供商。实际上，您可以从亚马逊或Let's Encrypt（[https://letsencrypt.org](https://letsencrypt.org)）免费获得证书。Let's
    Encrypt分享的最新统计数据表明，已颁发超过5000万张证书。
- en: Up to this point, I have referred to SSL, but that name is not exactly correct
    anymore. **Transport Layer Security** (**TLS**) is the proper term used today.
    The security protocol continues to evolve over time. SSL was originally created
    by Netscape, which is now owned by AOL.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我提到了SSL，但这个名字已经不再完全准确了。**传输层安全性**（**TLS**）是今天使用的正确术语。安全协议随着时间的推移不断进化。SSL最初是由Netscape创建的，现在由AOL拥有。
- en: To avoid potential legal issues, TLS was first drafted in 1999 in RFC 2246 (see[ https://tools.ietf.org/html/rfc2246](https://tools.ietf.org/html/rfc2246)).
    The primary intent behind the name change was to separate the encryption protocol
    from Netscape and make it more *open* and *free*.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免潜在的法律问题，TLS最初于1999年在RFC 2246中制定（见[https://tools.ietf.org/html/rfc2246](https://tools.ietf.org/html/rfc2246)）。名称变更背后的主要意图是将加密协议从Netscape中分离出来，使其更加**开放**和**自由**。
- en: SSL and TLS are interchangeable in general conversation as most people will
    understand what you mean.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在一般对话中，SSL和TLS是可以互换的，因为大多数人都会明白你的意思。
- en: 'Which protocol version you implement is limited by your server platform. Because
    TLS 1.2 is very well established at this point, it is difficult to find a server
    platform or browser that does not support version 1.2\. But Qualys has some advice:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 你实施的协议版本受限于你的服务器平台。因为TLS 1.2现在已经非常成熟，所以很难找到一个不支持版本1.2的服务器平台或浏览器。但Qualys有一些建议：
- en: '"There are five protocols in the SSL/TLS family, but not all of them are secure.
    The best practice is to use TLS v1.0 as your main protocol (making sure the BEAST
    attack is mitigated in configuration) and TLS v1.1 and v1.2 if they are supported
    by your server platform. That way, the clients that support newer protocols will
    select them, and those that don''t will fall back to TLS v1.0\. You must not use
    SSL v2.0, because it is insecure."'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: “SSL/TLS家族中有五种协议，但并非所有都是安全的。最佳实践是使用TLS v1.0作为你的主要协议（确保在配置中缓解了BEAST攻击），如果服务器平台支持，则使用TLS
    v1.1和v1.2。这样，支持较新协议的客户端将选择它们，而不支持的客户端将回退到TLS v1.0。你绝对不能使用SSL v2.0，因为它是不安全的。”
- en: Fortunately, when you create a TLS certificate, the protocol version is handled
    for you. Later in this chapter, I will go through the steps to create a certificate
    in AWS and Let's Encrypt, both free services.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，当你创建TLS证书时，协议版本由你处理。在本章的后面部分，我将介绍在AWS和Let's Encrypt创建证书的步骤，这两个都是免费服务。
- en: Modern APIs require HTTPS
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 现代API需要HTTPS
- en: We are currently at a point in our technological development where new high-value
    APIs and features are being added quickly. These include service workers and HTTP/2,
    both requiring HTTPS. WebRTC and now Geo-Location also require HTTPS. Any API
    that deals with personal information either is or soon will be gated behind HTTPS
    ([https://www.chromium.org/Home/chromium-security/deprecating-powerful-features-on-insecure-origins](https://www.chromium.org/Home/chromium-security/deprecating-powerful-features-on-insecure-origins)).
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们目前处于技术发展的一个阶段，新的高价值API和功能正在快速添加。这包括服务工作者和HTTP/2，两者都需要HTTPS。WebRTC和现在的地理位置也都需要HTTPS。任何处理个人信息的API要么是，要么很快就会在HTTPS后面受到限制（[https://www.chromium.org/Home/chromium-security/deprecating-powerful-features-on-insecure-origins](https://www.chromium.org/Home/chromium-security/deprecating-powerful-features-on-insecure-origins)）。
- en: While these APIs could work without HTTPS, the security wraps these features
    in confidence. Think about it for a moment—the deeper a platform lets you integrate,
    the more they will require of your application.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些API可以在没有HTTPS的情况下工作，但安全性将这些特性包裹在信任之中。想想看——平台让你集成得越深，它们对你的应用程序的要求就越高。
- en: Requiring HTTPS ensures a minimal amount of security and trust, and thus enough
    faith from potential platforms that you are not going to do evil things.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 要求使用HTTPS确保最小程度的安全和信任，因此足以让潜在的平台相信你不会做坏事。
- en: HTTPS can be significantly faster than HTTP
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: HTTPS可以比HTTP快得多
- en: Some technologies designed to make websites faster only work with HTTPS. One
    example is a protocol enhancement known as HTTP/2\. Take the HTTP versus HTTPS
    test to see this in action (see [https://www.httpvshttps.com/](https://www.httpvshttps.com/)
    for details).
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 一些旨在使网站更快的技术的确只与HTTPS一起工作。一个例子是称为HTTP/2的协议增强。通过HTTP与HTTPS测试来查看这一功能如何发挥作用（详情见[https://www.httpvshttps.com/](https://www.httpvshttps.com/)）。
- en: 'When I first saw research showing HTTPS to be faster, I admit I was skeptical.
    I saw how much time the encryption adds in network waterfalls. Fortunately, the
    folks managing browsers and network stacks have done us a solid and smoothed out
    many of the issues that cause SSL to be slower than non-SSL, as illustrated in
    the following quote from Adam Langley at Google:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 当我第一次看到研究显示HTTPS更快时，我承认我持怀疑态度。我看到加密在网络瀑布中增加了多少时间。幸运的是，管理浏览器和网络堆栈的人们为我们做了好事，并平滑了许多导致SSL比非SSL慢的问题，如下面来自谷歌的Adam
    Langley的引言所示：
- en: '"On our production frontend machines, SSL/TLS accounts for less than 1% of
    the CPU load, less than 10 KB of memory per connection and less than 2% of network
    overhead. Many people believe that SSL/TLS takes a lot of CPU time and we hope
    the preceding numbers will help to dispel that."'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '"在我们的生产前端机器上，SSL/TLS占CPU负载不到1%，每个连接不到10 KB的内存，以及网络开销不到2%。许多人认为SSL/TLS会占用大量的CPU时间，我们希望前面的数字有助于消除这种看法。"'
- en: Because HTTP/2 multiplexes requests through a single connection, there is only
    one TLS handshake that must be completed. This reduces the time to retrieve assets
    and server load. Now the client and the server only need to perform a single handshake
    and encryption cycle.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 由于HTTP/2通过单个连接多路复用请求，因此只需完成一次TLS握手。这减少了检索资产和服务器负载的时间。现在客户端和服务器只需要执行一次握手和加密周期。
- en: 'The goal of HTTP/2 is to improve performance by undoing the shortcomings of
    the HTTP/1.1 specification. HTTP/2 eliminates connections by multiplexing responses,
    compressing headers, prioritizing responses, and allowing server-side push, as
    shown in the following image:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: HTTP/2的目标是通过消除HTTP/1.1规范中的不足来提高性能。HTTP/2通过多路复用响应、压缩头部、优先处理响应以及允许服务器端推送来实现这一点，如下面的图像所示：
- en: '![](img/00036.jpeg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00036.jpeg)'
- en: All browsers support HTTP/2 and most servers do as well. Windows 2016 was the
    last major operating system to ship HTTP/2 support. Since it is relatively new,
    there are not many production deployments online.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 所有浏览器都支持HTTP/2，大多数服务器也是如此。Windows 2016是最后一个支持HTTP/2的主要操作系统。由于它是相对较新的，因此在网络上没有很多生产部署。
- en: HTTP/2 does not change any of the HTTP semantics. Status codes, verbs, and other
    such phrases are things we have used for years, and thus will not break existing
    applications.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: HTTP/2不会改变任何HTTP语义。状态码、动词和其他此类短语是我们多年来一直在使用的，因此不会破坏现有应用程序。
- en: The de facto implementation that standard browsers are enforcing is HTTP/2 over
    TLS. While you could technically use HTTP/2 without TLS, browsers do not allow
    this approach.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 标准浏览器强制执行的默认实现是HTTP/2 over TLS。虽然技术上可以使用HTTP/2而不使用TLS，但浏览器不允许这种做法。
- en: The combination of the single connection and TLS handshake in concert with the
    other performance benefits that HTTP/2 offers mean that TLS is consistently faster
    than HTTP.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 单个连接和TLS握手与HTTP/2提供的其他性能优势相结合，意味着TLS始终比HTTP快。
- en: HTTPS adoption
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: HTTPS的采用
- en: According to the August 2017 Qualys survey (see[ https://www.ssllabs.com/ssl-pulse/](https://www.ssllabs.com/ssl-pulse/)),
    60.2% of the sites they analyzed had proper SSL configuration. It is important
    to note that their survey is limited to 138, 672 of the most popular websites,
    a small sampling of the hundreds of millions of sites currently available online.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 根据2017年8月的Qualys调查（见[https://www.ssllabs.com/ssl-pulse/](https://www.ssllabs.com/ssl-pulse/)），他们分析的网站中有60.2%配置了正确的SSL。值得注意的是，他们的调查仅限于138,672个最受欢迎的网站，这只是目前数亿个网站中的一小部分样本。
- en: 'The HTTP Archive reports 64% of the top 500,000 websites use HTTPS ([https://httparchive.org/reports/state-of-the-web#pctHttps](https://httparchive.org/reports/state-of-the-web#pctHttps))
    shown in the graph. The good news is both surveys show a positive trend toward
    more sites using SSL:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: HTTP档案报告称，前500,000个顶级网站中有64%使用HTTPS（[https://httparchive.org/reports/state-of-the-web#pctHttps](https://httparchive.org/reports/state-of-the-web#pctHttps)），如图所示。好消息是，两项调查都显示出更多网站使用SSL的积极趋势：
- en: '![](img/00037.jpeg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00037.jpeg)'
- en: 'Unlike the past, every website should now use HTTPS instead of plain text HTTP.
    Securing your website via HTTPS is about more than security—it is about building
    trust. When you implement HTTPS, you not only add a layer of security: Your customers
    can see that dedication to security and feel more comfortable about doing business
    with your brand. Most consumers and non technologists get the purpose of HTTPS.
    They don''t care about the technical implementation, they care about the trust.
    When you implement HTTPS, you are eliminating a layer of stress that your customer
    might have if you didn''t use HTTPS. SSL adds value to your overall user experience,
    and that is why search engines and browsers are pushing everyone toward HTTPS
    everywhere. There are several reasons why you should use HTTPS with every website.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 与过去不同，现在每个网站都应该使用HTTPS而不是纯文本HTTP。通过HTTPS保护你的网站不仅仅是关于安全，它还关乎建立信任。当你实施HTTPS时，你不仅增加了一层安全：你的客户可以看到你对安全的承诺，并更愿意与你品牌做生意。大多数消费者和非技术人员都理解HTTPS的目的。他们不关心技术实现，他们关心的是信任。当你实施HTTPS时，你正在消除客户可能有的压力，如果你不使用HTTPS。SSL增加了你的整体用户体验价值，这就是为什么搜索引擎和浏览器都在推动每个人使用HTTPS。有几个原因说明为什么你应该在每个网站上使用HTTPS。
- en: Different types of SSL certificate
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 不同类型的SSL证书
- en: SSL certificate can be organized into two types: **validation level** and **secured
    domains**.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: SSL证书可以分为两种类型：**验证级别**和**受保护域名**。
- en: Certificates can be issued for multiple domains and even wildcard domains. But
    because of the extended validation specification, these certificates can only
    be issued for a single domain, not multiple or wildcard domains. This is because
    of the sensitivity of the verification process.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 证书可以颁发给多个域名，甚至通配符域名。但由于扩展验证规范，这些证书只能颁发给单个域名，而不是多个或通配符域名。这是因为验证过程的敏感性。
- en: There are a couple of different types of SSL certificates based on the method
    that you choose to confirm your identity. The three levels increase in complexity
    and vary in the type of information requested to validate the certificate.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你选择的确认身份的方法，存在几种不同类型的SSL证书。这三个级别在复杂性上递增，并且在验证证书所需的信息类型上有所不同。
- en: Domain-validated certificates
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 域验证证书
- en: The **domain-validated SSL certificate** (**DV certificate**) is the most basic,
    and validates the domain associated with the SSL certificate that is registered.
    To validate a DV SSL certificate, the owner (or someone with admin rights) approves
    the certificate request via email or DNS.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '**域验证SSL证书**（**DV证书**）是最基本的，验证与SSL证书注册关联的域名。为了验证DV SSL证书，所有者（或具有管理员权限的人）通过电子邮件或DNS批准证书请求。'
- en: The email recipient proves their administrative privileges over the domain by
    acknowledging receipt and sending confirmation to the provider. Additionally,
    they may be required to configure certain DNS records for the associated domain.
    The process may take a few minutes to a few hours to order and validate a DV certificate.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件接收者通过确认收件并发送确认给提供商来证明他们对域的行政权限。此外，他们可能需要为相关域配置某些DNS记录。订购和验证DV证书的过程可能需要几分钟到几小时。
- en: 'This should be the most common type of certificate used because any site can
    quickly install them for little or no cost. If your site might be the target of
    phishing or other forms of fraud, you should probably invest in a certificate
    that requires more authentication:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 这应该是最常用的证书类型，因为任何网站都可以快速安装它们，成本极低或没有成本。如果你的网站可能成为钓鱼或其他欺诈形式的攻击目标，你可能需要投资于需要更多身份验证的证书：
- en: '![](img/00038.jpeg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00038.jpeg)'
- en: Browsers will visually indicate a site that is served with proper HTTPS, typically
    with a green padlock. The domain-validated certificate is the minimal certificate
    required for this status.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器将通过绿色锁形图标在视觉上指示使用适当HTTPS的服务网站。域验证证书是实现这一状态所需的最基本证书。
- en: 'The following screenshot shows how FireFox displays the certificate''s information.
    Here is my current Love2Dev.com certificate, a domain-validated certificate:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了Firefox如何显示证书信息。这是我的当前Love2Dev.com证书，一个域名验证证书：
- en: '![](img/00039.gif)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00039.gif)'
- en: You can see that it only lists the common name (domain) and leaves the Organization
    and Organizational Unit empty.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到它只列出了通用名称（域名），而将组织和组织单位留空。
- en: Organization-validated certificates
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 组织验证证书
- en: An **organization-validated SSL certificate** (**OV certificate**) validates
    the domain ownership, plus the organization information included in the certificate,
    such as the name, city, state, and country. The validation process is similar
    to that of the domain-validated certificate, but it requires additional documentation
    to certify the company's identity. The order can take up to a few days because
    of the company validation process.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '**组织验证SSL证书**（**OV证书**）验证域名所有权，以及证书中包含的组织信息，如名称、城市、州和国家。验证过程与域名验证证书类似，但需要额外的文件来证明公司的身份。由于公司验证过程，订单可能需要几天的时间。'
- en: Offers more company information and thus trust to the end user. Most consumers
    will never check the details of a certificate, but it can help convey more trust.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 提供更多公司信息，从而向最终用户传达更多信任。大多数消费者永远不会检查证书的详细信息，但它可以帮助传达更多信任。
- en: Extended-validation SSL certificates
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扩展验证SSL证书
- en: '**Extended Validation SSL certificates** (**EV certificates**) require more
    company data validation than DV and OV certificates. Domain ownership, organization
    information, and legal proof and documentation are all required. The order may
    take from a few days to a few weeks because of the extended validation process.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '**扩展验证SSL证书**（**EV证书**）比DV和OV证书需要更多的公司数据验证。需要验证域名所有权、组织信息以及法律证明和文件。由于扩展验证过程，订单可能需要几天到几周的时间。'
- en: 'A *green address bar* in the browser containing the company name is the distinguishing
    attribute of extended-validation certificates, and is an immediate reward for
    the extended-validation certificate. It is not really a green bar, but your organization''s
    name is listed in the address bar with a nice green font, indicating a trusted
    site, as shown in the following screenshot:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器中的**绿色地址栏**包含公司名称是扩展验证证书的显著特征，并且是扩展验证证书的直接回报。它实际上不是一个绿色栏，但你的组织名称以漂亮的绿色字体列在地址栏中，表明这是一个受信任的网站，如下面的截图所示：
- en: '![](img/00040.jpeg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00040.jpeg)'
- en: 'Comparing an extended-validated certificate to the preceding example, the Organization
    and Organizational Unit fields have properties, as shown in the following screenshot:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 将扩展验证证书与前面的示例进行比较，组织和组织单位字段具有属性，如下面的截图所示：
- en: '![](img/00041.gif)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00041.gif)'
- en: The OV and EV certificate types do not reflect an increase in the level of encryption;
    instead, these reflect a more stringent validation of the individual/company that
    owns the website domain. A good rule is that the more sensitive the data that
    your site manages, the higher the level of verification you should use.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: OV和EV证书类型并不反映加密级别的提高；相反，这些反映了网站域名所有者/公司的更严格验证。一个好的规则是，你网站管理的敏感数据越多，你应该使用的验证级别就越高。
- en: If you do use an organizational- or extended-validated certificate, make sure
    you start the renewal process ahead of your expiration date. These certificates
    take days and weeks to issue because of the diligence required. If your certificate
    expires, you could go days without being properly secured.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是组织或扩展验证证书，请确保你在证书到期前开始续订流程。这些证书由于需要仔细审查，因此发放需要花费数天甚至数周时间。如果你的证书到期，你可能会在没有适当安全保护的情况下度过数天。
- en: How to obtain and install an SSL certificate
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何获取和安装SSL证书
- en: 'Every server platform has its own steps to generate a certificate request and
    install an issued certificate. But the common steps include the following:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 每个服务器平台都有自己的步骤来生成证书请求和安装已发行的证书。但常见的步骤包括以下内容：
- en: Generate a **certificate signing request** (**CSR**)
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成**证书签名请求**（**CSR**）
- en: Order an SSL certificate from a CA
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从CA订购SSL证书
- en: Download the intermediate certificate from the CA
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从CA下载中间证书
- en: Install the intermediate certificate on the server
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在服务器上安装中间证书
- en: There are multiple certificate authorities to choose from today, such as GeoTrust,
    DigiCert, Symantec, and Network Solutions. You can compare the prices as well
    as the types of certificates that they offer to find the best solution for you.
    We will review the different types of certificates later in the chapter.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 今天可以选择多个证书颁发机构，例如GeoTrust、DigiCert、Symantec和网络解决方案。你可以比较他们的价格以及他们提供的证书类型，以找到最适合你的解决方案。我们将在本章后面回顾不同类型的证书。
- en: Traditionally, you generate an unsigned key from your web server software or
    administration panel. This is usually a file with an encrypted string. You submit
    this file to the CA as part of the order process.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，你从你的web服务器软件或管理面板生成一个未签名的密钥。这通常是一个包含加密字符串的文件。你将此文件作为订单过程的一部分提交给CA。
- en: Once the verification process is complete, the CA will issue the certificate,
    another file. Your web server then allows you to install the certificate for the
    site.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦验证过程完成，CA将颁发证书，另一个文件。然后你的web服务器允许你为该网站安装证书。
- en: Today, the process has become less manual. Many are making it an automated feature
    that is included with web server control panels. Many are including automated
    LetsEncrypt.org certificates.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 今天，这个过程已经变得更加自动化。许多人将其作为一个包含在web服务器控制面板中的自动功能。许多人包括自动的LetEncrypt.org证书。
- en: WordPress ([https://wordpress.com/](https://wordpress.com/))is the biggest player
    to adopt an HTTPS-only policy. They upgraded all the sites that they host to HTTPS
    in 2017 using a built-in LetsEncrypt tool.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: WordPress ([https://wordpress.com/](https://wordpress.com/))是采用HTTPS-only政策的最大玩家。他们在2017年使用内置的Let's
    Encrypt工具将他们托管的所有网站升级到HTTPS。
- en: Amazon AWS offers free certificates for Cloud Front and their network load-balancer
    services. These are domain-validated certificates, and take about 30 seconds to
    process; just a shining example of how far the SSL world has come since the mid
    90s.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 亚马逊AWS为Cloud Front和他们的网络负载均衡器服务提供免费的证书。这些是域名验证证书，处理大约需要30秒；这是自90年代中期以来SSL世界发展到一个新高度的又一光辉例子。
- en: Migrating a website to HTTPS
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将网站迁移到HTTPS
- en: Regardless of whether you have a new or existing site, you should have a system
    to ensure that your site is implementing HTTPS correctly. Installing a certificate
    is just the start of the process. You must make sure that different aspects of
    your site are referencing HTTPS correctly.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你有一个新网站还是现有网站，你应该有一个系统来确保你的网站正确地实现了HTTPS。安装证书只是这个过程的开端。你必须确保网站的不同方面都正确地引用HTTPS。
- en: This includes the links in your pages, handling links to your site, and your
    analytics and search engine profiles.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 这包括你页面中的链接，处理指向你网站的链接，以及你的分析和搜索引擎配置文件。
- en: Even if your site uses HTTPS, the HTTP portion of any page that includes HTTP
    content can be read or modified by attackers. When an HTTPS page has HTTP content,
    it's called **mixed content**. You might think the page is secure, but it isn't
    because of the mixed content.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 即使你的网站使用HTTPS，任何包含HTTP内容的页面的HTTP部分都可能被攻击者读取或修改。当一个HTTPS页面包含HTTP内容时，它被称为**混合内容**。你可能认为页面是安全的，但它并不是因为混合内容。
- en: 'When a page has mixed content, browsers have visual queues to alert the user
    to the insecure state. You cannot rely on seeing https in the address bar—look
    for the green lock. The following screenshot shows an unsecured URL in the browser
    bar:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个页面包含混合内容时，浏览器会有视觉提示来提醒用户该状态不安全。你不能仅仅依靠在地址栏看到https来信赖——寻找绿色的锁。以下截图显示了浏览器栏中的不安全URL：
- en: '![](img/00042.jpeg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00042.jpeg)'
- en: 'The image shows that Microsoft''s home page is not secure, even though the
    site is loaded via HTTPS. It contains references to insecure assets. The following
    screenshot is an example of what might be causing the problem:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 这张图片显示，尽管网站是通过HTTPS加载的，但微软的主页并不安全。它包含了对不安全资产的引用。以下截图是可能引起问题的示例：
- en: '![](img/00043.gif)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00043.gif)'
- en: There is more to migrating your site than just cleaning up asset references.
    This section should be a guide or checklist for you to define an HTTPS migration
    strategy for your websites.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 迁移你的网站不仅仅是清理资产引用。本节应该是一个指南或清单，帮助你为你的网站定义一个HTTPS迁移策略。
- en: As a bonus, this list can serve as a portion of your full site-readiness checklist
    because it includes several best practices that are often overlooked.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 作为额外的好处，这个列表可以作为你完整网站就绪检查单的一部分，因为它包括了一些经常被忽视的最佳实践。
- en: Auditing the site for any HTTP:// link references
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 审计网站中的任何HTTP://链接引用
- en: It does not matter if you have a single-page website or one that contains a
    million URLs, you need to audit each page for external `http://` link references.
    This include anchor tags as well as any link tags you may have in your document's
    head.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你有一个单页网站还是包含数百万个URL的网站，你都需要审计每一页的外部`http://`链接引用。这包括锚点标签以及你文档头部可能有的任何链接标签。
- en: All third-party hosted assets, such as CSS, JavaScript libraries, images and
    fonts on public CDNs, as well as third-party services, such as **Google Analytics**
    (**GA**)**,** are prime targets for HTTP references. These are often overlooked
    because they are not "owned" by the business.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 所有第三方托管资产，如CSS、JavaScript库、图像和字体在公共CDN上，以及第三方服务，如**Google Analytics**（**GA**）**，都是HTTP引用的主要目标。这些通常被忽视，因为它们不是由企业“拥有”的。
- en: By now, any reputable third-party service offers HTTPS support. If it does not,
    you may need to require them to offer HTTPS or find a new provider it they refuse.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 到现在为止，任何值得信赖的第三方服务都提供HTTPS支持。如果它不支持，你可能需要要求它们提供HTTPS，或者如果它们拒绝，你可以寻找新的提供商。
- en: 'As with the preceding Microsoft example , you should also make sure that all
    references to assets in your site are either HTTPS or are simply absent of the
    protocol. This would update the site and be ready for any potential future protocols:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 与前面的Microsoft示例一样，你也应该确保你网站上所有对资产的引用要么是HTTPS，要么根本不带协议。这将更新网站并准备好任何潜在的未来协议：
- en: '[PRE0]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The best practice is to make all references protocol-less. Instead of changing
    all references to `https://`, change them to `//`. This approach is more forward-thinking
    because you are making any future communication protocols that may evolve easier
    to adapt.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳实践是使所有引用无协议。与其将所有引用更改为`https://`，不如将它们更改为`//`。这种方法更具前瞻性，因为它使任何可能演变的未来通信协议更容易适应。
- en: When using a protocol-less reference, the user agent applies it to the primary
    protocol of the asset or external link. This way, the user should have a more
    seamless browsing experience.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用无协议引用时，用户代理将其应用于资产或外部链接的主要协议。这样，用户应该有一个更无缝的浏览体验。
- en: Auditing content and data
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 审计内容和数据
- en: Google advises that you should consistently reference external URLs using the
    HTTPS protocol to send a clear signal to the ranking engine that your site has
    HTTPS.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: Google建议你应该始终使用HTTPS协议引用外部URL，以向排名引擎发送一个明确的信号，表明你的网站有HTTPS。
- en: Content, such as a blog or general text, is often entered by non developers
    through a content-management interface. This means that the raw content or site
    data is persisted in some form of a database, and would not be part of a source-code
    audit.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 内容，如博客或一般文本，通常通过内容管理界面由非开发者输入。这意味着原始内容或网站数据以某种形式保存在数据库中，并且不会成为源代码审计的一部分。
- en: You could spider your entire site and produce a report. This could be done with
    a simple node module or some other utility. Similarly, you should also run a script
    over your site's persisted data for external HTTP references.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以爬取你的整个网站并生成报告。这可以通过简单的node模块或其他工具完成。同样，你也应该在网站持久化数据上运行脚本以查找外部HTTP引用。
- en: The key is to audit your entire site to identify these potential problems. Every
    website will require some form of custom audit and update process. I suggest you
    automate as much as you can; that way, you can rapidly make updates and repeat
    the process as part of your build.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 关键是要审计你的整个网站以识别这些潜在问题。每个网站都将需要某种形式的定制审计和更新流程。我建议你尽可能自动化；这样，你可以快速更新并重复这个过程作为你构建的一部分。
- en: Once you update content, deploy (preferably to a test server) and audit the
    results. Chances are that you missed some references and will need to address
    them. Correct those issues and try again, until you pass the test.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 更新内容后，部署（最好是到测试服务器）并审计结果。很可能会错过一些引用，需要解决这些问题。纠正这些问题并再次尝试，直到通过测试。
- en: Updating social media links
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新社交媒体链接
- en: I wanted to highlight social media links as a common example of the previous
    step. All social media networks use HTTPS. Since most sites link to their social
    media profiles as part of the site's main layout, these should be the first links
    you update.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 我想强调社交媒体链接作为前一步的常见例子。所有社交媒体网络都使用HTTPS。由于大多数网站将社交媒体配置文件作为网站主要布局的一部分进行链接，因此这些应该是你首先更新的链接。
- en: Because these links are typically contained in the site header, footer, or both,
    they propagate to every page. From a source code perspective, this app-shell file
    is a single file, and in audits like these, it is often overlooked.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这些链接通常包含在网站页眉、页脚或两者中，它们会传播到每个页面。从源代码的角度来看，这个app-shell文件是一个单独的文件，在这些审计中，它通常会被忽略。
- en: When globally updating something, such as the protocol that is being used to
    reference a link, you need to audit your source code as well as your content.
    This includes every archetype file, such as the master and child layout files.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 当全局更新某些内容，例如用于引用链接的协议时，你需要审计你的源代码以及你的内容。这包括每个原型文件，例如主布局文件和子布局文件。
- en: Configure server auto-redirect of HTTP to HTTPS
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置服务器自动将HTTP重定向到HTTPS
- en: Legacy links and natural consumer tendency is to reference URLs via HTTP. Your
    web server should be configured to send a 301 redirect to the user agent telling
    them to permanently load the HTTPS address.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 旧链接和自然消费者倾向是通过HTTP引用URL。你的Web服务器应该配置为向用户代理发送一个301重定向，告诉他们永久加载HTTPS地址。
- en: A 301 redirect is a permanent address change. You are telling the user agent
    that the address they are seeking is no longer valid, and to instead go to a new
    address. By redirecting HTTP to HTTPS, you are effectively telling the world not
    to ask for insecure content anymore.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '`301`重定向是一个永久地址更改。你正在告诉用户代理他们正在寻找的地址不再有效，而应转到新的地址。通过将HTTP重定向到HTTPS，你实际上在告诉全世界不再请求不安全的内容。'
- en: This process varies by web server, so consult your platform's documentation
    for more guidance. Most servers can do this using a simple setting.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 这个过程因Web服务器而异，因此请查阅你平台的文档以获取更多指导。大多数服务器可以通过简单的设置来完成此操作。
- en: If you are using a content-delivery network, and you should for any consumer
    site, you should be able to configure this redirection in your CDN configuration.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用内容分发网络，并且你应该为任何消费者网站这样做，你应该能够在你的CDN配置中配置此重定向。
- en: 'A `301` redirect works by receiving a request from a user agent and including
    a 301 header in the server''s response. For example, an HTTP request to `www.example.org`
    would look like the following:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '`301`重定向通过接收用户代理的请求并在服务器的响应中包含一个301头来实现。例如，对`www.example.org`的HTTP请求看起来如下：'
- en: '[PRE1]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The server returns a `301` response, which includes the permanent location,
    as shown in the following code:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器返回一个包含永久位置的`301`响应，如下面的代码所示：
- en: '[PRE2]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You should also configure a proper 301 redirect any time you change your site's
    routing. When migrating from HTTP to HTTPS, you are changing every route in your
    site.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 你还应该在更改网站路由时配置适当的301重定向。当从HTTP迁移到HTTPS时，你正在更改网站中的每个路由。
- en: Add and verify all domain protocol combinations in webmaster tools
  id: totrans-186
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在网站管理工具中添加并验证所有域名协议组合
- en: The addition and verification of all domain protocol combinations in webmaster
    tools is another commonly overlooked migration task. If you are serious about
    search engine ranking, you will have your site properly registered with both Google
    and Bing's webmaster tools.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 在网站管理工具中添加和验证所有域名协议组合是另一个常被忽视的迁移任务。如果你对搜索引擎排名认真，你将使用Google和必应的网站管理工具正确注册你的网站。
- en: Details of both webmaster platforms is out of the scope of this book.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 关于这两个网站管理平台的详细信息超出了本书的范围。
- en: The best practice is to register all four ways in which your site might be referenced.
    You should register both HTTP and HTTPS versions for your primary domain and the
    www. alias. If you do not have all four registered, you will not have a fully
    registered site, and may suffer some search engine ranking issues.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳实践是注册你的网站可能被引用的所有四种方式。你应该为你的主域名和www.别名注册HTTP和HTTPS版本。如果你没有全部注册，你的网站将不是完全注册的，可能会遇到一些搜索引擎排名问题。
- en: Defining a canonical HTTPS link
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定义一个规范HTTPS链接
- en: 'Another SEO practice you might overlook is defining the canonical link. Google
    and other search engines use this as a signal to know the original source of the
    content. In this case, any reference using an HTTP URL will be considered a duplicate
    of the HTTPS version. Take the following code:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能还会忽视的另一个SEO实践是定义规范链接。Google和其他搜索引擎使用这个信号来了解内容的原始来源。在这种情况下，任何使用HTTP URL的引用都将被视为HTTPS版本的重复。以下代码为例：
- en: '[PRE3]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You should update this to the following:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该更新如下：
- en: '[PRE4]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This will avoid the duplicate content penalty, which in this case would dilute
    the link juice. By defining a `canonical` link, you are telling the search engine
    where to direct the ranking authority.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 这样可以避免重复内容的惩罚，在这种情况下，这会稀释链接流量。通过定义`canonical`链接，您告诉搜索引擎将排名权威导向何处。
- en: Updating Google analytics to default to HTTPS
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将Google分析更新为默认使用HTTPS
- en: Another update you should make concerns your analytics service. Since GA is
    the most common consumer service, I will demonstrate how to update GA.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该进行的另一个更新涉及您的分析服务。由于GA是最常见的消费者服务，我将演示如何更新GA。
- en: 'In the current GA dashboard, there is an ADMIN option at the bottom of the
    menu, as shown in the following screenshot:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在当前的GA仪表板中，菜单底部有一个ADMIN选项，如下面的截图所示：
- en: '![](img/00044.gif)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00044.gif)'
- en: 'This brings up the administration for your site. The center column Property
    has a Property Settings option. Select it:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 这将打开您网站的行政界面。中心列的属性有一个属性设置选项。选择它：
- en: '![](img/00045.jpeg)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00045.jpeg)'
- en: 'In the Property Settings panel, change the Default URL to use the HTTPS protocol
    and save:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在属性设置面板中，将默认URL更改为使用HTTPS协议并保存：
- en: '![](img/00046.gif)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00046.gif)'
- en: Updating the sitemap and RSS feed to HTTPS
  id: totrans-204
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新网站地图和RSS源到HTTPS
- en: Just as you did with your site's source code and content, you should also make
    sure your `sitemal.xml` and RSS feed sources are updated to use HTTPS. These files
    are used by search engines and, of course, anyone that subscribes to your RSS
    feed. They serve as a known directory of your website.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 就像您更新网站源代码和内容一样，您也应该确保您的`sitemal.xml`和RSS源已更新以使用HTTPS。这些文件被搜索引擎和当然，任何订阅您RSS源的人使用。它们充当您网站的一个已知目录。
- en: The links in your sitemap are considered to be a source of authority to the
    search engines. Links in your RSS feed propagate to feed readers, and thus are
    the way many engaged visitors will enter your site. It is important that you bring
    them through the door in the best way.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 您网站地图中的链接被认为是搜索引擎的权威来源。您RSS源中的链接传播到订阅者，因此是许多活跃访客进入您网站的方式。确保以最佳方式引导他们进入非常重要。
- en: Updating your robots.txt file
  id: totrans-207
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新您的robots.txt文件
- en: 'Just in case your `robots.txt` file has full URLs, you should update those
    as well. Generally speaking, you include relative paths if you are allowing and
    disallowing access to spiders. One file you most likely have the full reference
    for is your `sitemap` file:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的`robots.txt`文件包含完整的URL，您也应该更新这些。一般来说，如果您允许和拒绝蜘蛛访问，您包括相对路径。您最有可能有完整引用的文件是您的`sitemap`文件：
- en: '[PRE5]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: While not as common, some sites maintain a `disavow` file for search engine
    spiders. They do this to avoid penalties from negative links. This file should
    also be updated to use `https://`, which reinforces the site's protocol profile
    with the search engines.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然不太常见，但一些网站为搜索引擎蜘蛛维护一个`disavow`文件。他们这样做是为了避免负面链接的惩罚。此文件也应更新为使用`https://`，这加强了网站协议配置文件与搜索引擎的联系。
- en: Summary
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: As you can see, HTTPS is important to implement, but does require some diligence
    on your part to properly configure your site. As TLS, certificates, and HTTP advances,
    the barriers that previously held sites back from implementing HTTPS have been
    removed.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，HTTPS的实施很重要，但确实需要您的一些勤奋来正确配置您的网站。随着TLS、证书和HTTP的进步，之前阻碍网站实施HTTPS的障碍已被消除。
- en: Progressive web applications require HTTPS because it is a higher level of user
    experience. They also require a registered service worker, which also requires
    HTTPS. HTTPS unlocks the modern web's capabilities; without it, your website is
    relegated to a smaller set of capabilities.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 进步式网络应用需要HTTPS，因为它提供了更高的用户体验。它们还需要一个注册的服务工作者，这也需要HTTPS。HTTPS解锁了现代网络的功能；没有它，您的网站将被限制在更小的功能集。
- en: Because TLS ensures the conversation between the client and server is not altered
    by a man in the middle, and because eavesdropping is mitigated, all sites should
    adopt HTTPS. You are adding a level of trust for your customers, and opening the
    gates to the latest features the web has to offer.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 由于TLS确保客户端和服务器之间的对话不会被中间人篡改，并且因为窃听被减轻，所有网站都应该采用HTTPS。您正在为您的客户提供一层信任，并为网络提供的最新功能打开大门。
