- en: Chapter 9. Liferay Workflow Capability
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 9 章 Liferay 工作流功能
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: The Kaleo Web installation
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kaleo 网页安装
- en: The Single Approver workflow for the user creation process
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户创建过程中的单一审批者工作流
- en: The web content creation and the fork-join workflow
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网页内容创建和分叉-合并工作流程
- en: Kaleo conditions in a message board example
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 消息板示例中的 Kaleo 条件
- en: Kaleo timers
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kaleo 定时器
- en: Introduction
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: 'A workflow is a series of activities necessary to complete a task. In other
    words, a workflow consists of a sequence of states connected by transition. Each
    state has a specific step before it and a specific step after it. In general,
    it''s a linear-defined process, which describes the flow between states. The term
    workflow indicates how people do their work and how they handle information. To
    understand workflow definitions, let''s define its specific vocabulary:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 工作流是一系列完成任务的必要活动。换句话说，工作流由一系列通过转换连接的状态组成。每个状态在其之前都有一个特定的步骤，在其之后也有一个特定的步骤。一般来说，它是一个线性定义的过程，描述了状态之间的流程。术语工作流表明人们如何工作以及他们如何处理信息。为了理解工作流定义，让我们定义其特定的词汇：
- en: '**State**: This term describes a unique state that will execute a specific
    action (or many actions) on a work item. For instance, new, approved, commit,
    done, remove, and so on.'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**状态**：这个术语描述了一个唯一的状态，将在工作项上执行特定的动作（或多个动作）。例如，新创建、批准、提交、完成、删除等。'
- en: '**Task**: This defines an activity to be done on a work item between states.'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**任务**：这定义了在状态之间对工作项执行的活动。'
- en: '**Transition**: This defines how a transition rules from one state to another.
    It means that transition describes a list of tasks, which have to be done to transform
    items from one state to another.'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**转换**：这定义了从一种状态到另一种状态的转换规则。这意味着转换描述了一个任务列表，这些任务必须完成以将项目从一种状态转换到另一种状态。'
- en: Liferay Portal includes a workflow engine called Kaleo. This engine provides
    functionalities to define and deploy workflow definitions. Kaleo is an external
    web plugin, which needs to be deployed like other plugins. The current version
    of Kaleo is available on the Liferay marketplace.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay Portal 包含一个名为 Kaleo 的工作流引擎。此引擎提供定义和部署工作流定义的功能。Kaleo 是一个外部网页插件，需要像其他插件一样进行部署。当前版本的
    Kaleo 可在 Liferay 市场中找到。
- en: The Kaleo Web Installation
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Kaleo 网页安装
- en: The workflow engine called Kaleo is defined as a web plugin. Briefly, a web
    plugin is a normal web application, which also provides the ability to use the
    Liferay service layer that is built on Service Builder and other Liferay plugins,
    such as hooks, portlets, and so on. In general, it's a hybrid between a typical
    servlet application and Liferay-specific plugins.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Kaleo 工作流引擎被定义为网页插件。简而言之，网页插件是一个普通的网页应用程序，它还提供了使用基于 Service Builder 和其他 Liferay
    插件（如钩子、插件等）构建的 Liferay 服务层的功能。一般来说，它是一个典型 servlet 应用程序和 Liferay 特定插件的混合体。
- en: Getting ready
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To correctly install Liferay plugins, it's required to create an account on
    the official Liferay site. This account allows you to download plugins on the
    marketplace, discuss on a message board, creates blogs, and so on.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 为了正确安装 Liferay 插件，需要在官方 Liferay 网站上创建一个账户。此账户允许你在市场上下载插件，在论坛上讨论，创建博客等。
- en: How to do it...
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'In the Liferay 6.1.1 GA2 version, Liferay provides a marketplace portlet to
    install all its available plugins. In Liferay 6.2 marketplace portlet is already
    installed, so the installation of the Kaleo plugin is really simple. In order
    to install the Kaleo workflow, go through the following set of steps:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Liferay 6.1.1 GA2 版本中，Liferay 提供了一个市场插件来安装所有可用的插件。在 Liferay 6.2 中，市场插件已经安装，因此
    Kaleo 插件的安装非常简单。为了安装 Kaleo 工作流，请按照以下步骤进行：
- en: Log in as an administrator on the intranet.
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内联网上以管理员身份登录。
- en: Navigate to **Admin** | **Control Panel**.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 **Admin** | **Control Panel**。
- en: Select the **Store** option in the **Apps** section.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **Apps** 部分中选择 **Store** 选项。
- en: Authenticate yourself by entering the Liferay login and password.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入 Liferay 登录名和密码进行身份验证。
- en: Note
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: If Liferay provides a new marketplace portlet, there will be a wizard that updates
    a portlet and downloads the newest one.
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果 Liferay 提供了一个新的市场插件，将会有一个向导来更新插件并下载最新版本。
- en: On the marketplace search form, type `Kaleo Workflow CE` and select the proper
    result.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在市场搜索表单中，输入 `Kaleo Workflow CE` 并选择正确的结果。
- en: Click on the **Free** button.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **Free** 按钮。
- en: Select or create a new project for the purchase; read and accept the terms of
    use. Fill **Legal Entity Name** and click on the **Purchase** button.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择或创建一个新的项目进行购买；阅读并接受使用条款。填写**法人实体名称**并点击**购买**按钮。
- en: 'The system should display the following message:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 系统应显示以下消息：
- en: '**Thank You!**'
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**谢谢！**'
- en: '**Your receipt ID number is <RECEIPT_ID>**'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**您的收据ID号码是<RECEIPT_ID>**'
- en: '**A confirmation email for this order was sent to your inbox.**'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**此订单的确认邮件已发送至您的收件箱**。'
- en: '**Click on "See Purchased" to view and manage your purchases online, or you
    may go to the Marketplace through your Liferay Portal instance and manage your
    purchases from there.**'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**点击“查看已购买”以在线查看和管理您的购买，或者您可以通过Liferay门户实例进入市场并从那里管理您的购买**。'
- en: Navigate to **See Purchased Apps** and click on the **Install** button.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航至**已购买的应用**并点击**安装**按钮。
- en: Verify that a **Workflow** tab is in the **Control Panel** | **Configuration**
    section.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认**控制面板** | **配置**部分中有一个**工作流**标签。
- en: How it works…
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: Liferay uses its own product for the workflow implementation. All Kaleo entities
    are generated by the service-builder mechanism.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: Liferay使用其自己的产品进行工作流实现。所有Kaleo实体都是由服务构建器机制生成的。
- en: 'It means that `service.xml` defines a set of entities: Kaleo Action, Kaleo
    Condition, Kaleo Definition, Kaleo Instance, Kaleo Instance Token, Kaleo Log,
    Kaleo Node, Kaleo Notification, Kaleo Notification Recipient, Kaleo Task, Kaleo
    Task Assignment, KaleoTask Assignment Instance, Kaleo Task Instance Token, Kaleo
    Timer, Kaleo Timer Instance Token, and Kaleo Transition. It''s not necessary to
    know the meaning of all these entities and their relations.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着`service.xml`定义了一组实体：Kaleo Action、Kaleo Condition、Kaleo Definition、Kaleo
    Instance、Kaleo Instance Token、Kaleo Log、Kaleo Node、Kaleo Notification、Kaleo Notification
    Recipient、Kaleo Task、Kaleo Task Assignment、KaleoTask Assignment Instance、Kaleo
    Task Instance Token、Kaleo Timer、Kaleo Timer Instance Token、Kaleo Transition。不需要了解所有这些实体及其关系的含义。
- en: 'After successful installation, there are a couple of new options in the Liferay
    environment:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 安装成功后，Liferay环境中将出现几个新选项：
- en: 'The **Workflow** option in the **Control Panel** | **Configuration** section:
    This is a global workflow configuration, which allows you to define newer workflow
    definitions and manage default workflows between assets (for instance, web content
    articles, users, blogs, and so on)'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**控制面板** | **配置**部分中的**工作流**选项：这是一个全局工作流配置，允许您定义新的工作流定义并管理资产之间的默认工作流（例如，网页内容文章、用户、博客等）。'
- en: '**Workflow configuration** in the **Admin** | **Site Administration** | **Configuration**:
    This defines workflows for the current site'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理员** | **站点管理** | **配置**中的**工作流配置**：这定义了当前站点的工作流。'
- en: 'The **My Workflow tasks** tab in the **{USERNAME}** | **My account** section:
    This functionality lists all pending and complete workflows tasks assigned to
    a specific user'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**我的工作流任务**标签在**{USERNAME}** | **我的账户**部分：此功能列出分配给特定用户的所有挂起和完成的工作流任务。'
- en: '**My Submission** in the **{USERNAME}** | **My account** section: This provides
    the list of assets submitted for the review process'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**我的提交**在**{USERNAME}** | **我的账户**部分：这提供了提交审查流程的资产列表。'
- en: 'Furthermore, Kaleo added specific roles, which can be used in workflow definitions:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Kaleo添加了特定的角色，这些角色可用于工作流定义：
- en: The organization content reviewer
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 组织内容审查员
- en: The portal content reviewer
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 门户内容审查员
- en: The site content reviewer
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站内容审查员
- en: See also
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: For more information on how to manage files or web contents, refer to
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 有关如何管理文件或网页内容的更多信息，请参阅
- en: '*Managing files in Liferay using Documents and Media portlet* recipe in [Chapter
    6](part0050.xhtml#aid-1FLS41 "Chapter 6. Documents and Media in Liferay"), *Documents
    and Media in Liferay*'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第6章](part0050.xhtml#aid-1FLS41 "第6章。Liferay中的文档和媒体")的*在Liferay中使用文档和媒体组件管理文件*配方中，*Liferay中的文档和媒体*。
- en: The *Managing and displaying web contents* recipe in [Chapter 7](part0055.xhtml#aid-1KEEU1
    "Chapter 7. Working with Content"), *Working with Content*
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第7章](part0055.xhtml#aid-1KEEU1 "第7章。与内容一起工作")的*使用内容管理网页内容*配方中，*使用内容*，*在Liferay中使用文档和媒体组件管理文件*配方在[第6章](part0050.xhtml#aid-1FLS41
    "第6章。Liferay中的文档和媒体")中，*Liferay中的文档和媒体*。
- en: The Single Approver workflow for the user creation process
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户创建过程的单个审批者工作流
- en: By default, Kaleo Workflow provides a Single Approver definition. This workflow
    requires one approval state before any asset is published.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Kaleo工作流提供单个审批者定义。此工作流在发布任何资产之前需要经过一个审批状态。
- en: We will show you how to use this workflow for the user creation process.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将向您展示如何使用此工作流进行用户创建过程。
- en: How to do it…
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点…
- en: 'Enabling the Single Approver definition is an easy process. To activate workflow
    for the user creation, perform these steps:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 启用单个审批者定义是一个简单的过程。为了激活用户创建的工作流，请执行以下步骤：
- en: Navigate to the **Admin** | **Control Panel** | **Configuration** | **Workflow**
    tab.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理员** | **控制面板** | **配置** | **工作流**标签页。
- en: Select the **Default Configuration** tab
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**默认配置**标签页
- en: Find the **User** resource and select the **Single Approver (version 1)** definition.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到**用户**资源并选择**单个审批者（版本1）**定义。
- en: Click on the **Save** button.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮。
- en: Tip
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: To check how Single Approver works, try to create a new account in the Sign
    In portlet.
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要检查单个审批者如何工作，请尝试在登录端口创建一个新账户。
- en: Open the Sign In portlet page. By default, it is on the main page.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开登录端口页面。默认情况下，它位于主页上。
- en: Select the **Create Account** option and fill in the form.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**创建账户**选项并填写表格。
- en: 'After submitting the form, the system should display the following message:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提交表单后，系统应显示以下消息：
- en: '**Thank you for creating an account. You will be notified via email at your-mail@example.com
    when your account has been approved.**'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**感谢您创建账户。您的账户被批准后，将通过电子邮件通知您，电子邮件地址为your-mail@example.com。**'
- en: 'The last thing in this process is to approve a new user. In order to achieve
    this, run through the following steps:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这个过程的最后一步是批准一个新用户。为了实现这一点，请按照以下步骤操作：
- en: Log in as an administrator.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录。
- en: Navigate to **My Account** | **My Workflow** tasks.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**我的账户** | **我的工作流**任务。
- en: Find a pending task with the review status and edit it by clicking on the hyperlink
    in the table.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找一个处于审查状态的任务，并通过点击表格中的超链接来编辑它。
- en: Select the **Assigned to Me** option next to **Assign to** field.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**分配给**字段旁边选择**分配给我**选项。
- en: '**Approve** the user (in the dialog box, it''s possible to write a comment).![How
    to do it…](img/image00362.jpeg)'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**批准**用户（在对话框中，可以写评论）。![如何操作…](img/image00362.jpeg)'
- en: Go to the **Completed** tab and check the result. The approved user should be
    on the list.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往**完成**标签页并检查结果。批准的用户应该在该列表中。
- en: Note
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Only a user with an assigned task can transfer it to the next task or state.
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 只有分配了任务的用户才能将其转移到下一个任务或状态。
- en: How it works…
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何工作…
- en: 'To understand this process, let''s examine the Single Approver definition (`single-approver-definition.xml`
    located in `webapps/kaleo-web/WEB-INF/classes/META-INF/definitions`). This definition
    can be drawn as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解这个过程，让我们检查单个审批者定义（位于`webapps/kaleo-web/WEB-INF/classes/META-INF/definitions`的`single-approver-definition.xml`）。这个定义可以表示如下：
- en: '![How it works…](img/image00363.jpeg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![如何工作…](img/image00363.jpeg)'
- en: State
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 状态
- en: 'The starting point of this flow is a state called created. The definition of
    this state is present at the beginning of the `single-approver-definition.xml`
    file:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 此流程的起点是一个名为`created`的状态。该状态的定义位于`single-approver-definition.xml`文件的开始部分：
- en: '[PRE0]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The state node contains:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 状态节点包含：
- en: '`name`: This is the name of a state'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：这是状态的名字'
- en: '`initial`: This flag represents the initial state'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`initial`：这是一个表示初始状态的标志'
- en: 'List of `transitions`: In this example, there is only one transition called
    review'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transitions`列表：在这个例子中，只有一个名为`review`的转换'
- en: 'The transition node can define:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 转换节点可以定义：
- en: '`name`: This is the name of a transition'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：这是转换的名字'
- en: '`target`: This is the name of the target state or task'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`target`：这是目标状态或任务的名字'
- en: '`default`: This is a flag which marks transition as default'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`default`：这是一个标记转换为默认的标志'
- en: Task
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 任务
- en: 'The next step of our flow is a `review` task, which is defined by a transition
    called `review`. Tasks are the most complex structures in a flow definition. The
    task review is the place where users can decide whether to approve an asset or
    reject it. The definition of this task is as follows:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 我们流程的下一步是一个名为`review`的`review`任务，它由一个名为`review`的转换定义。任务是在工作流定义中最复杂的结构。任务审查是用户可以决定是否批准或拒绝资产的地方。此任务的定义如下：
- en: '[PRE1]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The main attributes of task are:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 任务的主要属性包括：
- en: '`name`: This is the name of the task, for instance, review.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：这是任务的名字，例如，review。'
- en: '`actions`: This specifies the list of action elements or notification elements.
    In this example, actions contain only e-mail notifications.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`actions`：这指定了动作元素或通知元素的列表。在这个例子中，动作只包含电子邮件通知。'
- en: '`assignments`: This specifies the list of roles or users to whom the specific
    task is assigned.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`assignments`：这指定了分配给特定任务的角色的列表或用户列表。'
- en: '`transitions`: This specifies the list of transition elements, which describe
    all possible ways to change the state or task. In this example, it''s approved
    or rejected.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transitions`: 这指定了转换元素列表，描述了改变状态或任务的所有可能方式。在这个例子中，是批准或拒绝。'
- en: Notification
  id: totrans-97
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 通知
- en: 'Let''s look deeper into the actions definition. As we mentioned earlier, actions
    can contain notification elements and/or action elements:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更深入地了解动作定义。正如我们之前提到的，动作可以包含通知元素和/或动作元素：
- en: '[PRE2]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The notification node has the following options:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 通知节点有以下选项：
- en: '`name`: This is the name of the notification'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`: 这是通知的名称'
- en: '`template`: This defines the notification''s message'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`template`: 这定义了通知的消息'
- en: '`template-language`: This is one of the three options: freemarker, velocity,
    and text'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`template-language`: 这是三个选项之一：freemarker、velocity和text'
- en: '`notification-type`: This specifies the e-mail, IM, private-message, or user-notification'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`notification-type`: 这指定了电子邮件、IM、私信或用户通知'
- en: '`execution-type`: This specifies one of the three options: `onAssignment` (a
    notification is sent when a specific user is assigned to a specific asset), `onExit`
    (a notification is sent when a specific asset leaves a state or task), and `onEntry`
    (a notification is sent when a specific asset enters the state)'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`execution-type`: 这指定了三个选项之一：`onAssignment`（当特定用户被分配到特定资产时发送通知），`onExit`（当特定资产离开状态或任务时发送通知），以及`onEntry`（当特定资产进入状态时发送通知）'
- en: Note
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The IM type and the private-message type are placeholders for now. This means
    that the Kaleo Web doesn't support these types.
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: IM类型和私信类型目前是占位符。这意味着Kaleo Web不支持这些类型。
- en: Action
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动作
- en: 'The second possibility is to define an action, as shown in the following code:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种可能性是定义一个动作，如下面的代码所示：
- en: '[PRE3]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'An action element has a simple structure, but it''s a powerful tool to invoke
    every piece of code from Liferay. Action contains:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 动作元素具有简单的结构，但它是一个强大的工具，可以调用Liferay中的每一块代码。动作包含：
- en: '`name`: This specifies the name of the action.'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`: 这指定了动作的名称。'
- en: '`script`: This specifies the script definition. In this section, it''s possible
    to write a code, which will be invoked on defining the execution type.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`script`: 这指定了脚本定义。在本节中，可以编写将在定义执行类型时调用的代码。'
- en: '`script-language`: This defines the language which will be used in the script,
    for instance, Groovy, BeanShell, DRL, JavaScript, Python, Ruby. The most commonly
    used is the BeanShell one.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`script-language`: 这定义了脚本中将使用的语言，例如Groovy、BeanShell、DRL、JavaScript、Python、Ruby。最常用的是BeanShell。'
- en: '`execution-type`: This specifies one of the three options: `onAssignment` (a
    notification is sent when a specific user is assigned to a specific asset), `onExit`
    (a notification is sent when a specific asset leaves a state or task), and `onEntry`
    (a notification is sent when a specific asset enters some state).'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`execution-type`: 这指定了三个选项之一：`onAssignment`（当特定用户被分配到特定资产时发送通知），`onExit`（当特定资产离开状态或任务时发送通知），以及`onEntry`（当特定资产进入某个状态时发送通知）。'
- en: The web content creation and the fork-join workflow
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网页内容创建和分支-合并工作流程
- en: 'Let''s assume that our goal is to create a Kaleo definition in order to publish
    articles with the following requirements. Everyone can write an article and submit
    it to reviewers. The review stage has two independent (parallel) steps:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们的目标是创建一个Kaleo定义，以便根据以下要求发布文章。每个人都可以撰写文章并将其提交给审稿人。审查阶段有两个独立的（并行）步骤：
- en: UI quality reviewing
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: UI质量审查
- en: Content quality reviewing
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内容质量审查
- en: Only after these steps, it's possible to publish an article. In this recipe,
    we will show how to use the fork and join functionality in order to create the
    Kaleo definition. Forks and joins are used for parallel processing purposes. Thus,
    they will be a good solution to our problem.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在这些步骤之后，才有可能发布文章。在这个菜谱中，我们将展示如何使用分支和合并功能来创建Kaleo定义。分支和合并用于并行处理目的。因此，它们将是解决我们问题的良好方案。
- en: How to do it…
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点…
- en: 'First of all, let''s visualize workflow and define states, tasks, and transitions.
    This diagram will help us understand the whole process:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们可视化工作流程并定义状态、任务和转换。此图将帮助我们理解整个过程：
- en: '![How to do it…](img/image00364.jpeg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![如何做到这一点…](img/image00364.jpeg)'
- en: 'As shown in the preceding diagram, in our workflow there are following components:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，在我们的工作流程中有以下组件：
- en: The **created** and **approved** state
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建**和**批准**状态'
- en: The **UI quality review** and **content quality review** tasks
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**UI质量审查**和**内容质量审查**任务'
- en: The fork and join functionality.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fork 和 join 功能。
- en: 'The second step is to write a prototype, which defines states, tasks, and transitions
    listed previously:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 第二步是编写一个原型，它定义了之前列出的状态、任务和转换：
- en: Note
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This is only a draft of the real definition. You will find the working definition
    in the code files for this chapter along with this book.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 这只是一个真实定义的草稿。你将在本章的代码文件以及这本书中找到工作定义。
- en: '[PRE4]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The third step is to complete the preceding definition by specifying each node.
    It can be done by copying parts from the Single Approver definition.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 第三步是通过指定每个节点来完成前面的定义。这可以通过从单个审批者定义中复制部分内容来完成。
- en: The next step is to upload this definition in the Kaleo workflow configuration,
    which is placed in the **Admin** | **Control Panel** | **Configuration** | **Workflow**
    section. After uploading the Kaleo definition, there should be a successful message.
    Now, the new definition will be visible in the **Definitions** tab.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是将这个定义上传到 Kaleo 工作流配置中，该配置位于 **管理员** | **控制面板** | **配置** | **工作流** 部分。上传
    Kaleo 定义后，应该会显示成功消息。现在，新的定义将在 **定义** 选项卡中可见。
- en: The final step is to enable a new workflow definition for the web content article.
    This step was described in the previous recipe.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是为网络内容文章启用新的工作流定义。这一步在之前的配方中已有描述。
- en: How it works…
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'This definition uses the fork and join functionality for web content articles.
    In general, when the author adds a new web content and submits it for publication,
    Kaleo workflow creates two tasks: UI Quality Review and Content Quality Review.
    Only after acceptance of these two tasks, the article status changes to approved.
    When the reviewing process is in progress, an article has a pending status.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 这个定义使用了网络内容文章的 fork 和 join 功能。一般来说，当作者添加新的网络内容并将其提交以供发布时，Kaleo 工作流会创建两个任务：UI
    质量审查和内容质量审查。只有在这两个任务被接受后，文章状态才会变为批准。当审查过程正在进行时，文章具有挂起状态。
- en: Let's look deeply into fork and join definitions.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入探讨 `fork` 和 `join` 的定义。
- en: The fork element
  id: totrans-138
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Fork 元素
- en: 'Fork has a similar structure as a state element. The main function of fork
    is to create a list of tasks in a parallel way. The main elements are:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: Fork 的结构与状态元素类似。fork 的主要功能是以并行方式创建任务列表。主要元素包括：
- en: '`name`: This specifies the name of the fork used in a transition definition'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：这指定了在转换定义中使用的 fork 名称'
- en: '`transitions`: This specifies the list of transitions (tasks or states)to be
    created'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transitions`：这指定了要创建的转换（任务或状态）列表'
- en: The fork element has many other functionalities and elements, such as scripts,
    timers, actions, and so on. It can have a really complex structure with a huge
    number of functionalities. In this recipe, we described only the basic function
    of this element.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: Fork 元素具有许多其他功能和元素，例如脚本、定时器、操作等。它可以具有非常复杂的结构，具有大量功能。在本配方中，我们只描述了该元素的基本功能。
- en: The join element
  id: totrans-143
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Join 元素
- en: 'Join is an eternal partner of fork. This pair is always together. The main
    responsibility of this element is waiting unless all parallel tasks are performed
    and accepted. The join element has the following structure:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: Join 是 fork 的永恒伴侣。这对总是在一起。这个元素的主要责任是等待，除非所有并行任务都执行并被接受。join 元素具有以下结构：
- en: '`name`: This specifies the name of the join, which is used in a transition
    definition'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：这指定了 join 的名称，该名称用于转换定义'
- en: '`transitions`: This specifies the list of transitions. It''s usually one transition,
    which describes a state or task after the joining process.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transitions`：这指定了转换列表。通常只有一个转换，它描述了连接过程后的状态或任务。'
- en: Join has exactly the same structure as fork. It can have a very complex structure
    with a whole bunch of functionalities.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: Join 的结构完全与 fork 相同。它可以具有非常复杂的结构，具有众多功能。
- en: There's more…
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Instead of the `join` element, it's possible to use the `join-xor` element.
    The main difference between join and `join-xor` is that join waits for the completion
    of all parallel tasks, but `join-xor` waits only for the first complete task.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 除了 `join` 元素外，还可以使用 `join-xor` 元素。`join` 和 `join-xor` 之间的主要区别在于，`join` 等待所有并行任务完成，而
    `join-xor` 只等待第一个完成的任务。
- en: Join-xor element
  id: totrans-150
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Join-xor 元素
- en: 'The `join-xor` element has the same definition as join:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '`join-xor` 元素与 `join` 的定义相同：'
- en: '`name`: This specifies the name of the join used in a transition definition.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：这指定了在转换定义中使用的 join 名称。'
- en: '`transitions`: This specifies the list of transitions. It''s usually one transition,
    which describes a state or task after the joining process.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transitions`: 这指定了转换列表。通常只有一个转换，它描述了连接过程后的状态或任务。'
- en: See also
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: For more information on managing the web content, refer to *Managing and displaying
    web contents* recipe in [Chapter 7](part0055.xhtml#aid-1KEEU1 "Chapter 7. Working
    with Content"), *Working with Content*.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 有关管理网络内容的更多信息，请参阅[第7章](part0055.xhtml#aid-1KEEU1 "第7章。与内容一起工作")中的*管理和显示网络内容*配方，*与内容一起工作*。
- en: Kaleo conditions in a message board example
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 消息板示例中的Kaleo条件
- en: Kaleo workflow contains conditions. It's possible to use conditions to branch
    workflows and execute different tasks. Let's assume that we are message board
    moderators. In our company, there is a user who must accept new threads and many
    users who accept replies in threads. It's possible to achieve this functionality
    that allows message boards to work this way using Kaleo workflow conditions.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: Kaleo工作流程包含条件。可以使用条件来分支工作流程并执行不同的任务。让我们假设我们是消息板管理员。在我们的公司中，有一个用户必须接受新线程，许多用户接受线程中的回复。可以使用Kaleo工作流程条件实现这种允许消息板这样工作的功能。
- en: How to do it…
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'This definition is similar to the fork and join workflow, but there is a great
    difference. There is no parallel workflow task. Instead, there is a condition,
    which moves an entity to a different state. Obviously, workflow is the same: the
    user creates a new entity and the moderator accepts it. There is little difference
    seen between roles, which are defined for a particular task.'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 此定义类似于分支和合并工作流程，但存在很大差异。没有并行工作流程任务。相反，有一个条件，它将实体移动到不同的状态。显然，工作流程是相同的：用户创建一个新的实体，管理员接受它。在定义特定任务的角色之间几乎没有差异。
- en: 'As shown in the previous example, let''s visualize workflow and define states,
    tasks, and transitions. The following diagram will help you understand the whole
    process in a better way:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一个示例所示，让我们可视化工作流程并定义状态、任务和转换。以下图表将帮助您更好地理解整个过程：
- en: '![How to do it…](img/image00365.jpeg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/image00365.jpeg)'
- en: 'The preceding diagram contains following components:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 上述图表包含以下组件：
- en: The **created** and **approved** state
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建**和**批准**状态'
- en: '**Normal Review** and **Main Thread Review** tasks'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**正常审查**和**主线程审查**任务'
- en: The condition statement.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 条件语句。
- en: 'Let''s define these definitions:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们定义这些定义：
- en: '[PRE5]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'After defining Kaleo, let''s write a conditional script which represents our
    Kaleo condition. In this example, we will use the Groovy script, which will be
    placed in the `<script>` tag in the `<condition>` definition. So, let''s define
    it:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在定义Kaleo之后，让我们编写一个表示我们的Kaleo条件的条件脚本。在这个例子中，我们将使用Groovy脚本，它将被放置在`<condition>`定义中的`<script>`标签内。所以，让我们定义它：
- en: '[PRE6]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: How it works…
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'In the preceding example, we explained the workflow definition, which can be
    applied for all types of asset (for instance, user, web content article, message
    board, and so on). In every type, there is a typical flow: **Created** | **Normal
    Review Task** | **Approved**. However, if we apply this workflow for a message
    board entity, it will have a different flow: **Created** | **Main Thread Review**
    | **Approved**.'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一个示例中，我们解释了工作流程定义，它可以应用于所有类型的资产（例如，用户、网络内容文章、消息板等）。在每种类型中，都有一个典型的流程：**已创建**
    | **正常审查任务** | **批准**。然而，如果我们将此工作流程应用于消息板实体，它将有一个不同的流程：**已创建** | **主线程审查** | **批准**。
- en: Why does this happen? Groovy script defines a condition and determines the complete
    flow.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么会发生这种情况？Groovy脚本定义了一个条件并确定了完整的流程。
- en: The first line gets a `className` definition. Next, the if statement checks
    whether this is a `MBMessage` entity.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 第一行获取`className`定义。接下来，if语句检查这是否是`MBMessage`实体。
- en: 'The next couple of lines get the specific `mbMessage` object and check whether
    this object is a root of `MBMessage`. It''s worth noting that there are predefined
    values:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的几行获取特定的`mbMessage`对象并检查此对象是否是`MBMessage`的根。值得注意的是，有一些预定义的值：
- en: '`returnValue`: This contains the transition''s target'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`returnValue`: 这包含转换的目标'
- en: '`workflowContext`: This object implements the `WorflowContext` interface'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`workflowContext`: 此对象实现了`WorflowContext`接口'
- en: Condition statement
  id: totrans-177
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 条件语句
- en: 'The `<condition>` tag has the following structure:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '`<condition>`标签具有以下结构：'
- en: '`name`: This is the name of the condition.'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`: 这是条件的名称。'
- en: '`script`: This defines a condition.'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`script`: 这定义了一个条件。'
- en: '`script-language`: This defines the language which will be used in the script,
    for instance: Groovy, BeanShell, DRL, JavaScript, Python, Ruby. The most common
    use is the BeanShell one.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`script-language`: 这定义了在脚本中将使用的语言，例如：Groovy、BeanShell、DRL、JavaScript、Python、Ruby。最常见的是BeanShell。'
- en: '`transitions`: This specifies the list of transitions.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transitions`: 这指定了转换列表。'
- en: Kaleo timers
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Kaleo计时器
- en: This last recipe concerns timers. This functionality allows users to define
    specific actions, which should be performed after a certain period of time. Let's
    modify our previous recipe a little with the condition example and add a timer
    definition. Our assumption is that the task called Main Thread Review shouldn't
    wait more than one hour for assignment to any user. After one hour, this task
    should be assigned to a user with the `test@liferay.com` e-mail.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个配方涉及计时器。此功能允许用户定义在特定时间后应执行的具体操作。让我们通过条件示例稍微修改一下之前的配方，并添加一个计时器定义。我们的假设是，名为Main
    Thread Review的任务不应等待超过一小时才分配给任何用户。一小时后，此任务应分配给具有`test@liferay.com`电子邮件地址的用户。
- en: How to do it…
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'First of all, open the previous definition and find the Main Thread Review
    task. Between the assignments tag and the transitions tag, enter the following
    code:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，打开之前的定义并找到Main Thread Review任务。在assignments标签和transitions标签之间，输入以下代码：
- en: '[PRE7]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: How it works…
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Kaleo web plugin gives users the possibility to react to the user's action
    after a specific time period. It allows you to assign tasks to specific users,
    send notifications, and so on.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Kaleo网络插件使用户能够在特定时间后对用户的行为做出反应。它允许您将任务分配给特定用户，发送通知等等。
- en: 'The `<task-timers>` tag has the following structure:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '`<task-timers>`标签具有以下结构：'
- en: '`task-timer`: This specifies complex type with the timer''s definition.'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`task-timer`: 这指定了具有计时器定义的复杂类型。'
- en: '`name`: This specifies the timer''s name.'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`: 这指定了计时器的名称。'
- en: '`delay`: This specifies the delay definition and defines how much time the
    timer will wait until its actions are executed. For instance 1 hour, 5 minutes,
    and so on.'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`delay`: 这指定了延迟定义并定义了计时器在执行其操作之前将等待多长时间。例如，1小时、5分钟等等。'
- en: '`recurrence` (not used in this example): This triggers the action several times
    depending on the argument specified. For instance, for every 1 hour, definition
    invokes a specific action.'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`recurrence`（在此示例中未使用）：根据指定的参数触发操作多次。例如，每1小时，定义调用特定操作。 '
- en: '`blocking`: If this is true, stop the workflow engine execution until the timer
    is executed.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`blocking`: 如果这是true，则停止工作流引擎执行，直到计时器执行。'
- en: '`timer actions`: This specifies the list of actions to be done after the delay
    definition.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timer actions`: 这指定了在延迟定义之后要执行的操作列表。'
