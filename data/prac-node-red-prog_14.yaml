- en: '*Chapter 11*: Visualize Data by Creating a Server-Side Application in the IBM
    Cloud'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第11章*：通过在IBM Cloud中创建服务器端应用程序来可视化数据'
- en: In this chapter, we will create a server application to visualize data that
    has been sent from an edge device in the IoT, using Node-RED. For a server-side
    application, I would like to use the IBM Cloud here. By following the tutorials
    in this chapter, you will master how to visualize sensor data on a server application.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将创建一个服务器应用程序，用于可视化从物联网边缘设备发送的数据，使用Node-RED。对于服务器端应用程序，我想在这里使用IBM Cloud。通过本章中的教程，您将掌握如何在服务器应用程序上可视化传感器数据。
- en: 'Let''s get started with the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从以下主题开始：
- en: Preparing a public MQTT broker service
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备一个公共MQTT代理服务
- en: Publishing the data from Node-RED on an edge device
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在边缘设备上从Node-RED发布数据
- en: Subscribing and visualizing data on the cloud-side Node-RED
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在云端Node-RED上订阅和可视化数据
- en: By the end of this chapter, you will have mastered how to visualize sensor data
    on cloud platforms.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，您将掌握如何在云平台上可视化传感器数据。
- en: Technical requirements
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To progress in this chapter, you will require the following:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 要在本章中取得进展，您将需要以下内容：
- en: 'An IBM Cloud account: [https://cloud.ibm.com/](https://cloud.ibm.com/)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IBM Cloud帐户：[https://cloud.ibm.com/](https://cloud.ibm.com/)
- en: 'A CloudMQTT account: [https://cloudmqtt.com/](https://cloudmqtt.com/)'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CloudMQTT帐户：[https://cloudmqtt.com/](https://cloudmqtt.com/)
- en: The code used in this chapter can be found in `Chapter11` folder at [https://github.com/PacktPublishing/-Practical-Node-RED-Programming](https://github.com/PacktPublishing/-Practical-Node-RED-Programming).
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本章中使用的代码可以在[https://github.com/PacktPublishing/-Practical-Node-RED-Programming](https://github.com/PacktPublishing/-Practical-Node-RED-Programming)的`Chapter11`文件夹中找到。
- en: Preparing a public MQTT broker service
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备一个公共MQTT代理服务
- en: Recall the previous chapter, [*Chapter 10*](B16353_10_ePub_AM.xhtml#_idTextAnchor121),
    *Handling Sensor Data on the Raspberry Pi*. We sent the data of the temperature/humidity
    sensor, which was connected to the edge device (Raspberry Pi), to the cloud and
    confirmed that the data could be observed on the cloud side.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下上一章，[*第10章*](B16353_10_ePub_AM.xhtml#_idTextAnchor121)，*在树莓派上处理传感器数据*。我们将连接到边缘设备（树莓派）的温度/湿度传感器的数据发送到云端，并确认可以在云端观察到数据。
- en: In the previous chapter, we checked how to operate an MQTT broker using a service
    called **Mosquitto**. This was in order to focus on *sending data from edge devices*
    to an MQTT broker.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们检查了如何使用名为**Mosquitto**的服务操作MQTT代理。这是为了专注于*从边缘设备发送数据*到MQTT代理。
- en: However, this was a mechanism where everything was done locally on the Raspberry
    Pi. Essentially, when trying to implement an IoT mechanism, MQTT brokers should
    be in a public location and accessible from anywhere via the internet.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这是一个在树莓派上本地完成的机制。基本上，在尝试实现物联网机制时，MQTT代理应该位于公共位置，并且可以通过互联网从任何地方访问。
- en: It is possible to host your own **Mosquitto** MQTT broker in the public cloud,
    but that adds some extra complexity in terms of setting up and maintaining it.
    There are a number of public MQTT services available that can make it easier to
    get started.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在公共云中托管自己的**Mosquitto** MQTT代理是可能的，但这会增加一些额外的复杂性，涉及设置和维护。有许多公共MQTT服务可用，可以使入门变得更容易。
- en: 'In this chapter, we will use a service called **CloudMQTT** for the MQTT broker,
    but you can replace the MQTT broker part with your favorite service. You can also
    publish your own MQTT broker, such as **Mosquitto**, on IaaS instead of using
    SaaS:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用名为**CloudMQTT**的服务作为MQTT代理，但您可以用您喜欢的服务替换MQTT代理部分。您还可以在IaaS上发布自己的MQTT代理，例如**Mosquitto**，而不是使用SaaS：
- en: '![Figure 11.1 – CloudMQTT overview'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.1 - CloudMQTT概述'
- en: '](img/Figure_11.1_B16353.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.1_B16353.jpg)'
- en: Figure 11.1 – CloudMQTT overview
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.1 - CloudMQTT概述
- en: Important note
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: An MQTT broker is a server that receives messages from the publisher and sends
    them to subscribers.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: MQTT代理是一个服务器，它接收来自发布者的消息并将其发送给订阅者。
- en: The server that delivers messages in PubSub is called the MQTT broker.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在PubSub中传递消息的服务器称为MQTT代理。
- en: 'PubSub is an amalgamation of the words *Publisher* and *Subscriber*:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: PubSub是*发布者*和*订阅者*这两个词的结合：
- en: a) A publisher is a person who delivers a message.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: a) 发布者是传递消息的人。
- en: b) A subscriber is a person who subscribes to a message.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: b) 订阅者是订阅消息的人。
- en: You can think of it as a server that receives messages from clients and distributes
    them to clients.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将其视为从客户端接收消息并将其分发给客户端的服务器。
- en: MQTT differs from ordinary socket communication in that it communicates on a
    one-to-many basis. In other words, it has a mechanism to distribute the message
    of one client to many people. This system allows us to deliver messages to many
    people simultaneously in real time.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: MQTT与普通的套接字通信不同，它是一对多的通信。换句话说，它有一种机制，可以将一个客户端的消息分发给许多人。这个系统允许我们实时同时向许多人传递消息。
- en: We will now learn how to prepare for **CloudMQTT**. As mentioned previously,
    **CloudMQTT** is an MQTT broker published as SaaS. If you don't use **CloudMQTT**
    and want to use another SaaS MQTT broker or publish an MQTT broker on IaaS, you
    can skip this step. However, the basic configuration information for using an
    MQTT broker remains the same, so I believe this step will help you configure any
    MQTT broker.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将学习如何准备**CloudMQTT**。如前所述，**CloudMQTT**是作为SaaS发布的MQTT代理。如果您不使用**CloudMQTT**，想要使用另一个SaaS
    MQTT代理或在IaaS上发布MQTT代理，您可以跳过此步骤。但是，使用MQTT代理的基本配置信息保持不变，因此我相信这一步将帮助您配置任何MQTT代理。
- en: 'Perform the following steps to create an MQTT broker service on **CloudMQTT**:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤在**CloudMQTT**上创建一个MQTT代理服务：
- en: Log in to **CloudMQTT** at [https://cloudmqtt.com/](https://cloudmqtt.com/).
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到[https://cloudmqtt.com/](https://cloudmqtt.com/)的**CloudMQTT**。
- en: 'When you access the website, click the **Log in** button at the top right of
    the window:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 当您访问网站时，点击窗口右上角的**登录**按钮：
- en: '![Figure 11.2 – CloudMQTT website'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.2 - CloudMQTT网站'
- en: '](img/Figure_11.2_B16353.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.2_B16353.jpg)'
- en: Figure 11.2 – CloudMQTT website
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.2 - CloudMQTT网站
- en: 'If you already have your CloudMQTT account, log in to your account by entering
    your email address and password:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经有了CloudMQTT账户，请通过输入你的电子邮件地址和密码登录你的账户：
- en: '![Figure 11.3 – Logging in to CloudMQTT'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.3 - 登录到CloudMQTT'
- en: '](img/Figure_11.3_B16353.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.3_B16353.jpg)'
- en: Figure 11.3 – Logging in to CloudMQTT
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.3 - 登录到CloudMQTT
- en: 'If you don''t yet have your account, please create a new account via the **Sign
    up** button at the bottom of the window:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还没有你的账户，请通过窗口底部的**Sign up**按钮创建一个新账户：
- en: '![Figure 11.4 – Creating your account'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.4 - 创建你的账户'
- en: '](img/Figure_11.4_B16353.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.4_B16353.jpg)'
- en: Figure 11.4 – Creating your account
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.4 - 创建你的账户
- en: Create an instance.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个实例。
- en: 'After logging in, click the **Create New Instance** button in the top-right
    corner of the window:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 登录后，单击窗口右上角的**Create New Instance**按钮：
- en: '![Figure 11.5 – Creating a new instance'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.5 - 创建一个新实例'
- en: '](img/Figure_11.5_B16353.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.5_B16353.jpg)'
- en: Figure 11.5 – Creating a new instance
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.5 - 创建一个新实例
- en: Select a name and payment plan.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个名称和付款计划。
- en: This name is for your MQTT broker service. You can give it any name you want.
    I have used `Packt MQTT Broker`.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这个名称是为了你的MQTT代理服务。你可以给它任何你想要的名字。我用了`Packt MQTT Broker`。
- en: Unfortunately, the free plan, **Cute Cat**, is no longer available. So, we will
    select the cheapest plan, **Humble Hedgehog**, here. This plan costs $5/month.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，免费计划**Cute Cat**已经不再可用。所以，我们将在这里选择最便宜的计划**Humble Hedgehog**。这个计划每月需要5美元。
- en: It's up to you to use this paid service. If you want to avoid billing, you need
    to look for a free MQTT broker service.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这个付费服务取决于你。如果你想避免计费，你需要寻找一个免费的MQTT代理服务。
- en: 'After selecting the name and payment plan, click the **Select Region** button:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 选择名称和付款计划后，单击**Select Region**按钮：
- en: '![Figure 11.6 – Selecting a name and payment plan'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.6 - 选择名称和付款计划'
- en: '](img/Figure_11.6_B16353.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.6_B16353.jpg)'
- en: Figure 11.6 – Selecting a name and payment plan
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.6 - 选择名称和付款计划
- en: Select a region and data center.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个区域和数据中心。
- en: This service is running on **AWS**. So, you can select a region where the data
    center is placed. You can select any region. Here, we are using **US-East-1**.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这个服务正在**AWS**上运行。所以，你可以选择数据中心所在的区域。你可以选择任何区域。在这里，我们使用**US-East-1**。
- en: After making the selection, click the **Review** button:![Figure 11.7 – Selecting
    a region and data center
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 做出选择后，点击**Review**按钮：![图11.7 - 选择区域和数据中心
- en: '](img/Figure_11.7_B16353.jpg)'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.7_B16353.jpg)'
- en: Figure 11.7 – Selecting a region and data center
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.7 - 选择区域和数据中心
- en: Next, finalize creation of the MQTT broker instance.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，完成MQTT代理实例的创建。
- en: 'Please check the payment plan, service name, service provider, and data center
    region. After that, click the **Create instance** button to finalize creation
    of this instance:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 请检查付款计划、服务名称、服务提供商和数据中心区域。之后，点击**Create instance**按钮完成此实例的创建：
- en: '![Figure 11.8 – Finalizing MQTT broker instance creation'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.8 - 完成MQTT代理实例创建'
- en: '](img/Figure_11.8_B16353.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.8_B16353.jpg)'
- en: Figure 11.8 – Finalizing MQTT broker instance creation
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.8 - 完成MQTT代理实例创建
- en: Publishing the data from Node-RED on an edge device
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在边缘设备上发布来自Node-RED的数据
- en: In this section, we will configure our Raspberry Pi. To get started, launch
    the Raspberry Pi and open the Node-RED flow editor. This Node-RED flow editor
    should still have a flow to send the sensor data implemented in [*Chapter 10*](B16353_10_ePub_AM.xhtml#_idTextAnchor121),
    *Handling Sensor Data on the Raspberry Pi*, to the server. If you have deleted
    this flow, or if you have not created it, please re-execute it by referring to
    [*Chapter 10*](B16353_10_ePub_AM.xhtml#_idTextAnchor121), *Handling Sensor Data
    on the Raspberry Pi*. Double-click the **mqtt out** node that makes up the flow
    to open the settings window. We used **Mosquitto** last time, but this time we
    will connect to **CloudMQTT**.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将配置我们的树莓派。首先，启动树莓派并打开Node-RED流编辑器。这个Node-RED流编辑器应该仍然有一个流来发送传感器数据，实现在[*第10章*](B16353_10_ePub_AM.xhtml#_idTextAnchor121)，*在树莓派上处理传感器数据*中。如果你已经删除了这个流，或者你还没有创建它，请参考[*第10章*](B16353_10_ePub_AM.xhtml#_idTextAnchor121)，*在树莓派上处理传感器数据*来重新执行它。双击组成流的**mqtt
    out**节点以打开设置窗口。我们上次使用了**Mosquitto**，但这次我们将连接到**CloudMQTT**。
- en: 'Perform the following steps to configure Node-RED on the Raspberry Pi to connect
    to CloudMQTT:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤配置树莓派上的Node-RED连接到CloudMQTT：
- en: Access the flow you created in [*Chapter 10*](B16353_10_ePub_AM.xhtml#_idTextAnchor121),
    *Handling Sensor Data on the Raspberry Pi*.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问你在[*第10章*](B16353_10_ePub_AM.xhtml#_idTextAnchor121)中创建的流程，*在树莓派上处理传感器数据*。
- en: 'In this chapter, we only use a flow with the **mqtt out** node because this
    scenario is just for sending data to a Raspberry Pi:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们只使用了一个带有**mqtt out**节点的流，因为这个场景只是为了向树莓派发送数据：
- en: '![Figure 11.9 – Accessing the flow we created in the previous chapter'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.9 - 访问我们在上一章中创建的流程'
- en: '](img/Image86736.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Image86736.jpg)'
- en: Figure 11.9 – Accessing the flow we created in the previous chapter
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.9 - 访问我们在上一章中创建的流程
- en: Edit the `packt`
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑`packt`
- en: '`1`'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`1`'
- en: '`true`'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`true`'
- en: Click the **Edit** button (pencil mark) to the right of **Server** to open the
    credential properties:![Figure 11.11 – Clicking the Edit button to open the Properties
    settings
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**Edit**按钮（铅笔标记）右侧的**Server**以打开凭证属性：![图11.11 - 单击“编辑”按钮打开属性设置
- en: '](img/Figure_11.11_B16353.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.11_B16353.jpg)'
- en: Figure 11.11 – Clicking the Edit button to open the Properties settings
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.11 - 单击“编辑”按钮打开属性设置
- en: On the Server settings panel, select the `driver.cloudmqtt.com`
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在服务器设置面板上，选择`driver.cloudmqtt.com`
- en: '`18913`'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`18913`'
- en: The other properties in the **Connection** tab are not supposed to be changed
    and must be kept at their default values.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '**Connection**选项卡中的其他属性不应该被更改，必须保持它们的默认值。'
- en: 'You can refer to the following screenshot for the **Connection** tab settings:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以参考以下截图来设置**Connection**选项卡：
- en: '![Figure 11.12 – MQTT broker server settings'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.12 - MQTT代理服务器设置'
- en: '](img/Figure_11.12_B16353.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.12_B16353.jpg)'
- en: Figure 11.12 – MQTT broker server settings
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.12 – MQTT代理服务器设置
- en: 'Next, select the **Security** tab to edit the configuration to connect the
    MQTT broker and fill in each property as follows:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择**安全**选项卡来编辑配置以连接MQTT代理，并填写每个属性如下：
- en: '**Username**: The user that you got from CloudMQTT.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户名**：您从CloudMQTT获得的用户。'
- en: '**Password**: The password that you got from CloudMQTT.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：您从CloudMQTT获得的密码。'
- en: 'You can refer to the following screenshot for the **Security** tab settings:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以参考以下截图来设置**安全**选项卡：
- en: '![Figure 11.13 – MQTT broker user and password settings'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.13 – MQTT代理用户和密码设置'
- en: '](img/Figure_11.13_B16353.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.13_B16353.jpg)'
- en: Figure 11.13 – MQTT broker user and password settings
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.13 – MQTT代理用户和密码设置
- en: 'You can check these properties at the CloudMQTT admin menu. This menu can be
    accessed via the Instances list of the CloudMQTT dashboard: [https://customer.cloudmqtt.com/instance](https://customer.cloudmqtt.com/instance)'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在CloudMQTT管理菜单中检查这些属性。此菜单可以通过CloudMQTT仪表板的实例列表访问：[https://customer.cloudmqtt.com/instance](https://customer.cloudmqtt.com/instance)
- en: '![Figure 11.14 – CloudMQTT Instances list'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.14 – CloudMQTT实例列表'
- en: '](img/Figure_11.14_B16353.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.14_B16353.jpg)'
- en: Figure 11.14 – CloudMQTT Instances list
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.14 – CloudMQTT实例列表
- en: This completes the settings on the Raspberry Pi side. Next, let's set up the
    Node-RED flow editor so that data can be acquired (subscribed) with Node-RED on
    the cloud side.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了树莓派端的设置。接下来，让我们设置Node-RED流编辑器，以便可以在云端的Node-RED上获取（订阅）数据。
- en: Subscribing and visualizing data on the cloud-side Node-RED
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在云端Node-RED上订阅和可视化数据
- en: In this section, we will see how to visualize the received data with Node-RED
    on the cloud side. This uses one of the dashboard nodes as we learned in [*Chapter
    6*](B16353_06_ePub_AM.xhtml#_idTextAnchor073), *Implementing Node-RED in the Cloud*,
    but this time, we'll choose Gauge's UI to make it look a little better.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看到如何使用Node-RED在云端可视化接收到的数据。这使用了我们在[*第6章*](B16353_06_ePub_AM.xhtml#_idTextAnchor073)中学到的仪表板节点之一，但这次，我们将选择Gauge的UI，使其看起来更好一些。
- en: The cloud-side Node-RED used this time runs on the IBM Cloud (PaaS), but CloudMQTT,
    which created the service as an MQTT broker earlier, is a cloud service that differs
    from the IBM Cloud.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这次使用的云端Node-RED运行在IBM Cloud（PaaS）上，但是之前创建了MQTT代理服务的CloudMQTT是一种与IBM Cloud不同的云服务。
- en: In this chapter, we will learn that an MQTT broker exists so that it can be
    accessed from various places, and that both publishers (data distributors) and
    subscribers (data receivers) can use it without being aware of where it is.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将学习到MQTT代理存在的原因，以便可以从各个地方访问它，并且发布者（数据分发者）和订阅者（数据接收者）都可以在不知道它在哪里的情况下使用它。
- en: Preparing Node-RED on the IBM Cloud
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在IBM Cloud上准备Node-RED
- en: 'Now, let''s create a Node-RED flow connected to CloudMQTT by performing the
    following steps. Here, we will use Node-RED on the IBM Cloud. Please note that
    it is not Node-RED on the Raspberry Pi:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们通过以下步骤创建一个连接到CloudMQTT的Node-RED流。在这里，我们将在IBM Cloud上使用Node-RED。请注意，这不是树莓派上的Node-RED：
- en: Open the Node-RED flow editor, log in to your IBM Cloud, and call the Node-RED
    service you have already created from your dashboard.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Node-RED流编辑器，登录到您的IBM Cloud，并从仪表板中调用您已经创建的Node-RED服务。
- en: Either click on **View all** or **Cloud Foundry services** on the **Resource
    summary** tile on the dashboard. Clicking on either option will take you to a
    list of resources on the IBM Cloud you created:![Figure 11.15 – Opening the resource
    list
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要么点击**查看全部**，要么点击**Cloud Foundry服务**在**资源摘要**仪表板上的瓷砖。点击任一选项都会带您到您在IBM Cloud上创建的资源列表：![图11.15
    – 打开资源列表
- en: '](img/Figure_11.15_B16353.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.15_B16353.jpg)'
- en: Figure 11.15 – Opening the resource list
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.15 – 打开资源列表
- en: If you have not created a Node-RED service on your IBM Cloud, please refer to
    [*Chapter 6*](B16353_06_ePub_AM.xhtml#_idTextAnchor073), *Implementing Node-RED
    in the Cloud*, to create one before moving ahead.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在IBM Cloud上尚未创建Node-RED服务，请参考[*第6章*](B16353_06_ePub_AM.xhtml#_idTextAnchor073)，*在云中实现Node-RED*，在继续之前创建一个。
- en: Under the **Cloud Foundry apps** displayed on the **Resource list** screen,
    click on the Node-RED service you created to open the Node-RED flow editor:![Figure
    11.16 – Selecting the Node-RED service you created
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**资源列表**屏幕上显示的**Cloud Foundry应用**下，点击您创建的Node-RED服务以打开Node-RED流编辑器：![图11.16
    – 选择您创建的Node-RED服务
- en: '](img/Figure_11.16_B16353.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.16_B16353.jpg)'
- en: Figure 11.16 – Selecting the Node-RED service you created
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.16 – 选择您创建的Node-RED服务
- en: Then, click **Visit App URL** to access the Node-RED flow editor:![Figure 11.17
    – Clicking Visit App URL
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，点击**访问应用URL**来访问Node-RED流编辑器：![图11.17 – 点击访问应用URL
- en: '](img/Figure_11.17_B16353.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.17_B16353.jpg)'
- en: Figure 11.17 – Clicking Visit App URL
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.17 – 点击访问应用URL
- en: When the top screen of the Node-RED flow editor is displayed, click the **Go
    to your Node-RED flow editor** button to open the Node-RED flow editor:![Figure
    11.18 – Clicking the Go to your Node-RED flow editor button
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当Node-RED流编辑器的顶部屏幕显示时，点击**转到您的Node-RED流编辑器**按钮来打开Node-RED流编辑器：![图11.18 – 点击转到您的Node-RED流编辑器按钮
- en: '](img/Figure_11.18_B16353.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.18_B16353.jpg)'
- en: Figure 11.18 – Clicking the Go to your Node-RED flow editor button
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.18 – 点击转到您的Node-RED流编辑器按钮
- en: Make a flow to visualize the data.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个流来可视化数据。
- en: When you accessed your Node-RED flow editor on your IBM Cloud, create a flow
    as follows. Place the **mqtt in** node, **json** node, two **change** nodes, and
    **gauge** node after each **change** node. If you want to get the debug log for
    this flow, please add the **debug** node after any node. In this example, two
    **debug** nodes are placed after the **mqtt in** node and the first **change**
    node.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 当您在IBM Cloud上访问您的Node-RED流编辑器时，请按以下步骤创建一个流。在每个**change**节点之后放置**mqtt in**节点，**json**节点，两个**change**节点和**gauge**节点。如果您想要获取此流的调试日志，请在任何节点之后添加**debug**节点。在本例中，在**mqtt
    in**节点和第一个**change**节点之后放置了两个**debug**节点。
- en: 'You already have the **dashboard** nodes, including the **gauge** node. If
    you don''t have them, please go back to the *Make a flow for use case 2 – visualizing
    data* tutorial in [*Chapter 6*](B16353_06_ePub_AM.xhtml#_idTextAnchor073), *Implementing
    Node-RED in the Cloud*, to get the **dashboard** nodes:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经拥有**仪表板**节点，包括**仪表**节点。如果没有，请返回到[*第6章*](B16353_06_ePub_AM.xhtml#_idTextAnchor073)中的*为用例2制作流程-可视化数据*教程中，*在云中实现Node-RED*，以获取**仪表板**节点：
- en: '![Figure 11.19 – Making a flow'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.19 – 制作流程'
- en: '](img/Figure_11.19_B16353.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.19_B16353.jpg)'
- en: Figure 11.19 – Making a flow
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.19 – 制作流程
- en: Edit the `packt`
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑`packt`
- en: '`1`'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`1`'
- en: '`auto-detect` (string or buffer)'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`auto-detect`（字符串或缓冲区）'
- en: Click the **Edit** button (pencil icon) to the right of **Server** to open the
    credential properties:![Figure 11.20 – Clicking the Edit button to open the Properties
    settings
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**右侧的编辑**按钮（铅笔图标）以打开凭据属性：![图11.20 – 单击编辑按钮打开属性设置
- en: '](img/Figure_11.20_B16353.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.20_B16353.jpg)'
- en: Figure 11.20 – Clicking the Edit button to open the Properties settings
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.20 – 单击编辑按钮打开属性设置
- en: On the Server settings panel, select the `driver.cloudmqtt.com`
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在服务器设置面板上，选择`driver.cloudmqtt.com`
- en: '`18913`'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`18913`'
- en: The other properties of the **Connection** tab are not supposed to be changed
    and must be kept at their default values.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '**连接**选项卡的其他属性不应更改，必须保持其默认值。'
- en: 'You can refer to the following screenshot for the **Connection** tab settings:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以参考以下截图进行**连接**选项卡设置：
- en: '![Figure 11.21 – MQTT broker server settings'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.21 – MQTT代理服务器设置'
- en: '](img/Figure_11.21_B16353.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.21_B16353.jpg)'
- en: Figure 11.21 – MQTT broker server settings
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.21 – MQTT代理服务器设置
- en: 'Next, select the **Security** tab to edit the configuration to connect the
    MQTT server and fill in each property with the following values:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择**安全**选项卡以编辑连接MQTT服务器的配置，并使用以下值填写每个属性：
- en: '**Username**: The user that you got from CloudMQTT.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户名**：您从CloudMQTT获取的用户。'
- en: '**Password**: The password that you got from CloudMQTT.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：您从CloudMQTT获取的密码。'
- en: 'You can refer to the following screenshot for the **Security** tab settings:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以参考以下截图进行**安全**选项卡设置：
- en: '![Figure 11.22 – MQTT broker user and password settings'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.22 – MQTT代理用户和密码设置'
- en: '](img/Figure_11.22_B16353.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.22_B16353.jpg)'
- en: Figure 11.22 – MQTT broker user and password settings
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.22 – MQTT代理用户和密码设置
- en: As you may have already noticed, these properties have the same values that
    you set for the **mqtt out** node on the Raspberry Pi Node-RED. Please refer to
    the CloudMQTT dashboard if necessary.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您可能已经注意到的那样，这些属性具有您在树莓派Node-RED上为**mqtt out**节点设置的相同值。如有必要，请参考CloudMQTT仪表板。
- en: Now, edit the json node. Double-click on the `msg.payload` on **Property**:![Figure
    11.23 – Setting the json node properties
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，编辑json节点。双击**属性**中的`msg.payload`：![图11.23 – 设置json节点属性
- en: '](img/Figure_11.23_B16353.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.23_B16353.jpg)'
- en: Figure 11.23 – Setting the json node properties
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.23 – 设置json节点属性
- en: Edit the settings of the `msg.payload.temperature` in the box entitled **to**
    under the **Rules** area. Then, click the **Done** button to close the settings
    window:![Figure 11.24 – Setting the properties of the first change node
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑**规则**区域下**to**框中的`msg.payload.temperature`的设置。然后，单击**完成**按钮关闭设置窗口：![图11.24
    – 设置第一个更改节点的属性
- en: '](img/Figure_11.24_B16353.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.24_B16353.jpg)'
- en: Figure 11.24 – Setting the properties of the first change node
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.24 – 设置第一个更改节点的属性
- en: Also, edit the settings of the second `msg.payload.humidity` in the box entitled
    **to** in the **Rules** area and then click the **Done** button to close the settings
    window:![Figure 11.25 – Setting the properties of the second change node
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，在**规则**区域的**to**框中编辑第二个`msg.payload.humidity`的设置，然后单击**完成**按钮关闭设置窗口：![图11.25
    – 设置第二个更改节点的属性
- en: '](img/Figure_11.25_B16353.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.25_B16353.jpg)'
- en: Figure 11.25 – Setting the properties of the second change node
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.25 – 设置第二个更改节点的属性
- en: Edit the settings of the first **gauge** node. Double-click on the first **gauge**
    node to open the **Settings** window and then click the **Edit** button (pencil
    icon) to the right of **Group** to open the properties:![Figure 11.26 – Clicking
    the Edit button to open the Properties settings
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑第一个**仪表**节点的设置。双击第一个**仪表**节点以打开**设置**窗口，然后单击**右侧的编辑**按钮（铅笔图标）以打开属性：![图11.26
    – 单击编辑按钮打开属性设置
- en: '](img/Figure_11.26_B16353.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.26_B16353.jpg)'
- en: Figure 11.26 – Clicking the Edit button to open the Properties settings
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.26 – 单击编辑按钮打开属性设置
- en: 'In the dashboard''s group setting panel, fill in each property with the following
    values:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在仪表板的组设置面板中，使用以下值填写每个属性：
- en: '`Raspberry Pi Sensor data`'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`树莓派传感器数据`'
- en: '* It''s OK to provide any name here. This name will be displayed on the chart
    web page that we''ll create.'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '* 在此处提供任何名称都可以。此名称将显示在我们将创建的图表网页上。'
- en: 'Other properties are not supposed to be changed and must be kept at their default
    values. You can refer to the following screenshot:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 其他属性不应更改，必须保持其默认值。您可以参考以下截图：
- en: '![Figure 11.27 – Setting the group name'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.27 – 设置组名'
- en: '](img/Figure_11.27_B16353.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.27_B16353.jpg)'
- en: Figure 11.27 – Setting the group name
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.27 – 设置组名
- en: Go back to the main panel of the `Temperature`
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回到`Temperature`的主面板
- en: '`°C` (if you prefer to use Fahrenheit, please use °F)'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`°C`（如果您希望使用华氏度，请使用°F）'
- en: '**Range**: -**15 ~ 50** (if you prefer to use Fahrenheit, please adjust the
    range accordingly)'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**范围**：-**15 ~ 50**（如果您希望使用华氏度，请相应调整范围）'
- en: 'Other properties are not supposed to be changed from their default values.
    You can refer to the following screenshot for the settings:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 其他属性不应更改其默认值。您可以参考以下截图进行设置：
- en: '![Figure 11.28 – Setting the gauge node properties'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.28 – 设置仪表节点属性'
- en: '](img/Figure_11.28_B16353.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.28_B16353.jpg)'
- en: Figure 11.28 – Setting the gauge node properties
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.28 – 设置仪表节点属性
- en: Edit the settings of the second `Humidity`
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑第二个`湿度`的设置
- en: '`%`'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`％`'
- en: '**Range**: **0 ~ 100**'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**范围**：**0 ~ 100**'
- en: 'Other properties are not supposed to be changed from their default values.
    You can refer to the following screenshot for the settings:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 其他属性不应更改其默认值。您可以参考以下屏幕截图进行设置：
- en: '![Figure 11.29 – Setting the gauge node properties'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.29 – 设置表盘节点属性'
- en: '](img/Figure_11.29_B16353.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.29_B16353.jpg)'
- en: Figure 11.29 – Setting the gauge node properties
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.29 – 设置表盘节点属性
- en: Please make sure to deploy the flow on your Node-RED.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 请确保在Node-RED上部署流程。
- en: This completes the Node-RED configuration on the IBM Cloud. This means that
    this flow is already subscribing (awaiting the data) with the topic `packt` for
    the CloudMQTT service. Next, it's time to publish and subscribe to the data.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了IBM Cloud上的Node-RED配置。这意味着此流程已经订阅（等待数据）使用主题`packt`进行CloudMQTT服务。接下来是发布和订阅数据的时间。
- en: Visualization of the data on the IBM Cloud
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在IBM Cloud上可视化数据
- en: On the edge device side, on the Raspberry Pi, we are ready to publish the sensor
    data to CloudMQTT with the topic `packt`. On the cloud side, the flow is already
    with the `packt` topic for the CloudMQTT service.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在边缘设备端，即树莓派上，我们已准备好使用主题`packt`将传感器数据发布到CloudMQTT。在云端，流程已经使用`packt`主题进行CloudMQTT服务。
- en: 'For a Raspberry Pi, perform the following steps to publish your data:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 对于树莓派，执行以下步骤发布您的数据：
- en: Publish the data from your Raspberry Pi.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从您的树莓派发布数据。
- en: 'Access your Node-RED flow editor on your Raspberry Pi. Click the button of
    the **inject** node to run this flow for publishing grove temperature and humidity
    sensor data:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 访问您的树莓派上的Node-RED流程编辑器。单击**注入**节点的按钮以运行此流程以发布槽温度和湿度传感器数据：
- en: '![Figure 11.30 – Running the flow for publishing data'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.30 – 运行发布数据的流程'
- en: '](img/Figure_11.30_B16353.jpg)'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.30_B16353.jpg)'
- en: Figure 11.30 – Running the flow for publishing data
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.30 – 运行发布数据的流程
- en: Check receipt of the data on the IBM Cloud.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查IBM Cloud上数据的接收情况。
- en: 'You will be able to receive (subscribe) the data via CloudMQTT. You can check
    it on the **debug** tab on your Node-RED flow editor on the IBM Cloud:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 您将能够通过CloudMQTT接收（订阅）数据。您可以在IBM Cloud上的Node-RED流程编辑器的**调试**选项卡上检查：
- en: '![Figure 11.31 – Checking the subscribing of the data'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.31 – 检查数据的订阅情况'
- en: '](img/Figure_11.31_B16353.jpg)'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.31_B16353.jpg)'
- en: Figure 11.31 – Checking the subscribing of the data
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.31 – 检查数据的订阅情况
- en: 'Open the chart web page via the **chart** tab on your Node-RED flow editor
    on the IBM Cloud and then click the **open** button (diagonal arrow icon) to open
    it:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过IBM Cloud上的Node-RED流程编辑器的**图表**选项卡打开图表网页，然后单击**打开**按钮（对角箭头图标）打开它：
- en: '![Figure 11.32 – Opening the chart web page'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.32 – 打开图表网页'
- en: '](img/Figure_11.32_B16353.jpg)'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.32_B16353.jpg)'
- en: Figure 11.32 – Opening the chart web page
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.32 – 打开图表网页
- en: 'You will see the web page gauge chart with the data displayed:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到显示数据的网页表盘图表：
- en: '![Figure 11.33 – The chart web page is displayed'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '![图11.33 – 显示图表网页'
- en: '](img/Figure_11.33_B16353.jpg)'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_11.33_B16353.jpg)'
- en: Figure 11.33 – The chart web page is displayed
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.33 – 显示图表网页
- en: Congratulations! Now you know how to observe the data sent from the Raspberry
    Pi on the server and visualize it as a chart.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！现在您知道如何观察从树莓派发送到服务器的数据并将其可视化为图表。
- en: 'If you want the flow configuration file to make this flow on your Node-RED,
    you can get it here: [https://github.com/PacktPublishing/-Practical-Node-RED-Programming/blob/master/Chapter11/getting-sensordata-with-iotplatform.json](https://github.com/PacktPublishing/-Practical-Node-RED-Programming/blob/master/Chapter11/getting-sensordata-with-iotplatform.json).'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望在Node-RED上进行流程配置文件以使此流程生效，您可以在这里获取：[https://github.com/PacktPublishing/-Practical-Node-RED-Programming/blob/master/Chapter11/getting-sensordata-with-iotplatform.json](https://github.com/PacktPublishing/-Practical-Node-RED-Programming/blob/master/Chapter11/getting-sensordata-with-iotplatform.json)。
- en: Summary
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we experienced how to receive the sensor data sent from an
    edge device and visualize it on the server side.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们体验了如何接收从边缘设备发送的传感器数据并在服务器端进行可视化。
- en: In this chapter, we used CloudMQTT and Node-RED on the IBM Cloud. Node-RED can
    run on any cloud platform and on-premises, and you can try to make this kind of
    application in any environment. That's why remembering this pattern will definitely
    be useful for your future development with other cloud IoT platforms.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们在IBM Cloud上使用了CloudMQTT和Node-RED。Node-RED可以在任何云平台和本地运行，并且您可以尝试在任何环境中制作这种应用。因此，记住这种模式对于您未来在其他云IoT平台上的开发肯定会有用。
- en: In the next chapter, we will look at a hands-on scenario of making a chatbot
    application with Node-RED. This will introduce you to a new way of using Node-RED.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍如何使用Node-RED制作一个聊天机器人应用的实际场景。这将为您介绍Node-RED的新用法。
