- en: Publishing the App for Different Platforms
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为不同平台发布App
- en: 'In this chapter, we will cover the following tasks related to publishing and
    future-proofing an app:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖与发布和确保app未来兼容性相关的以下任务：
- en: Adding versioning to future-proof the app
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为确保应用未来兼容性添加版本控制
- en: Building and publishing an app for iOS
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为iOS构建和发布app
- en: Building and publishing an app for Android
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Android构建和发布app
- en: Introduction
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: 'In the past, it was very cumbersome to build and successfully publish an app.
    However, there is much documentation and many unofficial instructions on the internet
    today that can pretty much address any problem that you may run into. In addition,
    Ionic also comes with its own CLI to assist in this process. This chapter will
    guide you through the app building and publishing steps at a high level. You will
    learn how to do the following things:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去，构建和成功发布一个app非常繁琐。然而，如今互联网上有大量的文档和非官方指南，几乎可以解决你可能遇到的所有问题。此外，Ionic还自带CLI来协助这个过程。本章将指导你以高级别了解app构建和发布步骤。你将学习以下内容：
- en: Add versioning to future-proof the app
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为确保应用未来兼容性添加版本控制
- en: Publish your app to App Store or Google Play
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将你的app发布到App Store或Google Play
- en: The purpose of this chapter is to provide ideas on what to look for and some
    *gotchas*. Apple and Google constantly update their platforms and processes; so,
    the steps may not look exactly the same over time.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的目的是提供一些查找思路和一些注意事项。苹果和谷歌不断更新他们的平台和流程；因此，步骤可能随着时间的推移而有所不同。
- en: Adding versioning to future-proof the app
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为确保应用未来兼容性添加版本控制
- en: It's typical that you don't think about keeping track of the app version for
    a particular user. However, as the app grows in regard to the number of users
    and releases, you will soon face the problem of update issues and incompatibilities.
    For example, a user may run an old version of your app but all your backend APIs
    now expect new parameters from a newer app version. Therefore, you may want to
    think about a strategy to detect the app version locally in order to notify the
    users of an update requirement. This is also helpful if your backend processes
    differently for a specific app version.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，你可能不会考虑跟踪特定用户的app版本。然而，随着用户数量和发布版本的增多，你很快就会面临更新问题和兼容性问题。例如，一个用户可能运行的是你app的旧版本，但你现在所有的后端API都期望从新版本中获取新的参数。因此，你可能需要考虑一种策略来本地检测app版本，以便通知用户更新需求。这在你后端针对特定app版本进行不同处理时也非常有用。
- en: 'The app which you are going to build is very simple. It will detect the current
    version and store the information in a service. This is a screenshot of the app:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你将要构建的app非常简单。它将检测当前版本并将信息存储在服务中。这是app的截图：
- en: '![](img/9a27a430-803b-4de5-98e4-f6960e606348.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9a27a430-803b-4de5-98e4-f6960e606348.png)'
- en: Getting ready
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: The following app example must run on a physical device or a simulator.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 以下app示例必须在物理设备或模拟器上运行。
- en: How to do it...
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Take a look at the following instructions:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 查看以下说明：
- en: 'Create a new `MyAppVersion` app using the `blank` template, as follows, and
    navigate to the `MyAppVersion` folder:'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`blank`模板创建一个新的`MyAppVersion` app，如下所示，并导航到`MyAppVersion`文件夹：
- en: '[PRE0]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Install the `app-version` plugin:'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装`app-version`插件：
- en: '[PRE1]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Edit `./config.xml` by changing the version number, as follows:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过更改版本号来编辑`./config.xml`，如下所示：
- en: '[PRE2]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Note that your `widget id` might be different from the one mentioned here. You
    only need to change the version number. In this case, it is the `0.0.123` version.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，你的`widget id`可能与这里提到的不同。你只需要更改版本号。在这种情况下，是`0.0.123`版本。
- en: 'Create the `services` folder inside the `app` folder, as follows:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`app`文件夹内创建`services`文件夹，如下所示：
- en: '[PRE3]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Create `myenv.ts` in the `services` folder with the following code:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`services`文件夹中创建`myenv.ts`文件，并包含以下代码：
- en: '[PRE4]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This is your only service for this app. In a real-world project, you will need
    multiple services because some of them will have to communicate directly with
    your backend.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这是此app的唯一服务。在实际项目中，你可能需要多个服务，因为其中一些将需要直接与你的后端通信。
- en: 'Open and edit your `/src/app/app.module.ts`, as follows:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开并编辑你的`/src/app/app.module.ts`，如下所示：
- en: '[PRE5]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The main modification in this file is to inject the `AppVersion` and `MyEnv`
    providers for the entire app.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在此文件中的主要修改是注入`AppVersion`和`MyEnv`提供者以供整个app使用。
- en: 'Open and replace .`/src/pages/home/home.html` with the following code:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开并替换`./src/pages/home/home.html`，使用以下代码：
- en: '[PRE6]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Open and replace `./src/pages/home/home.ts` with the following code:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开并替换`./src/pages/home/home.ts`，使用以下代码：
- en: '[PRE7]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Open and edit `home.scss` in the same folder:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在同一文件夹中打开并编辑 `home.scss`：
- en: '[PRE8]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Go to your Terminal and run the app. If you want to run the app on your physical
    device, type the following command:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往你的终端并运行应用。如果你想在物理设备上运行应用，请输入以下命令：
- en: '[PRE9]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'For Android, type the following command:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Android，请输入以下命令：
- en: '[PRE10]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: How it works...
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In a nutshell, the `AppVersion` plugin does all the *heavy lifting*. It's not
    possible for an Ionic app to find out the current version of its code using JavaScript.
    You may think that using local storage or cookie is an alternative, but the users
    could also delete that storage manually. In order to have a permanent solution,
    the `AppVersion` plugin should be used because it can read your `config.xml` file
    and get the version for you.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，`AppVersion` 插件负责所有 *繁重的工作*。使用 JavaScript，Ionic 应用无法找出其当前代码的版本。你可能认为使用本地存储或
    cookie 是一种替代方案，但用户也可以手动删除该存储。为了有一个永久的解决方案，应该使用 `AppVersion` 插件，因为它可以读取你的 `config.xml`
    文件并为你获取版本。
- en: 'It''s the best practice to create a separate service for all environment variables.
    That''s why, you should have a service, called `MyEnv`. Also, you should inject
    `MyEnv` as a provider at the *app level* because you want to instantiate it only
    once, instead of doing it every time a new component is created. Take a look at
    the following code:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳实践是为所有环境变量创建一个单独的服务。这就是为什么你应该有一个名为 `MyEnv` 的服务。此外，你应该在 *应用级别* 注入 `MyEnv` 作为提供者，因为你只想实例化它一次，而不是每次创建新组件时都进行实例化。查看以下代码：
- en: '[PRE11]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Since all the `AppVersion` methods are based on `promise`, you should return
    the entire object as a promise. Let''s take a look at the `getAppVersion()` method
    in your `myenv.ts` file:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 由于所有 `AppVersion` 方法都是基于 `promise` 的，你应该将整个对象作为 `promise` 返回。让我们看看你的 `myenv.ts`
    文件中的 `getAppVersion()` 方法：
- en: '[PRE12]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Then, in your page files, such as `home.ts`, you should call the `getAppVersion`
    method, as shown, and use the .`then()` method to get the following result:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，在你的页面文件中，例如 `home.ts`，你应该按照以下示例调用 `getAppVersion` 方法，并使用 `.then()` 方法获取以下结果：
- en: '[PRE13]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'If you open the console to inspect the `promise` object, you will see that
    it has your app version value and the `.then()` method. Take a look at the following
    screenshot:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你打开控制台来检查 `promise` 对象，你会看到它包含你的应用版本值和 `.then()` 方法。查看以下截图：
- en: '![](img/b6e65b4d-c7f9-4c15-8995-a45b6d3a056e.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b6e65b4d-c7f9-4c15-8995-a45b6d3a056e.png)'
- en: For more information about the `AppVersion` plugin, you may want to refer to
    the official AppVersion documentation at [https://github.com/whiteoctober/cordova-plugin-app-version.](https://github.com/whiteoctober/cordova-plugin-app-version)
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 关于 `AppVersion` 插件的更多信息，你可能想参考官方 AppVersion 文档，网址为 [https://github.com/whiteoctober/cordova-plugin-app-version](https://github.com/whiteoctober/cordova-plugin-app-version)。
- en: Building and publishing an app for iOS
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建 iOS 应用并发布
- en: Publishing on App Store could be a frustrating process if you are not well-prepared
    upfront. In this section, we will walk through the steps to properly configure
    everything in Apple Developer Center, iTunes Connect, and your local Xcode project.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有提前做好准备，发布到 App Store 可能会是一个令人沮丧的过程。在本节中，我们将逐步介绍在 Apple 开发者中心、iTunes Connect
    和你的本地 Xcode 项目中正确配置所有内容的步骤。
- en: Getting ready
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: You must register for Apple Developer Program in order to access [https://developer.apple.com/macos/touch-bar/](https://developer.apple.com/macos/touch-bar/)
    and [https://itunesconnect.apple.com](https://itunesconnect.apple.com) because
    those websites will require an approved account.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 为了访问 [https://developer.apple.com/macos/touch-bar/](https://developer.apple.com/macos/touch-bar/)
    和 [https://itunesconnect.apple.com](https://itunesconnect.apple.com)，你必须注册 Apple
    开发者计划，因为那些网站将需要经过批准的账户。
- en: 'In addition, you should have the following:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你还应该有以下内容：
- en: macOS
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: macOS
- en: Xcode
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Xcode
- en: How to do it...
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following are the instructions to configure everything properly:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是为确保一切配置正确的说明：
- en: 'Ensure that you are in the app folder, then build the iOS platform:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你处于应用文件夹中，然后构建 iOS 平台：
- en: '[PRE14]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Go to the `/platforms/ios` folder and open the `.xcodeproj` file in Xcode.
    Take a look at the following screenshot:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 前往 `/platforms/ios` 文件夹，并在 Xcode 中打开 `.xcodeproj` 文件。查看以下截图：
- en: '![](img/5e421a05-b0c0-4eb6-ba0a-d877e48d3830.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5e421a05-b0c0-4eb6-ba0a-d877e48d3830.png)'
- en: 'Navigate to the General tab, as illustrated in the following screenshot, to
    make sure that you have the correct information for everything, especially Bundle
    Identifier and Version. Change and save as needed:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到“通用”选项卡，如以下截图所示，以确保你拥有所有正确的信息，特别是包标识符和版本。如有需要，进行更改并保存：
- en: '![](img/312ff4f8-f385-44bd-b9b7-d58ac1d4110f.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/312ff4f8-f385-44bd-b9b7-d58ac1d4110f.png)'
- en: 'Visit the Apple developer website and click on Certificates, Identifiers &
    Profiles, as illustrated:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问苹果开发者网站，点击“证书、标识符和配置文件”，如图所示：
- en: '![](img/ab434d84-b1d6-487a-be20-adafa0965022.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ab434d84-b1d6-487a-be20-adafa0965022.png)'
- en: 'Select the correct device platform that you are targeting; in this case, it
    will be iOS, tvOS, watchOS:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您要针对的正确设备平台；在这种情况下，将是 iOS、tvOS、watchOS：
- en: '![](img/52fa51d6-eda0-429b-95fd-fdef62392729.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/52fa51d6-eda0-429b-95fd-fdef62392729.png)'
- en: 'For the iOS app, you need the certificate, app ID, test device, and provisioning
    profile. To start with the certificate, navigate to Certificates | All, as follows:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 iOS 应用，您需要证书、应用 ID、测试设备和配置文件。要从证书开始，导航到“证书 | 所有”，如下所示：
- en: '![](img/1ce00b32-36d1-4c7c-b32c-cbedc0052f68.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/1ce00b32-36d1-4c7c-b32c-cbedc0052f68.png)'
- en: 'Click on the plus (+) button, as shown in the following screenshot:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击以下截图所示的加号（+）按钮：
- en: '![](img/dc768013-5510-406b-99e8-f1d4fd4c09ba.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/dc768013-5510-406b-99e8-f1d4fd4c09ba.png)'
- en: You have to go through the steps on the website to fill out the necessary information,
    as depicted in the following screenshot:![](img/0d0c97c9-8ff6-421f-abfe-93506a16736c.png)
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您必须按照网站上的步骤填写必要的信息，如图所示：![图片](img/0d0c97c9-8ff6-421f-abfe-93506a16736c.png)
- en: Once you've completed the form, you can save the CSR file and import it into
    your Mac's Keychain Access.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成表单后，您可以保存 CSR 文件并将其导入到 Mac 的密钥链访问中。
- en: 'Navigate to Identifiers | App IDs, as follows, to create an app ID:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下步骤导航到“标识符 | 应用 ID”以创建应用 ID：
- en: '![](img/725c9b74-ad08-470c-8bc0-cf0a321194d7.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/725c9b74-ad08-470c-8bc0-cf0a321194d7.png)'
- en: 'Click on the plus button at the top-right corner of the screen, as follows:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕右上角的加号按钮，如下所示：
- en: '![](img/b2a1edbb-e554-4415-955d-8cd74a71466a.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b2a1edbb-e554-4415-955d-8cd74a71466a.png)'
- en: 'Fill in the form to register your App ID, as shown in the following screenshot:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写以下截图所示的应用 ID 注册表单：
- en: '![](img/6ec10f64-e711-4e9a-9f5d-b848a0468e4c.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6ec10f64-e711-4e9a-9f5d-b848a0468e4c.png)'
- en: 'The important part here that you need to do correctly is the Bundle ID, as
    shown in the following screenshot because it must match your Bundle Identifier
    in Xcode:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，您需要正确完成的重要部分是包标识符，如图所示，因为它必须与 Xcode 中的包标识符匹配：
- en: '![](img/e36c66cf-f24c-4aa3-8379-344569ba984a.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e36c66cf-f24c-4aa3-8379-344569ba984a.png)'
- en: 'If your app needs Push Notifications or other App Services, you will need to
    check those services on the following page:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您的应用需要推送通知或其他应用服务，您需要在以下页面上检查这些服务：
- en: '![](img/c6883702-df72-4239-92c6-755adfa5ccc9.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c6883702-df72-4239-92c6-755adfa5ccc9.png)'
- en: 'If you need to push the app to a specific device, you must register the device.
    Navigate to Devices | All, as illustrated in the following:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您需要将应用推送到特定设备，您必须注册该设备。导航到“设备 | 所有”，如图所示：
- en: '![](img/b7e85f93-b64d-434b-bc5c-8f1aab15b531.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b7e85f93-b64d-434b-bc5c-8f1aab15b531.png)'
- en: 'Click on the plus button, as shown:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击加号按钮，如图所示：
- en: '![](img/6eabcc5d-a551-456b-b558-02700d644291.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6eabcc5d-a551-456b-b558-02700d644291.png)'
- en: 'Provide the device''s UDID, as follows, and save it in order to register the
    device:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供以下设备的 UDID 并保存，以注册设备：
- en: '![](img/20995374-62af-47cc-a599-5173c92cffdc.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/20995374-62af-47cc-a599-5173c92cffdc.png)'
- en: Finally, you will need a provisioning profile if one doesn't exist yet. Usually,
    Xcode will create one automatically. However, you could create your own by navigating
    to Provisioning Profiles | All, as shown:![](img/15f34ad3-3da0-47e3-a1a1-923951c3ee54.png)
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，如果您还没有配置文件，您将需要一个配置文件。通常，Xcode 会自动创建一个。但是，您可以按照以下步骤创建自己的配置文件：导航到“配置文件 | 所有”，如图所示：![图片](img/15f34ad3-3da0-47e3-a1a1-923951c3ee54.png)
- en: 'Click on the plus button, as follows:'
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击以下截图所示的加号按钮：
- en: '![](img/9450bb6f-4c59-44ae-897a-5f34c917fb01.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9450bb6f-4c59-44ae-897a-5f34c917fb01.png)'
- en: 'Select App Store as your provisioning profile, as illustrated:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“应用商店”作为您的配置文件，如图所示：
- en: '![](img/de0cbe52-dd3f-4e8b-8e1d-4f7290d15ba0.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/de0cbe52-dd3f-4e8b-8e1d-4f7290d15ba0.png)'
- en: 'Select the correct App ID from the drop-down menu and save it to finalize your
    provisioning profile creation, as follows:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉菜单中选择正确的应用 ID 并保存，以完成配置文件创建，如下所示：
- en: '![](img/a6d783cf-a56b-4e84-ab0d-d31c6baf2c71.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a6d783cf-a56b-4e84-ab0d-d31c6baf2c71.png)'
- en: 'Visit iTunes Connect at [https://itunesconnect.apple.com](https://itunesconnect.apple.com)
    and click on the My Apps button, as follows:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问 [https://itunesconnect.apple.com](https://itunesconnect.apple.com) 上的 iTunes
    Connect，并点击“我的应用”按钮，如下所示：
- en: '![](img/0d051d22-631e-48da-90a7-8e06ed37423a.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0d051d22-631e-48da-90a7-8e06ed37423a.png)'
- en: 'Select the plus (+) icon and select New App, as follows:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择加号 (+) 图标，然后选择新建应用，如下所示：
- en: '![](img/be6bcdf7-71a8-43f0-bd04-ebb5d7f493fe.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/be6bcdf7-71a8-43f0-bd04-ebb5d7f493fe.png)'
- en: 'Fill out the form and ensure that you select the right Bundle ID for your app:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写表格，并确保您选择了您应用的正确 Bundle ID：
- en: '![](img/6b21eb89-1720-40fb-b4b9-39f9b04d44cb.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6b21eb89-1720-40fb-b4b9-39f9b04d44cb.png)'
- en: There are several additional steps to provide information on the app, such as
    screenshot, icon, and address. If you just want to test the app, you could provide
    some placeholder information initially and come back to edit it later.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供有关应用的额外步骤，例如截图、图标和地址。如果您只想测试应用，您可以最初提供一些占位符信息，稍后再回来编辑。
- en: That's it to prepare your Developer and iTunes Connect account.
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 准备您的开发者账号和 iTunes Connect 账号就到这里。
- en: Now, open Xcode and select iOS Device as the archive target, otherwise the Archive
    feature will not be turned on. You will need to archive your app before you can
    submit it to the App Store:![](img/797f9e6d-2343-4d38-9104-3147980f43e8.png)
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在，打开 Xcode 并选择 iOS 设备作为存档目标，否则存档功能将不会开启。在您可以将应用提交到 App Store 之前，您需要存档您的应用！![图片](img/797f9e6d-2343-4d38-9104-3147980f43e8.png)
- en: 'Navigate to Product | Archive in the top menu, as illustrated:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如上图所示，在顶部菜单导航到产品 | 存档：
- en: '![](img/30be3878-8617-41c2-870a-f9d32498383d.png)'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图片](img/30be3878-8617-41c2-870a-f9d32498383d.png)'
- en: After the archive process is completed, select Submit to App Store to finish
    the publishing process.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 存档过程完成后，选择提交到 App Store 以完成发布过程。
- en: To publish, select Submit for Beta App Review. You may want to go through other
    tabs, such as Pricing and In-App Purchases, to configure your own requirements.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要发布，请选择提交 Beta 应用审核。您可能还想浏览其他标签，例如定价和内购，以配置您自己的要求。
- en: How it works...
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Obviously, this section does not cover every bit of detail in the publishing
    process. In general, you just need to ensure that your app is tested thoroughly,
    locally, on a physical device (either via USB or *TestFlight*) before submitting
    it to the App Store.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，本节并没有涵盖发布过程中的所有细节。一般来说，您只需确保在提交到 App Store 之前，在物理设备（通过 USB 或 *TestFlight*）上彻底测试您的应用。
- en: 'If for some reason, the Archive feature doesn''t build, you could manually
    go to your local Xcode folder to delete that specific temporary archived app to
    clear cache, as follows:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 如果由于某种原因，存档功能无法构建，您可以手动前往您本地的 Xcode 文件夹，删除该特定临时存档应用以清除缓存，如下所示：
- en: '[PRE15]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: There's more...
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: '*TestFlight* is a separate subject by itself. The benefit of *TestFlight* is
    that you don''t need your app to be approved by Apple in order to install the
    app on a physical device for testing and development. You can find out more information
    on *TestFlight* at [https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/BetaTestingTheApp.html.](https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/BetaTestingTheApp.html)'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*TestFlight* 是一个独立的话题。*TestFlight* 的好处是您不需要苹果批准您的应用就可以在物理设备上进行测试和开发。更多关于 *TestFlight*
    的信息请见 [https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/BetaTestingTheApp.html.](https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/BetaTestingTheApp.html)'
- en: There is one more way to test Ionic Apps, that's with Ionic's DevApp. It allows
    you to test Ionic Application on iOS and Android without even compiling. You have
    installed the Ionic Devapp on your phone, and in your workstation run `ionic serve
    -c` in the Terminal. You can find more details at [https://ionicframework.com/docs/pro/devapp/](https://ionicframework.com/docs/pro/devapp/).
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试 Ionic 应用还有另一种方法，那就是使用 Ionic 的 DevApp。它允许您在无需编译的情况下在 iOS 和 Android 上测试 Ionic
    应用。您已在手机上安装了 Ionic Devapp，并在工作站中在终端运行 `ionic serve -c`。更多详情请见 [https://ionicframework.com/docs/pro/devapp/](https://ionicframework.com/docs/pro/devapp/)。
- en: Building and publishing an app for Android
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建 Android 应用并进行发布
- en: Building and publishing an Android app is a little more straightforward than
    iOS because you just interface with the command line to build the .apk file and
    upload it to Google Play's Developer Console.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 构建 Android 应用并进行发布比 iOS 更直接，因为您只需与命令行接口来构建 .apk 文件并将其上传到 Google Play 开发者控制台。
- en: The Ionic Framework documentation also has a great instruction page for this,
    which is [http://ionicframework.com/docs/guide/publishing.html](http://ionicframework.com/docs/guide/publishing.html).
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: Ionic 框架文档也为此提供了很好的说明页面，请见 [http://ionicframework.com/docs/guide/publishing.html](http://ionicframework.com/docs/guide/publishing.html)。
- en: Getting ready
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: The requirement is to have your Google Developer account ready and then log
    in to [https://play.google.com/apps/publish.](https://play.google.com/apps/publish)
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 要求是你必须准备好你的Google开发者账户，然后登录到[https://play.google.com/apps/publish.](https://play.google.com/apps/publish)
- en: Your local environment should also have the right SDK and `keytool`, `jarsigner`,
    and `zipalign` command line for that specific version.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 你的本地环境也应该有正确的SDK和`keytool`、`jarsigner`和`zipalign`命令行，针对该特定版本。
- en: How to do it...
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following are the instructions:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是指令：
- en: 'Go to your app folder and build for Android using the following command:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入你的应用文件夹，使用以下命令为Android构建：
- en: '[PRE16]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'You will note `android-release-unsigned.apk` in the `/platforms/android/build/outputs/apk`
    folder. Go to that folder in the Terminal:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会在`/platforms/android/build/outputs/apk`文件夹中注意到`android-release-unsigned.apk`。在终端中转到该文件夹：
- en: '![](img/95663704-125c-4bc9-b191-987b72bb79f7.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/95663704-125c-4bc9-b191-987b72bb79f7.png)'
- en: 'If this is the first time you created this app, you must have a `keystore`
    file. This file is used to identify your app for publishing. If you lose it, you
    cannot update your app later on. To create a `keystore` file, type the following
    command line and ensure that it''s the same `keytool` version of the SDK:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果这是你第一次创建此应用，你必须有一个`keystore`文件。此文件用于在发布时识别你的应用。如果你丢失了它，你以后将无法更新你的应用。要创建`keystore`文件，请输入以下命令行，并确保它与SDK的`keytool`版本相同：
- en: '[PRE17]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Once you fill out the information on the command line, make a copy of this file
    somewhere safe because you will need it later.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你在命令行中填写了信息，请将此文件复制到某个安全的地方，因为你稍后还需要它。
- en: 'The next step is to use that file to *sign* your app so that it will create
    a new `.apk` that Google Play allows users to install:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是使用该文件来**签名**你的应用，以便它将创建一个Google Play允许用户安装的新`.apk`文件：
- en: '[PRE18]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'To prepare for the final `.apk` before upload, you must package it using `zipalign`,
    as follows:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在上传最终的`.apk`之前，你必须使用`zipalign`打包它，如下所示：
- en: '[PRE19]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: You need to ensure that `zipalign` is in `PATH` or you have to specify the absolute
    path. The app name could be anything you like or you can use the same name as
    created in this chapter.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要确保`zipalign`在`PATH`中，或者你必须指定绝对路径。应用名称可以是任何你喜欢的，或者你可以使用本章中创建的相同名称。
- en: 'Log in to Google Developer Console and click on CREATE APPLICATION button,
    as follows:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到Google开发者控制台，然后点击创建应用程序按钮，如下所示：
- en: '![](img/18eef3f4-e4eb-4283-a736-2327dec57064.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/18eef3f4-e4eb-4283-a736-2327dec57064.png)'
- en: 'Fill out the Title of the application in the opened popup and then click on
    CREATE button, as shown in the image below:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的弹出窗口中填写应用程序的标题，然后点击下面的创建按钮，如图所示：
- en: '![](img/e58e3f79-3c8a-46dd-a17d-03be24f9ad00.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e58e3f79-3c8a-46dd-a17d-03be24f9ad00.png)'
- en: 'Fill out the store listing and other information as required for your app using
    the left menu:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用左侧菜单填写你的应用所需的商店列表和其他信息：
- en: '![](img/5d1cb4dc-d264-4b55-8e8d-e640f22b27c0.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/5d1cb4dc-d264-4b55-8e8d-e640f22b27c0.png)'
- en: 'Now you are ready to upload your `.apk` file. The first thing you need to do
    is to do a Beta testing:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你已经准备好上传你的`.apk`文件。你需要做的第一件事是进行Beta测试：
- en: '![](img/2d29db23-a7ab-4f22-96c7-5b080d8a3d5c.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2d29db23-a7ab-4f22-96c7-5b080d8a3d5c.png)'
- en: Once you are done with Beta testing, you can follow Developer Console instructions
    to push the app to production.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你完成了Beta测试，你可以按照开发者控制台的说明将应用推送到生产环境。
- en: If you run into any problem while publishing the app, it's helpful to look at
    the "Why can't I publish?" link in the dashboard's top-right corner. Google will
    guide you on specific steps that must be completed or fixed.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在发布应用时遇到任何问题，查看仪表板右上角的“为什么我无法发布？”链接可能会有所帮助。Google将指导你完成必须完成或修复的特定步骤。
- en: How it works...
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: This section does not cover other Android marketplaces, such as Amazon App Store,
    because each of them has different processes. However, the common idea is that
    you need to completely build the unsigned version of the `.apk`, sign it using
    an existing or new `keystore` file, and, finally, `zipalign` to prepare it for
    upload.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 本节不涵盖其他Android市场，如Amazon应用商店，因为每个市场都有不同的流程。然而，共同的想法是，你需要完全构建`.apk`的未签名版本，使用现有的或新的`keystore`文件进行签名，最后使用`zipalign`准备上传。
- en: Read more about uploading the application for publishing at [https://support.google.com/googleplay/android-developer/answer/113469?hl=en](https://support.google.com/googleplay/android-developer/answer/113469?hl=en)
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在[https://support.google.com/googleplay/android-developer/answer/113469?hl=en](https://support.google.com/googleplay/android-developer/answer/113469?hl=en)了解更多关于上传应用程序以发布的信息
