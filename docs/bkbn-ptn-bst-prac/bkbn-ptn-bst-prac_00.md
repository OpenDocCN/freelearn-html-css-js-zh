# 前言

尽管 Backbone.js 为 JavaScript 应用程序提供了结构，但开发者需要自己处理大部分的设计模式和最佳实践。多年来，我和我的 JavaScript 开发团队共同开发了多个 Backbone.js 应用程序，从简单到极其复杂。我们遇到了与布局管理、项目架构、模块化开发等相关的问题。在我开始写这本书之前，我花了很多时间试图找出与 Backbone.js 应用程序开发相关的所有常见问题的解决方案。在这本书中，我详细记录了我的所有发现。

无论你是中级还是高级 Backbone.js 开发者，本书都将指导你通过最佳实践和模式来处理每个 Backbone 组件的不同问题。无论是使用自己的解决方案还是现有的 Backbone 插件，你都将清楚地了解解决任何问题的最佳方式。

与在所有章节中开发单个应用程序不同，本书在每个主题上提供了一个简单而完整的示例。这是因为在一个应用程序中实现本书中给出的所有技巧和模式会相当困难。此外，我们更倾向于提供即时和紧凑的解决方案来解决问题，而不是在一个大型应用程序中包含所有问题和解决方案。本书在短时间内试图涵盖你可能需要用于 Backbone.js 应用程序开发的全部重要点。

# 本书涵盖的内容

第一章，*使用插件开发减少样板代码*，从为什么重用代码很重要以及如何通过创建自定义 Backbone.js 小部件和混入来实现这一点的基本原理开始。

第二章，*与视图一起工作*，讨论了与视图渲染和布局管理相关的不同点。从视图的局部更新开始，讨论嵌套视图或子视图在 JavaScript 模板管理不同过程中的功能以及最佳实践，这一章涵盖了开发者在与视图一起工作时可能遇到的大部分问题。我们通过介绍 Marionette 自定义视图和用于复杂应用程序布局管理的 Layout Manager 插件来总结。

第三章，*与模型一起工作*，讨论了与 Backbone 模型一起工作时不同的模式，包括数据验证、将模型序列化以获取数据以及将数据保存到服务器。我们还使用 Backbone 的关系插件分析了用于一对一和多对多关系的关系数据模型。

第四章, *使用集合*，涵盖了开发者在使用 Backbone 集合时遇到的一些常见问题。我们解释了如何应用基本和多重排序，如何对一个集合应用过滤，以及当从服务器传递混合数据集时如何管理集合。

第五章, *路由最佳实践和子路由*，涵盖了你在使用路由器时应遵循的一些最佳实践。我们还讨论了在复杂和大型应用中使用多个路由器或子路由器的优势。

第六章, *使用事件、同步和存储*，首先描述了自定义事件对增强应用程序模块化和可重用性的重要性。我们还讨论了使用应用程序级事件管理器作为集中式 PubSub 系统，以及使用`Backbone.sync()`方法创建不同的数据持久化策略。

第七章, *组织 Backbone 应用 – 结构、优化和部署*，是开发者发现非常有用的最重要章节之一，特别是当他们开发复杂的 Backbone 应用时。它讨论了应用程序目录结构，使用 RequireJS 组织和管理工作文件，以及每个 JavaScript 开发者应遵循的不同架构模式以开发大规模应用架构。

第八章, *单元测试、存根、间谍和模拟你的应用*，讨论了单元测试 JavaScript 应用的好处，并介绍了 QUnit 和 SinonJS 测试框架。

附录 A, *书籍、教程和参考资料*，列出了一些有用的 Backbone.js 资源，你可能觉得它们很有帮助。

附录 B, *服务器端预编译模板*，通过示例描述了在服务器端预编译 JavaScript 模板的好处。

附录 C, *使用 AMD 和 Require.js 组织模板*，讨论了使用 RequireJS、text!和 tpl!插件存储和组织 JavaScript 模板的过程。

# 你需要这本书的内容

本书中的大部分代码都可以在简单的文本编辑器（Notepad++或 Sublime Text）中打开。要运行代码，你可以使用任何网络浏览器。对于某些代码，你可能需要设置本地服务器（Apache 或 IIS）。对于 Node.js 相关的功能，你需要设置一个 Node.js 服务器。

# 这本书面向的对象

本书是为任何具有 Backbone.js 基础知识且正在寻找解决常见 Backbone.js 问题方案的开发者而写的，他们希望通过移除样板代码并开发自定义插件和扩展来加强代码的可重用性，并希望使用最有效的模式来开发大规模 Web 应用程序架构。

本书不是 Backbone.js 或 JavaScript 设计模式的通用介绍。有许多书籍、教程和屏幕录像带提供了详细的通用介绍。虽然本书将在每一章讨论 Backbone.js 组件的基础，但主要优先事项将是为您提供开发健壮、高质量和灵活的代码库的概念。

# 术语约定

在本书中，您将找到许多不同风格的文本，以区分不同类型的信息。以下是一些这些风格的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名将如下所示：“我们可以通过使用`include`指令包含其他上下文。”

代码块将以如下方式设置：

```js
var MainView = Backbone.View.extend({
  el : '#main',
  render : function(){
    this.$el.html(new BaseView().render().el);
  }
}); 
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
var BaseView = Backbone.View.extend({
 template : '<h1><%= name %></h1>',
  render : function(){
    var html = _.template(this.template, {
      name : 'Swarnendu De'
    });
    this.$el.html(html);
    return this;    
  }
}); 
```

**新术语**和**重要词汇**将以粗体显示。你在屏幕上看到的单词，例如在菜单或对话框中，将以如下方式显示：“点击**下一个**按钮将您带到下一屏幕”。

### 注意

警告或重要注意事项将以如下框显示。

### 小贴士

小技巧和窍门将以如下方式显示。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正从中受益的标题非常重要。

要发送给我们一般反馈，只需发送电子邮件到`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

既然您已经是 Packt 图书的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的账户下载您购买的所有 Packt 图书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 错误清单

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的勘误部分下的现有勘误列表中。任何现有勘误都可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)选择您的标题来查看。

## 海盗行为

在互联网上对版权材料的盗版是一个横跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并提供疑似盗版材料的链接。

我们感谢您在保护我们作者和为我们提供有价值内容的能力方面的帮助。

## 问题

如果您在本书的任何方面遇到问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决。
