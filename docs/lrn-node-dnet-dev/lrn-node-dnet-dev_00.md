# 前言

本书的目的在于帮助.NET 或 Java 开发者过渡到 Node.js。您可能有一些 Web 开发经验，也许您过去写过一些基于浏览器的 JavaScript。可能并不明显为什么有人想要将 JavaScript 从浏览器中移出并用于服务器端开发。然而，这正是 Node.js 所做的事情。更重要的是，Node.js 已经存在了足够长的时间，已经成熟为一个平台，并且其令人印象深刻的增长势头已经远远超过了任何可以归因于新技术初期炒作的时期。

本书的首要目标是解释为什么 Node.js 是一项值得深入了解的引人注目的技术。前几章带着这个目标介绍 Node.js，快速帮助您上手 Node.js，并提供对 JavaScript 语言的重要（再）介绍，以帮助您走上正确的道路。

本书的主要部分将逐步引导您构建 Node.js Web 应用程序的示例。在这个过程中，我们将展示 Node.js 真实开发项目中所需的所有重要工具和技术。目标是充分利用您现有的开发专业知识，让您能够快速达到与 Node.js 的最佳实践和专业水平。

书的最后一章展示了如何使用 Node.js 进行 Web 应用程序之外的其他用途，以及如何继续学习 Node.js 并探索其生态系统。我们还将看到您如何可以将 Node.js 与.NET 一起使用，并从在两种技术中应用您的编程技能中受益。

# 本书涵盖内容

第一章, *为什么选择 Node.js?*，介绍了 Node.js 作为一个编程平台。它涵盖了 Node.js 的执行模型，特别是它与.NET 和 Java 的不同之处，以及这些差异成为优势的使用场景。这一章还讨论了 JavaScript 作为开发语言的适用性。

第二章, *Node.js 入门*，直接深入创建 Node.js 应用程序。在这一章中，您将安装 Node.js，选择一个代码编辑器，并设置一个最小的 Web 应用程序项目。您还将学习一些用于与 Node.js 一起工作的重要命令行工具。

第三章, *JavaScript 入门*，介绍了在 JavaScript 编程时需要了解的最重要的事情。它描述了 JavaScript 类型系统和其特有的函数式面向对象编程风格，包括基于原型的继承。这一章还涵盖了一些关键陷阱和 JavaScript 语言的怪癖。

第四章, *介绍 Node.js 模块*，解释了如何使用模块来结构化 JavaScript 应用。它介绍了 Node.js 模块系统，并展示了如何使用它来组织你的应用代码。

第五章, *创建动态网站*，在上一章的示例基础上扩展，构建一个功能性的 Web 应用。你将为你的应用添加 JSON API 和动态视图，并使用 Ajax 在客户端和服务器之间进行通信。

第六章, *测试 Node.js 应用*，展示了如何在 JavaScript 和 Node.js 中编写自动化测试。它介绍了一系列用于编写和运行 JavaScript 测试的工具和库，并指导你编写各种单元测试和集成测试。

第七章, *设置自动化构建*，涵盖了 Node.js 中的构建自动化和持续集成。你将为你的应用设置一个 CI 服务器和任务运行器，添加自动任务以运行测试、执行静态分析和评估代码覆盖率。

第八章, *掌握异步编程*，介绍了 JavaScript 中不同的异步编程模式。你将将这些模式应用到你的应用中，并充分利用 JavaScript 语言特性和库来简化异步代码。

第九章, *持久化数据*，解释了可以与 Node.js 一起使用的持久化数据存储。它介绍了 MongoDB 和 Redis，解释了它们不同的数据模型及其用例。你将集成这两个数据存储与你的 Node.js 应用。

第十章, *创建实时 Web 应用*，展示了如何在客户端和服务器之间实现实时双向通信。你将使用 Socket.IO 库为你的应用添加实时功能。你还将看到如何为此功能编写测试，以及如何使用 Redis 作为后端来编写可扩展的实时应用。

第十一章, *部署 Node.js 应用*，演示了如何将 Node.js 应用部署到 Web 上。你将把你的应用部署到一个免费的云托管提供商。你将看到如何配置数据存储以及如何使用远程服务器日志进行调试。

第十二章，*Node.js 中的身份验证*，涵盖了 Node.js Web 应用程序的身份验证。您将使用第三方提供者实现身份验证，将其与您的应用程序集成，并展示登录和未登录用户的不同内容。

第十三章，*创建 JavaScript 包*，解释了如何创建供他人使用的独立 JavaScript 包。您将了解如何编写可在客户端和服务器上运行的通用 JavaScript 库，以及如何使用 Node.js 编写独立的命令行应用程序。

第十四章，*Node.js 及其之后的内容*，将本书的内容置于更广泛的背景下。它解释了 Node.js 和 JavaScript 是如何持续演进的，以便您可以准备并利用即将到来的变化。它涵盖了 Node.js 和 Web 的一些替代编程语言，以及这些语言如何与 JavaScript 相关。它讨论了 Node.js 的一些原则如何应用于.NET 编程，并展示了这些原则在.NET Core（.NET 的新版本）中的特别体现。它还展示了如何结合使用 Node.js 和.NET 以获得两者的最佳效果。

# 需要为本书准备的资源

本书使用的所有工具和服务均可在网上免费获得。大多数示例都需要在某个时刻保持活跃的网络连接。要开始学习，您需要的只是控制台、网络浏览器以及允许在您的机器上安装新软件的权限。为了支持来自.NET 背景的开发者，本书中的一些控制台列表或示例步骤使用了 Windows 约定（例如，路径中的反斜杠）。尽管如此，这些示例并不特定于 Windows。您可以在 Windows、Mac OSX 或 Linux 上完成本书的学习。

# 本书面向的对象

本书面向对学习 Node.js 感兴趣的.NET 或 Java 开发者。不需要具备 Node.js 的先验经验。您可能之前编写过一些客户端 JavaScript，但这不是必需的。本书的主要示例是一个 Node.js Web 应用程序。在.NET 或 Java 中有 Web 开发经验将有所帮助，但不需要对任何特定的应用程序库或框架有经验。

# 术语

在本书中，您将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示："ES2015 引入了`let`关键字来声明变量"。

代码块设置如下：

```js
<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>{{ title }}</h1>
    <p>Welcome to {{ title }}</p>
  </body>
</html>
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
/* GET home page. */
router.get('/', function(req, res, next) {
 res.render('index', { title: 'Express', name: 'World' });
});
```

任何命令行输入或输出都如下所示：

```js
> npm install –g nodemon

```

**新术语**和**重要词汇**将以粗体显示。屏幕上显示的单词，例如在菜单或对话框中，将以这种方式显示：“点击**下一步**按钮将您带到下一屏幕。”

### 注意

警告或重要提示会以这样的框中出现。

### 小贴士

小贴士和技巧会像这样显示。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们您对这本书的看法——您喜欢或不喜欢什么。读者反馈对我们很重要，因为它帮助我们开发出您真正能从中获得最大收益的标题。

要向我们发送一般反馈，请简单地发送电子邮件至`<feedback@packtpub.com>`，并在邮件主题中提及书籍的标题。

如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南，链接为[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，您已经是 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助您从购买中获得最大收益。

## 下载示例代码

您可以从[`github.com/NodeJsForDevelopers`](https://github.com/NodeJsForDevelopers)和您的[`www.packtpub.com`](http://www.packtpub.com)账户下载此书的示例代码文件。如果您在其他地方购买了此书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的**支持**标签上。

1.  点击**代码下载与错误清单**。

1.  在**搜索**框中输入书籍的名称。

1.  选择您想要下载代码文件的书籍。

1.  从下拉菜单中选择您购买此书的来源。

1.  点击**代码下载**。

您也可以通过点击 Packt Publishing 网站上书籍网页上的**代码文件**按钮来下载代码文件。您可以通过在**搜索**框中输入书籍的名称来访问此页面。请注意，您需要登录您的 Packt 账户。

文件下载完成后，请确保您使用最新版本的软件解压缩或提取文件夹。

+   Windows 上的 WinRAR / 7-Zip

+   Mac 上的 Zipeg / iZip / UnRarX

+   Linux 上的 7-Zip / PeaZip

## 下载本书的颜色图像

我们还为您提供了一个包含本书中使用的截图/图表的颜色图像的 PDF 文件。这些颜色图像将帮助您更好地理解输出的变化。您可以从[`www.packtpub.com/sites/default/files/downloads/LearningNodejsForNETDevelopers_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/LearningNodejsForNETDevelopers_ColorImages.pdf)下载此文件。

## 错误清单

尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以避免其他读者感到沮丧，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。

要查看之前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在**勘误**部分下。

## 盗版

在互联网上，版权材料盗版是一个跨所有媒体持续存在的问题。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现我们作品的任何非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们作者和我们为您提供有价值内容的能力方面的帮助。

## 询问

如果您对本书的任何方面有问题，您可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决问题。
