# 前言

在自学 d3.js 时，常常有一种感觉：*步骤 1：画两个圆圈*，*步骤 2：画剩下的猫头鹰*。这本书试图弥合这个差距。

它使用完整的示例，从页面上的基本形状到完整的示例，循序渐进。这里没有魔法，没有步骤被遗漏未解释。你将理解制作可视化所需的 d3.js 的每一个细节。

我们将涉及从操作数据使其更容易处理到使用高级功能将绘图与计算坐标分离的各个方面。

# 这本书涵盖了什么内容

第一章, *d3.js 入门*，提供了一个简单的示例来展示 d3.js 的基础知识，并帮助你设置一个常用的环境，该环境在本书的其余部分中使用。

第二章, *DOM、SVG 和 CSS 入门*，详细解释了如何使用 d3.js 来操作页面上的内容，特别关注 SVG 和创建图像的核心工具。

第三章, *使数据有用*，展示了如何以功能方式操作数据，从外部源加载数据，并使用 d3.js 的内置工具来避免繁琐的编码。

第四章, *让事物动起来*，讨论了使用 d3.js 进行动画化可视化和允许用户与你的图像交互。

第五章, *布局 – d3 的黑色魔法*，解释了 d3.js 布局的工作原理，并展示了如何使用相同的 dataset 获取截然不同的图像。那些花哨的可视化将不再看起来像魔法。

第六章, *设计良好的可视化*，审视了来自网络的一些优秀可视化示例，并讨论了是什么让它们变得出色。

# 你需要这本书什么

你不需要太多东西来跟随示例。一个针对 Web 开发的机器将拥有所有东西。

我们在示例中假设了 Chrome 浏览器，但一切应该在 Safari、Firefox 和 Internet Explorer 版本 10 及以上中工作。特定的浏览器只影响你的调试工具的工作方式，但它们在所有浏览器中都非常相似。

我们还使用 Python 运行一个小型服务器。如果你使用 Mac 或 Linux，Python 已经安装好了；否则，你需要获取一个版本。我们用 Python 做的唯一一件事就是运行一个命令。

最后，你需要一个文本编辑器。我个人喜欢 Emacs，但 Sublime 和 Notepad++也是流行的选择。是的，你也可以使用 Vim。

# 这本书适合谁

这本书适合所有尝试自学 d3.js 的人，看过一些示例后想：“这到底是什么魔法？”。

本书假设你之前已经编写了一些 JavaScript，对一般 Web 开发相对熟悉，对编程基础有牢固的掌握，并且之前已经查看过 d3.js 示例。到本书结束时，你将能够理解甚至最复杂的可视化代码。

# 习惯用法

在本书中，你会发现许多不同类型信息的文本风格，以区分不同类型的信息。以下是一些这些风格的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称按照以下方式显示：“在最后，我们将包括一个`code.js`文件，我们将把大部分代码放在里面”。

代码块设置如下：

```js
data = d3.keys(data).map(function (key) {
  return {bucket: Number(key),
    N: data[key]};
  });
```

任何命令行输入或输出都按照以下方式编写：

```js
> topojson -o water.json ne_50m_rivers_lake_centerlines.shp ne_50m_ocean.shp
> topojson -o land.json ne_50m_land.shp
> topojson -o cultural.json ne_50m_admin_0_boundary_lines.shp ne_10m_urban_areas.shp
```

**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的，例如在菜单或对话框中的文字，在文本中显示如下：“你可以在**下载**标签中找到它们”。

### 注意

警告或重要注意事项以如下方框显示。

### 小贴士

小技巧和技巧看起来是这样的。

# 读者反馈

我们欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢什么或可能不喜欢什么。读者反馈对我们开发你真正能从中获得最大收益的标题非常重要。

要向我们发送一般反馈，只需发送一封电子邮件到`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果你在一个领域有专业知识，并且你对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在你已经是 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助你从购买中获得最大收益。

## 下载示例代码

你可以从你购买的所有 Packt 书籍的账户中下载示例代码文件。[`www.packtpub.com`](http://www.packtpub.com)。如果你在其他地方购买了这本书，你可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便直接将文件通过电子邮件发送给你。

## 下载本书的颜色图像

我们还为你提供了一个包含本书中使用的截图颜色图像的 PDF 文件。你可以从[`www.packtpub.com/sites/default/files/downloads/0007OS_Images.pdf`](http://www.packtpub.com/sites/default/files/downloads/0007OS_Images.pdf)下载此文件。

## 错误清单

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以避免其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问 [`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的勘误部分下的现有勘误列表中。您可以通过选择您的标题从 [`www.packtpub.com/support`](http://www.packtpub.com/support) 查看任何现有勘误。

## 盗版

在互联网上对版权材料的盗版是所有媒体中持续存在的问题。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现任何我们作品的非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过 `<copyright@packtpub.com>` 联系我们，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们作者和提供有价值内容方面的帮助。

## 问题

如果您在本书的任何方面遇到问题，可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决。
