# 前言

在像 Node.js 这样的平台上实现高性能意味着要了解如何充分利用硬件的各个方面，并帮助内存管理发挥最佳作用，并正确决定如何设计复杂的应用程序。如果您的应用程序开始消耗大量内存，请不要惊慌。相反，及时发现并解决内存泄漏。更好的做法是在问题出现之前进行监控和停止。

# 本书涵盖的内容

第一章，“介绍和构成”，介绍了主题，强调了性能分析和基准测试的重要性。它涉及将应用程序分成几个较小的组件，降低每个组件的复杂性，使其对参与应用程序开发的开发人员来说更易管理。在这里，您将了解到开发方法的重要性，将复杂性分解为更小且可重用的模块，这些模块可以更容易地进行分析，并在应用程序生命周期中与其他新的和更好的模块进行交换。

第二章，“开发模式”，讲述了有助于避免性能损失或帮助发现性能问题的良好编程模式。您将了解到精心选择简单技术和模式的重要性，并避免未来的问题。有了这个理念，您将更好地了解语言的工作原理，了解事件循环的重要性，异步编程的最佳实践以及语言的一些一流公民——流和缓冲区。

第三章，“垃圾收集”，涵盖了垃圾收集，其重要性以及行为。在这里，您将了解到 V8 内存管理，死内存和内存泄漏。您还将学习如何对应用程序进行分析，并发现由于开发人员未正确取消引用对象而导致的内存泄漏。

第四章，“CPU 性能分析”，讲述了对处理器进行性能分析，以及了解应用程序何时以及为何占用主机资源。在本章中，您将了解语言的限制，以及如何开发可以分成多个组件在不同主机上运行的应用程序，从而实现更好的性能和可伸缩性。

第五章，“数据和缓存”，解释了外部存储的应用程序数据以及它如何影响应用程序的性能。本章涉及应用程序中本地存储的数据，磁盘上的数据，本地服务，本地网络服务甚至客户端主机。您将了解到不同类型的数据存储方法会有不同的惩罚，选择最佳方法时必须考虑这些因素。您将了解到数据可以存储在本地或远程，并且有时可以对数据进行缓存，具体取决于数据的重要性。

第六章，“测试，基准测试和分析”，讲述了测试和基准测试应用程序的内容。它还涉及强制执行代码覆盖，以避免未知的应用程序测试区域。然后我们涵盖了基准测试和基准测试分析。您将了解到良好的测试如何能够准确定位基准测试和分析应用程序特定部分，以实现性能改进。

第七章，“瓶颈”，涵盖了应用程序外部的限制。本章讲述了当您意识到性能限制不是由于应用程序编程而是由于外部因素，例如主机硬件，网络或客户端时的情况。您将意识到外部组件对应用程序的限制，无论是本地还是远程。此外，本章解释了有时限制在客户端，并且无法做任何事情来改善当前的性能。

# 您需要为本书准备什么

唯一需要的软件是 Node.js。一些模块可能需要编译，因此 Linux 或 OS X 操作系统更容易测试示例。不需要特定的硬件。

# 这本书适合谁

这本书适合那些具有基本 Node.js 背景并且需要更深入了解这个平台的人。也许，你对这种语言很熟悉，也许你知道它有一个垃圾收集器，但你从来没有真正理解它是如何工作的，以及它如何根据你使用语言的方式而无法工作。需要基本的语言理解和扎实的经验。

# 约定

在这本书中，您会发现一些文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下：“我们可以通过使用`include`指令包含其他上下文。”

代码块设置如下：

```js
    async.each(users, function (user, next) {
        // do something on each user object
        return next();
    }, function (err) {
        // done!
    });
```

任何命令行输入或输出都以以下形式书写：

```js
$ node --debug leaky.js
Debugger listening on port 5858
mem. nodes: 37293
mem. nodes: 37645
mem. nodes: 37951
mem. nodes: 37991
mem. nodes: 38004

```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以这种形式出现在文本中：“现在，不要选择**拍摄快照**，只需点击**加载**按钮，然后从磁盘中选择快照。”

### 注意

警告或重要说明会以这样的方式出现在框中。

### 提示

提示和技巧会以这种形式出现。
