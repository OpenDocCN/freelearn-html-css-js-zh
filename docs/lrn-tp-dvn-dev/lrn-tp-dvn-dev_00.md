# 前言

类型驱动开发是一种使用静态类型系统来实现期望属性（如安全性和效率）的编程方法。本书将涵盖使用 ReasonML 语言进行类型驱动开发，并解释如何使用其类型系统来检查代码的逻辑一致性。我们使用类型在代码中直接表达关系和其他假设，这些假设在代码运行之前由 ReasonML 编译器强制执行。

# 本书面向对象

如果你曾经遇到过这个问题：“未定义不是一个函数”，那么这本书可能适合你。如果你在寻找一种编写更少防御性代码、更少的琐碎测试，并且在你尝试重构时不用担心破坏代码的方法，那么你可能对类型驱动开发的概念感兴趣。

如果你是一名程序员（无论是什么类型的程序员），并且对编写安全、高效的代码感兴趣，这本书就是为你准备的。当然，有许多技术和流程可以实现这一点，但类型驱动开发是最主流和易于接触的方法之一。

话虽如此，这本书使用了一种相对不熟悉的语言来展示类型驱动开发。我尽量写得尽可能简单明了；但为了跟上，你仍然需要学习强大类型系统的规则和逻辑。你将达到一个你的思维与编译器协同工作的点，但这需要时间和耐心。回报将是编译器成为你在编写更安全、更正确代码时的朋友。

如果你愿意踏上这段旅程并学习类型系统的规则，那么这本书就是为你准备的。

# 本书涵盖内容

第一章，*开始类型驱动开发*，介绍了类型驱动开发及其主要优势。它让你开始使用 ReasonML 语言及其工具，设置了一个我们将在这本书中使用的教程项目，并展示了如何获取进一步的帮助和资源。

第二章，*使用类型和值进行编程*，建立了一个快速开发的编辑-编译工作流程，并介绍了一些基础概念，例如类型和值。它还涵盖了静态类型编译器的工作原理以及它与动态类型的不同之处。

第三章，*打包类型和值*，展示了如何编写模块化代码，并利用 Reason 的一等模块支持来实现抽象、信息隐藏和 API 文档。

第四章，*在类型中将值分组*，涵盖了可能同时包含多种不同类型值的类型，构建这些乘积类型的各种方法，以及如何最好地使用它们。

第五章，*在类型中放置替代值*，涵盖了可能只包含一个值（在许多不同类型中）的类型。我们介绍了这些求和类型与积类型的不同之处，以及何时以及如何使用它们。

第六章，*创建可以插入任何其他类型的类型*，涵盖了泛型、类型参数，如何使求和和积类型泛型化，以及与泛型一起工作的限制。

第七章，*创建表示操作的类型*，涵盖了函数及其在类型驱动开发中的理想属性，如何创建函数以及它们的工作方式，以及如何使用它们实现依赖注入和控制反转等技术。

第八章，*使用多种不同类型重用代码*，涵盖了参数多态性，这是一种在类型驱动开发中编写可扩展和重用代码的强大技术，而无需旧代码和新代码了解彼此的实现细节。

第九章，*通过新行为扩展类型*，涵盖了可以用来提高代码重用性和扩展实现部分的技术*。

第十章，*将所有内容整合在一起*，解释了在尝试以类型驱动的方式解决问题时，如何将许多不同的技术结合起来探索实现。

# 为了充分利用这本书

您应该至少有使用一种编程语言的经验。它不必是 JavaScript 或 ReasonML，尽管我们在本书中将这些语言作为动态和静态类型语言的示例。

您应该有一台装有 ReasonML 和相关软件的 macOS、Linux 或 Windows 计算机。

您应该在每一章中输入并编译（在某些情况下，运行）显示的示例。这些示例已被设计来展示涵盖的思想，并且故意尝试一些章节中显示的负面示例将非常有教育意义。

# 下载示例代码文件

您可以从[www.packt.com](http://www.packt.com)的账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[www.packt.com/support](http://www.packt.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)登录或注册。

1.  选择 SUPPORT 标签。

1.  点击代码下载与勘误表。

1.  在搜索框中输入书籍名称，并遵循屏幕上的说明。

文件下载完成后，请确保使用最新版本解压缩或提取文件夹：

+   Windows 版本的 WinRAR/7-Zip

+   Mac 版本的 Zipeg/iZip/UnRarX

+   Linux 版本的 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Learn-Type-Driven-Development`](https://github.com/PacktPublishing/Learn-Type-Driven-Development)。我们还有其他来自我们丰富图书和视频目录的代码包，可在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**找到。去看看吧！

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“将下载的`WebStorm-10*.dmg`磁盘映像文件作为系统中的另一个磁盘挂载”。

代码块设置如下：

```js
let *sumOfSquares*(*x*: int, *y*: int) = { /* (1) */
 let *xSq* = *x* * *x*;
 let *ySq* = *y* * *y*;
 *xSq* + *ySq*
};
```

代码如下突出显示：

+   类型被**加粗**。

+   值是*斜体的*。

+   语言保留词（关键字）被下划线标注。

还请注意，编号注释被添加到需要进一步解释的代码中的某些点，例如：

1.  这条注释解释了带有注释`/* (1) */`的代码。

任何命令行输入或输出都按以下方式编写：

```js
$ mkdir css
$ cd css
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词在文本中如下所示。以下是一个示例：“从管理面板中选择系统信息”。 

警告或重要提示看起来像这样。

技巧和窍门看起来像这样。

# 联系我们

我们读者的反馈始终受到欢迎。

**一般反馈**：请通过`customercare@packtpub.com`发送电子邮件，并在邮件主题中提及书籍标题。如果您对本书的任何方面有疑问，请通过`customercare@packtpub.com`发送电子邮件给我们。

**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告这一点。请访问[www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上以任何形式遇到我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packt.com`与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦您阅读并使用了这本书，为什么不在您购买它的网站上留下评论呢？潜在读者可以查看并使用您的客观意见来做出购买决定，Packt 公司可以了解您对我们产品的看法，我们的作者可以查看他们对书籍的反馈。谢谢！

如需了解 Packt 的更多信息，请访问 [packt.com](https://www.packt.com/).
