# 第一章. 自动化生命周期和自动化目标

测试自动化工具创建一系列脚本，模拟要在**被测应用**（**AUT**）上执行的用户操作，并反复播放，以最小或没有人为干预。**测试自动化**是一个完整的过程，它通过不同的阶段来自动化测试用例。AUT 可以属于任何技术或领域。

测试自动化应尽早开始于项目的生命周期中，其成功取决于以下因素：

+   自动化生命周期知识

+   测试自动化的流程

+   选择正确的工具

+   测试自动化规划

+   适当的自动化和测试自动化工具的技术知识

成功测试自动化的关键驱动和指导力量是自动化目标、最佳实践、选择标准以及工具选择和流程的属性。

在这些领域有良好的知识有助于有效地实施测试自动化。

# 测试自动化生命周期

测试自动化生命周期是测试自动化通过一系列不同阶段进展的过程。本章的重点是学习在生命周期的每个阶段执行的关键活动和任务。

## 可行性研究

可行性研究是对潜在工具的评估和分析，可以为项目（s）的测试自动化需求提供所需的解决方案。目的是客观和理性地揭示工具（s）的优缺点。通常，它先于测试自动化实施。

手动和自动化工作所需进行的可行性研究应基于以下方面：

+   投资回报率（ROI）

+   未来改进

在测试自动化规划中，应考虑测试用例、自动化工具、自动化环境、自动化测试的开发和维护、技能集、组织能力、设计以及自动化方法。

定义 ROI 最简单的方式是 *ROI = 收益/成本*。

在计算了投资回报率（ROI）之后，可以做出是否继续的决定。应用/服务未来的变化可能既带来许多威胁，也带来测试自动化的机会。领导和经理需要有清晰的视野来评估未来改进的 ROI。

测试经理或领导应专注于最大化测试自动化的 ROI。他/她应专注于降低维护成本和实现测试套件的快速可扩展性。计算 ROI 是一项重要活动，它使我们能够预见许多权衡，并指导测试自动化的实施。由于计算 ROI 超出了本书的范围，所以我们只能做到这一步。

## 自动化测试的工具引入

此阶段旨在成功引入工具并建立所需的基本基础设施，或识别测试引入的需求。

测试引入的关键步骤如下列出：

1.  确定技术/非技术需求：

    +   技术需求例如对技术、工具和脚本语言的支撑

    +   非技术需求例如测试自动化的目标

1.  根据所选属性及其相应权重评估工具。当对工具（们）了解有限时，工具评估是技术挑战性最大的任务之一。

    +   如用户友好性、许可成本和培训成本等属性定义了工具功能

    +   在工具选择过程中，赋予最相关属性更高的权重（高数值）

    通过计算权重和价值的乘积之和来计算总体分数，即 *总分 = ∑ 属性权重 * 属性值*。值的范围可能不同，例如从零到五。

    +   最终选择基于工具（们）计算出的最终分数

1.  验证运行是在创建样本脚本以验证所选工具是否在所选测试用例上按预期工作。如果验证运行成功，您可以购买许可证或获取工具。

## 定义测试自动化策略

测试自动化策略是为实现测试自动化总体目标而设计的行动计划。它提供广泛的指导，以便利益相关者了解测试自动化的设计和实施方法。少数组织将测试策略和测试计划合并为单一文档。

测试策略定义以下内容：

+   范围

+   框架和设计方法

+   脚本创建方法

+   需要的测试量

+   风险和缓解计划

+   可交付成果

## 创建自动化测试计划

规划是思考并展望测试自动化所需活动和任务的过程。测试计划定义以下内容：

+   测试架构

+   工具安装计划

+   测试时间表

+   角色和职责

+   资源需求（硬件、软件和熟练资源）

+   培训需求

+   审查脚本和设计文档的计划

+   局限性和假设

测试计划文档告诉我们测试自动化要做什么，何时做。此文档由所有利益相关者使用，并在关键利益相关者之间作为合同协议。

## 脚本设计和开发

这是关键阶段，实际工作在此阶段实施。此阶段需要设计框架的技术技能，以及与 SMEs（领域专家）、BAs（业务分析师）、手动测试人员和开发人员互动的协调技能，以完成测试自动化的各种任务。负责人必须确保已进行审查并遵循编码标准；然后创建测试库结构，并将所有资源保存在适当的位置。我们将在以后创建理解、使用和增强测试自动化的文档。

设计和开发阶段的关键步骤如下：

+   分析和脚本规划

+   脚本创建（脚本可以通过录制或手动创建）

+   创建通用和框架特定的库

+   脚本增强（添加异常处理程序、检查点等）

+   将库和函数与脚本关联或集成

+   审查（确保遵循计划或策略文档中已定义的一致性、编码标准和版本控制）

+   预演和分析结果

+   调试脚本并修复缺陷

## 部署、发布和维护

在前一阶段我们已经进行了预演；现在，我们需要将脚本部署到具有良好结构和数据的适当位置。实际的执行可能不是由开发测试脚本的那些人进行的，因为它可能由业务用户、SMEs 或其他自动化工程师执行；因此，在发布测试脚本之前，应确保所有必要的文档和自动化资源都已到位并经负责人或团队成员审查。

部署、发布和维护阶段的关键步骤如下：

+   **部署**：在测试自动化脚本部署后，自动化工程师、SMEs 或甚至业务用户都可以使用它们

+   **发布**：在这个阶段，以下工件将被交付（列表可能根据项目的需求而变化）

    +   框架组件/脚本

    +   库、函数和数据池

    +   发布说明

    +   映射文档（可追溯性矩阵）

    +   设计/架构文档

+   **维护**：在这个阶段，我们将执行以下操作：

    +   在这里，我们分析由于脚本或应用程序问题、日志导致的失败，并修复它们

    +   根据每个周期/发布的需要增强脚本

    +   执行每个周期的脚本

在一段时间内，GUI 中的对象和 AUT 的流程会发生变化；因此，需要更改**对象库**（**OR**）中的测试对象和脚本。

## 工具选择

我们现在需要确定关键需求，这些需求应涵盖组织级和项目级所需技术的深度和广度。

### 捕获自动化需求

测试自动化的需求来自以下方面：

+   测试自动化的组织级要求

+   组织中使用的科技

+   工具如何支持这些技术的自动化

+   项目级或特定项目的要求

+   关键技术领域

### 开发 POC

进行**概念验证**（**POC**）的关键步骤如下：

+   确定 POC 的最小测试集

+   验证技术可行性

+   如果我们轻松实现工具的实施，验证实施可行性

+   查找是否存在任何已知的限制

+   提交 POC 总结报告

### 评估工具

评估工具的关键步骤如下：

+   确定最适合您项目的关键属性：例如，技术支持、技术版本等

+   给属性赋予适当的权重和价值；总分是权重和价值的乘积之和，如下所示：

    *总分 = ∑ 属性权重 * 属性值*

+   工具的最终选择基于总分

## 工具选择标准

以下是在考虑工具选择时应考虑的属性的综合但非完整列表：

+   **可靠性**：这是工具在常规情况下以及敌对或意外情况下执行和维护其功能的能力。

+   **容量**：这指的是系统的可能输出，即在高效和有效的方式下创建和执行脚本。

+   **易学性**：这个工具学习起来既快又简单。

+   **可操作性**：这是在各种配置和环境下的工作能力。

+   **性能**：给定任务的完成情况与目前所知的准确性、完整性、吞吐量和速度标准进行比较。

+   **兼容性**：这检查工具是否支持技术的各种版本、浏览器或操作系统。

+   **非侵入性**：在选择工具时应考虑的关键非侵入性特性如下：

    +   平台/操作系统无关

    +   数据驱动能力

    +   可定制的报告

    +   邮件通知

    +   容易调试和日志记录

    +   支持版本控制

    +   可扩展和可定制（开放 API 应该能够与其他工具集成）

    +   常见日志记录驱动器

    +   支持分布式执行环境

    +   分布式应用程序支持

    +   许可和支持（成本）

从更广泛的角度来看，测试自动化是由以下因素驱动的：

+   组织内部定义的过程

+   设计和架构

+   自动化目标

+   测试自动化的最佳实践

所有这些特性相互补充，以确保测试自动化的成功。

## 流程

一个过程可以被描述为执行自动化生命周期中发生的各种任务和活动的结构化方法。由有能力的组织制定的明确过程为从构思到完成提供指导。

在没有良好制定的过程和历史数据的情况下，很难估计、计划和实施测试自动化。如果一个组织是第一次实施测试自动化，它将成为未来测试自动化的学习曲线，并为未来的项目提供历史数据。

## 设计、架构和文档

明确的架构/设计有助于减少开销和冲突；它还有助于团队更好地协作和实现更好的实施。设计解决方案的关键方面是提供从复杂性、封装和技术挑战中抽象出来的能力。我们需要开发支持库，以提高自动化解决方案的可重用性和可扩展性。

我们必须记录设计和架构。脚本中的注释、脚本标题和函数标题提高了可读性和可理解性。文档有助于快速轻松地增强和维护脚本。

## 自动化目标

目标是人们所设想的结果。它是实现某种假设开发中期望的终点的计划和承诺。目标是测试自动化成功的关键驱动和指导力量。设计需要将框架解决方案分解成组件和层。自动化目标应在每个级别或层上实现，以确保测试自动化的整体成功。

### 备注

定义目标的目标是明确结果。目标在每一层定义，并且对彼此有级联效应。它们还推动并贡献于彼此的成功。

### 测试自动化的目标

整体自动化设计目标是根据组织目标、领域、业务等得出的。此列表可能因组织而异。以下是一些例子：

+   提高可重用性

+   增强测试覆盖率

+   加快多次和频繁发布的测试

+   确保一致性

+   提高测试的可靠性

+   可扩展性

### 框架设计的目标

以下是基于组织、领域等设计的框架设计目标列表。此列表可能有所不同。

+   可维护性

+   可读性

+   可扩展性

+   可重用性

+   与应用程序无关

+   应该有简短的驱动脚本/主脚本

### 设计的目标

以下是基于组织、领域等设计的测试自动化解决方案或框架的目标设计组件列表：

+   设计应该是易于扩展和维护的

+   它应该提供从复杂性中抽象出来的功能

+   识别跨脚本使用的公共函数

+   将复杂业务功能与实用函数解耦

+   解耦测试数据和测试脚本

+   创建健壮的函数

+   适当的函数分解，具有可移植性

+   确保脚本在没有人为干预的情况下执行，即使在错误条件下也是如此

+   设计文档

### 脚本设计的目标

以下测试自动化脚本/代码的目标列表基于组织、领域等。此列表可能有所不同。

+   测试应该始终有一个共同的起点和终点

+   应清理可重用的资源，例如，删除旧的日志文件、结果文件等

+   如果发生错误，测试应该揭示最大信息

+   配置值而不是硬编码

+   应该有适当的注释和脚本标题

+   代码应该是可读的，并且应该有适当的文档

+   脚本应该是可维护的和易于修改的

+   应该有错误处理和错误快照

+   应提供日志工具

### 设置可衡量的目标

为测试自动化项目设定明确、可衡量的目标是至关重要的。这些目标应该明确地提出。以下是一些例子：

+   要自动化的测试用例的数量或百分比

+   通过百分比或数字提高测试覆盖率

+   通过百分比或数字减少构建发布时间

+   减少新版本测试周期时间

没有设定可衡量的目标，很难获得期望的结果或甚至 ROI；这将导致高昂的维护成本，对脚本的更改将产生副作用。

## 最佳实践

测试自动化是任何软件开发和维护项目的重要组成部分。以下的一些最佳实践将使测试自动化项目取得成功。

### 选择最适合自动化的工具

一个不适合的自动化测试工具会增加设计、创建脚本和维护它们的工作量，从而增加自动化测试的成本，甚至可能无法实现自动化目标。选择合适的工具是赢得一半战斗的关键。合适的工具有助于加快脚本创建、修改，识别脚本中的问题，并快速解决它们；简而言之，它使测试自动化团队的工作变得更加容易。

### 将测试自动化视为一项开发活动

将测试自动化与开发项目相同的纪律和客观性对待。一个成功的测试自动化项目采用框架驱动的方法。根据 AUT 功能分解脚本，并将它们划分为可重用的函数。创建一个定义良好的结构，允许资源均匀共享。准备适当的文档：增强可读性和可维护性的文档。确保遵循了脚本/编码标准。最后，您需要测试和调试脚本或代码，并确保脚本没有错误。检查脚本和资源是否使用版本控制工具或机制也是好的。

### 获得正确的架构

如果不使用框架驱动的方法，扩展和维护自动化测试将变得困难。整体设计变得混乱或难以修改或增强。测试自动化框架允许我们定义自动化测试的脚本方法，创建支持库和公共资源以执行测试，并报告结果。框架允许以最小的努力添加测试用例。它还允许建立共同的标准和一致的方法来实现自动化团队的目标。

### 确保相关且最新的测试数据

如果数据过时且不相关，测试自动化套件可能无法捕捉到错误。近生产数据（与生产数据最相似的数据）确保测试数据映射到 GUI 中的正确字段。它不应包含前导和尾随空格。使用拼写正确的测试数据，因为它可能与从下拉菜单中选择值相关，例如，在多个测试中明智地选择用于重用的数据。测试数据有助于提高代码覆盖率。经过一段时间后，测试数据可能变得不相关；因此，应将其替换为相关且最新的测试数据，以便快速轻松地发现错误。

### 投资于团队建设和培训

除了正确的工具和良好的流程之外，测试自动化项目还需要一个专门的和有技能的团队来理解项目的复杂性并将其转化为脚本。技能组合中的差距会导致工作交付不平衡，导致工作质量低下和团队成员士气低落。负责人或经理应确保团队获得足够的培训，以弥补（如果有的话）技能组合中的差距。

### 进行审查和测试

没有正式的审查，很可能会发现缺陷，并且不会遵循标准，导致框架组件集成的潜在问题。这会导致额外的成本和努力。审查有助于主动发现早期问题和潜在风险，并迅速缓解它们。审查还确保项目的一致性，并控制问题。

# 摘要

自动化生命周期是一种设计、执行和维护测试自动化的结构化方法。这种结构化方法对于帮助测试团队避免常见的测试程序/自动化错误是必要的。

本章从更广泛的角度涵盖了测试自动化的各个方面。了解自动化生命周期以及每个阶段的关键活动有助于简化任务和目标。明确的过程和历史数据有助于测试估算、工具评估和选择。架构或设计基于实施测试自动化和实现目标。在下一章中，我们将讨论 QTP 的各种特性和创建可重用脚本所必需的概念。
