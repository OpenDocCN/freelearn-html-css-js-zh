# 前言

D3.js 是一个用于以动态图形形式显示数字数据的 JavaScript 库。它帮助你使用 HTML、SVG 和 CSS 使数据生动起来。D3 允许对最终视觉结果有极大的控制，并且是目前市场上最热门、最强大的基于网络的 数据可视化技术。

D3 v4 是 D3 库的最新版本。这本第二版烹饪书已经完全更新，以涵盖并利用 D3 v4 API、模块化数据结构以及改进的力实现。它旨在为你提供所有必要的指导，帮助你掌握使用 D3 进行数据可视化的技能。有了这本书，你将能够借助实用的食谱、插图和代码示例，以专业效率和精度创建令人叹为观止的数据可视化。

这本烹饪书从触及数据可视化和 D3 基础知识开始，然后逐渐带你通过一系列实用的食谱，涵盖你需要了解的 D3 的广泛主题。

你将学习数据可视化的基本概念、函数式 JavaScript 和 D3 基础，包括元素选择、数据绑定、动画和 SVG 生成。你还将学习如何利用更高级的技术，如插值器、自定义缓动、计时器、排队、层次结构、力操纵等。本书还提供了一些预构建的图表食谱，以及现成的示例代码，帮助你快速启动。

# 本书涵盖的内容

第一章, *D3.js 入门,* 设计用于让你快速上手 D3.js，涵盖了基本方面，例如 D3.js 是什么，以及如何设置典型的 D3.js 数据可视化环境。

第二章, *选择性地处理*，涵盖了在使用 D3 进行任何数据可视化项目时需要执行的最基本任务之一：选择。选择帮助你定位页面上的某些视觉元素。

第三章, *处理数据,* 探讨了任何数据可视化项目中最基本的问题：如何在编程结构和其视觉隐喻中表示数据。

第四章, *倾斜的尺度*，涵盖了作为数据可视化开发者你需要反复执行的一个关键任务，即，将你的数据域中的值映射到视觉域，这是本章的重点。

第五章, *玩转坐标轴*，探讨了在基于笛卡尔坐标系系统的可视化中使用的坐标轴组件和一些相关技术。

第六章, *以风格过渡*，处理了一个可以说是数据可视化最重要的基石之一的名言，“一图胜千言。”这一章涵盖了 D3 库提供的过渡和动画支持。

第七章, *进入形状*，处理了**可缩放矢量图形**（**SVG**），这是一个成熟的**万维网联盟**（**W3C**）标准，在可视化项目中广泛使用。

第八章, *绘制它们*，探讨了数据可视化中最古老且值得信赖的伴侣之一：图表。图表是对数据的一种定义明确且易于理解的图形表示。

第九章, *布局它们*，专注于 D3 布局。D3 布局是一组算法，用于计算和生成一组能够生成一些最复杂和有趣的可视化元素的位置信息。

第十章, *与你的可视化交互*，专注于 D3 人类可视化交互支持，换句话说，如何给你的可视化添加计算引导能力。

第十一章, *使用力*，涵盖了 D3 最迷人的方面之一：力。力模拟是你可以为你的可视化添加的最令人敬畏的技术之一。

第十二章, *了解你的地图*，介绍了基本的 D3 地图可视化技术以及如何在 D3 中实现一个功能齐全的地理可视化。

第十三章, *测试你的可视化*，指导你像专业人士一样使用**测试驱动开发**（**TDD**）来实现你的可视化。

附录 A, *在几分钟内构建交互式分析*，是关于 Crossfilter.js 和 DC.js 在交互式维度图表中的介绍。

# 你需要这本书的什么

+   你需要一个文本编辑器来编辑和创建 HTML、CSS 和 JavaScript 文件

+   一个现代网络浏览器（Firefox 3、IE 9、Chrome、Safari 3.2 以及更新版本）

+   一个本地 HTTP 服务器来托管本书中一些更高级的食谱所需的数据文件。我们将在第一章中介绍如何设置基于 Node 或 Python 的简单 HTTP 服务器。

+   如果你想直接从我们的 Git 仓库检查食谱源代码，则可选地需要一个 Git 客户端

# 这本书面向谁

如果你是一位熟悉 HTML、CSS 和 JavaScript 的开发者或分析师，并且希望从 D3 中获得最大收益，那么这本书就是为你准备的。这本书还可以作为经验丰富的数据可视化开发者的桌面快速参考指南。

# 部分

在这本书中，您会发现一些经常出现的标题（准备就绪、如何操作、工作原理、更多信息、以及相关内容）。

为了清楚地说明如何完成食谱，我们使用以下部分如下：

## 准备就绪

本节告诉您在食谱中可以期待什么，并描述了如何设置任何软件或任何为食谱所需的初步设置。

## 如何操作…

本节包含遵循食谱所需的步骤。

## 工作原理…

本节通常包含对上一节发生情况的详细解释。

## 更多…

本节包含有关食谱的附加信息，以便使读者对食谱有更多的了解。

## 相关内容

本节提供了对其他有用信息的链接，以帮助读者了解食谱。

# 约定

在这本书中，您会发现许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示：“在数据库中为 JIRA 创建一个新用户，并使用以下命令授予用户对我们刚刚创建的`jiradb`数据库的访问权限：”

代码块设置如下：

```js
var timeFormat = d3.time.format.iso;
var data = crossfilter(json); // <-A

var hours = data.dimension(function(d){
  return d3.time.hour(timeFormat.parse(d.date)); // <-B
});
```

**新术语**和**重要词汇**以粗体显示。屏幕上看到的单词，例如在菜单或对话框中，在文本中显示如下：“从**管理**面板中选择**系统信息**。”

### 注意

警告或重要注意事项以如下框的形式出现。

### 小贴士

小技巧和技巧显示如下。

# 读者反馈

我们欢迎读者的反馈。告诉我们您对这本书的看法——您喜欢或不喜欢什么。读者反馈对我们很重要，因为它帮助我们开发出您真正能从中获得最大收益的标题。

要向我们发送一般反馈，请简单地发送电子邮件至 feedback@packtpub.com，并在邮件主题中提及书籍标题。

如果您在某个主题领域有专业知识，并且对撰写或参与书籍感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助您从购买中获得最大收益。

## 下载示例代码

您可以从您的[`www.packtpub.com`](http://www.packtpub.com)账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的**支持**标签上。

1.  点击**代码下载与勘误表**。

1.  在**搜索**框中输入书籍名称。

1.  选择您想要下载代码文件的书籍。

1.  从下拉菜单中选择您购买此书的来源。

1.  点击**代码下载**。

您也可以通过点击 Packt Publishing 网站上书籍网页上的**代码文件**按钮来下载代码文件。您可以通过在**搜索**框中输入书的名称来访问此页面。请注意，您需要登录到您的 Packt 账户。

文件下载完成后，请确保您使用最新版本的软件解压缩或提取文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

本书的相关代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Data-Visualization-with-D3-4.x-Cookbook`](https://github.com/PacktPublishing/Data-Visualization-with-D3-4.x-Cookbook)。我们还有来自我们丰富的图书和视频目录的其他代码包，可在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**找到。查看它们吧！

## 错误清单

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然会发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何错误清单，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书，点击**错误提交表单**链接，并输入您的错误详细信息。一旦您的错误清单得到验证，您的提交将被接受，错误清单将被上传到我们的网站或添加到该标题的错误清单部分。

要查看之前提交的错误清单，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书的名称。所需信息将在**错误清单**部分显示。

## 盗版

互联网上对版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过版权@packtpub.com 与我们联系，并提供疑似盗版材料的链接。

我们感谢您在保护我们作者和我们为您提供有价值内容的能力方面提供的帮助。

## 问题和疑问

如果您对本书的任何方面有问题，您可以通过 questions@packtpub.com 与我们联系，我们将尽力解决问题。
