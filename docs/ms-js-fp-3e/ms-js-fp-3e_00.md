# 前言

在计算机编程中，范式众多。一些例子包括命令式编程、结构化（无 goto）编程、**面向对象编程**（**OOP**）、面向方面编程和声明式编程。最近，人们对一种可能被认为比上述所有范式都要古老的特定范式产生了新的兴趣——**函数式编程**（**FP**）。FP 强调以简单的方式编写函数并将它们连接起来，以产生更易于理解和测试的代码。因此，鉴于当今 Web 应用的复杂性不断增加，一种更安全、更干净的编程方式自然会受到关注。

对函数式编程（FP）的兴趣与 JavaScript 的演变息息相关。尽管 JavaScript 的创建有些仓促（据报道，1995 年由 Brendan Eich 在 Netscape 公司仅用 10 天完成），但如今，JavaScript 已经成为一个标准化且快速发展的语言，其功能比大多数类似流行的语言都要先进。这种语言无处不在，现在可以在浏览器、服务器、手机等设备上找到，这也促使人们对更好的开发策略产生了兴趣。此外，即使 JavaScript 最初并不是作为函数式语言设计的，但事实上它提供了你以那种方式工作所需的所有功能，这也是一个加分项。

话虽如此，我们还得评论一下语言和相关工具的进步。数据类型的好处通常得到认可，近年来，TypeScript 得到了广泛的应用，并被用于前端和后端编码。因此，在本书中也包括其使用是有意义的。我们认为，这将使示例更清晰，并简化所展示代码在实际工作中的应用。

还必须指出，FP 在工业界并没有得到普遍应用，可能是因为它有一定的难度，人们认为它更偏向于理论而非实践，甚至可以说是数学性的，并且可能使用了开发者不熟悉的词汇和概念——例如，函子、单子、折叠和范畴论。虽然学习所有这些理论无疑会有所帮助，但也有人认为，即使对之前的术语一无所知，你也能理解 FP 的原则，并看到如何将其应用到自己的编程中。

函数式编程（FP）并不是你必须独自完成的事情，无需任何帮助。有许多库和框架在某种程度上融入了 FP 的概念。从 jQuery（它确实包含了一些 FP 概念）开始，经过 Underscore 及其近亲 Lodash，以及其他库如 Ramda，再到更完整的 Web 开发工具，如 React 和 Redux、Angular 和 Elm（一种 100%函数式语言，编译成 JavaScript），你用于编码的函数式辅助工具清单不断增长。

学习如何使用 FP 可以是一项值得的投资，即使你可能无法使用其所有方法和技巧，但只要开始应用其中的一些，就能在编写更好的代码中获得回报。你不必一开始就尝试应用 FP 的所有概念，也不必尝试放弃 JavaScript 中的每一个非功能特性。JavaScript 确实有一些不好的特性，但它也有几个非常好且强大的特性。我们的想法不是抛弃你所学的一切，而是采用 100%的函数式方法；相反，指导思想是进化，而不是革命。从这个意义上说，可以说我们正在做的不完全是 FP，而是**半函数式编程**（**SFP**），旨在融合范式。

关于本书代码风格的一个最后评论——确实有几个非常好的库为你提供了 FP 工具：Underscore、Lodash 和 Ramda 就是其中之一。然而，我更喜欢避免使用它们，因为我想要展示事物真正的工作方式。应用某个包中的给定函数很容易，但通过编写一切（如果你愿意，纯 FP），我相信你可以更深入地理解事物。此外，正如我将在某些地方评论的那样，由于箭头函数和其他特性的强大和清晰，纯 JavaScript 版本甚至可能更容易理解！

# 本书面向对象

本书面向那些对 JavaScript（或者更好的是 TypeScript）有良好实际了解的程序员，他们要么在客户端（浏览器）工作，要么在服务器端（Node.js）工作，并希望应用技术来编写更好、可测试、可理解和可维护的代码。一些计算机科学背景（例如，数据结构）和良好的编程实践也将很有帮助。然而，本书将以实用的方式介绍 FP，尽管有时我们会提到一些理论观点。

# 本书涵盖内容

*第一章*，*成为函数式程序员 – 几个问题*，讨论 FP，给出其使用的原因，并列出你将需要利用本书剩余部分所需工具。

*第二章*，*以函数式思考 – 第一个例子*，将通过考虑一个常见的与网络相关的问题并探讨几个解决方案，最终专注于函数式解决方案。

*第三章*，*从函数开始 – 核心概念*，将介绍 FP 的核心概念，即函数，以及 JavaScript 中可用的不同选项。

*第四章*，*行为规范 – 纯函数*，将考虑纯度和纯函数的概念，并展示它如何导致更简单的编码和更简单的测试。

*第五章*，*声明式编程 - 更好的风格*，将使用简单的数据结构来展示如何以声明式方式而不是命令式方式产生结果。

*第六章*，*生成函数 - 高阶函数*，将处理高阶函数，这些函数接收其他函数作为参数并产生新的函数作为结果。

*第七章*，*转换函数 - 柯里化和部分应用*，将探讨一些方法，可以从早期函数中产生新的和特殊化的函数。

*第八章*，*连接函数 - 管道、组合等*，将展示如何通过连接先前定义的函数来构建新的函数的关键概念。

*第九章*，*设计函数 - 递归*，将探讨函数式编程中的一个关键概念，递归，如何应用于算法和函数的设计。

*第十章*，*确保纯净性 - 不可变性*，将介绍一些工具，这些工具可以通过提供不可变对象和数据结构来帮助你以纯净的方式工作。

*第十一章*，*以函数式方式实现设计模式*，将展示在以函数式编程方式编程时，几个流行的面向对象设计模式是如何实现（或不需要！）的。

*第十二章*，*构建更好的容器 - 函数式数据类型*，将探讨一些更高级的函数式模式，介绍类型、容器、函子、单子以及几个其他更高级的函数式编程概念。

我试图使这本书中的例子简单易懂，因为我想专注于函数式方面，而不是某个问题的复杂性。有些编程教材倾向于学习某个特定的框架，然后解决某个特定的问题，展示如何使用选定的工具彻底解决问题。

事实上，在为这本书的早期规划阶段，我考虑过开发一个应用，该应用将使用我心中所有的函数式编程元素，但无法将所有这些内容都包含在一个单一的项目中。夸张一点说，我感觉就像一个医生试图找到一个病人来应用他所有的医学知识和治疗方法！因此，我选择展示许多可以用于多种情况的技术。与其建造一座房子，我更想展示如何将砖块组合在一起，如何布线，等等，这样你就可以根据需要应用任何你需要的东西。

# 为了充分利用这本书

要理解本书中的概念和代码，您不需要比 JavaScript 环境和文本编辑器更多的东西。说实话，我甚至使用 JSFiddle（在[jsfiddle.net](http://jsfiddle.net)）等工具完全在线开发了一些示例，而且绝对不需要其他任何东西。

在本书中，我们将使用 ES2022 和 Node 19，代码将在任何操作系统上运行，例如 Linux、macOS 或 Windows。

您需要一些关于最新版 JavaScript 的经验，因为它包括一些可以帮助您编写更简洁和紧凑代码的功能。我们将经常包括指向在线文档的指针，例如在[developer.mozilla.org](http://developer.mozilla.org)上可用的**Mozilla 开发网络**（**MDN**）文档，以帮助您获得更深入的知识。

我们还将使用 TypeScript 的最新版本，为我们的 JavaScript 代码添加数据类型。有关该语言的更多信息，必读的参考资料是[www.typescriptlang.org](http://www.typescriptlang.org)，在那里您可以找到文档、教程，甚至一个在线沙盒，可以直接在那里测试代码。

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件[github.com/PacktPublishing/Mastering-JavaScript-Functional-Programming-3E](http://github.com/PacktPublishing/Mastering-JavaScript-Functional-Programming-3E)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还提供来自我们丰富的图书和视频目录中的其他代码包，可在[github.com/PacktPublishing/](http://github.com/PacktPublishing/)找到。查看它们吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图和图表彩色图像的 PDF 文件。您可以从这里下载：[`packt.link/UsFuE`](https://packt.link/UsFuE)。

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`：表示文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。以下是一个示例：“有几种可能的结果：使用`reduce()`操作的单个值、使用`map()`的新数组，或者使用`forEach()`的几乎所有类型的输出。”

代码块设置如下：

```js
// reverse.ts
const reverseString = (str: string): string => {
  const arr = str.split("");
  arr.reverse();
  return arr.join("");
};
console.log(reverseString("MONTEVIDEO"));	// OEDIVETNOM
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
// continued...
const reverseString2 = (str: string): string =>
  str.split("").reduceRight((x, y) => x + y, "");
console.log(reverseString2("OEDIVETNOM")); // MONTEVIDEO
```

任何命令行输入或输出都如下所示：

```js
START MAP
2022-10-29T01:47:06.726Z [ 10, 20, 30, 40 ]
END MAP
```

**粗体**：表示新术语、重要词汇或屏幕上看到的词汇。

小贴士或重要注意事项

看起来是这样的。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误表**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在此书中发现错误，我们将非常感激您能向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，我们将非常感激您能提供位置地址或网站名称。请通过 mailto:copyright@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《精通 JavaScript 函数式编程 - 第三版》，我们非常乐意听到您的想法！请点击此处直接进入此书的亚马逊评论页面并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢随时随地阅读，但无法携带您的印刷书籍到任何地方吗？您的电子书购买是否与您选择的设备不兼容？

别担心，现在，随着每本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止这些，您还可以获得独家折扣、时事通讯和每日免费内容的每日邮箱访问权限

按照以下简单步骤获取福利：

1.  扫描下面的二维码或访问以下链接！![二维码图片](img/B19301_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781804610138`](https://packt.link/free-ebook/9781804610138)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他福利发送到您的邮箱
