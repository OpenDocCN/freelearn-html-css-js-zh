# 前言

JavaScript 像之前的许多语言一样渗透到开发领域。自从 2009 年 5 月 Node.js 运行时的引入以来，它已经远远超出了浏览器的范畴。现在它可以在树莓派上的控制器上工作，作为在桌面计算机上运行的 3D 视频游戏的脚本语言，运行每天服务于数百万页面浏览量的网络服务器，当然，它也是网络浏览器的主导语言。JavaScript 可能是世界上最重要的编程语言。

ECMAScript 标准几乎与 JavaScript 一样历史悠久。然而，在过去的几年里，它经历了大量的活动。2015 年发布的 ES6 创建了一种几乎全新的语言。从那时起，更新更加渐进，但仍然意义重大。本书涵盖了标准直到 ES8（2017 年发布）。我们将讨论如何使用其中的一些新特性来更有效地组织程序并编写更好的代码。

# 本书面向的对象

本书面向广泛的读者。虽然这不应被视为一本入门书籍，但任何编写过 JavaScript 程序并在浏览器中运行过的人都将为阅读本书做好准备。JavaScript 专家也会发现一些值得思考的内容。

# 本书涵盖的内容

第一章，*使用模块构建*，介绍了如何使用 ECMAScript 模块来组织代码以及如何配置现代浏览器来使用它们。本章还涵盖了与谷歌的 Chrome 和 Mozilla 的 Firefox 浏览器的兼容性，以及如何使它们与模块一起工作。

第二章，*与旧版浏览器保持兼容性*，介绍了如何将使用 ECMAScript 模块的代码转换为不支持它们的平台可以使用的格式。我们使用 webpack，一种常见的 JavaScript 编译工具，将我们的模块组装成一个单一的 JavaScript 文件（称为捆绑包），并在 ECMASript 模块不兼容时将其加载到我们的浏览器中。

第三章，*与 Promise 一起工作*，介绍了如何使用 Promise API 来组织异步程序。我们将探讨如何通过 Promise 链传播结果和处理错误。Promise 通常被认为比旧的回调模式有所改进。本章还为下一章讨论的主题奠定了基础。

第四章，*与 async/await 和函数一起工作*，介绍了如何使用新的`async`和`await`特性。在上一章的基础上，我们将探讨它们如何与 Promise API 替换或协同使用，提高程序的可读性同时保持兼容性。

第五章，*Web Workers、共享内存和原子操作*，涵盖了可以用来并行处理数据的 Web API。这一章是 JavaScript 作为语言和浏览器作为平台的近期发展的象征。并行编程是 JavaScript 的一个新领域，为语言带来了新的可能性和问题。

第六章，*普通对象*，展示了使用 API 和语法选项来处理普通对象的方法。我们将探讨如何将对象作为集合来处理，以及如何定义具有一些有趣行为的属性。

第七章，*创建类*，涵盖了使用 ECMAScript 类语义的使用。我们将创建具有在单个实例和整个类上定义的行为的新类。我们将探讨如何添加属性和定义方法。

第八章，*继承和组合*，基于前一章的知识；我们将组合类到更大的结构中。我们还将探讨如何使用组合和继承在类之间共享行为，并讨论各自的优缺点。

第九章，*使用设计模式构建更大的结构*，进一步扩展前两章的内容，探讨了某些特定任务中程序组织的一些常见方式。我们将实现一些常见的设计模式，并演示如何根据不同的用途扩展和修改它们。

第十章，*使用数组*，涵盖了新`Array` API 特性的使用。在过去，使用数组意味着大量的循环和跟踪索引，或者导入庞大的库来清理重复的代码。本章将展示一些新的、功能启发的方法，这些方法使得处理这些集合变得更加容易。

第十一章，*使用映射和符号*，涵盖了如何利用`Map`和`WeakMap`类在多种类型的值之间建立关系。在本章中，我们将探讨如何使用这两个类的 API，它们之间的区别，以及我们如何控制可以放入它们中的类型。

第十二章，*使用集合*，展示了`Set`和`WeakSet`类的使用。当元素的顺序不重要，我们只想知道是否存在某个元素时，这些类非常出色。我们将看到如何使用这两个类的 API，何时使用一个而不是另一个，以及我们如何控制可以放入它们中的类型。

# 为了充分利用本书

本书假设您具备一些非常基础的知识和资源，以便充分利用它：

+   一台可以安装程序和配置浏览器的计算机

+   使用您熟悉的文本编辑器；有很多选项可供选择：

    +   VSCode

    +   Atom

    +   Vim

    +   Emacs

+   一些基本的编程知识。如果您之前没有编写过函数，这可能不是开始的最佳地方。

# 下载示例代码文件

您可以从[www.packtpub.com](http://www.packtpub.com)的账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在[www.packtpub.com](http://www.packtpub.com/support)登录或注册。

1.  选择“支持”标签。

1.  点击“代码下载与勘误”。

1.  在搜索框中输入书籍名称，并遵循屏幕上的说明。

文件下载后，请确保使用最新版本解压缩或提取文件夹：

+   WinRAR/7-Zip for Windows

+   Zipeg/iZip/UnRarX for Mac

+   7-Zip/PeaZip for Linux

本书代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/ECMAScript-Cookbook`](https://github.com/PacktPublishing/ECMAScript-Cookbook)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有来自我们丰富的图书和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“接下来，在同一个目录中，创建一个名为 `hello.js` 的文件，该文件导出一个名为 `sayHi` 的函数，该函数向控制台写入消息。”

代码块设置如下：

```js
// hello.js 
export function sayHi () { 
  console.log('Hello, World'); 
} 
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
import rocketName, { launch, COUNT_DOWN_DURATION } from './saturn-v.js'; 
import falconName, { launch as falconLaunch, COUNT_DOWN_DURATION as falconCount } from './falcon-heavy.js'; 
```

任何命令行输入或输出都按以下方式编写：

```js
cd ~/Desktop/es8-cookbook-workspace
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“双击 **nvm-setup**。”

警告或重要注意事项看起来像这样。

技巧和窍门看起来像这样。

# 部分

在本书中，您会发现一些频繁出现的标题（*准备工作*、*如何操作*、*如何工作*、*还有更多...* 和 *也见*）。

为了清楚地说明如何完成食谱，请按以下方式使用这些部分：

# 准备工作

本节告诉您在食谱中可以期待什么，并描述了如何设置任何软件或任何为食谱所需的初步设置。

# 如何操作...

本节包含遵循食谱所需的步骤。

# 如何工作...

本节通常包含对上一节发生情况的详细解释。

# 还有更多...

本节包含有关食谱的附加信息，以便您对食谱有更深入的了解。

# 参见

本节提供了有关食谱的其他有用信息的链接。

# 联系我们

欢迎读者反馈。

**一般反馈**: 请发送电子邮件至 `feedback@packtpub.com` 并在邮件主题中提及书籍标题。如果您对本书的任何方面有疑问，请发送电子邮件至 `questions@packtpub.com`。

**勘误**: 尽管我们已经尽最大努力确保内容的准确性，错误仍然可能发生。如果您在这本书中发现了错误，我们非常感谢您能向我们报告。请访问 [www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**: 如果您在互联网上发现我们作品的任何非法副本，我们非常感谢您能提供位置地址或网站名称。请通过链接联系我们在 `copyright@packtpub.com`。

**如果您有兴趣成为作者**: 如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦您阅读并使用过这本书，为何不在您购买它的网站上留下评论呢？潜在读者可以看到并使用您的客观意见来做出购买决定，Packt 可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需了解 Packt 的更多信息，请访问 [packtpub.com](https://www.packtpub.com/)。
