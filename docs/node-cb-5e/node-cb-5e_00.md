# 前言

Node.js 现在已经进入第二个十年，作为一项技术已经显著成熟。如今，它是构建各种规模应用程序的常见技术选择。许多大型企业都在生产中使用 Node.js，包括 Netflix、PayPal、IBM，甚至是 NASA。由于 Node.js 的广泛使用和依赖，它被移至 OpenJS 基金会（前身为 Node.js 基金会）之下。OpenJS 基金会为 JavaScript 项目提供了一个中立的家园，并专注于开放治理。

创建于 2009 年，Node.js 将 Google Chrome 的 JavaScript 引擎 V8 进行了封装，使得 JavaScript 能够在浏览器之外运行。Node.js 将 JavaScript 带到了服务器端，并遵循事件循环架构进行构建，这使得它能够有效地处理输入/输出和并发操作。如今，Node.js 已成为构建各种类型应用程序的流行技术选择，包括 HTTP 网络服务器、微服务、命令行应用程序等。Node.js 成功的关键在于它使得全栈开发可以在一种通用语言——JavaScript 中进行。

Node.js 模块的庞大生态系统支持了其成功。现在，在**npm**注册表中已有超过三百万个模块可用，许多模块将底层实现细节抽象为更高层次且更易于使用的 API。在**npm**模块之上构建你的应用程序可以加快开发过程，同时促进代码共享和重用。

近年来，Node.js 似乎偏离了其小巧的核心哲学，提供了一种更“一应俱全”的运行时。这种演变包括将更多功能纳入核心运行时，例如内置的测试运行器，增强了其开箱即用的开发者体验。

*《Node.js 烹饪秘籍，第五版》* 是 *《Node.js 烹饪秘籍，第四版》* 的更新版本。内容已根据 Node.js 的最新长期支持版本 Node.js 22 进行了更新。本版涵盖了运行时中的一些新特性，包括内置的测试运行器。

# 本书面向对象

如果你有些 JavaScript 或其他编程语言的知识，并希望对 Node.js 的基本概念有一个广泛的理解，那么 *《Node.js 烹饪秘籍，第五版》* 就适合你。本书将提供基础知识，使你能够开始探索 Node.js 和**npm**生态系统，并开始构建 Node.js 应用程序。

对于已经了解一些 Node.js 的读者来说，可以加深和拓宽他们对 Node.js 概念和特性的了解，而对于初学者来说，可以使用实用的食谱来获得基础知识。

# 本书涵盖内容

*第一章* ，*介绍 Node.js 22*，作为 Node.js 的介绍，包括如何安装 Node.js 22、访问相关 API 文档以及 Node.js 事件循环的介绍。

*第二章* ，*与文件系统交互* ，专注于允许我们与标准 I/O、文件系统和网络交互的核心 Node.js API。

*第三章* ，*使用流* ，探讨了 Node.js 流的基本原理。

*第四章* ，*使用 Web 协议* ，展示了如何使用 Node.js 核心 API 在低级别上与 Web 协议交互，包括最近添加的 Fetch API。

*第五章* ，*开发 Node.js 模块* ，教授 Node.js 模块系统的工作原理，并演示如何创建和发布自己的模块到 **npm** 注册表。

*第六章* ，*使用 Fastify – 网络框架* ，介绍了 Fastify，这是 Node.js 中最快、最有效的网络框架。强调开发者体验和应用性能，Fastify 遵循 Web 标准，以确保可靠性和兼容性。本章将指导您创建 API 入门项目，将代码拆分为插件，并探索 Fastify 的关键特性，如封装、数据验证、使用序列化提高性能，以及从头开始配置和测试 Fastify 应用程序。

*第七章* ，*持久化到数据库* ，展示了如何使用 Node.js 将数据持久化到各种数据库中，包括 SQL 和 NoSQL 变体。

*第八章* ，*使用 Node.js 进行测试* ，教授测试 Node.js 应用程序的基本原理，介绍了关键测试框架和工具，例如各种测试库、模拟 HTTP 请求、浏览器自动化以及配置持续集成测试。

*第九章* ，*处理安全问题* ，展示了可以对 Node.js 应用程序发起的常见攻击以及我们如何减轻这些攻击。

*第十章* ，*优化性能* ，展示了我们可以使用的流程和工具来识别 Node.js 应用程序中的瓶颈。

*第十一章* ，*部署 Node.js 微服务* ，教授如何构建微服务并将其使用容器技术部署到云端。

*第十二章* ，*调试 Node.js* ，展示了用于调试 Node.js 应用程序的工具和技术。

# 为了充分利用本书

预期您对 JavaScript 或其他编程语言有一些先前的了解。此外，您应该熟悉如何使用终端或 shell，以及如何使用代码编辑器，例如 Visual Studio Code：

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Node.js 22 (和 **npm**) | Windows, Mac OS X, 和 Linux (任何版本) |
| Google Chrome | Windows, Mac OS X, 和 Linux (任何版本) |
| cURL | Windows, Mac OS X, 和 Linux (任何版本) |
| Docker Desktop | Windows、Mac OS X 和 Linux（任何） |

任何需要上述列出的特定软件的章节或食谱将涵盖*技术要求*或*准备工作*部分中的安装步骤。

许多终端步骤假设您正在 Unix 环境中操作。在 Windows 上，您应该能够使用**Windows 子系统（WSL 2**）来完成这些步骤。

食谱步骤已在 macOS Sonoma 上使用 Node.js 22 的最新版本进行了测试。

**如果您正在使用本书的数字版，我们建议您亲自输入代码或通过 GitHub 仓库（下一节中提供链接）访问代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误。**

## 下载示例代码文件

您可以从 GitHub（[`github.com/PacktPublishing/Node.js-Cookbook-Fifth-Edition`](https://github.com/PacktPublishing/Node.js-Cookbook-Fifth-Edition)）下载本书的示例代码文件。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有来自我们丰富的图书和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

**文本中的代码**：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“**process.nextTick()**回调在事件循环的当前阶段完成后执行，但在事件循环移动到下一个阶段之前。”

代码块设置如下：

```js
  const name = data.toString().trim().toUpperCase();
  process.stdout.write(`Hello ${name}!`);
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
const fs = require('node:fs');
const rs = fs.createReadStream('./file.txt');
const newFile = fs.createWriteStream('./newFile.txt');
rs.map((chunk) => chunk.toString().toUpperCase()).pipe(newFile);
```

任何命令行输入或输出都按以下方式编写：

```js
$ mkdir interfacing-with-io
$ cd interfacing-with-io
$ touch greeting.js
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“首先，我们需要在左侧导航窗格中找到并点击**文件系统**。”

小贴士或重要注意事项

显示如下。

# 部分

在本书中，您会发现一些经常出现的标题（*准备工作*、*如何操作...*、*工作原理...*、*还有更多...* 和 *参见*）。

为了清楚地说明如何完成食谱，请按照以下方式使用这些部分：

## 准备工作

本节告诉您在食谱中可以期待什么，并描述了如何设置任何必需的软件或任何为食谱所需的初步设置。

## 如何操作…

本节包含遵循食谱所需的步骤。

## 工作原理…

本节通常包含对前一个节中发生情况的详细解释。

## 还有更多…

本节包含有关食谱的附加信息，以便您对食谱有更深入的了解。

## 参见

本节提供了对其他有用信息的链接，这些信息对食谱很有帮助。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并给我们发送邮件至 customercare@packtpub.com。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告，请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) ，选择书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上以任何形式遇到我们作品的非法副本，我们将不胜感激，如果您能提供位置地址或网站名称，请通过 copyright@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《Node.js 第五版 烹饪秘籍》，我们很乐意听听您的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1804619817)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢随时随地阅读，但又无法携带您的印刷书籍到处走？

您的电子书购买是否与您选择的设备不兼容？

别担心，现在，每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

随处阅读，任何地方，任何设备。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠不会就此结束，您还可以获得独家折扣、时事通讯和每日免费内容的每日邮箱访问权限。

按照以下简单步骤获取福利：

1.  扫描下面的二维码或访问以下链接

![img](img/B19212_QR_Free_PDF.jpg)

[`packt.link/free-ebook/978-1-80461-981-0`](https://packt.link/free-ebook/978-1-80461-981-0)

1.  提交您的购买证明

1.  就这些！我们将直接将您的免费 PDF 和其他福利发送到您的邮箱。
