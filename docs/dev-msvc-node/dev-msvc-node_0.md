# 前言

本书是一个实践指南，教你如何使用 Node.js 和最现代的框架，特别是 Seneca 和 PM2 来编写微服务。在各章中，我们将讨论如何设计、构建、测试和部署微服务，使用最佳实践。我们还将讨论一个宝贵的经验教训：如何在避免过度设计的同时做出正确的妥协，并使业务需求与技术解决方案保持一致。

# 本书涵盖的内容

第一章，“微服务架构”，讨论了面向微服务的架构的利弊。这将是本书其余部分的基础。

第二章，“Node.js 中的微服务- Seneca 和 PM2 替代方案”，介绍了 Node.js、Seneca 和 PM2。在其中，我们将讨论 Node.js 应用程序的结构以及如何使用 PM2 运行它。我们还将探讨一些 Seneca 和 PM2 的替代方案。

第三章，“从单体架构到微服务”，涵盖了如何使用微服务来解决有机增长（未经计划的软件更改）。我们还将讨论如何将单体应用程序拆分为微服务。

第四章，“在 Node.js 中编写您的第一个微服务”，解释了如何编写我们的第一个微服务。

第五章，“安全和可追溯性”，涵盖了安全和可追溯性是现代系统的两个重要特征。我们需要保护信息安全并且行为可追溯。在本章中，我们将讨论如何使用 Seneca 来实现这一点。

第六章，“测试和文档化 Node.js 微服务”，介绍了在 Node.js 上使用主要测试框架：Mocha 和 Chai。我们还将使用 Sinon（另一个框架）来模拟服务。Swagger 将是我们文档化微服务的选择。

第七章，“监控微服务”，涵盖了使用 PM2 监控我们的微服务。我们将与 Keymetrics 一起使用它，以充分利用这样一个先进工具。

第八章，“部署微服务”，解释了如何使用 PM2 学习在不同环境中部署微服务，使用单个命令管理我们的应用程序生态系统，并减少微服务架构引入的开销。我们还将讨论 Docker，这是部署应用程序的最先进系统之一，不仅适用于 Node.js，还适用于一般应用程序。

# 您需要为本书准备什么

为了跟随本书，我们需要安装 Node.js、PM2（通过 npm 安装的软件包）和 MongoDB。

我们还需要一个编辑器。我个人使用 Atom，但任何通用编辑器都应该足够。

# 这本书是为谁写的

这本书是为那些有一定 Node.js 经验但想要了解 Seneca 和微服务的开发人员而写的。它是 70%的实践导向（因为我们将写很多代码），但也有 30%的理论，基于创建的代码，将帮助读者将这些模式应用到新软件中。

# 约定

在本书中，您会发现一些文本样式，用于区分不同类型的信息。以下是一些样式的示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下：“我们知道输入参数是`PaymentRequest`实例。”

代码块设置如下：

```js
public interface PaymentService {
  PaymentResponse processPayment(PaymentRequest request) throws MyBusinessException;
}
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```js
function() {
  sinon.stub(Math, "random");
  rollDice();
  console.log(Math.random.calledWith());
});
after(function(){
 Math.random.restore();
});

```

任何命令行的输入或输出都会以以下形式书写：

```js
node index.js
npm start

```

**新术语**和**重要词汇**会以粗体显示。屏幕上看到的词语，比如菜单或对话框中的词语，会以这样的形式出现在文本中：“在这种情况下，我使用了 Chrome，控制台显示第 7 行出现了一个**Uncaught TypeError: Cannot set property 'innerText' of null**错误。”

### 注意

警告或重要说明会显示在这样的框中。

### 提示

提示和技巧会显示在这样的形式下。
