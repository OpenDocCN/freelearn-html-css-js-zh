# 第十一章：我们将学到什么-在线论坛应用

无论我们学习了多少书，作为开发人员，如果没有构建一个使用特定技术栈的现实应用，我们就无法真正学会如何使用它来编程。在本章中，我们将了解我们打算构建的应用程序。我们将看到我们将如何应用我们所涵盖的一些主题。我们将看到我们的应用程序将具有哪些功能以及包括这些功能的一些原因。本作者还有相当多的构建论坛式应用的经验，比如我的最新应用 DzHaven。因此，您可以放心，您将学到的是实际在现实应用中使用的生产级代码。

在本章中，我们将涵盖以下主要主题：

+   分析我们将要构建的内容-论坛应用

+   分析论坛认证

+   分析主题管理

+   分析主题积分系统

# 分析我们将要构建的内容-论坛应用

正如所指出的，我们正在构建一个论坛应用。它在风格上与其他论坛应用相似，比如 StackOverflow 和 Bitcointalk.org。用户将能够在应用的社区中发布主题或提问，并从其他用户那里获得回复。

**为什么要构建单个论坛应用？**

我们本可以通过构建几个更简单的小型应用来展示 JavaScript 开发。用简单的应用演示全栈编程的问题在于它们无法展示现代 JavaScript 应用的所有功能。换句话说，它可能会在你实现某些功能的知识上留下漏洞，比如认证或数据库访问。

当然，我们可以构建一个图形密集型的照片或视频应用，但这些应用的问题在于需要大量关注图形设计和美学。此外，编辑照片或视频很好，但这些技能并不很好地转化为通用的全栈编程。这样的应用并没有错，但在这样的书中，主要目标显然是学习如何编写全栈应用，而不一定成为图形专家。

因此，论坛应用将使我们深入了解大型全栈应用中所需的各种框架。它还将展示我们需要在一个可以为许多用户提供服务的公开网站中实现的功能。在高层次上，我们将实现以下技术特性：

+   **安全**

广义上讲，Web 安全包括两个主要部分。认证是服务器验证用户是否为其所说的用户的能力，授权是控制用户对应用程序功能的访问权限的能力。

+   **会话和 cookie**

服务器端会话允许服务器维护有关用户在站点上的当前活动的数据。我们将使用会话和 cookie 来识别用户，并在他们使用站点时提供更轻松的体验。

+   **对象关系映射器**

**对象关系映射器**（**ORM**）是一种技术，允许代码（在我们的情况下是 TypeScript）与数据库进行交互，而不是 SQL。

+   **数据库访问和存储库层**

数据库访问是复杂的，因此我们将使用一种称为存储库的设计模式，将我们的数据库访问代码与应用程序的其余部分分开。

如今，应用程序默认需要支持移动设备。我们需要确保手机用户能够访问并参与我们的应用社区。因此，我们将使用响应式方法构建我们的应用程序，以便我们的应用程序可以在桌面和移动设备上运行。响应式网页设计简单地意味着我们的应用程序屏幕将根据设备屏幕大小和尺寸进行调整。我们将使用现代的 CSS 和 JavaScript 技术来实现这一点。

在这一部分，我们回顾了我们将要构建的应用程序类型以及我们选择的原因。在下一部分，我们将看一下论坛认证及其一些特性。

# 分析论坛认证

在任何大型多用户应用程序中，我们需要使用一个系统来识别和授权用户。我们的论坛应用程序也不例外。

用户将能够发布论坛主题和回答论坛问题。因此，他们需要能够区分自己的活动和其他用户的活动。因此，我们将构建一个登录系统，允许用户使用自己的唯一帐户进行身份验证和在网站上执行活动。因此，我们将构建以下特性：

+   **登录和注销**

这个功能将不仅包括**GraphQL**解析器，允许登录和注销，还包括屏幕，允许用户输入他们的 ID 和密码。我们还将使用几种技术，为用户的活动在任何给定时间提供一个唯一的会话状态。

+   **注册系统**

注册系统将包括屏幕和解析器，允许用户创建一个唯一的帐户，以区分他们在网站上的活动。

+   **重置密码**

用户有能力在需要时以安全的方式更改他们的密码。

+   **个人资料屏幕**

一个屏幕和功能，显示用户的帐户信息。这些信息将包括他们的电子邮件和用户 ID。除此之外，它还提供了用户查看他们以前的所有帖子的能力，包括主题帖和回复。

+   **类别**

基于类别创建分组，允许用户只查看他们感兴趣的类别中的帖子，并减少噪音。

+   **通知电子邮件**

通过电子邮件联系用户并通知他们有关网站的额外要求或新闻的系统。例如，这可能包括验证电子邮件，检查他们注册的电子邮件是否有效，并且可以被同一用户访问。

在这一部分，我们回顾了我们将要构建的功能列表，以允许用户在网站上进行身份验证并唯一地识别自己和他们的活动。在下一部分，我们将审查我们将如何实现**主题**，这是我们应用程序内部的主要交流方式。

# 分析主题管理

网站上的每篇帖子都可以被视为一个主题的开始；也就是说，最初的主题帖会引发关于一个主题的讨论，并创建一系列回复。因此，我们的应用程序需要允许用户通过添加初始主题帖来开始讨论。然后所有用户都可以看到这个帖子并对其进行回复。每个主题项，包括初始帖子，都将被唯一地标识为发帖用户。因此，为了创建这个功能，我们将需要以下特性：

+   **主题帖发布和编辑**

这个功能当然会包括被任何人查看的能力，以及作者添加和编辑主题帖的能力。用户还可以从他们的**用户资料**屏幕上看到他们所有的帖子。

+   **回复主题帖**

这个功能将包括主题发起用户和其他用户对主题帖进行回复的能力。它具有查看主题帖以及所有与该主题相关的回复的能力。

为了将应用程序的复杂性降到最低，用户将不被允许回复特定的回复，而只能回复主题。但他们可以在回复中引用其他帖子。

在这一部分，我们回顾了应用程序的主要功能。创建和回复新主题将是应用程序的核心功能，尽管我们将添加其他相关功能以增强其功能。在下一部分，我们将审查我们将为主题积分系统构建什么。

# 分析主题积分系统

用户应该能够标记他们喜欢的评论并对其进行点赞。显示哪些帖子受欢迎也有助于用户更加参与沟通。在本节中，我们将回顾如何使用户能够表达他们对帖子的赞同。

为了实现这一功能，我们将在我们的应用程序中包括以下功能：

+   **积分系统**

将创建一个积分系统，允许用户对帖子和回复进行点赞或踩。

+   **显示查看次数**

显示用户查看帖子的次数。

+   **显示回复次数**

显示帖子的回复次数，以让用户知道哪些主题受欢迎或正在流行。

在本节中，我们回顾了系统如何重要，以使用户能够表达他们对某些帖子的感受并查看主题的受欢迎程度。积分系统将增强用户参与度和活动性。

# 摘要

在本章中，我们看了一下我们将要构建的应用程序，它将具有的功能列表，以及选择这种类型应用程序的一些原因。由于我们正在构建一个全栈应用程序，我们即将构建的代码将会非常复杂和具有挑战性。您甚至可能会对这个应用程序的最终规模和范围感到惊讶。然而，一旦完成，我们将构建一个现代、复杂和完整的端到端应用程序。

在下一章中，我们将开始编写我们应用程序的 React 客户端部分的代码。由于我们还没有开始后端，我们将无法完全完成它。但是，我们将构建其中的很大一部分，您将能够看到许多屏幕。
