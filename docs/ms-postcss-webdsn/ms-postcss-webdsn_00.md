# 前言

作为一名开发者，我敢打赌你有一个完美的流程——你要么使用纯 CSS 编写样式，要么使用当前处理器，如 SASS 或 Less，来创建它们。你将使用 Autoprefixer 之类的工具添加供应商前缀——手动或使用工具，如 Grunt 或 Gulp。

听起来熟悉吗？如果你觉得它对你有用，为什么还要去打扰它呢，对吧？

问题在于，一个朋友或同事开始谈论一个名为 PostCSS 的新处理器——他们已经足够吸引你的兴趣，让你想要了解更多关于它是什么以及它是如何工作的信息。

好吧，欢迎来到快速发展的 PostCSS 生态系统！单从工具本身来看，它并不做任何事情，但当你搭配正确的插件（并且有数百个可供使用）时，它有可能成为你真正强大的处理器。我们不再需要依赖像 SASS 或 less 这样的单体库。相反，我们可以根据项目需求挑选和选择使用哪些插件。PostCSS 是一个极快的处理器，问题是，你准备好加入这场旅程了吗？

希望答案是肯定的；如果是这样，让我们开始吧。

# 本书涵盖的内容

第一章，*介绍 PostCSS*，以介绍 PostCSS 的世界开始我们的旅程，探索其特性和我们如何使用这个生态系统将基本代码转换为可以在项目中使用的有效 CSS 样式。你将发现使用这个生态系统的优势，以及它的架构和模块化方法如何使我们能够构建一个专门针对我们需求的处理器。

第二章，*创建变量和混入*，探讨了现有处理器用户熟悉的一些基本概念，例如变量和混入。你将学习如何将它们过渡到 PostCSS，并发现使用这些技术的优势如何过渡到使用 PostCSS。

第三章，*嵌套规则*，探讨了现有处理器，如 SASS 或 less，如何利用嵌套等概念来减少我们需要编写的代码量，以及我们如何在 PostCSS 处理器中复制相同的功能。

第四章，*构建媒体查询*，通过 PostCSS 和媒体查询的使用，向我们介绍了添加响应式支持到网站的基本知识。你将学习如何为旧网站和浏览器添加支持，并探讨随着 CSS4 媒体查询的出现，我们如何进一步发展，并在 PostCSS 中提供当前的支持。

第五章, *管理颜色、图像和字体*，检查了用于在 PostCSS 中处理和操作图像、颜色和字体的插件。我们将通过一些示例来说明如何在 PostCSS 中操作图像和颜色，例如创建图像精灵或使用系统中的调色板更改颜色。

第六章, *创建网格*，带我们通过使用网格构建网站骨架的旅程——我们将探索使用网格的基本概念，并发现一些在 PostCSS 中创建网格的插件选项。我们将使用 Bourbon Neat 网格系统进行一些示例，然后在 PostCSS 等效插件中复制这些示例，并添加响应式功能到生成的代码中。

第七章, *动画元素*，首先快速回顾了使用 JavaScript 进行内容动画的方法，然后转向使用 CSS 进行动画，以及如何过渡到使用 PostCSS。我们将探索一些更知名的库，例如 Animate.css，然后使用 PostCSS 创建一个快速演示，并学习如何使用 PostCSS 优化我们的动画。

第八章, *创建 PostCSS 插件*，教我们如何使用插件来扩展 PostCSS，并带我们了解这样一个插件典型的架构。然后，你将查看一些示例插件，在利用可用的模板代码创建你自己的插件并测试之前，以及在使用 PostCSS 将插件提供给用户下载之前。

第九章, *使用快捷方式、回退和打包*，首先检查了一些可用的快捷方式插件和打包工具，然后探索我们如何通过创建自己的快捷方式插件来补充它们。你还将发现如何使用 PostCSS 可用的插件包来 lint 和优化你的代码，以及如何为 PostCSS 代码提供回退，以帮助维护对旧浏览器的支持。

第十章, *构建自定义处理器*，将本书中介绍的一些技术结合起来，以生成一个自定义处理器，我们可以将其用作在项目中转换代码的基础。你将探索如何优化输出，在添加源映射和供应商前缀支持之前，然后在网站上测试它。然后，你将本章以扩展处理器来使用 CSStyle 框架结束，这将允许你编写适用于 SASS 或 PostCSS 的代码。

第十一章，*操作自定义语法*，介绍了使用 API 编写自定义语法，并探讨了使用 SASS 或 less 等语法编写的代码的可用解析选项。在将输出转换为可在屏幕上显示或保存到文件的内容之前，我们将通过一些使用 PostCSS 解析代码的示例来操作。我们还将添加使用 midas 库突出显示代码的支持。

第十二章，*混合预处理程序*，展示了我们如何开始混合处理器作为辅助工具，以帮助过渡到使用 PostCSS。在安装并使用其一些功能之前，我们将查看 Pleeease 库。然后，在使用它来修改标准 WordPress 主题之前，我们将设置一个编译过程。

第十三章，*解决 PostCSS 问题*，探讨了在使用 PostCSS 时我们可能会遇到的一些更常见的问题，例如“taskname 不在我们的 gulpfile 中”错误。如果所有其他方法都失败了，我们还将探讨接下来应该做什么。我们将介绍在 PostCSS 的核心系统或其插件中获取帮助或记录错误详情的方法。

第十四章，*为未来做准备*，涵盖了从人们所知的 CSS4 支持的某些可能选项。你还将探索其中涉及的一些风险以及如何使用现有的插件来复制支持或扩展它们以增加对新 CSS4 选择器的支持。

# 你需要这本书的内容

为了完成这本书中的大多数示例，你需要一个简单的文本或代码编辑器、NodeJS（适用于您的平台）的副本、互联网接入和浏览器。我推荐安装 Sublime Text 3；它与 Node 和 Gulp 配合得很好，我们将在整本书中使用它们。

一些示例使用了额外的插件；大多数（如果不是全部）都可以直接从 NodeJS 内部安装。详细信息包含在相应的章节中，并附有查看插件源代码和文档的链接。

# 这本书面向的对象

这本书是为熟悉 HTML5 和 CSS3 的前端开发者编写的，但希望掌握 PostCSS 作为简化其开发工作流程的一部分或移除对现有处理器（如 SASS 或 Stylus）的依赖。为了最大限度地利用这本书，你应该对 HTML、CSS3 和 JavaScript 有良好的了解，并且最好有一些使用预处理器的经验，例如 SASS、Less 或 Stylus。

# 惯例

在这本书中，你会发现许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称应如下所示：“我们将首先安装此演示所需的相关插件：我们需要 postcss-nested、autocomplete 和 postcss-scss 插件。”

代码块设置如下：

```js
gulp.task('rename', ['styles'], function () {
  return gulp.src('dest/example.css')
    .pipe(postcss([ cssnano ]))
    .pipe(rename('example.min.css'))
    .pipe(gulp.dest("dest/"));
});
```

当我们希望引起你对代码块中特定部分的注意时，相关的行或项目将以粗体显示：

```js
var sourcemaps = require('gulp-sourcemaps');
var rename = require('gulp-rename');
var cssnano = require('cssnano')

```

任何命令行输入或输出都应如下所示：

```js
npm install -–save-dev cssnano
npm install -–save-dev gulp-rename

```

**新术语**和**重要词汇**以粗体显示。屏幕上看到的单词，例如在菜单或对话框中，在文本中显示如下：“当我们查看页面并选择**图像**选项卡后，经过短暂的延迟，我们应该看到六张新图像。”

### 注意

警告或重要提示以如下方式显示在框中。

### 小贴士

小技巧和窍门如下所示。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们你对这本书的看法——你喜欢什么或不喜欢什么。读者的反馈对我们来说很重要，因为它帮助我们开发出你真正能从中获得最大收益的标题。

要发送给我们一般性的反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在邮件的主题中提及书籍的标题。

如果你在某个领域有专业知识，并且对撰写或参与一本书籍感兴趣，请参阅我们的作者指南，链接为[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在你已经是 Packt 书籍的骄傲拥有者，我们有许多事情可以帮助你从购买中获得最大收益。

## 下载示例代码

你可以从[`www.packtpub.com`](http://www.packtpub.com)的账户下载这本书的示例代码文件。如果你在其他地方购买了这本书，你可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给你。

你可以通过以下步骤下载代码文件：

1.  使用你的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的**支持**选项卡上。

1.  点击**代码下载与勘误**。

1.  在**搜索**框中输入书籍的名称。

1.  选择你想要下载代码文件的书籍。

1.  从下拉菜单中选择你购买这本书的地方。

1.  点击**代码下载**。

你也可以通过点击 Packt Publishing 网站书籍网页上的**代码文件**按钮下载代码文件。可以通过在**搜索**框中输入书籍的名称来访问此页面。请注意，你需要登录到你的 Packt 账户。

一旦文件下载完成，请确保使用最新版本的以下软件解压或提取文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

本书代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Mastering-PostCSS-for-Web-Design`](https://github.com/PacktPublishing/Mastering-PostCSS-for-Web-Design)。我们还有来自我们丰富的书籍和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

## 下载本书的彩色图像

我们还为您提供了一个包含本书中使用的截图/图表彩色图像的 PDF 文件。彩色图像将帮助您更好地理解输出变化。您可以从[`www.packtpub.com/sites/default/files/downloads/MasteringPostCSSForWebDesign_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/MasteringPostCSSForWebDesign_ColorImages.pdf)下载此文件。

## 错误清单

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何错误清单，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**错误提交表单**链接，并输入您的错误详细信息来报告它们。一旦您的错误得到验证，您的提交将被接受，错误将被上传到我们的网站或添加到该标题的错误清单部分。

要查看之前提交的错误清单，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在**错误清单**部分。

## 盗版

在互联网上对版权材料的盗版是所有媒体中持续存在的问题。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现任何形式的我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过发送链接到疑似盗版材料至`<copyright@packtpub.com>`与我们联系。

我们感谢您在保护我们作者和我们提供有价值内容的能力方面的帮助。

## 问题

如果您对本书的任何方面有问题，请通过发送邮件至`<questions@packtpub.com>`与我们联系，我们将尽力解决问题。
